WEBVTT

00:00:00.000 --> 00:00:05.000
♪ベース音楽の演奏♪

00:00:05.000 --> 00:00:09.000
♪

00:00:09.000 --> 00:00:12.000
ライアン・チャップマン:こんにちは、WWDCへようこそ。

00:00:12.000 --> 00:00:17.000
こんにちは、私はライアン・チャップマンで、プロアクティブ・インテリジェンスチームで働いています。

00:00:17.000 --> 00:00:22.000
今日は、意図的な寄付でアプリのプレゼンスを拡大する方法についてお話しします。

00:00:22.000 --> 00:00:28.000
私たちのデバイスのオペレーティングシステムは、人々が日々使用するアプリとますます統合されています。

00:00:28.000 --> 00:00:37.000
システムとアプリのこのコラボレーションは、ユーザーに超能力を与えるインテリジェントなシステム体験の中心にあります。

00:00:37.000 --> 00:00:47.000
アプリがこのコラボレーションに参加し、システム全体でアプリのプレゼンスと機能を拡張できる主な方法の1つは、意図を寄付することです。

00:00:47.000 --> 00:01:02.000
このセッションでは、意図的な寄付とは何かを定義し、意図的な寄付の生活を順を追って説明し、成功のために寄付を構造化し、最終的にシステム全体でアプリのプレゼンスを拡大する方法について話します。

00:01:02.000 --> 00:01:06.000
先に進んで、意図的な寄付が何であるかを理解することから始めましょう。

00:01:06.000 --> 00:01:10.000
3年前のiOS 12では、ショートカットを導入しました。

00:01:10.000 --> 00:01:14.000
ショートカットを使用すると、アプリの機能をアクションとして公開できます。

00:01:14.000 --> 00:01:21.000
彼らは、人々がオペレーティングシステム全体で新しい方法と場所であなたのアプリの機能を使用できるようにします。

00:01:21.000 --> 00:01:27.000
これは、ユーザーを引き付け、アプリの範囲を超えてプレゼンスを拡大する本当に強力な方法です。

00:01:27.000 --> 00:01:33.000
公開するすべてのアクションは、アプリの重要な機能を実行することで、加速的であるべきです。

00:01:33.000 --> 00:01:40.000
つまり、ユーザーがすでにアプリでやりたかったことを取り、彼らがそれをさらに速く行うのを助けるべきだということです。

00:01:40.000 --> 00:01:47.000
そして次に、あなたが公開するすべてのアクションは、反復可能であり、ユーザーにとって永続的な関心を持つものでなければなりません。

00:01:47.000 --> 00:01:50.000
つまり、ユーザーが複数回やりたいことがあるはずです。

00:01:50.000 --> 00:01:56.000
誰かが一度か二度したいと思うかもしれない何かのために行動を公開するのは良い考えではありません。

00:01:56.000 --> 00:02:09.000
また、いつでもステートレスで実行可能なアクションのみを公開する必要があります。なぜなら、アクションが使用できるようになる前に、特定の状態にある誰かに頼ることはできないからです。

00:02:09.000 --> 00:02:22.000
素晴らしいアクションを作るものの詳細については、WWDC 2021の「ショートカット、Siri、提案のための素晴らしいアクションをデザインする」というセッションを必ずチェックしてください。

00:02:22.000 --> 00:02:29.000
したがって、公開するアクションを決定したら、ショートカットAPIをチェックする準備が整いました。

00:02:29.000 --> 00:02:33.000
アプリのショートカットを採用するために使用できるAPIは2つあります。

00:02:33.000 --> 00:02:36.000
1つ目はNSUserActivityです。

00:02:36.000 --> 00:02:44.000
NSUserActivityは、アプリの状態を表す軽量な方法であり、SpotlightやHandoffなどの他のApple機能と統合されています。

00:02:44.000 --> 00:02:47.000
そして2つ目は意図です。

00:02:47.000 --> 00:03:00.000
インテントは、アプリが実行できるアクションの種類を詳細に表現する方法であり、Siriには、システムと統合するために使用できるさまざまな機能をサポートする多くの優れた組み込みインテントが含まれています。

00:03:00.000 --> 00:03:07.000
インテントは、ショートカットで使用するための独自のカスタムインテントを定義する機能もサポートしています。

00:03:07.000 --> 00:03:18.000
APIとアプリにショートカットを採用する方法の詳細については、WWDC 2018の「Siriショートカット入門」セッションを必ずご覧ください。

00:03:18.000 --> 00:03:28.000
このセッションでは、インテントに焦点を当て、システム全体でアプリの機能を提供するための新規および既存の機会について説明します。

00:03:28.000 --> 00:03:35.000
意図の寄付を行うための最初のステップは、どのような意図を採用するかを決定することです。

00:03:35.000 --> 00:03:44.000
Siriには、メッセージング、予約、メディアなど、多くの素晴らしい組み込みの意図が含まれています。

00:03:44.000 --> 00:03:50.000
Xcode for Shortcutsでカスタムインテントを定義する機能もあります。

00:03:50.000 --> 00:03:57.000
したがって、構築したいアクションがデフォルトの組み込みのSiriKitインテントの1つに対応する場合は、それを採用する必要があります。

00:03:57.000 --> 00:04:04.000
しかし、それ以外の場合は、Xcodeのインテント定義ファイルを使用して独自の定義を定義できます。

00:04:04.000 --> 00:04:12.000
どの意図を採用するかを決定し、アプリで定義したら、意図的な寄付を開始できます。

00:04:12.000 --> 00:04:18.000
意図的な寄付は、人がアプリでアクションを実行したときにシステムに伝える行為です。

00:04:18.000 --> 00:04:26.000
システムはこれらの寄付を保存し、それらを使用して、システム全体でアプリの機能とプレゼンスを拡大します。

00:04:26.000 --> 00:04:37.000
意図を寄付するアプリは、提案、ショートカット、フォーカス、スマートスタック、Siriなど、システム全体の場所に表示されます。

00:04:37.000 --> 00:04:47.000
意図的な寄付が何であるかを高いレベルで理解したので、例を使って意図的な寄付の生活を通して、これをより具体的にしましょう。

00:04:47.000 --> 00:04:51.000
天気アプリで天気をチェックする例を使ってみましょう。

00:04:51.000 --> 00:05:00.000
このアプリでは、特定の場所の天気をチェックすることは、アクションを公開したいアプリの重要な機能です。

00:05:00.000 --> 00:05:10.000
このアプリにはすでに既存のウィジェットがあり、私の意図を使って設定可能にしたいので、誰かがウィジェットで天気を見たい都市を選択することができます。

00:05:10.000 --> 00:05:19.000
先に進んで、天気の意図を確認する方法、システムに寄付する方法、およびシステムが寄付をどのように使用するかを学びましょう。

00:05:19.000 --> 00:05:25.000
Xcodeでインテントを定義する最初のステップは、インテント定義ファイルを作成することです。

00:05:25.000 --> 00:05:31.000
これを行うには、新しいファイルを追加します...

00:05:31.000 --> 00:05:39.000
...そして、SiriKit Intent Definition Fileを選択します。

00:05:39.000 --> 00:05:49.000
次に、カスタムインテントを使用するターゲットを選択し、インテント定義ファイルを作成することを確認します。

00:05:49.000 --> 00:05:55.000
インテント定義ファイルが作成されたら、インテントを定義できます。

00:05:55.000 --> 00:06:03.000
天気をチェックするための既存の組み込みシステムの意図がなかったので、先に進んで新しい意図を追加することができます。

00:06:03.000 --> 00:06:09.000
私は意図を「天気をチェック」と呼びます。

00:06:09.000 --> 00:06:12.000
ここから、私は意図を定義し始めることができます。

00:06:12.000 --> 00:06:21.000
このインテントをアプリの既存のウィジェットの構成として機能させたいので、「インテントはウィジェットの対象です」オプションをチェックすることから始めます。

00:06:21.000 --> 00:06:29.000
このシステムは、私の意図的な寄付を使用して、スマートスタックウィジェットのインテリジェンスを強化することもできます。

00:06:29.000 --> 00:06:38.000
ショートカットアプリもサポートしたい場合は、「ショートカットアプリでインテントがユーザー設定可能で、Siriに追加」オプションをチェックしてください。

00:06:38.000 --> 00:06:43.000
このデモでは、このオプションのチェックを外し、ウィジェットと提案に焦点を当てます。

00:06:43.000 --> 00:06:53.000
また、システムが私の意図のためにSiriの提案を表面化するために私の寄付を使用したいので、「意図はSiriの提案の対象です」オプションもチェックしたままにします。

00:06:53.000 --> 00:06:57.000
次に、私の意図のパラメータを定義する必要があります。

00:06:57.000 --> 00:07:06.000
天気をチェックする場所のパラメータを1つだけ定義できます。

00:07:06.000 --> 00:07:09.000
次に、パラメータのタイプを選択する必要があります。

00:07:09.000 --> 00:07:20.000
この場所は、アプリが天気を持っている都市に対応する私のアプリ内のオブジェクトを表すので、このパラメータを表すためにカスタムタイプを使用します。

00:07:20.000 --> 00:07:28.000
先に進んで、識別子とdisplayStringを持つ都市のカスタムタイプを作成できます。

00:07:28.000 --> 00:07:30.000
位置パラメータに戻りましょう。

00:07:30.000 --> 00:07:35.000
場所のタイプが新しいカスタムシティタイプであることがわかります。

00:07:35.000 --> 00:07:44.000
この意図をウィジェットの設定に使用したいので、ユーザーがウィジェットの値を編集できるようにするオプションを維持します。

00:07:44.000 --> 00:07:52.000
このインテントは、このデモのSiriでの実行をサポートしていないため、「Siriは実行時に値を尋ねることができます」オプションのチェックを外します。

00:07:52.000 --> 00:08:06.000
人々がウィジェットを設定すると、天気の場所のリストはアプリによって提供される必要があり、その人が保存した都市によって変更されるため、「オプションは動的に提供される」チェックボックスをオンにします。

00:08:06.000 --> 00:08:11.000
最後に、提案のためにサポートされているパラメータの組み合わせを定義する必要があります。

00:08:11.000 --> 00:08:18.000
システムは、インテント定義ファイルを読み取り、アプリが予測のためにサポートするインテントとパラメータの組み合わせを決定します。

00:08:18.000 --> 00:08:24.000
この場合、アプリはロケーションパラメータが設定されたインテントをサポートします。

00:08:24.000 --> 00:08:33.000
先に進み、そのパラメータをサポートされている組み合わせとして追加します。

00:08:33.000 --> 00:08:41.000
次に、提案に示されている要約を定義します。

00:08:41.000 --> 00:08:42.000
そして、それだけです。

00:08:42.000 --> 00:08:48.000
ウィジェットや提案で使用できる天気をチェックするカスタムインテントを定義しました。

00:08:48.000 --> 00:08:56.000
意図が定義されたので、誰かがアプリで特定の場所の天気をチェックするたびに、システムに意図を寄付する必要があります。

00:08:56.000 --> 00:09:03.000
インテントを寄付するには、インテントクラスのインスタンスを作成し、そのパラメータ値を設定します。

00:09:03.000 --> 00:09:15.000
インテントを作成した後、INInteractionオブジェクトのインスタンスを作成し、インテントを渡し、インタラクションオブジェクトのdonateメソッドを呼び出してインテントをシステムに寄付します。

00:09:15.000 --> 00:09:23.000
舞台裏では、システムは、意図が寄付されたときに人がいた文脈とともに、時間の経過とともにこれらの寄付を保存します。

00:09:23.000 --> 00:09:29.000
彼らが天気アプリで天気をチェックし続けるにつれて、アプリは意図的な寄付を続けています。

00:09:29.000 --> 00:09:35.000
この場合、彼らはクパチーノとサンディエゴの天気をチェックしています。

00:09:35.000 --> 00:09:41.000
システムは、インテントパラメータを使用して、インテントが同等であるかどうかを判断します。

00:09:41.000 --> 00:09:49.000
寄付の色が示すように、2つのクパチーノの寄付は同等であり、2つのサンディエゴの寄付とは異なります。

00:09:49.000 --> 00:09:55.000
実際には、システムはその人のデバイス上の他の多くのアプリからも寄付を受け取ります。

00:09:55.000 --> 00:10:04.000
いつでも寄付を削除したい場合は、削除APIを使用して、単一の寄付または寄付のグループを削除できます。

00:10:04.000 --> 00:10:14.000
たとえば、誰かが保存された天気の場所からサンディエゴの天気の場所を削除した場合、サンディエゴの場所に関連する意図を削除できます。

00:10:14.000 --> 00:10:22.000
人々があなたのアプリで関連性のない行動の提案を受け取らないように、寄付を削除することが重要です。

00:10:22.000 --> 00:10:33.000
インテントを寄付するとき、INInteraction識別子とグループ識別子を使用して、後で寄付した1つ以上のINInteractionを削除できます。

00:10:33.000 --> 00:10:42.000
識別子の配列を渡して個々のインタラクションを削除するか、グループ識別子を渡してインタラクションのグループを削除することができます。

00:10:42.000 --> 00:10:46.000
では、これらの意図的な寄付はすべてシステムによってどのように使用されていますか?

00:10:46.000 --> 00:10:52.000
システムが数日間にわたって見る寄付履歴を高レベルで見てみましょう。

00:10:52.000 --> 00:10:59.000
ここでは、人への3日間の寄付と、彼らが目を覚ましたときから始めて、1日を通して行われた寄付を見ることができます。

00:10:59.000 --> 00:11:11.000
このシステムは、機械学習とオンデバイスインテリジェンスを使用して、データ内のパターンを見つけ、人の現在の状況と過去の行動パターンを考慮して、どのような意図が関連するかを予測します。

00:11:11.000 --> 00:11:18.000
この場合、この人が目を覚ました後に天気をチェックすることに関連するパターンを持っていることがわかります。

00:11:18.000 --> 00:11:27.000
デバイス上のインテリジェンスは、ユーザー向け機能と統合され、アプリの機能とプレゼンスをユーザーに公開します。

00:11:27.000 --> 00:11:31.000
この露出がどこで行われるかの例をいくつか見てみましょう。

00:11:31.000 --> 00:11:45.000
その前に、すべての機械学習とインテリジェンスがプライバシーを保護する方法でデバイス上で実行されることは注目に値します。つまり、Appleはユーザーを個人的に識別するために使用できるデータを収集しません。

00:11:45.000 --> 00:11:49.000
そう言っても、天気の例に戻りましょう。

00:11:49.000 --> 00:11:54.000
定義した意図を使用して、アプリの既存のウィジェットを設定可能にすることができます。

00:11:54.000 --> 00:12:03.000
インテントを使用するようにウィジェットを設定した後、人々はウィジェットで天気を見たい場所を選択することができます。

00:12:03.000 --> 00:12:13.000
ウィジェットの設定意図に一致するアプリの寄付インテントにより、システムはアプリのスマートスタックウィジェットインテリジェンスを人々に提供できるようになりました。

00:12:13.000 --> 00:12:18.000
スマートスタックでホーム画面の設定をしている人がいるとしましょう。

00:12:18.000 --> 00:12:32.000
iOS 15の新機能であるスマートスタックはウィジェットの提案をサポートしています。これにより、システムは、ユーザーがスタックに持っていないウィジェットを適切なタイミングでスタックの上に配置することで提案できます。

00:12:32.000 --> 00:12:43.000
ウィジェットを提案する必要があるかどうかと提案を行う正しい時間を決定するために、システムはウィジェット構成の意図に合った意図の寄付を活用します。

00:12:43.000 --> 00:12:51.000
天気の例では、人が目を覚ました後、スマートスタックはちょうど良いタイミングで天気ウィジェットをスタックの一番上に配置しました。

00:12:51.000 --> 00:12:57.000
これは、人々があなたのウィジェットを発見し、 glance可能な情報を提供するための素晴らしい方法です。

00:12:57.000 --> 00:13:03.000
すでにスタックにウェザーウィジェットがあれば、代わりにウェザーウィジェットに回転していただろう。

00:13:03.000 --> 00:13:13.000
ウィジェットに構成とインテリジェンスを追加する方法の詳細については、2020年のWWDCセッションをご覧ください。

00:13:13.000 --> 00:13:27.000
あなたの意図的な寄付は、ロック画面、スポットライト検索、Siri提案ウィジェットに表示されるSiri提案の背後にあるデバイス上のインテリジェンスにも電力を供給します。

00:13:27.000 --> 00:13:33.000
これらの提案により、人々はワンタップでアプリの主要な機能を実行できます。

00:13:33.000 --> 00:13:46.000
インテントは、macOS、iOS、watchOSのシンプルまたは複雑なマルチステップショートカットの一部として、組み込みのショートカットアプリでも使用できます。

00:13:46.000 --> 00:13:53.000
また、寄付は、ショートカットアプリギャラリーで人々に提案されるアクションを決定するためにも使用されます。

00:13:53.000 --> 00:14:00.000
また、Siriに尋ねるだけで、音声ショートカットを設定してカスタムインテントを実行することもできます。

00:14:00.000 --> 00:14:12.000
組み込みのINSendMessageIntentを使用することを選択した場合、インテントの寄付は、ユーザーが自分にとって最も重要な人々やグループにコンテンツを簡単に入手できるようにするための提案を共有するために使用されます。

00:14:12.000 --> 00:14:24.000
iOS 15の新機能、INSendMessageIntentsを寄付する場合、システムは寄付者を使用して、誰がユーザーの現在のフォーカスに強く関連しているかを判断します。

00:14:24.000 --> 00:14:33.000
これらの強力な関連付けは、特定の人々をメッセージを受け取ったときに許可された通知リストに追加するための提案をするために使用できます。

00:14:33.000 --> 00:14:46.000
この場合、Agaは、このユーザーがAgaとの過去のやり取りに基づいて、Work Focusの許可された通知リストに追加することを検討すべき人として提案されていることがわかります。

00:14:46.000 --> 00:15:01.000
組み込みのINGetReservationDetailsIntentを使用することを選択した場合、インテントの寄付は、現在の交通状況に基づいてレストランの予約のために出発する時期と、フライトにチェックインする時期をユーザーに通知するために使用されます。

00:15:01.000 --> 00:15:10.000
マップを開くとSiriの提案も表示されるので、ワンタップで空港への道順を調べるのにとても便利です。

00:15:10.000 --> 00:15:24.000
iOS 15の新機能、組み込みのINPlayMediaIntentを使用することを選択した場合、インテントの寄付は、ロック画面、コントロールセンター、ホームアプリの新しい再生中UIに表示されます。

00:15:24.000 --> 00:15:32.000
これは、ユーザーがアプリからお気に入りのコンテンツを聴いたり見たりするための素晴らしい方法です。

00:15:32.000 --> 00:15:38.000
人々は、ポッドキャスト、テレビ番組、映画などの定期的なメディアコンテンツをアプリで消費する可能性があります。

00:15:38.000 --> 00:15:50.000
このような場合、INUpcomingMediaManager APIを使用して、ユーザーが聴いたり見たりしていないコンテンツのメディアインテントのリストをシステムに提供することができるので、興味があるかもしれません。

00:15:50.000 --> 00:15:57.000
このシステムは、過去のメディアの寄付とアプリの今後のメディアを組み合わせて、より良いメディアの提案を行います。

00:15:57.000 --> 00:16:04.000
INRelevantShortcut APIを使用して、Siri Watch Faceにインテントを表示することもできます。

00:16:04.000 --> 00:16:14.000
INRelevantShortcut APIを使用すると、ショートカットを時計の文字盤に表示する時間や場所など、関連性情報をシステムに公開できます。

00:16:14.000 --> 00:16:24.000
Siriウォッチフェイスでショートカットを公開する方法の詳細については、2018年のWWDCセッションの「SiriウォッチフェイスのSiriショートカット」をご覧ください。

00:16:24.000 --> 00:16:35.000
iOS 15の新機能では、WidgetKindプロパティがINRelevantShortcutオブジェクトに追加され、対応するウィジェットをスマートスタックに表示するタイミングをシステムにヒントに示すことができます。

00:16:35.000 --> 00:16:43.000
このプロパティとその使用方法の詳細については、WWDC 2021の「ウィジェットにインテリジェンスを追加する」セッションをご覧ください。

00:16:43.000 --> 00:17:01.000
要約すると、私たちは意図の寄付の生活を見て、スマートスタック、フォーカス、提案、ショートカット、Siriなどのますます多くの場所にシステム全体でアプリのプレゼンスと機能を拡大するためにそれらがどのように使用されているかを見ました。

00:17:01.000 --> 00:17:13.000
意図的な寄付の生活を見て、成功のために寄付を構造化し、最終的にシステム全体でアプリのプレゼンスを拡大する方法について、より詳細に話しましょう。

00:17:13.000 --> 00:17:17.000
コーヒーアプリでコーヒーを注文する新しい例を使ってみましょう。

00:17:17.000 --> 00:17:25.000
これまでのところ、私は注文コーヒーの意図を定義し、コーヒーのサイズとコーヒーアイテムの2つのパラメータを公開しました。

00:17:25.000 --> 00:17:29.000
この場合、大きなアイスラテがあります。

00:17:29.000 --> 00:17:34.000
意図的な寄付に注文日を含めると、何がうまくいかないのかを見てみましょう。

00:17:34.000 --> 00:17:41.000
2021年6月7日に大きめのアイスラテの寄付が入ってくるので、順調に始まります。

00:17:41.000 --> 00:17:53.000
しかし、日付が変更されると、意図の日付パラメータは新しい値を持ち、システムは、両方の寄付が同じアイテムとサイズを持っているにもかかわらず、2回目の寄付をまったく異なる意図として扱います。

00:17:53.000 --> 00:18:02.000
このシステムは、時間の経過とともに寄付を異なる方法で扱い続けており、寄付の色に基づいて、日ごとに同等ではないことがわかります。

00:18:02.000 --> 00:18:13.000
システムが数日間にわたって見る寄付履歴の高レベルのビューを見ると、システムが大きなアイスラテを注文するために見つけることができる意味のあるパターンがないことがわかります。

00:18:13.000 --> 00:18:19.000
何がうまくいかなかったのかを理解するために、意図定義ファイルにどのように記入したかを見てみましょう。

00:18:19.000 --> 00:18:24.000
アイテム、サイズ、日付の3つのパラメータを定義しました。

00:18:24.000 --> 00:18:29.000
そして、3つのパラメータすべてでサポートされているパラメータの組み合わせを追加しました。

00:18:29.000 --> 00:18:37.000
これは、3つのパラメータすべてを使用して、予測のための意図的な寄付のパターンを見つける方法を決定する必要があることをシステムに伝えます。

00:18:37.000 --> 00:18:47.000
この場合、サポートされているアイテムとサイズの組み合わせに日付を含めることで、システムは寄付全体のパターンを適切に見つけることができませんでした。

00:18:47.000 --> 00:18:55.000
この問題を解決するために、代わりにサイズとアイテムのパラメータのみを含むサポートされている組み合わせを定義できます。

00:18:55.000 --> 00:19:05.000
これにより、システムは、意図的な寄付を比較して時間の経過とともにパターンを見つけるときに、アイテムとサイズのパラメータのみを使用する必要があることを知っています。

00:19:05.000 --> 00:19:11.000
今、システムには、日付を含まない大きなアイスラテの寄付が表示されます。

00:19:11.000 --> 00:19:16.000
そして2日目に、システムは大きなアイスラテの同等の寄付を見ます。

00:19:16.000 --> 00:19:19.000
そして3日目も同じです。

00:19:19.000 --> 00:19:29.000
寄付履歴の高レベルのビューをもう一度見ると、目が覚めた直後に大きなアイスラテを注文することに関連するパターンがあることがわかります。

00:19:29.000 --> 00:19:39.000
寄付の利益を最大化するために、意図的な寄付が繰り返される可能性が高く、寄付する意図のペイロードが寄付全体で一貫していることを確認してください。

00:19:39.000 --> 00:19:42.000
つまり、タイムスタンプを含めないということです。

00:19:42.000 --> 00:19:51.000
要約すると、システムは私たちが日々使用するアプリとますます統合されており、意図的な寄付は重要な統合ポイントです。

00:19:51.000 --> 00:19:57.000
システム全体にアプリの機能とプレゼンスを拡大することで、意図を寄付することで利益を得ることができます。

00:19:57.000 --> 00:20:02.000
聞いてくれてありがとう、WWDC 2021の素晴らしい残りをお過ごしください。

00:20:02.000 --> 23:59:59.000
♪

