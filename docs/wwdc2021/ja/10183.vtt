WEBVTT

00:00:00.000 --> 00:00:05.000
♪ベース音楽の演奏♪

00:00:05.000 --> 00:00:09.000
♪

00:00:09.000 --> 00:00:11.000
ピエール・ド・フィリッピス:こんにちは。私の名前はピエールです。

00:00:11.000 --> 00:00:17.000
私はコミュニケーションアプリケーションチームのマネージャーで、後で同僚のBhaskarが加わります。

00:00:17.000 --> 00:00:28.000
「Meet Group Activities」にあなたをお迎えできて光栄です。私たちは皆、この1年間、つながりを維持する方法を見つけることがこれまで以上に不可欠だと感じたことを認識できると思います。

00:00:28.000 --> 00:00:35.000
これはAppleにとって非常に重要であり、私たちはユーザーに有意義な新しいつながりの方法を提供したかったのです。

00:00:35.000 --> 00:00:44.000
その結果、iOS 15では、あなたと共有する人々と同じ部屋にいるように感じさせる、一緒にアクティビティを楽しむ新しい方法を作成しています。

00:00:44.000 --> 00:00:47.000
そして、私たちはそれを「シェアプレイ」と呼んでいます。

00:00:47.000 --> 00:00:56.000
SharePlayはグループアクティビティフレームワークによって強化されており、このセッションでは、アプリケーションで採用する方法について説明します。

00:00:56.000 --> 00:01:03.000
これらの詳細に入る前に、SharePlayの主要コンポーネントについてもう少しお話ししましょう。

00:01:03.000 --> 00:01:06.000
コミュニケーションから始めましょう。

00:01:06.000 --> 00:01:16.000
私たちは、ダイナミックで自然なコミュニケーションが有意義な共有体験の非常に重要な部分であると考えているので、SharePlayをFaceTimeとメッセージに組み込みました。

00:01:16.000 --> 00:01:25.000
私たちは、特に昨年、これらのアプリが人々の生活や人間関係においてどのように中心的になったかに絶えず圧倒されています。

00:01:25.000 --> 00:01:30.000
そして、人々は30年前のその友人と時々つながるためにFaceTimeとメッセージを使用するだけではありません。

00:01:30.000 --> 00:01:40.000
代わりに、私たちのユーザーは、彼らに最も近い人々、彼らの最も親しい友人、そして彼らの最も近い家族とのコミュニケーションにかなりの時間を費やしています。

00:01:40.000 --> 00:01:48.000
それらは、例えば、あなたが映画を見るためにあなたのリビングルームに招待する種類の人々であり、それはまさに私たちがSharePlayで促進したいものです。

00:01:48.000 --> 00:01:51.000
これがどのように機能するかについて考えてみましょう。

00:01:51.000 --> 00:01:54.000
すべてはセッションの概念から始まります。

00:01:54.000 --> 00:02:01.000
グループがアクティビティを開始する前に、全員が一緒になって共有する準備ができているように、セッションに参加する必要があります。

00:02:01.000 --> 00:02:11.000
ユーザーがセッションに入ると、慣れているように、メッセージやFaceTimeでテキスト、オーディオ、ビデオを介して通信できます。

00:02:11.000 --> 00:02:20.000
これらの通信モードの切り替えは動的で流動的であるため、その瞬間に合った通信方法を簡単に選択できます。

00:02:20.000 --> 00:02:25.000
また、セッションを管理するための一貫したシステム全体の方法も提供します。

00:02:25.000 --> 00:02:29.000
ユーザーは、その場で新しい人を招待したり、セッションから完全に離脱したりできます。

00:02:29.000 --> 00:02:35.000
セッションに入ると、ユーザーはシステム全体をナビゲートし、任意のアプリにドロップインできます。

00:02:35.000 --> 00:02:40.000
開発者として、グループアクティビティで無料で入手できます。

00:02:40.000 --> 00:02:42.000
それがコミュニケーションです。

00:02:42.000 --> 00:02:46.000
私たちが重要だと思う次の分野は、プラットフォームの経験です。

00:02:46.000 --> 00:02:53.000
私たちは、この経験がシンプルで一貫性があり、システムとデバイス全体で利用可能であることを望んでいます。

00:02:53.000 --> 00:03:08.000
グループアクティビティでは、iOS、iPadOS、macOSで機能する統一されたエクスペリエンスを構築しています。グループアクティビティは、WebKitを使用してWebサイトでも利用できます。

00:03:08.000 --> 00:03:12.000
AppleTVでも美しく機能するので、大画面で楽しむことができます。

00:03:12.000 --> 00:03:22.000
セッション中にすべてのデバイスが認識されるため、どのデバイスからでも参加でき、複数のデバイスをシームレスに使用できます。

00:03:22.000 --> 00:03:28.000
最後に、AirPodsを含むBluetoothデバイスに優れたオーディオを提供するように設計しました。

00:03:28.000 --> 00:03:34.000
プラットフォーム体験の一環として、私たちはコンテンツの再生のために特別なことをしています。

00:03:34.000 --> 00:03:47.000
APIの表現力を最大限に活用して、さまざまな種類のSharePlayアクティビティを作成することを願っていますが、共有メディア体験を簡単に構築できる、本当にクールな機能強化を作成しました。

00:03:47.000 --> 00:03:57.000
メディアエクスペリエンスの中核は再生ボタンです。ユーザーがどのコンテンツに時間を費やしたいかを決める瞬間です。

00:03:57.000 --> 00:04:01.000
私たちの目標は、システム全体のすべての再生ボタンがSharePlayで動作することです。

00:04:01.000 --> 00:04:12.000
私たちは、あなたのアプリ内のメディアが、友人とFaceTimeをしているときはいつでも、共有体験を開始する準備ができていると人々に感じてもらいたいです。

00:04:12.000 --> 00:04:17.000
既存のコードパスにぴったり合うように設計された新しいAPIを提供しています。

00:04:17.000 --> 00:04:27.000
グループアクティビティを採用することで、グループ会話がアクティブなときはいつでも、再生ボタンでこれらの共有メディア体験を開始できるようになりました。

00:04:27.000 --> 00:04:35.000
そして、時間の経過とともにスマートを使用してユーザーの行動に適応し、共有体験を楽にします。

00:04:35.000 --> 00:04:38.000
次は時間同期再生です。

00:04:38.000 --> 00:04:46.000
私たちは、人々が一緒に笑い、一緒に微笑み、同時にコンテンツに反応することが非常に重要だと思います。

00:04:46.000 --> 00:04:56.000
SharePlayは、再生時間をプラットフォームレベルで同期させるので、単に採用することができ、自分で転がすことを心配する必要はありません。

00:04:56.000 --> 00:05:02.000
さて、SharePlayでコンテンツを消費することに関しては、これは解決すべき困難な問題でした。

00:05:02.000 --> 00:05:09.000
私たちは、たとえ彼らが世界の半分にいても、人々がお互いにまったく同じ瞬間を体験できるようにしたかったのです。

00:05:09.000 --> 00:05:13.000
まだ起こっていないことを友達が笑うのを見たり聞いたりすることを想像してみてください。

00:05:13.000 --> 00:05:14.000
ネタバレ注意！

00:05:14.000 --> 00:05:23.000
そこで、デバイス上のAVFoundationスタックに深く統合されたまったく新しい再生同期プロトコルを構築しました。

00:05:23.000 --> 00:05:29.000
つまり、誰かが再生を押すと、グループ内の全員がすぐに同時に再生を開始します。

00:05:29.000 --> 00:05:39.000
お気に入りのシーンにジャンプすると、他のみんなもそれを見て、まるで同じ部屋にいるかのように、人々が完璧な同期で一緒に瞬間を体験することができます。

00:05:39.000 --> 00:05:45.000
この再生同期の背後にある魔法は、いかなる方法でもあなたのメディアを再送信しないことを意味します。

00:05:45.000 --> 00:05:54.000
アプリから直接再生され、いつものようにサーバーからストリーミングされるため、誰もがあなたの完全な忠実度のビデオを取得します。

00:05:54.000 --> 00:06:05.000
そして、すべての視聴者が最高品質のビデオを見ていることを確認することで、コンテンツの品質を損なうことのない没入型のソーシャル視聴体験を得ることができます。

00:06:05.000 --> 00:06:10.000
また、再生中にコミュニケーションを自然に感じさせるための画期的な作業も行っています。

00:06:10.000 --> 00:06:19.000
スマートボリュームを使用すると、再生中に人々が声を上げると、自動的にコンテンツのオーディオをダックし、必要に応じて元に戻します。

00:06:19.000 --> 00:06:27.000
そのため、人々は同じ部屋に座っているのと同じように、音声、ビデオ、テキストを介して自然にコミュニケーションをとることができます。

00:06:27.000 --> 00:06:36.000
そしてもちろん、それはピクチャー・イン・ピクチャーで美しく機能するので、ユーザーはデバイス上でマルチタスクをしながら、あなたのコンテンツと一緒に取ることができます。

00:06:36.000 --> 00:06:40.000
だから、それは私たちがプラットフォームでやっていることの簡単な概要です。

00:06:40.000 --> 00:06:44.000
そして最後に、コンテンツ。そして、それはあなたが入るところです。

00:06:44.000 --> 00:06:50.000
私たちは、ユーザーがあなたのアプリで利用可能にした最高のコンテンツを楽しむことができることを望んでいます。

00:06:50.000 --> 00:06:57.000
人々がFaceTime通話をしているとき、彼らはあなたのアプリに入ってあなたのコンテンツを共有できることを期待するでしょう。

00:06:57.000 --> 00:07:05.000
SharePlayを使用すると、製品のタッチポイントを拡張し、アプリがユーザーに関連する時間を増やすことができます。

00:07:05.000 --> 00:07:07.000
そして、これは非常に有機的に起こります。

00:07:07.000 --> 00:07:14.000
既存のユーザーは、他の人とSharePlayを使用しているときに、あなたのアプリを伝道します。

00:07:14.000 --> 00:07:24.000
SharePlayの主要コンポーネントの概要を簡単に説明したので、フレームワークのコアコンセプトであるグループ活動に注意を向けましょう。

00:07:24.000 --> 00:07:33.000
グループアクティビティは、SharePlayを使用してFaceTime通話の人々と共有して楽しむことができるものを表すオブジェクトです。

00:07:33.000 --> 00:07:38.000
ユーザーがアプリでグループアクティビティを開始する方法を説明します。

00:07:38.000 --> 00:07:48.000
通話中、ユーザーはアプリに移動でき、グループアクティビティを採用した場合は、アプリがSharePlayをサポートしていることが通知されます。

00:07:48.000 --> 00:07:56.000
共有するアクティビティを設定するには、まずGroupActivityプロトコルを実装するオブジェクトを作成する必要があります。

00:07:56.000 --> 00:08:03.000
アクティビティを設定したら、prepareForActivation APIを呼び出すと、そのアクティビティの共有を開始します。

00:08:03.000 --> 00:08:11.000
このAPIは、そのアクティビティをFaceTime通話の全員と共有するか、ローカルに保つかのオプションをユーザーに提供します。

00:08:11.000 --> 00:08:19.000
グループと共有することにした場合、グループアクティビティが通知し、GroupSessionオブジェクトに参加できます。

00:08:19.000 --> 00:08:27.000
ユーザーがグループセッションに参加すると、再生、一時停止、またはシークしても、ビデオはグループと同期されます。

00:08:27.000 --> 00:08:34.000
これらのイベントが発生するたびに、ここに示すように、グループアクティビティは自動的にユーザーに通知します。

00:08:34.000 --> 00:08:41.000
そして最後に、ユーザーが完了したら、彼らは自分自身またはグループ全体のために活動を終了することを選択できます。

00:08:41.000 --> 00:08:44.000
それはそれと同じくらい簡単です!

00:08:44.000 --> 00:08:49.000
さて、このプレゼンテーションの残りの部分を案内するBhaskarに渡します。

00:08:49.000 --> 00:08:50.000
バスカル・サルマ:ありがとう、ピエール。

00:08:50.000 --> 00:08:55.000
こんにちは、私の名前はBhaskarで、FaceTimeチームのエンジニアです。

00:08:55.000 --> 00:09:00.000
それでは、この新しいフレームワークの背後にある高レベルの概念とアーキテクチャのいくつかについて話しましょう。

00:09:00.000 --> 00:09:10.000
GroupActivitiesは、FaceTime通話中にアプリケーションのユーザー間で共有エクスペリエンスを作成できるSwiftネイティブフレームワークです。

00:09:10.000 --> 00:09:21.000
さらに、このフレームワークはAVFoundationと緊密に統合されており、共有ビデオとオーディオの再生体験を簡単に作成できます。

00:09:21.000 --> 00:09:31.000
APIの背後にある高レベルの概念について説明する前に、APIの2つの重要な部分について話したいと思います。これらはGroupActivityとGroupSessionです。

00:09:31.000 --> 00:09:37.000
GroupActivityは、アプリが共有エクスペリエンスを定義するために使用するものです。

00:09:37.000 --> 00:09:41.000
アプリケーションが共有エクスペリエンスに必要な情報を保持します。

00:09:41.000 --> 00:09:50.000
たとえば、共有オーディオまたはビデオの再生エクスペリエンスを行っている場合、再生中のコンテンツのURLを保持する場合があります。

00:09:50.000 --> 00:09:53.000
または、アプリケーションがカスタム共有エクスペリエンスを提供する場合があります。

00:09:53.000 --> 00:09:57.000
たとえば、ドロー・アロー・エクスペリエンスを提供することができます。

00:09:57.000 --> 00:10:02.000
その場合、これはユーザーが描画しているものに関する情報を保持します。

00:10:02.000 --> 00:10:08.000
GroupSessionは基本的に、共有された経験に参加するグループの表現です。

00:10:08.000 --> 00:10:13.000
グループの参加者のようなものへのアクセスを提供します。

00:10:13.000 --> 00:10:21.000
また、フレームワークには追加のAPIがあり、GroupSessionと一緒に使用して、デバイス間でデータを送受信できます。

00:10:21.000 --> 00:10:26.000
GroupSessionは大量のデータを交換するものではありませんのでご注意ください。

00:10:26.000 --> 00:10:35.000
たとえば、共有リスニングエクスペリエンスを作成する場合、GroupSessionは曲の内容を交換するために使用されません。

00:10:35.000 --> 00:10:45.000
代わりに、このチャンネルはAVFoundationによって使用され、再生、一時停止、またはシークコマンドを交換することでコンテンツを同期させます。

00:10:45.000 --> 00:10:51.000
また、GroupSessionが提供する通信媒体はエンドツーエンドで暗号化されています。

00:10:51.000 --> 00:11:01.000
これは、デバイス上のアプリケーション以外の誰も、このチャネルを介して交換されるデータを読み取ることができないことを意味します。

00:11:01.000 --> 00:11:03.000
ここでは、画面に2台の電話があります。

00:11:03.000 --> 00:11:09.000
左側は私の電話、右側はチームメイトのピエールの電話です。

00:11:09.000 --> 00:11:11.000
そして、私たちはFaceTime通話中です。

00:11:11.000 --> 00:11:22.000
また、画面に「素晴らしいアプリ」と呼ばれるサンプルアプリケーションがあり、アプリは私とピエールの間で共有体験を開始する準備ができています。

00:11:22.000 --> 00:11:28.000
したがって、この場合、左側のデバイス上のアプリケーションがアクティビティを開始します。

00:11:28.000 --> 00:11:34.000
アプリケーションが最初に行う必要があるのは、GroupActivityプロトコルに準拠したオブジェクトを作成することです。

00:11:34.000 --> 00:11:42.000
ここに示す例では、GroupActivityに準拠したAwesomeActivityオブジェクトです。

00:11:42.000 --> 00:11:51.000
先に述べたように、GroupActivityプロトコルに準拠したこのオブジェクトには、共有アクティビティに関する情報が含まれています。

00:11:51.000 --> 00:11:59.000
たとえば、共有再生エクスペリエンスを作成する場合、再生するコンテンツに関する情報が表示されます。

00:11:59.000 --> 00:12:07.000
または、一緒に何かを描くようなカスタムエクスペリエンスを作成する場合は、何を描くかについての情報があります。

00:12:07.000 --> 00:12:15.000
アプリがアクティビティを作成したら、次に行う必要があるのは、アクティビティのprepareForActivationを呼び出すことです。

00:12:15.000 --> 00:12:21.000
これにより、アクティビティを開始する場合に許可を求めるプロンプトが表示されます。

00:12:21.000 --> 00:12:28.000
私たちは、彼らに驚きを与えたくないので、活動を開始する前にユーザーの同意を得たい。

00:12:28.000 --> 00:12:31.000
したがって、このステップは不可欠です。

00:12:31.000 --> 00:12:38.000
そして最後に、ユーザーがアクティビティを開始する許可を与えた後、アプリはアクティビティオブジェクトでアクティベートを呼び出す必要があります。

00:12:38.000 --> 00:12:44.000
これは、アプリが共有エクスペリエンスを開始したいことをシステムに伝えます。

00:12:44.000 --> 00:12:47.000
次に、観察セッションについて話しましょう。

00:12:47.000 --> 00:12:50.000
ここには、先ほど見ていたのと同じアプリがあります。

00:12:50.000 --> 00:12:55.000
この時点でのアプリケーションは、アクティビティオブジェクトでアクティブ化を呼び出しました。

00:12:55.000 --> 00:13:03.000
その後、アプリケーションは、GroupSessionクラスのAsyncSequenceを介して着信セッションを反復する必要があります。

00:13:03.000 --> 00:13:11.000
そして、セッションがあると、アプリケーションは共有エクスペリエンスのためにGroupSessionオブジェクトを渡されます。

00:13:11.000 --> 00:13:21.000
これは、開始アプリであろうと、セッションを受信するリモートデバイスであろうと、アプリケーションが実行するのと同じステップであることに注意してください。

00:13:21.000 --> 00:13:30.000
グループセッションの開始と観察の詳細については、このWWDCセッションを見ることをお勧めします。

00:13:30.000 --> 00:13:36.000
アプリケーションがセッションを手渡されたので、セッションに参加する前に自分自身を設定する必要があります。

00:13:36.000 --> 00:13:43.000
参加する前にアプリケーションを設定すると、アプリケーションの特定のユースケースに基づいて異なることを意味する可能性があります。

00:13:43.000 --> 00:13:56.000
たとえば、何かを一緒に描画するなど、カスタムエクスペリエンスを作成する場合、ユーザーがエクスペリエンスに参加する前に、共有エクスペリエンスに必要なアセットをロードすることを意味する可能性があります。

00:13:56.000 --> 00:14:05.000
ただし、アプリケーションが共有メディア再生エクスペリエンスを提供している場合は、このようなものが含まれます。

00:14:05.000 --> 00:14:18.000
アプリケーションは、AVPlayerのAVPlaybackCoordinatorをGroupSessionに接続し、関連するAVPlayerがフレームワークによって提供される通信チャネルを介してコンテンツを同期できるようにします。

00:14:18.000 --> 00:14:31.000
この同期サポートはAVPlayerだけでなく、現在持っている他のカスタムビデオプレーヤーを使用しても、AVDelegating PlaybackCoordinatorを介して同期のサポートを受けることができます。

00:14:31.000 --> 00:14:38.000
そして最後に、アプリケーションの設定が完了すると、アプリケーションコールはGroupSessionに参加します。

00:14:38.000 --> 00:14:47.000
結合が呼び出されると、システムは異なるデバイス間で実行されているアプリ間でエンドツーエンドの暗号化されたチャネルを設定します。

00:14:47.000 --> 00:14:53.000
この時点で、アプリケーションはデータを同期し、ユーザーが共有エクスペリエンスに参加できるようにする準備が整いました。

00:14:53.000 --> 00:15:02.000
カスタムエクスペリエンスを作成する場合、アプリケーションはこのチャネルを使用してデータを交換し、ユーザーを同期させることができます。

00:15:02.000 --> 00:15:14.000
このチャンネルは、ユーザーが再生、一時停止、スキップなどを押したときに再生状態を交換して、メディア再生を同期させるためにAVFoundationによっても使用されます。

00:15:14.000 --> 00:15:18.000
このチャネルは、大量のデータを交換するために使用することを意図していないことに注意してください。

00:15:18.000 --> 00:15:22.000
代わりに、ユーザーを同期させるために情報を交換するために使用します。

00:15:22.000 --> 00:15:28.000
今、あなたのアプリケーションはセッション中であり、あなたのユーザーは共有された経験を楽しんでいます。

00:15:28.000 --> 00:15:37.000
ユーザーのエクスペリエンスを豊かにするためにできることがもう1つあります。それは、フレームワークを使用したイベントを投稿することです。

00:15:37.000 --> 00:15:43.000
イベントにより、ユーザーは共有エクスペリエンスで何が起こっているのかを知ることができます。

00:15:43.000 --> 00:15:50.000
たとえば、イベントを投稿して、誰かがトラックを再生、一時停止、またはスキップしたときにユーザーに知らせることができます。

00:15:50.000 --> 00:15:56.000
イベントを投稿すると、システムはイベントについてユーザーに伝える通知を提示します。

00:15:56.000 --> 00:16:02.000
現在のAPIでは、メディア再生体験のためのイベントのみを投稿できます。

00:16:02.000 --> 00:16:09.000
AVPlayerを使用するか、AVDelegating PlaybackCoordinatorを使用すると、これが無料になります。

00:16:09.000 --> 00:16:15.000
ただし、これらのいずれかを使用していない場合でも、アプリはフレームワークを使用してイベントを投稿できます。

00:16:15.000 --> 00:16:23.000
独自のカスタムエクスペリエンスの提供とイベントの投稿の詳細については、このWWDCセッションを見ることをお勧めします。

00:16:23.000 --> 00:16:32.000
最後に、グループアクティビティは、FaceTimeで共有エクスペリエンスを作成できる新しいSwiftネイティブフレームワークです。

00:16:32.000 --> 00:16:40.000
このフレームワークはクロスプラットフォームで、iOS、macOS、iPadOS、tvOSで利用できます。

00:16:40.000 --> 00:16:48.000
AVFoundationと緊密に統合されているため、アプリは共有メディア再生体験を提供できます。

00:16:48.000 --> 00:16:56.000
そして最後に、macOSのウェブ上での再生同期もサポートしています。

00:16:56.000 --> 00:16:59.000
それとともに、私たちのセッションをご覧いただきありがとうございます。

00:16:59.000 --> 00:17:01.000
そして、素晴らしいWWDC21を!

00:17:01.000 --> 23:59:59.000
♪

