WEBVTT

00:00:02.000 --> 00:00:13.000
こんにちは、私の名前はアルンで、ワイヤレスチームのシステムエンジニアです。

00:00:13.000 --> 00:00:20.000
今日は、UWBベースの車のキーを探索する旅にあなたを連れて行きます。

00:00:20.000 --> 00:00:30.000
昨年、iPhoneやApple Watchを使って車のロックを解除、ロック、始動したり、家族や友人と鍵を共有したり、リモートで管理したりできる車のキーを発売しました。

00:00:30.000 --> 00:00:35.000
そして、システムが安全でプライベートであるように設計されていることを知って、そのすべてを行うことができます。

00:00:35.000 --> 00:00:39.000
今年は、車のキーの機能を拡張することに興奮しています。

00:00:39.000 --> 00:00:43.000
このセッションでは、新機能とそれらの統合方法を見ていきます。

00:00:43.000 --> 00:00:52.000
プロビジョニング、キー管理、NFCなど、車のキーの基本を学びたい場合は、昨年の講演「車のキーの紹介」をチェックしてください。

00:00:52.000 --> 00:00:55.000
今年有効にしている主な機能の1つは、パッシブエントリーです。

00:00:55.000 --> 00:01:05.000
UWBテクノロジーを使用すると、iPhoneをバッグやポケットに入れたり、Apple Watchを手首に置いたりしながら、車をロック、ロック解除したり、起動したりできます。

00:01:05.000 --> 00:01:15.000
RKE、またはリモートキーレスエントリーコントロールを使用すると、iPhoneまたはWatchを使用して、車のBluetooth範囲内にいるときにロック、ロック解除、その他のアクションを実行できます。

00:01:15.000 --> 00:01:22.000
また、車はどのデジタルキーがどのドアから車に入っているかを識別することで、設定をパーソナライズできるようになりました。

00:01:22.000 --> 00:01:33.000
デバイスをカーキーやフレンドファーストアプローチとしてペアリングするなど、このセッションではカバーできない他の機能がありますが、これらの機能の経験もアップグレードされました。

00:01:33.000 --> 00:01:37.000
では、これらの機能を可能にする技術を見てみましょう。

00:01:37.000 --> 00:01:44.000
UWBテクノロジーを搭載したU1チップにより、車は近くの車のキーの正確な位置を判断できます。

00:01:44.000 --> 00:01:51.000
UWBは、リプレイ攻撃やリレー攻撃に対するより強力な保護のための安全な範囲のプロトコルの基礎でもあります。

00:01:51.000 --> 00:01:56.000
セキュアエレメントは、Appleデバイスに統合された保護されたハードウェアユニットです。

00:01:56.000 --> 00:02:06.000
車のキーの保存と認証資格情報に加えて、セキュアエレメントの使用を拡大して、セッション固有のUWBレンジングキーを導き出しました。

00:02:06.000 --> 00:02:17.000
Bluetooth LE、またはBLEは、認証中にデータを交換し、安全な範囲のセッションを管理するために、車とAppleデバイス間の通信チャネルとして使用されます。

00:02:17.000 --> 00:02:24.000
BLEは、安全な範囲のタイムグリッドを初期化するためのアンカーポイントとしても使用されます。

00:02:24.000 --> 00:02:38.000
そして最後に、クロスプラットフォームサポートを備えた共通のソリューションを確保するために、Appleは、他の業界パートナーとともに、カーコネクティビティコンソーシアムで標準仕様を作成する取り組みをリードしてきました。

00:02:38.000 --> 00:02:43.000
Appleでは、セキュリティとプライバシーは私たちのコアバリューの一部です。

00:02:43.000 --> 00:02:48.000
このUWBパッシブエントリーソリューションは、両方を念頭に置いて設計されています。

00:02:48.000 --> 00:02:52.000
キーは各セッションに固有であり、各接続時に導出されます。

00:02:52.000 --> 00:03:02.000
これらのセッションキーの中には、リンクレイヤーでメッセージを暗号化するために使用されるものもあれば、UWBまたはBLEを使用してデバイスを追跡できないようにするために使用されるものもあります。

00:03:02.000 --> 00:03:06.000
これらのセッションキーから派生したランダムな識別子を使用します。

00:03:06.000 --> 00:03:09.000
その後、これらの識別子は定期的にローテーションされます。

00:03:09.000 --> 00:03:17.000
そして最も重要なことは、安全な範囲のプロトコルを構築することで、UWBベースのローカリゼーションのセキュリティを強化したことです。

00:03:17.000 --> 00:03:23.000
このセキュアレンジングプロトコルは、3パケット交換を備えた双方向測距プロトコルです。

00:03:23.000 --> 00:03:34.000
iPhoneが投票メッセージを送信し、車が応答メッセージで応答し、iPhoneが精度を高めるために別の投票メッセージを送信する「ピンポンピン」と考えてください。

00:03:34.000 --> 00:03:54.000
これらのメッセージのそれぞれには、暗号化で生成された時間制限付きパケットであるスクランブルタイムスタンプ（STS）が搭載されています。つまり、検証済みのパケットでさえ、このSTSの生成に使用されたタイムスロットにのみ受け入れられ、リプレイおよびリレー攻撃に対する追加のセキュリティを提供します。

00:03:54.000 --> 00:03:57.000
では、これらすべてをまとめるにはどうすればよいでしょうか?

00:03:57.000 --> 00:04:01.000
さて、各車は一連の仮想ゾーンを定義しています。

00:04:01.000 --> 00:04:12.000
これらのゾーンには、有効でアクティブなキーを持つデバイスがローカライズされてこれらのゾーンに出入りしたときにトリガーできる関連機能があります。

00:04:12.000 --> 00:04:21.000
より広いゾーンは、車に近づいたときにライトをつけたり、キャビンを事前に温めたりするなど、ウェルカム機能を有効にします。

00:04:21.000 --> 00:04:27.000
車に最も近いゾーンは、通常、近づくとドアのロックを解除します。

00:04:27.000 --> 00:04:33.000
そして、ロックゾーンは、あなたが立ち去るときに車を固定します。

00:04:33.000 --> 00:04:35.000
では、車はこれらのゾーンでどのようにあなたを検出しますか?

00:04:35.000 --> 00:04:47.000
さて、これらの仮想ゾーン内でペアのデバイスをローカライズするために、車には複数のUWBとBLEトランシーバーが装備されており、360度のカバレッジを確保しています。

00:04:47.000 --> 00:04:53.000
ユーザーが最初に車に近づくと、あなたのiPhoneまたはApple WatchはBLEを使用して検出されます。

00:04:53.000 --> 00:04:58.000
近接検出時に、車との通信チャネルが確立されます。

00:04:58.000 --> 00:05:05.000
接続すると、車はデバイスを認証し、共有測距キーが両側に導出されます。

00:05:05.000 --> 00:05:13.000
この操作はSecure Element内で行われ、各セッションに固有のキーを生成します。

00:05:13.000 --> 00:05:23.000
派生キーは、UWBトランシーバとのセキュアレンジセッションを開始するために使用され、車はデバイスをローカライズし、その軌道をマッピングすることができます。

00:05:23.000 --> 00:05:28.000
これは、車内で実行されるローカリゼーションアルゴリズムによって計算されます。

00:05:28.000 --> 00:05:30.000
私たちは後でそれに戻ります。

00:05:30.000 --> 00:05:35.000
車は、ユーザーが車に近づくにつれて、デバイスの軌道をマッピングし続けます。

00:05:35.000 --> 00:05:45.000
デバイスの位置と軌道に基づいて、車はライトの点灯や座席の調整などの歓迎機能をトリガーすることを決定できます。

00:05:45.000 --> 00:05:53.000
また、デバイスがロック解除ゾーン内にローカライズされると、ユーザーがドアハンドルに触れる前に車がロック解除操作を開始できます。

00:05:53.000 --> 00:06:05.000
ユーザーのデバイスが車内にあるか外にあるかを正確に知ると、有効なキーを持つデバイスが車内で検出された場合にのみエンジンが起動します。

00:06:05.000 --> 00:06:12.000
そして、私のお気に入りの機能の1つは、携帯電話がパワーリザーブモードの場合でも、このUWBベースの体験を楽しむことができます。

00:06:12.000 --> 00:06:23.000
だから、ハイキングやバックパッキングの長い一日の後、あなたの携帯電話を充電する必要があることがわかった場合、まだあなたを道路に戻すためにバッテリーに十分な電力があるかもしれません。

00:06:23.000 --> 00:06:30.000
パッシブエントリーの仕組みを見たので、リモートキーレスエントリーコントロールを見てみましょう。

00:06:30.000 --> 00:06:33.000
リモートアクションは、車から遠く離れているときに便利です。

00:06:33.000 --> 00:06:39.000
冬にキャビンを予熱して使用したり、クラクションを鳴らして車を見つけることができます。

00:06:39.000 --> 00:06:43.000
また、多くのアクションはウォレット内から直接トリガーできます。

00:06:43.000 --> 00:06:51.000
また、デバイスを使用して、ロック状態、燃料レベル、バッテリー充電状態など、車に関する情報を表示することもできます。

00:06:51.000 --> 00:06:54.000
リモートアクションはBluetooth LE経由で送信されます。

00:06:54.000 --> 00:06:59.000
彼らはUWBから独立しているので、UWBの範囲外でも機能します。

00:06:59.000 --> 00:07:08.000
そして最後に、リモートアクションはカーコネクティビティコンソーシアムで標準化されているため、すべての車とデバイスに共通の実装があります。

00:07:08.000 --> 00:07:17.000
最高の体験のために、自動車メーカーは、リモートロックとロック解除だけでなく、適用されるすべてのリモートアクションを実装することをお勧めします。

00:07:17.000 --> 00:07:20.000
リモートキーレスエントリーコントロールの仕組みを見てみましょう。

00:07:20.000 --> 00:07:30.000
リモートコマンドをトリガーするために、デバイスは関連するアクションのチャレンジを要求し、デバイス署名を生成するための入力として使用されます。

00:07:30.000 --> 00:07:36.000
車は、チャレンジ、関連するアクション、およびその他の情報に対してデバイスの署名を検証します。

00:07:36.000 --> 00:07:42.000
検証が成功すると、車はアクションを実行し、デバイスに通知します。

00:07:42.000 --> 00:07:56.000
デジタルカーキーを使用すると、どのデジタルキーが運転席のドアに近づいているかを観察することで、キャビンの温度、座席位置、座席暖房などの設定を自動的にパーソナライズできるようになりました。

00:07:56.000 --> 00:08:04.000
今日の車のキーもパーソナライゼーションをサポートできますが、どのキーフォブにどのユーザー設定があるかを常に知っているドライバーに依存しています。

00:08:04.000 --> 00:08:09.000
今、iPhoneやApple Watchの車のキーで、あなたはそれについて心配する必要はありません。

00:08:09.000 --> 00:08:21.000
正確な軌道と、パーソナルデバイスが個々のユーザーに強く結びついているという知識と知識により、車はこれまで以上に自信を持って体験をパーソナライズすることができます。

00:08:21.000 --> 00:08:25.000
そして、複数のユーザーが車に近づいている場合でも、これはシームレスに機能します。

00:08:25.000 --> 00:08:39.000
要約すると、私たちはこれらの新機能に興奮しており、自動車メーカーがUWBベースの車を発売することを楽しみにしています。これにより、ユーザーはU1チップを搭載したiPhoneやApple Watchでこれらの機能を楽しむことができます。

00:08:39.000 --> 00:08:50.000
さて、ギアをシフトして、自動車メーカーがAppleプラットフォームに乗船する方法と、カーキーソリューションを設計する際に重点を置きたい分野について話しましょう。

00:08:50.000 --> 00:09:00.000
この議論の一環として、システムアーキテクチャ、時間同期、トランシーバ同期、および優れたローカリゼーションアルゴリズムの構築について説明します。

00:09:00.000 --> 00:09:02.000
システムアーキテクチャから始めましょう。

00:09:02.000 --> 00:09:11.000
パッシブエントリーソリューションは、信頼性が高く正確なローカリゼーションに依存しているため、システムが優れたパフォーマンスと低レイテンシを持っていることが不可欠です。

00:09:11.000 --> 00:09:21.000
先に見たように、各車には複数のトランシーバーが装備されており、最初の決定の1つは適切なトランシーバーを選択することです。

00:09:21.000 --> 00:09:26.000
まず、トランシーバーが十分なリンク予算を提供できることを確認する必要があります。

00:09:26.000 --> 00:09:39.000
カーキープロトコルは双方向であるため、これは、良好なアップリンクとダウンリンクのパフォーマンスのためにTx放射電力とRx感度の両方を評価することを意味します。

00:09:39.000 --> 00:09:48.000
アンテナの指向性を微調整することで、トランシーバーのアンテナが必要なカバレッジの視野全体を確実にサポートできます。

00:09:48.000 --> 00:09:53.000
良好な動作範囲を達成するためには、アンテナの多様性が不可欠です。

00:09:53.000 --> 00:10:02.000
たとえば、偏光または分離が異なる2つ以上のアンテナを使用すると、受信信号強度を向上させることができます。

00:10:02.000 --> 00:10:07.000
最後に、3D飛行時間測定が非常に正確であることを確認する必要があります。

00:10:07.000 --> 00:10:13.000
パッシブエントリーとローカリゼーション機能は、計算において飛行時間に依存しています。

00:10:13.000 --> 00:10:19.000
したがって、精度は、アプローチ角度に関係なく、定義された範囲内にある必要があります。

00:10:19.000 --> 00:10:43.000
適切に設計された個々のトランシーバーでさえ、車の周りのカバレッジが不十分な場合、または設置が不十分な場合は不要な領域でのカバレッジにつながる可能性があるため、必要なカバレッジを提供するために車の周りにトランシーバーを配置するための最良の位置を特定する必要があり、同時に、コストを抑えるためにトランシーバーの数を最小限に抑える必要があります。

00:10:43.000 --> 00:10:46.000
高さと向きを必ず考慮してください。

00:10:46.000 --> 00:10:51.000
一般的に、設置高さが大きければ大きいほど、フェージングポイントが遠くなり、範囲が向上します。

00:10:51.000 --> 00:10:55.000
これは明らかに車の設計上の制約の範囲内で行わなければならない。

00:10:55.000 --> 00:11:04.000
同様に、オリエンテーションが悪いと、車の上などの不要な領域でカバレッジやカバレッジのギャップが発生する可能性があります。

00:11:04.000 --> 00:11:11.000
適切なトランシーバーと潜在的な位置を取得したら、次のステップはシステムのRFパフォーマンスを確認することです。

00:11:11.000 --> 00:11:20.000
車の周りに設置されたトランシーバーの放射パターンを調べて、すべての側面に対称的なカバレッジを確保します。

00:11:20.000 --> 00:11:24.000
また、システムでカバーされる最大範囲にも注意が必要です。

00:11:24.000 --> 00:11:30.000
これは、ウェルカムライトやキャビンの事前調整など、長距離機能にとって重要です。

00:11:30.000 --> 00:11:45.000
そして最も重要なことは、人体、チャネルシャドーイング、フェージング、またはその他の変数によって引き起こされる減衰に関係なく、ロック解除操作を確実に実行できるように、システムに十分なリンクマージンバッファがあることを確認する必要があります。

00:11:45.000 --> 00:11:48.000
考慮すべきもう1つの分野は、システムのレイテンシです。

00:11:48.000 --> 00:12:05.000
車に近づくと、BLE接続、認証、キー導出のセットアップから始まり、安全な範囲のセッションセットアップが続き、各UWBトランシーバーがスキャンを開始する複雑な一連のイベントが始まり、車はデバイスの位置を判断できます。

00:12:05.000 --> 00:12:10.000
これらのタスクはすべて、ユーザーがドアを開ける前に完了する必要があります。

00:12:10.000 --> 00:12:20.000
システムのレイテンシーを必要な範囲内に保つには、認証とキー管理のための高性能暗号プロセッサが必要です。

00:12:20.000 --> 00:12:29.000
ECUを各トランシーバに接続するバスシステムは、低レイテンシでなければなりません。遅いバスは、システム操作のパフォーマンスに本当に影響を与える可能性があります。

00:12:29.000 --> 00:12:40.000
最後に、マルチスレッドアプリケーションや時間同期の組み込みなど、最適化技術をサポートできる柔軟なソフトウェアアーキテクチャが必要になります。

00:12:40.000 --> 00:12:44.000
では、時間の同期について簡単に話しましょう。

00:12:44.000 --> 00:12:48.000
UWBトランシーバは、測距パケットを検出するために積極的にスキャンする必要があります。

00:12:48.000 --> 00:12:55.000
適切な時間の同期がなければ、着信パケットを確実にキャプチャするには、長いスキャンウィンドウが必要です。

00:12:55.000 --> 00:12:58.000
これは電力と処理時間を消費します。

00:12:58.000 --> 00:13:09.000
システム全体に正確な時間同期を実装することで、各トランシーバは、着信パケットがいつ数十マイクロ秒の精度で予想されるかを知ることができます。

00:13:09.000 --> 00:13:20.000
これらの時間枠の間にのみスキャンすることで、電力を節約し、マルチセッションや混雑した環境でのパフォーマンスを向上させることができるだけでなく、デバイスをより速くローカライズするのにも役立ちます。

00:13:20.000 --> 00:13:30.000
トランシーバーをしっかりと同期させることで、最初に検出されたサイクルから成功を確実にすることで、それを行います。

00:13:30.000 --> 00:13:34.000
もう1つの重要なテクニックは、トランシーバーの同期です。

00:13:34.000 --> 00:13:40.000
場合によっては、一部のトランシーバが接続に失敗したり、同期しなくなったりすることがあります。

00:13:40.000 --> 00:13:59.000
トランシーバ同期を実装することにより、デバイスと正常に同期されたトランシーバは、車内の他のトランシーバとタイミング情報を共有し、フルレンジサイクルを完了できなかった場合でも、すばやく接続したり、飛行時間を計算したりすることができます。

00:13:59.000 --> 00:14:02.000
最後になりましたが、ローカリゼーションアルゴリズム。

00:14:02.000 --> 00:14:14.000
パッシブエントリーソリューションを設計する際の最も重要なタスクの1つは、車に対して接近するデバイスの位置を特定できるローカリゼーションアルゴリズムの開発です。

00:14:14.000 --> 00:14:18.000
ローカリゼーションアルゴリズムは、車のECUで実行されているコードです。

00:14:18.000 --> 00:14:27.000
接続された各UWBトランシーバーからのデバイスの距離を収集し、それらを処理してiPhoneまたはApple Watchを宇宙に配置します。

00:14:27.000 --> 00:14:29.000
これを行う方法はたくさんあります。

00:14:29.000 --> 00:14:33.000
これの1つの簡単な例は、真の範囲のマルチラテレーションです。

00:14:33.000 --> 00:14:39.000
ローカリゼーションアルゴリズムは、開発する必要があるソリューションの最も重要な部分の1つです。

00:14:39.000 --> 00:14:52.000
したがって、ユーザーが車に近づくときにユーザーの軌道をたどるか、デバイスがキャビンの内側にあるか外側にあるかを判断するかにかかわらず、ローカリゼーションアルゴリズムが迅速かつ正確であることを確認する必要があります。

00:14:52.000 --> 00:15:02.000
速度、精度、精度は、単一のトランシーバーベースのロック解除システムのサポートを追加する場合でも、優れたローカリゼーションソリューションの鍵です。

00:15:02.000 --> 00:15:08.000
また、さまざまなキャビンタイプや車の物理的特性に合わせてローカリゼーションアルゴリズムを調整する必要があるかもしれません。

00:15:08.000 --> 00:15:11.000
さて、あなたは車のキー機能がどのように機能するかを見ました。

00:15:11.000 --> 00:15:19.000
開発に興味がある場合は、ソフトウェア開発と資格の有機的な進歩のために、次のワークフローをお勧めします。

00:15:19.000 --> 00:15:24.000
まず、UWBの相互運用性に焦点を当て、仕様に従っていることを確認します。

00:15:24.000 --> 00:15:27.000
これをテストするのに役立つツールを作成しました。

00:15:27.000 --> 00:15:34.000
また、暗号操作を段階的に有効にできるため、段階的にシステムを開発できます。

00:15:34.000 --> 00:15:40.000
次に、接続管理と所有者のペアリングのためにBLEレイヤーを統合します。

00:15:40.000 --> 00:15:44.000
次に、パッシブエントリーに不可欠なセキュアレンジ管理に焦点を当てます。

00:15:44.000 --> 00:15:50.000
最後になりましたが、遠距離で制御するためのリモートアクションをサポートします。

00:15:50.000 --> 00:16:01.000
詳細を知りたい場合は、カーコネクティビティコンソーシアムに参加し、iPhoneとApple Watchでの作業に関する具体的な詳細については、MFiプログラムに登録することをお勧めします。

00:16:01.000 --> 00:16:07.000
MFiプログラムは、開発を支援するための追加の文書やツールを入手できる場所です。

00:16:07.000 --> 00:16:09.000
ありがとう、そして良い一日を!

00:16:09.000 --> 23:59:59.000
[音楽]。

