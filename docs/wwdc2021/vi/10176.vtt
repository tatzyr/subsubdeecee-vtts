WEBVTT

00:00:00.000 --> 00:00:09.000
♪ ♪

00:00:09.000 --> 00:00:13.000
Xin chào, tôi là Harry, một kỹ sư trong nhóm SwiftUI.

00:00:13.000 --> 00:00:16.000
Chào mừng đến với "Trải nghiệm tìm kiếm thủ công trong SwiftUI."

00:00:16.000 --> 00:00:21.000
Tìm kiếm hoàn toàn mới trong SwiftUI năm nay và tôi rất vui được chỉ cho bạn cách bắt đầu sử dụng các tính năng này.

00:00:21.000 --> 00:00:32.000
Đôi khi, bạn muốn tìm thứ gì đó cụ thể trong một ứng dụng, nhưng nhiều ứng dụng chứa bộ sưu tập dữ liệu lớn, điều này có thể gây khó khăn cho việc tìm thấy chính xác những gì bạn đang tìm kiếm.

00:00:32.000 --> 00:00:41.000
Cho dù đó là tìm kiếm xu hướng ứng dụng mới nhất, bài hát yêu thích tiếp theo của bạn hay podcast phù hợp cho chuyến đi làm buổi sáng của bạn, việc triển khai tìm kiếm sẽ giúp thực hiện điều đó.

00:00:41.000 --> 00:00:46.000
Trải nghiệm tìm kiếm tốt nhất sẽ thay đổi dựa trên cấu trúc và nội dung của ứng dụng.

00:00:46.000 --> 00:00:52.000
Nhưng, nói chung, tất cả các trải nghiệm sẽ bao gồm một trường tìm kiếm xác định truy vấn tìm kiếm.

00:00:52.000 --> 00:00:55.000
Bây giờ, bạn có thể thực hiện tìm kiếm trực tiếp trong SwiftUI.

00:00:55.000 --> 00:00:57.000
Hãy cùng xem nào.

00:00:57.000 --> 00:01:05.000
Trong buổi nói chuyện này, tôi sẽ giới thiệu công cụ sửa đổi có thể tìm kiếm mới tạo thành nền tảng của tất cả các tính năng tìm kiếm trong SwiftUI.

00:01:05.000 --> 00:01:10.000
Tôi sẽ giới thiệu cách chế độ xem điều hướng tích hợp với công cụ sửa đổi có thể tìm kiếm.

00:01:10.000 --> 00:01:16.000
Cuối cùng, tôi sẽ đề cập đến việc mở rộng chức năng của các công cụ sửa đổi có thể tìm kiếm bằng cách thêm các đề xuất tìm kiếm.

00:01:16.000 --> 00:01:22.000
Searchable là một công cụ sửa đổi chế độ xem mới trong SwiftUI có sẵn trên tất cả các nền tảng.

00:01:22.000 --> 00:01:26.000
Nó cho phép bạn đánh dấu nội dung xem là có thể tìm kiếm được.

00:01:26.000 --> 00:01:29.000
Nội dung sẽ xác định chính xác điều đó có nghĩa là gì.

00:01:29.000 --> 00:01:34.000
Trong suốt buổi nói chuyện này, tôi sẽ khám phá các ví dụ về công cụ sửa đổi này trên mỗi nền tảng.

00:01:34.000 --> 00:01:38.000
Bây giờ, để hiểu rõ hơn về công cụ sửa đổi này, hãy nói về thời tiết!

00:01:38.000 --> 00:01:43.000
Một ví dụ tuyệt vời về tìm kiếm trên iOS có thể được tìm thấy trong ứng dụng Thời tiết mới.

00:01:43.000 --> 00:01:50.000
Khi xem danh sách các thành phố của bạn, bạn có thể bắt đầu nhập vào thanh tìm kiếm, thanh này sẽ tìm kiếm một thành phố mới để thêm vào danh sách của bạn.

00:01:50.000 --> 00:01:57.000
Để minh họa cách Weather sử dụng công cụ sửa đổi có thể tìm kiếm để cung cấp năng lượng cho tính năng này, hãy chia nhỏ cấu trúc giao diện người dùng của họ.

00:01:57.000 --> 00:02:02.000
Thời tiết bắt đầu với chế độ xem điều hướng, cung cấp thanh điều hướng.

00:02:02.000 --> 00:02:06.000
Thời tiết thêm một danh sách tùy chỉnh làm nội dung của chế độ xem điều hướng.

00:02:06.000 --> 00:02:11.000
Và bên trong danh sách đó, nó thêm một ForEach trên các ô của nó.

00:02:11.000 --> 00:02:15.000
Cuối cùng, Weather thêm công cụ sửa đổi có thể tìm kiếm vào chế độ xem điều hướng của nó.

00:02:15.000 --> 00:02:21.000
Cốt lõi của tất cả các công cụ sửa đổi có thể tìm kiếm là cấu hình của trường tìm kiếm.

00:02:21.000 --> 00:02:30.000
Công cụ sửa đổi có thể tìm kiếm lấy trường tìm kiếm được định cấu hình và chuyển nó xuống, thông qua môi trường, để các chế độ xem khác sử dụng theo cách tốt nhất cho từng nền tảng.

00:02:30.000 --> 00:02:36.000
Ở đây, chế độ xem điều hướng hiểu trường tìm kiếm đó và sẽ hiển thị nó dưới dạng thanh tìm kiếm.

00:02:36.000 --> 00:02:44.000
Nếu không có chế độ xem nào sử dụng trường tìm kiếm được định cấu hình, công cụ sửa đổi có thể tìm kiếm sẽ cung cấp triển khai mặc định để hiển thị trường tìm kiếm trên thanh công cụ.

00:02:44.000 --> 00:02:49.000
Bây giờ, một trường tìm kiếm thường không phải là phần duy nhất của giao diện người dùng liên quan đến tìm kiếm.

00:02:49.000 --> 00:02:53.000
Hiển thị một số dạng kết quả tìm kiếm là một mẫu thiết kế phổ biến.

00:02:53.000 --> 00:03:04.000
Thời tiết tuân theo mô hình này và bất cứ khi nào nó nhìn thấy một truy vấn tìm kiếm không trống, nó sẽ chuyển danh sách tùy chỉnh của mình để hiển thị một danh sách khác chứa kết quả của truy vấn hiện tại.

00:03:04.000 --> 00:03:10.000
Hãy xem cách Weather có thể sử dụng thông tin được thay đổi bởi công cụ sửa đổi có thể tìm kiếm để đạt được giao diện người dùng này.

00:03:10.000 --> 00:03:12.000
Đây là danh sách tùy chỉnh của Weather.

00:03:12.000 --> 00:03:23.000
Các công cụ sửa đổi có thể tìm kiếm đã thiết lập một thuộc tính môi trường mới, được gọi là Tìm kiếm, mà Weather sử dụng để tự động thay đổi chế độ xem đang được hiển thị, dựa trên việc người dùng có đang tích cực tìm kiếm hay không.

00:03:23.000 --> 00:03:30.000
Truy vấn thời tiết thuộc tính môi trường isSearching và văn bản của tìm kiếm để hiển thị có điều kiện chế độ xem kết quả của nó.

00:03:30.000 --> 00:03:39.000
Khi hiển thị kết quả của riêng bạn, hãy cân nhắc sử dụng lớp phủ để trạng thái giao diện người dùng chính của bạn không thay đổi sau khi người dùng quay lại từ tương tác tìm kiếm của họ.

00:03:39.000 --> 00:03:45.000
Hãy nói thêm một chút về cách chế độ xem điều hướng tích hợp với công cụ sửa đổi có thể tìm kiếm mới.

00:03:45.000 --> 00:03:50.000
Để làm điều đó, tôi muốn giới thiệu một ứng dụng mà tôi đã làm việc không mệt mỏi.

00:03:50.000 --> 00:03:51.000
Tôi gọi nó là Màu sắc.

00:03:51.000 --> 00:03:58.000
Ứng dụng này cho phép người dùng quản lý thư viện các bộ màu yêu thích của họ, được gọi là Bảng màu.

00:03:58.000 --> 00:04:05.000
Có thể bạn muốn chơi với các loại sơn khác nhau cho căn phòng của mình, chủ đề cho ứng dụng của bạn hoặc chỉ cần nhận trợ giúp chọn màu của iMac M1 mới của bạn.

00:04:05.000 --> 00:04:08.000
Bất kể mong muốn của bạn là gì, Colors là ứng dụng dành cho bạn.

00:04:08.000 --> 00:04:20.000
Cấu trúc cơ bản của Màu sắc là chế độ xem điều hướng hai cột, trong đó cột đầu tiên, chế độ xem gốc, là thanh bên trên iPadOS và macOS hoặc thư mục gốc của ngăn xếp điều hướng trên các nền tảng khác.

00:04:20.000 --> 00:04:23.000
Trong thanh bên, bạn có thể thấy thư viện bảng màu của tôi.

00:04:23.000 --> 00:04:32.000
Trong chế độ xem chi tiết, bạn có thể thấy bảng màu hiện được chọn, cũng như cách những màu đó có thể xuất hiện với người dùng với sự khác biệt về hình ảnh.

00:04:32.000 --> 00:04:35.000
Khi mọi người bắt đầu sử dụng ứng dụng, tôi bắt đầu nhận thấy điều gì đó.

00:04:35.000 --> 00:04:37.000
Mọi người yêu thích màu sắc.

00:04:37.000 --> 00:04:49.000
Họ liên tục thêm màu sắc vào thư viện của mình, nhưng khi thư viện trở nên lớn, việc tìm một bảng màu cụ thể trở nên khó khăn, vì mọi người phải cuộn qua toàn bộ thư viện của họ để tìm nó.

00:04:49.000 --> 00:04:53.000
Tại thời điểm này, tôi đã quyết định đã đến lúc thêm chức năng tìm kiếm.

00:04:53.000 --> 00:04:59.000
Tôi muốn tính năng này tuân theo các quy ước nền tảng để mọi người sử dụng ứng dụng của tôi hiểu ngay lập tức.

00:04:59.000 --> 00:05:05.000
Hãy xem cách tôi có thể sử dụng công cụ sửa đổi có thể tìm kiếm để triển khai tính năng này.

00:05:05.000 --> 00:05:10.000
Ở đây tôi có chế độ xem điều hướng mà tôi đã xây dựng như một phần của ứng dụng Màu sắc.

00:05:10.000 --> 00:05:14.000
Để thực hiện tìm kiếm, tôi sẽ thêm công cụ sửa đổi có thể tìm kiếm vào chế độ xem điều hướng của mình.

00:05:14.000 --> 00:05:20.000
Giống như trước đây, tôi sẽ cung cấp cho nó một ràng buộc với trạng thái hỗ trợ truy vấn tìm kiếm.

00:05:20.000 --> 00:05:25.000
Một lần nữa, điều này sẽ được hiển thị dưới dạng thanh tìm kiếm trên iOS và iPadOS.

00:05:25.000 --> 00:05:32.000
Khi chế độ xem điều hướng là nội dung của công cụ sửa đổi có thể tìm kiếm, nó sẽ liên kết trường tìm kiếm với một trong các cột của nó.

00:05:32.000 --> 00:05:38.000
Nó sử dụng cột nào phụ thuộc vào số lượng cột được cung cấp cho chế độ xem điều hướng.

00:05:38.000 --> 00:05:45.000
Vì tôi có chế độ xem điều hướng hai cột, thanh tìm kiếm được liên kết với cột thanh bên trên cả iOS và iPadOS.

00:05:45.000 --> 00:05:56.000
Nếu bạn muốn trường tìm kiếm được liên kết với một cột khác với cột mặc định, bạn có thể đặt công cụ sửa đổi có thể tìm kiếm trên cột mong muốn của mình, giống như bạn làm với công cụ sửa đổi thanh công cụ hiện có.

00:05:56.000 --> 00:06:00.000
Đối với ứng dụng này, tôi sẽ tiếp tục tìm kiếm trên chế độ xem điều hướng.

00:06:00.000 --> 00:06:07.000
Cũng giống như với Thời tiết, tôi sẽ sử dụng thuộc tính môi trường isSearching để tự động hiển thị kết quả tìm kiếm của mình trên thanh bên.

00:06:07.000 --> 00:06:19.000
Vị trí tương tự của công cụ sửa đổi có thể tìm kiếm trên macOS sẽ hiển thị trường tìm kiếm được đặt ở vị trí cuối cùng nhất của thanh công cụ, với các hành vi được mong đợi trên nền tảng đó, như tự động thu gọn khi cửa sổ co lại.

00:06:19.000 --> 00:06:26.000
Tại đây, tôi sẽ hiển thị kết quả tìm kiếm của mình trong ngăn chi tiết của ứng dụng để có trải nghiệm điển hình hơn trên macOS.

00:06:26.000 --> 00:06:33.000
watchOS hoạt động tương tự như iOS ở chỗ nó cũng đặt một trường tìm kiếm ở đầu chế độ xem trên thanh công cụ.

00:06:33.000 --> 00:06:38.000
Tại đây, SwiftUI chọn cột đầu tiên để liên kết trường tìm kiếm.

00:06:38.000 --> 00:06:44.000
Lưu ý rằng tôi đã không thay đổi nơi tôi đặt công cụ sửa đổi có thể tìm kiếm để tạo ra những hành vi khác nhau này trên các nền tảng.

00:06:44.000 --> 00:06:51.000
Cấu trúc ứng dụng của tôi không thay đổi trên các nền tảng này và vẫn là chế độ xem điều hướng hai cột.

00:06:51.000 --> 00:06:57.000
SwiftUI hiểu cấu trúc này và các quy ước nền tảng khác nhau, vì vậy nó đã thay mặt tôi xử lý việc triển khai chúng.

00:06:57.000 --> 00:07:04.000
Khi tôi nhìn vào tvOS, tôi nhận ra rằng cấu trúc ứng dụng của tôi trên các nền tảng khác có thể được thực hiện phù hợp hơn.

00:07:04.000 --> 00:07:10.000
tvOS thường hiển thị tìm kiếm dưới dạng tab trong chế độ xem tab, nhưng ứng dụng của tôi không có chế độ xem tab.

00:07:10.000 --> 00:07:13.000
Chỉ với một vài chỉnh sửa cho ứng dụng của tôi, tôi có thể khắc phục điều đó.

00:07:13.000 --> 00:07:26.000
Thay vì hiển thị chế độ xem điều hướng hai cột, tôi có thể tạo trải nghiệm tvOS điển hình hơn bằng cách hiển thị chế độ xem điều hướng một cột với chế độ xem tab làm nội dung của chế độ xem điều hướng.

00:07:26.000 --> 00:07:31.000
Trong chế độ xem tab của tôi, tôi sẽ đặt chế độ xem thanh bên hiện có và thêm tab tìm kiếm mới.

00:07:31.000 --> 00:07:37.000
Tab tìm kiếm đại diện cho chế độ xem trình giữ chỗ sẽ hiển thị khi ai đó lần đầu tiên điều hướng đến tab đó.

00:07:37.000 --> 00:07:45.000
Cuối cùng, thay vì gói chế độ xem điều hướng, tôi sẽ di chuyển công cụ sửa đổi có thể tìm kiếm để gói tab tìm kiếm của mình.

00:07:45.000 --> 00:07:52.000
Khi truy vấn tìm kiếm không trống đã được nhập, tôi sẽ chuyển đổi chế độ xem của mình để hiển thị kết quả tìm kiếm của mình.

00:07:52.000 --> 00:07:55.000
Bây giờ tôi đã thêm chức năng tìm kiếm vào từng nền tảng.

00:07:55.000 --> 00:08:10.000
Nhờ tính chất khai báo của SwiftUI, nơi cấu trúc điều hướng của ứng dụng của tôi vẫn nhất quán, tôi có thể dựa vào SwiftUI và để việc triển khai công cụ sửa đổi có thể tìm kiếm chọn giao diện thích hợp cho cấu trúc điều hướng cụ thể đó.

00:08:10.000 --> 00:08:18.000
Trên tvOS, nơi cấu trúc ứng dụng của tôi thay đổi, tôi đã lấy những gì tôi đã học được về công cụ sửa đổi có thể tìm kiếm và áp dụng nó cho cấu trúc khác.

00:08:18.000 --> 00:08:23.000
Chỉ những gì tôi định nghĩa là "có thể tìm kiếm" mới thay đổi với cấu trúc đó.

00:08:23.000 --> 00:08:30.000
Bây giờ bạn đã hiểu về công cụ sửa đổi có thể tìm kiếm, hãy chuyển sang chủ đề cuối cùng của chúng tôi: đề xuất tìm kiếm.

00:08:30.000 --> 00:08:40.000
Sau khi sử dụng tìm kiếm trong ứng dụng của tôi, một vài người dùng đã báo cáo rằng mặc dù họ thực sự thích chức năng tìm kiếm mới cung cấp, nhưng đôi khi họ không biết những gì họ có thể tìm kiếm.

00:08:40.000 --> 00:08:46.000
Nhiều ứng dụng sử dụng các đề xuất tìm kiếm để giúp hướng dẫn mọi người đến loại truy vấn tìm kiếm mà họ có thể cung cấp.

00:08:46.000 --> 00:08:58.000
Những đề xuất này đại diện cho các truy vấn tìm kiếm đã hoàn thành có thể được trình bày trong menu, như trên macOS, trong danh sách, như trên iOS hoặc dưới dạng nút trình bày danh sách, như trên watchOS.

00:08:58.000 --> 00:09:03.000
Các đề xuất cung cấp cho mọi người ý tưởng về các loại thứ họ có thể tìm kiếm.

00:09:03.000 --> 00:09:06.000
SwiftUI cung cấp một cách dễ dàng để thêm các đề xuất tìm kiếm vào ứng dụng của bạn.

00:09:06.000 --> 00:09:08.000
Hãy cùng xem nào.

00:09:08.000 --> 00:09:13.000
Nhìn vào ứng dụng của tôi, bạn có thể thấy rằng tôi đã định cấu hình một công cụ sửa đổi có thể tìm kiếm bằng văn bản.

00:09:13.000 --> 00:09:19.000
Các công cụ sửa đổi có thể tìm kiếm cung cấp một tham số tùy chọn, được gọi là đề xuất, mà tôi có thể bắt đầu bao gồm.

00:09:19.000 --> 00:09:22.000
Đối với tham số đề xuất, tôi sẽ cung cấp một cái nhìn.

00:09:22.000 --> 00:09:31.000
Đây có thể chỉ là một vài nút tĩnh hoặc, nhiều khả năng, nó sẽ là một ForEach trên một tập hợp các đề xuất động đến từ cơ sở dữ liệu ứng dụng của tôi hoặc từ một máy chủ.

00:09:31.000 --> 00:09:37.000
SwiftUI xem xét chế độ xem này và sẽ trình bày nó dựa trên việc có bất kỳ đề xuất nào để hiển thị hay không.

00:09:37.000 --> 00:09:43.000
Ví dụ, watchOS sẽ hiển thị một biểu tượng trong trường tìm kiếm của nó khi bạn cung cấp các đề xuất không trống.

00:09:43.000 --> 00:09:55.000
Một mẫu phổ biến ở đây có thể là cung cấp ForEach các nút, khi được tương tác, cập nhật ràng buộc văn bản được cung cấp cho công cụ sửa đổi có thể tìm kiếm với giá trị văn bản của đề xuất tìm kiếm.

00:09:55.000 --> 00:10:02.000
Trên thực tế, chúng tôi hy vọng mô hình này phổ biến đến mức chúng tôi đã thêm một công cụ sửa đổi searchCompletion thực hiện điều này.

00:10:02.000 --> 00:10:06.000
Bạn có thể sử dụng công cụ sửa đổi searchCompletion với các chế độ xem không tương tác.

00:10:06.000 --> 00:10:13.000
Nó sẽ chuyển đổi chế độ xem đó thành một nút cập nhật văn bản tìm kiếm và loại bỏ đề xuất hiện được trình bày.

00:10:13.000 --> 00:10:25.000
Nếu bạn đang tạo một ứng dụng mà trước tiên người dùng tương tác với các đề xuất để sau đó tìm nạp một bộ kết quả tìm kiếm hoàn chỉnh dựa trên đề xuất đó, hãy cân nhắc sử dụng công cụ sửa đổi onSubmit mới để biết khi nào cần tìm nạp kết quả tìm kiếm của bạn.

00:10:25.000 --> 00:10:34.000
Chuyển giá trị tìm kiếm cho công cụ sửa đổi onSubmit và việc đóng cửa bạn cung cấp sẽ được gọi bất cứ khi nào người dùng gửi truy vấn tìm kiếm của họ.

00:10:34.000 --> 00:10:39.000
Điều này thường xảy ra khi họ chọn một gợi ý tìm kiếm hoặc nhấn Enter trên bàn phím phần cứng.

00:10:39.000 --> 00:10:46.000
Bạn cũng có thể sử dụng công cụ sửa đổi onSubmit mới kết hợp với các trường văn bản hoặc các trường bảo mật cho các bài gửi không liên quan đến tìm kiếm.

00:10:46.000 --> 00:10:55.000
Sử dụng tham số đề xuất cùng với công cụ sửa đổi hoàn thành tìm kiếm cung cấp một cách dễ dàng để thêm chức năng đề xuất tìm kiếm mạnh mẽ vào ứng dụng của bạn.

00:10:55.000 --> 00:11:01.000
Tôi hy vọng bạn thích một chuyến tham quan ngắn gọn về một số chức năng tìm kiếm mà SwiftUI hiện đang cung cấp.

00:11:01.000 --> 00:11:07.000
Tóm lại, một công cụ sửa đổi có thể tìm kiếm cho phép bạn mô tả nội dung chế độ xem là có thể tìm kiếm được.

00:11:07.000 --> 00:11:16.000
Chế độ xem điều hướng tích hợp với công cụ sửa đổi có thể tìm kiếm để cung cấp trải nghiệm phù hợp với nền tảng dựa trên nội dung của chế độ xem điều hướng.

00:11:16.000 --> 00:11:23.000
Sử dụng thuộc tính isSearching của môi trường để tự động điều chỉnh giao diện người dùng của ứng dụng của bạn khi người dùng đang tìm kiếm.

00:11:23.000 --> 00:11:30.000
Sử dụng công cụ sửa đổi hoàn thành tìm kiếm và tham số đề xuất của công cụ sửa đổi có thể tìm kiếm để thêm đề xuất tìm kiếm vào ứng dụng của bạn.

00:11:30.000 --> 00:11:35.000
Bây giờ, hãy ra ngoài đó và bắt đầu thêm tìm kiếm vào tất cả các ứng dụng SwiftUI của bạn và có một WW tuyệt vời.

00:11:35.000 --> 23:59:59.000
[Nhạc lạc quan].

