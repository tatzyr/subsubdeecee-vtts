WEBVTT

00:00:02.000 --> 00:00:16.000
Xin chào, tên tôi là David, và tôi là một kỹ sư trong nhóm Công cụ Tài liệu tại Apple.

00:00:16.000 --> 00:00:24.000
Trong phiên này, bạn sẽ tìm hiểu về việc lưu trữ tài liệu DocC và tự động hóa việc xây dựng tài liệu.

00:00:24.000 --> 00:00:32.000
Đầu tiên, tôi sẽ nói về việc xây dựng tài liệu trong Xcode và cách bạn có thể lưu trữ các kho lưu trữ tài liệu đã xây dựng trên máy chủ.

00:00:32.000 --> 00:00:41.000
Tiếp theo, tôi sẽ đi vào chi tiết hơn về cách xây dựng tài liệu hoạt động và cách bạn có thể tự động hóa tài liệu xây dựng.

00:00:41.000 --> 00:00:48.000
Trong suốt buổi nói chuyện này, tôi sẽ chỉ cho bạn SlothCreator, một dự án mà các đồng nghiệp của tôi và tôi đang thực hiện.

00:00:48.000 --> 00:00:51.000
Chúng tôi đã tạo một trang web để giúp mọi người bắt đầu.

00:00:51.000 --> 00:01:00.000
Và bây giờ, chúng tôi thực sự hào hứng với việc sử dụng các tính năng tài liệu mới trong Xcode để xây dựng một phiên bản tài liệu của chúng tôi mà chúng tôi có thể lưu trữ ngay trên trang web của mình.

00:01:00.000 --> 00:01:03.000
Điều đó sẽ giúp mọi người bắt đầu dễ dàng hơn.

00:01:03.000 --> 00:01:08.000
Vì vậy, hãy xem làm thế nào chúng ta có thể hoàn thành điều đó.

00:01:08.000 --> 00:01:18.000
Các tính năng tài liệu mới trong Xcode 13 giúp việc xây dựng tài liệu cho các khung, thư viện và gói Swift của bạn thực sự dễ dàng.

00:01:18.000 --> 00:01:27.000
Bạn có thể bắt đầu sử dụng nó ngay lập tức mà không cần bất kỳ thiết lập nào và sau đó mở rộng tài liệu của bạn với tài liệu bổ sung theo thời gian.

00:01:27.000 --> 00:01:34.000
Và thật dễ dàng để xuất tài liệu của bạn từ cửa sổ Tài liệu dành cho nhà phát triển.

00:01:34.000 --> 00:01:46.000
Bạn có thể chia sẻ kho lưu trữ tài liệu đã xuất với những người khác để họ có thể nhập và đọc tài liệu trong Xcode hoặc bạn có thể lưu trữ kho lưu trữ tài liệu trực tuyến.

00:01:46.000 --> 00:02:01.000
Nếu bạn muốn tìm hiểu thêm về tài liệu trong Xcode và về tài liệu tác giả cho các biểu tượng của bạn, các đồng nghiệp của tôi Victoria và Ethan chỉ nói về điều đó trong phiên "Gặp gỡ tài liệu DocC trong Xcode".

00:02:01.000 --> 00:02:07.000
Trong nửa sau của bài thuyết trình này, tôi sẽ nói về cách bạn có thể tự động hóa việc xây dựng tài liệu trên dòng lệnh.

00:02:07.000 --> 00:02:15.000
Nhưng hiện tại, tôi sẽ sử dụng kho lưu trữ tài liệu mà tôi đã xuất từ Xcode để lưu trữ trên máy chủ của chúng tôi.

00:02:15.000 --> 00:02:25.000
Bản thân kho lưu trữ tài liệu là một vùng chứa tất cả dữ liệu để vừa đọc tài liệu trong Xcode vừa lưu trữ trực tuyến.

00:02:25.000 --> 00:02:38.000
Nó được cấu trúc như một ứng dụng web Vue.js một trang được sử dụng để hiển thị cả tài liệu tham khảo và bài viết cũng như các hướng dẫn phong phú và tương tác của bạn.

00:02:38.000 --> 00:02:44.000
Có hai loại yêu cầu khác nhau mà máy chủ cần xử lý để lưu trữ kho lưu trữ tài liệu.

00:02:44.000 --> 00:03:06.000
Yêu cầu tài liệu và các trang hướng dẫn trong đó URL yêu cầu bắt đầu bằng /documentation/ hoặc /tutorials/ và yêu cầu các tệp và dữ liệu bổ sung được tải bởi ứng dụng web, trong đó URL yêu cầu khớp với đường dẫn tệp tương đối cho một trong các tệp trong kho lưu trữ tài liệu.

00:03:06.000 --> 00:03:14.000
Hãy xem xét một ví dụ về các yêu cầu tạo nên một trang và cách máy chủ phản hồi chúng.

00:03:14.000 --> 00:03:32.000
Khi một nhà phát triển đọc tài liệu được lưu trữ của bạn và trình duyệt yêu cầu một trang, nếu yêu cầu bắt đầu bằng /documentation/ hoặc /tutorials/ thì máy chủ sẽ phản hồi bằng tệp index.html nằm trong kho lưu trữ tài liệu.

00:03:32.000 --> 00:03:43.000
Tệp đó tham chiếu CSS và JavaScript trong kho lưu trữ tài liệu mà trình duyệt yêu cầu tải phần còn lại của ứng dụng web.

00:03:43.000 --> 00:03:52.000
Sau khi tải xong, ứng dụng web sẽ yêu cầu nội dung cho trang đó và bất kỳ hình ảnh hoặc phương tiện nào khác mà nó tham chiếu.

00:03:52.000 --> 00:04:06.000
Cả các tệp được tham chiếu bởi tệp index.html và nội dung và phương tiện được tải bởi ứng dụng web đều sử dụng URL yêu cầu phù hợp với cấu trúc thư mục của kho lưu trữ tài liệu.

00:04:06.000 --> 00:04:13.000
Bây giờ bạn đã thấy máy chủ lưu trữ cần phản hồi các yêu cầu đến như thế nào, hãy xem xét điều đó trong bản demo.

00:04:13.000 --> 00:04:16.000
Nhiều người trong số các bạn có thể đã có một máy chủ lưu trữ trang web của mình.

00:04:16.000 --> 00:04:23.000
Đối với dự án của chúng tôi, chúng tôi đang sử dụng máy chủ Apache, nhưng bạn có thể sử dụng bất kỳ máy chủ nào cho phép định tuyến tùy chỉnh.

00:04:23.000 --> 00:04:26.000
Đây là trang web của chúng tôi về SlothCreator.

00:04:26.000 --> 00:04:33.000
Chúng tôi đã thêm nút "Đọc tài liệu" này bên dưới văn bản giới thiệu ở giữa trang, nhưng nút này vẫn chưa hoạt động.

00:04:33.000 --> 00:04:36.000
Vậy hãy sửa nó đi.

00:04:36.000 --> 00:04:43.000
Tôi đã sao chép kho lưu trữ tài liệu vào thư mục nơi chúng tôi đang lưu trữ trang web của mình và thêm một tệp .htaccess trống.

00:04:43.000 --> 00:04:49.000
Nhưng tôi chưa thiết lập bất kỳ định tuyến nào trong đó.

00:04:49.000 --> 00:04:59.000
Có hai quy tắc định tuyến mà tôi cần thêm vào: một cho các trang tài liệu và hướng dẫn và một cho các tệp và dữ liệu bổ sung.

00:04:59.000 --> 00:05:10.000
Đối với quy tắc đầu tiên, mẫu mà tôi muốn khớp là bất kỳ URL nào bắt đầu bằng "tài liệu" hoặc "hướng dẫn" làm thành phần đường dẫn đầu tiên của nó.

00:05:10.000 --> 00:05:19.000
Bất kỳ yêu cầu nào phù hợp với mẫu này, tôi muốn định tuyến lại đến tệp index.html trong kho lưu trữ tài liệu.

00:05:19.000 --> 00:05:27.000
Cuối cùng, tôi sẽ kết thúc quy tắc bằng một lá cờ để ngừng đánh giá các quy tắc nếu yêu cầu khớp với quy tắc này.

00:05:27.000 --> 00:05:31.000
Đối với quy tắc thứ hai, tôi sẽ rõ ràng hơn về mô hình.

00:05:31.000 --> 00:05:42.000
Vì chúng tôi cũng đang lưu trữ trang web của mình với máy chủ này, chúng tôi không muốn định tuyến lại các yêu cầu cho trang web đến các tệp trong kho lưu trữ tài liệu.

00:05:42.000 --> 00:05:51.000
Nếu tôi nhìn vào bên trong kho lưu trữ tài liệu, bạn có thể thấy rằng có một số tệp và thư mục cấp cao nhất mà tôi có thể khớp theo mẫu.

00:05:51.000 --> 00:05:57.000
Vì vậy, tôi sẽ thêm một mẫu phù hợp với tất cả những thứ đó.

00:05:57.000 --> 00:06:11.000
Trong trường hợp này, URL yêu cầu là đường dẫn tệp tương đối cho một trong các tệp trong kho lưu trữ tài liệu, vì vậy tôi sẽ định tuyến lại yêu cầu đến mẫu phù hợp nhưng có tiền tố là SlothCreator.doccarchive.

00:06:11.000 --> 00:06:17.000
Và giống như trước đây, tôi đã thêm cùng một lá cờ để ngừng đánh giá các quy tắc.

00:06:17.000 --> 00:06:29.000
Bây giờ, nếu tôi tải lại trang web và nhấp vào liên kết tài liệu, bạn sẽ thấy rằng máy chủ hiện lưu trữ cả trang web và tài liệu của chúng tôi.

00:06:29.000 --> 00:06:39.000
Trang SlothCreator chính nhóm các ký hiệu quan trọng thành các chủ đề liên quan đến các nhiệm vụ cấp cao hơn.

00:06:39.000 --> 00:06:50.000
Và mỗi biểu tượng liên quan đến nhóm đó thành các chủ đề cụ thể hơn.

00:06:50.000 --> 00:06:57.000
DocC đi kèm với một thiết kế tích hợp, sạch sẽ được tạo ra để phù hợp với nhiều dự án khác nhau.

00:06:57.000 --> 00:07:06.000
Điều này làm cho nó thực sự dễ dàng để có tài liệu đẹp, thanh lịch cho các dự án của bạn, như tài liệu SlothCreator của chúng tôi tại đây.

00:07:06.000 --> 00:07:15.000
Bây giờ chúng tôi đã lưu trữ một bản sao tài liệu của mình trên trang web của mình, hãy xem cách tự động xây dựng và cập nhật kho lưu trữ tài liệu.

00:07:15.000 --> 00:07:19.000
Để làm điều đó, tôi sẽ viết một tập lệnh gọi xcodebuild.

00:07:19.000 --> 00:07:28.000
Khi tôi có một tập lệnh thực hiện việc này, tôi có thể chạy nó bất cứ khi nào có thay đổi mới được thực hiện để tài liệu được lưu trữ luôn được cập nhật.

00:07:28.000 --> 00:07:37.000
Mới trong Xcode 13, bạn có thể xây dựng tài liệu trên dòng lệnh với hành động docbuild mới của xcodebuild.

00:07:37.000 --> 00:07:47.000
Khi bạn xây dựng tài liệu trong Xcode hoặc xcodebuild, nó hoạt động giống như một bản dựng tiêu chuẩn cũng xây dựng tài liệu.

00:07:47.000 --> 00:08:11.000
Trong quá trình xây dựng, trình biên dịch Swift thu thập thông tin chi tiết về tất cả các biểu tượng công khai, mối quan hệ của chúng và nhận xét tài liệu trong nguồn và chuyển tệp này dưới dạng tệp được gọi là biểu đồ biểu tượng cho trình biên dịch tài liệu để tạo kho lưu trữ tài liệu với tất cả dữ liệu cần thiết để vừa đọc tài liệu trong Xcode vừa

00:08:11.000 --> 00:08:28.000
Nếu mục tiêu có một danh mục tài liệu liên quan với các bài báo, phương tiện hoặc hướng dẫn bổ sung cho dự án của bạn, thì trình biên dịch tài liệu sẽ kết hợp tất cả nội dung đó với thông tin biểu tượng khi nó tạo ra kho lưu trữ tài liệu.

00:08:28.000 --> 00:08:48.000
Nếu bạn muốn tìm hiểu thêm về danh mục tài liệu, hãy xem phiên "Nâng cao tài liệu DocC của bạn trong Xcode", nơi các đồng nghiệp của tôi Bea và Jack nói về các loại tài liệu khác nhau và cách bạn có thể tận dụng từng loại để cung cấp cho các nhà phát triển một cách tuyệt vời để tìm hiểu về dự án của bạn.

00:08:48.000 --> 00:08:52.000
Tài liệu xây dựng không chỉ áp dụng cho các mục tiêu của bạn.

00:08:52.000 --> 00:09:07.000
Nếu mục tiêu của bạn có sự phụ thuộc vào các khung, thư viện hoặc gói Swift khác, thì quy trình tương tự cũng được áp dụng cho tất cả những thứ đó để bạn có được tất cả tài liệu liên quan cho dự án của mình ở cùng một nơi.

00:09:07.000 --> 00:09:18.000
Vì tôi đang tìm cách tự động hóa việc xây dựng và cập nhật tài liệu được lưu trữ của chúng tôi bằng một tập lệnh, xcodebuild trên dòng lệnh sẽ hoàn hảo cho điều đó.

00:09:18.000 --> 00:09:27.000
Hành động docbuild mới trong xcodebuild hoạt động giống như hành động xây dựng mặc định, nhưng nó cũng xây dựng tài liệu.

00:09:27.000 --> 00:09:35.000
Giống như hành động xây dựng, bạn chuyển nó sơ đồ mà bạn muốn xây dựng và dự án hoặc không gian làm việc mà nó là một phần của nó.

00:09:35.000 --> 00:09:44.000
Bạn cũng có thể gọi xcodebuild từ bên trong thư mục chứa dự án, không gian làm việc hoặc gói Swift của bạn và chỉ chuyển nó theo sơ đồ.

00:09:44.000 --> 00:09:55.000
Tùy thuộc vào dự án và sơ đồ của bạn, bạn có thể muốn chuyển các cờ khác như sdk, đích đến hoặc cấu hình để tùy chỉnh cách dự án của bạn được xây dựng.

00:09:55.000 --> 00:09:57.000
Không bắt buộc phải làm như vậy.

00:09:57.000 --> 00:10:07.000
Nhưng để dễ dàng theo dõi hơn, tôi sẽ chỉ định một derivedDataPath tùy chỉnh, nơi các sản phẩm xây dựng và tài liệu được xây dựng sẽ được viết.

00:10:07.000 --> 00:10:21.000
Sau khi xây dựng xong, tôi có thể tìm thấy tất cả các kho lưu trữ tài liệu đã xây dựng bằng cách sử dụng phần mở rộng tệp .doccarchive và sao chép từng tệp vào một vị trí khác hoặc sang một máy khác.

00:10:21.000 --> 00:10:25.000
Hãy xem xét điều đó trong bản demo.

00:10:25.000 --> 00:10:28.000
Đây là tài liệu được lưu trữ của chúng tôi từ trước.

00:10:28.000 --> 00:10:38.000
Nó nhóm các biểu tượng liên quan thành các chủ đề để các nhà phát triển dễ dàng tìm thấy các loại cốt lõi cho một nhiệm vụ cụ thể.

00:10:38.000 --> 00:10:45.000
Trong thời gian kể từ khi chúng tôi xây dựng phiên bản này, các đồng nghiệp của tôi đã thêm một số bài viết và hướng dẫn mới xuất hiện trong phần Essentials.

00:10:45.000 --> 00:10:54.000
Vì vậy, bây giờ là thời điểm tuyệt vời để tôi viết tập lệnh tự động hóa xây dựng tài liệu mới nhất và cập nhật trang web của chúng tôi.

00:10:54.000 --> 00:11:11.000
Như bạn vừa thấy, chúng tôi xây dựng tài liệu bằng cách gọi hành động docbuild của xcodebuild và cập nhật trang web của chúng tôi bằng cách tìm và sao chép kho lưu trữ tài liệu vào thư mục nơi chúng tôi đang lưu trữ trang web của mình.

00:11:11.000 --> 00:11:18.000
Tôi đã biết tôi cần vượt qua sơ đồ nào vì nó giống như tôi thấy trong bộ chọn sơ đồ trong Xcode.

00:11:18.000 --> 00:11:29.000
Nếu tôi chưa mở Xcode, tôi cũng có thể chạy xcodebuild -list trên dòng lệnh để liệt kê tất cả các sơ đồ có sẵn.

00:11:29.000 --> 00:11:42.000
Một lần nữa, derivedDataPath tùy chỉnh không bắt buộc, nhưng nó giúp dễ dàng theo dõi nơi tài liệu được xây dựng được viết và tìm thấy.

00:11:42.000 --> 00:11:52.000
Sau khi xây dựng xong, tôi có thể tìm thấy tất cả các kho lưu trữ tài liệu và sao chép từng tài liệu vào thư mục nơi chúng tôi đang lưu trữ trang web của mình.

00:11:52.000 --> 00:12:02.000
Và với điều đó đã hoàn thành, tôi đã sẵn sàng để chạy kịch bản.

00:12:02.000 --> 00:12:09.000
Bây giờ, nếu tôi làm mới, bạn có thể xem bài viết và hướng dẫn được thêm vào trong phần Essentials.

00:12:09.000 --> 00:12:13.000
Với những thay đổi mới nhất này, tài liệu của chúng tôi trông đầy đủ hơn.

00:12:13.000 --> 00:12:35.000
Và những người mới sử dụng SlothCreator có một nơi tuyệt vời để bắt đầu, cho dù họ thích nội dung của một bài viết hay hướng dẫn từng bước trong một trong những hướng dẫn của chúng tôi.

00:12:35.000 --> 00:12:40.000
Bây giờ, việc cập nhật tài liệu được lưu trữ của chúng tôi dễ dàng như chạy một tập lệnh.

00:12:40.000 --> 00:12:51.000
Và nếu chúng tôi chạy nó như một phần của móc sau hợp nhất trên máy chủ tích hợp liên tục của mình, thì chúng tôi có thể đảm bảo rằng tài liệu được lưu trữ của chúng tôi luôn được cập nhật.

00:12:51.000 --> 00:13:05.000
Để tóm tắt lại những gì chúng ta đã nói trong phiên này, bạn có thể chia sẻ tài liệu lưu trữ hoặc lưu trữ chúng trực tuyến để mang lại trải nghiệm tài liệu tuyệt vời cho người tiêu dùng khuôn khổ của bạn, ngay cả trước khi họ bắt đầu sử dụng nó trong Xcode.

00:13:05.000 --> 00:13:13.000
Và việc xây dựng tài liệu trên dòng lệnh cho phép bạn đưa tài liệu vào quy trình làm việc tự động hóa của mình.

00:13:13.000 --> 00:13:25.000
Nếu bạn muốn tìm hiểu thêm về tài liệu DocC, "Gặp gỡ tài liệu DocC trong Xcode" là phần giới thiệu tuyệt vời về các tính năng tài liệu mới trong Xcode.

00:13:25.000 --> 00:13:33.000
"Nâng tài liệu DocC của bạn trong Xcode" đi sâu vào cách bạn có thể nâng cao tài liệu của mình với danh mục DocC.

00:13:33.000 --> 00:13:43.000
Và "Xây dựng các hướng dẫn tương tác bằng DocC" nêu chi tiết cách bạn có thể cấu trúc ý tưởng của mình và tạo ra các hướng dẫn tuyệt vời cho dự án của mình.

00:13:43.000 --> 00:13:44.000
Cảm ơn bạn đã xem.

00:13:44.000 --> 23:59:59.000
[Âm nhạc].

