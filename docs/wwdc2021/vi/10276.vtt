WEBVTT

00:00:00.000 --> 00:00:05.000
♪ Nhạc bass đang phát ♪

00:00:05.000 --> 00:00:09.000
♪

00:00:09.000 --> 00:00:11.000
Ron Santos: Này, mọi người. Tôi là Ron Santos.

00:00:11.000 --> 00:00:14.000
Tôi là một kỹ sư phần mềm làm việc trên Bàn phím.

00:00:14.000 --> 00:00:23.000
Và tôi ở đây để chỉ cho bạn cách tận dụng tối đa một tính năng mới cho phép bạn nhập văn bản, không phải bằng cách nhập hoặc đọc chính tả, mà bằng cách sử dụng máy ảnh.

00:00:23.000 --> 00:00:32.000
Vì vậy, chúng tôi đã làm việc rất chăm chỉ cho bản phát hành mới này và bây giờ WWDC cuối cùng cũng ở đây, tôi đã sẵn sàng cho một kỳ nghỉ.

00:00:32.000 --> 00:00:35.000
Ngay khi nó an toàn, tôi muốn nghỉ ngơi một chút và đi du lịch.

00:00:35.000 --> 00:00:40.000
Tuy nhiên, một điều về việc đi du lịch khiến tôi khó chịu là xử lý tất cả các văn bản phi kỹ thuật số đó.

00:00:40.000 --> 00:00:41.000
Bạn hiểu ý tôi chứ?

00:00:41.000 --> 00:00:47.000
Hóa đơn, tờ rơi hoạt động và chất kết dính khổng lồ mà họ để lại cho bạn trong phòng khách sạn?

00:00:47.000 --> 00:00:52.000
May mắn thay, iOS 15 có một tính năng mới cho phép bạn chụp văn bản từ thế giới xung quanh.

00:00:52.000 --> 00:00:55.000
Hãy để tôi cho bạn thấy ý tôi là gì.

00:00:55.000 --> 00:00:56.000
Kiểm tra nó đi!

00:00:56.000 --> 00:00:58.000
Tôi đang xây dựng ứng dụng nhật ký du lịch này.

00:00:58.000 --> 00:01:03.000
Tôi sẽ sử dụng nó để ghi lại các chuyến đi tôi đã thực hiện và những nơi tôi đã ở, như chuyến đi cuối cùng của tôi đến Hawaii.

00:01:03.000 --> 00:01:08.000
Ở trên cùng ở đây, tôi có thể thêm tiêu đề hình ảnh; có thể là một bức ảnh phong cảnh đẹp từ Camera Roll của tôi.

00:01:08.000 --> 00:01:14.000
Sau đó tôi có các trường thông tin khách sạn như tên, số điện thoại và địa chỉ.

00:01:14.000 --> 00:01:20.000
Tôi thực sự có tất cả thông tin đó trên một tài liệu ngay trước mặt tôi.

00:01:20.000 --> 00:01:24.000
Tôi không muốn phải gõ tất cả ra, và bây giờ tôi không cần phải làm vậy.

00:01:24.000 --> 00:01:33.000
Ví dụ, nếu tôi nhấn hai lần vào trường Số điện thoại, tôi sẽ thấy một tùy chọn mới trong menu chỉnh sửa để sử dụng Văn bản từ Máy ảnh.

00:01:33.000 --> 00:01:39.000
Khi nó khởi động, máy ảnh sẽ ngay lập tức nhận ra nhóm văn bản này trên tài liệu.

00:01:39.000 --> 00:01:42.000
Tôi có thể đóng băng nó và chỉ chọn số điện thoại.

00:01:42.000 --> 00:01:45.000
Sau đó tôi nhấn Chèn và tôi đã hoàn tất.

00:01:45.000 --> 00:01:46.000
Tôi nghĩ điều đó khá tuyệt vời.

00:01:46.000 --> 00:01:49.000
Làm tôi nhớ đến câu nói rằng một bức tranh đáng giá ngàn lời nói như thế nào.

00:01:49.000 --> 00:01:54.000
Nhưng với tính năng này, chúng ta thực sự có thể lấy một nghìn từ từ một bức ảnh.

00:01:54.000 --> 00:01:58.000
Dù sao, như tôi đã nói trước đó, tôi rất muốn chỉ cho bạn cách tận dụng tối đa tính năng này.

00:01:58.000 --> 00:02:02.000
Hãy bắt đầu bằng cách nói về việc lọc nội dung.

00:02:02.000 --> 00:02:06.000
Nếu bạn còn nhớ, tôi đã phải kéo-chọn số điện thoại từ khối văn bản lớn.

00:02:06.000 --> 00:02:10.000
Chà, tôi không cần phải làm điều đó nếu ứng dụng biết tôi đang tìm kiếm một số điện thoại.

00:02:10.000 --> 00:02:14.000
Nó nên bỏ qua mọi thứ khác và chỉ cần lấy số.

00:02:14.000 --> 00:02:18.000
Vì vậy, trước tiên, tôi sẽ chỉ cho bạn cách lọc nội dung bạn muốn đơn giản như thế nào.

00:02:18.000 --> 00:02:26.000
Việc lọc được thực hiện bằng cách sử dụng các thuộc tính TextContentType và KeyboardType có sẵn trên các trường văn bản và chế độ xem văn bản.

00:02:26.000 --> 00:02:31.000
Trên thực tế, có lẽ bạn đã sử dụng các thuộc tính này để hỗ trợ những thứ như Tự động điền.

00:02:31.000 --> 00:02:33.000
Nếu vậy, tuyệt vời.

00:02:33.000 --> 00:02:36.000
Bạn sẽ nhận được thêm lợi ích cho đầu vào máy ảnh.

00:02:36.000 --> 00:02:41.000
Và nếu bạn chưa sử dụng chúng, đây là một số video từ những năm trước chỉ cho bạn cách thực hiện.

00:02:41.000 --> 00:02:44.000
OK, quay lại TextContentType.

00:02:44.000 --> 00:02:47.000
TextContentType có thể là bất kỳ một trong những giá trị khác nhau này.

00:02:47.000 --> 00:02:50.000
Nhưng máy ảnh sẽ không lọc cho tất cả các loại này.

00:02:50.000 --> 00:02:53.000
Nó sẽ lọc chỉ trên bảy cái này.

00:02:53.000 --> 00:02:55.000
Hãy xem xét một số ví dụ.

00:02:55.000 --> 00:03:03.000
Bốn cái đầu tiên này - số điện thoại, địa chỉ đường phố đầy đủ, URL và email - tất cả chúng đều tồn tại từ trước trong iOS ngày nay.

00:03:03.000 --> 00:03:13.000
Mới trong iOS 15, chúng tôi đã thêm ba loại bổ sung: số chuyến bay, số theo dõi lô hàng và sự kết hợp của ngày, giờ và thời lượng.

00:03:13.000 --> 00:03:19.000
Bạn có thể tưởng tượng số chuyến bay có thể hữu ích như thế nào đối với các ứng dụng du lịch hoặc số theo dõi sẽ thú vị như thế nào đối với các ứng dụng theo dõi gói hàng.

00:03:19.000 --> 00:03:22.000
Dù sao, đây là cách bạn sẽ sử dụng các loại nội dung này.

00:03:22.000 --> 00:03:23.000
Nó cực kỳ đơn giản.

00:03:23.000 --> 00:03:31.000
Nếu bạn đang ở trong Trình tạo Giao diện, hãy tìm Loại Nội dung và Loại Bàn phím trong trình kiểm tra Thuộc tính.

00:03:31.000 --> 00:03:34.000
Nếu bạn đang làm điều này trong mã, chỉ cần gán các giá trị bạn muốn.

00:03:34.000 --> 00:03:44.000
Ở đây trong ứng dụng nhật ký du lịch của tôi, trường Số điện thoại đang sử dụng bàn phím bàn phím điện thoại và trường Địa chỉ có textContentType of fullStreetAddress.

00:03:44.000 --> 00:03:49.000
Và lưu ý rằng đối với số điện thoại, tôi đặt autocorrectionType thành không.

00:03:49.000 --> 00:03:55.000
Bởi vì nếu không có ứng cử viên tự động sửa hoặc văn bản dự đoán, iOS sẽ cung cấp cho bạn một nút để truy cập nhanh vào máy ảnh.

00:03:55.000 --> 00:04:03.000
Được rồi, chúng ta hãy quay lại ứng dụng của tôi và chúng ta có thể thử chụp lại số điện thoại khách sạn, nhưng lần này, với những thay đổi của chúng ta.

00:04:03.000 --> 00:04:09.000
Bây giờ, khi tôi đưa máy ảnh lên, nó sẽ bỏ qua tất cả các văn bản khác một cách thông minh ngoại trừ số điện thoại.

00:04:09.000 --> 00:04:15.000
Hãy thử lại lần nữa với trường Địa chỉ.

00:04:15.000 --> 00:04:16.000
Điều đó nhanh hơn rất nhiều.

00:04:16.000 --> 00:04:19.000
Khai thác và vuốt ít hơn rất nhiều.

00:04:19.000 --> 00:04:21.000
Vậy đó là cách bạn lọc nội dung.

00:04:21.000 --> 00:04:22.000
Hãy chuyển sang một thử thách khác.

00:04:22.000 --> 00:04:28.000
Làm thế nào để chúng ta làm cho chức năng này dễ khám phá hơn để thực sự khuyến khích việc sử dụng nó?

00:04:28.000 --> 00:04:32.000
Là nhà phát triển ứng dụng, chúng tôi thích có giao diện người dùng được sắp xếp hợp lý.

00:04:32.000 --> 00:04:41.000
Điều đó có nghĩa là đôi khi chúng ta có chức năng bổ sung ẩn sau các menu và cử chỉ mà người dùng không biết.

00:04:41.000 --> 00:04:46.000
Ví dụ, nếu tôi sử dụng trường Ghi chú trong ứng dụng của mình, không rõ ràng là tôi có thể sử dụng máy ảnh để nhập ở đây.

00:04:46.000 --> 00:04:51.000
Trình đơn chỉnh sửa chỉ xuất hiện trong lần nhấn thứ hai.

00:04:51.000 --> 00:04:56.000
Và thanh ứng cử viên có văn bản dự đoán thay vì nút tôi đã chỉ cho bạn trước đó.

00:04:56.000 --> 00:05:03.000
Vì vậy, nếu bạn muốn một nút trên màn hình gợi ý về đầu vào máy ảnh, bạn sẽ muốn thêm nút khởi chạy chuyên dụng của riêng mình.

00:05:03.000 --> 00:05:11.000
Để làm điều đó, trước tiên chúng ta cần tạo một UIAction bằng cách sử dụng phương pháp captureTextFromCamera factory, mới trong iOS 15.

00:05:11.000 --> 00:05:17.000
Hành động biết cách khởi chạy máy ảnh, nhưng cũng cung cấp hình ảnh và nhãn khi nó được sử dụng cùng với các nút và menu.

00:05:17.000 --> 00:05:21.000
Hãy thêm một menu vào ứng dụng của tôi với một mục để chèn văn bản từ máy ảnh.

00:05:21.000 --> 00:05:23.000
Vậy đây lại là ứng dụng của tôi.

00:05:23.000 --> 00:05:28.000
Khi chỉnh sửa trường ghi chú, tôi có thanh công cụ này được hiển thị phía trên bàn phím.

00:05:28.000 --> 00:05:38.000
Khi mục thứ hai có biểu tượng máy ảnh được nhấn, tôi muốn một menu xuất hiện cho một loạt các hành động liên quan đến máy ảnh, như tính năng mới của chúng tôi, Văn bản từ Máy ảnh.

00:05:38.000 --> 00:05:41.000
Ở đây chúng tôi tạo ra hành động.

00:05:41.000 --> 00:05:49.000
Và lưu ý, ngoài mã định danh tùy chọn, phương thức nhà máy chỉ yêu cầu người trả lời chấp nhận văn bản.

00:05:49.000 --> 00:05:53.000
Sau đó, tôi tạo các hành động cho các mục menu khác.

00:05:53.000 --> 00:06:02.000
Cuối cùng, tôi tập hợp menu và điền nó vào từng hành động tôi vừa tạo, bao gồm cả hành động textFromCamera.

00:06:02.000 --> 00:06:06.000
Hãy nhớ rằng, tôi không cần phải chỉ định tiêu đề hoặc hình ảnh nào để sử dụng.

00:06:06.000 --> 00:06:08.000
Đó là tất cả được cung cấp bởi hành động.

00:06:08.000 --> 00:06:10.000
Tiêu đề thậm chí sẽ được bản địa hóa cho tôi.

00:06:10.000 --> 00:06:13.000
Được rồi, hãy thử nó.

00:06:13.000 --> 00:06:14.000
Chúng tôi đã trở lại ứng dụng.

00:06:14.000 --> 00:06:17.000
Đây là trường Ghi chú và thanh công cụ với menu máy ảnh của chúng tôi.

00:06:17.000 --> 00:06:24.000
Hãy để tôi chèn một số văn bản từ một tờ rơi hoạt động trước mặt tôi.

00:06:24.000 --> 00:06:25.000
Và xong rồi!

00:06:25.000 --> 00:06:29.000
Một trình khởi chạy có thể phát hiện được bởi người dùng chỉ với một vài dòng mã.

00:06:29.000 --> 00:06:32.000
Tuy nhiên, có một điều cần ghi nhớ.

00:06:32.000 --> 00:06:38.000
Trước khi bạn thêm bất kỳ trình khởi chạy máy ảnh nào, trước tiên bạn sẽ muốn kiểm tra kết quả của canPerformAction withSender.

00:06:38.000 --> 00:06:49.000
Đó là bởi vì UIAction của chúng tôi hoạt động bằng cách gọi một phương thức mới trên các đối tượng UIResponder được gọi là captureTextFromCamera, hoạt động tương tự như các hành động chỉnh sửa tiêu chuẩn như cắt, sao chép và dán.

00:06:49.000 --> 00:06:53.000
Và những hành động đó không phải lúc nào cũng có sẵn, tùy thuộc vào ngữ cảnh.

00:06:53.000 --> 00:06:57.000
Ví dụ, bạn không thể cắt văn bản nếu bạn không chọn gì cả.

00:06:57.000 --> 00:07:01.000
Điều tương tự cũng xảy ra ở đây; hành động captureTextFromCamera có một số điều kiện tiên quyết.

00:07:01.000 --> 00:07:04.000
Một phương pháp đó sẽ đảm bảo tất cả các yêu cầu đều được đáp ứng.

00:07:04.000 --> 00:07:06.000
Nhưng chúng ta hãy xem qua từng người trong số họ.

00:07:06.000 --> 00:07:10.000
Bằng cách đó, bạn có ý tưởng tốt hơn về lý do tại sao phương pháp đó có thể trả về sai.

00:07:10.000 --> 00:07:16.000
Đầu tiên, có một số yêu cầu phần cứng; không phải tất cả các thiết bị chạy iOS 15 đều hỗ trợ tính năng này.

00:07:16.000 --> 00:07:18.000
Thiết bị phải là một chiếc iPhone.

00:07:18.000 --> 00:07:24.000
Và không chỉ bất kỳ chiếc iPhone nào, một chiếc có siêu năng lực học máy của Neural Engine.

00:07:24.000 --> 00:07:28.000
Ngoài phần cứng, người trả lời của bạn phải xử lý việc chèn văn bản.

00:07:28.000 --> 00:07:30.000
Chúng ta sẽ nói nhiều hơn về điều đó sau.

00:07:30.000 --> 00:07:37.000
Tiếp theo, và điều này có thể hiển nhiên, nhưng nếu người trả lời của bạn là chế độ xem văn bản hoặc trường văn bản, nó phải có thể chỉnh sửa được.

00:07:37.000 --> 00:07:44.000
Và cuối cùng, người dùng phải có ít nhất một trong bảy ngôn ngữ được hỗ trợ này trong danh sách các ngôn ngữ ưa thích của họ.

00:07:44.000 --> 00:07:46.000
Bây giờ bạn đã được trang bị tốt để xử lý đầu vào máy ảnh.

00:07:46.000 --> 00:07:50.000
Nhưng trước khi chúng ta kết thúc, hãy để tôi cho bạn thấy điều gì đó thú vị mà tôi đã thêm vào ứng dụng của mình.

00:07:50.000 --> 00:07:52.000
Nhớ ảnh tiêu đề không?

00:07:52.000 --> 00:07:56.000
Thật tuyệt, nhưng tôi nghĩ sẽ rất tuyệt nếu thêm chú thích lên nó.

00:07:56.000 --> 00:07:59.000
Có thể là một chú thích được lấy từ máy ảnh.

00:07:59.000 --> 00:08:04.000
Vì vậy, tôi đã thêm một nút khởi chạy ở đây giống như những gì chúng tôi đã làm với mục menu.

00:08:04.000 --> 00:08:14.000
Và bây giờ, tôi có thể chụp văn bản và đặt nó lên trên hình ảnh.

00:08:14.000 --> 00:08:15.000
Nhưng làm thế nào tôi có thể làm điều đó, mặc dù?

00:08:15.000 --> 00:08:20.000
Ý tôi là, đó là chế độ xem hình ảnh chứ không phải điều khiển văn bản.

00:08:20.000 --> 00:08:23.000
Hãy lùi lại và tìm hiểu cách các điều khiển văn bản hoạt động.

00:08:23.000 --> 00:08:26.000
Và sau đó chúng ta sẽ nói về lượt xem hình ảnh sau.

00:08:26.000 --> 00:08:29.000
Điều khiển văn bản áp dụng một giao thức gọi là UIKeyInput.

00:08:29.000 --> 00:08:35.000
Nó xác định một bộ phương pháp cơ bản để người trả lời chấp nhận nhập bàn phím.

00:08:35.000 --> 00:08:40.000
Giao thức có ba phương thức, một trong số đó là phương thức insertText.

00:08:40.000 --> 00:08:45.000
Và phương pháp đó chính xác là những gì được sử dụng để truyền văn bản từ máy ảnh đến ứng dụng của bạn.

00:08:45.000 --> 00:08:50.000
Vì vậy, để người phản hồi hỗ trợ đầu vào máy ảnh, nó cần áp dụng giao thức này.

00:08:50.000 --> 00:08:53.000
Tôi biết tôi vừa nói điều khiển văn bản áp dụng UIKeyInput.

00:08:53.000 --> 00:08:59.000
Nhưng trên thực tế, họ áp dụng một giao thức gọi là UITextInput, đây là một phần mở rộng của UIKeyInput.

00:08:59.000 --> 00:09:06.000
Nếu bạn áp dụng UITextInput, bạn sẽ nhận được một tính năng bổ sung khi sử dụng máy ảnh: xem trước văn bản sẽ được chèn vào.

00:09:06.000 --> 00:09:09.000
Và điều đó được thực hiện với phương thức setMarkedText được hiển thị ở đây.

00:09:09.000 --> 00:09:11.000
Tuy nhiên, có một bản xem trước là tùy chọn.

00:09:11.000 --> 00:09:16.000
Nếu bạn chọn không có nó, bạn chỉ cần áp dụng UIKeyInput.

00:09:16.000 --> 00:09:21.000
Có một giao thức cuối cùng cần đề cập, và bạn có thể đã bắt gặp nó vài phút trước.

00:09:21.000 --> 00:09:25.000
Bản thân UIKeyInput mở rộng UITextInputTraits.

00:09:25.000 --> 00:09:37.000
Giao thức đó chỉ bao gồm các thuộc tính tùy chọn như KeyboardType và TextContentType, mà bạn biết từ trước đó được sử dụng để lọc đầu vào máy ảnh cho nội dung cụ thể.

00:09:37.000 --> 00:09:48.000
Vì vậy, đối với đầu vào máy ảnh, bạn sẽ muốn áp dụng UIKeyInput và, tùy chọn, tùy thuộc vào mức độ chức năng bạn đang theo đuổi, hãy áp dụng UITextInputTraits hoặc UITextInput.

00:09:48.000 --> 00:09:51.000
OK. Bây giờ, hãy mang nó trở lại ImageView của chúng ta.

00:09:51.000 --> 00:09:58.000
Tôi sẽ tạo một lớp mới gọi là HeadlineImageView phân lớp UIImageView và áp dụng UIKeyInput.

00:09:58.000 --> 00:09:59.000
Đây là nó trong mã.

00:09:59.000 --> 00:10:08.000
Đó là một lớp con đơn giản của UIImageView và nó có chế độ xem con UILabel mà chúng tôi sẽ sử dụng để hiển thị chú thích.

00:10:08.000 --> 00:10:15.000
Hãy nhớ rằng, để áp dụng UIKeyInput, chúng ta cần ba phương thức: hasText, deleteBackward và insertText.

00:10:15.000 --> 00:10:19.000
Thông thường, những người phản hồi áp dụng UIKeyInput để triệu hồi bàn phím.

00:10:19.000 --> 00:10:26.000
Nhưng bởi vì tôi chỉ muốn đầu vào máy ảnh chứ không phải đầu vào bàn phím, chúng tôi chỉ phải triển khai insertText.

00:10:26.000 --> 00:10:33.000
hasText chỉ có thể trả về false và deleteBackward không cần phải làm gì cả.

00:10:33.000 --> 00:10:37.000
Đối với insertText, việc triển khai nó thực sự đơn giản.

00:10:37.000 --> 00:10:41.000
Nó chỉ lấy văn bản từ máy ảnh và đưa nó vào nhãn của chúng tôi.

00:10:41.000 --> 00:10:42.000
Đó là tất cả những gì cần làm!

00:10:42.000 --> 00:10:47.000
Bây giờ chúng ta có chế độ xem hình ảnh với cách hiển thị chú thích được chụp từ máy ảnh.

00:10:47.000 --> 00:10:49.000
Cảm ơn vì đã thực hiện chuyến đi này với tôi!

00:10:49.000 --> 00:10:51.000
Đây là những gì tôi hy vọng bạn sẽ thoát khỏi.

00:10:51.000 --> 00:10:54.000
Tận dụng các loại nội dung văn bản.

00:10:54.000 --> 00:10:59.000
Chúng giúp đỡ theo nhiều cách, bao gồm cả việc lọc văn bản từ máy ảnh.

00:10:59.000 --> 00:11:03.000
Tạo trình khởi chạy của riêng bạn khi bạn thực sự muốn quảng bá đầu vào máy ảnh.

00:11:03.000 --> 00:11:10.000
Chúng tôi cung cấp nhãn và hình ảnh cho giao diện nhất quán mà người dùng có thể liên kết với đầu vào máy ảnh trên các ứng dụng.

00:11:10.000 --> 00:11:14.000
Nhưng hãy chắc chắn rằng trước tiên bạn kiểm tra xem chức năng có khả dụng hay không.

00:11:14.000 --> 00:11:20.000
Cuối cùng, hãy nhớ rằng bạn có thể sử dụng đầu vào máy ảnh cho các phản hồi tùy chỉnh của riêng bạn mà không phải là điều khiển văn bản.

00:11:20.000 --> 00:11:24.000
Bạn chỉ cần áp dụng giao thức UIKeyInput.

00:11:24.000 --> 00:11:28.000
Du lịch an toàn và tận hưởng phần còn lại của WWDC 2021!

00:11:28.000 --> 23:59:59.000
♪

