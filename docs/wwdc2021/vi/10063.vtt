WEBVTT

00:00:00.000 --> 00:00:09.000
♪ ♪

00:00:09.000 --> 00:00:11.000
Xin chào!

00:00:11.000 --> 00:00:14.000
Tên tôi là Russell, và tôi là một kỹ sư trong nhóm UIKit.

00:00:14.000 --> 00:00:23.000
Trong iOS 13, chúng tôi đã giới thiệu một giao diện tinh tế cho các trang tính, đưa chúng đến Điện thoại và thêm một cử chỉ kéo để loại bỏ phổ quát.

00:00:23.000 --> 00:00:33.000
Để tìm hiểu thêm về điều này, hãy xem video Hiện đại hóa giao diện người dùng của bạn cho iOS 13, cụ thể là phần về Bài thuyết trình bắt đầu từ 9 phút 45 giây.

00:00:33.000 --> 00:00:43.000
Trong iOS 15, chúng tôi đã xây dựng trên nền tảng đó bằng cách thêm một loạt các tùy chọn tùy chỉnh vào trang tính, vì vậy bây giờ bạn có thể sử dụng chúng theo những cách mới thú vị hơn bao giờ hết.

00:00:43.000 --> 00:00:52.000
Chúng tôi đã thêm hỗ trợ cho một detent trung bình, cho phép bạn tạo một trang tính có thể thay đổi kích thước theo chiều dọc chỉ bao phủ một nửa màn hình.

00:00:52.000 --> 00:01:02.000
Bây giờ bạn cũng có thể xóa chế độ xem mờ, điều này sẽ cho phép bạn xây dựng giao diện người dùng phi phương thức, nơi người dùng có thể tương tác với nội dung phía sau trang tính trong khi trang tính được trình bày.

00:01:02.000 --> 00:01:10.000
Tiếp theo, tôi sẽ đề cập đến một số tùy chọn hình ảnh mới, bao gồm cách để có được giao diện không toàn màn hình trên điện thoại ở dạng ngang.

00:01:10.000 --> 00:01:20.000
Và cuối cùng, tôi sẽ chỉ ra cách thiết lập giao diện người dùng thích ứng liền mạch giữa cửa sổ bật lên trong các lớp kích thước thông thường và trang tính tùy chỉnh trong các lớp kích thước nhỏ gọn.

00:01:20.000 --> 00:01:26.000
Để khám phá tất cả những điều này, chúng tôi đã tạo một ứng dụng mẫu để tạo bưu thiếp kỹ thuật số và nó có sẵn với video này.

00:01:26.000 --> 00:01:32.000
Đối với mỗi tấm bưu thiếp, tôi có thể tùy chỉnh hình ảnh cũng như văn bản và phông chữ.

00:01:32.000 --> 00:01:36.000
Bây giờ, trước khi tôi có thể tùy chỉnh một tờ, trước tiên tôi phải lấy một tờ.

00:01:36.000 --> 00:01:48.000
Một trang tính là một thể hiện của một lớp con UIPresentationController mới được gọi là UISheetPresentationController và tất cả các tùy chọn tùy chỉnh được hiển thị dưới dạng thuộc tính trên lớp này.

00:01:48.000 --> 00:01:56.000
Cách điển hình để có được một thể hiện của lớp này là đọc thuộc tính sheetPresentationController trên bộ điều khiển chế độ xem trước khi bạn trình bày nó.

00:01:56.000 --> 00:02:06.000
Phương thức này trả về một phiên bản không phải không miễn là modalPresentationStyle của bộ điều khiển chế độ xem là biểu mẫu hoặc trang tính, theo mặc định.

00:02:06.000 --> 00:02:10.000
Từ đây, sau đó bạn có thể đặt các thuộc tính khác nhau trên phiên bản để tùy chỉnh nó.

00:02:10.000 --> 00:02:16.000
Đây là mẫu tương tự như lấy trình điều khiển trình bày bật lên của bộ điều khiển chế độ xem và đặt các thuộc tính của nó.

00:02:16.000 --> 00:02:21.000
Và với điều đó, chúng ta hãy nhảy vào các dấu vết.

00:02:21.000 --> 00:02:23.000
Detents là gì?

00:02:23.000 --> 00:02:32.000
Dấu chân là chiều cao mà một tấm nằm tự nhiên và chúng được định nghĩa là một phần nhỏ của khung tấm được mở rộng hoàn toàn.

00:02:32.000 --> 00:02:39.000
Khung mở rộng hoàn toàn được hiển thị trên iPhone và iPad ở đây, và nó sẽ quen thuộc nếu bạn đã sử dụng các trang tính trước đây.

00:02:39.000 --> 00:02:51.000
Chúng tôi đã hiển thị hai detent do hệ thống xác định trong iOS 15: một detent trung bình, bằng khoảng một nửa chiều cao đầy đủ của trang tính và một detent lớn, là chiều cao của một trang tính được mở rộng hoàn toàn.

00:02:51.000 --> 00:02:58.000
Để xác định các detents nào bạn muốn một trang tính hỗ trợ, chỉ cần đặt một mảng các detents bạn muốn trên thuộc tính detents.

00:02:58.000 --> 00:03:09.000
Giá trị mặc định của thuộc tính này là một mảng chỉ có trọng lượng lớn, đó là lý do tại sao nếu bạn không đặt nó, bạn sẽ nhận được một bảng chiều cao đầy đủ tiêu chuẩn.

00:03:09.000 --> 00:03:17.000
Nếu bạn đặt cái này thành một mảng các detent trung bình và lớn, bạn sẽ nhận được một tờ có thể thay đổi kích thước giữa trung bình và lớn.

00:03:17.000 --> 00:03:27.000
Nhưng bạn cũng có thể đặt cái này thành một mảng chỉ có giá trị trung bình, cung cấp cho bạn một tờ trình bày ở độ cao trung bình và không thể thay đổi kích thước thành chiều cao đầy đủ.

00:03:27.000 --> 00:03:29.000
Hãy áp dụng cái này cho ứng dụng mẫu.

00:03:29.000 --> 00:03:36.000
Tôi đang bắt đầu với một số mã nhắm vào SDK iOS 14 để trình bày bộ chọn hình ảnh hệ thống trong một bảng tiêu chuẩn.

00:03:36.000 --> 00:03:46.000
Khi một nút được nhấn, chức năng đầu tiên này được gọi, tạo ra một bộ chọn hình ảnh, đặt đại diện của bộ chọn thành chính nó và sau đó trình bày bộ chọn.

00:03:46.000 --> 00:03:57.000
Sau đó, khi một hình ảnh được chọn, phương thức đại diện didFinishPicking được gọi, sau đó đặt hình ảnh đã chọn trên chế độ xem hình ảnh và loại bỏ bộ chọn.

00:03:57.000 --> 00:03:58.000
Hãy chạy nó.

00:03:58.000 --> 00:04:02.000
Khi tôi nhấn vào nút ảnh, bộ chọn ảnh sẽ bao gồm toàn bộ ứng dụng.

00:04:02.000 --> 00:04:05.000
Lưu ý rằng chuyến du lịch của tôi gần đây rất ảo.

00:04:05.000 --> 00:04:11.000
Và khi tôi chọn một bức ảnh, người chọn ảnh bỏ qua, để lộ bức ảnh tôi đã chọn trong bưu thiếp.

00:04:11.000 --> 00:04:14.000
Nhưng nếu tôi muốn chọn một bức tranh khác thì sao?

00:04:14.000 --> 00:04:16.000
Tôi phải trải qua toàn bộ dòng chảy này một lần nữa.

00:04:16.000 --> 00:04:21.000
Và sẽ thật tuyệt nếu tôi có thể cho xem thư viện ảnh và bưu thiếp của mình cùng một lúc.

00:04:21.000 --> 00:04:24.000
Và với một ý định trung bình, tôi có thể.

00:04:24.000 --> 00:04:28.000
Đây là mã giống như trước đây nhưng với một vài thay đổi.

00:04:28.000 --> 00:04:35.000
Trước khi tôi trình bày bộ chọn, tôi truy cập sheetPresentationController của nó và đặt các detents của nó thành trung bình và lớn.

00:04:35.000 --> 00:04:46.000
Cũng trong bộ chọn đã gọi lại đại diện didFinishPicking, tôi đã xóa dòng loại bỏ bộ chọn ảnh, bởi vì bây giờ tôi không muốn bộ chọn ảnh loại bỏ khi chọn ảnh.

00:04:46.000 --> 00:04:54.000
Bây giờ khi tôi chạy cái này và nhấn vào nút ảnh, thư viện của tôi xuất hiện ở độ cao một nửa, tôi có thể chọn một bức ảnh và thì đấy.

00:04:54.000 --> 00:04:57.000
Tôi có thể thấy nó trong bưu thiếp của mình với thư viện vẫn còn bên dưới.

00:04:57.000 --> 00:05:02.000
Và nếu tôi muốn thử một bức ảnh khác, nó đơn giản như một cú chạm.

00:05:02.000 --> 00:05:10.000
Ngoài ra, vì mảng detent của tôi bao gồm detent lớn, tôi có thể kéo thanh để thay đổi kích thước trang tính này đến chiều cao đầy đủ.

00:05:10.000 --> 00:05:16.000
Ngoài ra, vì chế độ xem cuộn được cuộn lên trên cùng, cuộn chế độ xem cuộn cũng sẽ mở rộng trang tính.

00:05:16.000 --> 00:05:23.000
Đối với một bảng hành động như Bảng chia sẻ hệ thống, đây là một tính năng tuyệt vời dần dần tiết lộ các hành động nâng cao hơn ở cuối danh sách.

00:05:23.000 --> 00:05:34.000
Nhưng đối với ví dụ thư viện ảnh này, tôi có thể muốn cuộn không mở rộng trang tính để bưu thiếp luôn hiển thị trừ khi tôi thay đổi kích thước trang tính một cách rõ ràng bằng cách kéo từ thanh.

00:05:34.000 --> 00:05:43.000
Để có được hành vi thay thế này, tôi chỉ cần đặt một thuộc tính bổ sung: PrefersScrollingExpands- WhenScrolledToEdge.

00:05:43.000 --> 00:05:50.000
Theo mặc định, thuộc tính này là đúng, vì vậy việc đặt nó thành sai sẽ ngăn việc cuộn mở rộng trang tính.

00:05:50.000 --> 00:05:59.000
Bây giờ bộ chọn ảnh không thay đổi kích thước khi cuộn, nhưng tôi vẫn có thể kéo thanh để có cái nhìn rõ hơn về thư viện ảnh của mình.

00:05:59.000 --> 00:06:04.000
Nhưng bây giờ khi tôi nhấn vào một bức ảnh, không rõ ràng là có bất cứ điều gì đã xảy ra.

00:06:04.000 --> 00:06:12.000
Điều này trái ngược với hành vi trước đó, khi việc nhấn vào một bức ảnh đã loại bỏ bộ chọn ảnh, cho thấy rõ ràng lựa chọn của tôi đã được nhận.

00:06:12.000 --> 00:06:21.000
Điều tôi muốn là thay đổi kích thước trang tính thành giá đỡ trung bình khi tôi nhấn vào ảnh, vừa để cho biết lựa chọn của tôi đã được nhận vừa để hiển thị lựa chọn của tôi trong bưu thiếp.

00:06:21.000 --> 00:06:26.000
Và tôi có thể đạt được điều này bằng cách thay đổi theo chương trình mục tiêu đã chọn.

00:06:26.000 --> 00:06:37.000
Vì vậy, nếu tôi quay lại phương thức đại diện chọn hình ảnh được gọi bất cứ khi nào một bức ảnh được nhấn, tôi có thể thêm một số mã vào đây để lấy sheetPresentationController và đặt Trình xác định đã chọn thành trung bình.

00:06:37.000 --> 00:06:39.000
Hãy thử cái này.

00:06:39.000 --> 00:06:44.000
Chú ý sự chuyển đổi khi tôi nhấn vào một bức ảnh.

00:06:44.000 --> 00:06:45.000
Whoa!

00:06:45.000 --> 00:06:48.000
Quá trình chuyển đổi đó diễn ra quá nhanh, tôi gần như bị mất lông mày.

00:06:48.000 --> 00:06:50.000
Nó thực sự không hoạt hình chút nào.

00:06:50.000 --> 00:06:56.000
Tôi có thể dễ dàng tạo hiệu ứng động cho quá trình chuyển đổi này bằng cách gói cài đặt của thuộc tính trong khối sheet.animateChanges.

00:06:56.000 --> 00:07:10.000
Điều này sẽ tạo hiệu ứng động cho trang tính xuống giá trị trung bình nếu cần với đường cong hoạt hình tiêu chuẩn và tạo hiệu ứng động cho các trang tính khác trong ngăn xếp, chẳng hạn như bảng gốc tăng tỷ lệ trở lại.

00:07:10.000 --> 00:07:12.000
Bơ mịn.

00:07:12.000 --> 00:07:18.000
Một điều tuyệt vời nữa là xóa chế độ xem mờ để hiển thị ảnh đã chọn đầy đủ màu sắc.

00:07:18.000 --> 00:07:24.000
Để làm điều đó, có một thuộc tính nữa để xem xét được gọi là smallestUndimmed- DetentIdentifier.

00:07:24.000 --> 00:07:33.000
Theo mặc định, thuộc tính này là nil, có nghĩa là tất cả các detents đều bị mờ, nhưng nếu bạn muốn loại bỏ mờ, hãy đặt nó thành số nhận dạng của lỗ nhỏ nhất mà bạn không muốn làm mờ.

00:07:33.000 --> 00:07:37.000
Trong trường hợp này, tôi sẽ đặt nó ở mức trung bình.

00:07:37.000 --> 00:07:42.000
Lưu ý rằng không có sự mờ đi ở giá trung bình khi tôi đưa người nhặt lên.

00:07:42.000 --> 00:07:43.000
Ta-da!

00:07:43.000 --> 00:07:48.000
Nhưng độ mờ vẫn mờ dần nếu tôi thay đổi kích thước thành lỗ lớn.

00:07:48.000 --> 00:08:02.000
Hơn cả việc loại bỏ độ mờ một cách trực quan, thuộc tính này còn cho phép bạn xây dựng trải nghiệm phi phương thức nâng cao, vì bây giờ tôi có thể tương tác không chỉ với nội dung trong trang tính mà còn với nội dung bên ngoài trang tính.

00:08:02.000 --> 00:08:15.000
Điều này thậm chí còn sâu sắc hơn với trình chọn phông chữ, nơi tôi đã xây dựng một giao diện người dùng cho phép tôi chọn một phạm vi văn bản trong khi trình chọn phông chữ đang hoạt động, áp dụng phông chữ cho chỉ phạm vi đó, điều chỉnh lựa chọn của tôi và áp dụng lại phông chữ.

00:08:15.000 --> 00:08:20.000
Tải xuống ứng dụng mẫu để biết chi tiết về cách đạt được điều này.

00:08:20.000 --> 00:08:35.000
Cũng cần lưu ý rằng các trang tính có chiều cao trung bình hỗ trợ tránh bàn phím tự động, vì vậy nếu tôi tìm kiếm phông chữ ở đây, trang tính sẽ tự động phát triển để tính đến bàn phím và khi bàn phím bị loại bỏ, trang tính sẽ tự động thu gọn trở lại.

00:08:35.000 --> 00:08:48.000
Vì vậy, đó là rất nhiều thông tin về detents, nhưng bây giờ tôi muốn chuyển sự chú ý của chúng tôi sang một số tùy chọn tùy chỉnh trực quan mới khác cho các trang tính, bắt đầu với giao diện tùy chọn mới cho các trang tính trên iPhone ở dạng ngang.

00:08:48.000 --> 00:09:00.000
Trong iOS 13, chúng tôi đã tạo tất cả các trang tính toàn màn hình ở chế độ ngang và bây giờ chúng tôi đã cung cấp một giao diện thay thế trong đó các trang tính chỉ được gắn vào màn hình ở cạnh dưới của chúng.

00:09:00.000 --> 00:09:06.000
Để có được diện mạo mới này, chỉ cần đặt prefersEdgeAttached- InCompactHeight thành true.

00:09:06.000 --> 00:09:10.000
Bây giờ chỉ cần cài đặt cái này sẽ luôn cung cấp cho bạn một tờ giấy rộng bằng khu vực an toàn.

00:09:10.000 --> 00:09:19.000
Nếu bạn muốn một trang tính có chiều rộng theo trình bàyViewControllers preferredContentSize, hãy đặt widthFollows- PreferredContentSize- WhenEdgeAttached thành true.

00:09:19.000 --> 00:09:27.000
Điều này sẽ làm cho trang tính có chiều rộng mặc định hẹp hơn và bạn có thể đặt Kích thước Nội dung ưa thích để tùy chỉnh thêm chiều rộng này.

00:09:27.000 --> 00:09:31.000
Bên cạnh những tài sản này, còn có một tài sản để hiển thị người lấy nếu bạn thích.

00:09:31.000 --> 00:09:43.000
Trình lấy thường không cần thiết, nhưng trong trường hợp có thể ít rõ ràng hơn rằng một trang tính có thể thay đổi kích thước, chẳng hạn như khi cuộn không thay đổi kích thước trang tính, hiển thị trình lấy có thể là một chỉ báo hữu ích về khả năng thay đổi kích thước.

00:09:43.000 --> 00:09:46.000
Bây giờ chú ý đến các góc của tờ giấy.

00:09:46.000 --> 00:09:50.000
Một lựa chọn khác mà chúng tôi đã giới thiệu là khả năng tùy chỉnh bán kính góc.

00:09:50.000 --> 00:09:55.000
Nếu ứng dụng của bạn có vẻ ngoài tròn trịa hơn, bạn có thể muốn phù hợp với tính thẩm mỹ đó.

00:09:55.000 --> 00:10:05.000
Lưu ý rằng hệ thống sẽ giữ cho các góc xếp chồng lên nhau trông nhất quán, vì vậy nếu bộ chọn ảnh này mở rộng để đẩy lại bảng gốc, bảng gốc sẽ có các góc lớn hơn để khớp.

00:10:05.000 --> 00:10:16.000
Cuối cùng, mặc dù có thể tạo một trang tính với các detents trên iPad, nhưng thường thì một cửa sổ bật lên được mong muốn thay vào đó thích ứng với một trang tính nhỏ gọn, có khả năng được tùy chỉnh với những thứ như detents.

00:10:16.000 --> 00:10:19.000
Hãy thực hiện cách tiếp cận này với ứng dụng mẫu.

00:10:19.000 --> 00:10:24.000
Để có được một cửa sổ bật lên cho bộ chọn hình ảnh trên iPad, tôi cần thực hiện một vài sửa đổi nhỏ.

00:10:24.000 --> 00:10:29.000
Đầu tiên, tôi sẽ đặt modalPresentationStyle của bộ chọn thành popover.

00:10:29.000 --> 00:10:40.000
Sau đó, thay vì lấy sheetPresentationController, bởi vì điều này bây giờ sẽ trả về nil, vì modalPresentationStyle không phải là một trang tính, tôi sẽ lấy popoverPresentationController.

00:10:40.000 --> 00:10:48.000
Tôi sẽ đặt nguồn của cửa sổ bật lên là barButtonItem của chúng tôi, và sau đó tôi sẽ lấy một thuộc tính mới trên cửa sổ bật lên được gọi là adaptiveSheet- PresentationController.

00:10:48.000 --> 00:10:59.000
Thuộc tính này trả về một ví dụ của trang tính mà cửa sổ bật lên sẽ thích ứng trong các lớp kích thước nhỏ gọn và sau đó tôi sẽ định cấu hình nó giống như tôi đã làm với trang tính trước đây.

00:10:59.000 --> 00:11:07.000
Bây giờ khi tôi nhấn vào nút ảnh, bộ chọn ảnh sẽ xuất hiện trong cửa sổ bật lên và nếu tôi thay đổi kích thước cảnh, nó sẽ thích ứng với bảng chiều cao trung bình.

00:11:07.000 --> 00:11:09.000
Nó hoạt động!

00:11:09.000 --> 00:11:14.000
Và nếu tôi mở rộng bộ chọn, và chọn một bức ảnh-- ồ, không!

00:11:14.000 --> 00:11:18.000
Nó không tự động thay đổi kích thước thành chiều cao trung bình như chúng tôi đã thực hiện trước đây.

00:11:18.000 --> 00:11:19.000
Hừm.

00:11:19.000 --> 00:11:23.000
Hãy quay lại phương thức đại diện chọn didFinishPicking.

00:11:23.000 --> 00:11:24.000
À!

00:11:24.000 --> 00:11:33.000
Để có được bảng thích ứng, tôi cũng cần đọc adaptiveSheet- PresentationController trên cửa sổ bật lênPresentationController ở đây trong mã.

00:11:33.000 --> 00:11:36.000
Bây giờ hãy chú ý khi tôi chọn một bức ảnh.

00:11:36.000 --> 00:11:41.000
Hoan hô! Nó thay đổi kích thước trở lại mức trung bình một lần nữa.

00:11:41.000 --> 00:11:50.000
Bây giờ, tôi đã nói về rất nhiều thứ ở đây sẽ cho phép bạn dễ dàng xây dựng các loại giao diện người dùng mới với các trang tính mà trước đây không thể dễ dàng xây dựng.

00:11:50.000 --> 00:11:56.000
Xem lại các ứng dụng của riêng bạn cho các khu vực sẽ được hưởng lợi từ các tấm chiều cao trung bình hoặc trải nghiệm phi phương thức.

00:11:56.000 --> 00:12:02.000
Nếu bạn có bất kỳ thẻ tùy chỉnh nửa chiều cao nào trong ứng dụng của mình hôm nay, hãy thay thế chúng bằng các trang UIKit mới được cải tiến này.

00:12:02.000 --> 23:59:59.000
Cảm ơn bạn đã xem, và tôi mong được thấy tất cả những điều mới mẻ thú vị mà bạn xây dựng bằng các trang tính.

