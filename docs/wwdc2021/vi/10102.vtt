WEBVTT

00:00:01.000 --> 00:00:10.000
Xin chào.

00:00:10.000 --> 00:00:11.000
Tôi là Cindy Clarissa.

00:00:11.000 --> 00:00:14.000
Tôi là một kỹ sư phần mềm với Core Location.

00:00:14.000 --> 00:00:18.000
Hôm nay, tôi sẽ nói về một số điều mới thú vị cho Core Location trong năm nay.

00:00:18.000 --> 00:00:29.000
Chúng tôi đang giới thiệu hai tính năng mới có thể cho phép bạn cung cấp năng lượng cho chức năng dựa trên vị trí trong ứng dụng của mình mà không phải đối mặt với những người có nhu cầu cấp phép cho họ nhiều như vậy.

00:00:29.000 --> 00:00:35.000
Bắt đầu với tính năng đầu tiên, chúng tôi sẽ đưa thông báo người dùng dựa trên Khu vực lên watchOS 8.

00:00:35.000 --> 00:00:43.000
Giờ đây, ứng dụng Apple Watch của bạn có thể nhắc nhở mọi người bắt đầu tập luyện khi họ đến phòng tập thể dục hoặc cho chó ăn khi họ về nhà.

00:00:43.000 --> 00:00:51.000
Ví dụ, ở đây chúng tôi có Ứng dụng trên không sử dụng tính năng mới này để thông báo cho mọi người về các chuyến bay của họ khi họ đến sân bay.

00:00:51.000 --> 00:01:01.000
Với các thông báo của người dùng dựa trên Khu vực, hệ thống có thể thay mặt ứng dụng của bạn trình bày thông tin có liên quan đến không gian mà không cần ủy quyền "luôn luôn".

00:01:01.000 --> 00:01:09.000
Để tìm hiểu thêm về cách bạn có thể áp dụng thông báo người dùng dựa trên Khu vực cho watchOS, hãy xem phiên "Có gì mới trong watchOS".

00:01:09.000 --> 00:01:12.000
Bây giờ hãy nói về chủ đề chính của phiên này.

00:01:12.000 --> 00:01:22.000
Chúng tôi đang giới thiệu một cách mới để yêu cầu vị trí giúp mọi người kiểm soát dữ liệu của họ nhiều hơn, đồng thời, cung cấp nhiều chức năng hơn cho ứng dụng của bạn.

00:01:22.000 --> 00:01:28.000
Tôi sẽ bắt đầu bằng cách nói về tình trạng ủy quyền vị trí ngày hôm nay và động lực đằng sau tính năng mới của chúng tôi.

00:01:28.000 --> 00:01:42.000
Trong iOS 14, khi một ứng dụng yêu cầu ủy quyền vị trí, một lời nhắc ban đầu sẽ xuất hiện và mọi người có khả năng chọn từ Cho phép một lần, Trong khi sử dụng hoặc Không cho phép ủy quyền.

00:01:42.000 --> 00:01:49.000
Và với tính năng mới của năm ngoái, mọi người có khả năng kiểm soát độ chính xác của vị trí được gửi đến ứng dụng của bạn.

00:01:49.000 --> 00:01:59.000
Một số bạn có thể nhận thấy rằng mọi người chọn Cho phép một lần trên ứng dụng của bạn và có thể họ không nghĩ rằng việc cấp phép khi sử dụng là cần thiết cho ứng dụng của bạn.

00:01:59.000 --> 00:02:10.000
Ví dụ: một ứng dụng cửa hàng thú cưng có thể yêu cầu ủy quyền vị trí để xác định cửa hàng thú cưng gần họ nhất, nhưng nó không yêu cầu vị trí của chúng khi chúng chỉ duyệt các tùy chọn thức ăn cho mèo khác nhau.

00:02:10.000 --> 00:02:19.000
Trong trường hợp này, những người sử dụng ứng dụng này có thể có nhiều khả năng chọn Cho phép một lần hoặc Không cho phép ủy quyền.

00:02:19.000 --> 00:02:26.000
Nếu mọi người chọn Cho phép một lần, chúng tôi sẽ cấp ủy quyền vị trí trong khoảng thời gian họ đang sử dụng ứng dụng của bạn.

00:02:26.000 --> 00:02:30.000
Nhưng ứng dụng của bạn sẽ mất quyền khi nó vào nền.

00:02:30.000 --> 00:02:37.000
Điều này có thể dẫn đến nhiều yêu cầu ủy quyền vị trí, điều này có thể tác động tiêu cực đến trải nghiệm người dùng.

00:02:37.000 --> 00:02:45.000
Trong một trường hợp khác, bạn có thể nhận thấy rằng ai đó mệt mỏi với lời nhắc có thể chọn Không cho phép để ngăn lời nhắc được hiển thị lại.

00:02:45.000 --> 00:02:51.000
Điều này có thể dẫn đến việc phải gửi mọi người đến Cài đặt để ủy quyền cho các vị trí sau này.

00:02:51.000 --> 00:03:07.000
Khi quyền riêng tư tiếp tục là ưu tiên quan trọng đối với Apple, chúng tôi nghĩ, "Làm thế nào chúng tôi có thể cung cấp nhiều quyền kiểm soát hơn mà không cản trở trải nghiệm người dùng?" Chúng tôi có thể cung cấp một cách dễ dàng và thân thiện để ủy quyền địa điểm chỉ tại thời điểm cần thiết không?

00:03:07.000 --> 00:03:16.000
Bắt đầu từ iOS 15, chúng tôi sẽ giới thiệu CLLocationButton cho UIKit và LocationButton cho SwiftUI để giải quyết các điểm khó khăn mà tôi đã đề cập.

00:03:16.000 --> 00:03:21.000
Ở đây, chúng tôi có một ứng dụng Park Finder tìm thấy công viên gần nhất gần đó.

00:03:21.000 --> 00:03:27.000
Ở phía dưới, chúng tôi có một Nút Vị trí màu xanh lam với tiêu đề "Vị trí hiện tại" bên cạnh glyph mũi tên.

00:03:27.000 --> 00:03:35.000
Khi tôi nhấn vào nút, Park Finder có thể lấy vị trí hiện tại của tôi và hiển thị chế độ xem bản đồ của tất cả các công viên gần đó.

00:03:35.000 --> 00:03:43.000
Một mũi tên vị trí ở trên cùng bên trái sẽ chuyển sang màu xanh lam để kêu gọi người dùng chú ý đến ủy quyền mà họ vừa cấp.

00:03:43.000 --> 00:03:52.000
Một điều cần lưu ý là Nút Vị trí thực sự đang cấp phép ứng dụng của bạn cho phép một lần mà không khiến mọi người phải xem qua lời nhắc mỗi lần.

00:03:52.000 --> 00:03:58.000
Sau đó, tôi sẽ xem xét điều này sẽ ảnh hưởng như thế nào đến trạng thái ủy quyền hiện tại của bạn.

00:03:58.000 --> 00:04:05.000
Chúng tôi sẽ mang Nút Vị trí đến watchOS, iOS, macOS với các ứng dụng Catalyst và iPad trên Mac.

00:04:05.000 --> 00:04:09.000
Bây giờ, hãy đi sâu vào API và cách bạn có thể thêm CLLocationButton vào ứng dụng của mình.

00:04:09.000 --> 00:04:13.000
CLLocationButton là một phần của khung CoreLocationUI.

00:04:13.000 --> 00:04:18.000
Tương tự như UIButton, CLLocationButton có nguồn gốc từ UIControls.

00:04:18.000 --> 00:04:22.000
Vì vậy, bạn có thể sử dụng các chức năng UIControl với nút.

00:04:22.000 --> 00:04:26.000
Ngoài ra, chúng tôi có bốn thuộc tính dành riêng cho nút của chúng tôi.

00:04:26.000 --> 00:04:44.000
Chúng tôi có CLLocationButtonIcon để đặt loại mũi tên, CLLocationLabel để đặt nhãn của nút, một góc Bán kính để đặt độ tròn của nút và cuối cùng, chúng tôi có fontSize để đặt kích thước của nhãn.

00:04:44.000 --> 00:04:51.000
Bây giờ tôi đã xem qua một cái nhìn tổng quan ngắn gọn, bạn có thể tự hỏi, "Làm thế nào tôi có thể nhận được vị trí với CLLocationButton?"

00:04:51.000 --> 00:04:56.000
Chà, nó tương tự như yêu cầu vị trí với UIButton.

00:04:56.000 --> 00:04:59.000
Tôi nghĩ nó dễ hiểu hơn với một ví dụ.

00:04:59.000 --> 00:05:04.000
Hãy để tôi chứng minh cách bạn có thể thay thế UIButton của mình bằng CLLocationButton.

00:05:04.000 --> 00:05:14.000
Trong ví dụ UIButton này, tôi sẽ tạo một nút đơn giản yêu cầu vị trí bằng cách trước tiên yêu cầu ủy quyền khi sử dụng khi nhấn nút.

00:05:14.000 --> 00:05:19.000
Tôi sẽ bắt đầu bằng cách khởi tạo một UIButton và đặt tiêu đề của nó thành "Vị trí hiện tại".

00:05:19.000 --> 00:05:26.000
Tôi muốn thêm một hành động mục tiêu gọi một hàm và thực hiện hành động cần thiết mà chúng tôi muốn mỗi khi nhấn vào nút.

00:05:26.000 --> 00:05:30.000
Trong trường hợp này, tôi muốn trưng bày tất cả các công viên gần đó.

00:05:30.000 --> 00:05:35.000
Vậy hãy gọi hàm này là "showNearByParks".

00:05:35.000 --> 00:05:44.000
Trong chức năng showNearByParks này, tôi sẽ sử dụng locationManager để gọi requestWhenInUseAuthorization và startUpdatingLocation.

00:05:44.000 --> 00:05:49.000
Trong chức năng này, tôi cũng sẽ thêm logic bổ sung để hiển thị chế độ xem bản đồ cho phù hợp.

00:05:49.000 --> 00:05:52.000
Nhưng, để đơn giản, hãy bỏ qua điều đó.

00:05:52.000 --> 00:06:03.000
Hãy bắt đầu bằng cách thay thế UIButton bằng cách xóa hai dòng đầu tiên và thay thế nó bằng một khởi tạo CLLocationButton và sau đó đặt nhãn thành ".currentLocation".

00:06:03.000 --> 00:06:17.000
Cuối cùng, chúng tôi có thể nhận xét cuộc gọi yêu cầu WhenInUseAuthorization và đó là vì Nút Vị trí sẽ thay mặt bạn cấp ủy quyền một lần mỗi khi nút được nhấn thành công.

00:06:17.000 --> 00:06:23.000
Vì vậy, nếu bạn có một UIButton hiện có, việc thay thế nó sẽ đơn giản như được hiển thị ở đây.

00:06:23.000 --> 00:06:30.000
Nhưng chúng tôi muốn làm cho nó dễ dàng hơn, vì vậy bạn có thể xem một ví dụ về ứng dụng Park Finder được đính kèm với bài nói chuyện này.

00:06:30.000 --> 00:06:34.000
Đối với những người có ứng dụng SwiftUI, Nút Vị trí cũng có trong SwiftUI.

00:06:34.000 --> 00:06:37.000
Bạn có thể sử dụng LocationButton như được hiển thị trong ví dụ ở đây.

00:06:37.000 --> 00:06:49.000
Tôi muốn chỉ ra rằng tôi đang sử dụng "symbolVariant" mới của SwiftUI để đặt loại mũi tên và "tint" để đặt màu nền của nút.

00:06:49.000 --> 00:06:53.000
Hãy xem qua một số ví dụ về cách bạn có thể tùy chỉnh Nút Vị trí.

00:06:53.000 --> 00:07:01.000
Với Nút Vị trí của chúng tôi, bạn có thể tùy chỉnh màu nền, màu văn bản và màu glyph, các góc tròn, v.v.

00:07:01.000 --> 00:07:05.000
Đây chỉ là một số kiểu ví dụ mà bạn có thể tạo bằng nút của chúng tôi.

00:07:05.000 --> 00:07:09.000
Hãy xem qua các ví dụ từng bước về tùy chỉnh Nút Vị trí.

00:07:09.000 --> 00:07:11.000
Hãy bắt đầu với nút mặc định của chúng ta.

00:07:11.000 --> 00:07:19.000
Giao diện mặc định có tiêu đề "Vị trí hiện tại" màu trắng và màu nền systemBlue, như được hiển thị ở đây.

00:07:19.000 --> 00:07:23.000
Chúng ta có thể đặt biểu tượng nút thành arrowFilled.

00:07:23.000 --> 00:07:30.000
Tiếp theo, chúng ta có thể thay đổi màu nền trước của biểu tượng bằng cách đặt tintColor từ trắng sang đen...

00:07:30.000 --> 00:07:34.000
Và sau đó đặt màu nền thành màu trắng.

00:07:34.000 --> 00:07:41.000
Và cuối cùng, tôi có thể đặt bán kính góc thành các góc tròn bằng cách đặt nó thành 25,0.

00:07:41.000 --> 00:07:53.000
Và tùy thuộc vào cách bạn đặt các ràng buộc và kích thước cho nút, nếu chiều rộng của nút bằng chiều cao, bạn có thể tạo một vòng tròn hoàn hảo khi bán kính góc bằng một nửa chiều rộng.

00:07:53.000 --> 00:07:59.000
Bây giờ, chúng tôi đã biến nút vị trí mặc định của mình thành một nút tròn màu trắng chỉ với những điều chỉnh đơn giản.

00:07:59.000 --> 00:08:03.000
Chúng tôi vừa trải qua một số thay đổi về phong cách mà bạn có thể thêm vào Nút Vị trí.

00:08:03.000 --> 00:08:08.000
Bạn có thể tùy chỉnh nút để tạo ra giao diện hoàn hảo phù hợp với ứng dụng của mình.

00:08:08.000 --> 00:08:11.000
Tuy nhiên, quyền lực lớn đi kèm với trách nhiệm lớn.

00:08:11.000 --> 00:08:20.000
Khi tùy chỉnh Nút Vị trí của bạn, có một số hạn chế mà bạn có thể gặp phải để đảm bảo rằng Nút Vị trí của bạn rõ ràng và hiển thị.

00:08:20.000 --> 00:08:29.000
Tôi muốn nói về một số ví dụ mà bạn có thể mong đợi nếu nút của bạn dường như không được vẽ chính xác hoặc nhận được bất kỳ vị trí nào.

00:08:29.000 --> 00:08:35.000
Nếu đúng như vậy, trong khi hành động mục tiêu của bạn sẽ được gọi, bạn sẽ không nhận được ủy quyền.

00:08:35.000 --> 00:08:36.000
Nhưng đừng lo lắng.

00:08:36.000 --> 00:08:42.000
Chúng tôi sẽ cung cấp nhiều phản hồi với các tin nhắn nhật ký để giúp bạn tìm ra những hạn chế mà bạn đang gặp phải.

00:08:42.000 --> 00:08:53.000
Ví dụ, đây chỉ là những thông báo nhật ký khác nhau đề cập đến sự thiếu hụt của kích thước nút, giá trị alpha và độ tương phản màu giữa tintColor và backgroundColor.

00:08:53.000 --> 00:08:59.000
Bây giờ hãy xem qua một số ví dụ về những phản hồi mà bạn có thể mong đợi nếu bạn đang sử dụng Trình tạo giao diện trong Xcode.

00:08:59.000 --> 00:09:11.000
Tiếp tục với nút tôi đã tạo trước đó, nếu tôi thay đổi nút hiện có để có màu trắng, mọi người sẽ không thể nhìn thấy điều này vì màu nền của nút đã có màu trắng.

00:09:11.000 --> 00:09:17.000
Vì vậy, nếu bạn làm điều này, bạn sẽ thấy vấn đề này được hiển thị trong ngăn điều hướng bên dưới tab Vấn đề trong Xcode.

00:09:17.000 --> 00:09:24.000
Thay vào đó, hãy hoàn nguyên nút ban đầu của chúng ta và cố gắng thay đổi độ mờ đục, hoặc alpha, của nút này.

00:09:24.000 --> 00:09:31.000
Có thể bạn có thể thấy điều này, nhưng đối với những người khác, nó hơi quá minh bạch, và vì vậy nó không đạt được các hướng dẫn về khả năng tiếp cận của chúng tôi.

00:09:31.000 --> 00:09:37.000
Một tuyên bố vấn đề tương tự được tạo ra trong Xcode, khuyên bạn nên tăng giá trị alpha.

00:09:37.000 --> 00:09:42.000
Một vấn đề khác mà bạn có thể gặp phải là kích thước nút không đủ.

00:09:42.000 --> 00:09:48.000
Đây là khi nội dung của nút quá nhỏ hoặc quá lớn so với kích thước nút.

00:09:48.000 --> 00:09:54.000
Tùy thuộc vào cài đặt bản địa hóa của người dùng, độ dài văn bản của nút có thể thay đổi.

00:09:54.000 --> 00:10:01.000
Bây giờ hãy tăng kích thước văn bản bằng cách thay đổi ngôn ngữ.

00:10:01.000 --> 00:10:09.000
Tùy thuộc vào việc triển khai của bạn có thân thiện với bố cục tự động hay không, nếu chúng tôi thay đổi ngôn ngữ, kích thước của văn bản có thể lớn hơn nút.

00:10:09.000 --> 00:10:12.000
Lưu ý rằng văn bản không vừa với nút bằng tiếng Đức.

00:10:12.000 --> 00:10:16.000
Nếu điều này xảy ra, hãy xem thông báo nhật ký để nhận phản hồi.

00:10:16.000 --> 00:10:28.000
Đừng quên kiểm tra Nút Vị trí của bạn với kích thước văn bản thực sự nhỏ hoặc thực sự lớn, cũng như kiểm tra nó bằng các ngôn ngữ khác nhau để đảm bảo rằng nút của bạn đang hoạt động trong mọi trường hợp.

00:10:28.000 --> 00:10:34.000
Vì vậy, khi tùy chỉnh nút của bạn, hãy nhớ rằng điều bắt buộc là nó phải rõ ràng và hiển thị.

00:10:34.000 --> 00:10:41.000
Nếu nút của bạn dường như không được vẽ chính xác hoặc nhận vị trí, có thể nó không còn dễ đọc nữa.

00:10:41.000 --> 00:10:48.000
Nếu đúng như vậy, chúng tôi cung cấp thông báo nhật ký để được hướng dẫn giúp bạn xác định điều gì có thể xảy ra.

00:10:48.000 --> 00:10:55.000
Bây giờ bạn đã biết cách triển khai Nút Vị trí, bạn có thể tự hỏi nó sẽ ảnh hưởng như thế nào đến trạng thái ủy quyền hiện tại của bạn.

00:10:55.000 --> 00:11:01.000
Như tôi đã đề cập trước đây, Nút Vị trí về cơ bản cung cấp cho bạn ủy quyền Cho phép-Một lần.

00:11:01.000 --> 00:11:12.000
Nếu ứng dụng của bạn không có bất kỳ trạng thái ủy quyền nào dưới bất kỳ hình thức nào, nó sẽ có ủy quyền "Không xác định" với "Khi tôi chia sẻ" được chọn trong Cài đặt quyền riêng tư.

00:11:12.000 --> 00:11:22.000
Nếu đây là trạng thái hiện tại của ứng dụng của bạn, thì lần đầu tiên mỗi người dùng nhấn Nút Vị trí, lời nhắc này sẽ yêu cầu họ xác nhận rằng họ đang ở trên tàu.

00:11:22.000 --> 00:11:34.000
Tuy nhiên, nếu ứng dụng của bạn đã được ủy quyền cho vị trí, chẳng hạn như trạng thái "Trong khi sử dụng ứng dụng", thì việc sử dụng Nút vị trí sẽ không thay đổi trạng thái hiện tại của bạn và sẽ hoạt động giống như bất kỳ UIButton nào khác.

00:11:34.000 --> 00:11:44.000
Nơi nó hoạt động, Nút Vị trí có thể cảm thấy kỳ diệu và cũng yên tâm, bởi vì bạn đang để mọi người quyết định khi nào và liệu vị trí của họ có được sử dụng mỗi lần hay không.

00:11:44.000 --> 00:11:54.000
Vì Nút Vị trí thoải mái hơn nhiều, chúng tôi nghĩ rằng mọi người sẽ có nhiều khả năng cung cấp vị trí ứng dụng của bạn thông qua Nút Vị trí hơn so với trước đây.

00:11:54.000 --> 00:12:00.000
Vì vậy, chúng tôi muốn cung cấp cho người dùng và ứng dụng của bạn một cơ hội khác để đi đúng hướng.

00:12:00.000 --> 00:12:15.000
Nếu ai đó, người đã chọn ủy quyền "Không cho phép" trên ứng dụng của bạn trong quá khứ nhấn vào Nút Vị trí mới của chúng tôi, họ sẽ thấy lời nhắc giới thiệu nút này và có cơ hội chuyển ứng dụng của bạn trở lại NotDetermined và sử dụng Nút Vị trí trong tương lai.

00:12:15.000 --> 00:12:24.000
Vì vậy, trong phiên này, tôi đã nói về việc mang lại nhiều khả năng năng động hơn cho các ứng dụng watchOS của bạn với các thông báo người dùng dựa trên Khu vực.

00:12:24.000 --> 00:12:28.000
Nếu bạn quan tâm đến việc tìm hiểu thêm, đừng quên xem các tài nguyên với phiên.

00:12:28.000 --> 00:12:34.000
Chúng tôi cũng đã đề cập đến một số tính năng mới thú vị có thể thay đổi trò chơi về cách bạn có thể yêu cầu vị trí.

00:12:34.000 --> 00:12:39.000
Cho phép mọi người kiểm soát nhiều hơn đối với quyền riêng tư dữ liệu của họ là điều quan trọng đối với Apple.

00:12:39.000 --> 00:12:43.000
Mọi người ngày càng nhận thức rõ hơn về cách dữ liệu của họ đang được chia sẻ.

00:12:43.000 --> 00:13:02.000
Khi thiết kế ứng dụng của bạn để cung cấp trải nghiệm người dùng tuyệt vời nhất, nhưng cũng xây dựng niềm tin với khách hàng của bạn, bạn có thể muốn tự hỏi mình: "Ứng dụng của tôi có yêu cầu ủy quyền truyền thống hay ủy quyền vị trí một lần với Nút Vị trí sẽ phù hợp hơn?"

00:13:02.000 --> 00:13:07.000
Và câu trả lời, trong một số trường hợp, có thể là một lần là đủ.

00:13:07.000 --> 00:13:14.000
Với Nút Vị trí, bạn có thể có được sự tin tưởng với mọi người bằng cách kiểm soát nhiều hơn khi họ muốn chia sẻ vị trí của họ.

00:13:14.000 --> 00:13:15.000
Cảm ơn bạn.

00:13:15.000 --> 23:59:59.000
[Âm nhạc].

