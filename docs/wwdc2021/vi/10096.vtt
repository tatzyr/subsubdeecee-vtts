WEBVTT

00:00:00.000 --> 00:00:05.000
♪ Nhạc bass đang phát ♪

00:00:05.000 --> 00:00:09.000
♪

00:00:09.000 --> 00:00:19.000
Tommy Pauly: Xin chào, tôi là Tommy Pauly, và cùng với đồng nghiệp của tôi, Delziel, tôi sẽ giới thiệu cho bạn một tính năng mới thú vị trong quyền riêng tư trên internet.

00:00:19.000 --> 00:00:29.000
iCloud Private Relay là một dịch vụ mới ngăn chặn các mạng và máy chủ giám sát hoạt động của người dùng trên internet.

00:00:29.000 --> 00:00:34.000
Và nó có sẵn như một phần của mọi đăng ký iCloud+.

00:00:34.000 --> 00:00:51.000
Private Relay không chỉ bảo vệ người dùng khi họ duyệt web mà còn tăng cường bảo vệ lưu lượng truy cập do ứng dụng của bạn tạo ra để đảm bảo bạn không vô tình rò rỉ thông tin người dùng hoặc khiến người dùng bị tấn công bảo mật.

00:00:51.000 --> 00:01:11.000
Hôm nay, bạn sẽ tìm hiểu iCloud Private Relay là gì và nó ảnh hưởng đến ứng dụng của bạn như thế nào; cách đảm bảo rằng ứng dụng của bạn hoạt động tốt với Private Relay; cách chuẩn bị các trang web và máy chủ của bạn; và cuối cùng, cách quản lý mạng và giám sát lưu lượng truy cập của bạn khi Private Relay được bật.

00:01:11.000 --> 00:01:14.000
Hãy bắt đầu nào.

00:01:14.000 --> 00:01:22.000
Private Relay được tích hợp vào iOS và macOS, vì vậy bạn không cần phải làm bất cứ điều gì để áp dụng nó từ ứng dụng của mình.

00:01:22.000 --> 00:01:26.000
Điều quan trọng là phải hiểu rằng nó không phải lúc nào cũng ảnh hưởng đến ứng dụng của bạn.

00:01:26.000 --> 00:01:34.000
Nó sẽ chỉ áp dụng khi người dùng là người đăng ký iCloud+ và đã bật Private Relay.

00:01:34.000 --> 00:01:38.000
Có lẽ bạn đang tự hỏi, Nó thực sự làm gì?

00:01:38.000 --> 00:01:42.000
Đây là cách mọi thứ hiện đang hoạt động mà không cần Private Relay.

00:01:42.000 --> 00:01:54.000
Khi ai đó truy cập internet, bất kỳ ai trên mạng cục bộ của họ đều có thể thấy tên của tất cả các trang web mà họ truy cập dựa trên việc kiểm tra các truy vấn DNS.

00:01:54.000 --> 00:02:01.000
Thông tin này có thể được sử dụng để lấy dấu vân tay của người dùng và xây dựng lịch sử hoạt động của họ theo thời gian.

00:02:01.000 --> 00:02:13.000
Không ai có thể âm thầm thu thập tất cả thông tin này, cho dù đó là nhà điều hành Wi-Fi công cộng, người dùng khác trên mạng hay nhà cung cấp dịch vụ internet.

00:02:13.000 --> 00:02:20.000
Khi các kết nối đến các máy chủ chạy các trang web, các máy chủ đó có thể thấy địa chỉ IP của người dùng.

00:02:20.000 --> 00:02:26.000
Điều này cho phép các máy chủ xác định vị trí người dùng mà không cần sự cho phép rõ ràng.

00:02:26.000 --> 00:02:42.000
Tệ hơn nữa, các máy chủ có thể lấy dấu vân tay danh tính người dùng và nhận dạng người dùng trên các trang web khác nhau, ngay cả khi các công cụ như Ngăn chặn theo dõi thông minh trong Safari đang ngăn chặn mối tương quan thông qua cookie.

00:02:42.000 --> 00:02:53.000
Đây là những vấn đề lớn đối với quyền riêng tư của người dùng và để khắc phục chúng, chúng tôi cần một cách tiếp cận mới có quyền riêng tư được tích hợp bởi thiết kế.

00:02:53.000 --> 00:03:01.000
iCloud Private Relay bổ sung nhiều proxy an toàn để giúp định tuyến lưu lượng truy cập của người dùng và giữ nó ở chế độ riêng tư.

00:03:01.000 --> 00:03:04.000
Các proxy được điều hành bởi các thực thể riêng biệt.

00:03:04.000 --> 00:03:09.000
Một là Apple, và một là nhà cung cấp nội dung.

00:03:09.000 --> 00:03:20.000
Bây giờ, khi ai đó truy cập internet, chỉ có địa chỉ IP của khách hàng được hiển thị cho cả nhà cung cấp mạng và proxy đầu tiên.

00:03:20.000 --> 00:03:29.000
Proxy thứ hai chỉ nhìn thấy tên mà người dùng đang yêu cầu và sử dụng nó để xây dựng kết nối với máy chủ.

00:03:29.000 --> 00:03:39.000
Điều quan trọng cần lưu ý là không ai trong chuỗi này - kể cả Apple - có thể nhìn thấy cả địa chỉ IP của khách hàng và những gì người dùng đang truy cập.

00:03:39.000 --> 00:03:43.000
Các cơ hội lấy dấu vân tay đã bị loại bỏ.

00:03:43.000 --> 00:03:48.000
Đây là sự riêng tư theo thiết kế.

00:03:48.000 --> 00:03:59.000
Private Relay sử dụng các giao thức vận chuyển mới nhất và xác thực bảo vệ quyền riêng tư để đảm bảo rằng mọi giao dịch đều an toàn và nhanh chóng.

00:03:59.000 --> 00:04:07.000
Bạn có thể tìm hiểu thêm về công nghệ này trong phiên "Tập trung vào các trụ cột quyền riêng tư của Apple".

00:04:07.000 --> 00:04:15.000
Private Relay tập trung vào việc đảm bảo lưu lượng nhạy cảm nhất trên hệ thống mà không ảnh hưởng đến trải nghiệm người dùng.

00:04:15.000 --> 00:04:30.000
Trong iOS 15 và macOS 12, Private Relay sẽ áp dụng cho tất cả các trình duyệt web trong Safari, tất cả các truy vấn độ phân giải tên DNS và một tập hợp con nhỏ lưu lượng truy cập từ các ứng dụng.

00:04:30.000 --> 00:04:39.000
Cụ thể, điều này sẽ bao gồm tất cả lưu lượng HTTP không an toàn, chẳng hạn như cổng TCP 80.

00:04:39.000 --> 00:04:51.000
Nếu ứng dụng của bạn cung cấp bộ lọc nội dung hoặc bộ lọc kiểm soát của phụ huynh, nó sẽ vẫn thấy lưu lượng truy cập trước khi đi qua Private Relay, vì vậy bạn có thể áp dụng bộ lọc của mình giống như trước đây.

00:04:51.000 --> 00:04:57.000
Bạn có thể tìm hiểu thêm về điều này trong phiên "Gặp gỡ API Thời gian Sử dụng Màn hình".

00:04:57.000 --> 00:05:07.000
Không phải tất cả các mạng được thực hiện bởi ứng dụng của bạn đều xảy ra qua internet công cộng, vì vậy có một số loại lưu lượng truy cập không bị ảnh hưởng bởi Private Relay.

00:05:07.000 --> 00:05:15.000
Bất kỳ kết nối nào mà ứng dụng của bạn thực hiện qua mạng cục bộ hoặc với tên miền riêng sẽ không bị ảnh hưởng.

00:05:15.000 --> 00:05:30.000
Tương tự, nếu ứng dụng của bạn cung cấp tiện ích mở rộng mạng để thêm VPN hoặc khả năng proxy ứng dụng, tiện ích mở rộng của bạn sẽ không sử dụng Private Relay và lưu lượng ứng dụng sử dụng tiện ích mở rộng của bạn cũng vậy.

00:05:30.000 --> 00:05:34.000
Lưu lượng truy cập sử dụng proxy cũng được miễn.

00:05:34.000 --> 00:05:42.000
Tiếp theo, hãy đề cập đến những gì bạn cần làm để đảm bảo ứng dụng của bạn đã sẵn sàng hoạt động tốt với Private Relay.

00:05:42.000 --> 00:05:47.000
Tin tuyệt vời là đối với hầu hết mọi ứng dụng, bạn không cần phải làm bất cứ điều gì mới!

00:05:47.000 --> 00:05:50.000
Private Relay sẽ chỉ hoạt động.

00:05:50.000 --> 00:05:55.000
Tuy nhiên, có một số phương pháp hay nhất mà bạn nên biết.

00:05:55.000 --> 00:05:59.000
Private Relay hoạt động bất kể bạn đang sử dụng API mạng nào.

00:05:59.000 --> 00:06:09.000
Trong nhiều năm, chúng tôi đã khuyến nghị các ứng dụng của bạn sử dụng các API hiện đại như URLSession và NWConnection.

00:06:09.000 --> 00:06:13.000
Bây giờ, bạn có thêm một lý do để áp dụng chúng trong các ứng dụng của mình.

00:06:13.000 --> 00:06:22.000
Các API này cung cấp cho bạn các công cụ tốt nhất để hiểu cách Private Relay đang áp dụng cho lưu lượng truy cập của bạn.

00:06:22.000 --> 00:06:34.000
Nếu bạn sử dụng URLSession, bạn có thể sử dụng Network Xcode Instrument để kiểm tra các tác vụ của mình, ngay cả khi chúng đang thông qua Private Relay.

00:06:34.000 --> 00:06:42.000
Bạn có thể tìm hiểu thêm về cách thực hiện điều này trong phiên "Phân tích lưu lượng HTTP trong Công cụ".

00:06:42.000 --> 00:06:52.000
Và bạn có thể sử dụng các API số liệu trong cả URLSession và Network.framework để hiểu khi nào các kết nối của bạn sử dụng Private Relay.

00:06:52.000 --> 00:07:00.000
Trong TaskTransactionMetrics, bạn có thể kiểm tra xem nhiệm vụ của bạn có sử dụng proxy hay không.

00:07:00.000 --> 00:07:12.000
Trong Báo cáo thành lập của NWConnection, bạn cũng có thể kiểm tra thời gian phân giải tên DNS và từng giai đoạn của thiết lập kết nối proxy.

00:07:12.000 --> 00:07:20.000
Private Relay thực hiện một bước tiến lớn hướng tới việc biến các kết nối HTTP không được mã hóa và không an toàn thành dĩ vãng.

00:07:20.000 --> 00:07:23.000
Bạn cũng có thể tham gia vào nỗ lực này!

00:07:23.000 --> 00:07:32.000
Nếu bạn vẫn đang sử dụng HTTP không an toàn - đó là các kết nối trên cổng TCP 80 - bây giờ là lúc để thay đổi.

00:07:32.000 --> 00:07:43.000
Khi Private Relay được bật, các kết nối không an toàn này sẽ được proxy, điều này bảo vệ chúng khỏi những kẻ tấn công trên mạng cục bộ giữa máy khách và proxy.

00:07:43.000 --> 00:07:51.000
Tuy nhiên, tốt nhất là các kết nối của bạn được bảo mật từ đầu đến cuối cho tất cả người dùng.

00:07:51.000 --> 00:08:02.000
Để làm điều này, hãy đảm bảo máy chủ của bạn hỗ trợ TLS và thay đổi URL của bạn từ http:// sang https://.

00:08:02.000 --> 00:08:08.000
Ứng dụng của bạn có thể có ngoại lệ đối với Bảo mật Vận chuyển Ứng dụng để cho phép lưu lượng truy cập không an toàn.

00:08:08.000 --> 00:08:18.000
Bạn có thể xem danh sách này để kiểm tra lưu lượng truy cập không an toàn mà ứng dụng của bạn sử dụng và loại bỏ những ngoại lệ này.

00:08:18.000 --> 00:08:33.000
Nếu ứng dụng của bạn cung cấp chức năng dựa trên vị trí, đây cũng là thời điểm tuyệt vời để đảm bảo rằng bạn đang sử dụng API từ Core Location thay vì dựa vào các máy chủ suy ra vị trí từ địa chỉ IP.

00:08:33.000 --> 00:08:40.000
Vị trí địa lý địa chỉ IP thường không đáng tin cậy và không chính xác.

00:08:40.000 --> 00:08:49.000
Vị trí cốt lõi cho phép bạn chỉ định độ chính xác của vị trí bạn cần và dựa trên sự cho phép rõ ràng của người dùng.

00:08:49.000 --> 00:08:58.000
Bạn có thể tìm hiểu thêm về những cải tiến mới nhất để truy cập vị trí trong phiên "Tập trung vào trụ cột quyền riêng tư của Apple".

00:08:58.000 --> 00:09:03.000
Khi bạn đã chắc chắn rằng ứng dụng của mình đã sẵn sàng cho Private Relay, hãy dùng thử!

00:09:03.000 --> 00:09:16.000
Đăng nhập vào iPhone, iPad hoặc Mac bằng đăng ký iCloud+ và đảm bảo Private Relay được bật trong phần iCloud của ứng dụng Cài đặt hoặc trong Tùy chọn Hệ thống.

00:09:16.000 --> 00:09:22.000
Bạn có thể cung cấp phản hồi với thẻ "iCloud Private Relay" trong ứng dụng phản hồi.

00:09:22.000 --> 00:09:25.000
Bây giờ tôi sẽ giao nó cho đồng nghiệp của tôi, Delziel.

00:09:25.000 --> 00:09:27.000
Delziel Fernandes: Cảm ơn, Tommy.

00:09:27.000 --> 00:09:35.000
Xin chào, tôi là Delziel Fernandes, và tôi sẽ nói về cách chuẩn bị máy chủ của bạn và quản lý mạng của bạn với Private Relay.

00:09:35.000 --> 00:09:45.000
Nếu bạn có các máy chủ mà ứng dụng của bạn dựa vào hoặc người dùng truy cập trong Safari, có một vài điều bạn có thể làm để chuẩn bị cho Private Relay.

00:09:45.000 --> 00:09:53.000
Máy chủ của bạn có thể xác định các kết nối đi vào bằng Private Relay bằng cách nhận ra địa chỉ IP proxy.

00:09:53.000 --> 00:09:58.000
Các địa chỉ IP proxy này có thể được chia sẻ bởi nhiều người dùng trong một khu vực.

00:09:58.000 --> 00:10:02.000
Mỗi địa chỉ được ánh xạ đến một thành phố hoặc khu vực cụ thể.

00:10:02.000 --> 00:10:10.000
Vì vậy, nếu bạn áp dụng cơ sở dữ liệu bản đồ IP địa lý chính xác, máy chủ của bạn vẫn sẽ có thông tin liên quan.

00:10:10.000 --> 00:10:21.000
Private Relay đảm bảo rằng người dùng không thể sử dụng hệ thống để giả vờ đến từ một khu vực khác, vì vậy bạn có thể tiếp tục thực thi các hạn chế truy cập dựa trên khu vực.

00:10:21.000 --> 00:10:27.000
Chi tiết về các địa chỉ IP proxy sẽ có sẵn dưới dạng một bài viết liên quan đến phiên này.

00:10:27.000 --> 00:10:32.000
Bây giờ chúng ta hãy xem xét các kết nối mạng từ các thiết bị sử dụng Private Relay.

00:10:32.000 --> 00:10:38.000
Khi một thiết bị cố gắng truy cập máy chủ, trước tiên nó sẽ thiết lập kết nối mạng với proxy xâm nhập.

00:10:38.000 --> 00:10:44.000
Kết nối này được thiết lập bằng cách sử dụng địa chỉ IP được chỉ định bởi nhà cung cấp mạng.

00:10:44.000 --> 00:10:52.000
Thiết bị sau đó sử dụng proxy đầu vào để chuyển tiếp các yêu cầu mạng đến proxy đầu ra bằng cách sử dụng địa chỉ IP proxy đầu vào.

00:10:52.000 --> 00:11:02.000
Proxy đầu ra sau đó chuyển tiếp các yêu cầu này đến các máy chủ đích bằng cách chọn một địa chỉ IP ánh xạ đến thành phố hoặc khu vực của thiết bị.

00:11:02.000 --> 00:11:12.000
Nói chung, các máy chủ và trang web của bạn nên ngừng chỉ dựa vào địa chỉ IP của khách hàng để xác định vị trí hoặc danh tính của người dùng.

00:11:12.000 --> 00:11:20.000
Nếu bạn cần truy cập vị trí, hãy cân nhắc yêu cầu vị trí của người dùng một cách rõ ràng và chỉ ở mức độ chi tiết bạn cần.

00:11:20.000 --> 00:11:32.000
Nếu bạn cần xác định người dùng, hãy yêu cầu đăng nhập hoặc một số hình thức nhận dạng rõ ràng khác thay vì giả định rằng địa chỉ IP được gắn với danh tính.

00:11:32.000 --> 00:11:39.000
Cuối cùng, hãy đề cập đến một số mẹo để quản lý mạng của bạn khi Private Relay đang được sử dụng.

00:11:39.000 --> 00:11:47.000
Nếu bạn đang chạy theo dõi gói trên mạng cục bộ của mình khi Private Relay đang được sử dụng, bạn sẽ thấy một số mẫu lưu lượng truy cập mới.

00:11:47.000 --> 00:11:52.000
Bây giờ bạn sẽ thấy nhiều lưu lượng truy cập hơn đang chạy trên cổng UDP 443.

00:11:52.000 --> 00:11:59.000
Đây là lưu lượng QUIC - hoặc HTTP/3 - đang được sử dụng để giao tiếp với proxy Private Relay.

00:11:59.000 --> 00:12:11.000
Bạn có thể đảm bảo lưu lượng truy cập của mình hoạt động tốt bằng cách cho phép cổng UDP 443 trên mạng của bạn và bằng cách đảm bảo bộ định tuyến hoặc Trình dịch địa chỉ mạng của bạn được điều chỉnh để xử lý tốt.

00:12:11.000 --> 00:12:16.000
Bạn cũng sẽ thấy ít truy vấn DNS UDP văn bản rõ ràng hơn trên mạng của mình.

00:12:16.000 --> 00:12:22.000
Hãy xem qua một yêu cầu kết nối mạng điển hình từ một thiết bị khi Private Relay không được sử dụng.

00:12:22.000 --> 00:12:29.000
Khi một thiết bị cố gắng truy cập máy chủ, trước tiên nó sẽ gửi truy vấn DNS cho tên máy chủ của máy chủ.

00:12:29.000 --> 00:12:39.000
Khi tên máy chủ được phân giải thành địa chỉ IP, thiết bị sẽ kết nối với địa chỉ IP của máy chủ bằng giao thức vận chuyển như TCP.

00:12:39.000 --> 00:12:49.000
Thiết bị sau đó thực hiện bắt tay ba chiều TCP với máy chủ, sau đó là trao đổi TLS để thiết lập kết nối an toàn với máy chủ.

00:12:49.000 --> 00:13:02.000
Nhưng như bạn có thể thấy, nếu không có Private Relay, tên máy chủ của máy chủ và địa chỉ IP của thiết bị kết nối với máy chủ sẽ hiển thị bằng cách quan sát các gói tin trên mạng.

00:13:02.000 --> 00:13:09.000
Với Private Relay, trước tiên thiết bị thiết lập kết nối với proxy xâm nhập bằng QUIC hoặc HTTP/3.

00:13:09.000 --> 00:13:16.000
Trong quá trình chụp gói, bạn sẽ nhận thấy các gói UDP được gửi đến cổng 443 của proxy xâm nhập.

00:13:16.000 --> 00:13:26.000
Khi kết nối mạng được thiết lập với proxy xâm nhập, quyền truy cập vào máy chủ được bảo mật trong kết nối với proxy xâm nhập.

00:13:26.000 --> 00:13:29.000
Ở cuối máy chủ, không có thay đổi trong giao thức.

00:13:29.000 --> 00:13:33.000
Trao đổi TCP/TLS tương tự như lưu lượng không có Private Relay.

00:13:33.000 --> 00:13:43.000
Sự khác biệt duy nhất là máy chủ nhìn thấy kết nối đến từ địa chỉ IP proxy thay vì địa chỉ IP của thiết bị.

00:13:43.000 --> 00:13:47.000
Hầu hết các mạng không cần kiểm tra hoặc giám sát tất cả lưu lượng truy cập của người dùng.

00:13:47.000 --> 00:13:56.000
Tuy nhiên, nếu bạn điều hành mạng doanh nghiệp hoặc trường học, mạng của bạn có thể có các chính sách yêu cầu chặn tất cả lưu lượng truy cập.

00:13:56.000 --> 00:14:02.000
Để hỗ trợ trường hợp sử dụng này, bạn có thể chặn tên máy chủ của máy chủ proxy iCloud Private Relay.

00:14:02.000 --> 00:14:11.000
Sau đó, khi một thiết bị kết nối với mạng của bạn, người dùng sẽ nhận được lời nhắc cho biết Private Relay bị chặn trên mạng hiện tại.

00:14:11.000 --> 00:14:18.000
Sau đó, họ có thể chọn tắt Private Relay cho mạng đó hoặc chuyển đổi mạng.

00:14:18.000 --> 00:14:24.000
Thông tin về tên máy chủ proxy sẽ có sẵn dưới dạng một bài viết liên quan đến phiên này.

00:14:24.000 --> 00:14:31.000
Đối với kiểm soát của phụ huynh, giải pháp tốt nhất là sử dụng API bộ lọc nội dung được cung cấp bởi khung NetworkExtension.

00:14:31.000 --> 00:14:36.000
Điều này cho phép kiểm tra lưu lượng truy cập trên thiết bị ngay cả khi Private Relay được bật.

00:14:36.000 --> 00:14:45.000
Để biết thêm thông tin về API Bộ lọc nội dung, hãy xem các phiên "Gặp gỡ API thời gian sử dụng màn hình" và "Phần mở rộng mạng cho máy Mac hiện đại".

00:14:45.000 --> 00:15:00.000
Để kết thúc mọi thứ, hãy sử dụng các API mạng an toàn hiện đại như URLSession trong ứng dụng của bạn; kiểm tra ứng dụng của bạn với Private Relay; và đảm bảo các máy chủ và trang web của bạn hoạt động tốt khi chúng nhận được các kết nối được định tuyến qua Private Relay.

00:15:00.000 --> 00:15:01.000
Cảm ơn vì đã xem, mọi người!

00:15:01.000 --> 23:59:59.000
♪

