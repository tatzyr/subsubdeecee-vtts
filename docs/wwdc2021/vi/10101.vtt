WEBVTT

00:00:02.000 --> 00:00:12.000
Xin chào, và chào mừng đến với "Khám phá các clip cuộn với ReplayKit."

00:00:12.000 --> 00:00:17.000
Tên tôi là Ernest, và tôi là một kỹ sư phần mềm trong nhóm ReplayKit.

00:00:17.000 --> 00:00:22.000
Hôm nay, tôi thực sự vui mừng được chỉ cho bạn một cách mới để nắm bắt những điểm nổi bật của ứng dụng.

00:00:22.000 --> 00:00:26.000
Hãy để tôi bắt đầu bằng cách cung cấp cho bạn cái nhìn tổng quan về ReplayKit.

00:00:26.000 --> 00:00:32.000
ReplayKit là một khuôn khổ cho phép bạn ghi lại màn hình và âm thanh của ứng dụng.

00:00:32.000 --> 00:00:41.000
Khi mọi người muốn tạo một video hướng dẫn, hoặc đơn giản là chỉ muốn thể hiện lối chơi của họ, việc ghi màn hình trong ứng dụng sẽ tạo ra một video mà họ có thể lưu và chia sẻ với bạn bè của mình.

00:00:41.000 --> 00:00:45.000
Và điều gì sẽ xảy ra nếu bạn muốn kiểm soát nhiều hơn đối với nội dung video mà mọi người tạo ra?

00:00:45.000 --> 00:00:48.000
Bạn có thể muốn thêm các bộ lọc bổ sung hoặc lớp phủ.

00:00:48.000 --> 00:00:51.000
Bạn có thể làm điều này với tính năng chụp màn hình trong ứng dụng.

00:00:51.000 --> 00:01:02.000
Chụp màn hình trong ứng dụng sẽ cung cấp các mẫu âm thanh và video trực tiếp cho quy trình đăng ký của bạn, vì vậy bạn sẽ có toàn quyền kiểm soát nội dung đang được tạo.

00:01:02.000 --> 00:01:07.000
Và tất cả chúng ta đều biết điều tốt nhất tiếp theo để chơi một trò chơi là xem trực tiếp trò chơi.

00:01:07.000 --> 00:01:16.000
Phát sóng trong ứng dụng giúp mọi người dễ dàng phát trực tuyến ứng dụng của bạn đến các dịch vụ phát sóng của bên thứ ba, để được xem trên toàn thế giới.

00:01:16.000 --> 00:01:23.000
Mặc dù các tính năng ghi âm hiện tại của chúng tôi bao gồm nhiều trường hợp sử dụng khác nhau, nhưng có một trường hợp mà chúng tôi hiện không có.

00:01:23.000 --> 00:01:30.000
Vì vậy, hãy tưởng tượng người chơi của bạn vừa chiến đấu với tất cả kẻ thù và mở khóa chìa khóa đến một cấp độ trong trò chơi của bạn, và bây giờ họ muốn chia sẻ khoảnh khắc đó với bạn bè của họ.

00:01:30.000 --> 00:01:38.000
Nhưng bởi vì đây là lần đầu tiên họ chơi cấp độ này, họ không biết điều gì đó thú vị sẽ xảy ra và họ không thể ghi lại khoảnh khắc đó.

00:01:38.000 --> 00:01:44.000
Hiện tại, người chơi sẽ cần ghi lại toàn bộ trò chơi của họ để lưu tất cả những điểm nổi bật đáng nhớ của họ.

00:01:44.000 --> 00:01:52.000
Điều này dẫn đến một bản ghi lớn không chỉ chiếm nhiều dung lượng mà còn cần thời gian để cắt thành các clip ngắn hơn.

00:01:52.000 --> 00:01:57.000
Sẽ thật tuyệt vời nếu bạn có thể ghi lại tất cả những điểm nổi bật ngay khi chúng xảy ra?

00:01:57.000 --> 00:02:04.000
Hoặc thậm chí tốt hơn, điều gì sẽ xảy ra nếu ReplayKit làm điều này cho bạn và cung cấp cho bạn video clip của từng khoảnh khắc?

00:02:04.000 --> 00:02:12.000
Năm nay, tôi rất vui được giới thiệu cho bạn một tính năng mới mà chúng tôi đang thực hiện, ghi lại các clip.

00:02:12.000 --> 00:02:16.000
Ghi âm các clip sẽ giữ một bộ đệm quay của các mẫu âm thanh và video.

00:02:16.000 --> 00:02:24.000
Khi xuất clip được gọi, các mẫu trước tối đa 15 giây có thể được xuất thành một video clip ngắn.

00:02:24.000 --> 00:02:31.000
Vì vậy, bây giờ, thay vì cần biết khi nào nên bắt đầu ghi âm, bạn chỉ cần biết khi nào bạn muốn xuất.

00:02:31.000 --> 00:02:33.000
Có một số cách để xuất một video clip.

00:02:33.000 --> 00:02:42.000
Bạn có thể thêm các nút giao diện người dùng hoặc hỗ trợ bộ điều khiển trò chơi vào ứng dụng của mình, vì vậy mọi người có thể kiểm soát thủ công khi nào cần chụp clip.

00:02:42.000 --> 00:02:47.000
Chỉ với một nút bấm, họ có thể lấy clip chính xác khi họ muốn.

00:02:47.000 --> 00:02:51.000
Bạn cũng có thể thêm các trình kích hoạt trong ứng dụng của mình để tự động chụp các clip.

00:02:51.000 --> 00:03:00.000
Với điều này, bạn sẽ luôn ghi lại những khoảnh khắc thú vị đó khi họ có được một sự kết hợp hoàn hảo, đánh bại trùm cuối hoặc đánh bại tốc độ chạy tốt nhất của họ.

00:03:00.000 --> 00:03:06.000
Và với tất cả các clip này, bạn có thể tạo ra trải nghiệm người dùng được cá nhân hóa.

00:03:06.000 --> 00:03:17.000
Bạn có thể thêm một lớp phủ tùy chỉnh mở ra một bộ sưu tập các bản ghi âm hoặc bạn có thể trình bày một cuộn nổi bật với tất cả các clip được ghi ở cuối cấp độ để người chơi của bạn xem và chia sẻ.

00:03:17.000 --> 00:03:29.000
Ghi âm clip sẽ có sẵn cho iOS và macOS, và là một tính năng mạnh mẽ sẽ nằm bên cạnh các API ghi, ghi và phát sóng hiện có của chúng tôi.

00:03:29.000 --> 00:03:38.000
Tương tự như các tính năng khác của chúng tôi, ghi clip sẽ cung cấp cùng chất lượng HD, tác động hiệu suất thấp và các biện pháp bảo vệ quyền riêng tư tích hợp.

00:03:38.000 --> 00:03:41.000
Ghi âm clip hoạt động như thế nào dưới mui xe?

00:03:41.000 --> 00:03:43.000
Hãy cùng xem nào.

00:03:43.000 --> 00:03:49.000
Ghi clip bao gồm ba API: bắt đầu, dừng và xuất.

00:03:49.000 --> 00:03:56.000
Để bắt đầu bộ đệm clip, ứng dụng của bạn nên gọi vào RPScreenRecorder để lấy phiên bản singleton sharedRecorder.

00:03:56.000 --> 00:04:01.000
Với phiên bản được chia sẻ, bạn có thể gọi startClipBuffering API.

00:04:01.000 --> 00:04:07.000
Tại thời điểm đó, ReplayKit sẽ lưu trữ các mẫu màn hình và âm thanh từ ứng dụng của bạn trong một bộ đệm lăn.

00:04:07.000 --> 00:04:14.000
Mỗi khi ReplayKit nhận được mẫu mới, bất kỳ mẫu nào cũ hơn 15 giây sẽ bị loại bỏ.

00:04:14.000 --> 00:04:20.000
Sau khi bộ đệm lăn bắt đầu, ReplayKit đợi ứng dụng của bạn yêu cầu nó xuất.

00:04:20.000 --> 00:04:29.000
Khi ứng dụng gọi API clip xuất, ReplayKit sẽ lo phần còn lại và trả lại cho bạn video clip của thời điểm đó.

00:04:29.000 --> 00:04:42.000
Khi bạn không còn cần bộ đệm lăn hoặc khi bạn muốn sử dụng một tính năng ReplayKit khác, chẳng hạn như phát sóng trong ứng dụng, bạn có thể gọi API dừng và ReplayKit sẽ hủy phiên.

00:04:42.000 --> 00:04:49.000
Với thông tin này, hãy để tôi chỉ cho bạn một dự án mẫu triển khai các API clip mới.

00:04:49.000 --> 00:04:53.000
Bạn có thể đã quen thuộc với dự án mẫu này từ phiên họp của chúng tôi năm ngoái.

00:04:53.000 --> 00:04:57.000
Dự án mẫu được cập nhật hiện bao gồm mã cho các clip.

00:04:57.000 --> 00:05:00.000
Hãy cùng xem mã này.

00:05:00.000 --> 00:05:07.000
Cũng giống như các phiên ghi âm khác, đây là IBAction được liên kết với nút "bắt đầu clip" trong bảng phân cảnh chính.

00:05:07.000 --> 00:05:14.000
Nút này được sử dụng để bắt đầu bộ đệm clip nếu bạn chưa hoạt động và dừng bộ đệm clip nếu bạn đang hoạt động.

00:05:14.000 --> 00:05:20.000
Bây giờ, chúng ta hãy tiếp tục và xem điều gì sẽ xảy ra khi bạn bắt đầu đệm clip.

00:05:20.000 --> 00:05:22.000
Đây là mã để bắt đầu bộ đệm clip.

00:05:22.000 --> 00:05:30.000
Bạn sẽ lấy phiên bản máy ghi được chia sẻ từ RPScreenRecorder và gọi startClipBuffering với trình xử lý hoàn thành của bạn.

00:05:30.000 --> 00:05:38.000
Tại đây, trong trình xử lý hoàn thành, bạn sẽ cần xử lý bất kỳ lỗi nào xảy ra trong khi cố gắng khởi động, bao gồm cả việc cập nhật giao diện người dùng.

00:05:38.000 --> 00:05:45.000
Nếu không có lỗi, thì bạn cũng nên cập nhật giao diện người dùng để hiển thị rằng bản ghi hiện đang hoạt động.

00:05:45.000 --> 00:05:50.000
Tương tự như start, có một phương pháp đệm clip dừng trong dự án mẫu.

00:05:50.000 --> 00:05:56.000
Đây là nơi bạn sẽ nhận được phiên bản được chia sẻ, nhưng lần này, bạn sẽ gọi stopClipBuffering API.

00:05:56.000 --> 00:06:06.000
Trong trình xử lý hoàn thành, bạn sẽ cần xử lý bất kỳ lỗi nào xảy ra trong khi cố gắng dừng và nên cập nhật giao diện người dùng để cho thấy rằng bạn không còn ghi nữa.

00:06:06.000 --> 00:06:13.000
Bây giờ tôi đã xem qua mã để bắt đầu và dừng bộ đệm clip, hãy xem mã cần thiết để xuất clip.

00:06:13.000 --> 00:06:18.000
Đây là mã cho IBAction được liên kết với nút "xuất clip".

00:06:18.000 --> 00:06:22.000
Hành động được kích hoạt khi một người quyết định họ muốn tạo một clip.

00:06:22.000 --> 00:06:31.000
Chỉ là một lời nhắc nhở rằng bạn không bị giới hạn bởi cách tiếp cận này và có thể xuất các clip tự động dựa trên các trình kích hoạt ứng dụng của riêng bạn.

00:06:31.000 --> 00:06:41.000
Ở đây, nếu bạn đang chủ động ghi âm và nút được bật từ phương thức startClipBuffering trước đó, hàm exportClip sẽ được gọi.

00:06:41.000 --> 00:06:50.000
Để gọi exportClip API, bạn sẽ cần chỉ định URL và thời lượng clip.

00:06:50.000 --> 00:06:56.000
Tương tự như API bắt đầu và dừng, sau đó bạn sẽ xử lý bất kỳ lỗi nào trong trình xử lý hoàn thành.

00:06:56.000 --> 00:07:01.000
Nếu không có lỗi, thì bạn nên có clip tại URL được chỉ định.

00:07:01.000 --> 00:07:07.000
Với quyền truy cập vào các clip, sau đó bạn có thể xây dựng và sắp xếp trải nghiệm người dùng của riêng mình.

00:07:07.000 --> 00:07:13.000
Trong mã mẫu của tôi ở đây, clip chỉ đơn giản được lưu vào Ảnh.

00:07:13.000 --> 00:07:15.000
Và thế là xong!

00:07:15.000 --> 00:07:19.000
Với ba API này, giờ đây bạn có thể thêm bản ghi clip vào ứng dụng của mình.

00:07:19.000 --> 00:07:26.000
Bạn sẽ có quyền truy cập trực tiếp vào các clip trong URL được chỉ định, vì vậy bạn có thể xây dựng trải nghiệm trong ứng dụng của riêng mình.

00:07:26.000 --> 00:07:32.000
Như đã đề cập trước đó, một cách khác để có được các clip là thêm hỗ trợ bộ điều khiển trò chơi.

00:07:32.000 --> 00:07:37.000
Khung điều khiển trò chơi bây giờ sẽ có bản ghi clip tích hợp.

00:07:37.000 --> 00:07:43.000
Hãy nhớ rằng, các clip được xuất từ bộ điều khiển trò chơi sẽ lưu trực tiếp vào Ảnh hoặc Máy tính để bàn.

00:07:43.000 --> 00:07:51.000
Vì vậy, để tạo trải nghiệm trong ứng dụng của riêng bạn với các clip được tạo, bạn sẽ cần triển khai API clip ReplayKit.

00:07:51.000 --> 00:08:04.000
Khi tích hợp cả ReplayKit và khung bộ điều khiển trò chơi, bạn nên đảm bảo rằng bạn đang sử dụng quan sát giá trị chính cho cả các thuộc tính có sẵn và ghi trên RPScreenRecorder.

00:08:04.000 --> 00:08:13.000
Ngoài ra, hãy đảm bảo tuân theo giao thức RPScreenRecorderDelegate để bạn có thể cập nhật trạng thái ứng dụng của mình khi cần thiết.

00:08:13.000 --> 00:08:17.000
Và thật đơn giản để tích hợp ghi clip trong các ứng dụng của bạn.

00:08:17.000 --> 00:08:23.000
Với việc ghi lại các clip, ứng dụng của bạn sẽ sẵn sàng ghi lại tất cả những khoảnh khắc thú vị khi chúng xảy ra.

00:08:23.000 --> 00:08:29.000
Tôi mong muốn được xem tất cả các clip và trải nghiệm người dùng mới mà bạn sẽ tạo ra.

00:08:29.000 --> 00:08:31.000
Cảm ơn bạn rất nhiều vì đã xem phiên của chúng tôi.

00:08:31.000 --> 00:08:34.000
Tôi hy vọng bạn có một WWDC tuyệt vời.

00:08:34.000 --> 23:59:59.000
[Nhạc gõ].

