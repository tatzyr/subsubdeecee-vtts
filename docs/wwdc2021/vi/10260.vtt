WEBVTT

00:00:02.000 --> 00:00:11.000
Xin chào, tôi là Michael Ochs.

00:00:11.000 --> 00:00:13.000
Tôi là một kỹ sư khung trong nhóm UIKit.

00:00:13.000 --> 00:00:17.000
Chào mừng đến với Focus on iPad điều hướng bàn phím.

00:00:17.000 --> 00:00:20.000
Mọi người thích sử dụng bàn phím phần cứng với iPad của họ.

00:00:20.000 --> 00:00:28.000
Mac Catalyst và iPadOS 15 giới thiệu API mạnh mẽ để hỗ trợ điều hướng bàn phím trong ứng dụng của bạn.

00:00:28.000 --> 00:00:33.000
Điều hướng bất kỳ ứng dụng nào bằng bàn phím trên iPadOS sẽ cảm thấy rất quen thuộc.

00:00:33.000 --> 00:00:36.000
Phím tab điều hướng giữa các khu vực quan trọng trong một ứng dụng.

00:00:36.000 --> 00:00:45.000
Các phím mũi tên điều hướng trong một khu vực và một mục có thể được chọn bằng phím trả về trên iPadOS hoặc phím cách trên Mac Catalyst.

00:00:45.000 --> 00:00:50.000
Nếu ứng dụng của bạn đã sử dụng các lệnh chính này, các lệnh tùy chỉnh của bạn sẽ không còn hoạt động nữa.

00:00:50.000 --> 00:00:55.000
Tôi sẽ chỉ cho bạn cách giải quyết những xung đột này sau.

00:00:55.000 --> 00:00:58.000
Đầu tiên, hãy để tôi chỉ cho bạn điều hướng bàn phím đang hoạt động.

00:00:58.000 --> 00:01:06.000
Trong Ảnh, tôi có thể nhấn phím tab để di chuyển tiêu điểm từ ô Thư viện trong thanh bên sang lưới ảnh ở bên phải.

00:01:06.000 --> 00:01:13.000
Bây giờ tôi có thể điều hướng giữa các bức ảnh trong lưới bằng cách sử dụng các phím mũi tên.

00:01:13.000 --> 00:01:21.000
Khi tôi tìm thấy bức ảnh tôi đang tìm kiếm, tôi có thể chọn nó bằng cách nhấn return.

00:01:21.000 --> 00:01:30.000
Khi bạn biên dịch với iOS 15 SDK, hành vi này sẽ được bật tự động cho các trường văn bản, chế độ xem văn bản và thanh bên.

00:01:30.000 --> 00:01:35.000
Bạn cũng nên chọn bộ sưu tập, bảng và chế độ xem tùy chỉnh khác để có trải nghiệm tuyệt vời.

00:01:35.000 --> 00:01:39.000
Tôi sẽ chỉ cho bạn cách làm điều này trong một phút.

00:01:39.000 --> 00:01:44.000
Tôi biết đây là một tính năng thú vị, nhưng đừng làm cho mọi yếu tố trong bàn phím ứng dụng của bạn có thể điều hướng được.

00:01:44.000 --> 00:01:53.000
Điều hướng bàn phím nhằm cung cấp cho người dùng quyền truy cập vào các tính năng chính của ứng dụng của bạn, vì vậy hãy tập trung vào đầu vào văn bản, danh sách và chế độ xem bộ sưu tập.

00:01:53.000 --> 00:01:58.000
Để các điều khiển như nút, điều khiển được phân đoạn và chuyển sang một bên.

00:01:58.000 --> 00:02:02.000
Quyền truy cập Bàn phím đầy đủ đã cho phép các điều khiển này có thể điều hướng bàn phím.

00:02:02.000 --> 00:02:08.000
Để tìm hiểu thêm về quyền truy cập bàn phím đầy đủ, hãy xem "Hỗ trợ quyền truy cập bàn phím đầy đủ trong ứng dụng iOS của bạn."

00:02:08.000 --> 00:02:17.000
Điều hướng bàn phím trên iPadOS sử dụng cùng một hệ thống lấy nét như tvOS Nếu bạn đã viết các ứng dụng tvOS trước đây, nhiều API sẽ cảm thấy quen thuộc.

00:02:17.000 --> 00:02:23.000
Tuy nhiên, có một số API mới và sự khác biệt về hành vi mà bạn nên biết.

00:02:23.000 --> 00:02:30.000
Nếu bạn muốn tìm hiểu thêm về hệ thống lấy nét nói chung, hãy xem "Tương tác tập trung trong tvOS".

00:02:30.000 --> 00:02:39.000
Trong video này, tôi sẽ chỉ cho bạn cách làm cho nhiều nội dung hơn trong ứng dụng của bạn có thể tập trung và cách tùy chỉnh giao diện của các mục có thể tập trung này.

00:02:39.000 --> 00:02:49.000
Tôi sẽ chỉ cho bạn một số hành vi đặc biệt trong thanh bên mà bạn nên biết và chúng ta sẽ nói về các nhóm tập trung, một cách mới để xác định cấu trúc trong ứng dụng của bạn.

00:02:49.000 --> 00:02:55.000
Cuối cùng, tôi sẽ chỉ cho bạn một số thay đổi quan trọng trong chuỗi phản hồi mà bạn nên làm quen.

00:02:55.000 --> 00:03:01.000
Nhưng bây giờ, chúng ta hãy xem cách làm cho nhiều yếu tố hơn trong giao diện người dùng của bạn có thể tập trung.

00:03:01.000 --> 00:03:04.000
canBecomeFocused là nguồn duy nhất của sự thật.

00:03:04.000 --> 00:03:08.000
Nó là một thuộc tính chỉ đọc của UIFocusItem.

00:03:08.000 --> 00:03:12.000
Ghi đè nó và trả về true để làm cho một mục có thể tập trung được.

00:03:12.000 --> 00:03:16.000
Bây giờ, bạn có thể tự hỏi, mục trọng tâm là gì?

00:03:16.000 --> 00:03:24.000
Xương sống của hệ thống tập trung là hai giao thức: UIFocusItem và UIFocusEnvironment.

00:03:24.000 --> 00:03:28.000
FocusItems chỉ đơn giản là, các mục có thể được tập trung.

00:03:28.000 --> 00:03:33.000
FocusEnvironments xác định hệ thống phân cấp của các mục có thể tập trung.

00:03:33.000 --> 00:03:42.000
UIView phù hợp với cả hai giao thức này, vì bất kỳ chế độ xem nào cũng có thể tự tập trung, nhưng nó cũng có thể chứa các chế độ xem con có thể được tập trung.

00:03:42.000 --> 00:03:50.000
UIViewController, mặt khác, chỉ phù hợp với UIFocusEnvironment, vì bản thân nó không cung cấp bất kỳ hình ảnh nào.

00:03:50.000 --> 00:03:54.000
Bạn cũng có thể triển khai cả hai giao thức trên các đối tượng của riêng bạn.

00:03:54.000 --> 00:04:00.000
Điều này cho phép bạn tập trung vào nội dung được hiển thị bằng các công nghệ khác, như Metal.

00:04:00.000 --> 00:04:06.000
Các ứng cử viên có khả năng nhất cho điều hướng bàn phím là các ô trong chế độ xem bảng hoặc bộ sưu tập.

00:04:06.000 --> 00:04:10.000
UIKit cung cấp một số API tiện lợi, vì vậy bạn không cần phải phân lớp.

00:04:10.000 --> 00:04:17.000
Đặt cho phép Focus thành true trên bảng hoặc chế độ xem bộ sưu tập để làm cho tất cả các ô của nó có thể tập trung được.

00:04:17.000 --> 00:04:22.000
Lưu ý rằng trong các thanh bên, allowsFocus đúng theo mặc định.

00:04:22.000 --> 00:04:31.000
Để kiểm soát chi tiết hơn, bạn có thể sử dụng canFocusItemAt indexPath trong đại diện của mình để kiểm soát khả năng lấy nét cho từng ô riêng lẻ.

00:04:31.000 --> 00:04:38.000
Cả hai phương pháp này sẽ chỉ có tác dụng đối với các ô không ghi đè canBecomeFocused.

00:04:38.000 --> 00:04:43.000
Nếu một mục tiêu điểm không hoạt động như bạn mong đợi, có một số công cụ gỡ lỗi có sẵn.

00:04:43.000 --> 00:04:50.000
Trong lldb bạn có thể gọi UIFocusDebugger. Kiểm tra tính tập trung (cho mục:) và chuyển mục bạn muốn gỡ lỗi.

00:04:50.000 --> 00:04:53.000
Ví dụ, một chế độ xem mà bạn đang cố gắng làm cho có thể tập trung.

00:04:53.000 --> 00:05:03.000
Nó sẽ cung cấp cho bạn một lời giải thích về lý do tại sao hệ thống lấy nét không coi mục này là có thể tập trung.

00:05:03.000 --> 00:05:06.000
Vì vậy, chúng tôi đã nói về cách làm cho giao diện người dùng của bạn có thể tập trung.

00:05:06.000 --> 00:05:10.000
Chúng ta hãy xem xét kỹ hơn sự xuất hiện của các mặt hàng tập trung.

00:05:10.000 --> 00:05:14.000
Có hai phong cách bạn sẽ thường thấy trong toàn hệ thống.

00:05:14.000 --> 00:05:18.000
Đầu tiên, có Hiệu ứng Halo, tương tự như vòng lấy nét trên macOS.

00:05:18.000 --> 00:05:22.000
Trên thực tế, đây là hiệu ứng mặc định trên Mac Catalyst.

00:05:22.000 --> 00:05:29.000
Trên iPadOS, bạn có thể sử dụng hiệu ứng này bằng cách gán UIFocusHaloEffect cho thuộc tính focusEffect.

00:05:29.000 --> 00:05:34.000
Nếu được khởi tạo mà không có đối số, hệ thống sẽ suy ra hình dạng của vầng hào quang.

00:05:34.000 --> 00:05:38.000
Bạn cũng có thể tùy chỉnh hình dạng để phù hợp hơn với nội dung.

00:05:38.000 --> 00:05:48.000
Ví dụ, nếu một hình ảnh có các góc tròn, vầng hào quang phải phù hợp với diện mạo của nó bằng cách cũng có các góc tròn.

00:05:48.000 --> 00:05:56.000
UIFocusHaloEffect có một số trình khởi tạo cho các hình dạng khác nhau, bao gồm một cho rects tròn.

00:05:56.000 --> 00:06:02.000
Sử dụng các trình khởi tạo này để đảm bảo hình dạng của vầng hào quang tạo ra một đường viền xung quanh nội dung chế độ xem của bạn.

00:06:02.000 --> 00:06:07.000
Hiệu ứng Halo cũng cho phép bạn kiểm soát vị trí của nó trong hệ thống phân cấp chế độ xem.

00:06:07.000 --> 00:06:15.000
Ở đây vầng hào quang đang hiển thị phía trên huy hiệu trên hình ảnh, nhưng nó sẽ trông đẹp hơn nếu vầng hào quang nằm giữa hình ảnh và huy hiệu.

00:06:15.000 --> 00:06:25.000
Bằng cách chỉ định chế độ xem hình ảnh làm chế độ xem tham chiếu, UIKit sẽ hiển thị vầng hào quang trên đầu hình ảnh và bên dưới huy hiệu.

00:06:25.000 --> 00:06:31.000
Chế độ xem tham chiếu xác định thứ tự tương đối của vầng hào quang trong hệ thống phân cấp chế độ xem.

00:06:31.000 --> 00:06:36.000
Bạn cũng có thể chỉ định chế độ xem vùng chứa, xác định chế độ xem trên của hiệu ứng hào quang.

00:06:36.000 --> 00:06:45.000
Điều này rất hữu ích nếu siêu quan trực tiếp của mục tập trung đang cắt nội dung của nó.

00:06:45.000 --> 00:06:53.000
Cả hai đều là tùy chọn và bạn chỉ nên cung cấp chúng nếu ngoại hình suy ra không như bạn mong đợi.

00:06:53.000 --> 00:07:00.000
Các ô trong chế độ xem bộ sưu tập và bảng chỉ hiển thị một vầng hào quang xung quanh chúng khi chúng có nội dung hoàn toàn mờ đục, giống như một hình ảnh.

00:07:00.000 --> 00:07:05.000
Trong tất cả các trường hợp khác, khi một ô trở nên tập trung, nó sẽ trông nổi bật.

00:07:05.000 --> 00:07:14.000
Điều này có nghĩa là nền sẽ chuyển thành màu sắc của ứng dụng của bạn và màu nền trước cho văn bản và biểu tượng nên được điều chỉnh để có độ tương phản tốt.

00:07:14.000 --> 00:07:18.000
Giao diện nổi bật này không có sẵn dưới dạng UIFocusEffect.

00:07:18.000 --> 00:07:26.000
Thay vào đó, bạn sẽ tự động nhận được giao diện này khi sử dụng cấu hình nền và nội dung được giới thiệu trong iOS 14.

00:07:26.000 --> 00:07:30.000
Để tìm hiểu thêm về những điều này, hãy xem "Cấu hình ô hiện đại".

00:07:30.000 --> 00:07:37.000
Nếu bạn không sử dụng cấu hình nền và nội dung, ứng dụng mẫu sẽ chỉ cho bạn cách lấy màu chính xác trong mọi trường hợp.

00:07:37.000 --> 00:07:40.000
Hãy chắc chắn kiểm tra điều đó.

00:07:40.000 --> 00:07:45.000
Bây giờ, nếu bạn muốn áp dụng giao diện tùy chỉnh, trước tiên hãy đặt thuộc tính focusEffect thành nil.

00:07:45.000 --> 00:07:48.000
Điều này tắt mọi kiểu dáng hệ thống.

00:07:48.000 --> 00:07:56.000
Ghi đè tiếp theo didUpdateFocus (trong: ngữ cảnh với Điều phối viên hoạt hình :) trên mục trọng tâm của bạn.

00:07:56.000 --> 00:08:01.000
Nếu mục tập trung tiếp theo là tự, hãy áp dụng kiểu dáng để biểu thị tiêu điểm.

00:08:01.000 --> 00:08:07.000
Nếu mục tập trung trước đó là bản thân, hãy khôi phục lại giao diện không tập trung.

00:08:07.000 --> 00:08:16.000
Bạn chỉ nên thực hiện các thay đổi trong didUpdateFocus (trong: ngữ cảnh) khi mục tiếp theo hoặc trước đó tập trung có liên quan đến môi trường này.

00:08:16.000 --> 00:08:26.000
Điều này là do tất cả các môi trường tổ tiên của mục tập trung trước đó, cũng như mục tập trung tiếp theo, nhận được cuộc gọi đến didUpdateFocus (trong: ngữ cảnh).

00:08:26.000 --> 00:08:30.000
Vì vậy, mọi chế độ xem và bộ điều khiển chế độ xem sẽ nhận được cuộc gọi này.

00:08:30.000 --> 00:08:37.000
Điều này cho phép triển khai rất linh hoạt, nơi cha mẹ có thể phản ứng với những thay đổi trọng tâm của trẻ.

00:08:37.000 --> 00:08:44.000
Bây giờ chúng ta hãy xem xét kỹ hơn một tính năng cụ thể cho thanh bên và giao diện người dùng thay đổi ngữ cảnh tương tự.

00:08:44.000 --> 00:08:47.000
Lựa chọn và tập trung là hai khái niệm khác nhau.

00:08:47.000 --> 00:08:56.000
Tuy nhiên, trong một thanh bên, khi tôi di chuyển tiêu điểm, lựa chọn sẽ theo sau.

00:08:56.000 --> 00:09:05.000
Tương tự như vậy, nếu tôi chọn một ô mới bằng cách nhấn vào nó, tiêu điểm cũng sẽ chuyển đến ô mới được chọn này.

00:09:05.000 --> 00:09:09.000
Điều này được gọi là "lựa chọn theo trọng tâm."

00:09:09.000 --> 00:09:15.000
Đặt thuộc tính này trên bất kỳ chế độ xem bảng hoặc bộ sưu tập nào theo hành vi bạn muốn cho hầu hết các ô.

00:09:15.000 --> 00:09:24.000
Nếu bạn muốn thay đổi hành vi cho các ô riêng lẻ, hãy triển khai selectionFollowsFocus ForItemAtIndexPath trong đại diện của bạn.

00:09:24.000 --> 00:09:37.000
Tắt selectionFollowsFocus rất hữu ích khi chọn một ô gây ra hành động gây rối, chẳng hạn như đẩy bộ điều khiển chế độ xem mới trong cùng một cột hoặc trình bày cảnh báo.

00:09:37.000 --> 00:09:44.000
Ví dụ, trong Ảnh, chọn "album mới" sẽ hiển thị cảnh báo yêu cầu tên của album.

00:09:44.000 --> 00:09:48.000
Khi sử dụng đại diện, giá trị của tài sản vẫn quan trọng.

00:09:48.000 --> 00:09:58.000
Đặt selectionFollowsFocus cho mục đích tổng thể của chế độ xem bộ sưu tập và sau đó sử dụng đại diện để thể hiện hành vi đặc biệt cho các ô riêng lẻ.

00:09:58.000 --> 00:10:04.000
Hệ thống sẽ tính đến cả hai giá trị khi chọn hành vi phù hợp.

00:10:04.000 --> 00:10:11.000
Bây giờ, chúng ta hãy xem xét các nhóm tập trung, một tính năng mới để điều hướng bàn phím để thể hiện cấu trúc trong ứng dụng của bạn.

00:10:11.000 --> 00:10:22.000
UIKit tự động suy ra các nhóm tập trung từ hệ thống phân cấp, nhưng bạn cũng có thể khai báo chúng một cách rõ ràng để tùy chỉnh cách phím tab di chuyển tiêu điểm thông qua ứng dụng của bạn.

00:10:22.000 --> 00:10:25.000
tvOS chỉ sử dụng tiêu điểm định hướng.

00:10:25.000 --> 00:10:33.000
Bạn có thể tiếp cận mọi yếu tố đơn giản bằng cách vuốt trên Siri Remote hoặc sử dụng các phím mũi tên trên bàn phím.

00:10:33.000 --> 00:10:42.000
Mặt khác, iPadOS và Mac Catalyst có hai phương pháp điều hướng khác nhau bằng bàn phím: Các phím mũi tên và phím tab.

00:10:42.000 --> 00:10:49.000
Không giống như tvOS, các phím mũi tên chỉ di chuyển tiêu điểm trong một khu vực xác định của ứng dụng của bạn.

00:10:49.000 --> 00:10:52.000
Những khu vực này được gọi là nhóm tập trung.

00:10:52.000 --> 00:11:03.000
Ví dụ, tôi có thể điều hướng danh sách lời nhắc bằng cách sử dụng các phím mũi tên lên và xuống.

00:11:03.000 --> 00:11:11.000
Để điều hướng danh sách, tôi có thể nhấn phím tab để tập trung vào trường tìm kiếm và sau đó nhấn lại tab để di chuyển đến danh sách.

00:11:11.000 --> 00:11:18.000
Nếu tôi nhấn tab một lần nữa, các vòng lặp tập trung trở lại lời nhắc.

00:11:18.000 --> 00:11:28.000
Các lời nhắc, trường tìm kiếm và danh sách đều là một nhóm tập trung và phím tab di chuyển tiêu điểm giữa chúng.

00:11:28.000 --> 00:11:33.000
Khi tiêu điểm chuyển sang một nhóm, nó sẽ chọn một mục bên trong nhóm đó để tập trung vào.

00:11:33.000 --> 00:11:39.000
Mục đó được gọi là mục chính của nhóm.

00:11:39.000 --> 00:11:42.000
Mục chính của một nhóm có thể thay đổi.

00:11:42.000 --> 00:11:46.000
Ví dụ, ở đây tôi tập trung vào lời nhắc thứ hai.

00:11:46.000 --> 00:11:59.000
Hệ thống tập trung ghi nhớ điều này khi tôi rời khỏi nhóm này và khi tôi quay lại phần nhắc nhở, tiêu điểm sẽ chuyển sang mục thứ hai một lần nữa vì mục này hiện là mục chính của nhóm.

00:11:59.000 --> 00:12:04.000
Phím tab kết nối các mục chính của mỗi nhóm và di chuyển tiêu điểm giữa chúng.

00:12:04.000 --> 00:12:08.000
Đây được gọi là vòng lặp tab.

00:12:08.000 --> 00:12:12.000
Một số môi trường xác định các nhóm tập trung của riêng chúng theo mặc định.

00:12:12.000 --> 00:12:19.000
Chúng bao gồm các chế độ xem cuộn như chế độ xem bộ sưu tập và bảng, cũng như các lớp nhập văn bản, như trường văn bản và chế độ xem văn bản.

00:12:19.000 --> 00:12:27.000
Nếu một môi trường không xác định nhóm riêng của nó, nó sẽ kế thừa nhóm của môi trường mẹ, thường là bộ điều khiển siêu xem hoặc chế độ xem của nó.

00:12:27.000 --> 00:12:33.000
Ví dụ, theo mặc định, mọi ô tự động thuộc về nhóm chế độ xem bộ sưu tập của nó.

00:12:33.000 --> 00:12:38.000
Bằng cách ở trong cùng một nhóm, bạn có thể điều hướng giữa các ô bằng các phím mũi tên.

00:12:38.000 --> 00:12:44.000
Để tự xác định một nhóm tập trung, hãy chỉ định một mã định danh nhóm tập trung cho bất kỳ chế độ xem hoặc bộ điều khiển chế độ xem nào.

00:12:44.000 --> 00:12:52.000
Khi hai môi trường chia sẻ cùng một mã định danh, rõ ràng hoặc theo kế thừa, chúng là một phần của cùng một nhóm.

00:12:52.000 --> 00:12:58.000
Để tùy chỉnh mục chính của một nhóm, hãy chỉ định mức độ ưu tiên của nhóm tập trung cho mục đó.

00:12:58.000 --> 00:13:02.000
Điều này xác định tầm quan trọng của một mặt hàng trong nhóm.

00:13:02.000 --> 00:13:08.000
Mục có thể nhìn thấy với mức độ ưu tiên cao nhất là mục chính của nhóm.

00:13:08.000 --> 00:13:28.000
Theo mặc định, hệ thống chỉ định một trong những ưu tiên được xác định trước: Bỏ qua, ưu tiên mặc định; tập trung trước đó; được ưu tiên, cho biết một mục quan trọng hơn các mục khác, như một ô đã chọn; và hiện đang được tập trung, đó là mức độ ưu tiên cao nhất có thể.

00:13:28.000 --> 00:13:35.000
Điều quan trọng là phải hiểu rằng bạn không bao giờ có thể hạ thấp mức độ ưu tiên của một mặt hàng xuống dưới mức độ ưu tiên do hệ thống cung cấp của nó.

00:13:35.000 --> 00:13:40.000
Thay vào đó, bạn nên nâng cao mức độ ưu tiên của một mặt hàng khác.

00:13:40.000 --> 00:13:49.000
Ví dụ: nếu bạn chỉ định mức độ ưu tiên cao hơn .trước đây Tập trung vào một ô, ô đó sẽ trở nên quan trọng hơn mục tập trung cuối cùng của nhóm đó.

00:13:49.000 --> 00:14:00.000
Vì vậy, ngay cả khi ô tùy chỉnh này và ô tập trung trước đó đều có thể nhìn thấy được, ô tùy chỉnh sẽ trở thành mục chính vì nó có mức độ ưu tiên cao hơn.

00:14:00.000 --> 00:14:04.000
Vì vậy, bây giờ bạn đã biết cách nhóm các mặt hàng của mình lại với nhau.

00:14:04.000 --> 00:14:07.000
Tiếp theo, hãy tập trung vào cách các nhóm này được sắp xếp.

00:14:07.000 --> 00:14:10.000
Ở đây, chúng ta lại thấy Lời nhắc.

00:14:10.000 --> 00:14:17.000
Như đã đề cập trước đó, mỗi bảng và chế độ xem bộ sưu tập, cũng như mỗi trường văn bản, xác định nhóm riêng của nó.

00:14:17.000 --> 00:14:29.000
Như đã thấy trước đây, khi nhấn phím tab liên tục, tiêu điểm đi từ trường tìm kiếm đến danh sách trong thanh bên, và sau đó đến lời nhắc ở bên phải.

00:14:29.000 --> 00:14:31.000
Đây là những gì UIKit làm theo mặc định.

00:14:31.000 --> 00:14:44.000
Tuy nhiên, nếu bạn tự xây dựng loại chế độ xem vùng chứa này, tiêu điểm sẽ chuyển từ trường tìm kiếm thẳng đến lời nhắc vì tất cả các nhóm được sắp xếp theo thứ tự đọc, dẫn đến cuối, từ trên xuống dưới.

00:14:44.000 --> 00:14:50.000
Hệ thống lấy nét không biết rằng thanh bên là một cột riêng biệt.

00:14:50.000 --> 00:14:56.000
Để đảm bảo trường tìm kiếm và danh sách được sắp xếp trong một khối liên tục, bạn có thể đặt chúng vào một nhóm mẹ chung.

00:14:56.000 --> 00:15:02.000
Điều này được thực hiện bằng cách xác định mã định danh nhóm tiêu điểm trên chế độ xem vùng chứa của thanh bên.

00:15:02.000 --> 00:15:14.000
Mặc dù nhóm mới này không chứa trực tiếp bất kỳ mục có thể tập trung nào, vòng lặp tab sẽ di chuyển từ nhóm trường tìm kiếm sang nhóm danh sách trước khi chuyển sang danh sách nhắc nhở.

00:15:14.000 --> 00:15:20.000
Nhiều bài thuyết trình UIKit tiêu chuẩn đã cung cấp các nhóm trung gian này.

00:15:20.000 --> 00:15:25.000
Đối với các chế độ xem vùng chứa tùy chỉnh, hãy khai báo FocusGroupIdentifier của riêng bạn về tổ tiên chung.

00:15:25.000 --> 00:15:30.000
Các nhóm tập trung là một cách dễ dàng để xác định cấu trúc trực quan của ứng dụng của bạn.

00:15:30.000 --> 00:15:33.000
Bạn không cần phải xác định một thứ tự cố định cho vòng lặp tab của mình.

00:15:33.000 --> 00:15:44.000
Thay vào đó, hệ thống sử dụng các nhóm tập trung để lấy thứ tự vòng lặp tab có tính đến hướng đọc, bố cục và khả năng hiển thị để cung cấp trải nghiệm nhất quán.

00:15:44.000 --> 00:15:48.000
Khi tùy chỉnh các nhóm tập trung trong ứng dụng của bạn, UIFocusDebugger là bạn của bạn.

00:15:48.000 --> 00:15:56.000
Nếu bạn gọi checkFocusGroupTree (cho môi trường:), nó sẽ in cấu trúc nhóm tiêu điểm, bắt đầu từ môi trường được truyền vào.

00:15:56.000 --> 00:16:02.000
Bạn thậm chí có thể vượt qua chính hệ thống tập trung để xem tất cả các nhóm hiện tại.

00:16:02.000 --> 00:16:07.000
Bây giờ, cấu trúc văn bản này rất hữu ích, nhưng có một công cụ gỡ lỗi nữa.

00:16:07.000 --> 00:16:10.000
Nhớ ảnh chụp màn hình tôi đã cho bạn xem với các nhóm tập trung và Lời nhắc không?

00:16:10.000 --> 00:16:13.000
Bạn thực sự có thể tải trực tiếp điều này trong ứng dụng của mình.

00:16:13.000 --> 00:16:21.000
Khi được bật, trình gỡ lỗi vòng lặp tiêu điểm sẽ trực quan hóa thứ tự vòng lặp tab trong ứng dụng của bạn khi bạn nhấn và giữ phím tùy chọn.

00:16:21.000 --> 00:16:26.000
Và khi nhấn tùy chọn và điều khiển, bạn sẽ có được hình ảnh trực quan về các nhóm tập trung.

00:16:26.000 --> 00:16:32.000
Trong chế độ này, mục chính của một nhóm được biểu thị bằng một đường chấm chấm.

00:16:32.000 --> 00:16:37.000
Để kích hoạt nó, hãy chuyển đến cài đặt sơ đồ của bạn trong Xcode, chọn "chạy" và sau đó chọn "lập luận".

00:16:37.000 --> 00:16:45.000
Sau đó thêm đối số khởi chạy -UIFocusLoopDebuggerEnabled CÓ, và đừng quên đặt dấu gạch ngang trước nó.

00:16:45.000 --> 00:16:50.000
Bây giờ, bất cứ khi nào bạn chạy ứng dụng của mình từ Xcode, lớp phủ gỡ lỗi này có sẵn ngay trong ứng dụng của bạn.

00:16:50.000 --> 00:16:54.000
Điều này bao gồm những điều cơ bản về tập trung vào iPadOS và Mac Catalyst.

00:16:54.000 --> 00:17:01.000
Có một chủ đề nữa cần đề cập đến điều hướng bàn phím, và đó là chuỗi phản hồi.

00:17:01.000 --> 00:17:16.000
Vì cả chuỗi phản hồi và hệ thống tiêu điểm đều xử lý đầu vào bàn phím, UIKit đồng bộ hóa các hệ thống này càng nhiều càng tốt để đảm bảo mục tập trung luôn nằm trong trình phản hồi đầu tiên hoặc là chính trình phản hồi đầu tiên.

00:17:16.000 --> 00:17:21.000
Hãy xem xét một hệ thống phân cấp chế độ xem đơn giản với trường văn bản và ô chế độ xem bộ sưu tập.

00:17:21.000 --> 00:17:29.000
Hiện tại, trường văn bản được tập trung, được biểu thị bằng vòng rắn và nó cũng là phản hồi đầu tiên, được biểu thị bằng vòng đứt nét.

00:17:29.000 --> 00:17:37.000
Khi tiêu điểm di chuyển đến ô xem bộ sưu tập này, UIKit cũng cố gắng di chuyển người phản hồi đầu tiên sang ô này.

00:17:37.000 --> 00:17:46.000
Nếu ô này trả về false từ canBecomeFirstResponder, hệ thống sẽ lặp lại chuỗi phản hồi để tìm một responder trả về true.

00:17:46.000 --> 00:17:51.000
Trong trường hợp này, người phản hồi đó là bộ điều khiển chế độ xem của ô.

00:17:51.000 --> 00:17:54.000
Lưu ý rằng nghịch đảo cũng đúng.

00:17:54.000 --> 00:18:01.000
Khi người phản hồi đầu tiên thay đổi, hệ thống lấy nét sẽ cố gắng tìm một mục có thể tập trung mới bên trong người phản hồi đó.

00:18:01.000 --> 00:18:11.000
Với mối quan hệ này giữa người phản hồi đầu tiên và mục tập trung, các sự kiện chính sẽ luôn được chuyển đến mục tập trung và di chuyển lên chuỗi người phản hồi từ đó.

00:18:11.000 --> 00:18:14.000
Điều này cho phép một số hành vi mới thú vị.

00:18:14.000 --> 00:18:22.000
Ví dụ, nếu một ô phản hồi lệnh chính và trở nên tập trung, lệnh khóa sẽ được chuyển đến ô đó.

00:18:22.000 --> 00:18:26.000
Để biết cách sử dụng cái này, hãy xem ứng dụng mẫu của chúng tôi.

00:18:26.000 --> 00:18:32.000
Khi cập nhật ứng dụng của bạn cho iPadOS 15, hãy lưu ý về nơi bạn gọi becomeFirstResponder.

00:18:32.000 --> 00:18:38.000
Vì chuỗi phản hồi và tiêu điểm được đồng bộ hóa, việc thay đổi phản hồi đầu tiên sẽ buộc tiêu điểm phải cập nhật.

00:18:38.000 --> 00:18:41.000
Điều này có thể gây rối cho người dùng của bạn.

00:18:41.000 --> 00:18:47.000
Thông thường tốt nhất là tránh gọi becomeFirstResponder, đặc biệt là để đáp ứng với bản cập nhật tập trung.

00:18:47.000 --> 00:18:51.000
Hệ thống tập trung cung cấp trải nghiệm nhất quán trên tất cả các ứng dụng.

00:18:51.000 --> 00:18:55.000
Để làm điều này, nó cần ưu tiên cho một số lệnh chính nhất định.

00:18:55.000 --> 00:19:03.000
Nếu ứng dụng của bạn đang sử dụng lệnh phím như tab hoặc mũi tên xuống, lệnh phím đó sẽ không còn hoạt động khi biên dịch với iOS 15 SDK.

00:19:03.000 --> 00:19:08.000
Nếu lệnh phím này được sử dụng để xây dựng điều hướng bàn phím tùy chỉnh của riêng bạn, bạn có thể để nó không bị ảnh hưởng.

00:19:08.000 --> 00:19:13.000
Nó sẽ hoạt động trên các phiên bản trước và trên iPadOS 15, hệ thống lấy nét sẽ tiếp quản.

00:19:13.000 --> 00:19:16.000
Nếu không, hãy ánh xạ lại lệnh chính này.

00:19:16.000 --> 00:19:26.000
Nếu bạn thực sự muốn tiếp tục sử dụng lệnh phím này, hãy đảm bảo rằng nó không làm hỏng điều hướng bàn phím và sau đó đặt wantsPriorityOverSystemBehavior thành true.

00:19:26.000 --> 00:19:33.000
Nếu bạn muốn tìm hiểu thêm về những cải tiến đối với phím tắt, hãy xem "Đưa các ứng dụng iPad của bạn lên một tầm cao mới."

00:19:33.000 --> 00:19:47.000
Nếu bạn xử lý máy ép theo cách thủ công bằng cách triển khai pressesBegan, pressesChanged, pressesEnded và pressesCancelled, hãy đảm bảo triển khai tất cả các phương pháp này và gọi siêu nhất quán cho các máy ép mà bạn không xử lý.

00:19:47.000 --> 00:19:53.000
Điều hướng bàn phím trong iPadOS 15 và Mac Catalyst là một công cụ mạnh mẽ cho người dùng của bạn.

00:19:53.000 --> 00:19:58.000
Làm cho chế độ xem bộ sưu tập và bảng có thể tập trung để cung cấp trải nghiệm người dùng tuyệt vời.

00:19:58.000 --> 00:20:02.000
Cập nhật các lệnh phím của bạn để chúng không va chạm với điều hướng bàn phím.

00:20:02.000 --> 00:20:11.000
Ngoài ra, hãy xem ứng dụng mẫu, minh họa thêm một vài tính năng, chẳng hạn như xây dựng trải nghiệm tìm kiếm tuyệt vời, lựa chọn tùy chỉnh, hướng dẫn tập trung và hơn thế nữa.

00:20:11.000 --> 00:20:16.000
Tôi nóng lòng muốn xem bạn đang xây dựng gì với điều hướng bàn phím trên iPadOS 15.

00:20:16.000 --> 00:20:17.000
Cảm ơn bạn đã xem.

00:20:17.000 --> 23:59:59.000
[Nhạc gõ].

