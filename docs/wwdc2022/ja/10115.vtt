WEBVTT

00:00:00.000 -> 00:00:03.000
♪まろやかなインストゥルメンタルヒップホップ音楽♪

00:00:03.000 -> 00:00:10.000
♪

00:00:10.000 -> 00:00:15.000
こんにちは、私はアレックス・ヤングで、iCloud開発者エクスペリエンスチームのエンジニアです。

00:00:15.000 -> 00:00:23.000
CloudKitは、ユーザーがデバイス間でデータを簡単に同期できるようにすることで、素晴らしい体験を生み出す簡単な方法です。

00:00:23.000 -> 00:00:30.000
CloudKitコンソールは、アプリのスキーマとデータを操作できるツールを提供することで、これをさらに簡単にするのに役立ちます。

00:00:30.000 -> 00:00:38.000
アプリケーションのスキーマとデータの理解とデバッグに役立つCloudKitコンソールのいくつかのアップデートを共有します。

00:00:38.000 -> 00:00:51.000
まず、隠しコンテナの使い方を順を追ってから、iCloudアカウントを使用してレコードを表示する新しい方法に飛び込み、最後に、共有ゾーンを操作するための素晴らしいアップデートがいくつかあります。

00:00:51.000 -> 00:00:56.000
開発中に多くのコンテナを作成し、後でいくつかだけに焦点を当てるのが一般的です。

00:00:56.000 -> 00:01:00.000
新しい隠しコンテナ機能を使用すると、これをよりよく整理できます。

00:01:00.000 -> 00:01:05.000
CloudKitコンソールでは、非表示または表示するコンテナを選択できます。

00:01:05.000 -> 00:01:13.000
隠しコンテナは、コンソール内のリストから隠されるだけでなく、Xcodeを含むすべての開発者ツールでも隠されています。

00:01:13.000 -> 00:01:24.000
さらに良いことに、コンテナが隠されている場合、それはチームレベルで適用されます。つまり、すべてのテストコンテナとプロトタイプコンテナがチームメイトのビューを混乱させなくなります。

00:01:24.000 -> 00:01:28.000
コンソールを開いて、この新しい機能を使用します。

00:01:28.000 -> 00:01:34.000
コンソールにサインインしたら、トップレベルのナビゲーションからコンテナセレクターを開きます。

00:01:34.000 -> 00:01:36.000
次に、[コンテナの管理]をクリックします。

00:01:36.000 -> 00:01:43.000
これにより、現在のチーム内のすべてのコンテナの可視性を切り替えることができる新しいメニューが表示されます。

00:01:43.000 -> 00:01:49.000
複数のチームを持つ人のために、右上のアカウントメニューを使用してそれらを切り替えることができます。

00:01:49.000 -> 00:01:54.000
その後、他のチームでもコンテナを隠すことができます。

00:01:54.000 -> 00:01:59.000
これはWWDC21のコンテナで、もう必要ありません。

00:01:59.000 -> 00:02:01.000
私はこのようにそれを隠すことができます。

00:02:01.000 -> 00:02:08.000
また、Xcodeでコンテナリストを更新すると、コンテナもそこに隠されていることがわかります。

00:02:08.000 -> 00:02:16.000
開発者アカウントではなくiCloudアカウントとしてデータを表示できるコンソールへの新しい追加について説明します。

00:02:16.000 -> 00:02:19.000
これはAct As iCloudと呼ばれています。

00:02:19.000 -> 00:02:27.000
場合によっては、特定のユーザーがプライベートデータベースのデータに問題が発生している理由を理解するのが難しい場合があります。

00:02:27.000 -> 00:02:34.000
これで、別のiCloudアカウントとしてサインインして、個人データを表示できるようになりました。

00:02:34.000 -> 00:02:42.000
iCloudアカウントでログインすると、CloudKit Consoleのクエリツールは、そのアカウントの観点から期待どおりに機能します。

00:02:42.000 -> 00:02:47.000
これは、ユーザーに代わって開発と生産の問題をデバッグするのに役立ちます。

00:02:47.000 -> 00:02:52.000
コンソールでこれを実演して、それがどのように機能するかを説明します。

00:02:52.000 -> 00:02:55.000
このクエリは、私の開発者アカウントを使用して実行されました。

00:02:55.000 -> 00:03:01.000
クエリの結果がどのように変化するかを示すために、iCloudアカウントに切り替えます。

00:03:01.000 -> 00:03:05.000
まず、Act As iCloudアカウントメニュー項目に移動します。

00:03:05.000 -> 00:03:09.000
これにより、iCloudアカウントとしてサインインできるダイアログが開きます。

00:03:09.000 -> 00:03:13.000
サインインすると、コンソールのコンテキストが変わります。

00:03:13.000 -> 00:03:15.000
これで、ページの上部にバナーが表示されます。

00:03:15.000 -> 00:03:22.000
その後のすべての操作は、開発者アカウントではなくiCloudアカウントを使用して実行されます。

00:03:22.000 -> 00:03:28.000
レコードとビューゾーンを照会することはできますが、スキーマ操作を実行することはできません。

00:03:28.000 -> 00:03:34.000
ご覧のとおり、このクエリの結果は、私の開発者アカウントではなく、私のiCloudアカウントのものです。

00:03:34.000 -> 00:03:39.000
別のコンテナまたは環境に切り替えると、iCloudアカウントとして機能しなくなります。

00:03:39.000 -> 00:03:45.000
バナーのボタンをクリックして、Act Asセッションを停止することもできます。

00:03:45.000 -> 00:03:53.000
iCloudアカウントとして機能することは、スキーマではなくレコードに適用されるため、この機能はコンソールのデータ部分でのみ機能することを忘れないでください。

00:03:53.000 -> 00:03:57.000
スキーマにアクセスしようとすると、Act Asセッションが停止します。

00:03:57.000 -> 00:04:06.000
この機能は、データが生産でどのように使用されているかをよりよく理解し、データ関連のバグをより効果的に調査するのに役立ちます。

00:04:06.000 -> 00:04:10.000
暗号化されたフィールドは、別のアカウントとして機能するときには読み取り不能のままです。

00:04:10.000 -> 00:04:14.000
データを所有する元のユーザーのみが復号化できます。

00:04:14.000 -> 00:04:23.000
これは設計上、iCloudが高レベルのセキュリティとプライバシーを維持し、機密データを安全に保つのに役立ちます。

00:04:23.000 -> 00:04:27.000
次に、コンソールでゾーンを共有する方法を紹介します。

00:04:27.000 -> 00:04:33.000
CloudKit共有は、アプリのユーザー間でレコードを安全に共有する安全な方法です。

00:04:33.000 -> 00:04:40.000
これは、アプリが参加者の読み取りおよび書き込みアクセスを決定できるようにする権限を使用して、安全に行われる共有です。

00:04:40.000 -> 00:04:47.000
参加者のアクセスは、株式をパブリックまたはプライベートとして定義することで、さらに制御されます。

00:04:47.000 -> 00:04:52.000
ゾーン共有は、ゾーン内のすべてのレコードにルールを適用することで機能します。

00:04:52.000 -> 00:04:59.000
共有ゾーンには、ゾーン内の各レコードにアクセスするためのオプションを含むCloudKit共有レコードがあります。

00:04:59.000 -> 00:05:03.000
共有ゾーンは、既存の共有レコードを持つことはできません。

00:05:03.000 -> 00:05:10.000
標準のパブリックゾーンとプライベートゾーンの共有オプションは、共有ゾーンでサポートされています。

00:05:10.000 -> 00:05:15.000
パブリック共有ゾーンは、共有コードを持っているすべての人にすべてのレコードを見えるようにします。

00:05:15.000 -> 00:05:19.000
短い共有コードを持っている人なら誰でもこの共有に参加できます。

00:05:19.000 -> 00:05:25.000
これは、厳格なアクセス制御なしでユーザー間で簡単に共有できるレコードに最適です。

00:05:25.000 -> 00:05:33.000
共有に参加するには、メンバーが参加者リストに載っている必要があるため、プライベート共有ゾーンには追加のセキュリティレイヤーがあります。

00:05:33.000 -> 00:05:43.000
CloudKit Consoleには、ゾーン共有を作成して表示するためのいくつかの新しいツールがあり、共有ゾーンをよりよく理解し、開発と生産中にそれらと協力するのに役立ちます。

00:05:43.000 -> 00:05:48.000
それがどのように機能するかを学ぶことができるように、今ゾーン共有を作成しましょう。

00:05:48.000 -> 00:05:52.000
ゾーンに移動し、共有したいゾーンを選択します。

00:05:52.000 -> 00:05:56.000
詳細ビューの[ゾーン全体の共有の設定]ボタンをクリックします。

00:05:56.000 -> 00:06:01.000
これは、パブリックシェアとプライベートシェアのどちらが欲しいかを決定できるフォームを示しています。

00:06:01.000 -> 00:06:07.000
パブリックゾーンには、読み取り専用または読み取り/書き込み共有を作成するための追加の許可オプションがあります。

00:06:07.000 -> 00:06:11.000
プライベートシェアの場合、権限は参加者レベルで定義されます。

00:06:11.000 -> 00:06:16.000
私はこのようにプライベートシェアを作成するつもりです。

00:06:16.000 -> 00:06:23.000
ゾーンが共有されると、共有に参加するために参加者に送信できる短い一意のIDが表示されます。

00:06:23.000 -> 00:06:31.000
共有ゾーンは、[レコード] ページにある [共有レコードを受け入れる] メニュー オプションを使用して、コンソールで参加できます。

00:06:31.000 -> 00:06:35.000
これで、このゾーンで作成されたレコードは自動的に共有されます。

00:06:35.000 -> 00:06:51.000
CloudKitコンソールのこれらのアップデートを見たので、コンテナを隠してコンテナリストを片付け、Act As iCloudを試して、異なるiCloudアカウントのレコードを確認し、複数のレコードを簡単に共有できるようにゾーン共有を試してみてください。

00:06:51.000 -> 00:07:01.000
これらのツールにより、スキーマをよりよく理解し、アプリの問題をデバッグし、CloudKitの作業を少し簡単にできることを願っています。

00:07:01.000 -> 00:07:03.000
ありがとう、そして素晴らしいWWDCをお過ごしください。

00:07:03.000 -> 23:59:59.000
♪

