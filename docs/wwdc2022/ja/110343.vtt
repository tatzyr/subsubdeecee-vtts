WEBVTT

00:00:00.000 -> 00:00:12.000
♪ ♪

00:00:12.000 -> 00:00:16.000
ハリー：こんにちは、私はSwiftUIチームのエンジニア、ハリーです。

00:00:16.000 -> 00:00:21.000
iPadシリーズのSwiftUIの第2部へようこそ。

00:00:21.000 -> 00:00:34.000
このシリーズの最初の部分では、同僚のRajは、リスト、テーブル、選択、分割ビューを使用して、iPadのより大きな画面とさまざまな入力デバイスを使用してアプリを本当に輝かせる方法を深く掘り下げました。

00:00:34.000 -> 00:00:38.000
そのセッションを見ていない場合は、そのセッションから始めることを強くお勧めします。

00:00:38.000 -> 00:00:44.000
RajがPlacesアプリを構築するのを見るのは本当に楽しかったし、自分の機能をいくつか追加したかった。

00:00:44.000 -> 00:00:50.000
だから、このセッションでは、私の心に近くて大切なもの、ツールバーを見ていきます!

00:00:50.000 -> 00:00:59.000
SwiftUIでは、ツールバーAPIは、iOSのナビゲーションバーやボトムバー、macOSのウィンドウツールバーなど、多くのシステムバーを構成します。

00:00:59.000 -> 00:01:03.000
ツールバーは、最も一般的な機能の多くに迅速なアクションを提供します。

00:01:03.000 -> 00:01:10.000
優れたツールバーを作成すると、アプリを使用している人々の生産性が本当に向上します。

00:01:10.000 -> 00:01:17.000
私はツールバーと、PlacesがiOS 16の新しいツールバー機能のいくつかをどのように使用できるかについて多くの時間を費やしてきました。

00:01:17.000 -> 00:01:24.000
まず、iPadで今可能なことを味わうために私が作ったものを簡単にお見せしたいと思います。

00:01:24.000 -> 00:01:29.000
すべての変更の後、ここに更新されたPlacesアプリがあります。

00:01:29.000 -> 00:01:39.000
整列されたナビゲーションタイトル、タイトルメニュー、タイトルメニューヘッダー、中央揃えのツールバーアイテムなど、いくつかの新機能に気付くかもしれません。

00:01:39.000 -> 00:01:48.000
Macを使用したことがある場合は、ツールバーのカスタマイズなどの機能に精通しているかもしれません。これにより、人々はツールバーを独自のものにすることができます。

00:01:48.000 -> 00:01:53.000
これらの強力なMac機能は、iPadでデビューしています。

00:01:53.000 -> 00:01:58.000
このセッションを開始するには、ツールバーAPIの機能強化をいくつか紹介します。

00:01:58.000 -> 00:02:02.000
次に、タイトルとドキュメントの新しいAPIをいくつか説明します。

00:02:02.000 -> 00:02:05.000
では、ツールバーに飛び込みましょう。

00:02:05.000 -> 00:02:17.000
さて、あなた方の多くはすでに自分のiOSアプリでツールバーを設定しており、小さな画面に最適化するために、私が最初に場所を見たときのようにメニューを追加したかもしれません。

00:02:17.000 -> 00:02:21.000
私のメニューはコードでこんな感じでした。

00:02:21.000 -> 00:02:25.000
プライマリアクションの配置を持つツールバーアイテムがあることがわかります。

00:02:25.000 -> 00:02:32.000
内部には、メニューの内容としていくつかのコントロールを備えた、より多くのメニューがあります。

00:02:32.000 -> 00:02:35.000
これがiPadでどのように見えるか見てみましょう。

00:02:35.000 -> 00:02:40.000
あなたが推測したように、それは本当にそこに利用可能なスペースを利用していません。

00:02:40.000 -> 00:02:46.000
しかし、素晴らしいのは、iOS 16では、ツールバーがあなたに代わってこれらの種類のメニューを実装できることです。

00:02:46.000 -> 00:02:55.000
私たちはこれらをオーバーフローメニューと呼び、それらを最大限に活用するために、ツールバーの内容を再構築したいと思います。

00:02:55.000 -> 00:03:00.000
まず、ツールバー項目をツールバー項目グループに変換することから始めます。

00:03:00.000 -> 00:03:06.000
次に、メニューを削除し、そのコンテンツをツールバー項目グループのコンテンツにします。

00:03:06.000 -> 00:03:11.000
このグループは、グループ内の各ビューの個別のツールバー項目を挿入します。

00:03:11.000 -> 00:03:17.000
iPadとMacでは、必要なときにアイテムをオーバーフローメニューに自動的に移動するために必要なのはこれだけです。

00:03:17.000 -> 00:03:24.000
ここでできることはもっとありますが、それにたどり着く前に、ツールバーアイテムの配置について考える必要があります。

00:03:24.000 -> 00:03:27.000
配置は、ツールバー項目がレンダリングされる領域を定義します。

00:03:27.000 -> 00:03:31.000
異なる配置が同じ領域に解決できます。

00:03:31.000 -> 00:03:40.000
ナビゲーションバーには、先頭、中央、後続の3つの異なる領域があると考えることができます。

00:03:40.000 -> 00:03:44.000
先頭と後続の領域には、通常、コントロールが含まれています。

00:03:44.000 -> 00:03:47.000
センターにはアプリのナビゲーションタイトルが含まれています。

00:03:47.000 -> 00:03:51.000
これを場所の文脈で見てみましょう。

00:03:51.000 -> 00:03:58.000
場所では、私の主要なアクションツールバーアイテムグループは、iPadまたはMacの末尾の領域に解決されます。

00:03:58.000 -> 00:04:05.000
プライマリアクションは、特定の画面でユーザーが利用できる最も一般的なアクションを表します。

00:04:05.000 -> 00:04:10.000
iOS 16では、セカンダリアクションと呼ばれる新しい配置があります。

00:04:10.000 -> 00:04:16.000
これらの項目は、最も使用されているコントロールではないコントロールを表しますが、それでも独自のツールバーアイテムを保証します。

00:04:16.000 -> 00:04:24.000
好意や編集などのアクションは、場所では最も重要ではないので、私はそれらを二次的なアクションにします。

00:04:24.000 -> 00:04:29.000
デフォルトでは、セカンダリアクションはツールバーに表示されません。

00:04:29.000 -> 00:04:33.000
代わりに、彼らはオーバーフローメニューに住んでいます。

00:04:33.000 -> 00:04:39.000
新しいtoolbarRole修飾子を使用して、その動作を変更できます。

00:04:39.000 -> 00:04:44.000
この修飾子は、意味的な役割を割り当てることで、ツールバーの動作に影響します。

00:04:44.000 -> 00:04:52.000
ここでは、コンテンツの編集用に最適化する必要があることをナビゲーションバーに伝えるエディターの役割を渡します。

00:04:52.000 -> 00:05:02.000
ナビゲーションバーは、これをツールバーアイテムをレンダリングするためのより多くのスペースを持ちたいという願望と解釈し、ナビゲーションタイトルを中央領域から先頭領域に移動します。

00:05:02.000 -> 00:05:08.000
これにより、オーバーフローメニューに移動する前に、セカンダリアクションを中央に配置できます。

00:05:08.000 -> 00:05:16.000
コンパクトサイズのクラスでは、ナビゲーションバーは変更せず、中央にタイトルをレンダリングし続けます。

00:05:16.000 -> 00:05:23.000
セカンダリアクションとツールバーロールAPIを使用すると、PlacesはiPadのサイズを利用し始めることができます。

00:05:23.000 -> 00:05:31.000
センターを使用すると、ノイズボタン、コンフォートレベルボタン、ゴミ箱ボタンなど、ツールバーにアイテムを追加できます。

00:05:31.000 -> 00:05:37.000
しかし、多くのアイテムを追加し始めると、一部のユーザーにとってツールバーが扱いにくくなる可能性があります。

00:05:37.000 -> 00:05:48.000
MacOSは長い間、各人が自分に最適なツールバーを選択できるカスタマイズ可能なツールバーをサポートしており、iPadOSがユーザーのカスタマイズもサポートしていることを嬉しく思います。

00:05:48.000 -> 00:05:54.000
macOSで動作している既存のツールバーカスタマイズAPIを使用して、この機能を採用できます。

00:05:54.000 -> 00:05:57.000
今、それを見てみましょう。

00:05:57.000 -> 00:06:05.000
ツールバーアイテムのみがカスタマイズ可能なので、まずツールバーアイテムグループを個々のツールバーアイテムに分割します。

00:06:05.000 -> 00:06:08.000
この変更後、機能的な違いはないことに注意してください。

00:06:08.000 -> 00:06:18.000
カスタマイズでは、ツールバー内のすべてのアイテムに一意の識別子を関連付ける必要があるため、各アイテムにIDを追加します。

00:06:18.000 -> 00:06:22.000
これらのIDは、アプリの起動全体でユニークで一貫していることが重要です。

00:06:22.000 -> 00:06:31.000
ユーザーがツールバーをカスタマイズすると、SwiftUIはこれらのIDを永続化し、それらを使用して関連するビューを検索してレンダリングします。

00:06:31.000 -> 00:06:34.000
最後に、ツールバーの修飾子全体にIDを追加します。

00:06:34.000 -> 00:06:39.000
全体として、これはツールバーを選択してカスタマイズをサポートします。

00:06:39.000 -> 00:06:46.000
カスタマイズ可能なツールバーに固有のツールバーアイテムは、ツールバーに最初に存在しない機能があります。

00:06:46.000 -> 00:06:52.000
これらのアイテムは、カスタマイズポップオーバーで生活を開始し、後でツールバーに追加できます。

00:06:52.000 -> 00:06:59.000
これらの項目は最初は存在しないため、これは特定のワークフローにとってより有用なアクションに適しています。

00:06:59.000 -> 00:07:02.000
それらをチェックしましょう。

00:07:02.000 -> 00:07:07.000
新しいアイテムを見やすくするために、現在のツールバーアイテムのいくつかを非表示にしたい。

00:07:07.000 -> 00:07:11.000
それでは、共有リンクを含むツールバー項目を追加してみましょう。

00:07:11.000 -> 00:07:16.000
共有リンクはSwiftUIで新しく、transferableと呼ばれる新しいプロトコルに依存しています。

00:07:16.000 -> 00:07:22.000
TransferableとShareLinkの詳細については、Meet Transferableセッションを必ず確認してください。

00:07:22.000 -> 00:07:32.000
ツールバー項目を配置すると、デフォルトのパラメータでshowsにfalseの値を指定します。これにより、この項目は最初にバーに存在しません。

00:07:32.000 -> 00:07:38.000
今、あなたは私の共有リンクがカスタマイズポップオーバーで最高の生活を送っているのを見ることができます。

00:07:38.000 -> 00:07:42.000
そして、カスタマイズポップオーバーからバーにドラッグすることができます。

00:07:42.000 -> 00:07:45.000
人々はそれを気に入るだろう。

00:07:45.000 -> 00:07:51.000
共有リンクを配置して、ツールバーの項目間の関係について考え始めました。

00:07:51.000 -> 00:08:05.000
共有リンクをバーに移動した後、画像とマップの調整項目が分離されていることに気づきましたが、これらの項目はクイック編集コントロールのグループと考えており、ツールバー自体でその関係をモデル化したいと思います。

00:08:05.000 -> 00:08:11.000
iOS 16とmacOS Venturaは、ControlGroupを使用してこの関係のモデリングをサポートしています。

00:08:11.000 -> 00:08:13.000
やり方を教えてあげるよ。

00:08:13.000 -> 00:08:19.000
画像とマップの調整アクションに2つの個別のツールバー項目があることがわかります。

00:08:19.000 -> 00:08:23.000
それらをグループ化するには、まず同じアイテムに移動します。

00:08:23.000 -> 00:08:27.000
その後、それらをコントロールグループにまとめます。

00:08:27.000 -> 00:08:32.000
ユーザーは、ツールバーからユニットとして追加または削除できるようになりました。

00:08:32.000 -> 00:08:39.000
それはかなりクールですが、ControlGroupで利用可能な新しいAPIを使用して、これをさらに進めることができます。

00:08:39.000 -> 00:08:50.000
コントロールグループにラベルを提供することで、このアイテムグループは、オーバーフローメニューに移動する前に、独自の小さなメニューに折りたたむことができます。

00:08:50.000 -> 00:08:52.000
ツールバーが本当にまとまり始めています。

00:08:52.000 -> 00:08:54.000
最後に1つ変更したいことがあります。

00:08:54.000 -> 00:09:02.000
新しい場所を追加することは一般的で重要なアクションなので、そのためのツールバー項目を追加したいと思います。

00:09:02.000 -> 00:09:14.000
これを行うには、ツールバーに新しいボタンを追加しますが、今回は新しいボタンが最も一般的なアクションであると考えるため、プライマリアクションの配置を使用します。

00:09:14.000 -> 00:09:19.000
この配置は、iOSとmacOSの重要な違いを強調しています。

00:09:19.000 -> 00:09:29.000
カスタマイズ可能なツールバー修飾子内のすべての項目は、macOSではカスタマイズをサポートしていますが、iPadOSではセカンダリアクションのみがサポートします。

00:09:29.000 -> 00:09:37.000
したがって、ここでの新しいボタンは、バーの末尾の領域にレンダリングされ、ユーザーによってカスタマイズできません。

00:09:37.000 -> 00:09:38.000
うわー！

00:09:38.000 -> 00:09:41.000
それはツールバーに関する多くのことであり、それらが唯一の改善ではありません。

00:09:41.000 -> 00:09:46.000
ナビゲーションタイトルは、メニュー、ドキュメントなどに関するいくつかの新機能も獲得しました。

00:09:46.000 -> 00:09:49.000
文書を例に挙げてみましょう。

00:09:49.000 -> 00:09:51.000
書類にはたくさんの種類があります。

00:09:51.000 -> 00:09:56.000
ドキュメントグループAPIによって管理されているドキュメントに精通しているかもしれません。

00:09:56.000 -> 00:10:02.000
ドキュメントグループには、ドキュメントを表現および管理するための多くの機能が組み込まれています。

00:10:02.000 -> 00:10:07.000
私が話そうとしていることはすべて、ドキュメントグループを使用するときに無料で提供されます。

00:10:07.000 -> 00:10:16.000
しかし、Placesでは、Placesがドキュメントグループを使用していなくても、個々の場所をドキュメントと見なすことができます。

00:10:16.000 -> 00:10:23.000
編集できるプロパティがあり、Placesアプリに追加または削除でき、友達と場所を共有することができます。

00:10:23.000 -> 00:10:28.000
非ドキュメントグループベースのアプリでこの関係を披露する方法を見てみましょう。

00:10:28.000 -> 00:10:33.000
私はすでにその場所の名前をビューのナビゲーションタイトルとして関連付けています。

00:10:33.000 -> 00:10:38.000
だから、私はすでにその場所の一部をツールバーのタイトルに関連付けています。

00:10:38.000 -> 00:10:44.000
iOS 16では、新しいナビゲーションタイトル修飾子を使用することで、それをさらに進めることができます。

00:10:44.000 -> 00:10:47.000
ナビゲーションタイトルがメニューの表示をサポートするようになりました。

00:10:47.000 -> 00:10:51.000
これは、macOSのファイルメニューのように考えることができます。

00:10:51.000 -> 00:10:57.000
これらのメニューの1つを作成するには、通常のメニューと同じように、ナビゲーションタイトルに一連のアクションを提供します。

00:10:57.000 -> 00:11:04.000
タイトルには、アクションが入力されたメニューを表示するメニューインジケーターが添付されていることに注意してください。

00:11:04.000 -> 00:11:07.000
そして、それはすべてのナビゲーションタイトルができるわけではありません。

00:11:07.000 -> 00:11:12.000
私のお気に入りの部分の1つは、編集可能なタイトルをサポートする新しい機能です。

00:11:12.000 -> 00:11:19.000
ナビゲーションタイトルにバインディングを渡すことができ、これはタイトルの編集をサポートしていることをツールバーに伝えます。

00:11:19.000 -> 00:11:23.000
欠けているのは、実際に編集を開始する方法だけです。

00:11:23.000 -> 00:11:30.000
タイトルメニューのアクション内で新しいRenameButtonを使用して、これを実現できます。

00:11:30.000 -> 00:11:34.000
名前の変更ボタンをタップすると、タイトルの名前の変更を開始できます。

00:11:34.000 -> 00:11:42.000
ナビゲーションタイトルをビューに関連付けることができるように、私の場所のようにドキュメントを関連付けることもできます。

00:11:42.000 -> 00:11:48.000
ドキュメントが提供されると、タイトルメニューは、そのドキュメントのプレビューを表示する特殊なヘッダーをレンダリングします。

00:11:48.000 -> 00:11:53.000
プレビューはドラッグでき、ドキュメントを共有するための迅速なアクセスがあります。

00:11:53.000 -> 00:12:00.000
これらのヘッダーの1つを取得するには、新しいナビゲーションドキュメント修飾子を使用してナビゲーションドキュメントをビューに関連付けます。

00:12:00.000 -> 00:12:06.000
これを行うには、譲渡可能に準拠するタイプを提供するか、URLを直接提供できます。

00:12:06.000 -> 00:12:12.000
ここでは、私が見ている場所へのマップアプリを開くURLを提供します。

00:12:12.000 -> 00:12:21.000
ナビゲーションドキュメント修飾子は、URLを提供するときにmacOSのウィンドウツールバーのプロキシアイコンも設定します。

00:12:21.000 -> 00:12:25.000
結局のところ、私はアプリのツールバーの更新を休もうと思います。

00:12:25.000 -> 00:12:27.000
今回追加したすべての機能を信じられますか？

00:12:27.000 -> 00:12:30.000
それらを使い始めるのが待ちきれません。

00:12:30.000 -> 00:12:35.000
私はiPadでPlacesの体験を向上させるために、私の旅で多くのことをカバーしました。

00:12:35.000 -> 00:12:41.000
iPadのツールバーは、オーバーフローメニューやユーザーのカスタマイズなど、多くの新機能を獲得しています。

00:12:41.000 -> 00:12:50.000
セカンダリアクションの配置とカスタマイズAPIを使用して、iPadとMacで利用可能なより大きなスペースを最大限に活用してください。

00:12:50.000 -> 00:12:53.000
タイトルは、ツールバーで自分自身を表現するいくつかの新しい方法を得ました。

00:12:53.000 -> 00:12:59.000
ナビゲーションタイトルを使用するか、タイトルメニューを作成するか、タイトルの名前変更をサポートします。

00:12:59.000 -> 00:13:04.000
そして、必要に応じてナビゲーションドキュメント修飾子を使用することを忘れないでください。

00:13:04.000 -> 00:13:07.000
iPadシリーズのSwiftUIを楽しんだことを願っています。

00:13:07.000 -> 00:13:13.000
表、選択、ツールバーなどのすべての改善により、iPadアプリを次のレベルに引き上げましょう。

00:13:13.000 -> 23:59:59.000
ありがとう、そして素晴らしいWWを。

