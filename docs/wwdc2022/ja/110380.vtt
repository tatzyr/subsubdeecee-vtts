WEBVTT

00:00:00.000 --> 00:00:09.000
♪ ♪

00:00:09.000 --> 00:00:11.000
プラシャント:やあ、みんな。私はプラシャントです。

00:00:11.000 --> 00:00:16.000
私はAVFoundationエンジニアで、WWDC2022へようこそ。

00:00:16.000 --> 00:00:27.000
SharePlayの導入により、SharePlayグループと完全に同期しながら、リアルタイムでコンテンツをナビゲートして対話できる、接続された視聴体験を人々に提供できます。

00:00:27.000 --> 00:00:44.000
ただし、コンテンツタイムラインにターゲット広告やその他のインタースティシャルがスケジュールされている人もいるため、異なる期間の広告を受信する参加者間の再生を調整したり、広告を受信する参加者が混在する参加者の間で再生を調整するのが困難です。

00:00:44.000 --> 00:00:51.000
したがって、SharePlayで調整された再生のために広告やその他のインタースティシャルをスケジュールすることに興味がある場合は、適切なセッションにチューニングしました。

00:00:51.000 --> 00:00:55.000
この講演では、調整された再生がどのように機能するかから始めます。

00:00:55.000 --> 00:01:01.000
次に、調整された再生で広告やその他のインタースティシャルに関連する課題について確認します。

00:01:01.000 --> 00:01:06.000
その後、広告を見るときに可能なさまざまな視聴体験について話し合います。

00:01:06.000 --> 00:01:10.000
次に、ステッチイン広告でこれらをどのように達成できるかを見ていきます。

00:01:10.000 --> 00:01:15.000
また、HLSインタースティシャルが調整された再生でどのように機能するかも見ます。

00:01:15.000 --> 00:01:23.000
そして最後に、人々に本当に魅力的なSharePlay体験を提供するために使用できるいくつかのベストプラクティスについて説明します。

00:01:23.000 --> 00:01:27.000
SharePlayで調整された再生がどのように機能するか見てみましょう。

00:01:27.000 --> 00:01:36.000
したがって、参加者がFaceTime通話をしている間、1人の参加者のデバイスから発信された再生コントロールコマンドはグループ間で共有され、全員が同期して再生されます。

00:01:36.000 --> 00:01:43.000
すべての参加者が同じコンテンツを見ている場合、これはうまく機能しますが、そのうちの何人かが広告を持っている場合はどうなりますか?

00:01:43.000 --> 00:01:48.000
それでは、アリスとボブが番組のコンテンツを見ようとしているケースを見てみましょう。

00:01:48.000 --> 00:01:52.000
さて、ここで見られるのは、それぞれの端でのプレゼンテーションのタイムラインです。

00:01:52.000 --> 00:01:58.000
彼らが見ているのがプログラムコンテンツだけであれば、調整された再生を実現するのはかなり簡単なはずです。

00:01:58.000 --> 00:02:04.000
グループセッションを再生コーディネーターに関連付けるだけで、行っても大丈夫です。

00:02:04.000 --> 00:02:10.000
さて、それぞれにプログラム要約セグメントが縫い付けられており、スタジオまたはネットワークのバナーが先行しています。

00:02:10.000 --> 00:02:19.000
これはかなり典型的であり、要約セグメントとバナーはアリスとボブと一致するので、調整された再生はまだ達成可能です。

00:02:19.000 --> 00:02:31.000
しかし、今、アリスの地理では、サービスがプログラムの開始前にいくつかの法定警告を表示する必要があり、プログラム内のさまざまな時点で広告がスケジュールされている可能性もあります。

00:02:31.000 --> 00:02:36.000
これらの広告は期間が異なる場合があります。

00:02:36.000 --> 00:02:41.000
同期してプレイさせようとすると、これがどのように課題になるかがわかります。

00:02:41.000 --> 00:02:48.000
ボブの場合、ネットワークバナーは冒頭に表示される場合がありますが、アリスの場合、警告が表示された後にのみ表示されます。

00:02:48.000 --> 00:02:56.000
そして、プレゼンテーションのタイムラインで任意の時間を見ると、彼らはコンテンツの完全に異なる部分を見ているでしょう。

00:02:56.000 --> 00:03:01.000
それでは、このようなシナリオで可能なユーザーエクスペリエンスについて少し考えてみましょう。

00:03:01.000 --> 00:03:08.000
このために、それぞれが1つの広告だけを縫い合わせた、よりシンプルなタイムラインを考えてみましょう。

00:03:08.000 --> 00:03:13.000
理想的なケースでは、経験は彼らが一人で番組を見ていた場所とあまり変わらないはずです。

00:03:13.000 --> 00:03:17.000
それが可能になるように、広告の期間が一致することを期待しています。

00:03:17.000 --> 00:03:20.000
これも私たちの好ましい経験になるでしょう。

00:03:20.000 --> 00:03:25.000
さて、広告を見た後、両方とも同期して再生を再開します。

00:03:25.000 --> 00:03:30.000
しかし、時には彼らは異なる期間の広告を取得するか、そのうちの1つがまったく広告を持っていないかもしれません。

00:03:30.000 --> 00:03:35.000
だから今、彼らが同期してプレイするなら、2つの経験のうちの1つが可能です。

00:03:35.000 --> 00:03:45.000
アリスが広告を終えたら、ボブの広告が終わるのを待ってから、同期して再開することができます。

00:03:45.000 --> 00:03:53.000
または、彼女はメインプログラムを続けることができ、ボブはアリスに追いつくためにジャンプして、彼らが同期し続けるようにします。

00:03:53.000 --> 00:03:58.000
このシナリオでは、ボブはアリスに追いつくときにいくつかのプログラムコンテンツを見逃してしまうでしょう。

00:03:58.000 --> 00:04:01.000
さて、あなたはどのようにこれらの経験を可能にしますか?

00:04:01.000 --> 00:04:09.000
suspensionReasonsThatTriggerWaiting配列の入力方法によって、AVPlaybackCoordinatorでこれらの待機ポリシーを指定できます。

00:04:09.000 --> 00:04:15.000
デフォルトの動作は、一部の参加者が広告を見ている間、グループが待たないことです。

00:04:15.000 --> 00:04:21.000
これらの参加者が広告を終えると、彼らはグループの残りの部分に追いつくためにいくつかのコンテンツを見逃すでしょう。

00:04:21.000 --> 00:04:32.000
または、参加者が広告を見ている間、グループを待ちたい場合は、suspensionReasonsThatTriggerWaiting配列の一部として「playingInterstitial」サスペンション理由を含めることができます。

00:04:32.000 --> 00:04:45.000
このポリシーでは、参加者が他の参加者が広告を完了するのを待っているとき、プレイヤーのtimeControlStatusはWaitToPlayAtSpecifiedRateになり、waitingReasonはForCoordinatedPlaybackを待っています。

00:04:45.000 --> 00:04:53.000
では、先に説明したコンテンツに戻って、調整された再生タイムラインから除外されるこれらの時間範囲をどのように定義しますか?

00:04:53.000 --> 00:04:58.000
例えば、法定警告はアリスだけが持っているもので、ボブは持っていないものです。

00:04:58.000 --> 00:05:01.000
また、広告の休憩期間が異なる可能性もあります。

00:05:01.000 --> 00:05:06.000
HLSは広告をスケジュールする2つの方法を提供していることをご存知かもしれません。

00:05:06.000 --> 00:05:12.000
そのうちの1つは、広告セグメントをプライマリコンテンツのプレイリストに直接ステッチすることです。

00:05:12.000 --> 00:05:23.000
したがって、不連続タグを使用して広告がステッチされたビデオオンデマンドコンテンツの場合、AVFoundation APIを使用してAVPlayerPlaybackCoordinatorで広告時間範囲を設定できます。

00:05:23.000 --> 00:05:33.000
そのため、次のデリゲートメソッドを追加しました。これを使用して、コンテンツ内の広告とインタースティシャルを表すサンプルの正確な時間範囲の配列を指定できます。

00:05:33.000 --> 00:05:39.000
AVPlayerPlaybackCoordinatorは、この情報を使用してグループ全体の再生を調整します。

00:05:39.000 --> 00:05:45.000
参加者がこの時間範囲に入ると、指定された待機ポリシーに従って再生が調整されます。

00:05:45.000 --> 00:05:51.000
また、インタースティシャルの種類によっては、誰かがこれらの時間範囲にナビゲートすることを許可するかもしれません。

00:05:51.000 --> 00:06:00.000
したがって、SharePlay中にこれらの時間範囲を模索すると、グループ全体がその時間範囲の始まりにスナップします。

00:06:00.000 --> 00:06:08.000
これは、プレイリストのEXTINFタグで報告された時間を合計して、広告時間範囲が入力されるプレイリストの例を示しています。

00:06:08.000 --> 00:06:17.000
これは、EXTINFタグの一部として報告された期間が、それらのセグメントのメディア期間を正確に反映することを前提としています。

00:06:17.000 --> 00:06:22.000
では、調整された再生が機能するために、資産がどのように見えるべきですか?

00:06:22.000 --> 00:06:30.000
したがって、この例を見ると、アリスとボブはステッチされた期間の広告が異なるため、資産期間が異なります。

00:06:30.000 --> 00:06:37.000
これらがSharePlay互換と見なされるためには、アセットの実際のコンテンツ期間が一致すると予想されます。

00:06:37.000 --> 00:06:46.000
これはビデオオンデマンドコンテンツにのみ適用され、ステッチイン広告付きのライブコンテンツの場合、広告休憩の期間がすべての参加者と一致することが予想されます。

00:06:46.000 --> 00:06:57.000
サンプルの正確な時間範囲を取得するのが難しいと思われる場合や、ライブコンテンツでターゲット広告を動的にスケジュールしたい場合は、HLSインタースティシャルを使用して広告をスケジュールできます。

00:06:57.000 --> 00:07:04.000
2021年には、広告をスケジュールするための異なる、より柔軟なアプローチを提供するHLSインタースティシャルを導入しました。

00:07:04.000 --> 00:07:11.000
詳細については、WWDC2021のHLSトークのExplore dynamic pre-rolls and mid-rollsをチェックしてください。

00:07:11.000 --> 00:07:18.000
要するに、広告とインタースティシャルは、コンテンツタイムラインの外で別々のオブジェクトとして扱われます。

00:07:18.000 --> 00:07:37.000
これらのオブジェクトは、マルチバリアントプレイリストを介して直接参照することができ、プライマリコンテンツのメディアプレイリストの日付範囲タグの一部としてマルチバリアントプレイリストURIを含めるだけでサーバーサイド広告挿入を実行したり、AVFoundation APIを使用してクライアント側で広告をスケジュールしたりすることもできます。

00:07:37.000 --> 00:07:44.000
HLSインタースティシャルを使用して広告をスケジュールする場合、AVFoundationは調整された再生中に自動的にそれらを処理します。

00:07:44.000 --> 00:07:48.000
あなたがする必要があるのは、待機ポリシーを指定することだけです。

00:07:48.000 --> 00:07:59.000
HLSインタースティシャルを使用して広告をスケジュールする場合、もう一度、アセットがSharePlay互換と見なされるために、主要なコンテンツ期間がすべての参加者間で一致することを期待します。

00:07:59.000 --> 00:08:05.000
それでは、人々に本当に良いSharePlay体験を提供するために使用できるベストプラクティスをいくつか紹介しましょう。

00:08:05.000 --> 00:08:12.000
SharePlayは、人々が自分で見ているかのようにコンテンツと対話するシームレスな接続視聴体験を提供することを目的としています。

00:08:12.000 --> 00:08:19.000
したがって、この経験を念頭に置いて、できるだけ待ち時間やコンテンツのスキップを最小限に抑えるよう努めるべきです。

00:08:19.000 --> 00:08:26.000
そのため、待機時間やスキップ時間を最小限に抑えるように、広告の休憩期間を調整することをお勧めします。

00:08:26.000 --> 00:08:38.000
一部の人が広告を持っていて、そうでない人がいて、全員がライブコンテンツを見ている参加者グループが混在している場合は、HLSインタースティシャルを使用して、デフォルトの待機ポリシーを使用しながら広告をスケジュールできます。

00:08:38.000 --> 00:08:46.000
さて、広告のスケジューリング中に再開オフセットを指定しない場合、コンテンツは広告期間に等しいオフセットで再開されます。

00:08:46.000 --> 00:08:56.000
このようなシナリオでは、広告のない参加者は主要なコンテンツを見続け、広告を見終わったら、他の参加者はその参加者に参加します。

00:08:56.000 --> 00:09:00.000
ここでは、アリス、ボブ、チャーリーがライブコンテンツを見ています。

00:09:00.000 --> 00:09:10.000
そのサービスのプレミアム加入者であるアリスには広告がありませんが、ボブとチャーリーはHLSインタースティシャルを使用してスケジュールされた異なる期間の広告を持っています。

00:09:10.000 --> 00:09:17.000
ボブとチャーリーが広告休憩から出てきたときにアリスと同期している間、アリスがどのように番組を見続けているかを見ることができます。

00:09:17.000 --> 00:09:25.000
さて、これがライブスポーツゲームだったら、ボブとチャーリーが広告を見ている間、アリスがどのようにライブスタジアムフィードを見ているかを想像することができます。

00:09:25.000 --> 00:09:30.000
そして、彼らが広告休憩から出てくるとき、それはプレイの開始にちょうど間に合うでしょう。

00:09:30.000 --> 00:09:37.000
参加者がプログラムのコンテンツを見逃す余裕がないビデオオンデマンドストリームでは、待機待機ポリシーを使用できます。

00:09:37.000 --> 00:09:43.000
これで、GroupSessionMessengerを使用して、参加者間で広告スケジュールを共有できます。

00:09:43.000 --> 00:09:52.000
そして、誰かが他の人が広告を見終わるのを待っているとき、あなたはすでにスケジュールを共有しているので、彼らがどのくらい待たなければならないかを正確に知ることができます。

00:09:52.000 --> 00:10:02.000
だから今、彼らが待っている間、あなたはおそらくそれらを従事させるためにあなたのサービスの今後のアトラクションのようないくつかの興味深いコンテンツを表示するために別のプレーヤーを使用することができます。

00:10:02.000 --> 00:10:22.000
まとめるには、調整された再生中に広告やその他のインタースティシャルをスケジュールするには、待機ポリシーを指定するだけで、ステッチイン広告がある場合は、AVFoundation APIを使用して再生コーディネーターの時間範囲を設定するか、HLSインタースティシャルを使用してAVFoundationが広告の再生を管理できるようにすることができます。

00:10:22.000 --> 00:10:27.000
理想的なシナリオでは、すべての参加者が同じコンテンツを見ていることになります。

00:10:27.000 --> 00:10:31.000
これが可能であるようにしたいので、必ずしもそうとは限りません。

00:10:31.000 --> 00:10:38.000
広告を受信しないプレミアムサブスクライバー層を持つことができ、参加者が異なる期間の広告を受け取ることもできます。

00:10:38.000 --> 00:10:44.000
このようなシナリオでは、プレミアム加入者は待機画面を見つめる必要はありません。

00:10:44.000 --> 00:10:51.000
先ほど見たように、彼らにいくつかの興味深いコンテンツを見せたり、彼らを楽しませ続けるために他の体験を構築することもできます。

00:10:51.000 --> 00:10:57.000
SharePlayでカスタムエクスペリエンスを構築する方法に関するより多くのアイデアについては、素晴らしいSharePlayエクスペリエンストークをチェックしてください。

00:10:57.000 --> 00:10:59.000
このセッションが有益であることを願っています。

00:10:59.000 --> 00:11:01.000
WWDCの残りの部分を楽しんでください。

00:11:01.000 --> 23:59:59.000
ありがとうございます。

