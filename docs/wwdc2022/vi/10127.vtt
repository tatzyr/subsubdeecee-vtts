WEBVTT

00:00:00.000 --> 00:00:03.000
♪ (Nhạc hip-hop nhạc cụ Melo) ♪

00:00:03.000 --> 00:00:09.000
♪

00:00:09.000 --> 00:00:14.000
Praveen Sharma: Xin chào. Tên tôi là Praveen, và tôi đến từ nhóm Tạo mẫu ở đây tại Apple.

00:00:14.000 --> 00:00:18.000
Kai Kang: Xin chào. Tên tôi là Kai và tôi đến từ nhóm Kỹ thuật Video.

00:00:18.000 --> 00:00:24.000
Praveen: Trong vài năm qua, Apple đã cho phép những cách thức mới mạnh mẽ để mọi người đưa thế giới vào ứng dụng của họ.

00:00:24.000 --> 00:00:39.000
Năm ngoái, chúng tôi đã giới thiệu Object Capture, chụp ảnh các đối tượng trong thế giới thực và sử dụng Photogrammetry API trong RealityKit, biến chúng thành mô hình 3D sẵn sàng để sử dụng trong ứng dụng của bạn.

00:00:39.000 --> 00:00:54.000
Trước Object Capture, chúng tôi đã phát hành Scene Reconstruction API cung cấp cho bạn sự hiểu biết thô sơ về cấu trúc hình học của không gian và cho phép các trường hợp sử dụng thực tế tăng cường hoàn toàn mới trong ứng dụng của bạn.

00:00:54.000 --> 00:01:01.000
Năm nay, chúng tôi rất vui mừng thông báo một khuôn khổ hoàn toàn mới có tên là RoomPlan.

00:01:01.000 --> 00:01:07.000
RoomPlan cho phép bạn quét phòng của mình bằng iPhone hoặc iPad hỗ trợ LiDAR.

00:01:07.000 --> 00:01:15.000
Nó tạo ra một mô hình 3D tham số của căn phòng và các đối tượng xác định phòng mà bạn có thể sử dụng trong ứng dụng của mình.

00:01:15.000 --> 00:01:21.000
Hãy cùng xem trải nghiệm quét RoomPlan trông như thế nào.

00:01:21.000 --> 00:01:40.000
RoomPlan sử dụng các thuật toán học máy tinh vi được cung cấp bởi ARKit để phát hiện tường, cửa sổ, khe hở và cửa ra vào, cũng như các vật thể xác định phòng như lò sưởi, ghế dài, bàn và tủ.

00:01:40.000 --> 00:01:52.000
Với RoomCaptureView API của chúng tôi, sử dụng RealityKit để hiển thị tiến trình quét trong thời gian thực, bạn có thể dễ dàng tích hợp trải nghiệm quét vào ứng dụng của mình.

00:01:52.000 --> 00:02:04.000
Và khi bạn quét xong, RoomCaptureView sẽ trình bày kết quả xử lý hậu kỳ cuối cùng để bạn sử dụng tuy nhiên phù hợp nhất với trường hợp sử dụng của bạn.

00:02:04.000 --> 00:02:14.000
Lần đầu tiên, không có sự phức tạp của việc triển khai các thuật toán học máy và thị giác máy tính, giờ đây mọi người có thể tương tác với căn phòng của họ theo những cách hoàn toàn mới.

00:02:14.000 --> 00:02:24.000
Ví dụ, các ứng dụng thiết kế nội thất có thể xem trước sự thay đổi màu sắc của tường và tính toán chính xác lượng sơn cần thiết để sơn lại một căn phòng.

00:02:24.000 --> 00:02:31.000
Các ứng dụng kiến trúc giờ đây có thể dễ dàng cho phép ai đó xem trước và chỉnh sửa các thay đổi đối với bố cục phòng của họ trong thời gian thực.

00:02:31.000 --> 00:02:39.000
Các ứng dụng bất động sản giờ đây có thể cho phép các đại lý nắm bắt các sơ đồ tầng và mô hình 3D của một danh sách một cách liền mạch.

00:02:39.000 --> 00:02:46.000
Và các ứng dụng thương mại điện tử có thể thu hút khách hàng thông qua trực quan hóa sản phẩm trong không gian vật lý của họ.

00:02:46.000 --> 00:02:56.000
Đây chỉ là một vài ví dụ về các ứng dụng mà RoomPlan cho phép và bạn sẽ ngạc nhiên khi thấy việc tích hợp RoomPlan vào ứng dụng của bạn đơn giản như thế nào.

00:02:56.000 --> 00:02:57.000
Hãy cùng xem nào.

00:02:57.000 --> 00:03:01.000
Có hai cách chính bạn có thể sử dụng RoomPlan.

00:03:01.000 --> 00:03:08.000
Đầu tiên là trải nghiệm quét vượt trội của chúng tôi cho phép bạn tích hợp liền mạch RoomPlan vào ứng dụng của mình.

00:03:08.000 --> 00:03:18.000
Thứ hai là API dữ liệu của chúng tôi cho phép ứng dụng của bạn sử dụng dữ liệu tham số trực tiếp từ bản quét tuy nhiên phù hợp nhất với trường hợp sử dụng của bạn.

00:03:18.000 --> 00:03:30.000
Với cả hai API này, chúng tôi đề xuất một số phương pháp hay nhất để giúp bạn đạt được kết quả quét tốt nhất có thể, chúng tôi sẽ xem xét trong phần cuối của bài thuyết trình này.

00:03:30.000 --> 00:03:38.000
Đầu tiên, hãy nói về trải nghiệm quét mà bạn có thể mang vào ứng dụng của mình bằng cách sử dụng RoomCaptureView API mới của chúng tôi.

00:03:38.000 --> 00:03:43.000
RoomCaptureView là một lớp con UIView mà bạn có thể dễ dàng đặt trong ứng dụng của mình.

00:03:43.000 --> 00:03:54.000
Nó xử lý việc trình bày phản hồi quét không gian thế giới, tạo mô hình phòng theo thời gian thực, cũng như hướng dẫn huấn luyện và người dùng.

00:03:54.000 --> 00:04:01.000
Chúng ta hãy xem xét kỹ hơn các yếu tố thiết kế được trình bày trong quá trình quét dựa trên RoomCaptureView.

00:04:01.000 --> 00:04:13.000
Trong phiên RoomCaptureView đang hoạt động, các đường hoạt hình phác thảo các bức tường, cửa sổ, khe hở, cửa ra vào và các vật thể xác định phòng được phát hiện trong thời gian thực.

00:04:13.000 --> 00:04:23.000
Mô hình 3D tương tác được tạo trong thời gian thực ở cuối RoomCaptureView, cung cấp cho bạn cái nhìn tổng quan về tiến trình quét của bạn trong nháy mắt.

00:04:23.000 --> 00:04:29.000
Cuối cùng, huấn luyện văn bản hướng dẫn bạn đến kết quả quét tốt nhất có thể.

00:04:29.000 --> 00:04:35.000
Hãy xem cách bạn có thể bắt đầu sử dụng RoomCaptureView chỉ trong bốn bước đơn giản.

00:04:35.000 --> 00:04:40.000
Đầu tiên, chúng tôi tạo một tham chiếu RoomCaptureView trong ViewController của chúng tôi.

00:04:40.000 --> 00:04:46.000
Thứ hai, chúng tôi tạo một tham chiếu đến đối tượng cấu hình RoomCaptureSession của chúng tôi.

00:04:46.000 --> 00:04:54.000
Thứ ba, chúng tôi bắt đầu phiên quét của mình, chuyển cấu hình của chúng tôi sang chức năng chạy của phiên chụp.

00:04:54.000 --> 00:05:00.000
Và cuối cùng, ứng dụng của chúng tôi yêu cầu phiên chụp dừng quét.

00:05:00.000 --> 00:05:14.000
Tùy chọn, ứng dụng của bạn có thể tuân thủ giao thức RoomCaptureViewDelegate của chúng tôi và chọn không tham gia các kết quả sau xử lý và bản trình bày của chúng hoặc xử lý các kết quả quét sau khi chúng đã được trình bày.

00:05:14.000 --> 00:05:25.000
Ví dụ, bạn có thể xuất USDZ của các kết quả bằng cách gọi hàm xuất có sẵn trên cấu trúc dữ liệu CapturedRoom được cung cấp.

00:05:25.000 --> 00:05:29.000
Và đó là cách đơn giản để tích hợp RoomPlan vào ứng dụng của bạn.

00:05:29.000 --> 00:05:32.000
Chúng tôi rất vui khi thấy những gì bạn tạo ra với API này.

00:05:32.000 --> 00:05:39.000
Bây giờ đồng nghiệp Kai của tôi sẽ nói về RoomCaptureSession và API dữ liệu của RoomPlan.

00:05:39.000 --> 00:05:40.000
Kai: Cảm ơn, Praveen.

00:05:40.000 --> 00:05:55.000
Trong phần này, chúng tôi sẽ hướng dẫn bạn qua các API dữ liệu cung cấp cho bạn quyền truy cập vào các cấu trúc dữ liệu cơ bản trong quá trình quét và có thể giúp bạn xây dựng trực quan hóa tùy chỉnh về trải nghiệm quét từ đầu.

00:05:55.000 --> 00:06:03.000
Quy trình làm việc cơ bản bao gồm ba phần: quét, xử lý và xuất.

00:06:03.000 --> 00:06:13.000
Để quét, chúng tôi sẽ đề cập đến những điều cơ bản về cách thiết lập và bắt đầu phiên chụp, cũng như hiển thị và giám sát quá trình chụp.

00:06:13.000 --> 00:06:21.000
Sau đó, chúng tôi sẽ xem xét cách dữ liệu được quét của bạn được xử lý và mô hình cuối cùng được nhận để trình bày.

00:06:21.000 --> 00:06:32.000
Cuối cùng, chúng ta sẽ thảo luận về cách bạn có thể tạo và xuất tệp USD đầu ra cũng có thể được sử dụng trong quy trình làm việc USD của bạn.

00:06:32.000 --> 00:06:36.000
Bây giờ, hãy xem xét chi tiết bước Quét.

00:06:36.000 --> 00:06:43.000
Chúng tôi sẽ sử dụng RoomCaptureSession API để thiết lập phiên và hiển thị tiến trình khi chúng tôi tiếp tục quét.

00:06:43.000 --> 00:06:47.000
Để tôi chỉ cho bạn bằng mã.

00:06:47.000 --> 00:06:50.000
Đây là một ứng dụng RealityKit đơn giản làm ví dụ.

00:06:50.000 --> 00:06:56.000
Để bắt đầu, chỉ cần nhập RoomPlan vào dự án Swift của bạn.

00:06:56.000 --> 00:07:05.000
Trong ViewController của ứng dụng của bạn, bạn có thể có một loại tùy chỉnh để trực quan hóa kết quả và bắt đầu một phiên bản RoomCaptureSession.

00:07:05.000 --> 00:07:17.000
Ngoài ra, RoomCaptureSession cung cấp một xử lý cho phiên AR cơ bản để các ứng dụng của bạn có thể vẽ các mặt phẳng và các hộp giới hạn đối tượng trong chế độ xem AR.

00:07:17.000 --> 00:07:20.000
RoomCaptureSession áp dụng mô hình đại diện.

00:07:20.000 --> 00:07:26.000
Trong lớp ViewController của bạn, bạn có thể chỉ định chính ViewController làm đại diện của captureSession.

00:07:26.000 --> 00:07:33.000
Điều này sẽ cho phép ViewController nhận các bản cập nhật theo thời gian thực từ RoomCaptureSession.

00:07:33.000 --> 00:07:39.000
Các bản cập nhật này bao gồm các mô hình 3D và hướng dẫn để hướng dẫn mọi người trong quá trình chụp.

00:07:39.000 --> 00:07:48.000
Để có được những cập nhật này, ViewController của bạn cần tuân thủ giao thức RoomCaptureSessionDelegate và thực hiện hai phương pháp.

00:07:48.000 --> 00:07:57.000
Cái đầu tiên là phương thức captureSession(_ session: didUpdate room:) để có được cấu trúc dữ liệu CapturedRoom theo thời gian thực.

00:07:57.000 --> 00:08:05.000
Trình hiển thị của bạn có thể sử dụng nó để cập nhật chế độ xem AR của mô hình 3D, cung cấp phản hồi theo thời gian thực cho mọi người về tiến trình.

00:08:05.000 --> 00:08:11.000
Chúng ta sẽ đi sâu vào cấu trúc CapturedRoom nhiều hơn trong phần sau của buổi nói chuyện.

00:08:11.000 --> 00:08:16.000
Phương pháp này sẽ được gọi khi chúng tôi phát hiện các bản cập nhật cho căn phòng bị bắt.

00:08:16.000 --> 00:08:21.000
Phương pháp thứ hai là captureSession(_ session: didProvide instruction:).

00:08:21.000 --> 00:08:27.000
Phương pháp này cung cấp cho bạn một cấu trúc hướng dẫn chứa phản hồi theo thời gian thực.

00:08:27.000 --> 00:08:33.000
Trình hiển thị của bạn có thể sử dụng hướng dẫn để hướng dẫn mọi người trong quá trình quét.

00:08:33.000 --> 00:08:37.000
Hãy xem qua các hướng dẫn mà API này cung cấp.

00:08:37.000 --> 00:08:53.000
Những hướng dẫn này bao gồm khoảng cách đến các vật thể, tốc độ quét, điều chỉnh ánh sáng cho căn phòng, cũng như tập trung vào các khu vực cụ thể của căn phòng có nhiều kết cấu hơn.

00:08:53.000 --> 00:09:01.000
Những hướng dẫn này sẽ được cung cấp trong quá trình quét để hướng dẫn mọi người với phản hồi theo thời gian thực.

00:09:01.000 --> 00:09:04.000
Tiếp theo, chúng ta sẽ chuyển sang phần quy trình.

00:09:04.000 --> 00:09:13.000
Trong phần này, chúng tôi sẽ sử dụng lớp RoomBuilder để xử lý dữ liệu được quét và tạo ra các mô hình 3D cuối cùng.

00:09:13.000 --> 00:09:21.000
Để xử lý dữ liệu được thu thập, bước đầu tiên là bắt đầu một phiên bản RoomBuilder trong lớp ViewController của bạn.

00:09:21.000 --> 00:09:32.000
Tiếp theo, để nhận dữ liệu cảm biến sau quá trình chụp, ứng dụng của bạn cần triển khai phương thức captureSession(_ session: didEndWith data: error:).

00:09:32.000 --> 00:09:45.000
Khi RoomCaptureSession bị dừng, bằng cách gọi hàm stop() trong ứng dụng của bạn hoặc do lỗi, hàm này sẽ được gọi để trả về đối tượng CaptureRoomData và lỗi tùy chọn.

00:09:45.000 --> 00:09:55.000
Cuối cùng, để xử lý dữ liệu thu được, chúng tôi gọi phương thức roomModel(from:) không đồng bộ của roomBuilder với từ khóa await.

00:09:55.000 --> 00:10:01.000
Phương pháp chạy không đồng bộ để xử lý dữ liệu được quét và xây dựng mô hình 3D cuối cùng.

00:10:01.000 --> 00:10:09.000
Nó sử dụng chức năng Swift async/await mà chúng tôi đã giới thiệu trong WWDC năm ngoái.

00:10:09.000 --> 00:10:17.000
Chỉ trong vài giây, mô hình sẽ có sẵn cho bài thuyết trình cuối cùng trong ứng dụng của bạn.

00:10:17.000 --> 00:10:26.000
Bây giờ, hãy đi sâu vào chi tiết về cấu trúc dữ liệu CapturedRoom và cách bạn có thể xuất nó để sử dụng trong ứng dụng của mình.

00:10:26.000 --> 00:10:32.000
Ở cấp độ cao nhất, có CapturedRoom bao gồm các Bề mặt và Vật thể.

00:10:32.000 --> 00:10:49.000
Bề mặt chứa các thuộc tính độc đáo để thể hiện các đường cong như bán kính; góc bắt đầu và kết thúc; bốn cạnh khác nhau của bề mặt; và các loại kiến trúc của tường, mở, cửa sổ, cửa ra vào.

00:10:49.000 --> 00:10:56.000
Đối tượng chứa các loại đồ nội thất như bàn, giường, ghế sofa, v.v.

00:10:56.000 --> 00:11:13.000
Bề mặt và Đối tượng chia sẻ một số thuộc tính chung như kích thước; độ tin cậy, mang lại cho bạn ba mức độ tin cậy cho bề mặt hoặc đối tượng được quét; ma trận biến đổi 3D; cũng như một mã định danh duy nhất.

00:11:13.000 --> 00:11:17.000
Hãy xem chúng được thể hiện như thế nào trong mã.

00:11:17.000 --> 00:11:23.000
Cấu trúc CapturedRoom là một biểu diễn tham số đầy đủ của các yếu tố trong phòng.

00:11:23.000 --> 00:11:31.000
Nó chứa năm thuộc tính bao gồm tường, khe hở, cửa ra vào, cửa sổ và các đồ vật trong phòng.

00:11:31.000 --> 00:11:41.000
Đối với bốn yếu tố đầu tiên, chúng được biểu diễn dưới dạng cấu trúc Bề mặt đại diện cho các cấu trúc kiến trúc phẳng 2D.

00:11:41.000 --> 00:11:47.000
Ở bên phải, bạn có thể thấy các thuộc tính khác nhau của Surface mà chúng tôi đã đề cập trước đó.

00:11:47.000 --> 00:11:54.000
Thuộc tính cuối cùng là một mảng các vật thể 3D trong phòng và chúng được biểu diễn dưới dạng hình khối.

00:11:54.000 --> 00:11:59.000
Ở bên phải, bạn có thể thấy các thuộc tính khác nhau của Object.

00:11:59.000 --> 00:12:04.000
Đây là danh sách các loại đối tượng mà chúng tôi hỗ trợ trong RoomPlan.

00:12:04.000 --> 00:12:12.000
Chúng bao gồm nhiều loại đồ nội thất phổ biến như ghế sofa, bàn, ghế, giường, và nhiều loại khác.

00:12:12.000 --> 00:12:24.000
Cuối cùng, chức năng xuất cho phép bạn xuất CapturedRoom này thành dữ liệu USD hoặc USDZ cho quy trình làm việc hiện tại của bạn.

00:12:24.000 --> 00:12:40.000
Đây là một ví dụ để chỉ ra cách bạn có thể trực tiếp mở đầu ra USD trong Cinema 4D để duyệt và chỉnh sửa cấu trúc dữ liệu phân cấp của căn phòng, cũng như kích thước và vị trí của từng yếu tố hoặc đối tượng trong phòng.

00:12:40.000 --> 00:12:57.000
Bạn cũng có thể tận dụng quy trình làm việc USD và USDZ hiện tại của mình để thêm kết xuất của căn phòng bị bắt vào nhiều ứng dụng khác nhau như bất động sản, thương mại điện tử, tiện ích và thiết kế nội thất.

00:12:57.000 --> 00:13:02.000
Cho đến nay, chúng tôi đã đề cập đến trải nghiệm quét và các API RoomPlan cơ bản.

00:13:02.000 --> 00:13:09.000
Bây giờ chúng tôi sẽ xem xét một số phương pháp hay nhất để giúp bạn có được kết quả tốt với RoomPlan.

00:13:09.000 --> 00:13:22.000
Chúng tôi sẽ đề cập đến các điều kiện được đề xuất cho phép quét tốt, các tính năng phòng cần chú ý trong khi chọn phòng, cũng như một số cân nhắc về quét và nhiệt cần ghi nhớ.

00:13:22.000 --> 00:13:29.000
RoomPlan API hỗ trợ hầu hết các cấu trúc và đồ vật kiến trúc phổ biến trong một hộ gia đình điển hình.

00:13:29.000 --> 00:13:38.000
Nó hoạt động tốt nhất cho một phòng dân cư đơn lẻ với kích thước phòng tối đa là 30 feet x 30 feet hoặc khoảng 9 x 9 mét.

00:13:38.000 --> 00:13:45.000
Ánh sáng cũng rất quan trọng đối với API để có được luồng video rõ ràng và hiệu suất theo dõi AR tốt.

00:13:45.000 --> 00:13:54.000
Tối thiểu 50 lux trở lên được khuyến nghị sử dụng API, điển hình cho phòng khách gia đình vào ban đêm.

00:13:54.000 --> 00:14:02.000
Đối với phần cứng, RoomPlan API được hỗ trợ trên tất cả các mẫu iPhone và iPad Pro hỗ trợ LiDAR.

00:14:02.000 --> 00:14:07.000
Có một số điều kiện đặc biệt có thể đưa ra thách thức cho API.

00:14:07.000 --> 00:14:15.000
Ví dụ, gương và kính có chiều cao đầy đủ đặt ra một thách thức cho cảm biến LiDAR để tạo ra công suất dự kiến.

00:14:15.000 --> 00:14:20.000
Ngay cả trần nhà cao cũng có thể vượt quá giới hạn phạm vi quét của cảm biến LiDAR.

00:14:20.000 --> 00:14:27.000
Ngoài ra, các bề mặt rất tối có thể khó quét thiết bị.

00:14:27.000 --> 00:14:31.000
Có một số cân nhắc để có được kết quả quét tốt hơn.

00:14:31.000 --> 00:14:41.000
Đầu tiên, đối với các ứng dụng có yêu cầu độ chính xác cao, việc chuẩn bị phòng trước khi quét có thể nâng cao chất lượng quét.

00:14:41.000 --> 00:14:50.000
Ví dụ, mở rèm cửa có thể cho phép nhiều ánh sáng tự nhiên hơn vào và giảm tắc cửa sổ, hoạt động tốt nhất cho việc quét ban ngày.

00:14:50.000 --> 00:14:57.000
Đóng cửa có thể làm giảm khả năng quét khu vực không cần thiết bên ngoài phòng.

00:14:57.000 --> 00:15:03.000
Theo dõi chuyển động quét tốt cũng rất quan trọng để đạt được kết quả quét tốt với API.

00:15:03.000 --> 00:15:16.000
Và đó là lý do tại sao chúng tôi cung cấp phương pháp ủy quyền hướng dẫn người dùng để cung cấp phản hồi về kết cấu, khoảng cách, tốc độ và điều kiện ánh sáng cho mọi người trong quá trình quét.

00:15:16.000 --> 00:15:21.000
Một điều khác cần lưu ý là pin và nhiệt của thiết bị.

00:15:21.000 --> 00:15:27.000
Chúng tôi đã thực hiện nhiều tối ưu hóa trên RoomPlan API để đảm bảo trải nghiệm quét tốt.

00:15:27.000 --> 00:15:34.000
Tuy nhiên, tốt nhất là tránh quét nhiều lần hoặc quét dài một lần trong 5 phút.

00:15:34.000 --> 00:15:45.000
Những thứ này không chỉ có thể gây mệt mỏi mà còn làm cạn kiệt pin và tạo ra các vấn đề về nhiệt có thể ảnh hưởng đến trải nghiệm người dùng ứng dụng của bạn.

00:15:45.000 --> 00:15:47.000
Có rất nhiều thứ mà chúng tôi đã đề cập đến ngày hôm nay.

00:15:47.000 --> 00:15:50.000
Chúng tôi đã giới thiệu một API hoàn toàn mới, RoomPlan.

00:15:50.000 --> 00:16:05.000
Nó cung cấp trải nghiệm quét trực quan để nắm bắt các phòng của bạn, các mô hình học máy mạnh mẽ để hiểu môi trường, cũng như định dạng đầu ra USD tham số đầy đủ để dễ dàng tích hợp vào các ứng dụng của bạn.

00:16:05.000 --> 00:16:13.000
Để được hướng dẫn về cách thiết kế và triển khai trải nghiệm RoomPlan mới của bạn tốt hơn, vui lòng xem các cuộc nói chuyện liên quan bên dưới.

00:16:13.000 --> 00:16:16.000
Praveen: Đã đến lúc bạn dùng thử RoomPlan trong ứng dụng của mình.

00:16:16.000 --> 00:16:19.000
Chúng tôi nóng lòng muốn xem bạn có thể tạo gì với API mới này.

00:16:19.000 --> 00:16:21.000
Kai: Cảm ơn vì đã xem!

00:16:21.000 --> 23:59:59.000
♪

