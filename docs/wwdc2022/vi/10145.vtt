WEBVTT

00:00:00.000 --> 00:00:14.000
- Xin chào tất cả mọi người. Tôi là Prashant, và chào mừng đến với WWDC.

00:00:14.000 --> 00:00:18.000
Vào năm 2021, chúng tôi đã giới thiệu HLS Interstitials.

00:00:18.000 --> 00:00:23.000
Họ cung cấp một cách thực sự đơn giản để lên lịch quảng cáo và các quảng cáo xen kẽ khác trong các luồng HLS của bạn.

00:00:23.000 --> 00:00:30.000
Năm nay, chúng tôi đã thêm các tính năng cho phép bạn tối ưu hóa tốt hơn khoảng không quảng cáo của mình và cũng tinh chỉnh bản trình bày của mình.

00:00:30.000 --> 00:00:33.000
Vì vậy, hãy đến, hãy tìm hiểu xem có gì mới trong HLS Interstitials.

00:00:33.000 --> 00:00:39.000
Trong buổi nói chuyện này, chúng ta sẽ bắt đầu với một cái nhìn tổng quan nhanh về cách hoạt động của HLS Interstitials.

00:00:39.000 --> 00:00:44.000
Và chúng tôi sẽ làm theo điều đó bằng cách thảo luận về các tùy chọn gợi ý quảng cáo mới mà chúng tôi đã thêm vào.

00:00:44.000 --> 00:00:51.000
Sau đó, chúng tôi sẽ xem cách bạn có thể tinh chỉnh trải nghiệm quảng cáo của mình, đặc biệt là trong các tình huống trực tiếp bằng cách sử dụng các thuộc tính SNAP.

00:00:51.000 --> 00:01:03.000
Sau đó, chúng tôi sẽ xem xét một số tham số truy vấn mới mà chúng tôi đã thêm vào đặc tả HLS và cuối cùng chúng tôi sẽ thảo luận về những thay đổi đối với API AVFoundation kết hợp các tính năng mới này.

00:01:03.000 --> 00:01:09.000
Nhưng trước khi chúng ta đi sâu vào các tính năng mới, hãy nhanh chóng làm mới bản thân với HLS Interstitials.

00:01:09.000 --> 00:01:15.000
Với HLS Interstitials, quảng cáo được coi là tài sản riêng biệt có thể được lên lịch theo dòng thời gian của chương trình.

00:01:15.000 --> 00:01:18.000
Chúng không cần phải được khâu lại bằng các thẻ gián đoạn nữa.

00:01:18.000 --> 00:01:22.000
Thay vào đó, chúng có thể được tham chiếu trực tiếp thông qua danh sách phát đa biến của chúng.

00:01:22.000 --> 00:01:30.000
Điều này làm cho việc lên lịch quảng cáo thực sự đơn giản, vì bạn chỉ cần trỏ đến danh sách phát đa biến của chúng từ nội dung chính của mình.

00:01:30.000 --> 00:01:35.000
Đây là danh sách phát phương tiện truyền thông điển hình của bạn hiển thị dòng thời gian nội dung chính.

00:01:35.000 --> 00:01:38.000
Giả sử bạn muốn lên lịch hai quảng cáo trong khi phát lại.

00:01:38.000 --> 00:01:42.000
Bạn muốn quảng cáo đầu tiên xuất hiện khoảng 5 giây để phát lại.

00:01:42.000 --> 00:01:48.000
Đối với điều đó, bạn chỉ cần chỉ định thời gian bắt đầu của quảng cáo bằng cách sử dụng thẻ DATERANGE.

00:01:48.000 --> 00:01:51.000
Và bạn muốn quảng cáo thứ hai xuất hiện sau 15 giây.

00:01:51.000 --> 00:01:54.000
Đối với điều đó, bạn sẽ thêm một thẻ DATERANGE khác vào danh sách phát.

00:01:54.000 --> 00:01:57.000
Nó đơn giản như vậy.

00:01:57.000 --> 00:02:02.000
Cũng có thể là nội dung chính của bạn có một số quảng cáo đã được ghép vào.

00:02:02.000 --> 00:02:08.000
Bạn thậm chí có thể thay thế những quảng cáo này bằng cách chỉ định độ lệch sơ yếu lý lịch bằng với thời lượng của quảng cáo được ghép vào.

00:02:08.000 --> 00:02:18.000
Ngoài ra, quảng cáo xen kẽ HLS cũng cho phép bạn chỉ định các hạn chế điều hướng cho quảng cáo của mình và thậm chí bạn có thể lên lịch trả lại sớm trong các tình huống trực tiếp, trong số những thứ khác.

00:02:18.000 --> 00:02:26.000
Để biết thêm thông tin, bạn có thể xem "Dynamically insert midrolls and prerolls in HLS" từ WWDC 2021.

00:02:26.000 --> 00:02:35.000
Mặc dù bạn có thể lên lịch quảng cáo theo dòng thời gian của nội dung, nhưng năm nay chúng tôi đã thêm các thuộc tính buộc vị trí của quảng cáo bắt đầu hoặc cuối quá trình phát lại.

00:02:35.000 --> 00:02:41.000
Đối với điều đó, chúng tôi đã thêm các tùy chọn gợi ý mới sau đây mà bạn có thể chỉ định bằng cách sử dụng thuộc tính CUE.

00:02:41.000 --> 00:02:46.000
Thuộc tính này có thể đảm nhận một hoặc kết hợp các giá trị sau.

00:02:46.000 --> 00:02:51.000
Giá trị của PRE sẽ làm cho quảng cáo xuất hiện trước khi việc trình bày nội dung chính bắt đầu.

00:02:51.000 --> 00:02:58.000
Điều này đặc biệt hữu ích trong các tình huống trực tiếp mà bạn muốn lên lịch một vị trí quảng cáo cao cấp trước khi điều chỉnh chương trình.

00:02:58.000 --> 00:03:03.000
Giá trị của POST sẽ chỉ ra rằng quảng cáo sẽ xuất hiện sau khi trình bày nội dung chính của bạn.

00:03:03.000 --> 00:03:09.000
Điều này có thể hữu ích cho các luồng sự kiện mà bạn muốn lên lịch tín dụng cuối cùng, chẳng hạn như khi kết thúc một sự kiện trực tiếp.

00:03:09.000 --> 00:03:13.000
Và giá trị của ONCE sẽ làm cho quảng cáo chỉ xuất hiện một lần.

00:03:13.000 --> 00:03:18.000
Vì vậy, nếu người dùng tìm kiếm lại trước quảng cáo, họ sẽ không còn thấy quảng cáo phát lại nữa.

00:03:18.000 --> 00:03:25.000
Một ứng dụng tuyệt vời của điều này sẽ dành cho các màn hình xếp hạng thường chỉ hiển thị một lần khi bắt đầu phát lại.

00:03:25.000 --> 00:03:31.000
Điều này cho thấy một ví dụ danh sách phát nơi bạn có quảng cáo được lên lịch dưới dạng cuộn trước và sau.

00:03:31.000 --> 00:03:34.000
Lưu ý rằng preroll được lên lịch chỉ chơi một lần.

00:03:34.000 --> 00:03:40.000
Và chúng tôi cũng có một quảng cáo được lên lịch để phát lại một lần vào khoảng 10 giây để phát lại.

00:03:40.000 --> 00:03:45.000
Giờ đây, việc lên lịch quảng cáo trong các tình huống trực tiếp đi kèm với những thách thức riêng.

00:03:45.000 --> 00:03:56.000
Ví dụ, người đóng gói của bạn có thể đang sử dụng một đồng hồ để đặt thẻ ngày giờ chương trình trong danh sách phát trong khi bộ mã hóa đang sản xuất phương tiện được điều khiển bởi một đồng hồ khác.

00:03:56.000 --> 00:03:59.000
Bây giờ, hai chiếc đồng hồ này không nhất thiết phải đồng bộ.

00:03:59.000 --> 00:04:09.000
Ví dụ, trong ví dụ này, sự khác biệt trong các thẻ ngày giờ được liên kết với phân đoạn 0 và phân đoạn 100 là khoảng 800 giây.

00:04:09.000 --> 00:04:17.000
Tuy nhiên, thời lượng phương tiện tích lũy sẽ ít hơn một chút vì thời lượng phân đoạn riêng lẻ dưới tám giây.

00:04:17.000 --> 00:04:27.000
Trong những tình huống như vậy mà đồng hồ đóng gói của bạn nhanh hơn một chút so với đồng hồ mã hóa, thời gian truyền thông thực tế nơi quảng cáo bắt đầu có thể rơi vào đâu đó bên trong bảng xếp hạng.

00:04:27.000 --> 00:04:37.000
Và nếu bạn dự kiến sẽ tham gia lại nội dung chính ở mức bù bằng với thời lượng quảng cáo như được hiển thị ở đây, bạn thực sự sẽ bỏ lỡ một số nội dung chính theo sau bảng xếp hạng.

00:04:37.000 --> 00:04:46.000
Bây giờ bạn có thể sử dụng thuộc tính SNAP với giá trị OUT để thoát ra khỏi nội dung chính ở ranh giới phân đoạn gần nhất với thời gian bắt đầu quảng cáo dự định.

00:04:46.000 --> 00:04:54.000
Và tương tự như vậy, sử dụng thuộc tính SNAP với giá trị IN để chụp lại nội dung chính gần nhất với thời gian trả về quảng cáo.

00:04:54.000 --> 00:05:04.000
Lưu ý rằng chúng tôi hy vọng bạn chỉ sử dụng các thuộc tính SNAP cho các tình huống trực tiếp, vì khái niệm trôi đồng hồ này không nên tồn tại khi xử lý nội dung video được đóng gói sẵn theo yêu cầu.

00:05:04.000 --> 00:05:10.000
Ở đây chúng ta thấy một danh sách phát trực tiếp nơi quảng cáo được lên lịch cho cả snap-out và snap-in.

00:05:10.000 --> 00:05:18.000
Năm nay, chúng tôi cũng đã thêm một số thông số truy vấn sẽ giúp bạn tối ưu hóa khoảng không quảng cáo cũng như quản lý phiên.

00:05:18.000 --> 00:05:29.000
Bây giờ, khi bạn đang điều chỉnh luồng trực tiếp ở giữa nhóm quảng cáo, bạn sẽ muốn biết nhóm quảng cáo đó đã tiến triển bao xa để bạn có thể hiển thị khoảng không quảng cáo có giá trị nhất của mình trong thời gian còn lại.

00:05:29.000 --> 00:05:33.000
Đối với điều đó, chúng tôi đã thêm tham số truy vấn HLS_start_offset.

00:05:33.000 --> 00:05:39.000
Tham số truy vấn HLS_start_offset sẽ được cung cấp cùng với yêu cầu URL danh sách tài sản của quảng cáo xen kẽ.

00:05:39.000 --> 00:05:54.000
Đối với nội dung trực tiếp, điều này sẽ chỉ định độ lệch vào danh sách Tài sản nơi việc phát lại sẽ bắt đầu khi tham gia luồng trực tiếp và đối với nội dung video theo yêu cầu, nó sẽ là phần bù vào danh sách Tài sản khi tìm kiếm vào một khu vực được thay thế bằng quảng cáo xen kẽ.

00:05:54.000 --> 00:06:01.000
Trong mẫu này, chúng tôi có một danh sách phát trực tiếp với quảng cáo 15 giây được lên lịch để bắt đầu lúc 5 giây từ đầu danh sách phát.

00:06:01.000 --> 00:06:05.000
Các phân đoạn được đánh dấu được hiển thị ở đây sẽ được thay thế bằng quảng cáo xen kẽ.

00:06:05.000 --> 00:06:10.000
Bây giờ trong quá trình tham gia trực tiếp, khách hàng thường sẽ có khoảng 3 khoảng thời lượng mục tiêu sau cạnh trực tiếp.

00:06:10.000 --> 00:06:15.000
Tại thời điểm đó, nhóm quảng cáo 15 giây được lên lịch sẽ diễn ra trong 10 giây.

00:06:15.000 --> 00:06:20.000
Vì vậy, điều này được cung cấp như một phần của tham số truy vấn HLS_start_offset.

00:06:20.000 --> 00:06:30.000
Bây giờ khách hàng chỉ còn 5 giây thời gian quảng cáo, máy chủ có thể xây dựng danh sách Tài sản sao cho nó đặt quảng cáo có giá trị nhất của mình trong 5 giây cuối cùng của danh sách đó.

00:06:30.000 --> 00:06:40.000
Tại máy chủ của bạn, bạn có thể cần một cách để theo dõi cùng một phiên phát lại trên nhiều yêu cầu quảng cáo để bạn có thể tránh phân phát đi lặp lại cùng một quảng cáo cho ai đó.

00:06:40.000 --> 00:06:47.000
Vì vậy, để liên kết các yêu cầu quảng cáo với các phiên phát lại chính, chúng tôi đã thêm tham số truy vấn HLS_primary_id.

00:06:47.000 --> 00:07:02.000
Nếu khách hàng đặt tiêu đề yêu cầu id phiên phát lại cho tất cả các yêu cầu http của một phiên phát lại cụ thể, họ có thể cung cấp ID phiên này như một phần của tham số truy vấn HLS_primary_id cho các yêu cầu X-Asset-URI và X-Asset-List.

00:07:02.000 --> 00:07:15.000
Khách hàng không đặt tiêu đề yêu cầu id phiên nên tạo một giá trị duy nhất cho mỗi phiên phát lại chính và sử dụng nó làm tham số truy vấn HLS_primary_id cho cả yêu cầu nội dung chính và xen kẽ.

00:07:15.000 --> 00:07:26.000
Bạn có thể nhớ lại rằng AVFoundation cung cấp các đối tượng AVPlayerInterstitialController và AVPlayerInterstitialEvent cho phép bạn lên lịch quảng cáo ở phía máy khách.

00:07:26.000 --> 00:07:32.000
Bây giờ chúng tôi cũng đã thêm hỗ trợ cho các tùy chọn gợi ý và SNAP cho đối tượng AVPlayerInterstitialEvent.

00:07:32.000 --> 00:07:38.000
Bạn có thể chỉ định các tùy chọn gợi ý, cho dù bạn muốn quảng cáo được lên lịch dưới dạng cuộn trước hay cuộn bài đăng, thông qua thuộc tính Cue.

00:07:38.000 --> 00:07:46.000
Tùy chọn phát một lần được báo hiệu thông qua thuộc tính Cue trong thẻ DATERANGE được đặt dưới dạng Boolean thông qua thuộc tính willPlayOnce.

00:07:46.000 --> 00:07:58.000
Tùy chọn để chụp ra được báo hiệu thông qua thuộc tính alignsStartWithPrimarySegmentBoundary và để chụp vào, bạn sẽ đặt thuộc tính alignsResumptionWithPrimarySegmentBoundary.

00:07:58.000 --> 00:08:06.000
Khi AVPlayerInterstitialEvent tiếp tục phát triển, chúng tôi nghĩ rằng có thể tốt hơn là tách cài đặt của các thuộc tính khỏi việc tạo đối tượng.

00:08:06.000 --> 00:08:10.000
Vì vậy, bây giờ chúng tôi đã làm cho đối tượng AVPlayerInterstitialEvent có thể thay đổi được.

00:08:10.000 --> 00:08:14.000
Bây giờ bạn có thể tạo đối tượng chỉ với mục chính và thời gian bắt đầu của sự kiện.

00:08:14.000 --> 00:08:19.000
Và sau đó bạn có thể chỉ định các tùy chọn cấu hình khác nhau bằng cách đặt các thuộc tính có liên quan.

00:08:19.000 --> 00:08:29.000
Lưu ý rằng một khi sự kiện được đặt trên bộ điều khiển, mọi thay đổi tiếp theo đối với đối tượng sự kiện sẽ không được phản ánh tại bộ điều khiển, vì bộ điều khiển tạo một bản sao của các đối tượng này.

00:08:29.000 --> 00:08:34.000
Để các thay đổi có hiệu lực, bạn phải đặt sự kiện một lần nữa trên bộ điều khiển.

00:08:34.000 --> 00:08:40.000
Để kết thúc, bây giờ bạn có thể lên lịch quảng cáo của mình dưới dạng cuộn trước hoặc sau bằng cách sử dụng thuộc tính X-CUE.

00:08:40.000 --> 00:08:45.000
Bạn cũng có thể buộc quảng cáo của mình chỉ phát một lần bằng cách đặt X-CUE thành một lần.

00:08:45.000 --> 00:08:50.000
Để quản lý độ lệch đồng hồ trong các tình huống trực tiếp, bạn sẽ sử dụng thuộc tính X-SNAP.

00:08:50.000 --> 00:09:02.000
Để xây dựng danh sách nội dung của bạn trong quá trình tham gia trực tiếp, bạn có thể sử dụng tham số truy vấn HLS_start_offset và bạn sẽ sử dụng tham số truy vấn HLS_primary_id để liên kết các yêu cầu xen kẽ với các phiên phát lại chính.

00:09:02.000 --> 00:09:11.000
Bạn có biết rằng nếu bạn sử dụng quảng cáo xen kẽ HLS để lên lịch quảng cáo, AVFoundation sẽ tự động quản lý chúng khi ở Shareplay không?

00:09:11.000 --> 00:09:16.000
Để biết thêm thông tin, hãy xem cuộc nói chuyện "Hiển thị quảng cáo và các quảng cáo xen kẽ khác trong SharePlay".

00:09:16.000 --> 23:59:59.000
Đó là nó cho tôi, các bạn. Cảm ơn bạn.

