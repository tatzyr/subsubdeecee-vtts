WEBVTT

00:00:00.000 --> 00:00:02.000
♪ Nhạc hip-hop nhạc cụ êm dịu ♪

00:00:02.000 --> 00:00:09.000
♪

00:00:09.000 --> 00:00:14.000
Miranda Zhou: Xin chào, tên tôi là Miranda và tôi là một kỹ sư trong nhóm Chia sẻ.

00:00:14.000 --> 00:00:18.000
Elana Stettin: Tôi là Elana và tôi là một kỹ sư trong nhóm Tin nhắn.

00:00:18.000 --> 00:00:26.000
Miranda: Trong video này, Elana và tôi sẽ đi sâu vào cách tăng cường cộng tác với Tin nhắn trong ứng dụng của bạn.

00:00:26.000 --> 00:00:31.000
Tôi sẽ bắt đầu với phần giới thiệu về tính năng này là gì.

00:00:31.000 --> 00:00:42.000
Bạn sẽ học cách chuẩn bị để áp dụng tính năng này và cách gắn Tin nhắn vào quy trình để bắt đầu cộng tác.

00:00:42.000 --> 00:00:56.000
Elana sẽ giải thích cách thêm cộng tác với giao diện người dùng tin nhắn vào ứng dụng của bạn và cuối cùng cô ấy sẽ thảo luận về cách cập nhật khi cộng tác được cập nhật.

00:00:56.000 --> 00:01:02.000
Đầu tiên, hãy để tôi giới thiệu sự hợp tác với Messages!

00:01:02.000 --> 00:01:13.000
Trong iOS 16 và macOS Ventura, chúng tôi đã thêm một cách mới và dễ dàng để cải thiện giao tiếp giữa những người đang cộng tác.

00:01:13.000 --> 00:01:21.000
Cộng tác viên có thể liên kết tài liệu với các cuộc hội thoại bằng cách chia sẻ qua Tin nhắn.

00:01:21.000 --> 00:01:31.000
Hoạt động cộng tác xuất hiện trong các cuộc trò chuyện Tin nhắn và trong các cuộc gọi FaceTime đang diễn ra.

00:01:31.000 --> 00:01:44.000
Cửa sổ bật lên Cộng tác có thể tùy chỉnh cũng được cung cấp cho ứng dụng của bạn để quản lý chi tiết về sự cộng tác và kết nối với cuộc trò chuyện Tin nhắn.

00:01:44.000 --> 00:01:52.000
Điều này được xây dựng dựa trên các công nghệ mà bạn đang sử dụng, chẳng hạn như bảng chia sẻ và kéo và thả.

00:01:52.000 --> 00:02:02.000
Tiếp theo, tôi sẽ xem xét các loại cơ sở hạ tầng cộng tác mà chúng tôi hỗ trợ và cách liên kết từng loại đó với cộng tác Tin nhắn.

00:02:02.000 --> 00:02:15.000
Chúng tôi hỗ trợ ba loại cơ sở hạ tầng cộng tác: CloudKit, iCloud Drive và bất kỳ cơ sở hạ tầng cộng tác tùy chỉnh nào bạn có thể đang sử dụng ngày hôm nay!

00:02:15.000 --> 00:02:22.000
Trong video này, tôi sẽ chủ yếu tập trung vào các trường hợp CloudKit và iCloud Drive.

00:02:22.000 --> 00:02:33.000
Nếu bạn đang sử dụng cơ sở hạ tầng tùy chỉnh, hãy xem video "Tích hợp ứng dụng cộng tác tùy chỉnh của bạn với Tin nhắn" để biết thêm chi tiết.

00:02:33.000 --> 00:02:44.000
Nếu bạn sử dụng cộng tác dựa trên CloudKit, chúng tôi đã cung cấp một API mới để tạo một đối tượng mà hệ thống có thể nhận ra để cộng tác.

00:02:44.000 --> 00:02:52.000
Điều này dựa trên macOS Sierra API để bắt đầu hoặc quản lý chia sẻ với NSSharingService.

00:02:52.000 --> 00:03:02.000
Khi bạn có đối tượng cộng tác, hãy xác định vị trí trong ứng dụng bạn đang hiển thị giao diện người dùng để bắt đầu hoặc quản lý chia sẻ.

00:03:02.000 --> 00:03:13.000
Bạn cần cập nhật lên API mới để tăng cường sự hợp tác của mình với Messages, vì chúng tôi sẽ phản đối API AppKit hiện có.

00:03:13.000 --> 00:03:19.000
API đối tượng cộng tác mới sử dụng NSItemProvider.

00:03:19.000 --> 00:03:28.000
NSItemProvider được sử dụng bởi các dịch vụ hệ thống để vận chuyển dữ liệu ứng dụng của bạn đến các quy trình khác trên hệ thống.

00:03:28.000 --> 00:03:39.000
Nhà cung cấp yêu cầu CKShare cho mục cộng tác hoặc trình xử lý chuẩn bị để tạo CKShare khi bắt đầu cộng tác.

00:03:39.000 --> 00:03:43.000
CKContainer của ứng dụng của bạn cũng được yêu cầu.

00:03:43.000 --> 00:03:54.000
Và cuối cùng, cung cấp một đối tượng CKAllowedSharingOptions đại diện cho các tùy chọn truy cập và quyền cho sự cộng tác.

00:03:54.000 --> 00:04:08.000
Các giá trị của các tùy chọn giống như NSCloudKitSharingServiceOptions đã được yêu cầu trước đó từ các phương thức NSCloudSharingServiceDelegate.

00:04:08.000 --> 00:04:15.000
Đây là tổng quan ngắn gọn về việc tạo ra một đối tượng cộng tác CloudKit trông như thế nào.

00:04:15.000 --> 00:04:28.000
Nếu sự hợp tác đang được bắt đầu và bạn vượt qua trình xử lý chuẩn bị, bạn cần vừa tạo chia sẻ vừa lưu nó vào máy chủ trong trình xử lý.

00:04:28.000 --> 00:04:35.000
Nếu nó đã bắt đầu, chỉ cần chuyển phần chia sẻ được liên kết.

00:04:35.000 --> 00:04:46.000
Phiên bản CKAllowedSharingOptions đang được đăng ký đang sử dụng thuộc tính tiêu chuẩn tĩnh trả về tập hợp mặc định của các tùy chọn được phép.

00:04:46.000 --> 00:04:57.000
Những người chấp nhận CloudKit có thể sử dụng điều đó hoặc tạo một phiên bản tùy chỉnh của lớp cho một tập hợp các tùy chọn được phép bị hạn chế.

00:04:57.000 --> 00:05:09.000
Đối với những người bạn có thể quan tâm đến việc áp dụng CloudKit, CloudKit cho phép bạn sử dụng iCloud làm cơ sở dữ liệu ứng dụng của mình mà không cần viết mã máy chủ của riêng bạn.

00:05:09.000 --> 00:05:15.000
Bạn cũng sẽ nhận được một phương pháp tích hợp để chia sẻ các phần của dữ liệu đó với những người dùng iCloud khác.

00:05:15.000 --> 00:05:22.000
Để biết thêm chi tiết, hãy xem video "Có gì mới trong CloudKit".

00:05:22.000 --> 00:05:33.000
Nếu bạn đang sử dụng iCloud Drive, đối tượng cộng tác của bạn chỉ đơn giản là URL tệp của bạn - chúng tôi sẽ làm tất cả công việc để nhận ra nó!

00:05:33.000 --> 00:05:46.000
Khi bạn có điều đó, hãy xác định các điểm vào để bắt đầu hoặc quản lý cộng tác trong ứng dụng của bạn và chuẩn bị thay thế chúng bằng các phiên bản mới và cải tiến.

00:05:46.000 --> 00:05:59.000
Đối với cơ sở hạ tầng cộng tác tùy chỉnh, đối tượng cộng tác của bạn được gọi là SWCollaborationMetadata, được gói trong API NSItemProvider mới.

00:05:59.000 --> 00:06:10.000
Xem video "Tích hợp ứng dụng cộng tác tùy chỉnh của bạn với Tin nhắn" để biết chi tiết về cách sử dụng API này để cập nhật giao diện người dùng cộng tác của bạn.

00:06:10.000 --> 00:06:13.000
Bây giờ bạn đã sẵn sàng để đi.

00:06:13.000 --> 00:06:16.000
Tiếp theo, bắt đầu một sự hợp tác.

00:06:16.000 --> 00:06:31.000
Có hai cách khác nhau: thông qua bảng chia sẻ ở chế độ cộng tác mới và thông qua kéo và thả vào Tin nhắn, từ ứng dụng của bạn hoặc từ ứng dụng Tệp trên iOS và Finder trên macOS.

00:06:31.000 --> 00:06:44.000
Chế độ cộng tác bảng chia sẻ mới có thể được xác định bằng một chỉ báo trong tiêu đề, chế độ này cũng cung cấp sự lựa chọn giữa cộng tác và gửi bản sao.

00:06:44.000 --> 00:06:54.000
Để có sự cộng tác trong bảng chia sẻ, hãy cung cấp cho bảng chia sẻ đối tượng cộng tác mà bạn đã chuẩn bị trước đó.

00:06:54.000 --> 00:07:01.000
Trên macOS, chỉ báo cộng tác này được hiển thị trong một cửa sổ bật lên chia sẻ mới tuyệt đẹp!

00:07:01.000 --> 00:07:13.000
Cửa sổ bật lên chia sẻ cũng bao gồm tiêu đề và hình ảnh trong tiêu đề, cộng với một hàng đề xuất cuộc trò chuyện và tất cả các phương tiện vận chuyển mà chúng tôi đã cung cấp.

00:07:13.000 --> 00:07:20.000
Để biết thêm chi tiết về điều này, hãy xem video WWDC22 "Có gì mới trong AppKit".

00:07:20.000 --> 00:07:28.000
Trên iOS và Mac Catalyst, hiển thị bảng chia sẻ bằng cách sử dụng lớp UIActivityViewController.

00:07:28.000 --> 00:07:36.000
Trên macOS, hiển thị cửa sổ bật lên chia sẻ bằng NSSharingServicePicker.

00:07:36.000 --> 00:07:47.000
Chuyển đối tượng cộng tác sang UIActivityViewController dưới dạng một mục hoạt động để trình bày nó với sự cộng tác được bật.

00:07:47.000 --> 00:07:57.000
Và tương tự, khởi tạo NSSharingServicePicker với đối tượng cộng tác để hiển thị nó với sự cộng tác được bật.

00:07:57.000 --> 00:08:06.000
Những người chấp nhận CloudKit sẽ cần thực hiện thêm một bước để cung cấp tiêu đề và hình ảnh cho các tiêu đề.

00:08:06.000 --> 00:08:23.000
Trên iOS, sử dụng API hiện có như UIActivityItemsConfiguration hoặc UIActivityItemSource để cung cấp đối tượng LPLinkMetadata với tiêu đề và imageProvider.

00:08:23.000 --> 00:08:38.000
Tạo cấu hình của bạn với đối tượng cộng tác của bạn, sau đó đặt nhà cung cấp siêu dữ liệu để trả lại đối tượng LPLinkMetadata của bạn cho mục đang được chia sẻ.

00:08:38.000 --> 00:08:45.000
Cuối cùng, khởi tạo UIActivityViewController với cấu hình đó.

00:08:45.000 --> 00:08:55.000
Trên macOS, chúng tôi có một API mới được gọi là NSPreviewRepresenting ActivityItem để cung cấp siêu dữ liệu tiêu đề.

00:08:55.000 --> 00:09:04.000
Tham khảo tài liệu NSPreviewRepresenting ActivityItem để biết thêm chi tiết.

00:09:04.000 --> 00:09:12.000
Để sử dụng NSPreviewRepresenting ActivityItem, trước tiên hãy chọn tiêu đề, hình ảnh và biểu tượng của bạn.

00:09:12.000 --> 00:09:24.000
Hình ảnh đại diện cho mục đang được chia sẻ, trong khi biểu tượng đại diện cho nguồn của mục đang được chia sẻ - ví dụ: biểu tượng ứng dụng.

00:09:24.000 --> 00:09:41.000
Tạo một NSPreviewRepresenting ActivityItem với đối tượng cộng tác, tiêu đề, hình ảnh và biểu tượng của bạn và khởi tạo NSSharingServicePicker với mục xem trước đó.

00:09:41.000 --> 00:09:50.000
Trên một lưu ý thú vị, SwiftUI ShareLink API mới cho bảng chia sẻ cũng sẽ hỗ trợ chế độ cộng tác!

00:09:50.000 --> 00:10:00.000
Để áp dụng, mục bạn đang chia sẻ phải được đại diện bởi Transferable, một giao thức mới để chia sẻ và truyền dữ liệu.

00:10:00.000 --> 00:10:11.000
Những người chấp nhận CloudKit cung cấp chia sẻ, vùng chứa và các tùy chọn thông qua CKShareTransferRepresentation được trả về bởi mục Có thể chuyển nhượng của bạn.

00:10:11.000 --> 00:10:22.000
Để biết thêm chi tiết, hãy xem các video "Gặp gỡ có thể chuyển nhượng" và WWDC22 "Có gì mới trong SwiftUI".

00:10:22.000 --> 00:10:32.000
Đây là một ví dụ về cách một người chấp nhận CloudKit như Notes sẽ tạo ra một đối tượng có thể chuyển nhượng để chia sẻ với ShareLink.

00:10:32.000 --> 00:11:06.000
Ghi chú cung cấp CKShareTransferRepresentation, được xây dựng dưới dạng giá trị hiện có của nó với giá trị CKShare, CKContainer và CKAllowedSharingOptions hiện có hoặc dưới dạng giá trị prepareShare của nó với giá trị CKContainer, CKAllowedSharingOptions và trình xử lý chuẩn bị để

00:11:06.000 --> 00:11:15.000
Đối với những người chấp nhận iCloud Drive, URL tệp của bạn là đối tượng Có thể chuyển mà bạn chia sẻ thông qua ShareLink.

00:11:15.000 --> 00:11:33.000
Nếu bạn có cơ sở hạ tầng cộng tác tùy chỉnh, hãy xem video "Tích hợp ứng dụng cộng tác tùy chỉnh của bạn với Tin nhắn" để biết cách trả lại đối tượng SWCollaborationMetadata từ đối tượng có thể chuyển nhượng của bạn.

00:11:33.000 --> 00:11:41.000
Khi bạn có đối tượng Có thể chuyển nhượng của mình, hãy chuyển nó đến trình khởi tạo ShareLink làm mục cần chia sẻ.

00:11:41.000 --> 00:11:50.000
Đồng thời, chuyển bản xem trước với tiêu đề và hình ảnh để điền vào tiêu đề bảng chia sẻ.

00:11:50.000 --> 00:11:59.000
Một tính năng đáng chú ý của tiêu đề chế độ cộng tác bảng chia sẻ là tóm tắt các tùy chọn truy cập và quyền.

00:11:59.000 --> 00:12:11.000
Nhấn vào bản tóm tắt này sẽ hiển thị chế độ xem nơi các cộng tác viên chọn các tùy chọn truy cập và quyền để sử dụng khi cộng tác.

00:12:11.000 --> 00:12:19.000
Đối với những người chấp nhận CloudKit, chế độ xem này hiển thị tập hợp các tùy chọn đã đăng ký trong đối tượng cộng tác.

00:12:19.000 --> 00:12:25.000
Những người áp dụng iCloud Drive hiển thị bộ tùy chọn iCloud Drive tiêu chuẩn.

00:12:25.000 --> 00:12:41.000
Nếu bạn có cơ sở hạ tầng tùy chỉnh, hãy xem video "Tích hợp ứng dụng cộng tác tùy chỉnh của bạn với Tin nhắn" để biết cách chỉ định các tùy chọn tùy chỉnh của bạn và hiển thị chúng trong chế độ xem này.

00:12:41.000 --> 00:12:46.000
Có một cách nữa để bắt đầu cộng tác, và đó là thông qua kéo và thả.

00:12:46.000 --> 00:12:57.000
Một cộng tác viên có thể chỉ cần kéo tài liệu của bạn vào Tin nhắn và nhận liên kết phong phú hỗ trợ cộng tác mới cho tài liệu trong Tin nhắn.

00:12:57.000 --> 00:13:08.000
Liên kết phong phú này cung cấp chức năng cho cả cộng tác và gửi bản sao, và để chọn các tùy chọn cộng tác.

00:13:08.000 --> 00:13:18.000
Để áp dụng, hãy cung cấp đối tượng cộng tác của bạn thông qua ShareLink trên iOS 16 và macOS Ventura.

00:13:18.000 --> 00:13:24.000
Và đó là cách bạn chuẩn bị và bắt đầu hợp tác với Messages.

00:13:24.000 --> 00:13:32.000
Tiếp theo, tôi sẽ giao nó cho Elana, người sẽ nói về việc đưa trải nghiệm cộng tác của ứng dụng của bạn lên một tầm cao mới.

00:13:32.000 --> 00:13:34.000
Elana: Cảm ơn, Miranda!

00:13:34.000 --> 00:13:42.000
Bây giờ bạn đã biết cách bắt đầu, tôi sẽ nói về cách tích hợp hơn nữa giao diện người dùng cộng tác của chúng tôi vào ứng dụng của bạn.

00:13:42.000 --> 00:13:47.000
Chúng tôi đã thêm các tính năng mới này để khuếch đại trải nghiệm cộng tác.

00:13:47.000 --> 00:13:54.000
Nút cộng tác được đặt trong điều hướng ứng dụng của bạn và sẽ hiển thị ảnh nhóm của nhóm tin nhắn được liên kết.

00:13:54.000 --> 00:14:02.000
Ngoài ra còn có một số lượng người tham gia đang hoạt động ở bên phải của nút sẽ hiển thị khi những người khác có mặt trong tài liệu.

00:14:02.000 --> 00:14:08.000
Khi bạn nhấn vào nút cộng tác, cửa sổ bật lên cộng tác mới sẽ xuất hiện.

00:14:08.000 --> 00:14:12.000
Cửa sổ bật lên có thể tùy chỉnh hiển thị tổng quan về sự hợp tác.

00:14:12.000 --> 00:14:18.000
Nó cũng cho phép người dùng bắt đầu giao tiếp với những người tham gia khác chỉ với một cú chạm.

00:14:18.000 --> 00:14:26.000
Điều này cung cấp cho họ khả năng làm việc cùng nhau trong thời gian thực thông qua Tin nhắn và FaceTime.

00:14:26.000 --> 00:14:34.000
Các yếu tố giao diện người dùng này đều được cung cấp bởi một lớp duy nhất trong khung SharedWithYou: SWCollaborationView.

00:14:34.000 --> 00:14:38.000
Chế độ xem này đại diện cho chế độ xem nút trong điều hướng.

00:14:38.000 --> 00:14:46.000
Tất cả những gì bạn cần làm là khởi tạo SWCollaborationView và chúng tôi sẽ lo bố cục cửa sổ bật lên và bản trình bày cho bạn.

00:14:46.000 --> 00:14:52.000
Để hiển thị nội dung tùy chỉnh, bạn sẽ cung cấp chế độ xem sẽ được thêm vào cửa sổ bật lên.

00:14:52.000 --> 00:14:58.000
Bây giờ, tôi sẽ xem qua mã để tạo SWCollaborationView.

00:14:58.000 --> 00:15:03.000
Khởi tạo SWCollaborationView với itemProvider.

00:15:03.000 --> 00:15:18.000
ItemProvider chứa CKShare cho các ứng dụng dựa trên CloudKit, fileURL cho các ứng dụng dựa trên iCloud Drive hoặc siêu dữ liệu SW Collaboration cho cơ sở hạ tầng cộng tác tùy chỉnh.

00:15:18.000 --> 00:15:27.000
Đặt thuộc tính activeParticipantCount trên chế độ xem cộng tác để hiển thị số lượng người tham gia đang hoạt động trên tài liệu.

00:15:27.000 --> 00:15:35.000
Sau đó đặt thuộc tính contentView trên collaborationView để cung cấp cửa sổ bật lên với nội dung tùy chỉnh.

00:15:35.000 --> 00:15:39.000
Chế độ xem nội dung là thứ làm cho cửa sổ bật lên hoàn toàn có thể tùy chỉnh.

00:15:39.000 --> 00:15:47.000
Đây là nơi bạn sẽ thêm nội dung của riêng mình để cung cấp cho người dùng cái nhìn độc đáo về những gì đang diễn ra trong quá trình cộng tác.

00:15:47.000 --> 00:15:55.000
Ví dụ: trong Pages, ContentView chứa danh sách Người tham gia hiện tại và chuyển đổi Con trỏ người tham gia.

00:15:55.000 --> 00:15:58.000
Bây giờ, hãy nhìn vào nút "quản lý".

00:15:58.000 --> 00:16:08.000
Đối với những người áp dụng CloudKit và iCloud Drive, nút quản lý này sẽ hiển thị giao diện người dùng quản lý, nơi bạn có thể thêm và xóa người tham gia hoặc thay đổi cài đặt chia sẻ.

00:16:08.000 --> 00:16:12.000
Tôi sẽ sớm nói nhiều hơn về điều này.

00:16:12.000 --> 00:16:19.000
Tùy chỉnh tiêu đề nút được cung cấp bằng cách đặt thuộc tính manageButtonTitle trên chế độ xem cộng tác.

00:16:19.000 --> 00:16:24.000
Nếu bạn không đặt thuộc tính này, tiêu đề sẽ mặc định là "Quản lý Chia sẻ".

00:16:24.000 --> 00:16:31.000
Nếu ứng dụng của bạn sử dụng cơ sở hạ tầng cộng tác tùy chỉnh, hãy bao gồm nút quản lý của riêng bạn trong Chế độ xem nội dung.

00:16:31.000 --> 00:16:34.000
Một cái sẽ không được cung cấp cho bạn.

00:16:34.000 --> 00:16:43.000
Trên Mac, hãy đảm bảo nút có nền trong suốt để tuân thủ các đề xuất thiết kế của Apple.

00:16:43.000 --> 00:16:51.000
Cuối cùng, tạo một UIBarButtonItem trên iOS như được hiển thị ở đây, sử dụng chế độ xem cộng tác làm chế độ xem tùy chỉnh.

00:16:51.000 --> 00:16:57.000
Trên Mac, khởi tạo NSToolbarItem bằng UIBarButtonItem.

00:16:57.000 --> 00:17:04.000
Sau đó, thêm mục nút thanh hoặc mục thanh công cụ vào Mục điều hướng của ViewController.

00:17:04.000 --> 00:17:12.000
Như tôi đã đề cập trước đó, những người chấp nhận CloudKit và iCloud Drive được cung cấp một nút trong cửa sổ bật lên cộng tác.

00:17:12.000 --> 00:17:17.000
Điều này cho phép bạn quản lý chia sẻ giống như cách bạn luôn có thể.

00:17:17.000 --> 00:17:30.000
Những thay đổi trong giao diện người dùng quản lý được cung cấp có thể quan sát được bằng cách tuân thủ các giao thức đại diện tương tự đã được sử dụng để quan sát các thay đổi: UICloudSharing ControllerDelegate và NSCloudSharing ServiceDelegate.

00:17:30.000 --> 00:17:38.000
Bây giờ bạn đã hiểu cách tích hợp giao diện người dùng cộng tác mới vào ứng dụng của mình.

00:17:38.000 --> 00:17:44.000
Tiếp theo, tôi sẽ xem xét cách quan sát và xử lý các cập nhật cho sự hợp tác.

00:17:44.000 --> 00:17:48.000
Điều quan trọng là phải biết khi nào một cổ phiếu bắt đầu hoặc dừng lại.

00:17:48.000 --> 00:17:58.000
Đối với những người chấp nhận CloudKit, chúng tôi đã thêm một giao thức mới gọi là CKSystemSharing UIObserver để thông báo cho bạn về điều đó.

00:17:58.000 --> 00:18:07.000
Với giao thức này, bạn nhận được các cuộc gọi lại tương ứng với khi CKShare của bạn được lưu hoặc xóa mà không cần giao diện người dùng chia sẻ CloudKit.

00:18:07.000 --> 00:18:11.000
Tôi sẽ đưa bạn qua một số mã ngay bây giờ.

00:18:11.000 --> 00:18:17.000
Khởi tạo một người quan sát bằng cách sử dụng CKContainer.

00:18:17.000 --> 00:18:28.000
Trên người quan sát, xác định một đóng sẽ được thực thi khi CKShare được lưu và gán nó cho systemSharingUI DidSaveShareBlock.

00:18:28.000 --> 00:18:39.000
Trong phần đóng, nếu Chia sẻ được lưu chính xác, bạn sẽ nhận được kết quả thành công - cho biết chia sẻ đã được bắt đầu - và một CKShare liên quan để làm việc.

00:18:39.000 --> 00:18:47.000
Nếu lưu không thành công, bạn sẽ nhận được kết quả thất bại và lỗi liên quan.

00:18:47.000 --> 00:18:53.000
Đây là việc thực hiện việc đóng cửa khi chủ sở hữu tài liệu ngừng chia sẻ.

00:18:53.000 --> 00:18:59.000
Trong trường hợp thành công, CKShare đã bị xóa thành công.

00:18:59.000 --> 00:19:05.000
Trong trường hợp thất bại, bạn cũng sẽ gặp lỗi liên quan.

00:19:05.000 --> 00:19:09.000
Bắt đầu và dừng cổ phiếu không phải là những thay đổi duy nhất bạn có thể quan tâm.

00:19:09.000 --> 00:19:14.000
Một số thay đổi, bạn thậm chí có thể muốn nổi lên với người dùng.

00:19:14.000 --> 00:19:23.000
Chúng tôi đã thêm API để cho phép bạn đăng thông báo tóm tắt các cập nhật cho một cộng tác, ngay ở đầu chuỗi Tin nhắn có liên quan.

00:19:23.000 --> 00:19:30.000
Các cộng tác viên được hiển thị bản cập nhật là gì và ai đã thực hiện thay đổi.

00:19:30.000 --> 00:19:39.000
Để đăng thông báo, hãy truy xuất SWCollaborationHighlight, đây là loại điểm nổi bật dành riêng cho cộng tác trong Chia sẻ với bạn.

00:19:39.000 --> 00:19:43.000
Sử dụng nó để tạo ra một sự kiện SWCollaborationHighlight.

00:19:43.000 --> 00:19:51.000
Tìm hiểu thêm về SWHighlights và các API SharedWithYou khác trong video "Thêm chia sẻ với bạn vào ứng dụng của bạn".

00:19:51.000 --> 00:19:57.000
Xem video này trước khi bắt đầu công việc của bạn để thông qua các thông báo.

00:19:57.000 --> 00:20:02.000
Tôi sẽ nói qua việc đăng các thông báo khác nhau bằng cách sử dụng ứng dụng CloudKit làm ví dụ.

00:20:02.000 --> 00:20:12.000
Nếu ứng dụng của bạn sử dụng cơ sở hạ tầng cộng tác tùy chỉnh, hãy xem video "Tích hợp ứng dụng cộng tác tùy chỉnh của bạn với Tin nhắn" để được hướng dẫn chi tiết.

00:20:12.000 --> 00:20:18.000
Để đại diện cho một thông báo, chúng tôi đã giới thiệu một giao thức gọi là SWHighlightEvent.

00:20:18.000 --> 00:20:24.000
Các sự kiện nổi bật được khởi tạo với SWHighlights được truy xuất từ SWHighlightCenter API.

00:20:24.000 --> 00:20:45.000
Các loại sự kiện được hỗ trợ bao gồm sự kiện thay đổi để cập nhật nội dung hoặc nhận xét; sự kiện đề cập khi người dùng được đề cập trong cộng tác; sự kiện kiên trì khi nội dung được di chuyển, đổi tên hoặc xóa; và sự kiện thành viên khi người tham gia được thêm hoặc xóa khỏi tài liệu.

00:20:45.000 --> 00:20:52.000
Đây là một ví dụ cho thấy cách đăng một sự kiện thay đổi khi một sự cộng tác đã được chỉnh sửa.

00:20:52.000 --> 00:20:58.000
Sử dụng API trung tâm nổi bật, truy xuất điểm nổi bật cộng tác bằng URL CKShare.

00:20:58.000 --> 00:21:09.000
Hãy nhớ rằng, CKShare này là một CK mà bạn đã xác định trong quá trình bắt đầu cộng tác, vì vậy ứng dụng của bạn sẽ có sẵn ứng dụng này khi thay đổi nội dung được thực hiện.

00:21:09.000 --> 00:21:12.000
Tiếp theo, tạo một phiên bản HighlightChangeEvent.

00:21:12.000 --> 00:21:17.000
Trình khởi tạo có một điểm nổi bật và một giá trị enum kích hoạt.

00:21:17.000 --> 00:21:22.000
Trong trường hợp này, chúng tôi đặt loại kích hoạt để chỉnh sửa.

00:21:22.000 --> 00:21:27.000
Cuối cùng, đăng thông báo cho sự kiện đó lên Trung tâm nổi bật.

00:21:27.000 --> 00:21:38.000
Phần còn lại của các sự kiện tuân theo một định dạng tương tự với ngoại lệ duy nhất là mentionEvent, vì nó yêu cầu thêm thông tin để cho biết người dùng nào đã được đề cập.

00:21:38.000 --> 00:21:44.000
Bạn chỉ có thể đăng loại sự kiện này nếu ứng dụng của bạn hỗ trợ đề cập đến người dùng.

00:21:44.000 --> 00:21:52.000
Tạo mentionEvent bằng cách chuyển vào điểm nổi bật đã truy xuất và xử lý của người tham gia CKShare được đề cập.

00:21:52.000 --> 00:21:57.000
Thông báo này sẽ chỉ được hiển thị cho người dùng được đề cập.

00:21:57.000 --> 00:22:02.000
Sử dụng loại sự kiện kiên trì khi nội dung được di chuyển, đổi tên hoặc xóa.

00:22:02.000 --> 00:22:10.000
Ở đây, loại kích hoạt được đổi tên được sử dụng để biểu thị tên tài liệu đã được thay đổi.

00:22:10.000 --> 00:22:12.000
Cuối cùng, đây là một sự kiện thành viên.

00:22:12.000 --> 00:22:20.000
Đối với một Sự kiện thành viên, thay vào đó hãy sử dụng loại kích hoạt Cộng tác viên đã thêm hoặc đã xóa Cộng tác viên.

00:22:20.000 --> 00:22:26.000
Với các sự kiện đề cập, các thông báo được đăng để cho thấy tư cách thành viên tài liệu đã thay đổi như thế nào.

00:22:26.000 --> 00:22:35.000
Tuy nhiên, chúng tôi cũng đã cho phép giữ cho các cộng tác viên trên các tài liệu được chia sẻ của bạn đồng bộ khi tư cách thành viên nhóm Tin nhắn thay đổi.

00:22:35.000 --> 00:22:42.000
Đối với CloudKit và iCloud Drive, điều này rất đơn giản: chúng tôi thực hiện công việc cho bạn.

00:22:42.000 --> 00:22:51.000
Khi ai đó mới được thêm vào nhóm Tin nhắn với sự cộng tác, chủ sở hữu tài liệu sẽ được nhắc nhở thông qua thông báo để thêm họ vào phần chia sẻ.

00:22:51.000 --> 00:22:57.000
Điều tương tự cũng xảy ra khi ai đó bị loại bỏ.

00:22:57.000 --> 00:23:02.000
Đối với các ứng dụng có cơ sở hạ tầng cộng tác tùy chỉnh, còn một chút việc phải làm.

00:23:02.000 --> 00:23:14.000
Bạn sẽ cần áp dụng SWCollaborationActionHandler API, bạn có thể tìm hiểu thêm trong "Tích hợp ứng dụng cộng tác tùy chỉnh của bạn với Tin nhắn."

00:23:14.000 --> 00:23:26.000
Bây giờ bạn đã biết cách bắt đầu cộng tác trong Tin nhắn và tích hợp nó vào ứng dụng của mình, cho dù bạn đang sử dụng CloudKit, iCloud Drive hay cơ sở hạ tầng cộng tác của riêng bạn.

00:23:26.000 --> 00:23:33.000
Chuẩn bị ứng dụng của bạn để bắt đầu cộng tác bằng cách áp dụng bảng chia sẻ mới và kéo và thả API.

00:23:33.000 --> 00:23:41.000
Tích hợp giao diện người dùng cộng tác mới để cung cấp tổng quan tùy chỉnh về những gì đang xảy ra trong tài liệu được chia sẻ.

00:23:41.000 --> 00:23:51.000
Khi bạn đã thiết lập xong, hãy đi xa hơn nữa và thông qua các thông báo để hiển thị các thay đổi đối với sự cộng tác từ bên trong chuỗi Tin nhắn.

00:23:51.000 --> 00:23:57.000
Miranda và tôi nóng lòng muốn xem ứng dụng của bạn tận dụng các tính năng cộng tác mới này trong Tin nhắn như thế nào!

00:23:57.000 --> 00:23:59.000
Cả hai: Cảm ơn bạn đã xem!

00:23:59.000 --> 23:59:59.000
♪

