WEBVTT

00:00:01.000 --> 00:00:14.000
Conrad: Tôi là Conrad Carlen, và hôm nay, tôi sẽ nói về những gì mới trong PDFKit.

00:00:14.000 --> 00:00:15.000
Đây là chương trình nghị sự của chúng tôi.

00:00:15.000 --> 00:00:30.000
Đầu tiên là đánh giá nhanh về PDFKit, và sau đó, xem có gì mới, bao gồm văn bản và biểu mẫu Trực tiếp, một cách mới để tạo các trang PDF từ hình ảnh và cuối cùng là các chế độ xem lớp phủ.

00:00:30.000 --> 00:00:34.000
Hãy bắt đầu với một bản bồi dưỡng nhanh về cách thức hoạt động của PDFKit.

00:00:34.000 --> 00:00:41.000
PDFKit là một khung đầy đủ tính năng giúp ứng dụng của bạn xem, chỉnh sửa và ghi các tệp PDF.

00:00:41.000 --> 00:00:54.000
Nó có sẵn trên iOS, macOS và Mac Catalyst, và nó cũng có thể được sử dụng trong SwiftUI thông qua UIViewRepresentable, một trình bao bọc cho phép bạn tích hợp chế độ xem giao diện người dùng vào ứng dụng của mình.

00:00:54.000 --> 00:01:00.000
PDFKit bao gồm 4 lớp cốt lõi bao gồm hầu hết các chức năng bạn sẽ cần trong ứng dụng của mình.

00:01:00.000 --> 00:01:05.000
PDFView là tiện ích mà bạn đưa vào bố cục của mình bằng SwiftUI hoặc Trình tạo giao diện.

00:01:05.000 --> 00:01:13.000
Nó hiển thị nội dung của tài liệu PDF và cho phép mọi người điều hướng, đặt mức thu phóng và sao chép văn bản vào Pasteboard.

00:01:13.000 --> 00:01:16.000
PDFDocument đại diện cho một tệp PDF.

00:01:16.000 --> 00:01:20.000
Nó không phổ biến đối với lớp con PDFDocument, nhưng bạn sẽ luôn sử dụng một cái.

00:01:20.000 --> 00:01:24.000
Đó là gốc của biểu đồ đối tượng PDF, hoặc thân cây.

00:01:24.000 --> 00:01:28.000
Bạn không thể có một cái cây mà không có một trong những thứ này.

00:01:28.000 --> 00:01:32.000
Mỗi tài liệu chứa một hoặc nhiều đối tượng PDFPage.

00:01:32.000 --> 00:01:38.000
Các trang hiển thị nội dung và lưu trữ các tài nguyên như phông chữ và hình ảnh duy nhất cho trang đó.

00:01:38.000 --> 00:01:42.000
Ở phần lá của biểu đồ đối tượng của chúng tôi là PDFAnnotations.

00:01:42.000 --> 00:01:43.000
Đây là những tùy chọn.

00:01:43.000 --> 00:01:50.000
Trong khi nội dung của PDFPage không có ý định chỉnh sửa, các chú thích có tính tương tác về bản chất và thường có thể chỉnh sửa được.

00:01:50.000 --> 00:01:53.000
Mỗi đối tượng này sẽ đóng một vai trò trong những gì tôi sẽ đề cập hôm nay.

00:01:53.000 --> 00:02:01.000
Để tìm hiểu thêm về các nguyên tắc cơ bản của PDFKit, hãy xem bài thuyết trình tuyệt vời "Giới thiệu PDFKit" trong liên kết bên dưới.

00:02:01.000 --> 00:02:08.000
Bây giờ, hãy nói về các tính năng mới được giới thiệu trong iOS 16 và macOS Ventura.

00:02:08.000 --> 00:02:11.000
PDFKit hiện hỗ trợ Live Text.

00:02:11.000 --> 00:02:16.000
Nó khác với trong Ảnh, nơi văn bản thường là một lượng nhỏ mà bạn có thể nhấn để sao chép.

00:02:16.000 --> 00:02:25.000
Không giống như với ảnh, với PDF, nếu bạn thấy văn bản, nó thường là văn bản và mọi người mong đợi nó hoạt động như vậy mà không làm bất cứ điều gì đặc biệt.

00:02:25.000 --> 00:02:30.000
Giờ đây, với Live Text, bạn có thể chọn và tìm kiếm văn bản trong một tài liệu PDF như thế này.

00:02:30.000 --> 00:02:34.000
Nó chỉ là một bitmap được quét, không có văn bản nào cả.

00:02:34.000 --> 00:02:36.000
Tất nhiên, các tệp PDF có thể có nhiều trang.

00:02:36.000 --> 00:02:47.000
Bạn sẽ không muốn nghiền nát OCR trên tất cả các trang của tài liệu PDF khi bạn mở nó, vì vậy PDFKit thực hiện nó theo yêu cầu, vì bạn tương tác với từng trang, nếu bạn tương tác với nó.

00:02:47.000 --> 00:02:52.000
OCR đã được thực hiện tại chỗ, vì vậy không cần phải tạo một bản sao của tài liệu.

00:02:52.000 --> 00:02:58.000
Và, nếu bạn chọn lưu văn bản cho toàn bộ tài liệu, có một tùy chọn để làm như vậy khi lưu.

00:02:58.000 --> 00:03:02.000
Ngoài văn bản trực tiếp, PDFKit đã cải thiện khả năng xử lý biểu mẫu.

00:03:02.000 --> 00:03:08.000
Các tài liệu chứa các trường biểu mẫu sẽ tự động được nhận dạng, ngay cả khi chúng không chứa các trường văn bản tích hợp sẵn.

00:03:08.000 --> 00:03:14.000
Bạn có thể tab thông qua các trường văn bản này và nhập văn bản, giống như bạn mong đợi.

00:03:14.000 --> 00:03:20.000
Tiếp theo, hãy nói về một API mới để tạo các trang PDF từ hình ảnh.

00:03:20.000 --> 00:03:28.000
Trong iOS 16 và macOS Ventura, có một API mới, linh hoạt cho phép ứng dụng của bạn tạo các trang PDF bằng cách sử dụng hình ảnh làm đầu vào.

00:03:28.000 --> 00:03:32.000
Ứng dụng của bạn cung cấp hình ảnh bằng CGImageRef.

00:03:32.000 --> 00:03:38.000
PDFKit lấy CGImageRef mà bạn cung cấp và nén nó bằng cách sử dụng mã hóa JPEG chất lượng cao.

00:03:38.000 --> 00:03:44.000
Bởi vì CGImageRef là một kiểu dữ liệu gốc trong CoreGraphics, các chuyển đổi bổ sung là không cần thiết.

00:03:44.000 --> 00:03:49.000
Có một số lựa chọn giúp bạn xử lý các trường hợp phổ biến nhất.

00:03:49.000 --> 00:03:52.000
MediaBox chỉ định kích thước của trang.

00:03:52.000 --> 00:03:58.000
Bạn có thể chọn để phù hợp với hình ảnh một cách chính xác, hoặc chọn một kích thước giấy, như Letter.

00:03:58.000 --> 00:04:03.000
Xoay cho phép bạn chỉ định hướng dọc hoặc ngang.

00:04:03.000 --> 00:04:04.000
Cao cấp nếu nhỏ hơn.

00:04:04.000 --> 00:04:09.000
Theo mặc định, nếu hình ảnh lớn hơn MediaBox, hình ảnh sẽ được thu nhỏ để vừa vặn.

00:04:09.000 --> 00:04:18.000
Nếu UpscaleIfSmaller được chỉ định, điều đó vẫn được áp dụng, nhưng, nếu hình ảnh nhỏ, nó sẽ được nâng cấp để lấp đầy trang.

00:04:18.000 --> 00:04:28.000
Và bây giờ, để trả lời một câu hỏi mà nhiều người trong số các bạn đã hỏi-- "Làm thế nào tôi có thể vẽ trên các trang PDF bằng PencilKit?"-- câu trả lời là sử dụng chế độ xem lớp phủ.

00:04:28.000 --> 00:04:37.000
Trước đây, cách duy nhất để thực hiện bản vẽ bổ sung trên các tệp PDF là phân lớp PDFPage và ghi đè phương pháp vẽ hoặc bằng cách sử dụng chú thích PDF tùy chỉnh.

00:04:37.000 --> 00:04:44.000
Nhưng bắt đầu từ iOS 16 và macOS Ventura, giờ đây có thể phủ lên chế độ xem của riêng bạn lên đầu mỗi trang PDF.

00:04:44.000 --> 00:04:50.000
Điều này cho phép ứng dụng của bạn tạo các chế độ xem trực tiếp, tương tác đầy đủ xuất hiện trên đầu các trang PDF.

00:04:50.000 --> 00:04:54.000
Đây là 3 điều bạn cần biết về việc phủ các lượt xem.

00:04:54.000 --> 00:05:00.000
Đầu tiên, bạn sẽ sử dụng một giao thức mới để cài đặt chế độ xem lớp phủ của mình trên trang PDF.

00:05:00.000 --> 00:05:06.000
Khi đến lúc lưu, bạn sẽ cần kết hợp nội dung của mình vào PDF.

00:05:06.000 --> 00:05:13.000
Và, nói về việc lưu, chúng tôi sẽ đề cập đến một số phương pháp hay nhất khi lưu tài liệu PDF.

00:05:13.000 --> 00:05:17.000
Cài đặt chế độ xem lớp phủ trên các Trang PDF rất đơn giản.

00:05:17.000 --> 00:05:25.000
Bởi vì các tệp PDF có thể chứa hàng trăm, nếu không muốn nói là hàng nghìn trang, không có cách nào bạn muốn tạo chế độ xem cho tất cả các trang đó khi mở tệp PDF.

00:05:25.000 --> 00:05:28.000
Và điều gì sẽ xảy ra nếu người dùng cuộn qua lại nhanh chóng?

00:05:28.000 --> 00:05:31.000
Làm thế nào để bạn biết khi nào nên tạo quan điểm của mình?

00:05:31.000 --> 00:05:38.000
May mắn thay, PDFKit đã được thiết kế để chuẩn bị nội dung một cách thông minh trước khi mọi người cuộn các trang vào chế độ xem.

00:05:38.000 --> 00:05:41.000
Vì vậy, nó biết rõ nhất khi nào nên yêu cầu chế độ xem lớp phủ.

00:05:41.000 --> 00:05:47.000
Ứng dụng của bạn chỉ cần đáp ứng các yêu cầu được thực hiện thông qua giao thức mới.

00:05:47.000 --> 00:05:51.000
PDFPageOverlayViewProvider là giao thức mới.

00:05:51.000 --> 00:05:59.000
Nhân tiện, PDFKitPlatformView chỉ là một định nghĩa của UIView hoặc NSView, tùy thuộc vào nền tảng.

00:05:59.000 --> 00:06:04.000
Phương pháp quan trọng nhất bạn cần thực hiện là overlayViewForPage.

00:06:04.000 --> 00:06:10.000
Chỉ cần cung cấp một ví dụ về chế độ xem của bạn và PDFKit sẽ định cỡ nó bằng cách áp dụng các ràng buộc thích hợp.

00:06:10.000 --> 00:06:14.000
Nó cũng sẽ xoay nó nếu trang có vòng quay khác 0.

00:06:14.000 --> 00:06:16.000
2 phương pháp tiếp theo là tùy chọn.

00:06:16.000 --> 00:06:25.000
willDisplayOverlayView có thể được sử dụng để cài đặt trình xử lý cử chỉ của riêng bạn hoặc để thiết lập các mối quan hệ thất bại với PDFKit.

00:06:25.000 --> 00:06:32.000
willEndDisplayingOverlayView được gọi khi PDFKit hoàn tất với chế độ xem của bạn, có thể là do trang bị cuộn ra khỏi chế độ xem.

00:06:32.000 --> 00:06:37.000
Bạn có thể phát hành chế độ xem của mình tại đây, nhưng có một cách sử dụng quan trọng khác cho phương pháp này.

00:06:37.000 --> 00:06:44.000
Giả sử chế độ xem của bạn có một số dữ liệu để thể hiện những gì nó đang vẽ, bạn có thể sử dụng phương pháp này để lấy dữ liệu đó và đặt nó sang một bên.

00:06:44.000 --> 00:06:53.000
Chúng tôi sẽ làm điều đó trong ví dụ của chúng tôi với PencilKit, nhưng, nếu dữ liệu chế độ xem của bạn tồn tại ở một nơi khác, bạn sẽ không cần phải triển khai điều này.

00:06:53.000 --> 00:06:57.000
Trong ví dụ, đây là lớp chúng tôi đang sử dụng làm nhà cung cấp.

00:06:57.000 --> 00:07:01.000
Nó triển khai giao thức PDFPageOverlayViewProvider.

00:07:01.000 --> 00:07:05.000
Đây là iOS, vì vậy PDFKitPlatformView là một UIView.

00:07:05.000 --> 00:07:09.000
Nó sử dụng bản đồ để chuyển từ PDFPage sang UIView.

00:07:09.000 --> 00:07:12.000
Đây là các phương thức giao thức giữ chỗ.

00:07:12.000 --> 00:07:15.000
Tiếp theo, hãy xem xét các triển khai.

00:07:15.000 --> 00:07:20.000
overlayViewForPage kiểm tra bản đồ pageToView của nó để xem liệu nó đã thực hiện chế độ xem cho trang đã cho chưa.

00:07:20.000 --> 00:07:23.000
Nếu không, nó sẽ tạo ra một cái nhìn mới.

00:07:23.000 --> 00:07:28.000
Trong cả hai trường hợp, chúng tôi lấy bản vẽ từ trang và đặt nó trên chế độ xem canvas.

00:07:28.000 --> 00:07:32.000
Trong những ví dụ này, tôi đang sử dụng một lớp con của PDFPage.

00:07:32.000 --> 00:07:37.000
Tất cả những gì nó làm là thêm một thuộc tính "vẽ".

00:07:37.000 --> 00:07:44.000
Và bây giờ, hãy tập trung vào phương pháp tiếp theo: WillEndDisplayingOverlay.

00:07:44.000 --> 00:07:46.000
willEndDisplayingOverlayView rất đơn giản.

00:07:46.000 --> 00:07:51.000
Nó lấy bản vẽ từ chế độ xem và lưu trữ nó trên lớp trang tùy chỉnh của chúng tôi.

00:07:51.000 --> 00:07:56.000
Bây giờ chúng ta đã làm điều đó, hãy xem nó hoạt động.

00:07:56.000 --> 00:08:07.000
Thông thường, vào khoảng thời gian nghỉ này trong năm, tôi sẽ ở Maine, câu cá, nhưng thay vào đó, tôi đang ở đây tại WWDC, vì vậy một người khác sẽ thay thế vị trí của tôi trong chuyến đi và tôi sẽ chỉ cho anh ấy một số địa điểm yêu thích của tôi.

00:08:07.000 --> 00:08:12.000
Tôi sẽ làm điều đó với ứng dụng này, sử dụng PencilKit trong chế độ xem lớp phủ.

00:08:12.000 --> 00:08:16.000
Ứng dụng này bao gồm mã mà chúng tôi vừa thấy và một số mã khác.

00:08:16.000 --> 00:08:21.000
Toàn bộ mã để có được chế độ xem lớp phủ trên màn hình là khoảng 30 dòng!

00:08:21.000 --> 00:08:25.000
Vì vậy, Grand Lake Stream. Đây là hồ bơi đập.

00:08:25.000 --> 00:08:28.000
Luôn có rất nhiều cá trong đó. Đó là nơi có hầu hết các hành động.

00:08:28.000 --> 00:08:33.000
Bạn có thể đến hồ bơi đập bằng cách đi theo con đường mòn này xuyên qua rừng và sau đó câu cá.

00:08:33.000 --> 00:08:41.000
Bạn có thể câu tất cả những thứ đó, hoặc bạn có thể đi theo con đường này, đi qua con đập và đi xuống đây.

00:08:41.000 --> 00:08:49.000
Từ đó, bạn có thể câu cá lên đây, đi vòng quanh hòn đảo, xuống đây, nhưng bất cứ điều gì bạn làm, đừng đi qua đây.

00:08:49.000 --> 00:08:52.000
Nước trở nên sâu và nhanh.

00:08:52.000 --> 00:08:58.000
Tránh điều đó và xuống đây, đến trại giống.

00:08:58.000 --> 00:09:04.000
Đi bộ xuống bên cạnh trại giống và vào hồ bơi này ở đây.

00:09:04.000 --> 00:09:10.000
Bạn có thể đi khắp nơi ở đây Đây là một địa điểm tuyệt vời. Tôi luôn bắt cá ở đây.

00:09:10.000 --> 00:09:17.000
Được rồi, bây giờ chúng ta đã có một số dấu hiệu trên trang, hãy tập phóng to và cuộn.

00:09:17.000 --> 00:09:25.000
Xem nó phản hồi nhanh như thế nào không?

00:09:25.000 --> 00:09:26.000
Và chúng ta đã có nó.

00:09:26.000 --> 00:09:28.000
Chế độ xem lớp phủ trong PDFKit.

00:09:28.000 --> 00:09:31.000
Vậy, bây giờ bạn đã có những bản phác thảo này, làm thế nào để bạn lưu chúng?

00:09:31.000 --> 00:09:34.000
Chúng tôi sẽ sử dụng lớp PDFAnnotation để làm điều này.

00:09:34.000 --> 00:09:43.000
Có 2 điều chúng tôi muốn đạt được khi lưu: Chúng tôi muốn kết hợp giao diện trên màn hình với độ trung thực cao và chúng tôi muốn chỉnh sửa khứ hồi.

00:09:43.000 --> 00:09:47.000
Chú thích PDF có một số tính năng sẽ tạo điều kiện thuận lợi cho việc này.

00:09:47.000 --> 00:09:52.000
Chú thích PDF có thể có "dòng xuất hiện", đó là một luồng lệnh vẽ PDF.

00:09:52.000 --> 00:09:57.000
Gần như bất cứ thứ gì bạn có thể vẽ bằng Quartz2D đều có thể được ghi lại trong một luồng xuất hiện.

00:09:57.000 --> 00:10:02.000
Bất cứ thứ gì khác đều có thể được hiển thị thành hình ảnh và có thể được ghi lại.

00:10:02.000 --> 00:10:04.000
Đó là cách chúng tôi làm nếu chúng tôi đang sử dụng Metal.

00:10:04.000 --> 00:10:11.000
Và, vì nó được ghi lại dưới dạng bản vẽ PDF, nó sẽ trông giống hệt nhau trong Adobe Reader, Chrome, v.v.

00:10:11.000 --> 00:10:14.000
Chú thích PDF được lưu trữ dưới dạng từ điển trong tài liệu PDF.

00:10:14.000 --> 00:10:19.000
Điều đó có nghĩa là chúng tôi cũng có thể lưu trữ dữ liệu tùy chỉnh trong các cặp khóa/giá trị riêng tư.

00:10:19.000 --> 00:10:22.000
Vậy hãy xem mã trông như thế nào.

00:10:22.000 --> 00:10:26.000
Bắt đầu bằng cách tạo một lớp con của PDFAnnotation.

00:10:26.000 --> 00:10:29.000
Chúng tôi làm điều này để ghi đè phương thức draw().

00:10:29.000 --> 00:10:36.000
PDFKit sẽ gọi phương thức này khi nó lưu luồng giao diện mà tôi đã đề cập trên trang chiếu cuối cùng.

00:10:36.000 --> 00:10:39.000
Để lưu tài liệu của chúng tôi, chúng tôi ghi đè nội dung của UIDocument().

00:10:39.000 --> 00:10:43.000
Đây là tổng quan về chức năng, cho ngữ cảnh sau này.

00:10:43.000 --> 00:10:47.000
Chúng tôi lặp qua tất cả các trang của PDFDocument.

00:10:47.000 --> 00:10:51.000
Chúng ta sẽ hoàn thiện vòng lặp tiếp theo.

00:10:51.000 --> 00:11:02.000
Chúng tôi làm như sau cho mỗi trang: tạo chú thích của lớp tùy chỉnh của chúng tôi; mã hóa bản vẽ của chúng tôi thành dữ liệu; thêm dữ liệu vào chú thích của chúng tôi.

00:11:02.000 --> 00:11:11.000
Lần tới, khi chúng tôi mở tài liệu này, chúng tôi có thể sử dụng value:forAnnotationKey để đọc lại dữ liệu bản vẽ được lưu trữ và đưa nó vào chế độ xem lớp phủ của chúng tôi.

00:11:11.000 --> 00:11:15.000
Cuối cùng, thêm chú thích vào trang.

00:11:15.000 --> 00:11:16.000
Quay lại nội dung của chúng tôi (ghi đè.

00:11:16.000 --> 00:11:26.000
Bây giờ chúng tôi đã thêm chú thích vào các trang của mình, Chúng tôi sử dụng dataRepresentation() của PDFDocument và trả về kết quả.

00:11:26.000 --> 00:11:31.000
Khi nội dung của bạn được lưu dưới dạng chú thích, người nhận tài liệu có thể di chuyển nó, thay đổi kích thước hoặc xóa nó.

00:11:31.000 --> 00:11:33.000
Thông thường, đó là những gì bạn muốn.

00:11:33.000 --> 00:11:38.000
Nhưng đôi khi, bạn muốn chú thích của mình được "đốt cháy", như một phần của trang.

00:11:38.000 --> 00:11:44.000
Có một PDFDocumentWriteOption mới trong iOS 16 và macOS Ventura giúp việc này trở nên dễ dàng.

00:11:44.000 --> 00:11:50.000
Chỉ cần thêm burnInAnnotationsOption = đúng với các tùy chọn lưu, và điều đó sẽ xảy ra.

00:11:50.000 --> 00:11:56.000
Nói về các tùy chọn viết PDF, có một số ít đã được cung cấp trong iOS 16 và macOS Ventura.

00:11:56.000 --> 00:11:58.000
Hãy nhìn vào chúng.

00:11:58.000 --> 00:12:07.000
CoreGraphics luôn cố gắng lưu hình ảnh ở định dạng PDF với độ trung thực tối đa, vì vậy hình ảnh được lưu ở độ phân giải đầy đủ, với khả năng nén không mất dữ liệu.

00:12:07.000 --> 00:12:10.000
Thật tuyệt vời nếu tệp PDF sẽ được in trên một máy in khổ lớn.

00:12:10.000 --> 00:12:18.000
Tuy nhiên, nhiều khả năng nó sẽ được hiển thị trên màn hình và tất cả dữ liệu hình ảnh có độ trung thực cao đó sẽ dẫn đến một tệp rất lớn.

00:12:18.000 --> 00:12:21.000
Để giải quyết vấn đề đó, tôi giới thiệu hai lựa chọn tiếp theo.

00:12:21.000 --> 00:12:25.000
saveAllImagesAsJPEG làm đúng những gì nó nói.

00:12:25.000 --> 00:12:31.000
Bất kể hình ảnh được tạo ra như thế nào, nó sẽ được lưu bằng mã hóa JPEG trong PDF.

00:12:31.000 --> 00:12:37.000
optimizeImagesForScreen sẽ giảm hình ảnh mẫu xuống mức tối đa độ phân giải màn hình HiDPI.

00:12:37.000 --> 00:12:41.000
Hai lựa chọn này có thể được sử dụng cùng nhau.

00:12:41.000 --> 00:12:46.000
createLinearizedPDF sẽ tạo ra một loại PDF đặc biệt được tối ưu hóa cho internet.

00:12:46.000 --> 00:12:53.000
Định dạng PDF, như được thiết kế ban đầu ngay trước khi Internet xuất hiện, được đọc từ cuối tệp.

00:12:53.000 --> 00:12:57.000
Điều đó có nghĩa là toàn bộ nó cần được tải xuống trước khi bất cứ thứ gì được hiển thị.

00:12:57.000 --> 00:13:08.000
Tệp PDF tuyến tính hóa có mọi thứ cần thiết để hiển thị trang đầu tiên ở đầu tệp, vì vậy trình duyệt web có thể hiển thị điều đó một cách nhanh chóng trong khi phần còn lại của tệp được tải.

00:13:08.000 --> 00:13:14.000
Bạn có thể chuyển các tùy chọn này sang các phương thức dataRepresentation hoặc writeToURL của PDFDocument.

00:13:14.000 --> 00:13:25.000
Và chúng ta đã có nó. PDFKit mạnh mẽ, nhưng dễ sử dụng, được sử dụng bởi nhiều ứng dụng của bạn ngày nay trên iOS và macOS, và bây giờ với các tính năng mới cho iOS 16 và macOS Ventura.

00:13:25.000 --> 00:13:28.000
Tôi rất vui khi thấy bạn làm gì với chúng!

00:13:28.000 --> 00:13:32.000
Để tìm hiểu thêm, hãy xem các phiên bên dưới để biết thêm thông tin.

00:13:32.000 --> 00:13:33.000
Cảm ơn bạn đã xem!

00:13:33.000 --> 23:59:59.000
.

