WEBVTT

00:00:00.000 --> 00:00:09.000
♪ nhạc cụ hip hop ♪

00:00:09.000 --> 00:00:11.000
Xin chào, tên tôi là Felipe.

00:00:11.000 --> 00:00:14.000
Tôi là một kỹ sư phần mềm trong nhóm tvOS.

00:00:14.000 --> 00:00:22.000
Hôm nay tôi rất vui được chia sẻ với bạn những cải tiến mà chúng tôi đã thực hiện trong tvOS 16 để giúp hỗ trợ nhiều người dùng trong ứng dụng của bạn dễ dàng hơn.

00:00:22.000 --> 00:00:26.000
Apple TV được thiết kế để mọi người sử dụng.

00:00:26.000 --> 00:00:31.000
Chúng tôi đã cải thiện nhiều người dùng trên Apple TV kể từ tvOS 13.

00:00:31.000 --> 00:00:38.000
Trong tvOS 16, chúng tôi có các tính năng mới giúp hỗ trợ nhiều người dùng trong tất cả các ứng dụng dễ dàng hơn.

00:00:38.000 --> 00:00:43.000
Tôi sẽ bắt đầu với tổng quan về các tính năng của nhiều người dùng trên Apple TV.

00:00:43.000 --> 00:00:48.000
Cho thấy việc cá nhân hóa các ứng dụng trên thiết bị được mọi người sử dụng dễ dàng như thế nào.

00:00:48.000 --> 00:00:56.000
Sau đó, tôi sẽ chứng minh việc lưu trữ lựa chọn hồ sơ cho mỗi người dùng của một ứng dụng phát trực tuyến đơn giản như thế nào.

00:00:56.000 --> 00:01:00.000
Kết thúc với các đề xuất cho cách tiếp cận tốt nhất cho ứng dụng của riêng bạn.

00:01:00.000 --> 00:01:06.000
Trong tvOS 16, chúng tôi đang giúp việc có cả gia đình trên Apple TV trở nên dễ dàng hơn.

00:01:06.000 --> 00:01:12.000
Khi bạn nhấn và giữ nút TV trên Siri Remote, Trung tâm điều khiển sẽ hiển thị.

00:01:12.000 --> 00:01:16.000
Ở trên cùng là danh sách những người dùng trên Apple TV này.

00:01:16.000 --> 00:01:29.000
Mới trong tvOS 16, danh sách người dùng bao gồm các thành viên Gia đình iCloud chưa được thêm vào, giúp việc có cả gia đình trên Apple TV trở nên dễ dàng hơn bao giờ hết.

00:01:29.000 --> 00:01:32.000
Đây, Anne vẫn chưa có trên Apple TV.

00:01:32.000 --> 00:01:35.000
Biểu tượng dấu cộng biểu thị một người dùng được đề xuất.

00:01:35.000 --> 00:01:41.000
Để Anne tham gia, chúng ta có thể chỉ cần chọn người dùng được đề xuất.

00:01:41.000 --> 00:01:52.000
Tất cả những gì Anne cần làm là mang iPhone của họ đến cùng phòng với Apple TV và trên iPhone xác nhận kết nối.

00:01:52.000 --> 00:01:54.000
Và đó là tất cả.

00:01:54.000 --> 00:01:58.000
Anne hiện có quyền truy cập vào dữ liệu của họ trên Apple TV.

00:01:58.000 --> 00:02:02.000
Bây giờ chúng ta hãy quay lại iPhone của Anne một lát.

00:02:02.000 --> 00:02:06.000
Hãy cùng xem ứng dụng phát trực tuyến video yêu thích của Anne.

00:02:06.000 --> 00:02:12.000
Ứng dụng được sử dụng bởi cả gia đình và mỗi người có hồ sơ riêng của họ.

00:02:12.000 --> 00:02:18.000
Khi ứng dụng lần đầu tiên khởi chạy, nó trình bày một trình chọn hồ sơ, Anne chọn hồ sơ của cô ấy.

00:02:18.000 --> 00:02:31.000
Ứng dụng, chạy trên thiết bị cá nhân, có thể chỉ cần lưu trữ hồ sơ ưa thích trong NSUserDefaults hoặc thậm chí đưa vào CloudKit để đồng bộ hóa nó với tất cả các thiết bị.

00:02:31.000 --> 00:02:38.000
iPhone của mỗi thành viên trong gia đình ghi nhớ hồ sơ ưa thích của người đó.

00:02:38.000 --> 00:02:42.000
Không cần phải tiếp tục hỏi nên sử dụng hồ sơ nào khi ứng dụng mở ra.

00:02:42.000 --> 00:02:54.000
Apple TV là một thiết bị được chia sẻ bởi cả gia đình và chúng tôi nghĩ rằng điều thực sự quan trọng là mọi người sử dụng Apple TV đều có thể truy cập nội dung và dữ liệu của riêng họ.

00:02:54.000 --> 00:03:01.000
Trong tvOS 14, chúng tôi đã giới thiệu khả năng cho các ứng dụng chạy như người dùng hiện tại.

00:03:01.000 --> 00:03:16.000
Với một hộp kiểm duy nhất để thêm quyền "Chạy với tư cách là Người dùng Hiện tại" và không có thay đổi mã nào cả, các ứng dụng có thể truy cập dữ liệu riêng của mỗi người dùng, giống như trên iPhone.

00:03:16.000 --> 00:03:27.000
Mã iOS của bạn, gọi các API đó, có thể chạy như trên Apple TV, hoạt động giống như mỗi người đang sử dụng Apple TV cá nhân của riêng họ.

00:03:27.000 --> 00:03:30.000
Khi ứng dụng khởi chạy, tvOS sẽ lo mọi thứ.

00:03:30.000 --> 00:03:35.000
Quyền riêng tư và bảo mật, tất cả đều được xử lý bởi hệ thống.

00:03:35.000 --> 00:03:43.000
Quyền "chạy với tư cách là người dùng hiện tại" hoàn hảo cho các trò chơi và bất kỳ ứng dụng nào liên quan đến tiến trình cá nhân.

00:03:43.000 --> 00:03:47.000
Tuy nhiên, các ứng dụng truyền thông có hồ sơ cần nhiều hơn một chút.

00:03:47.000 --> 00:03:52.000
Trong ví dụ của tôi cho đến nay, tôi đã bỏ qua một phần quan trọng: đăng nhập.

00:03:52.000 --> 00:03:58.000
Chúng tôi tin rằng việc đăng nhập cần phải dễ dàng và không thường xuyên nhất có thể.

00:03:58.000 --> 00:04:09.000
Trong tvOS 15, chúng tôi đã giới thiệu một tính năng cho phép mọi người sử dụng iPhone hoặc iPad của họ để đăng nhập liền mạch trên các ứng dụng tvOS của bạn.

00:04:09.000 --> 00:04:18.000
Đây là trải nghiệm đăng nhập hạng nhất, nơi các thiết bị hoạt động cùng nhau để cung cấp cách thuận tiện nhất để đăng nhập trên Apple TV.

00:04:18.000 --> 00:04:25.000
Các tính năng không có sẵn trực tiếp trên Apple TV, như mật khẩu của bạn trong Chuỗi khóa iCloud, chỉ cách một cú chạm.

00:04:25.000 --> 00:04:36.000
Để tìm hiểu cách xây dựng trải nghiệm đăng nhập tuyệt vời, hãy xem "Đơn giản hóa đăng nhập cho các ứng dụng tvOS của bạn" từ WWDC 2021.

00:04:36.000 --> 00:04:42.000
Và năm nay chúng tôi sẽ giới thiệu hỗ trợ cho OAuth và mật khẩu trên tvOS.

00:04:42.000 --> 00:04:48.000
Mật khẩu là một công nghệ xác thực mới tuyệt vời để thay thế mật khẩu trong các ứng dụng và trang web của bạn.

00:04:48.000 --> 00:04:53.000
Để tìm hiểu thêm về chìa khóa mật khẩu, hãy xem video "Gặp gỡ chìa khóa mật khẩu".

00:04:53.000 --> 00:04:57.000
Nhưng dễ dàng và tiện lợi không phải là tất cả.

00:04:57.000 --> 00:05:01.000
Việc đăng nhập chỉ xảy ra một lần vẫn quan trọng.

00:05:01.000 --> 00:05:09.000
Để đạt được trải nghiệm người dùng tối ưu này, với "Chạy với tư cách là Người dùng hiện tại", chúng tôi đang giới thiệu một API mới đơn giản trong tvOS 16.

00:05:09.000 --> 00:05:17.000
Đây là một hằng số mới trong Dịch vụ Chuỗi khóa cho phép các ứng dụng truy cập Chuỗi khóa độc lập với người dùng.

00:05:17.000 --> 00:05:23.000
Tất cả người dùng luôn có thể truy cập các mục được lưu trữ bằng khóa mới này trên Apple TV.

00:05:23.000 --> 00:05:26.000
Hãy xem xét một ví dụ.

00:05:26.000 --> 00:05:33.000
Đây là một phương pháp lưu một mục trong Chuỗi khóa, với tên người dùng và mật khẩu.

00:05:33.000 --> 00:05:43.000
Để lưu mục vào Chuỗi khóa độc lập với người dùng, tất cả những gì bạn phải làm là thêm một khóa mới vào từ điển thuộc tính được chuyển đến hàm SecItemAdd.

00:05:43.000 --> 00:05:51.000
Chúng tôi chỉ đơn giản là chuyển true làm giá trị cho khóa kSecUseUserIndependentKeychain.

00:05:51.000 --> 00:05:58.000
Với bộ Móc khóa độc lập với người dùng, các mục bạn đọc và viết sẽ hiển thị cho tất cả người dùng.

00:05:58.000 --> 00:06:16.000
Sự kết hợp của cả Keychain API mới và quyền "Chạy với tư cách là người dùng hiện tại" cho phép các ứng dụng của bạn có iPhone tốt nhất và tốt nhất của Apple TV: tách dữ liệu đơn giản cho mỗi người dùng trên thiết bị dùng chung trong khi vẫn duy trì trải nghiệm đăng nhập một lần trên Apple TV.

00:06:16.000 --> 00:06:24.000
Trong tvOS 16, chúng tôi đã phản đối các phương pháp ánh xạ hồ sơ theo cách thủ công cho người dùng hệ thống trong TVUserManager.

00:06:24.000 --> 00:06:29.000
Bạn không cần phải duy trì bản đồ người dùng đến hồ sơ nữa.

00:06:29.000 --> 00:06:31.000
Hệ thống sẽ xử lý nó cho bạn.

00:06:31.000 --> 00:06:36.000
Các API tương tự mà bạn sử dụng trên iOS có thể được sử dụng, như trên Apple TV.

00:06:36.000 --> 00:06:39.000
Nó dễ dàng hơn rất nhiều.

00:06:39.000 --> 00:06:42.000
Hãy để tôi cho bạn thấy tất cả trong hành động với một bản demo.

00:06:42.000 --> 00:06:47.000
Tôi sẽ hướng dẫn bạn qua một ứng dụng mẫu đại diện cho các ứng dụng truyền thông với hồ sơ.

00:06:47.000 --> 00:06:51.000
Đây là ứng dụng phát trực tuyến video của tôi.

00:06:51.000 --> 00:06:55.000
Hiện tại nó không sử dụng bất kỳ tính năng nào mà tôi đã nói đến.

00:06:55.000 --> 00:07:00.000
Nó không chạy như người dùng hiện tại và nó không sử dụng Keychain API mới.

00:07:00.000 --> 00:07:06.000
Tôi sẽ tiếp tục và đăng nhập để cho bạn xem.

00:07:06.000 --> 00:07:10.000
Sau khi đăng nhập, tôi được trình bày với một danh sách các hồ sơ.

00:07:10.000 --> 00:07:16.000
Người dùng hiện tại là Mei, vì vậy tôi sẽ chọn hồ sơ của cô ấy.

00:07:16.000 --> 00:07:22.000
Chọn một hồ sơ hiển thị nội dung được cá nhân hóa mà Mei muốn xem.

00:07:22.000 --> 00:07:26.000
Sau đó, Anne ngồi trên đi văng để xem TV.

00:07:26.000 --> 00:07:32.000
Họ mở Trung tâm điều khiển bằng cách nhấn và giữ nút TV trên Siri Remote.

00:07:32.000 --> 00:07:37.000
Ở trên cùng trong Trung tâm điều khiển là danh sách người dùng.

00:07:37.000 --> 00:07:40.000
Dấu kiểm màu xanh lá cây cho biết người dùng hiện tại.

00:07:40.000 --> 00:07:45.000
Tôi sẽ chuyển sang Anne ngay bây giờ và mở ứng dụng.

00:07:45.000 --> 00:07:49.000
Đúng như dự đoán, ứng dụng trình bày lại trình chọn hồ sơ.

00:07:49.000 --> 00:07:54.000
Vì vậy Anne có thể chọn hồ sơ của họ.

00:07:54.000 --> 00:08:02.000
Nhưng hãy xem điều gì sẽ xảy ra khi chuyển trở lại Mei.

00:08:02.000 --> 00:08:04.000
Ứng dụng vẫn nằm trong hồ sơ của Anne.

00:08:04.000 --> 00:08:08.000
Nó không nhớ rằng Mei đã chọn hồ sơ ưa thích của cô ấy trước đây.

00:08:08.000 --> 00:08:14.000
Với các tính năng mới trong tvOS 16, trải nghiệm người dùng có thể tốt hơn nhiều.

00:08:14.000 --> 00:08:19.000
Tôi muốn mọi người sử dụng ứng dụng không phải chọn lại ai đang xem.

00:08:19.000 --> 00:08:22.000
Hãy đến Xcode, và tôi sẽ cho bạn thấy nó dễ dàng như thế nào.

00:08:22.000 --> 00:08:27.000
Làm cho ứng dụng của tôi thực thi như người dùng hiện tại rất đơn giản.

00:08:27.000 --> 00:08:31.000
Tất cả những gì tôi phải làm là thêm một khả năng vào mục tiêu ứng dụng của mình.

00:08:31.000 --> 00:08:37.000
Ở đây trong mục tiêu ứng dụng của tôi, tôi sẽ chuyển sang tab Ký &amp; Khả năng.

00:08:37.000 --> 00:08:43.000
Ngay dưới tab, ở trên cùng bên trái ở đây, tôi sẽ nhấp vào nút Thêm khả năng.

00:08:43.000 --> 00:08:46.000
Nó mở ra danh sách các khả năng.

00:08:46.000 --> 00:08:49.000
Cái mà tôi quan tâm được gọi là Quản lý người dùng.

00:08:49.000 --> 00:08:53.000
Vì vậy tôi sẽ gõ "người dùng" để lọc danh sách.

00:08:53.000 --> 00:08:58.000
Bây giờ tôi chỉ cần nhấp đúp vào khả năng mà tôi muốn thêm vào ứng dụng của mình.

00:08:58.000 --> 00:09:05.000
Dưới đây, hộp kiểm "Chạy với tư cách là Người dùng Hiện tại" được chọn theo mặc định.

00:09:05.000 --> 00:09:08.000
Đó chính xác là những gì tôi cần.

00:09:08.000 --> 00:09:13.000
Với quyền này, quy trình ứng dụng của tôi sẽ luôn được khởi chạy với tư cách là người dùng hiện được chọn.

00:09:13.000 --> 00:09:18.000
Hệ thống sẽ đảm bảo rằng dữ liệu cho mỗi người dùng là khác nhau.

00:09:18.000 --> 00:09:20.000
Tất cả, bao gồm cả Móc khóa.

00:09:20.000 --> 00:09:26.000
Nhưng đối với ứng dụng của tôi, việc có một Keychain riêng biệt cho mỗi người dùng, sẽ có tác dụng phụ bất ngờ.

00:09:26.000 --> 00:09:30.000
Nó sẽ yêu cầu mỗi người dùng đăng nhập riêng.

00:09:30.000 --> 00:09:39.000
Trong tvOS 16, chúng tôi có thể duy trì trải nghiệm có một tài khoản duy nhất cho tất cả người dùng trong khi chạy với tư cách là người dùng hiện tại.

00:09:39.000 --> 00:09:44.000
Bằng cách sử dụng Keychain API mới để truy cập Keychain độc lập với người dùng.

00:09:44.000 --> 00:09:52.000
Bây giờ tôi sẽ đến lớp KeychainController của mình, tôi sử dụng nó để đọc và viết vào Keychain.

00:09:52.000 --> 00:10:00.000
Ở đây tôi có thuộc tính baseQuery có các khóa tôi cần để truy cập thông tin đăng nhập cho ứng dụng của mình trong Chuỗi khóa.

00:10:00.000 --> 00:10:07.000
Để cập nhật nó để sử dụng Chuỗi khóa độc lập với người dùng mới, tất cả những gì tôi phải làm là thêm một phần tử mới vào từ điển.

00:10:07.000 --> 00:10:15.000
Tôi sẽ thêm kSecUseUserIndependentKeychain mới và đặt nó thành true.

00:10:15.000 --> 00:10:20.000
Và đó là tất cả những gì tôi cần thay đổi để làm cho ứng dụng chia sẻ thông tin đăng nhập của nó với tất cả người dùng.

00:10:20.000 --> 00:10:22.000
Không có gì khác.

00:10:22.000 --> 00:10:27.000
Tuy nhiên, điều quan trọng cần lưu ý là tất cả các dữ liệu khác vẫn khác biệt cho mỗi người dùng.

00:10:27.000 --> 00:10:34.000
Giống như UserDefaults, mà tôi sẽ sử dụng để ghi nhớ lựa chọn hồ sơ cho mỗi người dùng.

00:10:34.000 --> 00:10:37.000
Bây giờ hãy mở lớp ProfileData của tôi.

00:10:37.000 --> 00:10:41.000
Tệp này được chia sẻ giữa các dự án iOS và tvOS của tôi.

00:10:41.000 --> 00:10:50.000
Trên thực tế, phiên bản iOS của ứng dụng của tôi đã lưu trữ lựa chọn hồ sơ trong UserDefaults, nhưng chỉ khi chạy trên iOS.

00:10:50.000 --> 00:10:54.000
Và đó là bởi vì iPhone là thiết bị cá nhân.

00:10:54.000 --> 00:11:00.000
Nhưng bây giờ ứng dụng của tôi chạy với tư cách là người dùng hiện tại, Apple TV có thể mang tính cá nhân.

00:11:00.000 --> 00:11:05.000
Tôi có thể xóa kiểm tra iOS và mã hoạt động theo cùng một cách trên Apple TV.

00:11:05.000 --> 00:11:12.000
Hệ thống sẽ đảm bảo sử dụng đúng UserDefaults cho mỗi người dùng.

00:11:12.000 --> 00:11:16.000
Khi tôi chạy phiên bản mới của ứng dụng, nó được khởi chạy dưới dạng người dùng hiện tại, đó là Mei.

00:11:16.000 --> 00:11:20.000
Mei đăng nhập và chọn hồ sơ của cô ấy.

00:11:20.000 --> 00:11:26.000
Với ứng dụng chạy với tư cách là người dùng hiện tại, nó hoạt động giống như Apple TV, tại thời điểm đó, là một thiết bị cá nhân.

00:11:26.000 --> 00:11:28.000
Thiết bị của Mei.

00:11:28.000 --> 00:11:32.000
Lựa chọn hồ sơ của Mei được lưu trữ trong UserDefaults của cô ấy.

00:11:32.000 --> 00:11:38.000
Khi đến lúc Anne xem, họ chuyển sang người dùng của mình bằng Trung tâm điều khiển.

00:11:38.000 --> 00:11:48.000
Hệ thống sẽ đưa ra một giao diện người dùng chuyển đổi, trong khi nó dành thời gian cho quy trình của bạn để hoàn thành bất kỳ tác vụ cuối cùng nào trước khi nó được khởi chạy lại.

00:11:48.000 --> 00:11:52.000
tvOS hiện đang khởi chạy lại ứng dụng với tên Anne.

00:11:52.000 --> 00:11:54.000
Bây giờ Apple TV là thiết bị của Anne.

00:11:54.000 --> 00:12:02.000
Lời nhắc đăng nhập bị bỏ qua, vì thông tin đăng nhập được lưu trữ trong Chuỗi khóa độc lập với người dùng, tất cả người dùng đều có thể truy cập được.

00:12:02.000 --> 00:12:09.000
Nhưng Anne chưa có lựa chọn hồ sơ được lưu trữ trong UserDefaults của họ và bộ chọn hồ sơ được hiển thị.

00:12:09.000 --> 00:12:15.000
Chọn hồ sơ của Anne, lưu lựa chọn trong UserDefaults của họ.

00:12:15.000 --> 00:12:19.000
Được rồi bây giờ, tại thời điểm này Mei và Anne đều đã chọn hồ sơ của họ.

00:12:19.000 --> 00:12:24.000
Khi chuyển đổi người dùng, ứng dụng sẽ không hiển thị bất kỳ lời nhắc xen kẽ nào nữa.

00:12:24.000 --> 00:12:31.000
Nó sẽ luôn đi thẳng vào nội dung, tự động chọn hồ sơ chính xác cho mỗi người.

00:12:31.000 --> 00:12:32.000
Mỗi lần.

00:12:32.000 --> 00:12:39.000
Đó là cách, trong tvOS 16, chúng tôi đã giúp việc ghi nhớ hồ sơ của mỗi người dùng dễ dàng hơn nhiều.

00:12:39.000 --> 00:12:48.000
Một API mới đơn giản để truy cập Chuỗi khóa độc lập với người dùng, với việc xử lý hệ thống tách biệt dữ liệu của mỗi người dùng.

00:12:48.000 --> 00:12:58.000
Bây giờ bạn đã thấy cách ghi nhớ lựa chọn hồ sơ của từng người dùng mà không yêu cầu mọi người đăng nhập riêng, hãy xem lại cách các ứng dụng hoạt động trên Apple TV.

00:12:58.000 --> 00:13:04.000
Các ứng dụng không chạy như quyền của người dùng hiện tại sử dụng tài nguyên của Người dùng Mặc định.

00:13:04.000 --> 00:13:09.000
Bạn có thể nghĩ về nó như là tài nguyên riêng của Apple TV.

00:13:09.000 --> 00:13:14.000
Chuyển đổi người dùng không có ảnh hưởng đến quy trình của ứng dụng.

00:13:14.000 --> 00:13:18.000
Đây là những đề xuất của tôi khi bạn muốn cá nhân hóa.

00:13:18.000 --> 00:13:25.000
Bảng này hiển thị các khả năng có sẵn tùy thuộc vào tính năng bạn sử dụng trên các ứng dụng tvOS của mình.

00:13:25.000 --> 00:13:44.000
Nếu ứng dụng của bạn là một ứng dụng đa phương tiện, hoặc giống như một ứng dụng, hiển thị nội dung được cá nhân hóa thông qua hồ sơ; trong khi có một tài khoản duy nhất được chia sẻ giữa mọi người sử dụng Apple TV, bạn áp dụng Runs làm quyền của Người dùng Hiện tại và sử dụng API Keychain độc lập với người dùng mới.

00:13:44.000 --> 00:13:55.000
Nếu, giống như một trò chơi, ứng dụng của bạn là tất cả về tiến trình cá nhân, tất cả những gì bạn phải làm là áp dụng Runs làm quyền của Người dùng Hiện tại, tvOS sẽ xử lý phần còn lại.

00:13:55.000 --> 00:14:04.000
Và đối với tất cả các ứng dụng khác, các ứng dụng trình bày cùng một nội dung cho tất cả người dùng - ví dụ như một ứng dụng công thức - bạn không phải làm bất cứ điều gì.

00:14:04.000 --> 00:14:08.000
Chỉ cần tạo một dự án ứng dụng tvOS mới trong Xcode.

00:14:08.000 --> 00:14:14.000
Để tìm hiểu thêm về việc chạy với tư cách là người dùng hiện tại, hãy xem phiên của chúng tôi từ WWDC 2020.

00:14:14.000 --> 00:14:21.000
Chúng tôi tin rằng trải nghiệm trực tiếp đến nội dung được sắp xếp hợp lý là trải nghiệm tốt nhất cho ứng dụng tvOS.

00:14:21.000 --> 00:14:26.000
Tôi hy vọng tất cả các tính năng này sẽ giúp bạn triển khai những trải nghiệm màn hình lớn tuyệt vời trong các ứng dụng của mình.

00:14:26.000 --> 23:59:59.000
Cảm ơn vì đã xem, và tận hưởng hội nghị.

