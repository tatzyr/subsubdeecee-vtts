WEBVTT

00:00:01.000 --> 00:00:07.000
Jon Davis: Xin chào, tôi là Jon Davis, nhà truyền giáo công nghệ web cho các nhóm Safari và WebKit.

00:00:07.000 --> 00:00:13.000
Tôi rất vui khi được hướng dẫn bạn về cách xây dựng và triển khai các tiện ích mở rộng Safari cho iOS.

00:00:13.000 --> 00:00:16.000
Hiện tại, có một vài loại tiện ích mở rộng khác nhau cho iOS.

00:00:16.000 --> 00:00:25.000
Chúng tôi đã có trình chặn nội dung trên iOS trong một vài năm và đó là một loại tiện ích mở rộng cho phép bạn định cấu hình các quy tắc mạnh mẽ để chặn tải tài nguyên.

00:00:25.000 --> 00:00:28.000
Nhưng tôi ở đây để nói với bạn về các tiện ích mở rộng web Safari.

00:00:28.000 --> 00:00:36.000
Chúng đã được giới thiệu vào năm ngoái trên macOS Big Sur và mùa thu này, chúng tôi đã đưa chúng lên iOS 15 và iPadOS 15.

00:00:36.000 --> 00:00:44.000
Đó là một loại tiện ích mở rộng sử dụng các công nghệ web hoạt động trên các trình duyệt khác và người dùng của chúng tôi đang yêu thích chúng.

00:00:44.000 --> 00:00:49.000
Đây là danh mục phổ biến nhất trên App Store và chúng rất dễ cài đặt, giống như bất kỳ ứng dụng nào khác.

00:00:49.000 --> 00:00:54.000
Và đó là bởi vì các tiện ích mở rộng web Safari được phân phối bằng một ứng dụng.

00:00:54.000 --> 00:00:58.000
Và điều đó có nghĩa là bạn nhận được những lợi ích khi ở trên App Store.

00:00:58.000 --> 00:01:12.000
Người dùng có thể khám phá các tiện ích mở rộng của bạn, bạn có thể dễ dàng bán trước tiện ích mở rộng của mình - Bạn thậm chí có thể tận dụng các tính năng mạnh mẽ như thanh toán trong ứng dụng để mở khóa các tính năng nâng cao của tiện ích mở rộng của mình hoặc sử dụng TestFlight để chạy chương trình beta.

00:01:12.000 --> 00:01:18.000
Nhưng có lẽ bạn đang nói, "Tất cả đều tốt và tốt, John, nhưng tôi là một nhà phát triển web, không phải là một nhà phát triển ứng dụng."

00:01:18.000 --> 00:01:21.000
Chà, tôi cũng vậy! Và họ yêu cầu tôi làm người hướng dẫn bạn.

00:01:21.000 --> 00:01:27.000
Vì vậy, tôi ở đây để giúp bạn học Xcode, và chúng ta sẽ xây dựng một dự án mới từ đầu.

00:01:27.000 --> 00:01:38.000
Tôi cũng sẽ đề cập đến mô hình quyền bảo vệ quyền riêng tư của Safari và cách gửi tiện ích mở rộng của bạn với một số mẹo để vượt qua quy trình Đánh giá Ứng dụng đó.

00:01:38.000 --> 00:01:42.000
Vậy hãy bắt đầu làm việc với Xcode.

00:01:42.000 --> 00:01:47.000
Và để làm điều đó, chúng ta sẽ cần tải xuống và cài đặt nó từ App Store.

00:01:47.000 --> 00:01:53.000
Tôi sẽ khởi chạy App Store, và trong Tìm kiếm tôi sẽ gõ "Xcode" và nó xuất hiện ngay lập tức.

00:01:53.000 --> 00:01:57.000
Và sau đó tất cả những gì bạn cần làm là nhấp vào nút Nhận và sau đó nhấp vào Cài đặt.

00:01:57.000 --> 00:02:05.000
Bây giờ, đây là một bản tải xuống khá lớn sẽ mất một lúc nhưng khi bạn có thể khởi chạy nó, Xcode sẽ nhắc bạn cài đặt Công cụ dòng lệnh.

00:02:05.000 --> 00:02:12.000
Nếu bạn bỏ qua việc cài đặt chúng, bạn có thể dễ dàng làm điều đó sau này từ dòng lệnh trong Terminal.

00:02:12.000 --> 00:02:19.000
Bạn sẽ chỉ cần nhập "xcode-select" và thêm cờ cài đặt, và điều đó sẽ bắt đầu quá trình cài đặt.

00:02:19.000 --> 00:02:31.000
Bây giờ, môi trường của tôi đã sẵn sàng hoạt động, vì vậy tôi sẽ không chạy lệnh này ngay bây giờ, nhưng bạn sẽ muốn đảm bảo rằng bạn đã cài đặt chúng vì chúng bao gồm một công cụ quan trọng được gọi là trình chuyển đổi tiện ích mở rộng web Safari.

00:02:31.000 --> 00:02:41.000
Thật hữu ích nếu bạn đã viết một tiện ích mở rộng web cho một trình duyệt khác hoặc một tiện ích bạn đã viết cho Safari trên macOS mà bạn muốn nâng cấp với sự hỗ trợ cho Safari trên iOS.

00:02:41.000 --> 00:02:53.000
Bây giờ tôi có một tiện ích mở rộng web demo đơn giản trong thư mục Tài liệu của mình và tiện ích mở rộng hello-world này được viết cho một trình duyệt khác và nó chỉ hiển thị thông báo "Hello World" trong một cửa sổ bật lên.

00:02:53.000 --> 00:02:57.000
Bây giờ tôi có thể sử dụng công cụ chuyển đổi để nâng cấp nó để hoạt động với iOS.

00:02:57.000 --> 00:03:03.000
Trong Terminal, chỉ cần nhập "xc", như trong Xcode - vì vậy đó là "xcrun".

00:03:03.000 --> 00:03:08.000
Và sau đó là "safari-web-extension-converter" và một đường dẫn đến dự án.

00:03:08.000 --> 00:03:14.000
Nếu bạn có một tiện ích mở rộng được viết cho Safari trên macOS, bạn cũng có thể nâng cấp nó bằng công cụ chuyển đổi.

00:03:14.000 --> 00:03:24.000
Chỉ cần nhập "xcrun safari-web-extension-converter" và thêm cờ dự án xây dựng lại theo sau là đường dẫn đến tiện ích mở rộng macOS.

00:03:24.000 --> 00:03:33.000
Nhưng hãy thực sự xem công cụ chuyển đổi hoạt động như thế nào khi chúng ta chạy nó trên tiện ích mở rộng Hello World.

00:03:33.000 --> 00:03:36.000
Và nhấn Return, nó bắt đầu quá trình.

00:03:36.000 --> 00:03:44.000
Và những gì nó thực sự đang làm là gói tiện ích mở rộng của chúng tôi thành một dự án ứng dụng mà chúng tôi có thể biên dịch và chạy cho iOS và macOS.

00:03:44.000 --> 00:03:53.000
Bây giờ, quay trở lại Thiết bị đầu cuối trong giây lát, tôi muốn chỉ ra ghi chú này có cảnh báo ở đây, cho thấy rằng các tiện ích mở rộng iOS yêu cầu các trang nền không liên tục.

00:03:53.000 --> 00:04:02.000
Điều này thực sự rất tuyệt vì về cơ bản nó cung cấp cho chúng tôi một danh sách việc cần làm về những việc chúng tôi sẽ cần kiểm tra để đảm bảo tiện ích mở rộng của chúng tôi sẽ hoạt động cho iOS.

00:04:02.000 --> 00:04:04.000
Hãy quay lại Xcode.

00:04:04.000 --> 00:04:06.000
Phần mở rộng này gần như đã sẵn sàng.

00:04:06.000 --> 00:04:11.000
Tập lệnh nền đã được thiết lập để chạy theo cách không liên tục.

00:04:11.000 --> 00:04:14.000
Chúng ta chỉ cần bảo Safari chạy nó theo cách đó.

00:04:14.000 --> 00:04:21.000
Vì vậy, tất cả những gì tôi cần làm để điều này hoạt động cho iOS là chỉnh sửa tệp kê khai.

00:04:21.000 --> 00:04:30.000
Và trong phần nền, tôi sẽ thêm khóa liên tục với giá trị sai.

00:04:30.000 --> 00:04:31.000
Và thế là xong!

00:04:31.000 --> 00:04:34.000
Hãy thử chạy cái này trong trình giả lập.

00:04:34.000 --> 00:04:38.000
Tôi sẽ sử dụng menu Build Targets và chọn iPhone 13 Pro.

00:04:38.000 --> 00:04:46.000
Bây giờ, tôi đã cài đặt rất nhiều trình mô phỏng, nhưng bạn có thể cần sử dụng Thêm trình mô phỏng bổ sung để tải xuống những trình mô phỏng bạn muốn kiểm tra.

00:04:46.000 --> 00:04:52.000
Vì vậy, tôi sẽ chọn iPhone 13 Pro và nhấp vào nút xây dựng và chạy; cái trông giống như nút phát.

00:04:52.000 --> 00:04:55.000
Và điều này sẽ xây dựng ứng dụng của chúng tôi và khởi chạy nó trong trình giả lập.

00:04:55.000 --> 00:04:58.000
Bạn có thể thấy trạng thái ở đây ở phía trên bên phải của thanh trạng thái.

00:04:58.000 --> 00:05:07.000
Bây giờ, chuyển sang trình giả lập, tôi sẽ cần đợi cho đến khi ứng dụng được cài đặt và khởi chạy.

00:05:07.000 --> 00:05:24.000
Khi nó được khởi chạy, tôi có thể chuyển sang ứng dụng Cài đặt, tìm phần Safari và nhấn vào Tiện ích mở rộng, sau đó bật tiện ích mở rộng Hello World của chúng tôi.

00:05:24.000 --> 00:05:26.000
Bây giờ chúng ta có thể dùng thử nó trong Safari.

00:05:26.000 --> 00:05:30.000
Khởi chạy Safari và nhấn vào menu Aa.

00:05:30.000 --> 00:05:35.000
Ở đó, bạn sẽ tìm thấy tiện ích mở rộng Hello World, và tôi có thể nhấn vào nó, và nó nhắc sự cho phép.

00:05:35.000 --> 00:05:39.000
Tôi sẽ nói nhiều hơn về điều đó sau, nhưng bây giờ, tôi sẽ chọn Cho phép trong một ngày.

00:05:39.000 --> 00:05:40.000
Và chúng ta bắt đầu.

00:05:40.000 --> 00:05:43.000
Một "Xin chào thế giới!" Tin nhắn trong một cửa sổ bật lên.

00:05:43.000 --> 00:05:49.000
Và đó là cách dễ dàng để bạn chuyển đổi một tiện ích mở rộng web được viết cho một trình duyệt khác.

00:05:49.000 --> 00:05:59.000
Vì vậy, tôi đã có một ý tưởng cho một dự án để xây dựng bản xem trước siêu dữ liệu Open Graph; cùng một siêu dữ liệu được sử dụng để hiển thị các bản xem trước trên các trang mạng xã hội như Twitter.

00:05:59.000 --> 00:06:04.000
Bạn nhận được hình ảnh đẹp này, tiêu đề và mô tả của trang web.

00:06:04.000 --> 00:06:08.000
Và vì vậy, tôi muốn xây dựng một tiện ích mở rộng có thể xem trước dữ liệu đó bằng cách sử dụng cửa sổ bật lên.

00:06:08.000 --> 00:06:13.000
Vậy đó là những gì chúng ta sẽ xây dựng ngày hôm nay.

00:06:13.000 --> 00:06:18.000
Vậy hãy bắt đầu bằng cách tạo một dự án mới trong Xcode.

00:06:18.000 --> 00:06:27.000
Tôi sẽ chọn Ứng dụng Mở rộng Safari trong Đa nền tảng và nhấp vào Tiếp theo.

00:06:27.000 --> 00:06:32.000
Đối với tên sản phẩm, tôi sẽ sử dụng "Open Graph Preview".

00:06:32.000 --> 00:06:38.000
Nó đã được nhóm của tôi điền vào và một mã định danh tổ chức sử dụng quy ước miền ngược.

00:06:38.000 --> 00:06:43.000
Tôi sẽ để ngôn ngữ là Swift và nhấp vào Tiếp theo.

00:06:43.000 --> 00:06:58.000
Bây giờ nó đang yêu cầu một nơi để lưu dự án - máy tính để bàn sẽ hoạt động tốt - và tôi sẽ bật "Tạo kho lưu trữ Git trên Mac" - Tôi thích tích hợp kiểm soát phiên bản - và tôi sẽ nhấp vào Tạo.

00:06:58.000 --> 00:07:02.000
Và điều này sẽ tạo ra dự án cho chúng tôi từ mẫu.

00:07:02.000 --> 00:07:09.000
Bây giờ, trước khi chúng ta đi xa hơn, hãy để tôi cung cấp cho bạn một cái nhìn tổng quan ngắn gọn về Xcode.

00:07:09.000 --> 00:07:18.000
Ở phía bên trái của cửa sổ là thanh bên điều hướng với tất cả các tài nguyên cho dự án của bạn được sắp xếp cho bạn.

00:07:18.000 --> 00:07:29.000
Ở trung tâm là trình chỉnh sửa chính cho các tệp bạn chọn từ thanh bên điều hướng và sau đó bên phải là thanh bên kiểm tra thay đổi dựa trên tệp bạn đang chỉnh sửa.

00:07:29.000 --> 00:07:38.000
Chúng tôi sẽ không cần thanh bên thanh tra vì vậy tôi sẽ tiếp tục và giấu nó để chúng tôi có thêm một chút không gian để làm việc.

00:07:38.000 --> 00:07:46.000
Bây giờ chúng ta hãy xem xét các tệp tạo nên dự án mở rộng web Safari mới và ở đầu thanh bên điều hướng là tệp dự án.

00:07:46.000 --> 00:07:53.000
Khi bạn chọn nó, nó sẽ mở trình chỉnh sửa chính đến màn hình tùy chọn cấu hình cho dự án.

00:07:53.000 --> 00:07:58.000
Bây giờ bên dưới đó là thư mục Chia sẻ (Ứng dụng) và thư mục này có các tài nguyên cho màn hình khởi chạy ứng dụng.

00:07:58.000 --> 00:08:05.000
Khi bạn nhấp vào tam giác hiển thị bên cạnh thư mục Tài nguyên, bạn sẽ thấy đó chỉ là tài nguyên web.

00:08:05.000 --> 00:08:13.000
Trên thực tế, nó chỉ là một tệp HTML mà bạn có thể chỉnh sửa và mẫu sẽ giúp bạn dễ dàng tùy chỉnh đánh dấu, kiểu dáng và tập lệnh.

00:08:13.000 --> 00:08:18.000
Thư mục Chia sẻ (Phần mở rộng) có tất cả các tài nguyên cho tiện ích mở rộng của chúng tôi.

00:08:18.000 --> 00:08:27.000
Và sau đó khi bạn mở rộng thư mục Tài nguyên, bạn sẽ thấy tất cả các tệp quen thuộc cho phần mở rộng web.

00:08:27.000 --> 00:08:34.000
Bản kê khai ở đây, tập lệnh nền, tập lệnh nội dung và các tệp bật lên.

00:08:34.000 --> 00:08:49.000
Các thư mục iOS (Ứng dụng) và macOS (Ứng dụng) có tài nguyên dành riêng cho nền tảng và sau đó bên dưới là các thư mục iOS (Phần mở rộng) và macOS (Phần mở rộng) có tài nguyên dành riêng cho phần mở rộng cho các nền tảng đó.

00:08:49.000 --> 00:08:58.000
Chúng tôi sẽ không cần phải lo lắng về chúng cho dự án này, vì vậy tôi sẽ tiếp tục và cất chúng đi vì tất cả công việc của chúng tôi sẽ nằm trong các tệp Được chia sẻ (Phần mở rộng).

00:08:58.000 --> 00:09:03.000
Và hãy bắt đầu trong tệp kê khai.

00:09:03.000 --> 00:09:14.000
Và bạn có thể thấy rằng mẫu cung cấp mọi thứ chúng ta cần để bắt đầu, bao gồm điền tên và mô tả từ thông tin dự án.

00:09:14.000 --> 00:09:24.000
Bên dưới đó, nó chỉ định một số biểu tượng mặc định; bạn sẽ muốn nhớ cung cấp biểu tượng của riêng mình cho dự án của mình.

00:09:24.000 --> 00:09:32.000
Và sau đó ở đây, nó cung cấp một tập lệnh nền và bạn có thể thấy nó đã được thiết lập để chạy tập lệnh nền một cách không liên tục.

00:09:32.000 --> 00:09:49.000
Bây giờ, đối với dự án này, chúng tôi thực sự sẽ không cần tập lệnh nền, vì vậy tôi sẽ tiếp tục và xóa mục nhập này khỏi tệp kê khai và tiếp tục xóa chính tập lệnh nền và chuyển nó vào thùng rác.

00:09:49.000 --> 00:09:57.000
Tiếp theo, nó thiết lập tập lệnh nội dung và đây là nơi nó khai báo tệp JavaScript và mẫu miền cho trang web mà nó có thể được đưa vào.

00:09:57.000 --> 00:10:11.000
Bây giờ, tôi muốn công cụ này có thể sử dụng được trên bất kỳ trang web nào mà người dùng muốn sử dụng, vì vậy tôi thực sự sẽ thay đổi "example.com" ở đây thành dấu hoa thị để nó có thể khớp với bất kỳ miền nào.

00:10:11.000 --> 00:10:25.000
Bên dưới đó, nó khai báo phần hành động của trình duyệt và ở đây chúng tôi xác định tệp "cửa sổ bật lên" và sau đó là một tập hợp các biểu tượng thanh công cụ mặc định - một lần nữa, bạn sẽ muốn nhớ cung cấp của riêng mình cho dự án của mình.

00:10:25.000 --> 00:10:31.000
Và cuối cùng, chúng tôi có khóa quyền, nơi tôi sẽ thêm activeTab làm quyền mà chúng tôi sẽ sử dụng.

00:10:31.000 --> 00:10:33.000
Tại sao lại hoạt độngTab?

00:10:33.000 --> 00:10:37.000
Tôi rất vui vì bạn đã hỏi.

00:10:37.000 --> 00:10:42.000
Chúng ta hãy xem nhanh các quyền khác nhau mà các tiện ích mở rộng có thể sử dụng.

00:10:42.000 --> 00:10:47.000
Mô hình tiện ích mở rộng trong Safari được thiết lập để giúp người dùng kiểm soát.

00:10:47.000 --> 00:10:54.000
Nó không hoạt động nếu không có sự tương tác của người dùng trước, và vì vậy chúng được gắn nhãn khi sử dụng lần đầu tiên để giúp đào tạo người dùng.

00:10:54.000 --> 00:11:04.000
Quyền được cấp cho mỗi trang web và điều đó có nghĩa là quyền của trang web sẽ hiển thị trong cài đặt và tùy chọn của Safari để người dùng kiểm soát.

00:11:04.000 --> 00:11:08.000
Bây giờ, có bốn hương vị thú vị của quyền để xem.

00:11:08.000 --> 00:11:10.000
Hãy xem qua từng cái.

00:11:10.000 --> 00:11:14.000
Loại quyền đầu tiên là quyền chèn tập lệnh.

00:11:14.000 --> 00:11:25.000
Điều này cho phép bạn đưa JavaScript và thậm chí cả các biểu định kiểu vào trang mà người dùng đang duyệt, dựa trên các miền của các trang web được liệt kê trong khóa khớp.

00:11:25.000 --> 00:11:33.000
Các tập lệnh tiêm tiện ích mở rộng được gắn huy hiệu trên thanh công cụ khi trang web mà người dùng đang duyệt khớp với mẫu trong phím khớp.

00:11:33.000 --> 00:11:37.000
Người dùng sẽ cần nhấp vào tiện ích mở rộng để kích hoạt nó.

00:11:37.000 --> 00:11:42.000
Và nó luôn chỉ ngồi đó, chờ đợi để được kích hoạt bởi người dùng.

00:11:42.000 --> 00:11:45.000
Loại quyền tiếp theo là quyền ngầm.

00:11:45.000 --> 00:11:50.000
Bây giờ, có một vài loại quyền ngầm khác nhau được khai báo trong tệp kê khai.

00:11:50.000 --> 00:11:57.000
Điều đầu tiên mà tôi đã nhấn mạnh ở đây là không nhạy cảm, điều này không yêu cầu bất kỳ đặc quyền bổ sung nào.

00:11:57.000 --> 00:12:06.000
Và loại thứ hai là quyền nhạy cảm vì chúng có dữ liệu nhận dạng trang web và đây là một trong những cách mà chúng tôi bảo vệ quyền riêng tư của người dùng.

00:12:06.000 --> 00:12:10.000
Khi bạn gọi một API, nó sẽ đợi một cuộc gọi lại với dữ liệu.

00:12:10.000 --> 00:12:17.000
Người dùng được nhắc nhở sau khi tương tác với tiện ích mở rộng và họ sẽ có khoảng một phút để phản hồi.

00:12:17.000 --> 00:12:21.000
Khi họ phê duyệt nó, cuộc gọi lại sẽ được hoàn thành và dữ liệu được trả lại.

00:12:21.000 --> 00:12:26.000
Bất cứ điều gì họ đã phê duyệt đều được hoàn thành ngay lập tức.

00:12:26.000 --> 00:12:34.000
Loại quyền tiếp theo là quyền rõ ràng và điều này rõ ràng vì bản thân tiện ích mở rộng đang yêu cầu quyền.

00:12:34.000 --> 00:12:42.000
Một lời nhắc luôn được hiển thị theo phương thức và nó không được gắn huy hiệu vì đó là chính tiện ích mở rộng yêu cầu quyền, không phải người dùng.

00:12:42.000 --> 00:12:45.000
Và loại quyền cuối cùng là quyền tab hoạt động.

00:12:45.000 --> 00:12:50.000
Đây là một trường hợp đặc biệt trong đó nếu bạn muốn tránh cảnh báo, tab hoạt động là câu trả lời.

00:12:50.000 --> 00:12:57.000
Người dùng sẽ cần tương tác với tiện ích mở rộng thông qua thanh công cụ hoặc trên Mac, họ có thể sử dụng phím tắt hoặc menu theo ngữ cảnh.

00:12:57.000 --> 00:13:03.000
Điều này cấp quyền tab cho miền hiện tại trong tab hiện tại.

00:13:03.000 --> 00:13:07.000
Và đó là cái mà chúng tôi muốn sử dụng hôm nay.

00:13:07.000 --> 00:13:10.000
Bây giờ hãy chuyển sang mã hóa tập lệnh nội dung.

00:13:10.000 --> 00:13:14.000
Và mẫu kịch bản nội dung được thiết lập để gửi và nghe tin nhắn.

00:13:14.000 --> 00:13:19.000
Bây giờ, chúng ta sẽ không cần gửi tin nhắn từ tập lệnh nội dung, nhưng chúng ta sẽ cần lắng nghe một tin nhắn.

00:13:19.000 --> 00:13:34.000
Điều đầu tiên chúng tôi cần tập lệnh nội dung của mình là lấy siêu dữ liệu Open Graph từ trang mà người dùng đang duyệt và chúng tôi chỉ có thể sử dụng một số API DOM đơn giản để tìm các thẻ meta phù hợp cho tiêu đề, mô tả và hình ảnh OG.

00:13:34.000 --> 00:13:47.000
Bây giờ, cách thức hoạt động của tiện ích mở rộng, người dùng sẽ nhấn vào tiện ích mở rộng để mở cửa sổ bật lên và công việc của tập lệnh bật lên là yêu cầu tập lệnh nội dung cho dữ liệu Open Graph từ trang hiện tại.

00:13:47.000 --> 00:13:54.000
Vì vậy, trong cuộc gọi lại của người nghe này, chúng tôi muốn nghe một tin nhắn với từ ma thuật.

00:13:54.000 --> 00:14:01.000
Bây giờ, nếu chúng ta nhận được một tin nhắn mà không có từ ma thuật, thì chúng ta sẽ không làm gì cả.

00:14:01.000 --> 00:14:03.000
Trên thực tế, chúng tôi sẽ trả lại khoảng trống ở đây.

00:14:03.000 --> 00:14:10.000
Nhưng nếu chúng tôi nhận được một tin nhắn với từ ma thuật, thì chúng tôi sẽ gửi lại dữ liệu từ các thẻ meta.

00:14:10.000 --> 00:14:13.000
Và đó là tất cả những gì chúng ta cần làm trong tập lệnh nội dung.

00:14:13.000 --> 00:14:19.000
Vì vậy, hãy chuyển sang thiết lập cửa sổ bật lên của chúng tôi và chúng tôi sẽ bắt đầu trong tệp HTML bật lên.

00:14:19.000 --> 00:14:25.000
Bạn có thể xem bảng định kiểu và JavaScript cho cửa sổ bật lên được bao gồm ngay tại đây.

00:14:25.000 --> 00:14:27.000
Vì vậy, đối với các nhà phát triển web, bạn sẽ cảm thấy như ở nhà.

00:14:27.000 --> 00:14:37.000
Bây giờ để đánh dấu của chúng tôi trong tệp này, chúng tôi chỉ cần thiết lập một số yếu tố giữ chỗ cho tiêu đề và mô tả và xem trước hình ảnh của chúng tôi.

00:14:37.000 --> 00:14:49.000
Vì vậy, bây giờ chúng tôi có một phần tử giữ chỗ cho tiêu đề, và cho mô tả, và cho hình ảnh của chúng tôi.

00:14:49.000 --> 00:14:55.000
Tiếp theo, sẽ thực hiện một số điều chỉnh đối với bảng định kiểu cửa sổ bật lên của chúng tôi.

00:14:55.000 --> 00:15:04.000
Ở đây, tôi chỉ cần thực hiện một vài điều chỉnh nhỏ để làm cho nó trông tuyệt vời trên tất cả các nền tảng.

00:15:04.000 --> 00:15:12.000
Và cuối cùng, tôi chỉ cần thiết lập một bố cục thiết kế đáp ứng cho các hình ảnh để lấp đầy không gian và duy trì tỷ lệ khung hình.

00:15:12.000 --> 00:15:24.000
Cuối cùng, chúng ta đi đến trung tâm của tiện ích mở rộng bằng cách chỉnh sửa tập lệnh bật lên và trước tiên chúng ta cần lấy tham chiếu đến các phần tử giữ chỗ mà chúng ta đã xác định trong tệp HTML bật lên của mình.

00:15:24.000 --> 00:15:32.000
Tiếp theo, chúng ta cần gửi một tin nhắn đến tập lệnh nội dung và để làm điều đó, chúng ta cần truy vấn tab đang hoạt động.

00:15:32.000 --> 00:15:40.000
Vì vậy, để truy vấn tab đang hoạt động trong cửa sổ hiện tại, chúng tôi sẽ sử dụng tabs.query API.

00:15:40.000 --> 00:15:48.000
Và trong tabs.query API, chúng tôi sẽ lọc theo tab hoạt động trong cửa sổ hiện tại.

00:15:48.000 --> 00:15:53.000
Khi chúng tôi có tab chính xác, bây giờ chúng tôi có thể gửi tin nhắn.

00:15:53.000 --> 00:16:04.000
Và khi gửi tin nhắn, chúng tôi sẽ chuyển ID tab hiện tại và tất nhiên, từ kỳ diệu của chúng tôi.

00:16:04.000 --> 00:16:10.000
Sau đó, khi chúng tôi nhận được phản hồi, chúng tôi chỉ cần cập nhật các phần tử giữ chỗ của mình với dữ liệu.

00:16:10.000 --> 00:16:12.000
Thế là xong!

00:16:12.000 --> 00:16:16.000
Bây giờ, hãy thử chạy tiện ích mở rộng của chúng tôi trong trình giả lập.

00:16:16.000 --> 00:16:21.000
Một lần nữa, từ menu Target, tôi sẽ chọn trình mô phỏng iPhone 13 Pro.

00:16:21.000 --> 00:16:28.000
Tôi sẽ nhấp vào nút xây dựng và chạy để bắt đầu quá trình và chuyển sang trình giả lập, nơi tôi sẽ đợi ứng dụng khởi chạy.

00:16:28.000 --> 00:16:33.000
Sau khi nó được khởi chạy, tôi có thể bật tiện ích mở rộng mới của chúng tôi trong ứng dụng Cài đặt.

00:16:33.000 --> 00:16:38.000
Vậy hãy chuyển sang Cài đặt và cuộn sang Safari.

00:16:38.000 --> 00:16:48.000
Sau đó nhấn vào nó và nhấn vào Tiện ích mở rộng, và trong Mở Bản xem trước đồ thị, tôi có thể bật nó lên.

00:16:48.000 --> 00:16:56.000
Bây giờ hãy khởi chạy Safari và tôi sẽ nhấn vào menu Aa.

00:16:56.000 --> 00:16:59.000
Và ở đó trong menu là Mở Xem trước Đồ thị.

00:16:59.000 --> 00:17:04.000
Bây giờ, khi tôi nhấn vào cái này, tôi nhận được yêu cầu cấp phép cho tập lệnh nội dung.

00:17:04.000 --> 00:17:06.000
Tôi sẽ chọn Cho phép trong một ngày.

00:17:06.000 --> 00:17:11.000
Và chơi lô tô, chúng tôi có bản xem trước dữ liệu biểu đồ mở của trang này.

00:17:11.000 --> 00:17:15.000
Bây giờ hãy thử nó trên một trang khác.

00:17:15.000 --> 00:17:20.000
Một lần nữa từ menu Aa, tôi sẽ nhấn Mở Xem trước Biểu đồ và Cho phép Trong Một Ngày.

00:17:20.000 --> 00:17:23.000
Và chúng tôi có nó ở đó, nhưng điều đó không hoàn toàn đúng.

00:17:23.000 --> 00:17:26.000
Chúng ta không nên có một hình ảnh bị hỏng.

00:17:26.000 --> 00:17:30.000
Vì vậy, để tìm hiểu chuyện gì đang xảy ra ở đây, tôi có thể sử dụng Web Inspector trong Safari.

00:17:30.000 --> 00:17:39.000
Nếu bạn chưa bật nó, hãy chuyển đến Tùy chọn Safari và trong tab Nâng cao, bật menu Hiển thị Phát triển trên thanh menu.

00:17:39.000 --> 00:17:45.000
Sau đó từ menu Phát triển, bạn có thể chọn Trình kiểm tra web cho nội dung từ trình giả lập.

00:17:45.000 --> 00:17:50.000
Và khi tôi làm điều đó, tôi có thể dễ dàng thấy rằng hình ảnh không tải.

00:17:50.000 --> 00:17:55.000
Vì vậy, nếu URL sai, điều đó có thể đến từ nội dung.

00:17:55.000 --> 00:18:06.000
Vì vậy, hãy mở một Trình kiểm tra Web khác cho webkit.org.

00:18:06.000 --> 00:18:10.000
Bây giờ tôi có thể tìm kiếm dữ liệu thẻ og meta.

00:18:10.000 --> 00:18:18.000
Và ở đây tôi có thể thấy chúng tôi có một tiêu đề, và chúng tôi có một mô tả - Ah, nhưng chúng tôi đang thiếu hình ảnh.

00:18:18.000 --> 00:18:19.000
Và đó là những gì đang diễn ra.

00:18:19.000 --> 00:18:22.000
Chúng tôi có một trường hợp không xác định mà chúng tôi không xử lý.

00:18:22.000 --> 00:18:30.000
Vì vậy, trở lại Xcode, tất cả những gì chúng ta cần làm là xử lý trường hợp không xác định đó.

00:18:30.000 --> 00:18:33.000
Bây giờ tôi có thể thử chạy lại cái này.

00:18:33.000 --> 00:18:48.000
Nhấp vào nút Xây dựng và Chạy, tôi sẽ nhấp vào Thay thế để thay thế nó trên trình giả lập và khi nó khởi chạy trên trình giả lập, tôi có thể quay lại Safari và thử lại.

00:18:48.000 --> 00:18:53.000
Từ menu Aa, tôi sẽ chọn Open Graph Preview và bingo.

00:18:53.000 --> 00:18:55.000
Hoàn hảo!

00:18:55.000 --> 00:19:04.000
Nó hiển thị tiêu đề và mô tả, nhưng chúng ta nên đảm bảo rằng nó hoạt động trên một trang có hình ảnh, và nó có.

00:19:04.000 --> 00:19:07.000
Hoàn hảo!

00:19:07.000 --> 00:19:15.000
Chà, làm cho nó hoạt động trong trình giả lập là một cách tuyệt vời để kiểm tra trên một số thiết bị, nhưng luôn luôn là một ý tưởng tốt để kiểm tra trên một thiết bị thực.

00:19:15.000 --> 00:19:18.000
Vì vậy, tôi có một chiếc iPhone tiện dụng.

00:19:18.000 --> 00:19:27.000
Quay lại Xcode, tôi sẽ chọn menu Target và chọn iPhone.

00:19:27.000 --> 00:19:39.000
Bây giờ hãy xây dựng và chạy và khởi chạy nó trên thiết bị này.

00:19:39.000 --> 00:19:45.000
Sau khi nó chạy trên thiết bị và khởi chạy, tôi sẽ cần bật nó trong Cài đặt.

00:19:45.000 --> 00:19:48.000
Vậy hãy quay lại ứng dụng Cài đặt.

00:19:48.000 --> 00:19:54.000
Trong Safari và Tiện ích mở rộng và Mở Bản xem trước Biểu đồ, chúng tôi sẽ bật nó lên.

00:19:54.000 --> 00:19:59.000
Bây giờ, khởi chạy Safari một lần nữa, tôi sẽ nhấn vào menu Aa.

00:19:59.000 --> 00:20:05.000
Và tôi có thể thấy tiện ích mở rộng và nhấn vào nó, và Cho phép trong một ngày.

00:20:05.000 --> 00:20:08.000
Và nó hoạt động hoàn hảo.

00:20:08.000 --> 00:20:14.000
Hãy thử điều này trên một vài trang khác để đảm bảo rằng chúng tôi có tất cả các trường hợp hoạt động.

00:20:14.000 --> 00:20:21.000
Ở đây trên developer.apple.com nó không nhắc thêm sự cho phép vì nó là một phần của miền apple.com.

00:20:21.000 --> 00:20:27.000
Hãy thử trên webkit.org.

00:20:27.000 --> 00:20:36.000
Và ở đây chúng ta sẽ nhấn vào menu Aa một lần nữa và Mở Bản xem trước đồ thị và một lần nữa nó nhắc nhở vì đây là một trang web khác.

00:20:36.000 --> 00:20:38.000
Hoàn hảo.

00:20:38.000 --> 00:20:42.000
Và một cái nữa trên bài đăng với một hình ảnh.

00:20:42.000 --> 00:20:46.000
Chúng ta sẽ nhấn vào Aa, Mở Xem trước Biểu đồ.

00:20:46.000 --> 00:20:49.000
Hoàn hảo!

00:20:49.000 --> 00:20:50.000
Vì vậy, xuất sắc.

00:20:50.000 --> 00:20:59.000
Bây giờ chúng tôi đã có ứng dụng và tiện ích mở rộng của mình hoạt động trong trình giả lập và một thiết bị thực, tôi muốn nói rằng chúng tôi đã sẵn sàng gửi ứng dụng này đến App Store.

00:20:59.000 --> 00:21:03.000
Đầu tiên, có một chi tiết nhanh cần giải quyết trước khi gửi.

00:21:03.000 --> 00:21:10.000
Trong cài đặt dự án của bạn, chọn mục tiêu ứng dụng iOS của bạn và đảm bảo đặt Danh mục ứng dụng.

00:21:10.000 --> 00:21:13.000
Tôi sẽ chọn Công cụ dành cho nhà phát triển.

00:21:13.000 --> 00:21:19.000
Tiếp theo, từ menu Sản phẩm, chọn Lưu trữ.

00:21:19.000 --> 00:21:27.000
Và tương tự như quá trình xây dựng, bạn sẽ thấy tiến trình ở phía bên phải của thanh trạng thái.

00:21:27.000 --> 00:21:33.000
Khi nó đã sẵn sàng, hãy chọn kho lưu trữ bản dựng mà bạn đã sẵn sàng gửi và nhấp vào nút Phân phối ứng dụng.

00:21:33.000 --> 00:21:39.000
Từ trợ lý, trong phương pháp phân phối, chúng tôi sẽ chọn App Store Connect và nhấp vào Next.

00:21:39.000 --> 00:21:44.000
Đối với điểm đến, tôi sẽ rời khỏi Tải lên và nhấp vào Tiếp theo.

00:21:44.000 --> 00:21:52.000
Và nó sẽ bắt đầu giao tiếp với App Store Connect để chuẩn bị một bản ghi ứng dụng.

00:21:52.000 --> 00:22:00.000
Tại đây tôi có thể xem lại tên và đảm bảo SKU của tôi là duy nhất trong số các SKU được sử dụng cho các ứng dụng khác trong tài khoản App Store Connect của tôi.

00:22:00.000 --> 00:22:06.000
Bây giờ tôi sẽ nhấp vào nút Tiếp theo và nó bắt đầu chuẩn bị hồ sơ ứng dụng của chúng tôi để xem xét.

00:22:06.000 --> 00:22:10.000
Tuy nhiên, trước tiên, có một số tùy chọn phân phối mà nó sẽ yêu cầu.

00:22:10.000 --> 00:22:15.000
Tất cả những thứ này đều rất hữu ích, vì vậy tôi sẽ để lại chúng và nhấp vào Tiếp theo.

00:22:15.000 --> 00:22:22.000
Và tôi chắc chắn muốn tiếp tục Tự động quản lý việc ký và nhấp vào Tiếp theo.

00:22:22.000 --> 00:22:28.000
Bây giờ chúng ta sẽ có cơ hội xem lại nội dung ứng dụng và nội dung tiện ích mở rộng.

00:22:28.000 --> 00:22:35.000
Khi chúng ta hài lòng với nó, tôi sẽ nhấp vào Tải lên.

00:22:35.000 --> 00:22:41.000
Trong khi chúng ta chờ quá trình tải lên hoàn tất, chúng ta hãy xem nhanh một số mẹo để xem qua Đánh giá App Store.

00:22:41.000 --> 00:22:49.000
Trước tiên, hãy đảm bảo rằng bạn sở hữu tất cả mã và bất kỳ nội dung, hình ảnh hoặc tài sản nào khác được sử dụng trong dự án của bạn.

00:22:49.000 --> 00:22:55.000
Đảm bảo bạn có hoặc có thể chứng minh quyền đối với bất kỳ API hoặc khung JavaScript nào được gọi.

00:22:55.000 --> 00:23:03.000
Bạn cũng sẽ muốn nhớ cung cấp một biểu tượng tùy chỉnh và sử dụng một tên duy nhất cho ứng dụng của mình - giúp nó nổi bật trên App Store.

00:23:03.000 --> 00:23:05.000
Và đừng chỉ trang trí trang web bằng biểu tượng cảm xúc.

00:23:05.000 --> 00:23:11.000
Các tiện ích mở rộng web tốt nhất - những tiện ích được giới thiệu - cung cấp một cái gì đó hữu ích cho người dùng.

00:23:11.000 --> 00:23:19.000
Và nếu bạn có mã cho bất kỳ khoản thanh toán web hoặc quyên góp nào cho một trình duyệt khác, bạn sẽ cần tắt nó để Đánh giá App Store.

00:23:19.000 --> 00:23:24.000
Việc bán trước các tiện ích mở rộng rất dễ dàng và cực kỳ phổ biến trong App Store.

00:23:24.000 --> 00:23:28.000
Hãy kiểm tra quá trình tải lên đó.

00:23:28.000 --> 00:23:30.000
Quá trình tải lên đã hoàn thành thành công.

00:23:30.000 --> 00:23:31.000
Tuyệt vời.

00:23:31.000 --> 00:23:38.000
Bây giờ trong Safari, tôi có thể đăng nhập vào App Store Connect và nhấp vào My Apps để xem bản ghi ứng dụng mới đã được tạo.

00:23:38.000 --> 00:23:43.000
Và nhấp vào Mở Bản xem trước Biểu đồ, tôi có thể cung cấp một số thông tin bổ sung cho App Store.

00:23:43.000 --> 00:23:47.000
Bạn sẽ muốn cung cấp một số hình ảnh xem trước cho ứng dụng của mình.

00:23:47.000 --> 00:23:53.000
Và sau đó trong Văn bản quảng cáo, bạn nên cung cấp một số thông tin mô tả về những gì mới trong bản phát hành này.

00:23:53.000 --> 00:24:02.000
Trong phần Mô tả, bạn sẽ muốn cung cấp mô tả đầy đủ về những gì tiện ích mở rộng này làm cho người dùng của bạn và sau đó bạn cũng có thể cung cấp một số từ khóa.

00:24:02.000 --> 00:24:06.000
Lưu ý giới hạn trăm ký tự; bạn sẽ cần phải chính xác.

00:24:06.000 --> 00:24:12.000
Bạn cũng sẽ muốn cung cấp một URL cụ thể cho một trang nơi người dùng có thể nhận được hỗ trợ cho tiện ích mở rộng của bạn.

00:24:12.000 --> 00:24:16.000
Và tùy chọn, bạn có thể bao gồm một địa chỉ cho một trang tiếp thị.

00:24:16.000 --> 00:24:21.000
Sau đó, bạn sẽ sử dụng các công cụ tải lên để chọn tải lên chính xác cho ứng dụng của mình.

00:24:21.000 --> 00:24:31.000
Và một khi bạn đã điền tất cả những thứ đó, bạn có thể nhấp vào nút Gửi để Đánh giá để bắt đầu quá trình Đánh giá Ứng dụng.

00:24:31.000 --> 00:24:36.000
Và đó là cách dễ dàng để xây dựng và gửi các tiện ích mở rộng web Safari.

00:24:36.000 --> 00:24:45.000
Chúng tôi khuyến khích bạn gửi tiện ích mở rộng của mình cho cả iOS và MacOS và kiểm tra các tài nguyên liên quan đến phiên này.

00:24:45.000 --> 00:24:48.000
Và hãy chắc chắn gửi phản hồi; chúng tôi rất muốn nghe ý kiến của bạn.

00:24:48.000 --> 00:24:54.000
Bạn có thể sử dụng Trợ lý Phản hồi để gửi lỗi hoặc thực hiện các yêu cầu tính năng.

00:24:54.000 --> 23:59:59.000
Và cảm ơn vì đã xem.

