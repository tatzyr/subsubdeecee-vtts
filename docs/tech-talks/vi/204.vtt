WEBVTT

00:00:01.000 --> 00:00:09.000
Là một nhà phát triển ứng dụng, điều quan trọng là bạn phải biết chính xác những gì ứng dụng của bạn đang lưu trữ trên đĩa, mọi thứ đang được lưu trữ ở đâu và tại sao cần thiết.

00:00:09.000 --> 00:00:17.000
Cách tốt nhất để cập nhật những chi tiết này là kiểm kê những gì ứng dụng của bạn thực sự lưu trữ.

00:00:17.000 --> 00:00:25.000
Để bắt đầu, hãy xây dựng và chạy ứng dụng của bạn trên một thiết bị, sau đó thực hiện tất cả các tính năng sẽ lưu trữ mọi thứ trên đĩa.

00:00:25.000 --> 00:00:30.000
Khi bạn đã làm xong việc này, đã đến lúc xem xét những gì thực sự được lưu trữ và ở đâu.

00:00:30.000 --> 00:00:38.000
Sử dụng cửa sổ Thiết bị và Trình mô phỏng trong Xcode để trích xuất vùng chứa ứng dụng của bạn để chúng tôi có thể thấy những gì có trong đó.

00:00:38.000 --> 00:00:45.000
Chọn thiết bị của bạn ở cột bên trái, sau đó chọn ứng dụng của bạn trong danh sách Ứng dụng đã cài đặt.

00:00:45.000 --> 00:00:53.000
Và sử dụng biểu tượng bánh răng, chọn Tải xuống vùng chứa và lưu nó trên máy Mac của bạn.

00:00:53.000 --> 00:00:59.000
Trong Finder, Control-click vào tệp xcappdata đã được tải xuống.

00:00:59.000 --> 00:01:06.000
Chọn Hiển thị Nội dung Gói và đi vào thư mục Dữ liệu Ứng dụng và bắt đầu kiểm kê.

00:01:06.000 --> 00:01:12.000
Xem qua các thư mục để xem những gì được lưu trữ trong mỗi thư mục.

00:01:12.000 --> 00:01:17.000
Đối với mỗi tệp, hãy đảm bảo rằng bạn có thể xác định nó là gì và tại sao nó được lưu trữ.

00:01:17.000 --> 00:01:22.000
Nếu bạn không chắc tại sao có thứ gì đó ở đó, bạn có thể loại bỏ nó.

00:01:22.000 --> 00:01:31.000
Bạn muốn xác minh rằng bạn đang đặt đúng tệp vào các thư mục thích hợp và cũng xem xét liệu tệp có nên được đưa vào bản sao lưu iTunes và iCloud hay không.

00:01:31.000 --> 00:01:37.000
Chỉ bạn mới có thể trả lời hai câu hỏi đầu tiên, vì chúng liên quan đến chức năng ứng dụng của bạn.

00:01:37.000 --> 00:01:42.000
Tôi sẽ tập trung vào hai câu hỏi cuối cùng và bắt đầu với nơi lưu trữ các tệp.

00:01:42.000 --> 00:01:49.000
iCloud Drive là nơi tốt nhất để đặt tài liệu vì chúng có sẵn trên tất cả các thiết bị của người dùng.

00:01:49.000 --> 00:02:00.000
Bởi vì nội dung trong thư mục ứng dụng của bạn trên iCloud Drive hiển thị, điều quan trọng là bạn chỉ đặt tài liệu vào đó mà mọi người sẽ nhận ra và truy cập trực tiếp.

00:02:00.000 --> 00:02:09.000
Ứng dụng của bạn đọc và ghi nội dung cục bộ, và sau đó hệ điều hành sẽ tự động tải lên các tệp đó khi mạng khả dụng.

00:02:09.000 --> 00:02:18.000
Vì nhiều thiết bị có thể truy cập các tệp trong iCloud Drive cùng một lúc, bạn cần sử dụng phối hợp tệp để tránh bất kỳ xung đột nào.

00:02:18.000 --> 00:02:22.000
Vì vậy, hãy chắc chắn đọc tài liệu để biết thêm chi tiết.

00:02:22.000 --> 00:02:28.000
Đối với các tệp được lưu trữ cục bộ, thư mục Tài liệu có sẵn trong vùng chứa ứng dụng của bạn.

00:02:28.000 --> 00:02:33.000
Giống như với iCloud Drive, bạn chỉ nên lưu trữ các tài liệu hiển thị của người dùng ở đây.

00:02:33.000 --> 00:02:44.000
Khi bạn đã xác minh rằng thư mục Tài liệu của bạn chỉ chứa các tệp cần được hiển thị, ứng dụng Tệp có thể hiển thị chúng ở vị trí Trên iPhone của tôi hoặc Trên iPad của tôi.

00:02:44.000 --> 00:02:54.000
Để làm điều này, ứng dụng của bạn nên hỗ trợ Open in Place và cho biết rằng việc chia sẻ tệp đã được bật, cả hai đều được định cấu hình trong tệp Info.plist của bạn.

00:02:54.000 --> 00:03:04.000
Ngoài việc xem các tệp của họ trong ứng dụng Tệp, mọi người có thể tìm thấy các tệp của họ trong Spotlight và trên iPad, kéo và thả chúng vào các ứng dụng khác.

00:03:04.000 --> 00:03:14.000
Một lợi ích tuyệt vời khác của việc hiển thị thư mục Tài liệu của bạn là mọi người sẽ thấy các tệp của họ trong Giao diện người dùng Cài đặt Lưu trữ và có thể xóa các mục riêng lẻ.

00:03:14.000 --> 00:03:22.000
Điều này giúp quản lý dung lượng đĩa dễ dàng hơn nhiều và sẽ giảm khả năng toàn bộ ứng dụng của bạn bị xóa khi dung lượng thấp.

00:03:22.000 --> 00:03:29.000
Nhưng hãy nhớ rằng, những thứ duy nhất nên được đưa vào thư mục Tài liệu là các tệp sẽ có ý nghĩa đối với những người sử dụng ứng dụng của bạn.

00:03:29.000 --> 00:03:35.000
Câu hỏi quan trọng bạn nên hỏi là, "Người dùng của tôi có thể xem tệp này không?"

00:03:35.000 --> 00:03:38.000
Nếu câu trả lời là có, thì tốt thôi.

00:03:38.000 --> 00:03:45.000
Nhưng nếu câu trả lời là không, hãy di chuyển nó ra khỏi thư mục Tài liệu và vào một trong các vị trí sau.

00:03:45.000 --> 00:03:54.000
Thư mục Hỗ trợ Ứng dụng là một nơi tốt để lưu trữ các tệp có thể nằm trong thư mục Tài liệu của bạn nhưng người dùng không nên nhìn thấy điều đó.

00:03:54.000 --> 00:04:00.000
Ví dụ, một cơ sở dữ liệu mà ứng dụng của bạn cần nhưng người dùng sẽ không bao giờ mở thủ công.

00:04:00.000 --> 00:04:06.000
Bạn có thể lưu trữ các tệp ở cấp cao nhất hoặc bạn có thể tạo thư mục nếu điều đó giúp giữ mọi thứ ngăn nắp.

00:04:06.000 --> 00:04:10.000
Thư mục hoàn toàn nằm dưới sự kiểm soát của bạn và nó liên tục.

00:04:10.000 --> 00:04:18.000
Nội dung được bao gồm trong các bản sao lưu theo mặc định, nhưng bạn có thể chọn không tham gia các tệp nếu chúng không cần sao lưu.

00:04:18.000 --> 00:04:28.000
Và cuối cùng, dung lượng đĩa được sử dụng trong thư mục Hỗ trợ Ứng dụng được báo cáo trong Giao diện người dùng Cài đặt Lưu trữ dưới tổng Tài liệu &amp; Dữ liệu của ứng dụng của bạn.

00:04:28.000 --> 00:04:32.000
Vị trí tiếp theo có sẵn cho ứng dụng của bạn là thư mục Bộ nhớ đệm.

00:04:32.000 --> 00:04:36.000
Bạn có thể lưu trữ các tệp ở đây có thể bị loại bỏ nếu dung lượng thấp.

00:04:36.000 --> 00:04:41.000
Đây là một vị trí tốt cho bất kỳ nội dung nào có thể tải xuống lại khi cần thiết.

00:04:41.000 --> 00:04:45.000
Nội dung của thư mục Caches không được bao gồm trong bản sao lưu.

00:04:45.000 --> 00:04:51.000
Khi một thiết bị sắp hết dung lượng đĩa, iOS có thể trợ giúp bằng cách xóa bộ nhớ cache.

00:04:51.000 --> 00:05:01.000
Các tệp sẽ không bao giờ bị xóa khỏi thư mục bộ nhớ cache của bạn nếu ứng dụng của bạn đang chạy và hệ điều hành sẽ bắt đầu bằng cách xóa bộ nhớ cache cho các ứng dụng đã không được sử dụng trong một thời gian.

00:05:01.000 --> 00:05:08.000
Như một phần thưởng cho bạn, các tệp trong thư mục bộ nhớ cache của bạn không được báo cáo như một phần trong tổng số Tài liệu &amp; Dữ liệu của ứng dụng của bạn.

00:05:08.000 --> 00:05:13.000
Mặc dù chúng được bao gồm trong không gian tổng thể được sử dụng bởi các ứng dụng.

00:05:13.000 --> 00:05:20.000
Và cuối cùng, bạn có thể đặt các tệp mà bạn sẽ không cần trong bất kỳ khoảng thời gian dài nào vào thư mục Tạm thời.

00:05:20.000 --> 00:05:29.000
Mặc dù hệ điều hành sẽ định kỳ xóa các tệp này khi ứng dụng của bạn không chạy, tốt nhất bạn nên xóa chúng khi bạn hoàn tất chúng.

00:05:29.000 --> 00:05:37.000
Giống như thư mục Caches, thư mục Tạm thời không được sao lưu và không được báo cáo trong tổng Tài liệu &amp; Dữ liệu của ứng dụng của bạn.

00:05:37.000 --> 00:05:41.000
Đây là tất cả các vị trí phổ biến mà ứng dụng của bạn có thể lưu trữ tệp.

00:05:41.000 --> 00:05:53.000
Sử dụng iCloud Drive và thư mục Tài liệu cho các tệp có thể truy cập được trong ứng dụng Tệp, trong khi hỗ trợ ứng dụng, bộ nhớ cache và thư mục tạm thời đều được sử dụng riêng cho ứng dụng của bạn.

00:05:53.000 --> 00:05:57.000
Hãy chắc chắn xem lại nơi bạn đang lưu trữ mọi thứ và sử dụng đúng thư mục.

00:05:57.000 --> 00:06:01.000
Cuối cùng, một vài mẹo thực hành tốt nhất.

00:06:01.000 --> 00:06:12.000
Nếu bạn có các tệp không cần đưa vào bản sao lưu iTunes hoặc iCloud, hãy sử dụng NSFileManager APIs để đặt "IsExcludedFromBackupKey".

00:06:12.000 --> 00:06:18.000
Bạn cũng muốn có khả năng phục hồi các tệp có thể được khôi phục từ phiên bản cũ hơn của ứng dụng của bạn.

00:06:18.000 --> 00:06:32.000
Ví dụ: nếu bạn có phiên bản 32-bit của ứng dụng và các tệp của nó đã được sao lưu, thì đối với phiên bản 64-bit của ứng dụng, những tệp cũ hơn đó có thể được khôi phục và bạn cần có khả năng xử lý tình huống đó.

00:06:32.000 --> 00:06:40.000
Tốt nhất là sử dụng sơ đồ lập phiên bản trên các tệp của mình để bạn có thể cung cấp khả năng tương thích mạnh mẽ trên nhiều phiên bản ứng dụng của mình.

00:06:40.000 --> 00:06:44.000
Và hãy chắc chắn rằng bạn chỉ lưu trữ tệp ở một vị trí.

00:06:44.000 --> 00:06:51.000
Ví dụ: nếu bạn đặt các tệp vào thư mục Tài liệu cục bộ của mình, đừng sao chép chúng trong iCloud Drive.

00:06:51.000 --> 00:06:53.000
Chọn một nơi và bám sát nó.

00:06:53.000 --> 00:07:05.000
Đối với tài liệu người dùng, tôi khuyên bạn nên chọn vị trí lưu trữ đám mây trừ khi bạn có lý do cụ thể để lưu trữ tệp chỉ cục bộ vào thiết bị.

00:07:05.000 --> 00:07:16.000
Và cuối cùng, một số chi tiết dung lượng âm lượng mới có sẵn trong iOS 11 để giúp biết liệu đây có phải là thời điểm tốt để ứng dụng của bạn chiếm nhiều dung lượng đĩa hơn hay không.

00:07:16.000 --> 00:07:28.000
Chìa khóa đầu tiên, Dung lượng khả dụng cho việc sử dụng quan trọng, cho biết dung lượng có thể được cung cấp cho những thứ mà người dùng đã yêu cầu rõ ràng trong giao diện người dùng ứng dụng của bạn.

00:07:28.000 --> 00:07:34.000
Ví dụ, nếu họ đã chọn tải xuống một video hoặc một cấp độ mới trong một trò chơi.

00:07:34.000 --> 00:07:41.000
Nếu không gian bạn cần lớn hơn những gì có sẵn, bạn nên cho họ biết rằng yêu cầu của họ không thể được đáp ứng.

00:07:41.000 --> 00:07:53.000
Chìa khóa thứ hai, Dung lượng khả dụng cho việc sử dụng cơ hội, cho biết dung lượng có sẵn cho những thứ mà người dùng có thể muốn, nhưng chưa được yêu cầu rõ ràng.

00:07:53.000 --> 00:08:02.000
Đây có thể là một cái gì đó giống như tập tiếp theo trong một loạt video mà họ đang xem hoặc các tài liệu được cập nhật gần đây trên máy chủ mà họ có thể sẽ mở.

00:08:02.000 --> 00:08:15.000
Đối với các loại tệp này, ban đầu bạn có thể lưu trữ chúng trong thư mục Caches cho đến khi chúng thực sự được sử dụng, tại thời điểm đó bạn có thể chuyển chúng đến thư mục Hỗ trợ Ứng dụng hoặc Tài liệu.

00:08:15.000 --> 00:08:24.000
Sau khi kiểm kê và xác định những gì ứng dụng của bạn đã lưu trữ, nếu bạn tìm thấy thứ gì đó không đúng chỗ, thì hãy cập nhật mã của bạn để đưa nó vào thư mục thích hợp.

00:08:24.000 --> 00:08:30.000
Và đừng quên thêm bất kỳ mã di chuyển cần thiết nào để di chuyển các tệp từ nơi này sang nơi khác.

00:08:30.000 --> 00:08:35.000
Nếu bạn không làm điều này, bạn có thể vô tình bỏ lại các tệp bị bỏ rơi.

00:08:35.000 --> 00:08:43.000
Bằng cách dọn dẹp bộ nhớ trên đĩa của bạn, bạn có thể mở thư mục Tài liệu của mình cho mọi người trong ứng dụng Tệp và họ thậm chí có thể làm việc hiệu quả hơn với ứng dụng của bạn.

00:08:43.000 --> 00:08:48.000
Bạn có thể tìm thêm thông tin tại developer.apple.com hoặc trên Diễn đàn Nhà phát triển của chúng tôi.

00:08:48.000 --> 23:59:59.000
Cảm ơn vì đã xem!

