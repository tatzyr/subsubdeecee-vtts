WEBVTT

00:00:00.000 --> 00:00:03.000
Xin chào, tên tôi là Tim Chien.

00:00:03.000 --> 00:00:09.000
Tôi là một kỹ sư trong nhóm MapKit ở đây tại Apple, làm việc trên MapKit JS.

00:00:09.000 --> 00:00:22.000
Hôm nay tôi sẽ nói về một số tính năng mới thú vị mà bạn có thể sử dụng để mang lại trải nghiệm tốt nhất có thể khi tích hợp MapKit JS với ứng dụng web của mình.

00:00:22.000 --> 00:00:31.000
Kể từ khi giới thiệu MapKit JS vào năm 2018, chúng tôi đã làm việc không mệt mỏi để bổ sung các tính năng mới mỗi năm.

00:00:31.000 --> 00:00:52.000
Cùng với đó, MapKit JS đã trở thành một phần không thể thiếu trong dịch vụ web của Apple, được tích hợp vào nhiều trang web như trong máy chủ Find My của riêng chúng tôi trên icloud.com và các trang web của bên thứ ba như DuckDuckGo và trang web tìm kiếm tài sản ở Hy Lạp.

00:00:52.000 --> 00:00:59.000
Bạn sẽ nhận thấy trang web này đang tận dụng khả năng bản địa hóa các tính năng bản đồ của MapKit JS.

00:00:59.000 --> 00:01:08.000
Chúng tôi đã giúp việc áp dụng MapKit JS trong bất kỳ ứng dụng web nào trở nên cực kỳ dễ dàng với việc bao gồm và khởi tạo đơn giản.

00:01:08.000 --> 00:01:18.000
Tuy nhiên, chúng tôi muốn cung cấp cho bạn sự linh hoạt để áp dụng MapKit JS theo cách tối ưu hóa hiệu suất của ứng dụng của bạn.

00:01:18.000 --> 00:01:41.000
Vì vậy, bắt đầu từ năm nay, chúng tôi đã hướng mắt đến hiệu suất và xem xét cách chúng tôi có thể làm cho các trang của bạn phản hồi nhanh hơn, tải nhanh hơn và theo cách được thiết kế để cung cấp cho bạn nhiều quyền kiểm soát hơn, cho phép bạn chỉ bao gồm các chức năng bạn cần khi bạn cần.

00:01:41.000 --> 00:02:05.000
Hôm nay, tôi rất vui khi giới thiệu ba tính năng mới sẽ làm được điều đó, bao gồm đánh dấu mới để tải MapKit JS hiệu suất cao, khả năng tải các thư viện MapKit JS bổ sung theo yêu cầu và cuối cùng là một cách mới để ứng dụng báo hiệu các tính năng bản đồ mong muốn để trình bày cho người dùng.

00:02:05.000 --> 00:02:16.000
Bây giờ để chứng minh cách những tính năng mới này có thể cải thiện ứng dụng web của bạn, giả sử bạn đang xây dựng một bản đồ kho báu tương tác cho những tên cướp biển đồng nghiệp của mình.

00:02:16.000 --> 00:02:20.000
Bạn đã áp dụng triển khai mặc định của MapKit JS.

00:02:20.000 --> 00:02:34.000
Tuy nhiên, khi xem trang này qua Wi-Fi tàu cướp biển tệ hại, mất quá nhiều thời gian để tải và người dùng phải đợi quá lâu để bản đồ xuất hiện, khiến bạn cùng tàu của bạn mất kiên nhẫn.

00:02:34.000 --> 00:02:41.000
Vì vậy, để ngăn chặn một cuộc nổi loạn, bạn có thể sử dụng đánh dấu tải MapKit JS hiệu suất cao mới.

00:02:41.000 --> 00:02:50.000
Nó hoán đổi việc triển khai mặc định cho một đánh dấu mở rộng với các thuộc tính bổ sung mà bạn sẽ sử dụng để điều chỉnh ứng dụng web của mình.

00:02:50.000 --> 00:03:02.000
Đầu tiên, MapKit JS hiện cung cấp một gói JavaScript mới, market.core.js, chỉ chứa lượng mã tối thiểu để bạn bắt đầu.

00:03:02.000 --> 00:03:08.000
Tiếp theo, chúng tôi muốn cho MapKit JS biết tập hợp con các tính năng mà chúng tôi sẽ cần.

00:03:08.000 --> 00:03:16.000
Ở đây, chúng tôi chỉ định thư viện bản đồ, đây là tính năng tối thiểu được đặt để hiển thị bản đồ tương tác.

00:03:16.000 --> 00:03:28.000
Chúng tôi sẽ ngăn MapKit JS chặn tải trang bằng cách sử dụng thuộc tính không đồng bộ và gọi lại được chỉ định bởi thuộc tính gọi lại dữ liệu khi tải xong.

00:03:28.000 --> 00:03:39.000
Vì MapKit JS không còn chặn trang tải nữa, ứng dụng web của bạn nên khẳng định sự sẵn sàng của nó trước khi đánh giá giao diện của nó lần đầu tiên.

00:03:39.000 --> 00:03:48.000
Ví dụ, đây là một hàm không đồng bộ sẽ phân giải thành giao diện MapKit khi MapKit JS sẵn sàng.

00:03:48.000 --> 00:03:55.000
Như mọi khi, MapKit JS có sẵn trên đối tượng cửa sổ toàn cầu ngay khi nó được tải.

00:03:55.000 --> 00:04:02.000
Nếu đối tượng MapKit không được xác định, điều đó có nghĩa là MapKit JS vẫn chưa được tải.

00:04:02.000 --> 00:04:07.000
Ngoài ra, chúng tôi muốn kiểm tra xem các thư viện ban đầu đã được tải chưa.

00:04:07.000 --> 00:04:14.000
Nhớ lại rằng chúng tôi đã yêu cầu thư viện bản đồ trong đánh dấu bằng cách sử dụng thuộc tính của thư viện dữ liệu.

00:04:14.000 --> 00:04:22.000
Không thành công trong hai bài kiểm tra có nghĩa là bộ gọi lại sử dụng thuộc tính gọi lại dữ liệu chưa được gọi.

00:04:22.000 --> 00:04:31.000
Ở đây chúng tôi chuyển đổi một cuộc gọi lại thành một lời hứa cho hàm không đồng bộ của chúng tôi và dọn dẹp cuộc gọi lại ngay sau khi giải quyết lời hứa.

00:04:31.000 --> 00:04:37.000
Cùng với đó, chúng tôi đã đảm bảo rằng MapKit JS đã sẵn sàng để triển khai khi tính năng này trở lại.

00:04:37.000 --> 00:04:40.000
Bây giờ, quay lại cú pháp.

00:04:40.000 --> 00:04:56.000
Có một số thuộc tính hữu ích khác trong đánh dấu hiệu suất cao của chúng tôi, bao gồm thuộc tính gốc chéo cho phép trình duyệt sử dụng lại một kết nối HTTP/2 duy nhất cho tất cả các yêu cầu đi đến MapKit JS CDN.

00:04:56.000 --> 00:05:03.000
Chúng tôi cũng muốn MapKit JS tự khởi tạo ngay khi có cơ hội làm như vậy.

00:05:03.000 --> 00:05:07.000
Chúng ta có thể đạt được điều đó bằng cách đặt mã thông báo ban đầu trong đánh dấu.

00:05:07.000 --> 00:05:18.000
Ghép nó lại với nhau và chúng tôi sẽ làm cho trang của chúng tôi tải nhanh hơn nữa, nhưng chúng tôi vẫn chưa đến đó.

00:05:18.000 --> 00:05:30.000
Vì chúng tôi chỉ yêu cầu thư viện bản đồ, chúng tôi sẽ cần tải thư viện chú thích để có thể đưa con tàu cướp biển và kho báu của chúng tôi trở lại bản đồ.

00:05:30.000 --> 00:05:34.000
Và đó là nơi mà tối ưu hóa thứ hai của chúng tôi có ích.

00:05:34.000 --> 00:05:40.000
Một phương pháp mới được cung cấp chỉ để tải xuống MapKit đó.

00:05:40.000 --> 00:05:44.000
Nó tải các thư viện bổ sung không đồng bộ theo yêu cầu.

00:05:44.000 --> 00:05:51.000
Và nếu bất kỳ thư viện nào bạn tải yêu cầu một thư viện khác, nó sẽ được xử lý tự động.

00:05:51.000 --> 00:05:54.000
Và nó đang hoạt động ở đây.

00:05:54.000 --> 00:06:01.000
Chỉ cần gọi phương thức tải xuống MapKit để tải thư viện chú thích.

00:06:01.000 --> 00:06:09.000
Thêm trình nghe cho sự kiện tải, sau đó thêm chú thích của bạn khi nó được gọi.

00:06:09.000 --> 00:06:13.000
Và tất nhiên, bạn có thể tải nhiều hơn chú thích.

00:06:13.000 --> 00:06:20.000
Ví dụ, các dịch vụ bao gồm tất cả các API dịch vụ như tìm kiếm và mã hóa địa lý.

00:06:20.000 --> 00:06:26.000
Bản đồ đầy đủ tải tất cả các tính năng có sẵn trên lớp bản đồ MapKit.

00:06:26.000 --> 00:06:36.000
Và điều đó bao gồm bản đồ cơ bản, lớp phủ, chú thích và hiển thị vị trí người dùng.

00:06:36.000 --> 00:06:45.000
Và GeoJSON tải trình nhập GeoJSON.

00:06:45.000 --> 00:06:52.000
Bây giờ, đây là một trải nghiệm tải tốt, nhưng chúng ta có thể làm tốt hơn thế này.

00:06:52.000 --> 00:07:00.000
Đây là tính năng thứ ba mà chúng tôi sẽ giới thiệu hôm nay: khởi động bản đồ ưu tiên.

00:07:00.000 --> 00:07:11.000
Với thuộc tính ưu tiên tải mới, chúng tôi có thể hướng dẫn MapKit JS hiển thị các điểm quan tâm sớm hơn để giúp cướp biển hoang dã bắt đầu tốt hơn.

00:07:11.000 --> 00:07:19.000
Khi đặt mức độ ưu tiên tải, bạn nên phục vụ cho trải nghiệm tốt nhất mà người dùng của bạn cần.

00:07:19.000 --> 00:07:24.000
Có ba tùy chọn ưu tiên tải có sẵn.

00:07:24.000 --> 00:07:32.000
Các điểm quan tâm hướng dẫn bản đồ MapKit hiển thị nhãn bản đồ và các điểm quan tâm sớm hơn, ngay cả trước chú thích của bạn.

00:07:32.000 --> 00:07:40.000
Mặt khác, Land Cover sẽ chỉ phục vụ cho lớp phủ đất, đường xá và biên giới.

00:07:40.000 --> 00:07:55.000
Vì các tùy chọn này sẽ can thiệp vào một số hành vi bản đồ trong quá trình khởi động, như xoay hoặc vùng bản đồ chính xác của khung nhìn, bạn có thể tắt hoàn toàn mức độ ưu tiên tải bằng cách đặt nó thành không có.

00:07:55.000 --> 00:07:59.000
Và đây là những gì nó trông giống như trong hành động.

00:07:59.000 --> 00:08:05.000
Chỉ cần sử dụng mức độ ưu tiên tải trong tùy chọn trình tạo bản đồ để chỉ định mức độ ưu tiên mong muốn.

00:08:05.000 --> 00:08:15.000
Ở đây chúng tôi yêu cầu bản đồ MapKit hiển thị các điểm tham quan trước.

00:08:15.000 --> 00:08:19.000
Bây giờ đó là một trải nghiệm tải thậm chí còn tốt hơn.

00:08:19.000 --> 00:08:27.000
Hôm nay, chúng tôi đã giới thiệu ba tính năng mới được thiết kế để cải thiện trải nghiệm tải bản đồ của ứng dụng của bạn.

00:08:27.000 --> 00:08:36.000
Chúng tôi tin rằng bạn có thể tích hợp MapKit JS trong khi đảm bảo rằng trải nghiệm người dùng tổng thể vẫn liền mạch và không bị suy giảm.

00:08:36.000 --> 00:08:44.000
Đối với ứng dụng hiện tại của bạn, hãy thoải mái áp dụng các tính năng mới này dần dần, vì mỗi tính năng sẽ mang lại lợi ích riêng.

00:08:44.000 --> 00:08:50.000
Hãy chắc chắn kiểm tra tài liệu chi tiết và phiên API Máy chủ Bản đồ được hiển thị bên dưới.

00:08:50.000 --> 00:08:55.000
Chúng tôi mong muốn được thấy cách bạn tận dụng những tính năng mới này.

00:08:55.000 --> 23:59:59.000
Cảm ơn bạn.

