WEBVTT

00:00:00.000 --> 00:00:05.000
Xin chào, tên tôi là Nat Brown, và tôi quản lý một nhóm kỹ sư làm việc về công nghệ trò chơi tại Apple.

00:00:05.000 --> 00:00:14.000
Hôm nay tôi muốn nói với bạn về màn hình hiển thị thông báo để xem và thu thập số liệu thống kê đồ họa thời gian thực quan trọng trong các ứng dụng và trò chơi của bạn.

00:00:14.000 --> 00:00:16.000
Hãy cùng xem Metal Performance HUD.

00:00:16.000 --> 00:00:24.000
Khi được bật, nó sẽ xuất hiện dưới dạng lớp phủ ở góc trên bên phải của ứng dụng của bạn.

00:00:24.000 --> 00:00:32.000
Mục đích của nó là giúp bạn và những người thử nghiệm của bạn dễ dàng phát hiện ra các vấn đề tiềm ẩn về hiệu suất và ghi lại một số thông tin cơ bản để phân tích sau này.

00:00:32.000 --> 00:00:51.000
HUD là sự bổ sung và không phải là sự thay thế cho các công cụ phân tích hiệu suất và gỡ lỗi hiện có của bạn, một công cụ giúp bạn nhận được thông tin hữu ích từ các nhóm đảm bảo chất lượng và khách hàng chỉ bằng ảnh chụp màn hình và nhật ký giúp bạn nhanh chóng tái tạo, phân tích và khắc phục các vấn đề hiệu suất và trục trặc đồ

00:00:51.000 --> 00:00:55.000
Hãy xem HUD hiển thị và có thể thu thập dữ liệu gì.

00:00:55.000 --> 00:01:05.000
Dòng trên cùng của HUD hiển thị cho bạn thông tin về GPU và màn hình, thiết bị đang được sử dụng, độ phân giải được nhắm mục tiêu và trạng thái chia tỷ lệ của màn hình.

00:01:05.000 --> 00:01:10.000
HUD cho bạn biết bạn đang ở trong đường dẫn trực tiếp hay tổng hợp của màn hình.

00:01:10.000 --> 00:01:18.000
Đường dẫn trực tiếp có ít bộ đệm nhất và số khoảng thời gian làm mới ít nhất giữa khi bạn trình bày bản vẽ của mình và khi nó xuất hiện trên màn hình.

00:01:18.000 --> 00:01:27.000
Khi bạn được tổng hợp, có thể có một số bộ đệm bổ sung và độ trễ hiển thị do các yếu tố giao diện người dùng hệ thống hoặc các lớp bổ sung của riêng bạn chồng lên màn hình.

00:01:27.000 --> 00:01:32.000
Bạn cũng sẽ thấy tốc độ làm mới tối đa của màn hình vật lý đang được sử dụng.

00:01:32.000 --> 00:01:41.000
Đối với các màn hình tốc độ làm mới thay đổi, bạn cũng sẽ thấy tốc độ làm mới tối thiểu của màn hình, vì vậy bạn sẽ thấy các phạm vi tốc độ làm mới có thể có sẵn.

00:01:41.000 --> 00:01:55.000
Tiếp theo, cột đầu tiên của dữ liệu thời gian thực hiển thị tốc độ khung hình tức thời tính bằng Hertz hoặc khung hình mỗi giây, sau đó là thời gian trước hoặc thời gian giữa các bản trình bày của bạn, còn được gọi là thời gian khung hình hoặc khoảng thời gian khung hình tính bằng mili giây.

00:01:55.000 --> 00:02:02.000
Và cuối cùng, số lượng công việc GPU đã được hoàn thành trong khoảng thời gian khung hình cũng được đo bằng mili giây.

00:02:02.000 --> 00:02:11.000
Cột thứ hai hiển thị cho bạn thêm một chút thông tin về các giá trị thấp nhất của tốc độ khung hình, khoảng khung hình và thời gian GPU dành cho khung hình trong một giây rưỡi qua.

00:02:11.000 --> 00:02:17.000
HUD nổi bật màu đỏ khi giá trị thấp này đã lệch đáng kể so với mức trung bình.

00:02:17.000 --> 00:02:32.000
Cột dữ liệu số cuối cùng trong HUD cho bạn thấy tốc độ khung hình tức thời cao nhất trong một giây rưỡi qua, thời gian khung hình đơn lớn nhất trong một giây rưỡi qua và chi phí GPU cao nhất tính bằng mili giây làm việc được thực hiện trong một giây rưỡi qua của khoảng khung hình.

00:02:32.000 --> 00:02:38.000
Khoảng thời gian khung hình và thời gian GPU cao bất thường so với mức trung bình một lần nữa được đánh dấu ở đây bằng màu đỏ.

00:02:38.000 --> 00:02:50.000
Phần cuối cùng ở cuối HUD hiển thị cho bạn thông tin về quy trình và mức tiêu thụ bộ nhớ GPU để giúp bạn phát hiện các rò rỉ tiềm ẩn theo thời gian và cũng là biểu đồ hai dòng về các khoảng thời gian hiện tại và thời gian GPU đã sử dụng.

00:02:50.000 --> 00:03:04.000
Mục đích của thông tin này là giúp bạn và những người kiểm tra của bạn phát hiện ra những giọt khung hình thoáng qua mà bạn có thể bỏ lỡ và giúp bạn cô lập kiểm tra sâu hơn, gỡ lỗi và điều chỉnh hiệu suất bằng cách sử dụng các công cụ Xcode và Công cụ tiên tiến hơn.

00:03:04.000 --> 00:03:07.000
Vậy làm thế nào để bạn bật Metal Performance HUD?

00:03:07.000 --> 00:03:16.000
Chà, bạn có thể ngạc nhiên khi biết rằng có rất nhiều cách khác nhau để làm điều đó bởi vì chúng tôi biết có rất nhiều cách mà các nhà phát triển muốn tương tác và tự động hóa hình thức thu thập dữ liệu này.

00:03:16.000 --> 00:03:22.000
Đầu tiên là ngay từ Xcode 14 trong khi bạn đang phát triển cho iOS, macOS hoặc tvOS.

00:03:22.000 --> 00:03:34.000
Trong sơ đồ Chạy của bạn dưới tab Chẩn đoán, bạn sẽ thấy tùy chọn bật HUD bằng cách chọn Hiển thị Tổng quan về Đồ họa và cho phép ghi nhật ký dữ liệu vào nhật ký hệ thống bằng cách chọn Tổng quan về Đồ họa Nhật ký.

00:03:34.000 --> 00:03:44.000
Trên iOS và tvOS, nếu bạn đã kết nối thiết bị với Xcode và bật nó để phát triển, bạn có thể bật HUD và ghi nhật ký bằng Cài đặt dành cho nhà phát triển.

00:03:44.000 --> 00:03:50.000
Chỉ cần đi tới Cài đặt &gt; Cài đặt Nhà phát triển, cuộn xuống và bật HUD và ghi nhật ký tùy chọn.

00:03:50.000 --> 00:04:01.000
Trên iOS và tvOS, HUD sẽ chỉ hiển thị và thực hiện ghi nhật ký cho các ứng dụng của riêng bạn; nghĩa là, các ứng dụng bạn đã cài đặt qua Xcode hoặc sử dụng TestFlight.

00:04:01.000 --> 00:04:06.000
Trên macOS, bạn có thể bật HUD bên ngoài Xcode thông qua các biến môi trường.

00:04:06.000 --> 00:04:20.000
Đặt biến môi trường MTL_HUD_ENABLED thành một để hiển thị HUD và đặt biến môi trường MTL_HUD_LOGGING_ENABLED thành một để kích hoạt ghi nhật ký.

00:04:20.000 --> 00:04:25.000
Một lựa chọn khác mà bạn có thể thấy hữu ích là sử dụng mặc định của người dùng ứng dụng của bạn.

00:04:25.000 --> 00:04:38.000
Trên macOS, iOS và tvOS, bạn có thể đặt khóa MetalForceHudEnabled thành true trong mặc định người dùng tiêu chuẩn của mình và HUD sẽ hiển thị và ghi nhật ký sẽ xảy ra cho các lần khởi chạy tiếp theo của ứng dụng của bạn.

00:04:38.000 --> 00:04:44.000
Trên macOS, bạn có thể đặt giá trị toàn cầu để hiển thị HUD cho tất cả các ứng dụng dựa trên Metal.

00:04:44.000 --> 00:04:49.000
Cuối cùng, bạn có thể thêm khóa MetalHUDEnabled vào Info.plist của mình để luôn bật HUD.

00:04:49.000 --> 00:04:59.000
Bây giờ nếu HUD được bật, bạn có thể sử dụng từ điển CAMetalLayer developerHUDProperties để hiển thị và ẩn HUD và để bật và tắt ghi nhật ký.

00:04:59.000 --> 00:05:02.000
Đặt phím chế độ về mặc định sẽ hiển thị HUD.

00:05:02.000 --> 00:05:04.000
Xóa chìa khóa sẽ ẩn HUD.

00:05:04.000 --> 00:05:07.000
Đặt khóa ghi nhật ký thành mặc định sẽ cho phép ghi nhật ký.

00:05:07.000 --> 00:05:10.000
Xóa khóa này sẽ vô hiệu hóa việc ghi nhật ký.

00:05:10.000 --> 00:05:20.000
Bạn có thể thêm khóa Info.plist và sử dụng API này nếu bạn muốn cung cấp cho người kiểm tra của mình một nút chuyển đổi giao diện người dùng trong các bản dựng nội bộ để hiển thị và ẩn HUD.

00:05:20.000 --> 00:05:23.000
Bây giờ chúng ta hãy xem những gì Metal Performance HUD ghi lại.

00:05:23.000 --> 00:05:32.000
Khoảng một lần mỗi giây, Metal Performance HUD ghi dữ liệu vào nhật ký hệ thống tóm tắt dữ liệu mà nó đang thu thập để bạn có thể phân tích nó theo cách riêng của mình.

00:05:32.000 --> 00:05:38.000
Chỉ cần khởi chạy ứng dụng bảng điều khiển và lọc đầu ra bằng dây kim loại-HUD.

00:05:38.000 --> 00:05:43.000
Mỗi dòng kết quả sẽ bắt đầu bằng chuỗi kim loại-HUD.

00:05:43.000 --> 00:05:47.000
Tiếp theo là số khung hình đầu tiên, sau đó số khung hình ước tính bị bỏ lỡ.

00:05:47.000 --> 00:05:49.000
Trong trường hợp này, không ai bị bỏ lỡ.

00:05:49.000 --> 00:05:51.000
Tiếp theo, quá trình sử dụng bộ nhớ.

00:05:51.000 --> 00:05:55.000
Đây là 56.05 megabyte.

00:05:55.000 --> 00:06:00.000
Sau đó là khoảng thời gian hiện tại của mỗi khung hình và thời gian GPU tính bằng mili giây.

00:06:00.000 --> 00:06:12.000
Bạn có thể thấy tất cả dữ liệu này hữu ích để phân tích ngoại tuyến hoặc tương quan với video bạn quay trò chơi để cung cấp cho bạn cái nhìn sâu sắc chính xác hơn về nơi tập trung gỡ lỗi và tối ưu hóa bổ sung.

00:06:12.000 --> 00:06:15.000
Tôi hy vọng bạn thích tìm hiểu về Metal Performance HUD hôm nay.

00:06:15.000 --> 00:06:17.000
Sử dụng HUD để hình dung hiệu suất trò chơi của bạn.

00:06:17.000 --> 00:06:23.000
Nó sẽ giúp bạn phát hiện các vấn đề hiệu suất tinh tế và giúp bạn chọn nơi sử dụng các công cụ nâng cao hơn như Dụng cụ.

00:06:23.000 --> 00:06:30.000
Thật dễ dàng để kích hoạt trên tất cả các nền tảng của Apple và bạn cũng có thể thu thập dữ liệu mà nó ghi nhật ký để phân tích tùy chỉnh của riêng bạn.

00:06:30.000 --> 00:06:35.000
Tôi thực sự hy vọng bạn thấy nó hữu ích cho việc tối ưu hóa các trò chơi và ứng dụng đồ họa của bạn.

00:06:35.000 --> 00:06:40.000
Nếu bạn có bất kỳ phản hồi nào, hãy nhớ gửi nó qua feedbackassistant.apple.com.

00:06:40.000 --> 23:59:59.000
Cảm ơn vì đã tham gia cùng tôi.

