WEBVTT

00:00:02.000 --> 00:00:05.000
Chào mừng bạn đến với Giới thiệu Đăng nhập Một lần Doanh nghiệp Mở rộng.

00:00:05.000 --> 00:00:07.000
Tên tôi là Matt Chanda.

00:00:07.000 --> 00:00:11.000
Tôi là một kỹ sư tư vấn và là một phần của nhóm đã tạo ra đăng nhập một lần.

00:00:11.000 --> 00:00:22.000
Trong video này, tôi sẽ cung cấp cho bạn tổng quan về đăng nhập một lần, thảo luận về cách tạo tiện ích mở rộng, cách sử dụng chúng trong ứng dụng của bạn, cách triển khai chúng và kết thúc với các phương pháp hay nhất.

00:00:22.000 --> 00:00:27.000
Như bạn đã biết, hầu như tất cả các ứng dụng và trang web doanh nghiệp cần xác thực để hoạt động.

00:00:27.000 --> 00:00:32.000
Các ứng dụng này kết nối các hệ thống ghi âm, trên đám mây, trên tiền đề hoặc cả hai.

00:00:32.000 --> 00:00:35.000
Tuy nhiên, gần đây, việc xác thực đã trở nên phức tạp hơn.

00:00:35.000 --> 00:00:41.000
Chúng ta cần xem xét nhiều phương pháp xác thực bao gồm OpenID Connect, Kerberos và SAML.

00:00:41.000 --> 00:00:46.000
Bây giờ chúng tôi có tài nguyên đám mây cần liên kết xác thực với các hệ thống tại chỗ.

00:00:46.000 --> 00:00:50.000
Chúng ta cũng phải tin tưởng các thiết bị của mình hơn, và đôi khi chúng ta không có mật khẩu.

00:00:50.000 --> 00:00:53.000
Các tổ chức đối phó với những thách thức này như thế nào?

00:00:53.000 --> 00:00:55.000
Họ sử dụng đăng nhập một lần để giúp đỡ.

00:00:55.000 --> 00:01:01.000
Đăng nhập một lần cho phép một bộ ứng dụng hoặc trang web xác thực liền mạch bằng cách sử dụng cùng một thông tin xác thực.

00:01:01.000 --> 00:01:04.000
Điều này dẫn đến trải nghiệm người dùng tốt hơn.

00:01:04.000 --> 00:01:08.000
Một số doanh nghiệp không có mật khẩu, vì vậy họ phải sử dụng đăng nhập một lần.

00:01:08.000 --> 00:01:11.000
Vấn đề là không phải mọi ứng dụng đều hỗ trợ nhu cầu của họ.

00:01:11.000 --> 00:01:15.000
Các giải pháp xác thực hiện có có thể gây ra nhiều xích mích của người dùng.

00:01:15.000 --> 00:01:20.000
Chúng có nhiều cửa sổ bật lên, lời nhắc lặp đi lặp lại và nảy giữa các ứng dụng.

00:01:20.000 --> 00:01:26.000
Không có cách nào để đăng nhập một lần thực sự vừa an toàn vừa thân thiện với người dùng.

00:01:26.000 --> 00:01:35.000
Hôm nay tôi muốn nói với bạn về khả năng đăng nhập một lần mới mạnh mẽ mà chúng tôi đã thêm vào iOS 13, iPadOS và macOS Catalina.

00:01:35.000 --> 00:01:41.000
Nó được kích hoạt bằng cách triển khai hồ sơ SSO MDM có thể mở rộng mới và các miền liên quan.

00:01:41.000 --> 00:01:43.000
Nó cũng hoạt động với việc đăng ký của người dùng.

00:01:43.000 --> 00:01:49.000
Tiện ích mở rộng có thể chọn trình bày giao diện người dùng, tải trang web hoặc xử lý yêu cầu một cách âm thầm.

00:01:49.000 --> 00:01:56.000
Chúng tôi nghĩ rằng những thay đổi này sẽ cho phép bạn thực hiện và sử dụng các giải pháp SSO vừa thân thiện với người dùng vừa an toàn.

00:01:56.000 --> 00:02:00.000
Các tiện ích mở rộng mới sẽ chạy trên iOS, iPadOS và macOS.

00:02:00.000 --> 00:02:05.000
Chúng cho phép cả ứng dụng gốc và Safari xác thực với nhà cung cấp danh tính của bạn.

00:02:05.000 --> 00:02:07.000
Các tiện ích mở rộng là mã gốc.

00:02:07.000 --> 00:02:13.000
Họ có thể kích hoạt xác thực đa yếu tố, truy cập chuỗi khóa, sử dụng các khóa được tạo enclave an toàn và hơn thế nữa.

00:02:13.000 --> 00:02:17.000
Họ có thể tận dụng cấu hình ứng dụng được quản lý và thậm chí sử dụng VPN cho mỗi ứng dụng.

00:02:17.000 --> 00:02:20.000
Bạn có thể thắc mắc về Đăng nhập bằng Apple.

00:02:20.000 --> 00:02:23.000
Đăng nhập một lần khác với Đăng nhập bằng Apple.

00:02:23.000 --> 00:02:27.000
Đăng nhập bằng Apple dành cho các ứng dụng tiêu dùng của bạn và giải quyết các vấn đề khác nhau.

00:02:27.000 --> 00:02:31.000
Đầu tiên, nó có nghĩa là giải quyết vấn đề cung cấp tài khoản.

00:02:31.000 --> 00:02:35.000
Thay vì tạo một tài khoản mới ở mọi nơi, chỉ cần sử dụng ID Apple của bạn để thay thế.

00:02:35.000 --> 00:02:40.000
Nó cũng giải quyết vấn đề riêng tư khi một trang web không cần tất cả thông tin cá nhân của bạn.

00:02:40.000 --> 00:02:46.000
Mặt khác, đăng nhập một lần cho phép bạn sử dụng tài khoản doanh nghiệp hiện có cho các ứng dụng yêu cầu chúng.

00:02:46.000 --> 00:02:51.000
Các ứng dụng doanh nghiệp của bạn cần biết chính xác bạn là ai và bạn được phép làm gì.

00:02:51.000 --> 00:02:56.000
Bây giờ chúng tôi đã giới thiệu nó, bạn có thể tò mò về việc đăng nhập một lần thực sự trông như thế nào.

00:02:56.000 --> 00:02:59.000
Hãy cùng xem nào.

00:02:59.000 --> 00:03:03.000
Trên iOS, hãy bắt đầu bằng cách tải một trang web yêu cầu xác thực.

00:03:03.000 --> 00:03:06.000
Phần mở rộng sẽ nhắc tôi cung cấp thông tin đăng nhập.

00:03:06.000 --> 00:03:11.000
Tôi sẽ nhập tên người dùng của mình...

00:03:11.000 --> 00:03:15.000
Và bây giờ mật khẩu của tôi...

00:03:15.000 --> 00:03:18.000
Tôi sẽ lưu mật khẩu của mình, sau đó trang sẽ tải.

00:03:18.000 --> 00:03:22.000
Lưu ý rằng trang hiển thị tên người dùng của tôi sau khi tải.

00:03:22.000 --> 00:03:26.000
Bây giờ chúng ta hãy vào một ứng dụng gốc và cố gắng truy cập các tài nguyên được bảo vệ.

00:03:26.000 --> 00:03:28.000
Đây là nơi đăng nhập một lần xảy ra.

00:03:28.000 --> 00:03:31.000
Người dùng không nên được nhắc lại thông tin đăng nhập.

00:03:31.000 --> 00:03:33.000
Ứng dụng này có hai nút.

00:03:33.000 --> 00:03:37.000
Nó sẽ cố gắng tải hình ảnh từ mạng được bảo vệ bởi cùng một thông tin xác thực.

00:03:37.000 --> 00:03:40.000
Tôi sẽ bắt đầu với bánh mì kẹp thịt...

00:03:40.000 --> 00:03:43.000
Và bây giờ là bánh tét...

00:03:43.000 --> 00:03:46.000
Và đó là đăng nhập một lần trong hành động trên iOS.

00:03:46.000 --> 00:03:48.000
Bây giờ cho macOS.

00:03:48.000 --> 00:03:52.000
Một lần nữa, chúng tôi cố gắng tải một trang web được bảo vệ và bị thách thức về thông tin đăng nhập.

00:03:52.000 --> 00:03:58.000
Vậy hãy để tôi mở Safari, tải trang web của tôi...

00:03:58.000 --> 00:04:02.000
Bây giờ tôi sẽ nhập tên người dùng của mình...

00:04:02.000 --> 00:04:09.000
Và mật khẩu của tôi...

00:04:09.000 --> 00:04:13.000
Tôi sẽ lưu nó, và trang sẽ tải.

00:04:13.000 --> 00:04:18.000
Tuyệt vời, đây là lần đăng nhập đầu tiên, nhưng nó không phải là đăng nhập một lần cho đến khi chúng tôi sử dụng nó ở một nơi khác.

00:04:18.000 --> 00:04:22.000
Vì vậy, hãy thử truy cập các tài nguyên được bảo vệ khác trong một ứng dụng gốc.

00:04:22.000 --> 00:04:28.000
Vì vậy, tôi sẽ bắt đầu với bánh mì kẹp thịt.

00:04:28.000 --> 00:04:33.000
Tốt, và bây giờ là bánh tét.

00:04:33.000 --> 00:04:36.000
Và bạn có thể thấy rằng họ đã tải như mong đợi.

00:04:36.000 --> 00:04:42.000
Nếu tôi chưa đăng nhập vào trình duyệt trước, thì hộp thoại xác thực tương tự sẽ hiển thị trong ứng dụng gốc.

00:04:42.000 --> 00:04:46.000
Sau khi đăng nhập, thông tin đăng nhập sẽ được lưu trữ và quyền truy cập vào hình ảnh sẽ được cho phép.

00:04:46.000 --> 00:04:49.000
Và đó là đăng nhập một lần trên macOS.

00:04:49.000 --> 00:04:52.000
Và bây giờ quay lại các trang trình bày của chúng tôi.

00:04:52.000 --> 00:04:57.000
Để sử dụng đăng nhập một lần với các thiết bị được quản lý MDM của bạn, bạn cần những thứ này.

00:04:57.000 --> 00:05:01.000
Bạn có thể đã có các ứng dụng và trang web và một nhà cung cấp danh tính.

00:05:01.000 --> 00:05:05.000
Vì vậy, hôm nay chúng ta sẽ dành thời gian cho phần mở rộng để dán chúng lại với nhau.

00:05:05.000 --> 00:05:07.000
Vậy nó hoạt động như thế nào?

00:05:07.000 --> 00:05:11.000
Có hai loại tiện ích mở rộng: chuyển hướng và thông tin xác thực.

00:05:11.000 --> 00:05:14.000
Hãy bắt đầu với các tiện ích mở rộng Chuyển hướng.

00:05:14.000 --> 00:05:17.000
Các tiện ích mở rộng chuyển hướng dành cho các phương pháp xác thực hiện đại.

00:05:17.000 --> 00:05:21.000
Các ví dụ bao gồm OpenID Connect, OAuth và SAML.

00:05:21.000 --> 00:05:26.000
Những phương pháp này dựa trên công nghệ web và thường được sử dụng với liên đoàn.

00:05:26.000 --> 00:05:29.000
Hãy xem một ví dụ trong Safari.

00:05:29.000 --> 00:05:34.000
Các tiện ích mở rộng chuyển hướng cũng hoạt động với URLSession trong iOS, iPadOS và macOS.

00:05:34.000 --> 00:05:40.000
Thay vì tải trang đăng nhập, hệ điều hành sẽ chuyển hướng yêu cầu web đến tiện ích mở rộng.

00:05:40.000 --> 00:05:43.000
Tiện ích mở rộng sẽ nhận được URL, tiêu đề và nội dung.

00:05:43.000 --> 00:05:49.000
Nhà phát triển tiện ích mở rộng chịu trách nhiệm hoàn thành quy trình xác thực với nhà cung cấp danh tính.

00:05:49.000 --> 00:05:52.000
Khi sẵn sàng, nó sẽ trả lại phản hồi URL cho Safari.

00:05:52.000 --> 00:05:54.000
Lưu ý rằng phản hồi này không nên lớn.

00:05:54.000 --> 00:06:00.000
Nó dành cho một biểu mẫu web nhỏ để đăng phản hồi SAML hoặc các mã thông báo khác lên máy chủ web.

00:06:00.000 --> 00:06:04.000
Không sử dụng nó cho một trang web 1 meg khổng lồ.

00:06:04.000 --> 00:06:07.000
Vậy những tiện ích mở rộng đăng nhập một lần này có thể làm gì?

00:06:07.000 --> 00:06:10.000
Họ có thể làm một vài thứ. Đây là một vài.

00:06:10.000 --> 00:06:14.000
Có thể chọn trình bày giao diện người dùng gốc hoặc yêu cầu nhiều yếu tố.

00:06:14.000 --> 00:06:20.000
Họ có thể tạo các khóa dành riêng cho thiết bị trên Secure Enclave hoặc bổ sung các yêu cầu xác thực bằng dữ liệu điểm tin cậy.

00:06:20.000 --> 00:06:25.000
Họ cũng có thể triển khai các tính năng bảo mật cụ thể khác của idP.

00:06:25.000 --> 00:06:27.000
Họ có thể tải một trang web và theo các liên kết cho liên đoàn.

00:06:27.000 --> 00:06:32.000
Và trên macOS, họ thậm chí có thể sử dụng WebAuthN, nếu nhà cung cấp danh tính của bạn hỗ trợ nó.

00:06:32.000 --> 00:06:35.000
Các tiện ích mở rộng chuyển hướng cũng hoạt động cho các ứng dụng gốc.

00:06:35.000 --> 00:06:37.000
Tuy nhiên, các ứng dụng gốc có một tùy chọn bổ sung.

00:06:37.000 --> 00:06:40.000
Họ có thể gửi các hoạt động đến phần mở rộng.

00:06:40.000 --> 00:06:45.000
Ứng dụng có thể quyết định khi nào là thời điểm tốt để đăng nhập hoặc làm mới mã thông báo một cách âm thầm.

00:06:45.000 --> 00:06:49.000
Tiện ích mở rộng sẽ biết liệu nó có cần xác thực lại hay chỉ trả lại các mã thông báo đã lưu.

00:06:49.000 --> 00:06:55.000
Và đối với các nhà phát triển ứng dụng doanh nghiệp, điều này có nghĩa là bạn có thể sử dụng tiện ích mở rộng làm ứng dụng khách xác thực của mình.

00:06:55.000 --> 00:07:00.000
Nó tránh sự cần thiết phải bao gồm một bản sao của thư viện xác thực trong mỗi ứng dụng và sau đó duy trì nó.

00:07:00.000 --> 00:07:02.000
Hãy kiểm tra dòng chảy.

00:07:02.000 --> 00:07:08.000
Nó tương tự như Safari, ngoại trừ ứng dụng gốc có thể gửi lệnh, chẳng hạn như đăng nhập, để bắt đầu quá trình.

00:07:08.000 --> 00:07:11.000
Một lần nữa, tiện ích mở rộng chịu trách nhiệm hoàn thành quá trình xác thực.

00:07:11.000 --> 00:07:17.000
Và khi sẵn sàng, nó có thể trả về phản hồi URL với bất kỳ mã thông báo nào cần thiết cho ứng dụng gốc.

00:07:17.000 --> 00:07:23.000
Tôi cũng khuyên bạn nên sử dụng cấu hình ứng dụng được quản lý để thông báo cho ứng dụng gốc của URL nhà cung cấp danh tính để sử dụng.

00:07:23.000 --> 00:07:29.000
Trước khi tôi chỉ cho bạn cách xây dựng tiện ích mở rộng, hãy nói về cách triển khai một trong những tiện ích mở rộng này trong doanh nghiệp của bạn.

00:07:29.000 --> 00:07:34.000
Có hai yêu cầu: tải trọng MDM và các miền liên quan.

00:07:34.000 --> 00:07:36.000
Hãy bắt đầu với tải trọng MDM.

00:07:36.000 --> 00:07:43.000
Nó được kích hoạt bởi tải trọng SSO mở rộng mới cho iOS 13, iPadOS và macOS Catalina.

00:07:43.000 --> 00:07:45.000
Kiểm tra ví dụ ở đây.

00:07:45.000 --> 00:07:52.000
Mã định danh là com.apple.extensiblesso, và tải trọng này phải được phân phối bởi MDM.

00:07:52.000 --> 00:08:00.000
Nó chỉ định mã định danh gói tiện ích mở rộng mà bạn muốn sử dụng, bao gồm mã định danh nhóm, cũng như loại mà chúng ta vừa nói đến.

00:08:00.000 --> 00:08:03.000
Trong trường hợp này, một phần mở rộng chuyển hướng.

00:08:03.000 --> 00:08:09.000
Nó liệt kê các tiền tố URL sẽ xác định lưu lượng truy cập nào sẽ định tuyến đến tiện ích mở rộng.

00:08:09.000 --> 00:08:14.000
Và cuối cùng, một từ điển tùy chọn về các giá trị dành riêng cho phần mở rộng từ MDM.

00:08:14.000 --> 00:08:17.000
Trong ví dụ này, chúng tôi đang gửi cho nó tên người dùng.

00:08:17.000 --> 00:08:20.000
Yêu cầu thứ hai là sử dụng các miền liên quan.

00:08:20.000 --> 00:08:23.000
Điều này bắt đầu với các nhà phát triển tiện ích mở rộng.

00:08:23.000 --> 00:08:30.000
Các miền liên kết được yêu cầu chứng minh rằng bạn hoặc nhà cung cấp danh tính của bạn sở hữu lưu lượng truy cập đang được chuyển hướng.

00:08:30.000 --> 00:08:33.000
Nó cũng ngăn người khác chuyển hướng lưu lượng truy cập của bạn.

00:08:33.000 --> 00:08:37.000
Trên nền tảng Apple, các tiện ích mở rộng được nhúng bên trong ứng dụng máy chủ.

00:08:37.000 --> 00:08:45.000
Để thiết lập các miền được liên kết, bạn cần định cấu hình khả năng các miền được liên kết trong ứng dụng máy chủ có chứa tiện ích mở rộng của bạn.

00:08:45.000 --> 00:08:52.000
Bạn thêm một mục nhập mới với loại dịch vụ authsrv, theo sau là dấu hai chấm, theo sau là tên miền được ứng dụng sử dụng.

00:08:52.000 --> 00:08:56.000
Nếu bạn cần nhiều miền, hãy nhập từng miền riêng biệt.

00:08:56.000 --> 00:09:04.000
Các miền liên kết cũng yêu cầu ID ứng dụng máy chủ được liệt kê trong tệp liên kết trang web ứng dụng Apple trên máy chủ.

00:09:04.000 --> 00:09:08.000
Thiết bị phải có thể truy cập máy chủ này và có chứng chỉ SSL hợp lệ.

00:09:08.000 --> 00:09:15.000
Chứng chỉ gốc tùy chỉnh hoặc được người dùng phê duyệt không được hỗ trợ cho tệp liên kết trang web ứng dụng Apple.

00:09:15.000 --> 00:09:19.000
Trong một số trường hợp, các miền liên quan không được biết khi ứng dụng được phát triển.

00:09:19.000 --> 00:09:25.000
Một ví dụ điển hình về điều này là khi một nhà cung cấp danh tính phát triển một tiện ích mở rộng, nhưng máy chủ của mỗi khách hàng là khác nhau.

00:09:25.000 --> 00:09:33.000
Họ không thể liệt kê hàng nghìn trong số chúng trong tệp quyền lợi, vì vậy khi điều này xảy ra, chúng tôi có thể sử dụng tải trọng tên miền liên quan được quản lý mới trên macOS.

00:09:33.000 --> 00:09:41.000
Lưu ý rằng giá trị ở cùng định dạng mà bạn sẽ sử dụng trong giá trị quyền của miền được liên kết trong Xcode.

00:09:41.000 --> 00:09:47.000
Và bạn có thể sử dụng thuộc tính ứng dụng AssociatedDomains MDM mới cho iOS và iPadOS.

00:09:47.000 --> 00:09:50.000
Một lần nữa, giá trị giống như trong Xcode.

00:09:50.000 --> 00:10:01.000
Và bước cuối cùng cho các miền liên quan được quản lý là thêm quyền được quản lý MDM và có một mảng miền liên quan để cho hệ điều hành biết sử dụng các giá trị MDM.

00:10:01.000 --> 00:10:05.000
Chúng tôi sẽ thêm các giá trị MDM vào bất kỳ giá trị nào đã được liệt kê.

00:10:05.000 --> 00:10:11.000
Để biết thêm chi tiết về các miền được liên kết và cách sử dụng chúng, hãy xem phiên Có gì mới trong Liên kết chung.

00:10:11.000 --> 00:10:14.000
Và điều đó kết thúc các phần mở rộng chuyển hướng.

00:10:14.000 --> 00:10:16.000
Bây giờ hãy nói về các phần mở rộng thông tin xác thực.

00:10:16.000 --> 00:10:23.000
Phần mở rộng thông tin xác thực được thiết kế để xác thực thách thức và phản hồi, và Kerberos là ví dụ điển hình nhất.

00:10:23.000 --> 00:10:25.000
Thử thách/phản ứng có một dòng chảy khác.

00:10:25.000 --> 00:10:30.000
Trong luồng đó, khách hàng yêu cầu dữ liệu, sau đó bị thách thức xác thực.

00:10:30.000 --> 00:10:35.000
Trong khi đó với các tiện ích mở rộng chuyển hướng, khách hàng sẽ yêu cầu thông tin đăng nhập trước khi yêu cầu dữ liệu.

00:10:35.000 --> 00:10:41.000
Các tiện ích mở rộng thông tin xác thực cũng có thể được sử dụng để xử lý các thách thức xác thực khi các tiện ích mở rộng chuyển hướng đang chạy.

00:10:41.000 --> 00:10:47.000
Các tiện ích mở rộng thông tin xác thực nhận được thử thách xác thực được trả về từ máy chủ thay vì yêu cầu.

00:10:47.000 --> 00:10:50.000
Nó nhận được URL và tiêu đề.

00:10:50.000 --> 00:10:54.000
Họ cũng sử dụng danh sách các máy chủ trong tải trọng MDM thay vì URL.

00:10:54.000 --> 00:11:00.000
Các máy chủ có thể là tên máy chủ riêng lẻ hoặc hậu tố, chẳng hạn như .example.com.

00:11:00.000 --> 00:11:06.000
Các hoạt động có thể được sử dụng để giúp xác định khi nào giao diện người dùng nên được hiển thị hoặc yêu cầu các hoạt động im lặng.

00:11:06.000 --> 00:11:10.000
Và cuối cùng, các miền liên quan không bắt buộc đối với các phần mở rộng thông tin xác thực.

00:11:10.000 --> 00:11:15.000
Cấu hình cho các tiện ích mở rộng thông tin xác thực tương tự như các tiện ích mở rộng chuyển hướng, với hai điểm khác biệt.

00:11:15.000 --> 00:11:18.000
Đầu tiên, loại là chứng chỉ.

00:11:18.000 --> 00:11:21.000
Thứ hai, một danh sách các máy chủ được sử dụng để lựa chọn.

00:11:21.000 --> 00:11:23.000
Nó được kiểm tra dựa trên tên máy chủ của máy chủ.

00:11:23.000 --> 00:11:28.000
Nếu giá trị MDM bắt đầu bằng dấu chấm, thì nó được sử dụng để khớp với hậu tố của tên máy chủ.

00:11:28.000 --> 00:11:31.000
Nếu không, toàn bộ tên máy chủ sẽ khớp.

00:11:31.000 --> 00:11:35.000
Và một lần nữa, hồ sơ này phải được cung cấp bởi MDM.

00:11:35.000 --> 00:11:39.000
Các tiện ích mở rộng thông tin xác thực sẽ hoạt động từ cả Safari và các ứng dụng gốc.

00:11:39.000 --> 00:11:45.000
Một yêu cầu được gửi từ ứng dụng đến máy chủ và máy chủ trả về một thử thách xác thực.

00:11:45.000 --> 00:11:50.000
Nếu máy chủ khớp với hồ sơ, hệ điều hành sẽ định tuyến thách thức đến tiện ích mở rộng.

00:11:50.000 --> 00:11:54.000
Phần mở rộng chịu trách nhiệm xử lý thử thách hoặc từ chối nó.

00:11:54.000 --> 00:11:58.000
Nếu được xử lý, nó sẽ trả về các tiêu đề ủy quyền để hoàn thành yêu cầu.

00:11:58.000 --> 00:12:02.000
Và máy chủ sẽ trả lại phản hồi cho người gọi.

00:12:02.000 --> 00:12:11.000
Một ví dụ tuyệt vời về tiện ích mở rộng thông tin xác thực là tiện ích mở rộng Kerberos do hệ thống cung cấp có trong iOS 13, iPadOS và macOS Catalina.

00:12:11.000 --> 00:12:18.000
Tiện ích mở rộng này dựa trên Enterprise Connect, một giải pháp tích hợp Active Directory mà một số bạn có thể đã sử dụng.

00:12:18.000 --> 00:12:22.000
Nó cung cấp một cách dễ dàng để tích hợp các thiết bị của bạn với Active Directory.

00:12:22.000 --> 00:12:31.000
Ngoài việc cung cấp hỗ trợ Kerberos, nó giúp bạn quản lý mật khẩu Active Directory của mình và giúp bạn giữ mật khẩu Active Directory cục bộ và mật khẩu Active Directory đồng bộ.

00:12:31.000 --> 00:12:39.000
Nó hỗ trợ xác thực bằng tên người dùng và mật khẩu; danh tính dựa trên chứng chỉ do MDM cung cấp; hoặc thẻ thông minh.

00:12:39.000 --> 00:12:45.000
Chúng tôi nghĩ rằng tiện ích mở rộng này sẽ giúp nhiều bạn dễ dàng sử dụng Kerberos và Active Directory trong các tổ chức của mình.

00:12:45.000 --> 00:12:52.000
Và điều đó hoàn thành các tiện ích mở rộng đăng nhập một lần thông tin xác thực.

00:12:52.000 --> 00:12:59.000
Đầu tiên mở Xcode, tạo một dự án mới, sau đó thêm mục tiêu bằng cách sử dụng mẫu Dịch vụ Xác thực.

00:12:59.000 --> 00:13:02.000
Nó sẽ trông như thế này.

00:13:02.000 --> 00:13:05.000
Sau đó triển khai giao thức RequestHandler.

00:13:05.000 --> 00:13:09.000
Hệ thống sẽ gọi hàm startAuthorization cho mỗi yêu cầu.

00:13:09.000 --> 00:13:13.000
Hãy nhớ rằng tiện ích mở rộng của bạn sẽ được gọi nhiều lần bởi nhiều ứng dụng khác nhau.

00:13:13.000 --> 00:13:17.000
Vì vậy, bạn cần xử lý đồng thời và tách dữ liệu cho từng ứng dụng.

00:13:17.000 --> 00:13:23.000
Tham số yêu cầu sẽ chứa tất cả thông tin cần thiết về yêu cầu xác thực hiện tại.

00:13:23.000 --> 00:13:31.000
Nếu tiện ích mở rộng xác định rằng nó cần hiển thị giao diện người dùng, thì bạn gọi presentAuthorization ViewController theo yêu cầu để hiển thị nó.

00:13:31.000 --> 00:13:43.000
Yêu cầu chứa URL, tiêu đề, số nhận dạng của ứng dụng gọi điện và dữ liệu tiện ích mở rộng từ tải trọng MDM mà chúng tôi đã hiển thị trước đó.

00:13:43.000 --> 00:13:50.000
Hãy nhớ rằng trong sơ đồ dòng chảy, các tiện ích mở rộng chuyển hướng nhận được yêu cầu và trả về phản hồi URL.

00:13:50.000 --> 00:13:58.000
Do đó, khi hoàn tất, tiện ích mở rộng chuyển hướng phải gọi hoàn thành với httpResponse và httpBody, hoặc hoàn thành với một lỗi.

00:13:58.000 --> 00:14:03.000
Điều này sẽ loại bỏ chế độ xem, nếu hiển thị và trả lại phản hồi cho người gọi.

00:14:03.000 --> 00:14:06.000
Nếu bạn gọi sai phương thức, hệ thống sẽ hủy yêu cầu của bạn.

00:14:06.000 --> 00:14:12.000
Các tiện ích mở rộng thông tin xác thực sẽ nhận được httpChallenge và cần trả lại các tiêu đề ủy quyền.

00:14:12.000 --> 00:14:17.000
Do đó, các tiện ích mở rộng thông tin xác thực nên sử dụng phương thức complete with AuthorizationHeaders.

00:14:17.000 --> 00:14:26.000
Nếu thử thách ủy quyền không được tiện ích mở rộng của bạn hỗ trợ, thì hãy phản hồi bằng doNotHandle để Safari hoặc URLSession sẽ tiến hành xử lý mặc định.

00:14:26.000 --> 00:14:30.000
Bây giờ hãy xem xét việc sử dụng các tiện ích mở rộng trong ứng dụng của bạn.

00:14:30.000 --> 00:14:38.000
Những thách thức về thông tin xác thực của bạn sẽ được xử lý nếu bạn sử dụng bất kỳ khung mạng tiêu chuẩn nào, bao gồm URLSession và WKWebView.

00:14:38.000 --> 00:14:43.000
Các yêu cầu cũng sẽ được chuyển hướng, vì vậy bạn không cần phải cập nhật ứng dụng của mình để làm cho nó hoạt động.

00:14:43.000 --> 00:14:46.000
Tuy nhiên, dòng chảy có thể không phù hợp nhất với ứng dụng của bạn.

00:14:46.000 --> 00:14:53.000
Ví dụ, các chuyển hướng sẽ được gửi đến các tiện ích mở rộng, nhưng nó có thể phủ lên các thành phần khác hoặc hiển thị các hộp thoại web khác trước.

00:14:53.000 --> 00:14:58.000
Bạn có thể sử dụng các thao tác để cải thiện luồng ứng dụng của mình hoặc làm nhiều việc hơn là chỉ đăng nhập.

00:14:58.000 --> 00:15:07.000
Ví dụ, tiện ích mở rộng Kerberos tích hợp hỗ trợ các hoạt động đăng nhập và đăng xuất cục bộ trên iOS, iPadOS và macOS.

00:15:07.000 --> 00:15:12.000
Nó cũng trả về các giá trị tùy chỉnh trong tiêu đề phản hồi cho các ứng dụng để lấy thông tin về người dùng.

00:15:12.000 --> 00:15:20.000
Để gọi một hoạt động trong ứng dụng của bạn, trước tiên bạn tạo một phiên bản của nhà cung cấp đăng nhập một lần và chuyển cho nó một URL cho nhà cung cấp danh tính.

00:15:20.000 --> 00:15:27.000
Nếu bạn đang sử dụng tiện ích mở rộng thông tin xác thực, bạn cũng có thể sử dụng các sơ đồ lĩnh vực hoặc máy chủ đặc biệt để khớp với các giá trị đó.

00:15:27.000 --> 00:15:34.000
Sau đó gọi canPerformAuthorization để xem liệu URL có được xử lý bằng cách đăng nhập một lần hay không.

00:15:34.000 --> 00:15:37.000
Nếu nó có thể được xử lý, hãy tạo yêu cầu và thiết lập thao tác.

00:15:37.000 --> 00:15:41.000
Hãy nhớ rằng bạn cũng có thể tạo các hoạt động tùy chỉnh của riêng mình.

00:15:41.000 --> 00:15:44.000
Tiếp theo bạn tạo bộ điều khiển cho yêu cầu.

00:15:44.000 --> 00:15:49.000
Bộ điều khiển chịu trách nhiệm xử lý yêu cầu và trả lại phản hồi.

00:15:49.000 --> 00:15:52.000
Bạn đặt đại biểu để xử lý các câu trả lời.

00:15:52.000 --> 00:15:59.000
Bạn có thể đặt presentationContextProvider để cho hệ điều hành biết cửa sổ nào trong ứng dụng Mac của bạn sẽ sử dụng để xác thực.

00:15:59.000 --> 00:16:03.000
Điều này có thể giúp duy trì ngữ cảnh của yêu cầu cho người dùng.

00:16:03.000 --> 00:16:07.000
Cuối cùng, hãy gọi performRequests để gửi nó đến tiện ích mở rộng.

00:16:07.000 --> 00:16:12.000
Khi phần mở rộng kết thúc, phương thức đại diện didCompleteWithAuthorization được gọi.

00:16:12.000 --> 00:16:21.000
Phiên bản ủy quyền được cung cấp bao gồm một thông tin xác thực đăng nhập một lần với các phương pháp dễ dàng để truy cập mã thông báo ID, mã thông báo truy cập và hơn thế nữa.

00:16:21.000 --> 00:16:27.000
Tiện ích mở rộng Kerberos do hệ thống cung cấp sẽ cung cấp cho bạn một số thông tin về người dùng đã đăng nhập trong tiêu đề.

00:16:27.000 --> 00:16:30.000
Bây giờ cho một số mẹo phát triển.

00:16:30.000 --> 00:16:33.000
Tiện ích mở rộng của bạn sẽ được tải khi nhận được yêu cầu đầu tiên.

00:16:33.000 --> 00:16:36.000
Nó có thể sẽ được dỡ xuống khi yêu cầu của bạn được hoàn thành.

00:16:36.000 --> 00:16:43.000
Do đó, tôi khuyên bạn nên cài đặt tải chậm và sau đó bạn nên lưu bất kỳ giá trị nào vào đĩa trước khi gửi phản hồi.

00:16:43.000 --> 00:16:45.000
Bây giờ để gỡ lỗi.

00:16:45.000 --> 00:16:50.000
Gỡ lỗi tiện ích mở rộng có thể là một thách thức vì nó không được tải cho đến khi nhận được yêu cầu đầu tiên.

00:16:50.000 --> 00:16:56.000
Do đó, cách tốt nhất để gỡ lỗi tiện ích mở rộng của bạn là sử dụng "Đính kèm để xử lý theo ID hoặc tên quy trình..."

00:16:56.000 --> 00:16:58.000
Dưới menu Gỡ lỗi.

00:16:58.000 --> 00:17:03.000
Bạn chỉ cần nhập tên tiện ích mở rộng của mình và Xcode sẽ đính kèm vào nó khi nó được tải lần đầu tiên.

00:17:03.000 --> 00:17:10.000
Khi sử dụng các thao tác, để nhất quán, tôi khuyên bạn nên sử dụng thao tác đăng nhập cho các kịch bản tương tác sẽ hiển thị giao diện người dùng.

00:17:10.000 --> 00:17:18.000
Bạn nên sử dụng thao tác làm mới cho các thao tác im lặng và nếu có lỗi, ứng dụng gốc có thể theo dõi thao tác đăng nhập.

00:17:18.000 --> 00:17:20.000
Tiếp theo, hãy nói về ứng dụng máy chủ.

00:17:20.000 --> 00:17:24.000
Đó là một ý tưởng tốt để làm cho ứng dụng máy chủ không chỉ là một thùng chứa trống.

00:17:24.000 --> 00:17:28.000
Bạn có thể xem xét thêm menu, tiện ích hoặc thậm chí là tiện ích dòng lệnh.

00:17:28.000 --> 00:17:34.000
Nó có thể xử lý việc giới thiệu, ghép nối thiết bị hoặc các chức năng không thường xuyên được sử dụng khác, chẳng hạn như thay đổi mật khẩu.

00:17:34.000 --> 00:17:37.000
Bạn cũng có thể sử dụng NFC trong ứng dụng máy chủ của mình.

00:17:37.000 --> 00:17:42.000
Bạn cũng nên cân nhắc tích hợp các tiện ích mở rộng thông tin xác thực và chuyển hướng các tiện ích mở rộng cùng nhau.

00:17:42.000 --> 00:17:46.000
Hiện tại có những khả năng mới mà bạn có thể tận dụng trong các tiện ích mở rộng của mình.

00:17:46.000 --> 00:17:51.000
Bạn có thể giữ thông tin nhạy cảm, chẳng hạn như làm mới mã thông báo, trong tiện ích mở rộng như một cách để kiểm soát nó.

00:17:51.000 --> 00:17:55.000
Bạn có thể ký cục bộ một JWT, sau đó gửi nó đến máy chủ để xác thực.

00:17:55.000 --> 00:18:01.000
Hoặc bạn có thể tạo một yêu cầu ký chứng chỉ trên thiết bị và gửi nó đến CA của bạn để ghép nối thiết bị.

00:18:01.000 --> 00:18:10.000
Bạn cũng có thể chia sẻ cookie xác thực từ WKWebview với URLSession để chia sẻ các phiên với các yêu cầu gốc.

00:18:10.000 --> 00:18:14.000
Tóm lại, đăng nhập một lần cho phép xác thực cho các ứng dụng và trang web của bạn.

00:18:14.000 --> 00:18:18.000
Nó có sẵn trên iOS 13, iPadOS và macOS.

00:18:18.000 --> 00:18:20.000
Có hai loại có sẵn.

00:18:20.000 --> 00:18:23.000
Chúng tôi thực sự vui mừng khi thấy bạn có thể làm gì với chúng.

00:18:23.000 --> 23:59:59.000
Để biết thêm thông tin, vui lòng truy cập developer.apple.com.

