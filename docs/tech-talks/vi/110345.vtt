WEBVTT

00:00:00.000 --> 00:00:03.000
Xin chào và cảm ơn bạn đã tham gia cùng chúng tôi.

00:00:03.000 --> 00:00:12.000
Trong bài thuyết trình này, chúng tôi sẽ thảo luận về cách bạn có thể triển khai Chia sẻ trong gia đình cho các đăng ký của mình và các giao dịch mua trong ứng dụng không thể tiêu thụ được.

00:00:12.000 --> 00:00:22.000
Tôi là Bryan và tôi là một phần của Nhóm Kiếm tiền từ Cửa hàng Ứng dụng, và tôi được tham gia bởi Hemant, một người ủng hộ nhà phát triển trong Nhóm Thương mại Cửa hàng Ứng dụng.

00:00:22.000 --> 00:00:27.000
Hôm nay, tôi sẽ cung cấp cho bạn cái nhìn tổng quan về Chia sẻ trong gia đình để mua hàng trong ứng dụng.

00:00:27.000 --> 00:00:33.000
Sau đó tôi sẽ thảo luận về những lợi ích của tính năng này và cung cấp cho bạn một số mẹo để tận dụng tối đa nó.

00:00:33.000 --> 00:00:39.000
Cuối cùng, Hemant sẽ thảo luận về kỹ thuật và triển khai.

00:00:39.000 --> 00:00:42.000
Vậy hãy bắt đầu nào.

00:00:42.000 --> 00:00:52.000
Xin nhắc lại, Chia sẻ trong gia đình là một công cụ mạnh mẽ giúp khách hàng dễ dàng chia sẻ các giao dịch mua kỹ thuật số của họ với các thành viên trong gia đình trên tất cả các thiết bị Apple của họ.

00:00:52.000 --> 00:01:07.000
Chúng tôi đã ra mắt nó vào năm 2014, và kể từ đó, Chia sẻ trong gia đình đã trở thành một phần quan trọng của hệ sinh thái Apple, mang nội dung và dịch vụ đến nhiều khách hàng và nhiều thiết bị hơn bao giờ hết.

00:01:07.000 --> 00:01:14.000
Và chúng tôi đã mở rộng những khả năng này lên StoreKit như một phần của khoản đầu tư liên tục của chúng tôi vào Chia sẻ trong Gia đình.

00:01:14.000 --> 00:01:25.000
Và đó là tất cả những gì về phiên hôm nay, bắt đầu với Chia sẻ trong gia đình cho các đăng ký tự động gia hạn và mua hàng trong ứng dụng không thể tiêu thụ của bạn.

00:01:25.000 --> 00:01:37.000
Ngoài việc có sẵn cho cả đăng ký và không tiêu dùng, Chia sẻ trong gia đình cho phép Chia sẻ mua hàng với tối đa năm thành viên gia đình được bao gồm trong nhóm gia đình của khách hàng.

00:01:37.000 --> 00:01:46.000
Là một nhà phát triển, bạn có thể chọn triển khai nó trên các SKU hiện có hoặc tạo những SKU mới dành riêng cho Chia sẻ trong gia đình.

00:01:46.000 --> 00:01:58.000
Thật dễ dàng để triển khai trong App Store Connect và nó cung cấp trải nghiệm người dùng hợp lý, thuận tiện có thể giúp bạn cải thiện KPI kiếm tiền của mình.

00:01:58.000 --> 00:02:03.000
Vậy Chia sẻ trong gia đình để mua hàng trong ứng dụng sẽ giúp tác động đến doanh nghiệp của bạn như thế nào?

00:02:03.000 --> 00:02:17.000
Nó giúp ích trong bốn lĩnh vực chính, tăng trưởng người đăng ký, tăng mức độ tương tác và giảm tỷ lệ rời đi, tất cả đều làm tăng giá trị trọn đời của khách hàng cao hơn.

00:02:17.000 --> 00:02:22.000
Đây là cách các số liệu này hoạt động cùng nhau bằng cách sử dụng Michael làm ví dụ.

00:02:22.000 --> 00:02:28.000
Chia sẻ trong gia đình có thể là một cách hấp dẫn để phát triển cơ sở người đăng ký của bạn và thu hút Michael đến với sản phẩm của bạn.

00:02:28.000 --> 00:02:41.000
Khi bạn đã mua Michael làm người đăng ký, anh ấy có thể mở rộng đăng ký của mình cho các thành viên còn lại trong gia đình, điều này cuối cùng nhân số lượng điểm tiếp xúc của khách hàng với dịch vụ và ứng dụng của bạn.

00:02:41.000 --> 00:02:59.000
Và với việc cả gia đình hiện đang tương tác với sản phẩm của bạn, việc cung cấp nội dung hấp dẫn kết hợp với tiếp thị tương tác hiệu quả có thể khiến họ quay trở lại và hiệu quả tổng thể của việc người dùng gia tăng nhận được giá trị từ sản phẩm và dịch vụ của bạn là giảm sự gián đoạn.

00:02:59.000 --> 00:03:06.000
Và khách hàng cũng yêu thích Chia sẻ trong gia đình vì nó cho phép họ chia sẻ giao dịch mua với các thành viên trong gia đình.

00:03:06.000 --> 00:03:16.000
Nó được thiết kế cùng với iOS để cung cấp trải nghiệm sẵn có liền mạch và dễ sử dụng, nhất quán trên các thiết bị và ứng dụng.

00:03:16.000 --> 00:03:25.000
Nó được xây dựng với sự riêng tư trong tâm trí và loại bỏ nhu cầu chia sẻ mật khẩu vì mỗi thành viên trong gia đình nhận được quyền mua hàng của riêng họ.

00:03:25.000 --> 00:03:33.000
Và cuối cùng, Chia sẻ trong gia đình tăng thêm giá trị cho việc mua hàng trong ứng dụng bằng cách cung cấp tối đa sáu quyền thay vì một.

00:03:33.000 --> 00:03:44.000
Điều này mang lại cho khách hàng khả năng mở rộng số lượng người có quyền truy cập vào giao dịch mua và mang đến cho mỗi thành viên trong gia đình trải nghiệm ứng dụng được cá nhân hóa.

00:03:44.000 --> 00:03:50.000
Bây giờ, hãy nói về cách khách hàng và nhà phát triển có thể tận dụng tối đa tính năng.

00:03:50.000 --> 00:03:57.000
Trước tiên, khách hàng phải tạo một nhóm gia đình để bắt đầu sử dụng Chia sẻ trong gia đình để mua hàng trong ứng dụng.

00:03:57.000 --> 00:04:04.000
Một người lớn trong một hộ gia đình có thể làm điều này bằng cách mời tối đa năm thành viên trong gia đình của họ tham gia bằng ID Apple của họ.

00:04:04.000 --> 00:04:11.000
Mỗi thành viên trong gia đình sử dụng tài khoản riêng của họ để trải nghiệm của họ luôn được cá nhân hóa và riêng tư.

00:04:11.000 --> 00:04:22.000
Và mỗi thành viên trong gia đình sau đó sẽ có quyền truy cập tức thì vào các đăng ký và nội dung của nhóm đủ điều kiện để chia sẻ sau khi nhóm gia đình được tạo.

00:04:22.000 --> 00:04:28.000
Hãy cùng xem cách khách hàng quản lý các tùy chọn chia sẻ của họ trong ứng dụng Cài đặt.

00:04:28.000 --> 00:04:35.000
Đây là trang Quản lý Đăng ký nơi khách hàng có thể xem tất cả các sản phẩm mà họ hiện đang đăng ký.

00:04:35.000 --> 00:04:45.000
Nút chuyển đổi Chia sẻ với Gia đình ở cuối trang cho phép họ chọn xem họ có tự động chia sẻ các SKU hỗ trợ Chia sẻ Gia đình trong tương lai hay không.

00:04:45.000 --> 00:04:52.000
Nút chuyển đổi này được bật theo mặc định nhưng khách hàng có thể chọn không tham gia bất cứ lúc nào.

00:04:52.000 --> 00:05:02.000
Chọn bất kỳ ứng dụng nào được liệt kê sẽ cho phép bạn chỉnh sửa các giao dịch mua và chọn xem Chia sẻ trong gia đình được bật hay tắt cho một đăng ký cụ thể.

00:05:02.000 --> 00:05:07.000
Cài đặt ban đầu dựa trên tùy chọn Chia sẻ với Gia đình trong hình ảnh bên trái.

00:05:07.000 --> 00:05:15.000
Khách hàng cũng có thể đến đây để chọn tham gia Chia sẻ trong gia đình nếu nó có sẵn cho đăng ký hiện có.

00:05:15.000 --> 00:05:21.000
Đây là những bước mà các nhóm gia đình sẽ cần thực hiện để chia sẻ đăng ký chia sẻ gia đình của họ.

00:05:21.000 --> 00:05:28.000
Chia sẻ trong gia đình được bật tự động cho bất kỳ giao dịch mua mới nào của đăng ký chia sẻ trong gia đình.

00:05:28.000 --> 00:05:36.000
Khi các đăng ký hiện tại có sẵn cho Chia sẻ trong gia đình, người mua ban đầu phải chọn chia sẻ trong cài đặt.

00:05:36.000 --> 00:05:45.000
Điều này là để đảm bảo khách hàng hoàn toàn thừa nhận các bản cập nhật cho các điều khoản đăng ký của họ.

00:05:45.000 --> 00:05:56.000
Mặc dù chúng tôi rất khuyến khích bạn nhắn tin về tính khả dụng của Chia sẻ trong gia đình thông qua các kênh tiếp thị của riêng bạn, nhưng có hai trường hợp sử dụng mà App Store sẽ nhắn tin trực tiếp cho khách hàng.

00:05:56.000 --> 00:06:17.000
Người mua sẽ nhận được thông báo đẩy khi Chia sẻ trong gia đình có sẵn trên SKU đăng ký hiện có và thông báo đẩy cũng sẽ được gửi đến những khách hàng mua SKU hỗ trợ Chia sẻ trong gia đình mới nhưng trước đó đã tắt chia sẻ với Chuyển đổi chính gia đình trong trang Quản lý đăng ký.

00:06:17.000 --> 00:06:27.000
Những thông báo đẩy này sẽ liên kết khách hàng với trang chỉnh sửa đăng ký cho ứng dụng cụ thể đó, nơi họ có thể chọn chia sẻ nó với phần còn lại của nhóm gia đình.

00:06:27.000 --> 00:06:32.000
Và quy trình hơi khác đối với các giao dịch mua trong ứng dụng không thể tiêu hao.

00:06:32.000 --> 00:06:41.000
Chia sẻ trong gia đình của các sản phẩm không phải hàng tiêu dùng được bật tự động cho cả giao dịch mua mới và hiện có miễn là Chia sẻ mua hàng được bật trong iCloud.

00:06:41.000 --> 00:06:47.000
Gia đình đang chia sẻ các giao dịch mua và ứng dụng không bị ẩn khỏi lịch sử mua hàng.

00:06:47.000 --> 00:07:04.000
Các thành viên trong gia đình sẽ tự động có quyền truy cập vào nội dung của các giao dịch mua mới nhưng khi Chia sẻ trong gia đình có sẵn trên giao dịch mua hiện có, các thành viên trong gia đình sẽ phải chọn nút Khôi phục giao dịch mua để mở khóa nội dung mới có sẵn cho họ.

00:07:04.000 --> 00:07:14.000
Đây là màn hình bao gồm nút chuyển đổi Mua hàng Chia sẻ với Gia đình, phải được bật để chia sẻ không tiêu thụ với các thành viên trong gia đình.

00:07:14.000 --> 00:07:22.000
Có thể tìm thấy trang này bằng cách chọn ID Apple theo sau là Chia sẻ trong gia đình, sau đó chia sẻ mua hàng trong ứng dụng Cài đặt.

00:07:22.000 --> 00:07:29.000
Có một số cách để làm cho chức năng Chia sẻ trong gia đình của bạn dễ khám phá và hấp dẫn nhất có thể.

00:07:29.000 --> 00:07:35.000
App Store Connect giúp bạn dễ dàng bật tính năng chia sẻ trong gia đình cho tất cả khách hàng của mình.

00:07:35.000 --> 00:07:48.000
Cân nhắc bao gồm chức năng trong quy trình giới thiệu của bạn để truyền đạt rõ ràng khả năng chia sẻ đăng ký của bạn với các thành viên gia đình như một phần của đề xuất giá trị dịch vụ tổng thể.

00:07:48.000 --> 00:07:52.000
Cũng có thể cung cấp Chia sẻ trong gia đình như một cấp đăng ký riêng biệt.

00:07:52.000 --> 00:08:03.000
Quy trình mua hàng này phân biệt rõ ràng giữa các cấp có sẵn và bao gồm một liên kết đến trang tổng quan về Chia sẻ trong gia đình ở cuối màn hình.

00:08:03.000 --> 00:08:14.000
Nếu bạn chọn cung cấp Chia sẻ trong gia đình như một cấp dịch vụ cao hơn, hãy nhớ nhóm cấp cao hơn với cấp hoặc nhiều cấp riêng lẻ trong App Store Connect.

00:08:14.000 --> 00:08:25.000
Điều này sẽ cho phép bạn cung cấp tin nhắn nâng cấp, như ví dụ trong ứng dụng này, làm nổi bật giá trị của việc nâng cấp gói của người đăng ký cá nhân lên cấp gia đình.

00:08:25.000 --> 00:08:37.000
Sau khi một thành viên mới trong gia đình hoàn tất việc mua hàng của họ, hãy cân nhắc tiếp thị chức năng để nhắc nhở họ khuyến khích các thành viên trong gia đình tận dụng dịch vụ như được hiển thị ở đây bên trái.

00:08:37.000 --> 00:08:45.000
Và ở bên phải, bạn có thể thấy một thông báo cho các thành viên trong gia đình thông báo rằng bây giờ họ có quyền truy cập vào đăng ký.

00:08:45.000 --> 00:08:54.000
Hemant sẽ hướng dẫn bạn cách nhận dạng thành viên trong gia đình và mở khóa quyền truy cập liền mạch để họ có thể bắt đầu tận hưởng dịch vụ của bạn ngay lập tức.

00:08:54.000 --> 00:08:57.000
Và đây là một ví dụ trực tiếp từ Bầu trời đêm.

00:08:57.000 --> 00:09:02.000
Họ đang cung cấp Chia sẻ trong gia đình cho tất cả khách hàng của họ trên một SKU hiện có.

00:09:02.000 --> 00:09:11.000
Ở bên trái, bạn có thể thấy cách họ đã làm nổi bật rõ ràng Chia sẻ trong Gia đình trong quy trình đăng ký của họ và quảng bá rằng nó có sẵn mà không mất thêm chi phí.

00:09:11.000 --> 00:09:23.000
Và ở bên phải, bạn có thể thấy họ đã cung cấp cho tính năng này một trang chuyên dụng trong băng chuyền giới thiệu người đăng ký sau khi mua hàng của họ để khuyến khích chủ sở hữu gói mới tận dụng các lợi ích.

00:09:23.000 --> 00:09:30.000
Đây là bản tóm tắt một vài mục cần ghi nhớ khi xem xét các kế hoạch triển khai với nhóm của bạn.

00:09:30.000 --> 00:09:56.000
Xem xét giá trị gia tăng mà Chia sẻ trong gia đình có thể cung cấp cho các giao dịch mua trong ứng dụng của bạn và cách bạn có thể sử dụng tính năng này để thu hút người đăng ký mới vào dịch vụ của mình, quyết định xem bạn sẽ bật Chia sẻ trong gia đình trên SKU mới hay hiện có và làm việc với các nhóm tiếp thị và sản phẩm của bạn để

00:09:56.000 --> 00:10:02.000
Bây giờ tôi sẽ bàn giao nó cho Hemant để thảo luận về kỹ thuật và triển khai tính năng này.

00:10:02.000 --> 00:10:05.000
Cảm ơn bạn, Bryan. Xin chào mọi người.

00:10:05.000 --> 00:10:08.000
Tôi là Hemant từ Nhóm Thương mại App Store.

00:10:08.000 --> 00:10:18.000
Tôi ở đây hôm nay để chia sẻ với bạn một số chi tiết kỹ thuật và triển khai cần xem xét khi áp dụng Chia sẻ trong gia đình để mua hàng trong ứng dụng.

00:10:18.000 --> 00:10:20.000
Chúng tôi có ba phần để đề cập.

00:10:20.000 --> 00:10:26.000
Chúng ta sẽ bắt đầu với việc bật Chia sẻ trong gia đình cho mỗi sản phẩm trong App Store Connect.

00:10:26.000 --> 00:10:34.000
Sau đó, tôi sẽ thảo luận về cách đơn đăng ký của bạn có thể cung cấp dịch vụ cho các thành viên gia đình của người mua.

00:10:34.000 --> 00:10:41.000
Và tôi sẽ kết thúc với những gì có sẵn trong StoreKit và thông báo máy chủ App Store của chúng tôi để Chia sẻ trong Gia đình.

00:10:41.000 --> 00:10:44.000
Vì vậy, hãy bắt đầu với việc kích hoạt Chia sẻ trong gia đình.

00:10:44.000 --> 00:10:52.000
Để bắt đầu, bạn sẽ truy cập App Store Connect và điều hướng đến đăng ký hoặc sản phẩm không tiêu thụ mà bạn muốn kích hoạt.

00:10:52.000 --> 00:10:59.000
Bạn sẽ thấy một phần mới có nhãn Chia sẻ trong gia đình với tùy chọn bật.

00:10:59.000 --> 00:11:02.000
Một hộp thoại xác nhận sẽ được hiển thị.

00:11:02.000 --> 00:11:12.000
Và một khi bạn chọn Xác nhận, sản phẩm của bạn sẽ có thể chia sẻ gia đình cho tất cả khách hàng của bạn, mới và hiện tại, trong vòng vài giờ.

00:11:12.000 --> 00:11:20.000
Bây giờ chúng tôi muốn nhấn mạnh rằng một khi được kích hoạt cho một sản phẩm nhất định, điều này không thể hoàn nguyên.

00:11:20.000 --> 00:11:27.000
Điều này là do khách hàng có thể đã quyết định mua hàng của họ dựa trên chức năng này.

00:11:27.000 --> 00:11:37.000
Sau khi được bật trong App Store Connect, StoreKit bây giờ sẽ trả lại tài sản dưới dạng gia đình có thể chia sẻ cho bất kỳ sản phẩm nào bạn đã bật.

00:11:37.000 --> 00:11:43.000
Thuộc tính này có sẵn trong cả StoreKit 2 và StoreKit gốc.

00:11:43.000 --> 00:11:47.000
Bạn sẽ nhận ra điều này như được Bryan trình bày trước đó.

00:11:47.000 --> 00:11:56.000
Đây là tài sản bạn sẽ cần để cho phép kiểm soát động giao diện người dùng cụ thể của Family Sharing trong ứng dụng của mình.

00:11:56.000 --> 00:12:00.000
Và cái này có sẵn từ iOS 14 trở lên.

00:12:00.000 --> 00:12:09.000
Trên màn hình là một số mã mẫu về cách ứng dụng của bạn có thể sử dụng thuộc tính từ đối tượng sản phẩm StoreKit.

00:12:09.000 --> 00:12:21.000
Thuộc tính isFamilyShareable là một Boolean đơn giản cho phép bạn xác định và bán các sản phẩm có thể chia sẻ của gia đình với giao diện người dùng hoặc bản sao tùy chỉnh.

00:12:21.000 --> 00:12:35.000
Thuộc tính này cũng có sẵn trong hộp cát và môi trường thử nghiệm Xcode của chúng tôi, và điều này cho phép bạn dễ dàng kiểm tra bất kỳ thay đổi trải nghiệm nào bạn muốn thực hiện cho một sản phẩm có thể chia sẻ gia đình.

00:12:35.000 --> 00:12:42.000
Bây giờ, hãy đi sâu hơn vào cách Chia sẻ trong gia đình hoạt động cho thành viên trong gia đình.

00:12:42.000 --> 00:12:50.000
Tin tuyệt vời là, Chia sẻ trong gia đình hoạt động giống như cách máy chủ và ứng dụng của bạn sẽ quen thuộc.

00:12:50.000 --> 00:12:59.000
Ứng dụng của bạn có thể sẽ xử lý các giao dịch gia đình này mà không thực hiện bất kỳ thay đổi nào, phía máy chủ hoặc phía máy khách.

00:12:59.000 --> 00:13:06.000
Và điều này là do những giao dịch mua này tự động có sẵn cho tất cả các thành viên trong gia đình.

00:13:06.000 --> 00:13:14.000
Vì vậy, khi ứng dụng của bạn được khởi chạy, bạn sẽ thấy một giao dịch có sẵn thông qua StoreKit, giống như giao dịch mua thông thường.

00:13:14.000 --> 00:13:26.000
Điều này cho phép bạn xác nhận rằng mỗi thành viên trong gia đình có quyền truy cập vào đăng ký hoặc sản phẩm không tiêu thụ bằng ID Apple của riêng họ.

00:13:26.000 --> 00:13:42.000
Với giả định của chúng tôi rằng ứng dụng của bạn sẽ hoạt động cho các thành viên trong gia đình mà không có bất kỳ thay đổi nào, hãy xem lại một số phương pháp hay nhất chính để đảm bảo ứng dụng của bạn mang lại trải nghiệm tối ưu trong mọi tình huống.

00:13:42.000 --> 00:13:52.000
Dù bạn đang sử dụng phiên bản StoreKit nào, điều quan trọng là phải lắng nghe giao dịch khi khởi chạy và tiếp tục làm như vậy trong suốt vòng đời của ứng dụng.

00:13:52.000 --> 00:13:57.000
Điều này sẽ đảm bảo ứng dụng của bạn không bao giờ bỏ lỡ giao dịch.

00:13:57.000 --> 00:14:10.000
Điều này cũng quan trọng đối với các tình huống khác như Yêu cầu mua, PSD2 hoặc mã ưu đãi đăng ký nơi giao dịch có thể được hoàn tất bên ngoài ứng dụng của bạn.

00:14:10.000 --> 00:14:19.000
Trước khi bạn bán bất kỳ sản phẩm nào cho khách hàng, đó là một phương pháp hay nhất khác để đảm bảo bạn biết tình trạng của họ trước.

00:14:19.000 --> 00:14:27.000
Bạn có thể làm điều này bằng cách tương tác trực tiếp với StoreKit hoặc bằng cách truy xuất và xác thực biên lai của họ.

00:14:27.000 --> 00:14:39.000
Bạn có thể xác định xem họ có các giao dịch mua trong quá khứ mà bạn cần cho phép hay không và trong trường hợp đây là khách hàng mới, bạn có thể bán hàng cho họ một cách thích hợp.

00:14:39.000 --> 00:14:51.000
Với hai phương pháp hay nhất này, bạn có thể giảm sự leo thang của khách hàng, giảm thiểu hoàn tiền, đánh giá tiêu cực và cuối cùng là cải thiện trải nghiệm của khách hàng.

00:14:51.000 --> 00:15:01.000
Để tìm hiểu sâu hơn về chủ đề này, hãy xem phiên từ WWDC Implement Proactive In-App Purchase Restore.

00:15:01.000 --> 00:15:10.000
Bây giờ, hãy minh họa giao dịch mua mới trông như thế nào đối với các thành viên trong gia đình và thiết bị của họ.

00:15:10.000 --> 00:15:16.000
Người mua bắt đầu mua hàng trên thiết bị của họ giống như bình thường.

00:15:16.000 --> 00:15:23.000
Vì sản phẩm này có thể chia sẻ trong gia đình, giao dịch sẽ được tạo cho mỗi thành viên trong gia đình.

00:15:23.000 --> 00:15:34.000
Nếu bạn đang làm theo các phương pháp hay nhất của chúng tôi, ứng dụng của bạn sẽ thấy giao dịch mới này khi khởi chạy hoặc trong thời gian thực từ StoreKit.

00:15:34.000 --> 00:15:40.000
Tại thời điểm này, bạn có thể xác thực và cho phép dịch vụ giống như bất kỳ giao dịch nào khác.

00:15:40.000 --> 00:15:46.000
Một điều cần lưu ý, chúng tôi đã thực hiện một sự chậm trễ cho giao dịch gia đình.

00:15:46.000 --> 00:15:55.000
Sự chậm trễ này cho phép người mua có thời gian vô hiệu hóa Chia sẻ trong gia đình nếu họ chọn làm như vậy.

00:15:55.000 --> 00:16:00.000
Hãy lấy cùng một hình minh họa, nhưng để mua đăng ký hiện có.

00:16:00.000 --> 00:16:08.000
Như đã đề cập trước đó, đối với các giao dịch mua hiện tại, Chia sẻ trong gia đình không được bật theo mặc định.

00:16:08.000 --> 00:16:16.000
Người mua sẽ cần bật Chia sẻ trong gia đình từ trang Quản lý đăng ký cho mỗi đăng ký hiện có.

00:16:16.000 --> 00:16:24.000
Sau khi được kích hoạt, giao dịch cho mỗi thành viên trong gia đình sẽ được tạo ngay sau đó.

00:16:24.000 --> 00:16:35.000
Thuộc tính loại quyền sở hữu có sẵn trong StoreKit và API máy chủ của chúng tôi cho phép bạn phân biệt giữa người mua và thành viên gia đình.

00:16:35.000 --> 00:16:58.000
Như Bryan đã chia sẻ trước đó, nếu ứng dụng của bạn muốn có trải nghiệm giới thiệu tùy chỉnh cho các thành viên trong gia đình, thì đây là tài sản bạn sẽ sử dụng hoặc điều này có thể hữu ích nếu bạn muốn xác định một khách hàng có khả năng quản lý đăng ký, thì bạn sẽ tìm kiếm giá trị đã mua.

00:16:58.000 --> 00:17:08.000
Tài sản có thể được tìm thấy trong các đối tượng của mỗi giao dịch và cũng có sẵn trong biên lai ứng dụng.

00:17:08.000 --> 00:17:12.000
Tiếp theo, xử lý các sự kiện của người đăng ký.

00:17:12.000 --> 00:17:32.000
Có những tình huống độc đáo cần lưu ý vì đôi khi bạn có thể cần thu hồi quyền truy cập từ một thành viên trong gia đình, chẳng hạn như khi người mua đã vô hiệu hóa hoàn toàn Chia sẻ trong gia đình hoặc có thể người mua đã nhận được tiền hoàn lại cho đăng ký hoặc không tiêu thụ.

00:17:32.000 --> 00:17:41.000
Cuối cùng, có thể là trường hợp một trong hai thành viên gia đình hoặc người mua không còn là một phần của đơn vị gia đình.

00:17:41.000 --> 00:17:53.000
Để giải thích cho các tình huống, chúng tôi có thông tin bạn cần thông qua StoreKit trong iOS 14 trở lên và từ thông báo máy chủ App Store của chúng tôi.

00:17:53.000 --> 00:17:59.000
Hãy xem cách bạn sẽ kiểm tra kịch bản này trong ví dụ mã này.

00:17:59.000 --> 00:18:09.000
Khi bạn nhận được thông tin cập nhật cho giao dịch của mình từ người nghe giao dịch, bạn nên kiểm tra sự hiện diện của thuộc tính revocationDate.

00:18:09.000 --> 00:18:16.000
Điều này cho bạn biết giao dịch này đã bị thu hồi và khách hàng không còn được hưởng sản phẩm nữa.

00:18:16.000 --> 00:18:33.000
Tuy nhiên, điều quan trọng cần lưu ý là có thể có các giao dịch khác cho phép khách hàng sử dụng các sản phẩm giống nhau hoặc khác nhau, vì vậy bạn nên kiểm tra và đảm bảo rằng khách hàng đang nhận được những gì họ đang trả tiền.

00:18:33.000 --> 00:18:42.000
Nếu bạn vẫn đang sử dụng StoreKit gốc, bạn cần sử dụng phương thức gọi lại có tên didRevokeEntitlementsForProductIdentifiers.

00:18:42.000 --> 00:18:52.000
Đây là cùng một tín hiệu cho thấy một số quyền lợi có thể đã thay đổi đối với khách hàng này và bạn nên xác minh tình trạng của họ.

00:18:52.000 --> 00:18:57.000
Ngoài ra, chúng tôi có một loại thông báo máy chủ App Store được gọi là Thu hồi.

00:18:57.000 --> 00:19:06.000
Thông báo từ máy chủ đến máy chủ thời gian thực này là một dấu hiệu cho thấy có thể đã có những thay đổi đối với quyền lợi.

00:19:06.000 --> 00:19:12.000
Thông báo này có sẵn cho cả thông báo phiên bản một và phiên bản hai.

00:19:12.000 --> 00:19:30.000
Vì vậy, khi bạn nhận được một trong hai cuộc gọi lại này, điều quan trọng là phải thiết lập lại các quyền lợi chính xác, có nghĩa là điều quan trọng là phải lặp lại toàn bộ lịch sử giao dịch vì những khách hàng này có thể đã có nhiều quyền lợi.

00:19:30.000 --> 00:19:40.000
Vì vậy, nếu một giao dịch đã bị thu hồi, có thể có một giao dịch khác cho phép khách hàng mua cùng một sản phẩm hoặc một sản phẩm khác.

00:19:40.000 --> 00:19:47.000
Bằng cách này, trong những trường hợp đó, bạn sẽ đảm bảo không có sự gián đoạn dịch vụ.

00:19:47.000 --> 00:19:53.000
Vì vậy, hãy xem lại ngắn gọn các loại thông báo máy chủ App Store mà chúng ta có ngày hôm nay.

00:19:53.000 --> 00:20:10.000
Ở đây, chúng tôi có danh sách thông báo V2 và tin tuyệt vời là, bạn sẽ nhận được tất cả các thông báo vòng đời có liên quan cho các thành viên gia đình mà bạn mong đợi nhận được để cập nhật các quyền lợi của khách hàng đó trên máy chủ của bạn.

00:20:10.000 --> 00:20:16.000
Và chúng tôi sẽ bỏ qua những cái chỉ liên quan đến người mua.

00:20:16.000 --> 00:20:22.000
Nếu bạn vẫn đang sử dụng thông báo V1, chúng tôi cũng sẽ nhận được các bản cập nhật vòng đời tương đương.

00:20:22.000 --> 00:20:39.000
Ngoài ra, nếu bạn chưa thêm điểm cuối máy chủ của mình trong App Store Connect, bạn có thể làm như vậy bất cứ lúc nào và thử nghiệm trong môi trường hộp cát để giúp bạn phát triển hỗ trợ cho các bản cập nhật vòng đời quan trọng này.

00:20:39.000 --> 00:20:47.000
Cuối cùng, hãy đề cập đến những gì có sẵn trong phần bán hàng và xu hướng trong App Store Connect.

00:20:47.000 --> 00:20:54.000
Với báo cáo đăng ký, bạn có thể có câu hỏi, chẳng hạn như, Tôi có bao nhiêu đăng ký trả phí theo sản phẩm?

00:20:54.000 --> 00:21:00.000
Hoặc có bao nhiêu khách hàng có quyền truy cập bao gồm cả các thành viên trong gia đình?

00:21:00.000 --> 00:21:06.000
Có sẵn trong báo cáo đăng ký là cột người đăng ký.

00:21:06.000 --> 00:21:12.000
Cột này sẽ cung cấp cho bạn số lượng khách hàng có quyền truy cập vào đăng ký.

00:21:12.000 --> 00:21:18.000
Điều này bao gồm những người đăng ký chính và bất kỳ thành viên gia đình có quyền nào.

00:21:18.000 --> 00:21:28.000
Lưu ý rằng trường này chỉ được điền nếu bản ghi đại diện cho nhiều hơn ba đăng ký đang hoạt động cho sản phẩm của bạn.

00:21:28.000 --> 00:21:37.000
Để kết thúc ngày hôm nay, chúng tôi muốn khuyến khích bạn xem xét chức năng Chia sẻ trong gia đình với các sản phẩm mới hoặc hiện có của bạn.

00:21:37.000 --> 00:21:43.000
Bạn nên truyền đạt rõ ràng tính khả dụng của Chia sẻ trong gia đình và đề xuất giá trị của nó.

00:21:43.000 --> 00:21:50.000
Hãy nhớ rằng, Chia sẻ trong gia đình cung cấp quyền riêng tư cho khách hàng và có thể giúp giảm chia sẻ thông tin xác thực.

00:21:50.000 --> 23:59:59.000
Bạn cũng có thể tìm thấy hướng dẫn về mua hàng trong ứng dụng, bao gồm cả đăng ký, trên trang web của Nhà phát triển Apple.

