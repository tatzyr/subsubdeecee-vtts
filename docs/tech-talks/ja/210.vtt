WEBVTT

00:00:01.000 --> 00:00:04.000
ジェイコブ・クラッパー:こんにちは!共有の新機能へようこそ。

00:00:04.000 --> 00:00:08.000
私の名前はジェイコブ・クラッパーで、シェアシートチームのエンジニアです。

00:00:08.000 --> 00:00:12.000
すぐに飛び込んで、iOS 13の新しいシェアシートを見てみましょう。

00:00:12.000 --> 00:00:15.000
シェアシートは、上部に新しいプレビューヘッダーを備えています。

00:00:15.000 --> 00:00:19.000
これにより、ユーザーが共有している内容が明確になり、カスタマイズできるようになります。

00:00:19.000 --> 00:00:28.000
また、新しい共有シートは、ユーザーが誰と共有したいかを予測する会話の提案行で、迅速かつ簡単に共有しやすくなります。

00:00:28.000 --> 00:00:36.000
最後に、新しいアクションリストは、アプリとアクションの間の明確な線引きを提供し、簡単にアクセスできるようにユーザーのお気に入りのアクションを一番上に置きます。

00:00:36.000 --> 00:00:42.000
それでは、この新しいデザインを活用して、ユーザーの共有体験を向上させる方法について話しましょう。

00:00:42.000 --> 00:00:45.000
まず、シェアシートのプレビューヘッダーのカスタマイズについて説明します。

00:00:45.000 --> 00:00:50.000
次に、メッセージングアプリの会話の提案をオプトインします。

00:00:50.000 --> 00:00:53.000
そして最後に、いくつかのベストプラクティスを復習します。

00:00:53.000 --> 00:00:57.000
では、シェアシートでプレビューヘッダーを設定する方法について話しましょう。

00:00:57.000 --> 00:01:03.000
iOS 13では、アプリにリッチリンクを表示できるLinkPresentation APIが導入されています。

00:01:03.000 --> 00:01:08.000
UIActivityViewControllerは、このフレームワークを利用して、共有シートにプレビューヘッダーを表示します。

00:01:08.000 --> 00:01:12.000
これにより、ユーザーがアプリから何を共有しているかが明確になります。

00:01:12.000 --> 00:01:18.000
追加の利点として、ユーザーがメッセージを介して共有する場合、トランスクリプトのリンクプレビューは共有シートのものと一致します。

00:01:18.000 --> 00:01:22.000
これにより、ユーザーの共有体験に継続性が追加されます。

00:01:22.000 --> 00:01:27.000
Safariのプレビューヘッダーを見てみましょう。 プレビューヘッダーを見てみましょう。

00:01:27.000 --> 00:01:32.000
今はかなり良さそうですが、シェアシートはヘッダーに表示するウェブサイト情報を取得する必要がありました。

00:01:32.000 --> 00:01:36.000
もう一度見ましょう。

00:01:36.000 --> 00:01:41.000
Safariがすでに持っている可能性が高いので、共有シートがこの情報を取得しなければならないのは正しくありません。

00:01:41.000 --> 00:01:50.000
プレビューを高速化するために、SafariはUIActivityItemSourceを使用して、Share Sheet LinkPresentationメタデータをヘッダーに表示できます。

00:01:50.000 --> 00:01:56.000
これは、UIActivityItemSourceの新しいActivityViewContollerリンクメタデータメソッドの例です。

00:01:56.000 --> 00:02:00.000
まず、LPLinkMetadataオブジェクトを作成します。

00:02:00.000 --> 00:02:04.000
次に、元のURLとURLのプロパティを設定します。

00:02:04.000 --> 00:02:07.000
タイトルとiconProviderを設定します。

00:02:07.000 --> 00:02:11.000
そして最後に、メタデータを返します。

00:02:11.000 --> 00:02:14.000
プレビューヘッダーが今どのように見えるか見てみましょう。

00:02:14.000 --> 00:02:22.000
ご覧のとおり、すべての情報はすぐに利用可能になり、共有シートは追加のメタデータの取得を行う必要はありませんでした。

00:02:22.000 --> 00:02:28.000
それでは、シェアシートの新しい会話の提案について話しましょう。

00:02:28.000 --> 00:02:36.000
会話の提案により、ユーザーは名前を入力することなく、特定の受信者にコンテンツを簡単に送信できます。

00:02:36.000 --> 00:02:45.000
会話の提案はSiriKit Intentsを利用しますが、SiriKit UI拡張機能を追加したり、Siriのサポートを提供したりする必要はありません。

00:02:45.000 --> 00:02:53.000
会話の提案行は、共有シートの上部に便利に配置されているため、ユーザーは簡単なタップで共有拡張機能を起動できます。

00:02:53.000 --> 00:02:59.000
メッセージングアプリの共有拡張を提案にオプトインする方法について話しましょう。

00:02:59.000 --> 00:03:05.000
アプリからのメッセージ送信にINSendMessageIntentsを寄付し、拡張機能を共有します。

00:03:05.000 --> 00:03:17.000
より豊かなエクスペリエンスをユーザーに提供するために、受信者、speakableGroupName、conversationIdentifierなど、できるだけ多くのフィールドに入力するようにしてください。

00:03:17.000 --> 00:03:26.000
共有拡張が起動されると、NSExtensionContextのintentプロパティは、UIに入力する会話に関する情報を提供します。

00:03:26.000 --> 00:03:37.000
最後のステップは、共有拡張機能のInfo.plistのIntentsSupported配列にINSendMessageIntentを追加することです。INSendMessageIntentの寄付の例を見てみましょう。

00:03:37.000 --> 00:03:43.000
この関数は、ユーザーがアプリまたは共有拡張機能でメッセージを送信するたびに呼び出す必要があります。

00:03:43.000 --> 00:03:49.000
会話識別子は、共有シートがメッセージを受信する受信者またはグループを識別するのに役立ちます。

00:03:49.000 --> 00:03:53.000
グループ名は、共有シートに会話を表示するために使用されます。

00:03:53.000 --> 00:03:57.000
この場合、参加者配列はINPersonオブジェクトの配列です。

00:03:57.000 --> 00:04:04.000
各INPersonは、ユーザーがシェアシートで簡単に見つけられるように、表示名と画像を持つ必要があります。

00:04:04.000 --> 00:04:08.000
最後に、sendMessageIntentを使用してINInteractionを作成します。

00:04:08.000 --> 00:04:12.000
この場合、ユーザーがメッセージを送信しているため、方向を発信として設定します。

00:04:12.000 --> 00:04:15.000
最後に、インタラクションを寄付します。

00:04:15.000 --> 00:04:22.000
IntentsSupported配列は、Share ExtensionのInfo.plistのNSExtensionAttributes辞書に挿入する必要があります。

00:04:22.000 --> 00:04:31.000
INSendMessageIntentがサポートされているインテントの1つとしてリストされていることを確認してください。そうしないと、会話の提案が拡張機能で有効になりません。

00:04:31.000 --> 00:04:40.000
共有拡張子をオプトインするすべての手順を完了すると、共有拡張子にリンクされた受信者の提案が表示されます。

00:04:40.000 --> 00:04:49.000
この提案には、連絡先またはグループの画像と表示名、アプリのアイコンが表示されているため、ユーザーは簡単に識別できます。

00:04:49.000 --> 00:04:57.000
最後に、シェアシートのベストプラクティスをいくつか紹介しましょう。

00:04:57.000 --> 00:05:03.000
まず、新しいアクションリストのアクション拡張アイコンを最適化する方法について話しましょう。

00:05:03.000 --> 00:05:07.000
まず、アイコンは40×40のテンプレート画像である必要があります。

00:05:07.000 --> 00:05:12.000
システムアイコンに合わせて、塗りつぶしなしでグリフを概説する必要があります。

00:05:12.000 --> 00:05:15.000
可能であれば、SFシンボルまたはシンボル画像を使用してください。

00:05:15.000 --> 00:05:22.000
これを行うには、CFBundleSymbolNameキーをアクション拡張機能のInfo.plistに追加します。

00:05:22.000 --> 00:05:26.000
次に、カードUIについて話しましょう。

00:05:26.000 --> 00:05:31.000
iOS 13の新機能では、共有拡張機能はフォームシートとして表示されます。

00:05:31.000 --> 00:05:40.000
共有拡張機能にフルスクリーンプレゼンテーションが必要な場合は、拡張機能のInfo.plistでNSExtensionShareWants FullScreenPresentationキーを使用してオプトインできます。

00:05:40.000 --> 00:05:48.000
ほとんどの拡張機能はこれを必要としないはずですが、その良い例は、カメラを使用する必要がある拡張機能です。

00:05:48.000 --> 00:05:54.000
最後に、iOS 13の共有拡張機能の新しい動作について確認したいと思います。

00:05:54.000 --> 00:06:00.000
共有拡張機能は、拡張機能の表示名ではなく、含まれているアプリの表示名を使用して表示されるようになりました。

00:06:00.000 --> 00:06:05.000
アプリに複数の共有拡張機能がある場合、ユーザーがそれらを区別することは困難です。

00:06:05.000 --> 00:06:10.000
このため、アプリは単一の共有拡張機能に制限する必要があります。

00:06:10.000 --> 00:06:22.000
アプリに以前に複数の共有拡張機能があった場合は、オプションUIを追加して、ユーザーが共有拡張機能を起動するときに必要な機能を選択できるようにすることで、それらを1つに統合できます。

00:06:22.000 --> 00:06:25.000
共有の新機能にご参加いただきありがとうございます。

00:06:25.000 --> 23:59:59.000
詳細については、developer.apple.comをご覧ください。

