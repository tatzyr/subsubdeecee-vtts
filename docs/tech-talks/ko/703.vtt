WEBVTT

00:00:01.000 --> 00:00:05.000
안녕하세요, 제 이름은 마이클 포드이고 CloudKit 팀의 엔지니어입니다.

00:00:05.000 --> 00:00:09.000
오늘 우리는 GDPR과 CloudKit에 대해 이야기할 것입니다.

00:00:09.000 --> 00:00:13.000
GDPR은 일반 데이터 보호 규정을 의미합니다.

00:00:13.000 --> 00:00:19.000
그것은 2018년 5월 25일에 발효된 유럽 연합 규정이다.

00:00:19.000 --> 00:00:27.000
이 규정은 사용자에게 개인 데이터와 회사가 그것을 사용하는 방법에 대한 가시성과 통제권을 제공하는 데 초점을 맞추고 있다.

00:00:27.000 --> 00:00:37.000
Apple에서는 사용자 개인 정보를 소중하게 생각하며, 개발자가 사용자의 개인 정보를 보호하면서 훌륭한 애플리케이션을 구축하는 데 필요한 도구를 갖도록 하고 싶습니다.

00:00:37.000 --> 00:00:48.000
이 강연에서, 우리는 GDPR 또는 기타 규정과 관련된 사용자 요청을 이행하는 데 사용할 수 있는 신규 및 기존 CloudKit API에 대해 논의할 것입니다.

00:00:48.000 --> 00:00:57.000
더 광범위한 개인 정보 보호 토론에 관심이 있다면, WWDC 2018의 "더 나은 개인 정보 보호를 통한 더 나은 앱" 세션을 살펴보세요.

00:00:57.000 --> 00:01:02.000
이제, 당신은 "왜 우리는 CloudKit API에 대해서만 이야기하고 있나요?"라고 물어볼 수 있습니다.

00:01:02.000 --> 00:01:09.000
개발자가 사용할 수 있는 iCloud 동기화 서비스에 대해 이야기해 봅시다. 그러면 곧 그 이유를 알게 될 것입니다.

00:01:09.000 --> 00:01:18.000
개발자로서, iCloud Backup, Key Value Store, iCloud Drive 및 CloudKit을 사용하여 사용자 데이터를 iCloud에 저장할 수 있습니다.

00:01:18.000 --> 00:01:24.000
데이터 격리, 데이터 상호 작용 및 API 가용성에 대해 이야기해 봅시다.

00:01:24.000 --> 00:01:31.000
백업, 키 값 및 iCloud Drive의 경우, 데이터는 항상 단일 사용자를 위해 저장됩니다.

00:01:31.000 --> 00:01:40.000
CloudKit은 개발자에게 사용자 간에 데이터를 공유하거나 모든 사용자가 데이터를 사용할 수 있는 보다 유연한 API를 제공합니다.

00:01:40.000 --> 00:01:47.000
사용자가 iCloud 백업 복원을 시작하면, 저장된 애플리케이션 데이터가 자동으로 복원됩니다.

00:01:47.000 --> 00:01:58.000
Key Value Store와 iCloud Drive에 저장된 애플리케이션 데이터는 사용자가 iCloud 계정에 로그인한 모든 장치 간에 자동으로 동기화됩니다.

00:01:58.000 --> 00:02:04.000
대조적으로, 애플리케이션이 CloudKit에 저장하는 데이터는 자동으로 다른 장치에 미러링되지 않습니다.

00:02:04.000 --> 00:02:12.000
변경 사항 가져오기 API 또는 쿼리 API를 사용하여 CloudKit에 저장된 데이터의 전부 또는 일부에 액세스할 수 있습니다.

00:02:12.000 --> 00:02:17.000
백업, 키 값 및 드라이브 API는 장치에서만 사용할 수 있습니다.

00:02:17.000 --> 00:02:28.000
장치에서 Objective-C 또는 Swift 버전의 CloudKit API를 사용하거나 CloudKit 웹 서비스를 사용하여 브라우저에서 CloudKit 데이터에 액세스할 수 있습니다.

00:02:28.000 --> 00:02:31.000
보시다시피, CloudKit은 독특합니다.

00:02:31.000 --> 00:02:34.000
그것은 더 유연하고 상호 작용할 수 있는 더 많은 방법이 있다.

00:02:34.000 --> 00:02:45.000
iCloud 백업, 키 밸류 스토어 또는 iCloud Drive에 저장된 데이터에 대한 GDPR 요청을 이행할 때, 애플리케이션이 로컬에 저장한 다른 데이터처럼 데이터를 처리할 수 있습니다.

00:02:45.000 --> 00:02:52.000
그러나 CloudKit을 사용하면 GDPR 요청을 완료하기 위해 서버와 상호 작용해야 할 수도 있습니다.

00:02:52.000 --> 00:02:58.000
이제, 우리가 GDPR에 대해 더 이야기하면서, 나는 당신이 내가 변호사가 아니라 엔지니어라는 것을 기억하기를 바랍니다.

00:02:58.000 --> 00:03:03.000
GDPR 준수에 대해 질문이 있는 경우, 변호사와 상담해야 합니다.

00:03:03.000 --> 00:03:08.000
즉, GDPR에 의해 보장된 사용자 권리 중 일부에 들어가 봅시다.

00:03:08.000 --> 00:03:14.000
GDPR은 사용자에게 어떤 데이터가 저장되고 어떻게 사용되고 있는지 알 수 있는 권리를 보장합니다.

00:03:14.000 --> 00:03:18.000
사용자는 그들에 대해 저장된 데이터에 접근할 권리가 있다.

00:03:18.000 --> 00:03:20.000
그들은 데이터를 수출할 권리가 있다.

00:03:20.000 --> 00:03:25.000
사용자는 데이터 처리를 일시 중지하도록 요청할 수 있습니다.

00:03:25.000 --> 00:03:27.000
그들은 그들의 데이터를 삭제하도록 요청할 수 있다.

00:03:27.000 --> 00:03:31.000
이것은 일반적으로 잊혀질 권리로 알려져 있다.

00:03:31.000 --> 00:03:36.000
사용자에 대한 데이터가 올바르지 않은 경우, 사용자는 이를 업데이트할 수 있어야 합니다.

00:03:36.000 --> 00:03:39.000
사용자는 또한 그들의 데이터가 어떻게 사용되는지에 반대할 수 있다.

00:03:39.000 --> 00:03:46.000
그 예로는 직접 마케팅에 반대하거나 과학 연구를 위해 사용자의 데이터를 처리하는 것에 반대하는 것이 있다.

00:03:46.000 --> 00:03:55.000
마지막으로, 자동화된 의사 결정이 사용자에게 법적으로 또는 실질적으로 영향을 미칠 수 있다면 사용자는 인간의 개입에 접근할 수 있어야 한다.

00:03:55.000 --> 00:03:57.000
자, 그건 꽤 많은 목록이야.

00:03:57.000 --> 00:04:03.000
오늘, 우리는 CloudKit을 사용하는 개발자에게 광범위하게 적용되는 권리에 초점을 맞출 것입니다.

00:04:03.000 --> 00:04:07.000
이것은 GDPR 준수에 대한 포괄적인 이야기가 아닐 것이다.

00:04:07.000 --> 00:04:17.000
대신, 우리는 GDPR 또는 기타 규정과 관련된 사용자 요청을 이행하기 위해 신규 및 기존 CloudKit API를 사용하는 방법에 초점을 맞출 것입니다.

00:04:17.000 --> 00:04:21.000
먼저 CloudKit 내부의 몇 가지 개념을 검토해 봅시다.

00:04:21.000 --> 00:04:23.000
최고 수준에는 CloudKit 컨테이너가 있다.

00:04:23.000 --> 00:04:28.000
여러 애플리케이션이 동일한 CloudKit 컨테이너와 상호 작용하도록 할 수 있습니다.

00:04:28.000 --> 00:04:33.000
CloudKit 컨테이너 내부에는 세 가지 유형의 데이터베이스가 있습니다.

00:04:33.000 --> 00:04:38.000
개인 데이터베이스, 공유 데이터베이스 및 공개 데이터베이스.

00:04:38.000 --> 00:04:40.000
컨테이너당 하나의 공개 데이터베이스가 있다.

00:04:40.000 --> 00:04:46.000
기본적으로, 모든 사용자는 공용 데이터베이스에서 데이터를 읽고 쓸 수 있습니다.

00:04:46.000 --> 00:04:50.000
모든 사용자는 컨테이너에 자신만의 개인 및 공유 데이터베이스를 가지고 있다.

00:04:50.000 --> 00:04:54.000
개인 데이터베이스의 데이터는 그 사용자의 것이다.

00:04:54.000 --> 00:05:03.000
애플리케이션이 공유를 지원하는 경우, 사용자가 공유 초대를 수락하면 데이터가 공유 데이터베이스에 표시됩니다.

00:05:03.000 --> 00:05:09.000
이것은 실제 데이터가 있는 소유자의 개인 데이터베이스에 대한 참조입니다.

00:05:09.000 --> 00:05:12.000
주어진 데이터베이스 내에서, 당신은 여러 영역을 가질 수 있습니다.

00:05:12.000 --> 00:05:18.000
개인 데이터베이스와 공용 데이터베이스에는 항상 기본 영역이 있다.

00:05:18.000 --> 00:05:22.000
그리고 개인 데이터베이스에서 여러 사용자 지정 영역을 만들 수 있습니다.

00:05:22.000 --> 00:05:27.000
공유 데이터베이스에서, 공유 초대를 수락할 때 영역이 표시됩니다.

00:05:27.000 --> 00:05:30.000
구역 안에는 기록이 있다.

00:05:30.000 --> 00:05:33.000
여기가 당신이 실제 데이터를 저장하는 곳입니다.

00:05:33.000 --> 00:05:38.000
CloudKit의 개념적 계층 구조를 요약하려면, 먼저 컨테이너가 있습니다.

00:05:38.000 --> 00:05:41.000
그렇다면, 세 가지 유형의 데이터베이스가 있다.

00:05:41.000 --> 00:05:46.000
데이터베이스에서는 데이터베이스 유형에 따라 하나 이상의 영역을 가질 수 있습니다.

00:05:46.000 --> 00:05:50.000
마지막으로, 기록은 데이터가 저장되는 곳이다.

00:05:50.000 --> 00:05:57.000
이제 핵심 CloudKit 개념을 검토했으므로, 개별 GDPR 권리에 집중할 준비가 되었습니다.

00:05:57.000 --> 00:06:00.000
우리는 접근성과 휴대성을 함께 살펴볼 것이다.

00:06:00.000 --> 00:06:04.000
이러한 권리를 이행하려면, CloudKit에서 데이터를 가져와야 합니다.

00:06:04.000 --> 00:06:08.000
삭제하려면, CloudKit에서 데이터를 삭제해야 합니다.

00:06:08.000 --> 00:06:15.000
그리고 제한을 위해, 당신은 CloudKit contianer의 계정에 제한을 적용할 것입니다.

00:06:15.000 --> 00:06:23.000
액세스 및 이식성 요청의 경우, 사용자를 위해 CloudKit 내부에 저장된 데이터에 대한 가시성을 제공해야 합니다.

00:06:23.000 --> 00:06:27.000
또한 사용자의 데이터를 표준 형식으로 내보낼 수 있는 방법을 제공해야 합니다.

00:06:27.000 --> 00:06:32.000
이미지를 내보내는 경우, JPEG 파일 형식을 사용하는 것이 합리적입니다.

00:06:32.000 --> 00:06:39.000
일반적인 구조화된 데이터의 경우, 데이터의 유형과 양에 따라 JSON 또는 CSV를 사용하세요.

00:06:39.000 --> 00:06:40.000
당신은 방금 데이터를 내보냈습니다.

00:06:40.000 --> 00:06:47.000
데이터를 가져올 필요는 없지만, 그렇게 하면 일부 사용자를 얻을 수 있습니다.

00:06:47.000 --> 00:06:56.000
이미 모든 데이터를 로컬로 동기화한 경우, 로컬에 저장한 데이터에서 GDPR 액세스 또는 이식성 요청을 이행할 수 있습니다.

00:06:56.000 --> 00:07:01.000
그렇지 않은 경우, CloudKit 서버에서 데이터를 가져와야 합니다.

00:07:01.000 --> 00:07:05.000
그렇다면 CloudKit에서 모든 데이터를 어떻게 가져오나요?

00:07:05.000 --> 00:07:14.000
CloudKit 계층 구조 내에서, 모든 컨테이너, 모든 데이터베이스에 대해, 모든 영역을 가져온 다음 모든 레코드를 쿼리해야 합니다.

00:07:14.000 --> 00:07:18.000
당신이 그것을 어떻게 할 것인지에 대한 몇 가지 코드를 검토해 봅시다.

00:07:18.000 --> 00:07:22.000
먼저, 컨테이너와 데이터베이스 변수를 설정해 봅시다.

00:07:22.000 --> 00:07:27.000
이 경우, 우리는 개인 데이터베이스에 집중할 것이다.

00:07:27.000 --> 00:07:31.000
다음으로, 우리는 데이터베이스 내부의 모든 영역을 가져올 것이다.

00:07:31.000 --> 00:07:36.000
우리는 그 모든 영역을 반복하고 쿼리를 설정할 것이다.

00:07:36.000 --> 00:07:42.000
이 쿼리는 단일 레코드 유형에만 해당되므로 여러 쿼리를 실행해야 할 수도 있습니다.

00:07:42.000 --> 00:07:48.000
가지고 있는 모든 레코드 유형을 반복하거나 개별적으로 열거할 수 있습니다.

00:07:48.000 --> 00:07:55.000
우리는 주어진 레코드 유형의 모든 레코드를 얻을 수 있도록 항상 참인 쿼리에 NSPredicate를 전달할 것입니다.

00:07:55.000 --> 00:07:59.000
그러면 우리는 실제로 데이터베이스에서 쿼리를 수행할 것이다.

00:07:59.000 --> 00:08:06.000
마지막으로, 쿼리가 반환되면, 레코드를 표시하거나 내보내기를 위해 저장해야 합니다.

00:08:06.000 --> 00:08:10.000
방금 개인 데이터베이스의 모든 레코드를 쿼리할 수 있는 코드를 보여줬어.

00:08:10.000 --> 00:08:15.000
공유 데이터베이스와 공용 데이터베이스는 더 복잡하다.

00:08:15.000 --> 00:08:21.000
참가자의 경우, 공유 데이터베이스는 소유자의 개인 데이터베이스에 대한 부분적인 뷰이다.

00:08:21.000 --> 00:08:29.000
데이터는 소유자의 소유이므로, 참가자와 관련된 경우에만 데이터를 반환해야 합니다.

00:08:29.000 --> 00:08:32.000
공공 데이터베이스도 마찬가지입니다.

00:08:32.000 --> 00:08:36.000
기본적으로, 모든 사용자는 공용 데이터베이스에 데이터를 읽거나 쓸 수 있습니다.

00:08:36.000 --> 00:08:43.000
다시 말하지만, GDPR 요청을 하는 사용자와 관련된 데이터만 반환해야 합니다.

00:08:43.000 --> 00:08:45.000
삭제는 영원하다.

00:08:45.000 --> 00:08:49.000
당신은 사용자가 정말로 그들의 데이터를 대량으로 삭제하기를 원하는지 확인해야 합니다.

00:08:49.000 --> 00:08:53.000
대안으로 제한을 제공하고 싶을 수도 있습니다.

00:08:53.000 --> 00:09:00.000
사용자가 데이터를 삭제하고 싶다고 확인하면, CloudKit에서 모든 사용자 데이터를 삭제해야 합니다.

00:09:00.000 --> 00:09:03.000
지금 그것에 대한 코드를 살펴봅시다.

00:09:03.000 --> 00:09:07.000
다시 한번, 우리는 컨테이너와 데이터베이스 변수를 설정할 것이다.

00:09:07.000 --> 00:09:10.000
우리는 개인 데이터베이스에 집중할 것이다.

00:09:10.000 --> 00:09:14.000
다시 말하지만, 우리는 데이터베이스 내부의 모든 영역을 가져올 것이다.

00:09:14.000 --> 00:09:22.000
이제, 우리는 개별 구역에서 zoneID를 가져와서 삭제 작업을 만드는 데 사용할 것입니다.

00:09:22.000 --> 00:09:28.000
이 삭제 작업은 삭제하려는 레코드 zoneID를 전달합니다.

00:09:28.000 --> 00:09:33.000
마지막으로, 우리는 데이터베이스에 대한 삭제 작업을 수행합니다.

00:09:33.000 --> 00:09:37.000
우리는 방금 개인 데이터베이스 내부의 모든 영역을 삭제하는 코드를 보았다.

00:09:37.000 --> 00:09:45.000
다시 한 번 말하지만, 애플리케이션이 공유를 지원한다면, 선택적으로 하되, 이번에는 삭제한 것을 선택적으로 하십시오.

00:09:45.000 --> 00:09:51.000
공유 데이터베이스에서 레코드를 삭제하면 소유자와 공유의 다른 모든 참가자를 위해 삭제됩니다.

00:09:51.000 --> 00:09:58.000
이런 식으로 삭제해야 하는 데이터가 있다면, 영역을 삭제하기 전에 기록 삭제를 수행하십시오.

00:09:58.000 --> 00:10:03.000
완료되면, 사용자의 공유 데이터베이스의 모든 영역을 삭제하세요.

00:10:03.000 --> 00:10:11.000
개별 기록을 삭제하는 것과는 달리, 이것은 소유자나 공유의 다른 참가자의 데이터를 삭제하지 않습니다.

00:10:11.000 --> 00:10:21.000
사실, 공유 데이터베이스의 영역 삭제는 사용자가 공유의 참가자에서 초대된 상태로 바뀝니다.

00:10:21.000 --> 00:10:25.000
이것은 그들이 더 이상 공유 데이터베이스의 영역을 볼 수 없다는 것을 의미한다.

00:10:25.000 --> 00:10:36.000
마지막으로, 공개 데이터베이스에서 주어진 사용자와 관련하여 저장하고 있는 데이터를 검토하고 어떤 데이터가 삭제하기에 적합한지 결정해야 합니다.

00:10:36.000 --> 00:10:38.000
마지막으로, 제한에 대해 이야기해 봅시다.

00:10:38.000 --> 00:10:43.000
사실상, 이것은 사용자의 데이터에 대한 처리를 일시 중지하거나 일시 중지 해제하는 방법이다.

00:10:43.000 --> 00:10:49.000
GDPR에 따라, 사용자가 다른 권리를 호출할 때 처리를 일시 중지해야 할 수도 있습니다.

00:10:49.000 --> 00:10:56.000
또는 경우에 따라, 사용자는 데이터를 삭제하는 대신 제한하도록 요청할 수 있습니다.

00:10:56.000 --> 00:11:01.000
우리는 당신이 계정을 제한하거나 제한 해제하는 데 사용할 수 있는 두 개의 새로운 웹 서비스 API를 노출했습니다.

00:11:01.000 --> 00:11:08.000
적절한 자격 증명이 있다면 모든 버전의 iOS에서 이러한 웹 서비스 API를 호출할 수 있습니다.

00:11:08.000 --> 00:11:13.000
이제 사용자를 제한하기 위해 코드를 통해 이야기해 봅시다.

00:11:13.000 --> 00:11:17.000
먼저, CloudKit 대시보드에서 API 토큰을 생성해야 합니다.

00:11:17.000 --> 00:11:23.000
API 토큰이 있으면, fetchAuthorization 작업을 만들 수 있습니다.

00:11:23.000 --> 00:11:28.000
fetchAuthorization API는 iOS 9.2에서 처음 출시되었다.

00:11:28.000 --> 00:11:35.000
apiToken과 webToken을 모두 사용하면 웹 서비스가 통화를 제한하는 데 필요한 모든 것을 갖추고 있습니다.

00:11:35.000 --> 00:11:41.000
우리는 그것을 제한 도우미 기능으로 포장했고, 지금 그것을 살펴볼 것이다.

00:11:41.000 --> 00:11:45.000
먼저, 웹토큰을 URL로 인코딩해야 합니다.

00:11:45.000 --> 00:11:52.000
baseURL, apiPath 및 쿼리 매개 변수를 결합하여 전체 웹 서비스 URL을 만드세요.

00:11:52.000 --> 00:11:59.000
그렇게 하면, 실제로 요청을 HTTP 게시물로 CloudKit 서버로 보내야 합니다.

00:11:59.000 --> 00:12:04.000
우리는 지금 그 코드를 검토하지 않을 것이지만, 당신은 우리의 링크된 문서에서 그것을 찾을 수 있습니다.

00:12:04.000 --> 00:12:11.000
사용자를 제한하면, 해당 컨테이너에 대한 모든 작업은 managedAccountRestricted 오류가 발생합니다.

00:12:11.000 --> 00:12:16.000
사용자가 Apple을 통해 iCloud 계정을 제한한 경우 이 오류도 표시됩니다.

00:12:16.000 --> 00:12:26.000
Apple은 사용자의 데이터 처리를 중단하고 CloudKit 요청에 대해 이 오류를 반환할 것이므로, 코드에서 이 오류를 처리해야 합니다.

00:12:26.000 --> 00:12:33.000
액세스 및 이식성을 검토하려면 사용자의 개인 데이터베이스 내부의 모든 데이터를 반환하십시오.

00:12:33.000 --> 00:12:40.000
공유 데이터베이스와 공용 데이터베이스의 경우, 사용자에게 반환할 데이터를 결정할 때 식별해야 합니다.

00:12:40.000 --> 00:12:47.000
사용자 삭제 요청에 응답하려면, 사용자의 개인 데이터베이스 내의 모든 데이터를 삭제할 수 있습니다.

00:12:47.000 --> 00:12:52.000
사용자를 참가자로 제거하는 공유 영역을 삭제할 수도 있습니다.

00:12:52.000 --> 00:12:57.000
공용 데이터베이스의 경우, 어떤 데이터를 삭제할지 결정할 때 분별력을 하십시오.

00:12:57.000 --> 00:13:03.000
마지막으로, 우리는 계정을 제한하거나 제한 해제하기 위해 새로운 웹 서비스 API를 도입했습니다.

00:13:03.000 --> 00:13:14.000
사용자를 제한하거나 사용자가 Apple이 iCloud 계정에서 처리를 제한하도록 요청한 경우 managedAccountRestricted 오류가 표시됩니다.

00:13:14.000 --> 00:13:19.000
이러한 도구를 사용하면 앱에 훌륭한 개인 정보를 구축할 수 있다는 것을 알고 있습니다.

00:13:19.000 --> 23:59:59.000
자세한 내용은 developer.apple.com을 방문하십시오. 질문이나 피드백이 있으면 언제든지 cloudkit@apple.com으로 이메일을 보내주십시오.

