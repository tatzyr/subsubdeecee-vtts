WEBVTT

00:00:01.000 --> 00:00:09.000
앱 개발자로서, 앱이 디스크에 무엇을 저장하고 있는지, 모든 것이 어디에 저장되고 있는지, 왜 필요한지 정확히 아는 것이 중요합니다.

00:00:09.000 --> 00:00:17.000
이러한 세부 사항을 파악하는 가장 좋은 방법은 앱이 실제로 저장하는 것의 목록을 작성하는 것입니다.

00:00:17.000 --> 00:00:25.000
시작하려면, 장치에서 앱을 빌드하고 실행한 다음, 디스크에 저장할 모든 기능을 실행하세요.

00:00:25.000 --> 00:00:30.000
일단 당신이 이것을 하고 나면, 실제로 무엇이 저장되었고, 어디에 저장되어 있는지 살펴볼 시간입니다.

00:00:30.000 --> 00:00:38.000
Xcode의 장치 및 시뮬레이터 창을 사용하여 앱의 컨테이너를 추출하여 그 안에 무엇이 있는지 볼 수 있습니다.

00:00:38.000 --> 00:00:45.000
왼쪽 열에서 장치를 선택한 다음, 설치된 앱 목록에서 앱을 선택하세요.

00:00:45.000 --> 00:00:53.000
그리고 기어 아이콘을 사용하여, 컨테이너 다운로드를 선택하고, Mac에 저장하세요.

00:00:53.000 --> 00:00:59.000
파인더에서 다운로드한 xcappdata 파일을 Control-클릭하세요.

00:00:59.000 --> 00:01:06.000
패키지 내용 보기를 선택하고, 앱 데이터 폴더로 이동하여 재고 조사를 시작하세요.

00:01:06.000 --> 00:01:12.000
디렉토리를 통해 각각에 무엇이 저장되어 있는지 보세요.

00:01:12.000 --> 00:01:17.000
각 파일에 대해, 그것이 무엇인지, 그리고 왜 저장되고 있는지 식별할 수 있는지 확인하세요.

00:01:17.000 --> 00:01:22.000
왜 거기에 무언가가 있는지 확실하지 않다면, 당신은 그것을 없앨 수 있을 것입니다.

00:01:22.000 --> 00:01:31.000
적절한 디렉토리에 올바른 파일을 넣고 있는지 확인하고, 파일이 iTunes 및 iCloud 백업에 포함되어야 하는지 여부를 고려해야 합니다.

00:01:31.000 --> 00:01:37.000
앱의 기능과 관련이 있기 때문에, 당신만이 처음 두 질문에 답할 수 있습니다.

00:01:37.000 --> 00:01:42.000
나는 마지막 두 가지 질문에 집중하고 파일을 저장해야 하는 곳부터 시작할 것이다.

00:01:42.000 --> 00:01:49.000
iCloud Drive는 사용자의 모든 장치에서 사용할 수 있기 때문에 문서를 보관하기에 가장 좋은 장소입니다.

00:01:49.000 --> 00:02:00.000
iCloud Drive에 있는 앱 폴더의 내용을 볼 수 있기 때문에, 사람들이 직접 인식하고 액세스할 수 있는 문서만 넣는 것이 중요합니다.

00:02:00.000 --> 00:02:09.000
앱은 로컬에서 콘텐츠를 읽고 기록한 다음, 네트워크를 사용할 수 있을 때 운영 체제가 자동으로 해당 파일을 업로드합니다.

00:02:09.000 --> 00:02:18.000
여러 장치가 동시에 iCloud Drive의 파일에 액세스할 수 있으므로 충돌을 피하기 위해 파일 조정을 사용해야 합니다.

00:02:18.000 --> 00:02:22.000
그러니 자세한 내용은 문서를 꼭 읽어보세요.

00:02:22.000 --> 00:02:28.000
로컬로 저장된 파일의 경우, 앱의 컨테이너에서 문서 디렉토리를 사용할 수 있습니다.

00:02:28.000 --> 00:02:33.000
iCloud Drive와 마찬가지로, 사용자가 볼 수 있는 문서만 여기에 저장해야 합니다.

00:02:33.000 --> 00:02:44.000
문서 디렉토리에 노출되어야 하는 파일만 포함되어 있음을 확인한 후, 파일 앱은 내 iPhone 또는 내 iPad 위치에 표시할 수 있습니다.

00:02:44.000 --> 00:02:54.000
이렇게 하려면, 앱은 Open in Place를 지원하고 파일 공유가 활성화되어 있음을 나타내야 하며, 둘 다 Info.plist 파일에 구성되어 있습니다.

00:02:54.000 --> 00:03:04.000
파일 앱에서 파일을 보는 것 외에도, 사람들은 스포트라이트와 iPad에서 파일을 찾아 다른 앱으로 끌어다 놓을 수 있습니다.

00:03:04.000 --> 00:03:14.000
문서 디렉토리를 노출하는 또 다른 큰 이점은 사람들이 스토리지 설정 UI에서 파일을 보고 개별적으로 항목을 제거할 수 있다는 것입니다.

00:03:14.000 --> 00:03:22.000
이를 통해 디스크 공간을 훨씬 쉽게 관리할 수 있으며, 공간이 부족할 때 전체 앱이 삭제될 가능성을 줄일 수 있습니다.

00:03:22.000 --> 00:03:29.000
하지만 기억하세요, 문서 디렉토리에 들어가야 하는 유일한 것은 앱을 사용하는 사람들에게 의미가 있는 파일입니다.

00:03:29.000 --> 00:03:35.000
당신이 물어봐야 할 중요한 질문은 "내 사용자들이 이 파일을 볼 수 있어야 하나요?"입니다.

00:03:35.000 --> 00:03:38.000
대답이 '예'라면, 괜찮습니다.

00:03:38.000 --> 00:03:45.000
하지만 대답이 아니오라면, 문서 디렉토리에서 다음 위치 중 하나로 옮기세요.

00:03:45.000 --> 00:03:54.000
응용 프로그램 지원 디렉토리는 문서 디렉토리에 있을 수 있지만 사용자가 볼 수 없는 파일을 저장하기에 좋은 장소입니다.

00:03:54.000 --> 00:04:00.000
예를 들어, 앱이 필요하지만 사용자가 수동으로 열지 않는 데이터베이스.

00:04:00.000 --> 00:04:06.000
최상위 수준에 파일을 저장하거나, 정리하는 데 도움이 된다면 디렉토리를 만들 수 있습니다.

00:04:06.000 --> 00:04:10.000
그 디렉토리는 완전히 당신의 통제 하에 있으며, 지속적입니다.

00:04:10.000 --> 00:04:18.000
내용은 기본적으로 백업에 포함되어 있지만, 백업할 필요가 없는 경우 파일을 선택 해제할 수 있습니다.

00:04:18.000 --> 00:04:28.000
그리고 마지막으로, 애플리케이션 지원 디렉토리에 사용된 디스크 공간은 앱의 문서 및 데이터 합계 아래의 스토리지 설정 UI에 보고됩니다.

00:04:28.000 --> 00:04:32.000
앱에서 사용할 수 있는 다음 위치는 캐시 디렉토리입니다.

00:04:32.000 --> 00:04:36.000
공간이 부족하면 폐기할 수 있는 파일을 여기에 저장할 수 있습니다.

00:04:36.000 --> 00:04:41.000
이것은 필요할 때 다시 다운로드할 수 있는 모든 콘텐츠에 좋은 위치입니다.

00:04:41.000 --> 00:04:45.000
캐시 디렉토리의 내용은 백업에 포함되지 않습니다.

00:04:45.000 --> 00:04:51.000
장치의 디스크 공간이 부족할 때, iOS는 캐시를 지워서 도움을 줄 수 있다.

00:04:51.000 --> 00:05:01.000
앱이 실행 중인 경우 파일은 캐시 디렉토리에서 제거되지 않으며, 운영 체제는 한동안 사용되지 않은 앱의 캐시를 지우는 것으로 시작합니다.

00:05:01.000 --> 00:05:08.000
보너스로, 캐시 디렉토리의 파일은 앱의 문서 및 데이터 합계의 일부로 보고되지 않습니다.

00:05:08.000 --> 00:05:13.000
비록 그것들은 앱이 차지하는 전체 공간에 포함되어 있지만.

00:05:13.000 --> 00:05:20.000
그리고 마지막으로, 오랜 기간 동안 필요하지 않은 파일을 임시 디렉토리에 넣을 수 있습니다.

00:05:20.000 --> 00:05:29.000
앱이 실행되지 않을 때 운영 체제가 주기적으로 이러한 파일을 제거하지만, 완료되면 제거하는 것이 가장 좋습니다.

00:05:29.000 --> 00:05:37.000
캐시 디렉토리와 마찬가지로, 임시 디렉토리는 백업되지 않으며 앱의 문서 및 데이터 합계에 보고되지 않습니다.

00:05:37.000 --> 00:05:41.000
이것들은 당신의 앱이 파일을 저장할 수 있는 모든 일반적인 위치입니다.

00:05:41.000 --> 00:05:53.000
파일 앱에서 액세스할 수 있어야 하는 파일에 대해 iCloud 드라이브와 문서 디렉토리를 사용하는 반면, 응용 프로그램 지원, 캐시 및 임시 디렉토리는 모두 앱에서 비공개로 사용할 수 있습니다.

00:05:53.000 --> 00:05:57.000
물건을 어디에 보관하고 있는지 검토하고 올바른 디렉토리를 사용하세요.

00:05:57.000 --> 00:06:01.000
마지막으로, 몇 가지 모범 사례 팁.

00:06:01.000 --> 00:06:12.000
iTunes 또는 iCloud 백업에 포함할 필요가 없는 파일이 있는 경우, NSFileManager API를 사용하여 "IsExcludedFromBackupKey"를 설정하십시오.

00:06:12.000 --> 00:06:18.000
당신은 또한 이전 버전의 앱에서 복원될 수 있는 파일에 탄력적이길 원합니다.

00:06:18.000 --> 00:06:32.000
예를 들어, 32비트 버전의 앱이 있고 파일이 백업된 경우, 64비트 버전의 앱의 경우 이전 파일이 복원될 수 있으며 해당 상황을 처리할 수 있어야 합니다.

00:06:32.000 --> 00:06:40.000
여러 버전의 앱에서 강력한 호환성을 제공할 수 있도록 파일에 버전 관리를 사용하는 것이 가장 좋습니다.

00:06:40.000 --> 00:06:44.000
그리고 파일을 한 위치에만 저장하고 있는지 확인하세요.

00:06:44.000 --> 00:06:51.000
예를 들어, 파일을 로컬 문서 디렉토리에 넣는 경우, iCloud Drive에서 파일을 복제하지 마세요.

00:06:51.000 --> 00:06:53.000
한 곳을 선택하고 그것을 고수하세요.

00:06:53.000 --> 00:07:05.000
사용자 문서의 경우, 장치에 로컬로만 파일을 저장할 특별한 이유가 없는 한 클라우드 저장 위치를 선호하는 것이 좋습니다.

00:07:05.000 --> 00:07:16.000
그리고 마지막으로, 앱이 더 많은 디스크 공간을 차지하기에 좋은 시기인지 알 수 있도록 iOS 11에서 몇 가지 새로운 볼륨 용량 세부 사항을 사용할 수 있습니다.

00:07:16.000 --> 00:07:28.000
첫 번째 키인 중요한 사용을 위한 사용 가능한 용량은 사용자가 앱의 UI에서 명시적으로 요청한 것에 사용할 수 있는 공간의 양을 나타냅니다.

00:07:28.000 --> 00:07:34.000
예를 들어, 그들이 게임에서 비디오나 새로운 레벨을 다운로드하기로 선택한 경우.

00:07:34.000 --> 00:07:41.000
필요한 공간이 사용 가능한 공간보다 크다면, 그들의 요청이 충족될 수 없다는 것을 그들에게 알려야 합니다.

00:07:41.000 --> 00:07:53.000
두 번째 키인 기회주의적 사용을 위한 사용 가능한 용량은 사용자가 원할 가능성이 있지만 명시적으로 요청하지 않은 것에 사용할 수 있는 공간의 양을 나타냅니다.

00:07:53.000 --> 00:08:02.000
이것은 그들이 보고 있는 일련의 비디오의 다음 에피소드와 같은 것일 수도 있고, 그들이 열 가능성이 있는 서버에서 최근에 업데이트된 문서일 수도 있다.

00:08:02.000 --> 00:08:15.000
이러한 유형의 파일의 경우, 실제로 사용될 때까지 캐시 디렉토리에 저장할 수 있으며, 이 시점에서 응용 프로그램 지원 또는 문서 디렉토리로 이동할 수 있습니다.

00:08:15.000 --> 00:08:24.000
인벤토리를 확보하고 앱에 저장된 것을 식별한 후, 올바른 위치에 없는 것을 발견했다면, 코드를 업데이트하여 적절한 디렉토리에 넣으세요.

00:08:24.000 --> 00:08:30.000
그리고 한 곳에서 다른 곳으로 파일을 옮기는 데 필요한 마이그레이션 코드를 추가하는 것을 잊지 마세요.

00:08:30.000 --> 00:08:35.000
이렇게 하지 않으면, 실수로 버려진 파일을 남길 수 있습니다.

00:08:35.000 --> 00:08:43.000
디스크 저장소를 정리하면 파일 앱의 사람들에게 문서 디렉토리를 열 수 있으며 앱으로 생산성을 높일 수 있습니다.

00:08:43.000 --> 00:08:48.000
Developer.apple.com 또는 개발자 포럼에서 더 많은 정보를 찾을 수 있습니다.

00:08:48.000 --> 23:59:59.000
봐줘서 고마워!

