WEBVTT

00:00:00.000 --> 00:00:10.000
♪ ♪

00:00:10.000 --> 00:00:11.000
スラジ：こんにちは。

00:00:11.000 --> 00:00:19.000
このセッションでは、AirPodsでアプリのオーディオ体験を向上させる方法を探ります。

00:00:19.000 --> 00:00:27.000
iOS 17とmacOS 14で発表したAirPodsの機能のいくつかを紹介します。

00:00:27.000 --> 00:00:29.000
私の名前はスラージです。

00:00:29.000 --> 00:00:35.000
私はここアップルのヘッドフォンとアクセサリーのソフトウェアエンジニアリングチームの一員です。

00:00:35.000 --> 00:00:39.000
始めましょう。

00:00:39.000 --> 00:00:49.000
世界中の人々がAirPodsを愛しています。なぜなら、彼らは一日を通して最高のパーソナルオーディオ体験を提供するからです。

00:00:49.000 --> 00:01:03.000
毎日、何百万人もの人々がAirPodsを使って音楽を聴いたり、映画を見たり、家族や友人とFaceTimeをしたり、仕事の電話をしたり、仕事を終わらせるために落ち着いたりしています。

00:01:03.000 --> 00:01:11.000
そして、彼らはApple WatchからMacまで、Appleのエコシステム全体でAirPodsを使用しています。

00:01:11.000 --> 00:01:26.000
iOS 17とmacOS 14では、プラットフォーム間で毎日AirPodsをさらに簡単かつ便利に使用できるいくつかの素晴らしい機能を導入しています。

00:01:26.000 --> 00:01:33.000
これらの機能がAirPodsの最も一般的なユースケースの1つをどのように変えるかを見てみましょう。

00:01:33.000 --> 00:01:44.000
iPhoneでパーソナライズされた空間オーディオでAirPodsの音楽を楽しんでおり、仕事の会議に参加するための通知を受け取ります。

00:01:44.000 --> 00:01:58.000
通話に参加するためにMacのロックを解除すると、AirPods Connectedバナーに迎えられ、AirPodsの準備が整い、Macに接続されていることを知らせます。

00:01:58.000 --> 00:02:13.000
次に、会議に参加すると、期待どおりにAirPodsを介してMacからオーディオが再生され、iPhoneで聴いていた音楽が一時停止します。

00:02:13.000 --> 00:02:26.000
仕事の電話の途中で、オフィスの誰かが話しに来るか、リモートワークで、誰かが配達のために自宅であなたのドアベルを鳴らします。

00:02:26.000 --> 00:02:44.000
これで、AirPodsステムを押して通話中にミュートすることができます。そうすると、フレンドリーなマイクステータスバナーとオーディオチャイムも通知されます。

00:02:44.000 --> 00:02:54.000
その後、予想通り、AirPodsのステムをもう一度押してミュートを解除し、会議を続けることができます。

00:02:54.000 --> 00:03:01.000
そしてもちろん、あなたはバナーを見て、ミュート解除のチャイムを聞くでしょう。

00:03:01.000 --> 00:03:08.000
最後に、仕事の会議が終わり、くつろぐ時間です。

00:03:08.000 --> 00:03:25.000
iPhoneを手に取り、お気に入りのApple Musicプレイリストで再生を押すと、オーディオがiPhoneからシームレスにAirPodsに切り替わるので、ビートを逃すことなく一日を続けることができます。

00:03:25.000 --> 00:03:40.000
では、あなたのアプリケーションのための魔法のAirPods体験のロックを解除し、AirPodsを持つ人々がプラットフォーム間で簡単にあなたのアプリを使用できるようにしたいですか?

00:03:40.000 --> 00:03:51.000
このセッションでは、これらの機能を活用し、正確にそれを提供するためにアプリを最適化する方法について説明します。

00:03:51.000 --> 00:04:02.000
macOS 14用のAirPodsの自動切り替えと、アプリがそれを最大限に活用するために従うことができるベストプラクティスから始めます。

00:04:02.000 --> 00:04:11.000
次に、iOS 17とmacOS 14で、プレスからミュートとミュート解除のサポートを行います。

00:04:11.000 --> 00:04:20.000
最後に、Spatial AudioとさまざまなAppleプラットフォームでのサポートについて説明します。

00:04:20.000 --> 00:04:26.000
macOS用のAirPodsの自動切り替えから始めましょう。

00:04:26.000 --> 00:04:35.000
macOS 14は、ユーザーの意図したアクティビティに基づいて、デバイス間でAirPodsの自動切り替えをサポートしています。

00:04:35.000 --> 00:04:45.000
自動切り替えアルゴリズムは、「再生中」登録や入力オーディオアクティビティなどのインジケーターを使用して、これらの決定を行います。

00:04:45.000 --> 00:05:00.000
良いニュースは、すべてのApp Storeアプリだけでなく、Appサンドボックスを使用するか、サンドボックスを持っていないことを選択したApp Store外のアプリは、それを採用するために何もする必要はありません。

00:05:00.000 --> 00:05:08.000
彼らは、開発者からの変更を必要とせずに、この機能に完全に参加することができます。

00:05:08.000 --> 00:05:17.000
それでは、これらの機能を持つ人々のための最適なAirPods体験のためのベストプラクティスについて話しましょう。

00:05:17.000 --> 00:05:32.000
macOSで「Now Playing」に登録すると、自動ルーティングアルゴリズムは、たとえば、長い形式のオーディオが再生されているときに知ることができ、正しいルーティングの決定を下すことができます。

00:05:32.000 --> 00:05:43.000
アプリがメディアまたはストリーミングアプリの場合は、それに応じてオーディオに優先順位を付けるために、Now Playingに登録することをお勧めします。

00:05:43.000 --> 00:05:51.000
会議やゲームアプリの場合は、Now Playingに登録することはお勧めしません。

00:05:51.000 --> 00:05:59.000
また、オーディオサービスAPIを使用して、通知やアプリ固有のチャイムを再生することをお勧めします。

00:05:59.000 --> 00:06:07.000
これは、通知をメディアコンテンツと区別し、予期しない動作を避けるのに役立ちます。

00:06:07.000 --> 00:06:21.000
会議アプリの場合は、会議または音声セッションの開始時にのみ入力マイクを使用し、ライブ会議または音声セッションの期間中のみ開いたままにしておくことをお勧めします。

00:06:21.000 --> 00:06:28.000
メディアアプリの場合、ユーザーが選択したデフォルトのルートを使用してオーディオを再生することをお勧めします。

00:06:28.000 --> 00:06:33.000
また、ユーザーがオーディオを一時停止した後は、無音を再生しないでください。

00:06:33.000 --> 00:06:38.000
沈黙を再生する必要がある場合は、2秒未満に保つことをお勧めします。

00:06:38.000 --> 00:06:44.000
では、AirPodsで押してミュートとミュート解除について話しましょう。

00:06:44.000 --> 00:06:55.000
iOS 17とmacOS 14では、Press to MuteとUnmuteで通話中のAirPods体験に利便性を加えています。

00:06:55.000 --> 00:07:03.000
AirPodsのステムを押すだけで、通話中にアプリケーションのマイクをミュートまたはミュート解除できるようになりました。

00:07:03.000 --> 00:07:15.000
iOS 17以降、すべてのCallKitアプリは、追加の採用がまったく必要なく、プレス・トゥ・ミュートとミュート解除のサポートを受けるようになります。

00:07:15.000 --> 00:07:23.000
CallKitを使用していない通信アプリについては、まもなく詳しく説明する新しいAPIを導入しました。

00:07:23.000 --> 00:07:32.000
いずれの場合も、iOS 17はアップリンクオーディオをミュートし、トーンを再生することでミュートジェスチャーに応答します...

00:07:32.000 --> 00:07:37.000
そして、それがミュートされたことをアプリケーションに通知します。

00:07:37.000 --> 00:07:46.000
その後、誰かが再び同じジェスチャーをトリガーすると、iOS 17はアップリンクオーディオのミュートを解除し、トーンを再生します...

00:07:46.000 --> 00:07:50.000
そして、ミュートが解除されたことをアプリケーションに通知します。

00:07:50.000 --> 00:07:55.000
この機能は、人々にとって大きな利便性を追加します。

00:07:55.000 --> 00:08:01.000
iOS17でどれだけ早く追加できるかをお見せしましょう。

00:08:01.000 --> 00:08:09.000
AVAudioSessionファミリーの新しい兄弟であるAVAudioApplicationを紹介できることを嬉しく思います。

00:08:09.000 --> 00:08:18.000
AVAudioApplicationは、アプリのアプリケーション全体のオーディオ動作を設定する方法です。

00:08:18.000 --> 00:08:26.000
AVAudioApplicationを使用して、プレスをミュートとミュート解除に組み込むことができる速さをお見せしましょう。

00:08:26.000 --> 00:08:31.000
まず、AVFAudioをインポートする必要があります。

00:08:31.000 --> 00:08:36.000
次に、AVAudioApplicationの共有インスタンスを取得します。

00:08:36.000 --> 00:08:44.000
その後、通知センターでミュートジェスチャー変更通知を登録する必要があります。

00:08:44.000 --> 00:08:50.000
これにより、アプリケーションがプレス・トゥ・ミュートとミュート解除に選択されます。

00:08:50.000 --> 00:08:57.000
これらの通知は、ミュートジェスチャーによってミュート状態が変更されたときに通知します。

00:08:57.000 --> 00:09:09.000
そこから、ユーザー情報のAVAudioApplication入力muteStateKeyを内省して、新しい状態を決定します。

00:09:09.000 --> 00:09:19.000
この通知を受け取った後、この通知が発火した結果、内部状態とUIを更新できます。

00:09:19.000 --> 00:09:30.000
さらに、誰かがアプリケーション内でミュートアクションを実行すると、AVAudioApplicationが更新される必要があります。

00:09:30.000 --> 00:09:37.000
予想通り、私たちはセッターとゲッターの両方を提供します。

00:09:37.000 --> 00:09:47.000
iOS 17のアプリに組み込み、押してミュートとミュートを解除するのは簡単です。Macに移動します。

00:09:47.000 --> 00:09:56.000
macOS 14では、プレス・トゥ・ミュートとミュート解除の動作が少し異なることに注意することが重要です。

00:09:56.000 --> 00:10:02.000
iOSと同様に、ミュート状態が変更されるとアプリに通知されます。

00:10:02.000 --> 00:10:14.000
ただし、macOSでは、ジェスチャーが実行されたときに、アプリケーションはアップリンクオーディオをミュートする責任があります。

00:10:14.000 --> 00:10:21.000
オプトインにはいくつかの追加のAPIが必要ですが、すぐに詳しく説明します。

00:10:21.000 --> 00:10:37.000
最後に、ミュートされたトーカーを検出しようとしているアプリケーションについては、それをサポートする新しいAPIの詳細については、「音声処理APIの新機能」セッションを参照してください。

00:10:37.000 --> 00:10:42.000
Macでどのような採用が必要かを見てみましょう。

00:10:42.000 --> 00:10:52.000
macOS 14では、ミュートジェスチャーの結果としてアップリンクオーディオをミュートするのはアプリケーションの責任であることを忘れないでください。

00:10:52.000 --> 00:11:00.000
AVAudioApplicationの共有インスタンスでは、ミュート状態変更ハンドラを設定する必要があります。

00:11:00.000 --> 00:11:05.000
このハンドラは、誰かがミュートジェスチャーを実行すると呼び出されます。

00:11:05.000 --> 00:11:12.000
ここでは、アップリンクオーディオをミュートし、内部状態を更新します。

00:11:12.000 --> 00:11:22.000
また、ミュートアクションがアプリケーションの現在の使用に適切でない場合は、拒否する機会も提供します。

00:11:22.000 --> 00:11:36.000
ミュート状態が変更されると、入力ミュート状態変更通知が引き続き受信されるため、このハンドラはUIの更新には使用しないことをお勧めします。

00:11:36.000 --> 00:11:48.000
さらに、CoreAudioフレームワーク内に新しいプロパティを提供し、プロセスへの入力オーディオをすばやくミュートできるようにしました。

00:11:48.000 --> 00:12:01.000
このプロパティは、有効にすると、通常どおりIOを実行し続けながら、プロセスへの入力オーディオを無音にします。

00:12:01.000 --> 00:12:05.000
最後に、AirPodsを使った空間オーディオについて話し合いましょう。

00:12:05.000 --> 00:12:18.000
AirPodsの空間オーディオは、世界中の人々が音楽を聴く方法を変え、今日のApple Musicの加入者の80%以上が空間オーディオで聴いています。

00:12:18.000 --> 00:12:33.000
そして、iOS 16の発売により、パーソナライズされた空間オーディオでこれを次のレベルに引き上げました。なぜなら、私たち全員が音を知覚する方法は、頭と耳のサイズと形に基づいてユニークだからです。

00:12:33.000 --> 00:12:39.000
そして、パーソナライゼーションの向上に向けたこの推進は、人々に好評を得ています。

00:12:39.000 --> 00:12:52.000
macOS 14、iOS 17、tvOS 17では、3つのプラットフォームすべての空間オーディオサポートを継続できることをうれしく思います。

00:12:52.000 --> 00:13:01.000
macOSでは、AVPlayerのSpatial AudioとAVSampleBufferAudioRenderer APIをサポートしています。

00:13:01.000 --> 00:13:12.000
iOSとtvOSは、上記のAPIとともに、AURemoteIOのSpatial AudioとAudioQueue APIをサポートしています。

00:13:12.000 --> 00:13:21.000
Spatial Audio for AudioQueueとAURemoteIOにはAPIインターフェイスがないことに注意してください。

00:13:21.000 --> 00:13:29.000
代わりに、Now Playingに登録するアプリに対して自動的に有効になります。

00:13:29.000 --> 00:13:36.000
これにより、コントロールセンターを介して機能を設定するオプションがユーザーに提示されます。

00:13:36.000 --> 00:13:46.000
物事を締めくくるために、人々やアプリがmacOS用のAirPodsの自動切り替えの恩恵を受けることがいかに簡単かを発見しました。

00:13:46.000 --> 00:13:53.000
実際、ほとんどの場合、アップデートに参加するために何もする必要はありません。 

00:13:53.000 --> 00:14:03.000
その後、AirPodsで一貫した自動切り替え体験を持つために、あなたのアプリができることも調べました。

00:14:03.000 --> 00:14:15.000
AVAudioApplication APIと、プレスをミュートとミュート解除のサポートに追加する方法を紹介しました。

00:14:15.000 --> 00:14:25.000
そして、すべてのプラットフォームでグローバルな顧客ベースにAirPods Spatial Audioを提供する方法について話し合いました。

00:14:25.000 --> 00:14:35.000
関連するセッションでは、アプリに空間オーディオのサポートを追加し、再生中に登録する方法を学ぶこともできます。

00:14:35.000 --> 00:14:40.000
私たちのチームがあなたにそれを持って来ることを楽しんだのと同じくらい、あなたがこのセッションを楽しんだことを願っています。

00:14:40.000 --> 00:14:46.000
私たちは、これらの機能をお客様とお客様と共有できることをとても嬉しく思います。

00:14:46.000 --> 00:14:50.000
私たちはあなたのアプリケーションで動作しているすべてを見るのが待ちきれません。

00:14:50.000 --> 23:59:59.000
そして、ありがとう。

