WEBVTT

00:00:00.000 --> 00:00:10.000
♪ ♪

00:00:10.000 --> 00:00:13.000
David: こんにちは、「WalletとApple Payの新機能」へようこそ。

00:00:13.000 --> 00:00:15.000
私の名前はデビッドです。ジョン:そして、私はジョンです。

00:00:15.000 --> 00:00:22.000
David: 今日は、今年WalletとApple Payの体験に導入するすべての新機能と機能強化について説明します。

00:00:22.000 --> 00:00:31.000
ウォレットとApple Payには、幅広い機能と機能、バーコードパス、交通カード、車のキーなどが含まれます。

00:00:31.000 --> 00:00:41.000
これらはすべて私たちのエコシステムの重要な部分ですが、今日の焦点は、支払い、注文追跡、アイデンティティの3つの分野にあります。

00:00:41.000 --> 00:00:44.000
支払いから始めましょう。

00:00:44.000 --> 00:00:51.000
まず、Apple Pay Laterと、プラットフォーム内でマーチャンダイジングサポートを統合する方法について説明します。

00:00:51.000 --> 00:01:01.000
事前承認支払いの強化について説明し、Apple Payでの送金をサポートするためのまったく新しいAPIについて説明します。

00:01:01.000 --> 00:01:10.000
Apple Pay Laterは今年初めに米国の顧客に導入され、ユーザーは購入を4つの別々の支払いに分割することができます。

00:01:10.000 --> 00:01:15.000
ユーザーは、ウォレット内でこれらの購入を便利に追跡および管理できます。

00:01:15.000 --> 00:01:25.000
Apple Pay Laterは統合を必要としませんが、UIに含めるための専用のマーチャンダイジングビューを提供する新しいAPIを導入しています。

00:01:25.000 --> 00:01:32.000
このビューを使用すると、Apple Pay Laterのサポートが表示され、顧客が期待できるエクスペリエンスの詳細が表示されます。

00:01:32.000 --> 00:01:38.000
表示されるコンテキストに合わせて、ビューのスタイルをカスタマイズできます。 ビューのスタイルをより適切にカスタマイズできます。

00:01:38.000 --> 00:01:45.000
ユーザーが詳細を知るためにこのビューを選択すると、Apple Pay Laterがどのように説明されるかを選択できます。

00:01:45.000 --> 00:01:50.000
そして、このビューは、アプリとウェブの両方で開発者が利用できるようになります。

00:01:50.000 --> 00:02:04.000
マーチャンダイジングビューは、コンテキストに応じて4つの異なる表示スタイルでレンダリングできます。標準スタイルは、Apple Pay Laterを使用して購入を複数の返済に分割する方法を簡単に説明します。

00:02:04.000 --> 00:02:09.000
簡潔な方法でサポートを示すバッジスタイル。

00:02:09.000 --> 00:02:14.000
チェックアウトスタイルは、チェックアウトフローで他の支払いオプションと一緒に配置されるように設計されています。

00:02:14.000 --> 00:02:18.000
そして、総購入価格と一緒に使用するための価格スタイル。

00:02:18.000 --> 00:02:23.000
ユーザーがこのビューと対話すると、より多くの情報が表示されます。

00:02:23.000 --> 00:02:28.000
商人として、あなたは2つの異なる行動から選択する能力を持っています。

00:02:28.000 --> 00:02:37.000
「Learn More」アクションは、Apple Pay Laterの概要を示し、ユーザーが支払い方法として選択した場合に経験するエクスペリエンスについて説明します。

00:02:37.000 --> 00:02:46.000
「計算機」アクションは、引き続きApple Pay Laterの説明を提示しますが、返済スケジュールに焦点を当てて、ユーザーは従う必要があります。

00:02:46.000 --> 00:02:50.000
このビューをアプリに組み込むことを見てみましょう。

00:02:50.000 --> 00:02:56.000
まず、ユーザーが後でApple Payを使用する資格があるかどうかを確認する必要があります。

00:02:56.000 --> 00:03:01.000
これを行うには、PKPayLaterUtilities内の検証機能を使用します。

00:03:01.000 --> 00:03:06.000
取引の金額と必要なロケールを提供する必要があります。

00:03:06.000 --> 00:03:16.000
ユーザーが後でApple Payを使用する資格があるかどうかを決定したら、適格性チェックに提供されたのと同じ詳細でPKPayLaterViewをインスタンス化します。

00:03:16.000 --> 00:03:24.000
ビューのスタイルとアクションをカスタマイズしたい場合は、それぞれのプロパティを変更することでカスタマイズできます。

00:03:24.000 --> 00:03:32.000
また、便利なSwiftUIビューも提供しており、SwiftUIアプリ内でApple Pay Laterの受け入れを表現できます。

00:03:32.000 --> 00:03:38.000
それを使用するには、PayLaterViewをインスタンス化し、以前と同じ情報を提供します。

00:03:38.000 --> 00:03:43.000
表示スタイルとアクションをカスタマイズするには、適切なビュー修飾子を使用します。

00:03:43.000 --> 00:03:46.000
そして、それはそれと同じくらい簡単です。

00:03:46.000 --> 00:03:53.000
ウェブ上のマーチャンダイジングビューをサポートしたい場合は、最初に実行する必要があるいくつかのセットアップ手順があります。

00:03:53.000 --> 00:04:02.000
ビューを表示するためのAPIは、既存のApple Pay JavaScript SDK内で提供されていますが、それを含めるときに設定する必要がある新しい属性がいくつかあります。

00:04:02.000 --> 00:04:10.000
クロスオリジンリソース共有リクエストをサポートする必要がある場合は、クロスオリジン属性を設定することが重要です。

00:04:10.000 --> 00:04:18.000
Async属性を使用して、ページの読み込みの進行状況とは無関係にスクリプトが読み込まれ、実行されるようにします。

00:04:18.000 --> 00:04:23.000
そして最後に、APIへのリクエストを認証するにはJWTが必要です。

00:04:23.000 --> 00:04:27.000
このトークンはApple Developerポータルで生成できます。

00:04:27.000 --> 00:04:31.000
JavaScript SDKの使用はこれ以上ないほど簡単です。

00:04:31.000 --> 00:04:35.000
Apple-pay-merchandising要素を使用してビューを表します。

00:04:35.000 --> 00:04:42.000
金額、国コード、通貨コード、ロケールは必須フィールドです。

00:04:42.000 --> 00:04:47.000
ネイティブAPIと同様に、必要に応じてビューの他の側面をカスタマイズすることもできます。

00:04:47.000 --> 00:04:53.000
Apple Pay Laterのマーチャンダイジングビューを組み込む場合のベストプラクティスをいくつか紹介します。

00:04:53.000 --> 00:04:57.000
アプリの場合、このビューを使用するには資格が必要です。

00:04:57.000 --> 00:05:00.000
これはApple Developerポータルで入手できます。

00:05:00.000 --> 00:05:07.000
ウェブサイトの場合は、ドメインを登録し、SDKを含めるときに使用するためにJWTを取得することを忘れないでください。

00:05:07.000 --> 00:05:11.000
これはApple Developerポータルでも行うことができます。

00:05:11.000 --> 00:05:15.000
可能であれば、ヘッド要素内にSDKをインポートしてみてください。

00:05:15.000 --> 00:05:22.000
これにより、できるだけ早く実行できるため、ページが完全にロードされたときにマーチャンダイジングビューの準備が整います。

00:05:22.000 --> 00:05:28.000
ビューのサイズはニーズに合わせてカスタマイズできますが、サイズ要件に従うようにしてください。

00:05:28.000 --> 00:05:38.000
そして最後に、あなたのウェブサイトに制限的なコンテンツセキュリティポリシーがある場合は、推奨されるガイドラインに従って、SDKをドメイン間でロードできるようにしてください。

00:05:38.000 --> 00:05:41.000
そして、それは後でApple Payを見ることです。

00:05:41.000 --> 00:05:44.000
次に、事前承認された支払いについて話します。

00:05:44.000 --> 00:05:49.000
iOS 16では、事前承認された支払いを導入しました。

00:05:49.000 --> 00:05:57.000
ユーザーはウォレットで事前承認した支払いを表示および管理することができ、加盟店は合意された条件に従ってユーザーに請求することができます。

00:05:57.000 --> 00:06:02.000
当初は、定期的な支払いと自動リロード支払いのサポートを提供しました。

00:06:02.000 --> 00:06:04.000
私たちは今、後払いもサポートしています。

00:06:04.000 --> 00:06:10.000
3つの事前承認された支払いタイプはすべて、アプリやウェブで使用できます。

00:06:10.000 --> 00:06:17.000
繰延支払いにより、将来の特定の日に固定または変動額のいずれかを請求できます。

00:06:17.000 --> 00:06:22.000
無料のキャンセル締切日がある場合は、リクエストの一部として指定することもできます。

00:06:22.000 --> 00:06:31.000
後払いが適している場合の例には、お客様がホテルの予約をしているときや、アイテムを予約注文しているときなどがあります。

00:06:31.000 --> 00:06:36.000
事前承認された支払いは、Apple Payマーチャントトークンを利用します。

00:06:36.000 --> 00:06:41.000
それらは、個々のデバイスではなく、ユーザーのApple IDに関連付けられています。

00:06:41.000 --> 00:06:47.000
つまり、たとえば、ユーザーがデバイスをアップグレードする場合、トークンは引き続き有効です。

00:06:47.000 --> 00:06:55.000
このため、トークンを使用してアカウントに請求することができ、後日の支払いの受信がより信頼性が高くなります。

00:06:55.000 --> 00:07:02.000
事前承認された支払いを実行する場合、顧客の支払いカードがそれらをサポートしている場合、マーチャントトークンは自動的に発行されます。

00:07:02.000 --> 00:07:12.000
支払いカードがマーチャントトークンをサポートしていない場合、取引は引き続き実行されますが、個々のデバイスに関連付けられている従来のApple Payトークンを使用します。

00:07:12.000 --> 00:07:19.000
Apple Payマーチャントトークンの詳細については、昨年のWalletとApple Payの新機能をチェックしてください。

00:07:19.000 --> 00:07:24.000
それでは、アプリ内に繰延支払いを組み込む方法を見てみましょう。

00:07:24.000 --> 00:07:32.000
まず、料金の説明とかかる金額を概説したPKDeferredPaymentSummaryItemを作成します。

00:07:32.000 --> 00:07:36.000
また、支払いが実行される日付も設定します。

00:07:36.000 --> 00:07:39.000
次に、PKDeferredPaymentRequestを作成します。

00:07:39.000 --> 00:07:46.000
作成したばかりの要約項目と、支払いの管理に関するその他の情報を提供します。

00:07:46.000 --> 00:07:53.000
ユーザーに表示する必要がある請求契約がある場合は、後払い要求でも設定できます。

00:07:53.000 --> 00:08:00.000
リクエストを作成して設定したら、PKPaymentRequestに添付できます。

00:08:00.000 --> 00:08:09.000
リクエストの支払い要約項目については、以前と同じ金額と日付で別のPKDeferredPaymentSummaryItemを作成します。

00:08:09.000 --> 00:08:13.000
しかし、今回は商人の名前を表すラベルが付いています。

00:08:13.000 --> 00:08:17.000
私たちはリクエストにこれを設定し、支払いのために提示する準備ができています。

00:08:17.000 --> 00:08:28.000
この例でわかるように、Apple Payの支払いシートは、請求契約に関する情報と請求が予想される時期とともに、後払いをユーザーに提示します。

00:08:28.000 --> 00:08:35.000
さて、無料のキャンセル日を指定する場合は、いくつかの重要な考慮事項があります。

00:08:35.000 --> 00:08:43.000
無料のキャンセル日を提供する場合、その時点以前のキャンセルは、ユーザーに無料で行われると述べています。

00:08:43.000 --> 00:08:49.000
このため、日付と時刻の両方が重要な情報です。

00:08:49.000 --> 00:08:53.000
キャンセルポリシーが適用されるタイムゾーンを明示的に明記する必要があります。

00:08:53.000 --> 00:08:56.000
これをサポートするために別のプロパティを提供しました。

00:08:56.000 --> 00:09:02.000
以下の例では、タイムゾーンが太平洋標準時であることを指定しました。

00:09:02.000 --> 00:09:07.000
お客様のタイムゾーンがキャンセルポリシーのタイムゾーンと一致しない可能性があるため、これは重要です。

00:09:07.000 --> 00:09:14.000
例えば、誰かがイギリスに拠点を置いている場合、アメリカでホテルを予約します。

00:09:14.000 --> 00:09:19.000
繰延支払いを扱う場合、従うべきベストプラクティスをいくつか紹介します。

00:09:19.000 --> 00:09:30.000
前述のように、無料キャンセルポリシーを説明する必要がある場合は、後払いリクエストに提供された日付、時刻、タイムゾーンを慎重に検討してください。

00:09:30.000 --> 00:09:36.000
要約項目に後払いを含めることを忘れないでください。また、適切なマーチャント名を設定してください。

00:09:36.000 --> 00:09:39.000
これは自動的に行われるわけではありません。

00:09:39.000 --> 00:09:44.000
請求契約を提供するときは、それを短くすることを忘れないでください。

00:09:44.000 --> 00:09:53.000
請求契約のテキストは、考慮すべき重要な事実の要約としてのみ機能すべきであり、通常の請求または法的契約に取って代わるべきではありません。

00:09:53.000 --> 00:10:03.000
最後に、トークン通知URLを指定すると、Apple Payマーチャントトークンが発行された場合、Apple Payマーチャントトークンのライフサイクルイベントを最新の状態に保つことができます。

00:10:03.000 --> 00:10:05.000
そして、それは繰延支払いです。

00:10:05.000 --> 00:10:10.000
次に、Apple Payで資金を送金するまったく新しい方法を見てみましょう。

00:10:10.000 --> 00:10:16.000
伝統的にApple Payでは、ユーザーがアカウントに資金を追加するための支払いシートが常に利用可能でした。

00:10:16.000 --> 00:10:22.000
iOS 17の新機能で、Apple Payでの送金を導入しています。

00:10:22.000 --> 00:10:30.000
これにより、ユーザーはアカウントからウォレットのカードに転送する機能を提供し、お金の移動のライフサイクルを完了します。

00:10:30.000 --> 00:10:38.000
これは、支払いと同じ安全でプライベートなApple Payインフラストラクチャを使用しているため、顧客はすでにこのプロセスに精通していることになります。

00:10:38.000 --> 00:10:46.000
資金の送金が理にかなっている例は、顧客が銀行口座またはストアドバリュー口座から資金を引き出すことを可能にすることです。

00:10:46.000 --> 00:10:55.000
Apple Payでの送金をサポートするために、送金に必要な情報のみに焦点を当てた新しいリクエストタイプを作成しました。

00:10:55.000 --> 00:11:01.000
それを使用するには、ユーザーの支払いカードに転送する金額を定義するだけです。

00:11:01.000 --> 00:11:06.000
受信者の連絡先の詳細が必要な場合は、これらをリクエストすることもできます。

00:11:06.000 --> 00:11:12.000
以前にPKPaymentRequestを使用したことがあるなら、この新しいAPIはとても身近に感じるでしょう。

00:11:12.000 --> 00:11:21.000
Apple Payでの送金は支払いと同じインフラストラクチャで動作するため、Apple Developerポータル内でマーチャントとして登録する必要があります。

00:11:21.000 --> 00:11:30.000
マーチャントとして登録し、Apple Payを使用するように設定する方法の詳細については、「Apple Payと注文管理の実装」Tech Talkをご覧ください。

00:11:30.000 --> 00:11:36.000
Apple Payでの送金の仕組みを例に示すために、例を見てみましょう。

00:11:36.000 --> 00:11:42.000
口座からお金を引き出したい顧客、アンドリューがいるとします。

00:11:42.000 --> 00:11:47.000
Apple Payで送金を使用すると、アプリ内から送金がトリガーされます。

00:11:47.000 --> 00:11:51.000
次に、アプリはリクエストを作成し、転送する金額を概説します。

00:11:51.000 --> 00:11:59.000
その後、アンドリューには送金を詳述したApple Payシートが表示され、資金を受け取るカードを選択できます。

00:11:59.000 --> 00:12:09.000
アンドリューが転送を安全に認証すると、暗号化されたペイロードが生成され、アプリに戻され、支払いプロバイダーとの処理の準備が整います。

00:12:09.000 --> 00:12:13.000
転送が処理されると、アプリは結果をApple Payに返します。

00:12:13.000 --> 00:12:16.000
転送が成功すれば、それだけです。

00:12:16.000 --> 00:12:23.000
エラーが発生した場合、アンドリューは通知され、問題を解決するための是正措置を講じることができるかもしれません。

00:12:23.000 --> 00:12:30.000
資金移動の仕組みの概要を見たので、アプリ内で実装する方法を見てみましょう。

00:12:30.000 --> 00:12:35.000
まず、サポートしたいネットワークとカード機能を決定する必要があります。

00:12:35.000 --> 00:12:41.000
次に、ユーザーが送金を開始するための適格なカードを持っているかどうかを確認します。

00:12:41.000 --> 00:12:45.000
これはPKPaymentAuthorizationControllerを通じて行われます。

00:12:45.000 --> 00:12:51.000
supportsDisbursementsメソッドを使用して、先に定義したネットワークとカード機能を提供します。

00:12:51.000 --> 00:12:56.000
このチェックの結果を使用して、必要に応じてユーザーインターフェイスを調整できます。

00:12:56.000 --> 00:13:00.000
適格性を確認したので、転送リクエストの作成を開始できます。

00:13:00.000 --> 00:13:05.000
支払い要求と同様に、金額は要約項目を通じて定義されます。

00:13:05.000 --> 00:13:08.000
この場合、2つの異なる要約項目を作成します。

00:13:08.000 --> 00:13:12.000
1つ目はPKPaymentSummaryItemです。

00:13:12.000 --> 00:13:15.000
これは、ユーザーのアカウントから引き出される金額を表します。

00:13:15.000 --> 00:13:21.000
アイテムに関連付けられているラベルは、あなたのビジネスの名前でなければならないことに注意することが重要です。

00:13:21.000 --> 00:13:26.000
2番目の項目は、新しいタイプの要約項目であるPKDisbursementSummaryItemです。

00:13:26.000 --> 00:13:36.000
これらのいずれかを含める必要があり、手数料、料金、または調整を差し引いた受取人の支払いカードに受け取った最終的な金額を常に表す必要があります。

00:13:36.000 --> 00:13:45.000
支払いにはPKPaymentRequestがありますが、Apple Payによる送金の新しいリクエストタイプ、PKDisbursementRequestがあります。

00:13:45.000 --> 00:13:50.000
PKDisbursementRequestを構築するには、特定の詳細を指定する必要があります。

00:13:50.000 --> 00:14:03.000
Apple Payに登録する際に設定したマーチャント識別子、取引の通貨、ビジネスの地域、および以前に定義されたネットワークと機能が必要です。

00:14:03.000 --> 00:14:06.000
また、作成したばかりの要約項目も提供します。

00:14:06.000 --> 00:14:12.000
送金受取人の連絡先の詳細が必要な場合は、ここでもリクエストできます。

00:14:12.000 --> 00:14:17.000
また、受取人の支払いカードが発行された地域を制限することもできます。

00:14:17.000 --> 00:14:21.000
リクエストが構築されたら、それをユーザーに提示できるようになりました。

00:14:21.000 --> 00:14:28.000
これを行うには、支払い要求でPKPaymentAuthorizationControllerのインスタンスを初期化します。

00:14:28.000 --> 00:14:33.000
私たちは自分自身を代表者として設定し、その後、提示します。

00:14:33.000 --> 00:14:42.000
ここで見られるように、ユーザーは、送金を受け取りたい支払いカードとそのカードに受け取る金額を選択するオプションが表示されます。

00:14:42.000 --> 00:14:51.000
これで、ユーザーが転送を安全に承認すると、転送を処理するために実装する必要があるデリゲートコールバックがいくつかあります。

00:14:51.000 --> 00:14:58.000
Apple Payで資金を送金するために実装する必要がある委任方法は2つしかありません。

00:14:58.000 --> 00:15:02.000
1つ目はpaymentAuthorizationControllerDidFinishです。

00:15:02.000 --> 00:15:05.000
これは、シートを却下する準備ができたら呼び出されます。

00:15:05.000 --> 00:15:09.000
それを却下する責任は呼び出しアプリにあります。

00:15:09.000 --> 00:15:14.000
この方法を使用して、それに応じて自分のアプリのUIを変更することもできます。

00:15:14.000 --> 00:15:18.000
第二に、didAuthorizePaymentデリゲートメソッドです。

00:15:18.000 --> 00:15:26.000
Apple Payでの送金は支払いと同じインフラストラクチャを使用しているため、処理に使用するのと同じタイプのPKPaymentオブジェクトを受け取ります。

00:15:26.000 --> 00:15:33.000
ここでは、トークンの処理を独自のprocessFundsTransferメソッドに抽象化しました。

00:15:33.000 --> 00:15:40.000
処理の結果に応じて、成功または失敗を返します。

00:15:40.000 --> 00:15:46.000
処理段階でエラーが発生した場合は、これらを表す一連の便利な方法を提供しました。

00:15:46.000 --> 00:15:54.000
提供された連絡先情報に関連する問題がある場合は、disbursementContactInvalidErrorを使用できます。

00:15:54.000 --> 00:16:03.000
支払い処理業者が、ユーザーの支払いカードが資金移動を受け入れることができないと判断した場合は、disbursementCardUnsupportedErrorを使用できます。

00:16:03.000 --> 00:16:10.000
一部の金融機関は、より迅速に受取人に資金を送ることができる即時送金をサポートしています。

00:16:10.000 --> 00:16:14.000
これらは、Apple Payでの送金で表すこともできます。

00:16:14.000 --> 00:16:21.000
サービスによっては、これらのインスタント転送には料金が含まれる場合があり、これも表すことができます。

00:16:21.000 --> 00:16:26.000
通常、ユーザーはアプリ内の転送速度の選択肢が与えられます。

00:16:26.000 --> 00:16:32.000
ユーザーが即座に資金を送金することを選択した場合、それらのサポートを必要とする機能を提供します。

00:16:32.000 --> 00:16:40.000
そうすると、ユーザーのカードの選択は、即時転送をサポートすることが知られているカードに限定されます。

00:16:40.000 --> 00:16:44.000
そして、これはインスタント転送がどのように見えるかです。

00:16:44.000 --> 00:16:52.000
シートは以前と非常によく似ていますが、今は転送が即時であるという事実と、ユーザーが支払う料金を強調しています。

00:16:52.000 --> 00:16:56.000
振込金額も手数料を考慮して調整されています。

00:16:56.000 --> 00:17:01.000
前回の転送リクエストを瞬時に行う方法を見てみましょう。

00:17:01.000 --> 00:17:06.000
まず、サポートされている機能のリストにinstantFundsOutを追加します。

00:17:06.000 --> 00:17:13.000
その後、supportDisbursements内で、ユーザーが即時転送をサポートするカードを持っているかどうかを確認できます。

00:17:13.000 --> 00:17:18.000
その後、それに応じて転送方法のオプションとユーザーインターフェイスを調整できます。

00:17:18.000 --> 00:17:27.000
要約項目については、即時送金手数料を表す専用の項目、PKInstantFundsOutFeeSummaryItemがあります。

00:17:27.000 --> 00:17:33.000
このアイテムでは、即時転送を実行する目的で請求される金額を指定します。

00:17:33.000 --> 00:17:38.000
料金を請求しなくても、この要約項目は必須です。

00:17:38.000 --> 00:17:41.000
この場合、ゼロの量を設定します。

00:17:41.000 --> 00:17:47.000
この例では手数料を請求しているため、それに応じて支払い額を更新する必要があります。

00:17:47.000 --> 00:17:50.000
これはあなたのために自動的に行われることはありません。

00:17:50.000 --> 00:17:55.000
PKDisbursementRequestの作成は、以前とあまり違いはありません。

00:17:55.000 --> 00:18:01.000
唯一の違いは、以前に定義した機能と要約項目を確実に提供することです。

00:18:01.000 --> 00:18:04.000
そして、即時転送を表すために必要なのはそれだけです。

00:18:04.000 --> 00:18:10.000
Apple Payで送金を実装する際に留意すべきベストプラクティスをいくつか紹介します。

00:18:10.000 --> 00:18:19.000
Apple Payでの送金はiOSとiPadOSでのみ利用でき、macOSやウェブでは使用できないことに注意してください。

00:18:19.000 --> 00:18:29.000
資金移動の処理中にエラーが発生した場合は、専用の支払いエラーの1つを使用して、これをユーザーに効果的に伝えます。

00:18:29.000 --> 00:18:36.000
最初の要約項目は、ユーザーのアカウントから引き出される金額を表す必要があることに注意することが重要です。

00:18:36.000 --> 00:18:40.000
最初の要約項目のラベルは、あなたのビジネスのラベルと一致する必要があります。

00:18:40.000 --> 00:18:49.000
そして、最後の要約項目は、手数料、料金、または調整を差し引いた、ユーザーの支払いカードで受け取る金額を表す必要があります。

00:18:49.000 --> 00:18:53.000
そして、それが支払いに関して私たちが今日持っているすべてです。

00:18:53.000 --> 00:18:57.000
トラックを少し変更するには、注文追跡について話しましょう。

00:18:57.000 --> 00:19:04.000
注文追跡は、ユーザーが参加加盟店との注文を追跡する方法としてiOS 16で導入されました。

00:19:04.000 --> 00:19:10.000
ユーザーからの反応は素晴らしく、注文追跡をさらに良くするために懸命に取り組んできました。

00:19:10.000 --> 00:19:17.000
注文をよりよく表現し、伝達するために、オペレーティングシステム内の統合をどのように改善したかについて説明します。

00:19:17.000 --> 00:19:20.000
その後、注文追跡にいくつかの機能強化を行いました。

00:19:20.000 --> 00:19:26.000
そして最後に、ウォレットに注文を追加する新しい方法を導入しています。

00:19:26.000 --> 00:19:37.000
iOS 16.4では、メッセージを通じて注文を共有するサポートを追加し、注文のインラインプレビューを提供し、受信者がウォレット内で追跡する機能を追加しました。

00:19:37.000 --> 00:19:43.000
また、ユーザーが一目で注文を追跡できる注文追跡ウィジェットも導入しました。

00:19:43.000 --> 00:19:48.000
ユーザーは、追加の作業を必要とせずに、すでにこれらの新機能の恩恵を受けることができます。

00:19:48.000 --> 00:19:53.000
マップをサポートしながら、iOS 17のシステム統合を続けています。

00:19:53.000 --> 00:20:02.000
ユーザーが指定された集荷時間と場所で注文を追跡している場合、マップはSiriの提案を通じて積極的にそれを提案します。

00:20:02.000 --> 00:20:08.000
それでは、iOS 17で注文追跡に対して行った機能強化のいくつかを見てみましょう。

00:20:08.000 --> 00:20:14.000
宅配業者や食品配達のユースケースをよりよくサポートするために、使用されている配送の種類を示すことができます。

00:20:14.000 --> 00:20:21.000
新しいshippingTypeプロパティを通じて、注文が出荷されるか配送されるかを宣言できます。

00:20:21.000 --> 00:20:27.000
エンタープライズアプリを含む、関連するアプリケーションをより適切にサポートできるようになりました。

00:20:27.000 --> 00:20:36.000
関連するアプリケーション識別子を宣言することで、アプリと注文追跡の間の注文通知の管理を改善できます。

00:20:36.000 --> 00:20:45.000
さらに、カスタム製品ページ識別子をサポートし、ウォレットのトラフィックに最も関連性の高いApp Store製品ページへのディープリンクを可能にします。

00:20:45.000 --> 00:20:50.000
最後に、支払い情報を表す新しい方法を導入しています。

00:20:50.000 --> 00:20:59.000
注文パッケージは、それに関連する一連のトランザクションをサポートするようになり、それぞれが支払い方法や金額などの詳細情報を持っています。

00:20:59.000 --> 00:21:04.000
また、取引に領収書ファイルを添付して、顧客が支払い記録を持つようにすることもできます。

00:21:04.000 --> 00:21:10.000
このレシートファイルは、PDFまたはJPEGやPNGなどの画像のいずれかです。

00:21:10.000 --> 00:21:17.000
注文パッケージのサイズは限られているので、含めるレシートファイルのサイズを考慮してください。

00:21:17.000 --> 00:21:22.000
取引が購入か払い戻しかを説明することもできます。

00:21:22.000 --> 00:21:27.000
iOS 17では、ウォレットに注文を追加することがかつてないほど簡単になりました。

00:21:27.000 --> 00:21:32.000
注文確認メールなどのメールに注文パッケージを添付できるようになりました。

00:21:32.000 --> 00:21:37.000
その後、ユーザーはその場でウォレットに注文を追加できるようになります。

00:21:37.000 --> 00:21:44.000
さらに、アプリやウェブサイトに「Apple Walletで追跡」ボタンを追加することもできます。

00:21:44.000 --> 00:21:50.000
ウォレットへの注文の追加をサポートする新しい注文追跡APIを見てみましょう。

00:21:50.000 --> 00:21:56.000
このAPIは、FinanceKitとFinanceKitUIの2つの新しいフレームワークに含まれています。

00:21:56.000 --> 00:22:02.000
これら2つのSwift専用フレームワークにより、開発者はWallet内で注文データを処理できます。

00:22:02.000 --> 00:22:11.000
注文情報へのアクセスは、FinanceStoreの共有インスタンスを通じて達成され、注文追跡クエリを処理するための中心的なリソースを提供します。

00:22:11.000 --> 00:22:18.000
このAPIを使用すると、注文の存在と、注文を追加または更新する方法を確認できます。

00:22:18.000 --> 00:22:22.000
既存の注文を確認する方法を見てみましょう。 既存の注文を確認しましょう。

00:22:22.000 --> 00:22:30.000
まず、FinanceStoreに問い合わせて、完全修飾注文識別子を持つ注文が含まれているかどうかを確認します。

00:22:30.000 --> 00:22:35.000
その後、存在するか、見つからないかの2つの応答のうちの1つを受け取ります。

00:22:35.000 --> 00:22:38.000
その後、必要に応じてアプリで応答できます。

00:22:38.000 --> 00:22:40.000
それはそれと同じくらい簡単です。

00:22:40.000 --> 00:22:44.000
注文を追加または更新する場合は、2つの方法のいずれかでこれを行うことができます。

00:22:44.000 --> 00:22:48.000
まず、FinanceKitを使用してこれを行う方法を紹介します。

00:22:48.000 --> 00:22:54.000
まず、ウォレットに追加したい署名された注文パッケージのデータシリアル化が必要になります。

00:22:54.000 --> 00:22:58.000
次に、これをFinanceStoreの保存注文方法に提供します。

00:22:58.000 --> 00:23:05.000
これを行うと、注文の内容と、ウォレット内で追跡するかどうかを確認するための画面がユーザーに表示されます。

00:23:05.000 --> 00:23:13.000
ユーザーがリクエストを確認または拒否すると、結果を非同期に受信し、3つの形式を取ることができます。

00:23:13.000 --> 00:23:20.000
ウォレットに注文を追加したか、リクエストをキャンセルしたか、新しい注文がすでに存在します。

00:23:20.000 --> 00:23:24.000
アプリがSwiftUIで書かれている場合は、FinanceKitUIを使用できます。

00:23:24.000 --> 00:23:32.000
これにより、専用の「Apple Walletで追跡」ボタンが提供され、注文を追加した結果を処理できます。

00:23:32.000 --> 00:23:38.000
FinanceKitと同様に、まず署名された注文パッケージのシリアル化されたインスタンスが必要になります。

00:23:38.000 --> 00:23:42.000
次に、AddOrderToWalletButtonをビューに含めます。

00:23:42.000 --> 00:23:48.000
ユーザーがこのボタンを選択すると、ウォレットに注文を追加する機能が提供されます。

00:23:48.000 --> 00:23:53.000
その後、以前と同じように、3つの結果状態に応答することができます。

00:23:53.000 --> 00:24:00.000
ウェブ上で注文を追跡する顧客をサポートしたいマーチャントのために、JavaScript SDKでこのボタンのバージョンを提供しています。

00:24:00.000 --> 00:24:06.000
これを使用するには、apple-walletボタンを挿入し、属性を使用して設定します。

00:24:06.000 --> 00:24:10.000
ボタンの種類はトラックオーダーに設定する必要があります。

00:24:10.000 --> 00:24:18.000
このボタンを使用する場合は、追加する署名された注文パッケージの場所を指すようにonClickコールバックを設定することが重要です。

00:24:18.000 --> 00:24:20.000
そして、それは私たちが注文追跡で今日あなたのために持っているものです。

00:24:20.000 --> 00:24:25.000
これらの新しいAPIをアプリやサービスに採用するのが待ちきれません。

00:24:25.000 --> 00:24:34.000
そして今、まったく異なる何かのために、私たちはアイデンティティに関して共有するいくつかのエキサイティングなアップデートを持っています、そしてそのために、私はジョンに引き渡します。

00:24:34.000 --> 00:24:37.000
ジョン:ありがとう、デビッド。またこんにちは。

00:24:37.000 --> 00:24:40.000
私はApple PayとWalletチームのエンジニア、ジョンです。

00:24:40.000 --> 00:24:47.000
iOS 17でアイデンティティに追加した新機能について話すことにとても興奮しています。

00:24:47.000 --> 00:24:59.000
iOS 15.4でWalletにIDを導入し、サポートされている米国の州のユーザーが運転免許証または州のIDをWalletに追加できるようにしました。

00:24:59.000 --> 00:25:03.000
昨年、Verify with Walletを導入しました。

00:25:03.000 --> 00:25:13.000
このAPIを使用すると、企業はApple Walletに保存されているユーザーのIDから情報を要求することで、オンボーディングとアカウント確認のフローを合理化できます。

00:25:13.000 --> 00:25:21.000
今年、iOS 17では、iPhoneでTap to Present IDを導入します。

00:25:21.000 --> 00:25:31.000
このAPIを使用すると、アプリはiPhoneのみを使用して、ウォレットやその他のモバイルドライバーライセンスのIDをシームレスかつ安全に検証できます。

00:25:31.000 --> 00:25:40.000
これは、iOS 15.4のProximityReaderフレームワークに追加されたiPhone APIのTap to Payの上に構築されています。

00:25:40.000 --> 00:25:51.000
iPhoneでタップして支払うことは、追加のハードウェアや支払い端末を必要とせずに、非接触型決済を受け入れるための安全でプライベートで簡単な方法を提供します。

00:25:51.000 --> 00:25:55.000
では、タップしてIDを実際に提示するを見てみましょう。

00:25:55.000 --> 00:26:01.000
私が宇宙船レンタルで働いていて、デビッドが私たちから宇宙船を借りたいとします。

00:26:01.000 --> 00:26:10.000
彼はこれを行うには少なくとも21歳でなければならないので、私はTap to Present IDを使用して年齢確認を行うつもりです。

00:26:10.000 --> 00:26:15.000
まず、宇宙船レンタルアプリはタップを呼び出してIDを提示します。

00:26:15.000 --> 00:26:24.000
私のiPhoneには、ビジネスの名前、ロゴ、および実行されているリクエストの種類、この場合は年齢の証明が表示されます。

00:26:24.000 --> 00:26:29.000
私は今、私の近くに彼のiPhoneを持っているようにデビッドを招待します。

00:26:29.000 --> 00:26:36.000
David: 私のiPhoneには、確認できる同意書が表示されるようになりました。

00:26:36.000 --> 00:26:43.000
私は宇宙船レンタルに私のIDを提示していることがわかります、そして彼らは私のID写真と私が21歳以上であるかどうかを要求しています。

00:26:43.000 --> 00:26:49.000
この情報を提示したいので、ダブルクリックしてFace IDで確認します。

00:26:49.000 --> 00:26:56.000
ジョン：私のiPhoneには、デビッドが提示した情報が表示されるようになりました。

00:26:56.000 --> 00:27:01.000
彼は身分証明書の写真と一致し、21歳以上であることがわかります。

00:27:01.000 --> 00:27:05.000
だから今、彼は離陸の準備ができています。

00:27:05.000 --> 00:27:10.000
Tap to Present ID APIを使用して、DavidのIDを正常に確認しました。

00:27:10.000 --> 00:27:16.000
この経験は、物理的なIDをチェックすることと比較して、いくつかの重要な利点を提供しました。

00:27:16.000 --> 00:27:20.000
まず、ID情報自体が検証されます。

00:27:20.000 --> 00:27:34.000
改ざんの影響を受けやすい物理的なIDとは異なり、モバイル運転免許証は発行機関によって暗号署名され、iOSは署名を検証するので、応答を信頼できます。

00:27:34.000 --> 00:27:38.000
第二に、その経験はワイヤレスで安全でした。

00:27:38.000 --> 00:27:49.000
デビッドはiPhoneを私に渡したり、ロックを解除したりする必要はなく、データはNFCとBluetoothを使用して安全に送信されました。

00:27:49.000 --> 00:27:53.000
最後に、これはIDを確認するためのよりプライベートな方法です。

00:27:53.000 --> 00:28:01.000
デビッドは、すべてが共有されている物理的なIDとは異なり、年齢を確認するために必要な情報を共有するだけでした。

00:28:01.000 --> 00:28:06.000
このAPIで実行できるリクエストの種類について話しましょう。

00:28:06.000 --> 00:28:08.000
ディスプレイのリクエストをデモしたところです。

00:28:08.000 --> 00:28:13.000
これは、人の名前や年齢を確認する必要がある場合に適しています。

00:28:13.000 --> 00:28:20.000
結果はシステムUIに表示され、ID情報はアプリに返されません。

00:28:20.000 --> 00:28:23.000
APIはデータ要求もサポートしています。

00:28:23.000 --> 00:28:35.000
これらは、住所、生年月日、運転権限など、より幅広いドキュメント要素を要求することができ、結果は処理するためにアプリに返されます。

00:28:35.000 --> 00:28:40.000
データ要求を実行するには、アプリに追加の資格が必要になります。

00:28:40.000 --> 00:28:44.000
詳細については、ドキュメントを確認してください。

00:28:44.000 --> 00:28:52.000
では、表示要求から始めて、これをコードで実装する方法を見てみましょう。

00:28:52.000 --> 00:29:01.000
まず、MobileDocumentReaderのisSupportedクラスプロパティを使用して、現在のデバイスがこのAPIをサポートしているかどうかを確認します。

00:29:01.000 --> 00:29:07.000
その場合は、リーダーオブジェクトをインスタンス化し、そのprepareメソッドを呼び出します。

00:29:07.000 --> 00:29:11.000
これにより、MobileDocumentReaderSessionオブジェクトが返されます。

00:29:11.000 --> 00:29:17.000
次に、確認したい要素を使用して運転免許証の表示要求を作成します。

00:29:17.000 --> 00:29:24.000
ここでは、運転免許証の所持者が少なくとも21歳であるかどうかを確認しています。

00:29:24.000 --> 00:29:29.000
次に、セッションでrequestDocumentを呼び出し、リクエストを渡します。

00:29:29.000 --> 00:29:39.000
その後、リーダーUIが表示され、最初にID所有者にデバイスを提示するように促し、次に要求の結果が表示されます。

00:29:39.000 --> 00:29:46.000
これは表示要求であるため、requestDocumentメソッドからは何も返されないことに注意してください。

00:29:46.000 --> 00:29:52.000
そして、ほんの数行のコードで、アプリにモバイルドキュメント読み取り機能を追加しました。

00:29:52.000 --> 00:30:00.000
デフォルトでは、ブランドの名前とロゴは、リーダーのiPhoneにもIDホルダーのデバイスにも表示されません。

00:30:00.000 --> 00:30:06.000
ただし、ドキュメントリクエスト中にブランド情報を表示したい場合は、表示できます。

00:30:06.000 --> 00:30:12.000
これは、Apple Business Registerとさらに数行のコードで設定できます。

00:30:12.000 --> 00:30:20.000
ドキュメントリクエスト時にブランド情報を表示するには、デバイスを準備する際にリーダートークンを渡す必要があります。

00:30:20.000 --> 00:30:24.000
このトークンをサーバーで作成する必要があります。

00:30:24.000 --> 00:30:32.000
リーダートークンは、Apple Business Registerを通じて設定したキーペアで署名されたJWTです。

00:30:32.000 --> 00:30:40.000
サーバーは、ブランドID、キーID、およびリーダーインスタンス識別子を使用してリーダートークンを作成します。

00:30:40.000 --> 00:30:50.000
ブランドとキーIDはApple Business Registerを通じて取得でき、アプリのすべてのインスタンスで同じです。

00:30:50.000 --> 00:30:55.000
アプリはリーダーインスタンス識別子をサーバーに提供します。

00:30:55.000 --> 00:31:08.000
コードに戻ると、アプリはMobileDocumentReaderの設定オブジェクトからリーダーインスタンス識別子を取得し、リーダートークンと引き換えにサーバーに送信します。

00:31:08.000 --> 00:31:13.000
このトークンをprepareメソッドに渡して、リーダーセッションを取得します。

00:31:13.000 --> 00:31:19.000
次に、リクエストを作成し、以前と同じようにrequestDocumentを呼び出します。

00:31:19.000 --> 00:31:26.000
そして今、あなたのブランド名とロゴは、リーダーiPhoneとIDホルダーのデバイスの両方に表示されます。

00:31:26.000 --> 00:31:29.000
そして、それは表示要求をカバーしています。

00:31:29.000 --> 00:31:37.000
これまでのところ、セッションの準備方法、ドキュメントのリクエスト方法、およびリーダートークンを使用してブランディング情報を表示する方法を見てきました。

00:31:37.000 --> 00:31:41.000
では、データ要求を実行する方法を見てみましょう。

00:31:41.000 --> 00:31:51.000
これらのリクエストは、より幅広いドキュメント要素をサポートし、APIは単に表示するのではなく、アプリに結果を返します。

00:31:51.000 --> 00:31:59.000
このリクエストタイプを使用するには、まず以前と同じようにリーダートークンでデバイスを準備する必要があります。

00:31:59.000 --> 00:32:11.000
次に、運転免許証データ要求を作成し、要求するドキュメント要素と、情報を保持するかどうかを指定します。

00:32:11.000 --> 00:32:21.000
Calling requestDocumentは、表示要求と同じようにリーダーUIを表示しますが、読み取りが完了すると、UIは自動的に却下されます。

00:32:21.000 --> 00:32:26.000
その後、応答は処理するためにアプリに戻されます。

00:32:26.000 --> 00:32:33.000
そして、それはiPhoneのTap to Present IDで、ProximityReaderフレームワークに追加したエキサイティングな新しいAPIです。

00:32:33.000 --> 00:32:36.000
そして今、デビッドに戻ります。

00:32:36.000 --> 00:32:39.000
デビッド:ありがとう、ジョン!それで、私たちは今日何を学びましたか?

00:32:39.000 --> 00:32:45.000
Apple Pay Laterのサポートと新しいユースケースによる支払いの強化を見てきました。

00:32:45.000 --> 00:32:57.000
注文追跡の新しいAPIを使用すると、アプリやサービス内からウォレットに注文を追加でき、iPhoneのTap to Present IDでモバイル運転免許証を確認する新しい方法があります。

00:32:57.000 --> 00:33:02.000
最後に、ビジネスの場合は、Apple Business Registerへの登録を検討してください。

00:33:02.000 --> 00:33:06.000
これは、顧客のWalletとApple Payの体験を豊かにするのに役立ちます。

00:33:06.000 --> 00:33:12.000
Apple Developerフォーラムにアクセスして、一年中質問をしたり、支援を受けたりできます。

00:33:12.000 --> 00:33:16.000
そして最後に、ご意見がございましたら、ご連絡をお待ちしております。

00:33:16.000 --> 00:33:19.000
フィードバックアシスタントを使用してこれを行うことができます。

00:33:19.000 --> 00:33:22.000
そして、それだけです。このセッションを楽しんでいただければ幸いです。

00:33:22.000 --> 00:33:23.000
両方:見てくれてありがとう。

00:33:23.000 --> 23:59:59.000
♪ ♪

