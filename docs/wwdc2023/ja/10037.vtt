WEBVTT

00:00:00.000 --> 00:00:10.000
♪ ♪

00:00:10.000 --> 00:00:11.000
リチャード:こんにちは、私はリチャードです。

00:00:11.000 --> 00:00:19.000
今日は、円グラフ、選択、スクロールなど、スウィフトチャートのエキサイティングな新機能についてお話しできることを嬉しく思います。

00:00:19.000 --> 00:00:21.000
円グラフから始めましょう。

00:00:21.000 --> 00:00:29.000
Swift Chartsは、あらゆる種類のデータビジュアライゼーションを作成するための構成可能でカスタマイズ可能なビルディングブロックを提供します。

00:00:29.000 --> 00:00:33.000
今日、スウィフトチャートのファミリーに新しいのは、美味しくて美しい円グラフです。

00:00:33.000 --> 00:00:39.000
円グラフは、シンプルで使い慣れた形状を介して、さまざまなカテゴリによって合計値がどのように作られているかを示しています。

00:00:39.000 --> 00:00:46.000
例えば、これは私の友人のフードトラックのパンケーキ販売データを視覚化したチャートです。

00:00:46.000 --> 00:00:53.000
円グラフには軸がなく、精度が重要ではないカジュアルな設定に最適です。

00:00:53.000 --> 00:01:01.000
ウェッジがどのように完全な円を構成するかを広く理解することで、部分から全体への関係を視覚化するために直感的です。

00:01:01.000 --> 00:01:06.000
人々が円グラフが好きな重要な理由の1つは、丸くて親しみやすい形だからです。

00:01:06.000 --> 00:01:13.000
すでに慣れ親しんでいるマークベースの構成構文を使用して、円グラフを作成できます。

00:01:13.000 --> 00:01:17.000
新しいマークタイプ、SectorMarkを導入します。

00:01:17.000 --> 00:01:20.000
セクターマークは、パイのスライスを表します。

00:01:20.000 --> 00:01:23.000
それは極地空間に位置しています。

00:01:23.000 --> 00:01:27.000
この極ではなく、極座標系です。

00:01:27.000 --> 00:01:32.000
セクターのサイズは、それが表す値に比例します。

00:01:32.000 --> 00:01:35.000
半径に沿って、セクターの外観をカスタマイズできます。

00:01:35.000 --> 00:01:41.000
内側の半径を増やすと、円グラフはドーナツチャートになります。

00:01:41.000 --> 00:01:45.000
SectorMarkを使用すると、あらゆる種類の円グラフやドーナツグラフを簡単に作成できます。

00:01:45.000 --> 00:01:48.000
例をお見せしましょう。

00:01:48.000 --> 00:01:58.000
私たちの友人の国際的なパンケーキフードトラック事業は、昨年を通じて毎日の売上を大きく活性化させ、6つのスタイルのパンケーキを販売しました。

00:01:58.000 --> 00:02:05.000
今年の夏、私は彼らが販売アプリを改善するのを助けるために別の挑戦をしました。

00:02:05.000 --> 00:02:09.000
パンケーキのベストセラースタイルを視覚化するチャートから始めます。

00:02:09.000 --> 00:02:13.000
そのために、アプリは現在、単純な積み重ねられた棒グラフを持っています。

00:02:13.000 --> 00:02:19.000
それはBarMarkを持っていて、販売はX次元に沿って積み重ねられています。

00:02:19.000 --> 00:02:26.000
カテゴリデータであるため、カテゴリは各スタックバーのフォアグラウンドスタイルとして反映されます。

00:02:26.000 --> 00:02:35.000
このチャートは仕事を成し遂げますが、それを円グラフに変えて、画面上の利用可能なスペースを活用し、データを目立たせましょう。

00:02:35.000 --> 00:02:45.000
私がする必要があるのは、BarMarkと引数xをSectorMarkと角度に切り替えることだけです。

00:02:45.000 --> 00:02:48.000
それはとても簡単です!

00:02:48.000 --> 00:02:53.000
SectorMarkでは、販売数量を表すために角度を使用します。

00:02:53.000 --> 00:02:58.000
円グラフに指定する角度値は、自動的に完全な円に正規化されます。

00:02:58.000 --> 00:03:03.000
スタイルのカスタマイズを適用することもできます。

00:03:03.000 --> 00:03:08.000
angularInsetは、セクター間にギャップを作成するためにセクターに設定できます。

00:03:08.000 --> 00:03:17.000
ここでは、セクターの角度インセットを1.5ポイントに設定したので、2つのセクター間のギャップはインセットの2倍、3ポイント幅です。

00:03:17.000 --> 00:03:22.000
私はまた、私にきれいに丸みを帯びたパイ生地を与えるコーナー半径を設定しました。

00:03:22.000 --> 00:03:27.000
それはほんの数行のコードですでに見事に見えます。

00:03:27.000 --> 00:03:33.000
別の外観を試すには、このチャートをドーナツチャートに変えましょう。

00:03:33.000 --> 00:03:37.000
内側の半径をパイの全半径の比率に設定しました。

00:03:37.000 --> 00:03:43.000
私にとって、黄金比はちょうどよく見えますが、ドーナツの厚さが違うかもしれません。

00:03:43.000 --> 00:03:49.000
販売されたすべてのパンケーキの中で、現在チャートの上に表示されている明確な勝者、カチャパがいます。

00:03:49.000 --> 00:03:55.000
しかし、ドーナツチャートは中央が空洞なので、テキストをチャートの中央に移動したいです。

00:03:55.000 --> 00:03:58.000
テキストをチャートの背景に入れました。

00:03:58.000 --> 00:04:05.000
私はいくつかの位置計算を使用して、テキストがドーナツの穴の中央にあることを確認します。

00:04:05.000 --> 00:04:09.000
今、それは見栄えの良いドーナツチャートです。

00:04:09.000 --> 00:04:12.000
だから、それは円グラフとドーナツチャートです。

00:04:12.000 --> 00:04:19.000
彼らはあなたのデータで印象を与える素晴らしい方法であり、大画面では絶対に素晴らしいです。

00:04:19.000 --> 00:04:24.000
次に、選択から始めて、いくつかのチャートのインタラクティブ機能を深く掘り下げたいと思います。

00:04:24.000 --> 00:04:30.000
チャートでインタラクティブ性を有効にすることで、追加の詳細を徐々に開示することができます。

00:04:30.000 --> 00:04:38.000
インタラクティブ性は、人々がタッチなどのさまざまな形式の入力を使用して自然にデータを探索することを奨励します。

00:04:38.000 --> 00:04:46.000
選択はチャートと通信するための直接的な方法であり、心拍数チャートのようなAppleが設計したチャートは、その完璧な例です。

00:04:46.000 --> 00:04:52.000
軸に沿った点を選択すると、チャートには追加情報が表示されます。

00:04:52.000 --> 00:04:57.000
このアイデアをパンケーキ販売アプリに持ち込もう。

00:04:57.000 --> 00:05:03.000
アプリの1つのチャートは、2つの都市での各曜日の平均売上を視覚化します。

00:05:03.000 --> 00:05:14.000
このチャートで値選択を有効にして、選択した日に販売されたパンケーキの数を示すポップオーバーを介して詳細な販売数を表示します。

00:05:14.000 --> 00:05:18.000
これがチャートの定義方法です。各都市にはデータシリーズがあります。

00:05:18.000 --> 00:05:23.000
シリーズの各要素には、曜日と売上数があります。

00:05:23.000 --> 00:05:26.000
その後、線は都市名でスタイル設定されます。

00:05:26.000 --> 00:05:34.000
すでにchartOverlay修飾子に精通しているかもしれません。これにより、SwiftUIビューをオーバーレイしてジェスチャーをキャプチャできます。

00:05:34.000 --> 00:05:39.000
しかし、iOS 17では、新しいchartXSelection修飾子を使用できます。

00:05:39.000 --> 00:05:47.000
それは私のためにすべてのジェスチャー認識を処理し、選択した値をバインディングに保存します。

00:05:47.000 --> 00:05:56.000
選択修飾子は、X軸に沿った生の日付値を与えるので、折れ線グラフのデータポイントに一致するように計算されたプロパティを定義します。

00:05:56.000 --> 00:06:03.000
値が選択されたときにポップオーバーを表示するようにチャートを拡張しましょう。

00:06:03.000 --> 00:06:09.000
値が選択されると、選択インジケーターとして垂直ルールマークを追加します。

00:06:09.000 --> 00:06:16.000
ルールマークがラインマークの後ろにとどまるように、Zインデックスをデフォルトの0値よりも低く設定しました。

00:06:16.000 --> 00:06:20.000
では、選択インジケーターの上にポップオーバーを作りましょう。

00:06:20.000 --> 00:06:25.000
カスタムSwiftUIビューを使用して注釈としてこれを行うことができます。

00:06:25.000 --> 00:06:32.000
注釈は通常、チャート内に配置されますが、この場合、ポップオーバーはチャートの境界を越えて広がっています。

00:06:32.000 --> 00:06:37.000
ここで、注釈のオーバーフロー解像度が必要です。

00:06:37.000 --> 00:06:44.000
X軸では、ポップオーバーがチャートの水平境界を超えないようにチャートにフィットするようにします。

00:06:44.000 --> 00:06:53.000
Y軸では、注釈がチャートのすぐ上にできるように、オーバーフロー解像度を無効にします。

00:06:53.000 --> 00:06:59.000
選択バインディングと注釈付きのルールマークで、私は今、インタラクティブな折れ線グラフを持っています。

00:06:59.000 --> 00:07:07.000
Swift Chartsは、ホバージェスチャーが値選択のデフォルトであるmacOSでの選択もサポートしています。

00:07:07.000 --> 00:07:14.000
単一の値選択に加えて、このチャート選択修飾子のバリアントを使用すると、範囲を選択できます。

00:07:14.000 --> 00:07:21.000
iOSでは、デフォルトは2本指のタップジェスチャーで、macOSではドラッグジェスチャーです。

00:07:21.000 --> 00:07:32.000
Swift Chartsでは、選択用のカスタムジェスチャーを提供することもできます。ChartProxyは、ジェスチャーの場所に基づいて値を選択するのに役立ちます。

00:07:32.000 --> 00:07:39.000
X座標とY座標のチャートを超えて、チャート値の選択は円グラフやドーナツチャートでシームレスに機能します。

00:07:39.000 --> 00:07:43.000
セクターをタップしてハイライトするのはとても楽しいです。

00:07:43.000 --> 00:07:47.000
したがって、選択はチャートの追加情報を明らかにすることでした。

00:07:47.000 --> 00:07:51.000
インタラクティブ性のもう1つの重要な部分は、データをナビゲートすることです。

00:07:51.000 --> 00:07:54.000
スクロールについて話しましょう。

00:07:54.000 --> 00:08:00.000
1年間の毎日のパンケーキの売り上げを視覚化するチャートを作りたいです。

00:08:00.000 --> 00:08:06.000
365日すべてを画面に収めるのは非現実的なので、スクロール可能でなければなりません。

00:08:06.000 --> 00:08:10.000
スクロールを有効にするには、chartScrollableAxes修飾子を呼び出すだけです。

00:08:10.000 --> 00:08:17.000
chartXVisibleDomainでは、時間間隔として30日間の表示ウィンドウを設定しました。

00:08:17.000 --> 00:08:26.000
現在の可視ドメインでパンケーキの総売上を表示できるように、chartScrollPositionを使用して現在の日付をバインディングに保存します。

00:08:26.000 --> 00:08:31.000
今、私は指を取ってスクロールすることができます。

00:08:31.000 --> 00:08:38.000
プロットをスクロールできるだけでなく、軸の内容もスクロールし、バターのように滑らかです。

00:08:38.000 --> 00:08:41.000
スクロールは、いくつかの異なる方法でカスタマイズできます。

00:08:41.000 --> 00:08:45.000
例えば、スクロールして常に日付単位にスナップしたい。

00:08:45.000 --> 00:08:49.000
これは私たちをスクロール行動に導きます。

00:08:49.000 --> 00:08:58.000
ScrollTargetBehaviorは、SwiftUIとSwift Chartsに新しい追加で、スクロールビューのコンテンツを値に合わせることができます。

00:08:58.000 --> 00:09:04.000
私が望んでいたスナップ動作のために、私は1日の最初の1時間と一致するように設定しました。

00:09:04.000 --> 00:09:10.000
majorAlignmentは、スワイプ動作を定義することで、さらに一歩カスタマイズします。

00:09:10.000 --> 00:09:19.000
ここでは、月の最初の日に設定して、スワイプしてチャートをページスルーすると、常に毎月1日に着陸します。

00:09:19.000 --> 00:09:25.000
スクロール可能なチャートは、SwiftUIでビューをスクロールするための最新の機能強化のいくつかの上に構築されています。

00:09:25.000 --> 00:09:29.000
詳細については、Beyond Scroll Viewsを必ずチェックしてください。

00:09:29.000 --> 00:09:34.000
スウィフトチャートは、データを視覚化するための無限の可能性を提供します。

00:09:34.000 --> 00:09:43.000
チャートとX座標とY座標を超えて、円グラフは現在、Appleが設計したチャートを作成するためのAPIファミリーの一部です。

00:09:43.000 --> 00:09:46.000
円グラフはシンプルでありながら強力な視覚化です。

00:09:46.000 --> 00:09:50.000
一部対全体のデータ関係を表すときに最もよく機能します。

00:09:50.000 --> 00:10:00.000
選択やスクロールなどのインタラクティブ機能は、データの視覚化にまったく新しい次元を可能にし、データを探索する際にユーザーを運転席に置きます。

00:10:00.000 --> 00:10:04.000
パイとドーナツチャートを焼いて楽しんでください。

00:10:04.000 --> 23:59:59.000
♪ ♪

