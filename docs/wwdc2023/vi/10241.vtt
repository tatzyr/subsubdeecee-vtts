WEBVTT

00:00:01.000 --> 00:00:10.000
♪ ♪

00:00:10.000 --> 00:00:13.000
Adam: Xin chào. Tên tôi là Adam, và tôi là một kỹ sư trong nhóm SharePlay.

00:00:13.000 --> 00:00:18.000
Hôm nay chúng ta sẽ nói về một tính năng mới thú vị mà nhiều bạn đã yêu cầu.

00:00:18.000 --> 00:00:24.000
Như bạn có thể đoán qua tiêu đề phiên, chúng ta sẽ nói về việc chia sẻ tệp qua SharePlay.

00:00:24.000 --> 00:00:27.000
Đầu tiên chúng ta sẽ nói về ý nghĩa của việc chuyển tệp đính kèm.

00:00:27.000 --> 00:00:33.000
Chúng tôi sẽ đề cập đến các tệp hoặc bất kỳ lượng lớn dữ liệu nào mà bạn muốn chia sẻ, dưới dạng "các tệp đính kèm".

00:00:33.000 --> 00:00:38.000
Sau đó chúng ta sẽ nói về API mới trong GroupActivities, GroupSessionJournal.

00:00:38.000 --> 00:00:48.000
Sau đó, chúng ta sẽ nói về những người tham gia muộn, và cuối cùng, chúng ta sẽ đi qua và xem việc áp dụng GroupSessionJournal dễ dàng như thế nào trong ứng dụng DrawTogether của chúng ta.

00:00:48.000 --> 00:00:51.000
Hãy bắt đầu với ý nghĩa của việc chuyển tệp đính kèm.

00:00:51.000 --> 00:00:53.000
Hãy nói chuyện qua ứng dụng vẽ của chúng tôi.

00:00:53.000 --> 00:00:58.000
Chúng tôi có nó để chúng tôi có thể đồng bộ hóa các bản vẽ giữa hai thiết bị với GroupSessionMessenger.

00:00:58.000 --> 00:01:01.000
Nhưng điều gì sẽ xảy ra nếu chúng ta thả một hình ảnh vào khung vẽ?

00:01:01.000 --> 00:01:08.000
Chà, vì giới hạn kích thước trên GroupSessionMessenger, trước đây bạn không thể sử dụng SharePlay cho việc này.

00:01:08.000 --> 00:01:17.000
Nhưng bây giờ, chúng tôi đã làm nó để cùng một cơ sở hạ tầng của Apple cung cấp cho bạn tin nhắn siêu nhanh giữa các thiết bị giờ đây cũng có thể chuyển các tệp đính kèm.

00:01:17.000 --> 00:01:25.000
Vì vậy, bây giờ khi bạn thả một bức ảnh dễ thương về chú chó của mình vào khung vẽ, nó sẽ chuyển qua cơ sở hạ tầng đám mây của chúng tôi nhanh hơn bao giờ hết.

00:01:25.000 --> 00:01:39.000
Điều này sử dụng nhiều lớp công nghệ của Apple để giảm thiểu dữ liệu cần được truyền và giảm thiểu thời gian chờ đợi nhàn rỗi, tất cả để làm cho trải nghiệm nhanh nhất có thể và tất cả những điều đó xảy ra ở một lớp hệ thống.

00:01:39.000 --> 00:01:40.000
Nhưng đó không phải là nó.

00:01:40.000 --> 00:01:50.000
SharePlay được xây dựng với sự riêng tư của người dùng nên tất cả những điều này được thực hiện trong khi đảm bảo rằng dữ liệu bạn đang chuyển được mã hóa đầu cuối giữa các thiết bị.

00:01:50.000 --> 00:01:53.000
Apple không biết về nội dung của dữ liệu được truyền đi.

00:01:53.000 --> 00:01:58.000
Và đây không chỉ dành cho những bức ảnh chú chó dễ thương của Mochi, nó có thể dành cho bất cứ thứ gì bạn muốn!

00:01:58.000 --> 00:02:03.000
Có một tệp như PDF không? Cứ làm đi! Làm thế nào về việc ghi âm giọng nói hoặc chú thích?

00:02:03.000 --> 00:02:09.000
Bất kỳ nội dung người dùng nào đang được cộng tác hiện có thể được cung cấp nhanh hơn bao giờ hết bởi API mới này.

00:02:09.000 --> 00:02:12.000
Vậy, bây giờ API trông như thế nào?

00:02:12.000 --> 00:02:14.000
Chà, chúng ta hãy đi sâu vào!

00:02:14.000 --> 00:02:19.000
Đối tượng chính của chúng tôi để làm quen với bản thân là "Tạp chí GroupSession".

00:02:19.000 --> 00:02:22.000
Đối tượng này là mới đối với iOS 17.

00:02:22.000 --> 00:02:27.000
Giống như bạn đã quen với "GroupSessionMessenger", nó được khởi tạo với "GroupSession" của bạn.

00:02:27.000 --> 00:02:31.000
Nhưng điều quan trọng là phải hiểu mục đích của đối tượng này.

00:02:31.000 --> 00:02:36.000
Đó là một đối tượng luôn nhất quán cho tất cả mọi người trong GroupSession.

00:02:36.000 --> 00:02:44.000
Điều này có nghĩa là các hành động bạn thực hiện trên tạp chí ảnh hưởng đến tất cả mọi người và các thuộc tính trên tạp chí được đồng bộ hóa tương tự cho mọi người.

00:02:44.000 --> 00:02:46.000
Hãy xem qua một số ví dụ.

00:02:46.000 --> 00:02:52.000
Khi bạn có Nhật ký của mình, bạn có thể quan sát các đột biến tệp đính kèm thông qua "phần đính kèm" AsyncSequence.

00:02:52.000 --> 00:02:57.000
Và bạn có thể tải lên bất kỳ tệp đính kèm tùy chỉnh nào của mình bằng chức năng "thêm" của chúng tôi.

00:02:57.000 --> 00:03:01.000
Tất cả những gì bạn phải làm là làm cho loại của bạn phù hợp với giao thức Có thể chuyển nhượng!

00:03:01.000 --> 00:03:15.000
Vì vậy, bây giờ, khi một thiết bị gọi "thêm", không chỉ "phần đính kèm" AsyncSequence của họ sẽ cung cấp tệp đính kèm mới mà mọi người trên GroupSession sẽ thấy sự kiện tương tự xảy ra và có thể tải tệp đính kèm mà bạn đang tải lên!

00:03:15.000 --> 00:03:23.000
Tương tự như vậy, nếu bạn xóa tệp đính kèm bằng cách gọi hàm "xóa", thì "phần đính kèm" AsyncSequence của mọi người sẽ được cập nhật cho sự kiện.

00:03:23.000 --> 00:03:24.000
Và đó là khá nhiều nó.

00:03:24.000 --> 00:03:30.000
Bạn có thể thấy bạn có thể tải lên và nhận tệp đính kèm qua API mới này dễ dàng như thế nào.

00:03:30.000 --> 00:03:37.000
Trước khi chúng tôi đi sâu vào việc triển khai điều này trong ứng dụng DrawTogether của mình, hãy nói về một số cân nhắc lớn khi sử dụng API mới này.

00:03:37.000 --> 00:03:43.000
Và đó là các tệp đính kèm không được phép có kích thước vô hạn, chúng thực sự bị giới hạn ở 100MB.

00:03:43.000 --> 00:03:47.000
Điều này được thực hiện để đảm bảo rằng chúng tôi suy nghĩ cẩn thận về trải nghiệm người dùng.

00:03:47.000 --> 00:03:54.000
Những trải nghiệm này cần phải nhanh và các thiết bị chỉ có thể tải lên và tải xuống dữ liệu quá nhanh.

00:03:54.000 --> 00:03:58.000
Do đó, bạn nên luôn cố gắng và giảm thiểu kích thước của các tệp đính kèm được gửi.

00:03:58.000 --> 00:04:06.000
Điều đó có thể có nghĩa là nếu bạn là một ứng dụng vẽ, bạn hạn chế các bức ảnh được phép trên khung vẽ của mình nhỏ hơn hoặc bằng 100MB.

00:04:06.000 --> 00:04:18.000
Bất kỳ dữ liệu nào được định hướng xung quanh nội dung do người dùng tạo đều hoàn hảo ở đây, nhưng các tệp đính kèm lớn hơn không do người dùng tạo, như phim, vẫn nên được phục vụ từ máy chủ của riêng bạn chứ không phải thông qua thiết bị của người dùng.

00:04:18.000 --> 00:04:21.000
Sau đó là vòng đời.

00:04:21.000 --> 00:04:27.000
Bất cứ thứ gì được đưa lên Tạp chí sẽ ở lại miễn là có ai đó trong GroupSession.

00:04:27.000 --> 00:04:35.000
Điều này có nghĩa là ngay cả khi người thêm tệp đính kèm vào Tạp chí ngắt kết nối khỏi GroupSession, tệp đính kèm sẽ vẫn tồn tại.

00:04:35.000 --> 00:04:41.000
Nhưng nếu mọi người rời khỏi GroupSession, tệp đính kèm sẽ bị xóa cùng với họ.

00:04:41.000 --> 00:04:47.000
Nếu bạn đã quen với việc tích hợp với GroupSessionMessenger, bạn có thể nhớ chủ đề này: Những người tham gia muộn.

00:04:47.000 --> 00:04:58.000
Thông thường khi một người mới tham gia GroupSession, đơn đăng ký của bạn sẽ phải truyền lại trạng thái thế giới của bạn cho người đó để họ bắt kịp với phần còn lại của nhóm.

00:04:58.000 --> 00:05:08.000
Điều này được quản lý bởi ứng dụng của bạn áp dụng GroupSessionMessenger và liên quan đến việc mỗi thiết bị gửi tin nhắn đến người cần bắt kịp, điều này có thể khá tốn kém.

00:05:08.000 --> 00:05:10.000
Hãy lấy ví dụ sau.

00:05:10.000 --> 00:05:12.000
Nói rằng chúng ta có hai người trong một GroupSession.

00:05:12.000 --> 00:05:16.000
Có Adam và Brian. Trong khi đó Clara vẫn chưa tham gia.

00:05:16.000 --> 00:05:20.000
Vì vậy, trước khi Clara tham gia, Adam và Brian đang vẽ rất vui.

00:05:20.000 --> 00:05:25.000
Adam tiếp tục và vẽ một cục xương chó và Brian cũng cập nhật nó về phía mình.

00:05:25.000 --> 00:05:31.000
Bây giờ, Clara tiếp tục và tham gia, nhưng bức tranh của cô ấy trống rỗng khi cô ấy tham gia!

00:05:31.000 --> 00:05:36.000
Thiết bị của cô ấy cần lấy thông tin mà Adam và Brian đang làm để cô ấy bắt kịp họ.

00:05:36.000 --> 00:05:47.000
Tại thời điểm này, cả Adam và Brian sẽ phải gửi cho Clara những gì họ hiểu về tình trạng thế giới của họ và thiết bị của Clara sẽ hội tụ để cô ấy ở cùng một thời điểm.

00:05:47.000 --> 00:05:55.000
Bây giờ nếu bạn thêm tệp đính kèm thay cho những bản vẽ đó, những tin nhắn được gửi từ Adam và Brian có thể trở nên khá lớn.

00:05:55.000 --> 00:05:57.000
Như bạn có thể tưởng tượng, điều này trở thành một vấn đề.

00:05:57.000 --> 00:06:03.000
Bạn sẽ yêu cầu mỗi người tải lên lại 100MB chỉ để cung cấp hình ảnh cho một thiết bị.

00:06:03.000 --> 00:06:08.000
Chà, bây giờ những người tham gia muộn được xử lý cho bạn trên Tạp chí GroupSession.

00:06:08.000 --> 00:06:18.000
Những người tham gia muộn sẽ nhận được các tệp đính kèm được tải lên trên Tạp chí của họ mà không có bất kỳ tải lên lại nào xảy ra từ những người khác, điều này giúp trải nghiệm nhanh hơn và ít rộng rãi hơn về băng thông.

00:06:18.000 --> 00:06:28.000
Bây giờ đó là rất nhiều thông tin, vì vậy hãy nhảy vào phần thú vị và xem điều kỳ diệu trong công việc và hướng dẫn cách chúng tôi sẽ áp dụng GroupSessionJournal trong ứng dụng DrawTogether của chúng tôi.

00:06:28.000 --> 00:06:31.000
Đây là ứng dụng DrawTogether của chúng tôi mà chúng tôi sẽ sửa đổi.

00:06:31.000 --> 00:06:37.000
Như bạn có thể thấy, chúng tôi có một số nút ở đây ở dưới cùng cho phép chúng tôi bắt đầu phiên SharePlay và nút thùng rác để đặt lại phiên.

00:06:37.000 --> 00:06:44.000
Tôi nghĩ sẽ khá tuyệt nếu chúng ta có một nút ở đây ở dưới cùng cho phép chúng ta chọn một bức ảnh mà chúng ta muốn đặt trên khung vẽ.

00:06:44.000 --> 00:06:48.000
SwiftUI giúp việc này dễ dàng bắt đầu, vì vậy hãy nhảy thẳng vào!

00:06:48.000 --> 00:06:51.000
Có bốn thành phần chính mà chúng ta cần sửa đổi.

00:06:51.000 --> 00:06:53.000
Đầu tiên, có mô hình "Canvas" của chúng tôi.

00:06:53.000 --> 00:06:57.000
Đây là đối tượng mô hình chính của chúng tôi cho toàn bộ ứng dụng.

00:06:57.000 --> 00:07:04.000
Nó theo dõi tất cả các nét của chúng tôi cho cả những người tham gia địa phương và từ xa và là giao diện của chúng tôi với GroupActivities.

00:07:04.000 --> 00:07:06.000
Sau đó, chúng tôi đã có ba quan điểm của mình.

00:07:06.000 --> 00:07:21.000
Có "ContentView" có tất cả các chế độ xem phụ cho hai chế độ xem khác của chúng tôi, chế độ xem "ControlBar", duy trì các nút ở dưới cùng mà chúng tôi đã thấy trước đó và "CanvasView", vẽ tất cả các đối tượng từ mô hình của chúng tôi cho các nét vẽ và sắp tới là hình ảnh nữa.

00:07:21.000 --> 00:07:23.000
Hãy bắt đầu với mô hình của chúng ta.

00:07:23.000 --> 00:07:25.000
Chúng ta cần cái này để theo dõi hai thứ.

00:07:25.000 --> 00:07:31.000
Đầu tiên, tất cả các hình ảnh chúng tôi nhận được từ tạp chí, mà chúng tôi sẽ theo dõi với một cấu trúc mới, "CanvasImage."

00:07:31.000 --> 00:07:37.000
Thứ hai, hình ảnh được chọn cục bộ, nếu chúng ta đang cố gắng đặt một và tất cả các hình ảnh.

00:07:37.000 --> 00:07:46.000
Bây giờ hãy làm cho Canvas tạo một "GroupSessionJournal" và xử lý tất cả các tệp đính kèm từ nó mà chúng tôi sẽ thực hiện trong chức năng configureGroupSession của mình.

00:07:46.000 --> 00:07:54.000
Và chúng tôi sẽ tạo một chức năng để thêm hình ảnh được chọn cục bộ vào tạp chí mà chúng tôi có thể gọi từ quan điểm của mình.

00:07:54.000 --> 00:08:00.000
Bây giờ chúng ta đã có tất cả các phần không phải giao diện người dùng, hãy tiếp tục và sửa đổi một số chế độ xem.

00:08:00.000 --> 00:08:03.000
Chúng ta sẽ bắt đầu với nút để chọn một bức ảnh.

00:08:03.000 --> 00:08:09.000
Nếu bạn nhớ từ trước đó, chúng tôi muốn thêm nút này vào ControlBar.

00:08:09.000 --> 00:08:21.000
Hãy tiếp tục và nhập PhotosUI và thêm một nút mới bằng chế độ xem "PhotosPicker" và đặt nó thẳng vào Mô hình với "SelectedImageData".

00:08:21.000 --> 00:08:29.000
Chúng tôi đã tiếp tục và tạo ra một chế độ xem đơn giản được gọi là PhotoPlacementView trực quan hóa bức ảnh đã được chọn và cho phép chúng tôi di chuyển nó đến nơi chúng tôi muốn trên khung vẽ.

00:08:29.000 --> 00:08:33.000
Hãy tiếp tục và thêm chế độ xem đó vào Chế độ xem Nội dung ngay bây giờ.

00:08:33.000 --> 00:08:35.000
Hãy xem sự tiến bộ của chúng ta.

00:08:35.000 --> 00:08:39.000
Chúng ta có thể bắt đầu một phiên và sau đó chúng ta nhận được nút Ảnh của mình.

00:08:39.000 --> 00:08:44.000
Hãy chọn một bức ảnh, và bam! Chúng ta có một hình ảnh mà chúng ta có thể kéo xung quanh.

00:08:44.000 --> 00:08:52.000
Bây giờ phần cuối cùng là chúng tôi sửa đổi chế độ xem "Canvas" để trực quan hóa tất cả các hình ảnh từ mô hình.

00:08:52.000 --> 00:08:59.000
Bây giờ nếu chúng ta thử nó, chúng ta có thể thấy rằng hình ảnh xuất hiện ở cả hai mặt ngay khi chúng ta chọn vị trí cuối cùng của hình ảnh.

00:08:59.000 --> 00:09:00.000
Phew.

00:09:00.000 --> 00:09:03.000
Bây giờ chúng ta đã hoàn thành và tôi nghĩ chúng ta đã có một trải nghiệm khá thú vị.

00:09:03.000 --> 00:09:05.000
Cảm ơn tất cả các bạn đã điều chỉnh.

00:09:05.000 --> 00:09:12.000
Bây giờ bạn đã xem phiên này, hãy tiếp tục và xem loại trải nghiệm tuyệt vời nào bạn có thể xây dựng với GroupActivities.

00:09:12.000 --> 00:09:19.000
Nếu bạn chưa áp dụng GroupActivities, hãy xem "Thêm SharePlay vào ứng dụng của bạn" làm phần giới thiệu về ý nghĩa của SharePlay đối với các ứng dụng.

00:09:19.000 --> 00:09:28.000
Và nếu bạn muốn xem chúng tôi đã bắt đầu như thế nào với ứng dụng DrawTogether này hoặc xem một số ví dụ về cách áp dụng GroupActivities, hãy xem "Xây dựng trải nghiệm tùy chỉnh với GroupActivities".

00:09:28.000 --> 00:09:31.000
Cảm ơn một lần nữa, và chúng tôi rất nóng lòng được xem bạn xây dựng những gì!

00:09:31.000 --> 23:59:59.000
♪ ♪

