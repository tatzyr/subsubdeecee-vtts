WEBVTT

00:00:00.000 --> 00:00:03.000
♪ Hip-hop nhạc cụ êm dịu ♪

00:00:03.000 --> 00:00:10.000
♪

00:00:10.000 --> 00:00:14.000
Xin chào, tên tôi là Jeremy, và tôi là một kỹ sư phần mềm trải nghiệm truyền thông.

00:00:14.000 --> 00:00:19.000
Bài nói chuyện này sẽ giải thích cách tạo ra trải nghiệm không gian tuyệt vời để phát lại video trong ứng dụng của bạn.

00:00:19.000 --> 00:00:27.000
Một trải nghiệm tuyệt vời được tối ưu hóa cho nền tảng, tận dụng khả năng truyền thông mạnh mẽ của nó và tích hợp với toàn bộ hệ thống.

00:00:27.000 --> 00:00:31.000
Đầu tiên, chúng ta sẽ khám phá trải nghiệm truyền thông với một ứng dụng tối thiểu.

00:00:31.000 --> 00:00:35.000
Tiếp theo, tôi sẽ xem xét một số tính năng giao diện người dùng nâng cao hơn.

00:00:35.000 --> 00:00:39.000
Sau đó, tôi sẽ xem xét một số phương pháp hiển thị video khác.

00:00:39.000 --> 00:00:42.000
Cuối cùng, tôi sẽ so sánh các lựa chọn.

00:00:42.000 --> 00:00:49.000
Nếu bạn đã sử dụng API phương tiện trên iOS hoặc tvOS, thì điều này có thể cảm thấy quen thuộc.

00:00:49.000 --> 00:00:57.000
Nền tảng này được xây dựng trên cùng một API và mở rộng chúng cho các khả năng độc đáo của nó.

00:00:57.000 --> 00:01:04.000
AVFoundation xử lý tất cả các công việc phát phim: phát trực tuyến, phân tích cú pháp, giải mã, đồng bộ hóa.

00:01:04.000 --> 00:01:13.000
Và AVKit được xây dựng trên AVFoundation và UI Frameworks, để tạo ra trải nghiệm phát lại được tùy chỉnh và tích hợp cho từng nền tảng.

00:01:13.000 --> 00:01:23.000
Trên nền tảng này, AVFoundation đã được cải tiến để hỗ trợ các định dạng phương tiện mới tận dụng các khả năng độc đáo của nó, chẳng hạn như video 3D.

00:01:23.000 --> 00:01:29.000
Tham khảo phiên này để biết thêm chi tiết về các định dạng này.

00:01:29.000 --> 00:01:42.000
AVFoundation cũng đã được cải tiến để kết xuất hiệu suất và với chất lượng cao bằng cách sử dụng RealityKit, để video có thể được kết hợp liền mạch vào thế giới xung quanh bạn và để âm thanh cũng phản hồi với thế giới xung quanh bạn.

00:01:42.000 --> 00:01:54.000
Và AVPlayerViewController của AVKit đã được mở rộng để tận dụng sức mạnh của RealityKit và các khả năng độc đáo của nền tảng để tạo ra trải nghiệm rất tinh tế.

00:01:54.000 --> 00:02:00.000
Điều này bao gồm tất cả các điều khiển phát lại mà bạn mong đợi, nhưng cũng có nhiều khả năng độc đáo.

00:02:00.000 --> 00:02:03.000
Điều gì được yêu cầu để tận dụng điều này trong ứng dụng của bạn?

00:02:03.000 --> 00:02:07.000
Đầu tiên, mục tiêu Xcode phải được xây dựng với SDK của nền tảng này.

00:02:07.000 --> 00:02:14.000
Các ứng dụng iOS tương thích được xây dựng với iOS SDK sẽ có trải nghiệm tương thích với iOS.

00:02:14.000 --> 00:02:19.000
Sử dụng AVPlayerViewController giống như bạn làm trên iOS hoặc tvOS.

00:02:19.000 --> 00:02:23.000
Và cuối cùng, trình bày bộ điều khiển chế độ xem để nó lấp đầy cửa sổ.

00:02:23.000 --> 00:02:26.000
Hãy chứng minh điều này bằng một số mã.

00:02:26.000 --> 00:02:30.000
Đầu tiên, chúng ta sẽ nhập AVFoundation và AVKit.

00:02:30.000 --> 00:02:35.000
Tiếp theo, tạo một AVPlayerViewController và kết nối một AVPlayer với nó.

00:02:35.000 --> 00:02:41.000
Sau đó, tạo một mục trình phát mới với URL nội dung và đặt nó trên trình phát.

00:02:41.000 --> 00:02:51.000
Thêm vật phẩm sau khi cài đặt trình phát trên bộ điều khiển chế độ xem có thể cải thiện hiệu suất vì trình phát sẽ hiểu nó sẽ được hiển thị như thế nào trước khi bắt đầu tải phương tiện.

00:02:51.000 --> 00:02:57.000
Sau đó, để sử dụng nó trong SwiftUI, hãy bọc mã đó trong UIViewControllerRepresentable.

00:02:57.000 --> 00:03:01.000
Chúng tôi sẽ gọi cái này là PlayerView.

00:03:01.000 --> 00:03:06.000
Sau đó, chúng tôi sẽ tạo ứng dụng của mình, mà chúng tôi sẽ gọi là MoviePlayingApp.

00:03:06.000 --> 00:03:11.000
Thêm bộ điều khiển chế độ xem, mà chúng tôi vừa xác định, để nó lấp đầy cửa sổ.

00:03:11.000 --> 00:03:15.000
Cứ như vậy, bạn đã có một ứng dụng phát phim.

00:03:15.000 --> 00:03:21.000
Nếu bạn đang nghĩ rằng mã này trông rất giống với những gì bạn sẽ viết trên các nền tảng khác của Apple, đó là bởi vì nó là như vậy.

00:03:21.000 --> 00:03:27.000
AVPlayerViewController và AVPlayer đang thực hiện rất nhiều công việc nặng nhọc nên bạn không cần phải làm vậy.

00:03:27.000 --> 00:03:32.000
Hãy để tôi cho bạn thấy trải nghiệm truyền thông một ứng dụng đơn giản như thế này.

00:03:32.000 --> 00:03:36.000
Trước khi ứng dụng được khởi chạy, chỉ cần hiển thị phòng.

00:03:36.000 --> 00:03:43.000
Khi ứng dụng khởi chạy, một màn hình lớn xuất hiện ngay phía trước và căn phòng tối đi, tạo ra một bầu không khí đẹp.

00:03:43.000 --> 00:03:49.000
Khi di chuyển, màn hình vẫn giữ nguyên vị trí và âm thanh vẫn được neo vào màn hình.

00:03:49.000 --> 00:03:54.000
Để hiển thị các điều khiển phát lại, hãy nhìn vào màn hình và nhấn.

00:03:54.000 --> 00:03:57.000
Các điều khiển nổi ngay trước video.

00:03:57.000 --> 00:04:01.000
Trong khi chơi, đừng làm gì cả và chúng sẽ tự biến mất.

00:04:01.000 --> 00:04:05.000
Hoặc làm cho chúng biến mất bằng cách nhìn vào màn hình và chạm lại.

00:04:05.000 --> 00:04:14.000
Lấy thanh cửa sổ bên dưới màn hình để định vị lại nó.

00:04:14.000 --> 00:04:18.000
Lấy góc của màn hình để thay đổi kích thước.

00:04:18.000 --> 00:04:25.000
Lưu ý rằng khi màn hình thay đổi kích thước, nó hoạt hình mượt mà và phù hợp với tỷ lệ khung hình của video.

00:04:25.000 --> 00:04:29.000
Điều chỉnh âm lượng bằng cách xoay Digital Crown.

00:04:29.000 --> 00:04:35.000
Hoặc sử dụng Digital Crown để mở một môi trường, như thế này.

00:04:35.000 --> 00:04:37.000
Tôi thích xem phim theo cách này.

00:04:37.000 --> 00:04:42.000
Bạn phải tự mình trải nghiệm điều này.

00:04:42.000 --> 00:04:48.000
Bây giờ, hãy kiểm tra các điều khiển phát lại kỹ hơn để xem các tính năng mà chúng cung cấp.

00:04:48.000 --> 00:04:50.000
Đây là giao diện người chơi của chúng tôi.

00:04:50.000 --> 00:04:55.000
Ở trên cùng bên phải là điều khiển âm lượng để điều chỉnh nhanh hoặc tắt tiếng.

00:04:55.000 --> 00:05:00.000
Như tôi đã đề cập, âm lượng cũng có thể được điều chỉnh với Digital Crown.

00:05:00.000 --> 00:05:05.000
Ở phía dưới bên trái là các nút phát/tạm dừng và quay lại/chuyển tiếp quen thuộc.

00:05:05.000 --> 00:05:09.000
Ở giữa phía dưới là máy chà sàn để nhảy đến một thời điểm khác trong phim.

00:05:09.000 --> 00:05:15.000
Và ở phía dưới bên phải là nút này với nhiều tùy chọn hơn.

00:05:15.000 --> 00:05:18.000
Đây là các tùy chọn để điều chỉnh tốc độ phát lại.

00:05:18.000 --> 00:05:29.000
Khi phim chứa nhiều bản âm thanh hoặc bản chú thích, hãy sử dụng các tùy chọn này để chọn ngôn ngữ cho bản âm thanh hoặc bật chú thích bằng ngôn ngữ ưa thích.

00:05:29.000 --> 00:05:32.000
Tùy chọn cuối cùng này là Hiệu ứng làm mờ.

00:05:32.000 --> 00:05:38.000
Tôi thích xem phim trong bóng tối để thực sự tập trung vào chúng, nhưng đôi khi video không phải là trọng tâm duy nhất của tôi.

00:05:38.000 --> 00:05:42.000
Ở đây, tôi có thể tắt Hiệu ứng làm mờ để thấy rõ hơn những gì xung quanh tôi.

00:05:42.000 --> 00:05:45.000
Chúng tôi đã đề cập đến những điều cơ bản được tích hợp sẵn.

00:05:45.000 --> 00:05:49.000
Bây giờ, hãy cùng khám phá một số tính năng nâng cao hơn.

00:05:49.000 --> 00:05:55.000
Chà hình thu nhỏ hiển thị một hình ảnh nhỏ của video trong khi chà, cho phép điều hướng nội dung liền mạch.

00:05:55.000 --> 00:06:04.000
Các điều khiển sẽ tự động hiển thị hình thu nhỏ khi xóa các luồng HLS có danh sách phát chỉ có khung hình I, còn được gọi là bản nhạc Trick Play.

00:06:04.000 --> 00:06:09.000
Các bản nhạc Trick Play nhỏ có chiều rộng 145 pixel được ưa thích hơn.

00:06:09.000 --> 00:06:15.000
Tham khảo tài liệu này để biết thêm chi tiết.

00:06:15.000 --> 00:06:21.000
Đôi khi phương tiện truyền thông cần được chèn vào dòng thời gian cho logo, bản tóm tắt hoặc quảng cáo.

00:06:21.000 --> 00:06:25.000
Hỗ trợ quảng cáo xen kẽ cho phép khả năng này.

00:06:25.000 --> 00:06:31.000
Khi quảng cáo xen kẽ có mặt, các điều khiển sẽ tự động phản ánh chúng bằng một chỉ báo trong dòng thời gian.

00:06:31.000 --> 00:06:41.000
Các quảng cáo xen kẽ này có thể được cấu hình theo chương trình với Bộ điều khiển sự kiện AVPlayerInterstital hoặc chúng có thể được mô tả trong luồng HLS.

00:06:41.000 --> 00:06:45.000
Tham khảo phiên này để biết thêm chi tiết.

00:06:45.000 --> 00:06:49.000
Có một số tùy chọn giao diện người dùng bổ sung thường được sử dụng bởi các ứng dụng phát video.

00:06:49.000 --> 00:06:55.000
Các hành động theo ngữ cảnh cho phép bạn thêm các nút như Bỏ qua phần giới thiệu hoặc Phát tập tiếp theo.

00:06:55.000 --> 00:06:58.000
Họ có thể có một tiêu đề và một hình ảnh tùy chọn.

00:06:58.000 --> 00:07:05.000
Bộ điều khiển chế độ xem thông tin tùy chỉnh có thể được sử dụng để hiển thị siêu dữ liệu về nội dung hoặc để đề xuất nội dung liên quan.

00:07:05.000 --> 00:07:09.000
Các API này hoạt động giống như trên các nền tảng khác của Apple.

00:07:09.000 --> 00:07:13.000
Tham khảo phiên này để biết thêm chi tiết.

00:07:13.000 --> 00:07:18.000
Ứng dụng của bạn cũng có thể đưa bạn đến một nơi khác với một tính năng gọi là Immersive Spaces.

00:07:18.000 --> 00:07:23.000
Khi ứng dụng của bạn tạo ra một Không gian Nhập vai, bạn có thể quyết định không gian đó trông như thế nào.

00:07:23.000 --> 00:07:35.000
Và thậm chí tốt hơn, màn hình video của bạn sẽ tự động di chuyển vào không gian đó và tự neo ở kích thước và vị trí có thể dự đoán được để đảm bảo góc nhìn tuyệt vời mọi lúc.

00:07:35.000 --> 00:07:40.000
Và các điều khiển tách ra và di chuyển đến gần hơn để giúp chúng dễ tương tác hơn.

00:07:40.000 --> 00:07:43.000
Hãy kiểm tra một số mã.

00:07:43.000 --> 00:07:46.000
Đây là MoviePlayingApp của chúng tôi từ trước đó.

00:07:46.000 --> 00:07:48.000
Đầu tiên, chúng ta sẽ thêm một Không gian Nhập vai.

00:07:48.000 --> 00:07:52.000
Nội dung 3D sẽ được mô tả bởi các thực thể RealityKit.

00:07:52.000 --> 00:07:58.000
Sau đó, chúng tôi sẽ sử dụng onAppear trên PlayerView của mình để mở không gian.

00:07:58.000 --> 00:08:02.000
Đảm bảo Không gian Nhập vai của bạn được thiết kế để chứa trình phát phim khi nó được cập bến.

00:08:02.000 --> 00:08:09.000
Để biết thêm thông tin về cách xây dựng và trình bày không gian, hãy tham khảo phiên này.

00:08:09.000 --> 00:08:15.000
AVPlayerViewController đã được tinh chỉnh và thiết kế kỹ lưỡng để có trải nghiệm tuyệt vời trên nền tảng này.

00:08:15.000 --> 00:08:18.000
Chúng tôi thực sự muốn AVPlayerViewController hoạt động cho bạn.

00:08:18.000 --> 00:08:27.000
Vì vậy, nếu có các tính năng hoặc hành vi bạn muốn đề xuất, vui lòng cung cấp phản hồi để chúng tôi có thể tiếp tục cải thiện nó cho các trường hợp sử dụng của bạn.

00:08:27.000 --> 00:08:32.000
Bây giờ, vẫn có thể có những tình huống hiếm hoi khi ai đó cần xây dựng các điều khiển phát lại tùy chỉnh.

00:08:32.000 --> 00:08:35.000
Trong trường hợp đó, vui lòng cung cấp phản hồi.

00:08:35.000 --> 00:08:39.000
Và chúng tôi khuyên bạn nên sử dụng AVPlayerViewController.

00:08:39.000 --> 00:08:43.000
Bạn có thể ẩn các điều khiển và cung cấp lớp phủ cho giao diện người dùng tùy chỉnh của mình.

00:08:43.000 --> 00:08:54.000
Điều này được ưu tiên hơn là sử dụng API cấp thấp hơn bởi vì, như chúng tôi đã chứng minh, AVPlayerViewController cung cấp rất nhiều tính năng tích hợp hệ thống ngoài các điều khiển phát lại.

00:08:54.000 --> 00:08:59.000
Và bạn sẽ tiếp tục nhận được các tính năng tích hợp hệ thống tuyệt vời.

00:08:59.000 --> 00:09:04.000
Chúng tôi đã khám phá trải nghiệm toàn màn hình của AVPlayerViewController.

00:09:04.000 --> 00:09:08.000
Bây giờ hãy xem xét một số trường hợp sử dụng khác để phát lại video.

00:09:08.000 --> 00:09:12.000
Đôi khi bạn muốn một bộ phim để phát nội tuyến trong cửa sổ.

00:09:12.000 --> 00:09:15.000
Nó có thể là một phần của tài liệu hoặc để phát bản xem trước.

00:09:15.000 --> 00:09:21.000
AVPlayerViewController nội tuyến cũng rất tốt cho tình huống này.

00:09:21.000 --> 00:09:23.000
Làm thế nào để bạn có được chế độ xem nội tuyến?

00:09:23.000 --> 00:09:27.000
Nó sẽ tự động sử dụng chế độ này bất cứ khi nào nó được hiển thị mà không cần lấp đầy cửa sổ.

00:09:27.000 --> 00:09:32.000
Các điều khiển nội tuyến của nó cũng được thiết kế lại cho hệ điều hành.

00:09:32.000 --> 00:09:40.000
Lưu ý, vì video được tổng hợp trong cửa sổ bằng AVPlayerLayer, nó sẽ không thể hiển thị video 3D.

00:09:40.000 --> 00:09:45.000
Đôi khi ứng dụng của bạn có thể muốn phát video như một thực thể của cảnh 3D.

00:09:45.000 --> 00:09:49.000
Nó có thể là một màn hình giật gân hoặc một quá trình chuyển đổi video.

00:09:49.000 --> 00:09:55.000
Trong những trường hợp này, bạn không muốn điều khiển phát lại và bạn cũng không muốn tích hợp hệ thống như kết nối.

00:09:55.000 --> 00:10:00.000
Đối với những trường hợp đó, hãy sử dụng VideoPlayerComponent của RealityKit.

00:10:00.000 --> 00:10:05.000
VideoPlayerComponent kết nối RealityKit Entity với AVPlayer.

00:10:05.000 --> 00:10:09.000
Bạn có thể định vị nó trong cảnh RealityKit của mình giống như bất kỳ thực thể nào khác.

00:10:09.000 --> 00:10:16.000
Nó tạo ra một lưới chính xác tỷ lệ khung hình cho video và nó hỗ trợ hiển thị chú thích.

00:10:16.000 --> 00:10:20.000
Bất cứ khi nào có thể, hãy thích nó hơn AVPlayerLayer.

00:10:20.000 --> 00:10:29.000
Bởi vì nó tận dụng tối ưu hóa của RealityKit cho video, nó có hiệu suất tốt hơn AVPlayerLayer và nó hỗ trợ các định dạng video 3D mới.

00:10:29.000 --> 00:10:34.000
Tham khảo phiên này để biết thêm chi tiết.

00:10:34.000 --> 00:10:40.000
Đôi khi bạn có thể muốn sử dụng video trong cảnh 3D nơi video được sử dụng như một hiệu ứng.

00:10:40.000 --> 00:10:46.000
Trong trường hợp này, bạn có thể muốn tạo hình học của riêng mình và kiểm soát nhiều hơn cách hiển thị video.

00:10:46.000 --> 00:10:52.000
VideoMaterial là một API cấp thấp hơn sẽ hiển thị video trên hình học tùy ý.

00:10:52.000 --> 00:10:58.000
Điều này có nghĩa là nó không thể đảm bảo tỷ lệ khung hình ban đầu và nó không có khả năng hiển thị chú thích.

00:10:58.000 --> 00:11:03.000
Kiểm tra cuộc nói chuyện liên quan này để biết thêm chi tiết.

00:11:03.000 --> 00:11:07.000
Chúng tôi đã nói về một số tính năng giao diện người dùng bổ sung và một số trường hợp sử dụng khác.

00:11:07.000 --> 00:11:11.000
Ứng dụng mẫu DestinationVideo thể hiện một số tính năng này.

00:11:11.000 --> 00:11:16.000
Nó có một trình duyệt video để chọn video và phát chúng trong một Không gian Nhập vai.

00:11:16.000 --> 00:11:18.000
Đây rồi.

00:11:18.000 --> 00:11:23.000
Chọn một video để hiển thị trang thông tin và một Không gian Nhập vai sẽ mở ra.

00:11:23.000 --> 00:11:28.000
Lưu ý việc sử dụng trình phát nội tuyến với các điều khiển giao diện người dùng tùy chỉnh để xem trước.

00:11:28.000 --> 00:11:32.000
Sau đó, phát phim.

00:11:32.000 --> 00:11:40.000
Giao diện người dùng trình phát xuất hiện và ngay lập tức cập bến vào Không gian nhập vai ở kích thước và vị trí cố định để xem tối ưu.

00:11:40.000 --> 00:11:54.000
Một chi tiết thú vị khác là khi màn hình được gắn vào Không gian Nhập vai như thế này, các điều khiển phát lại sẽ tách ra và đến gần hơn một chút để giúp chúng thuận tiện hơn khi tương tác.

00:11:54.000 --> 00:11:55.000
Nhấn vào nút danh sách.

00:11:55.000 --> 00:12:06.000
Ứng dụng đã cung cấp bộ điều khiển xem thông tin tùy chỉnh để hiển thị thêm thông tin về nội dung và nội dung liên quan trong khi xem video.

00:12:06.000 --> 00:12:15.000
Gần cuối video, một nút hành động theo ngữ cảnh có nhãn Phát tiếp theo xuất hiện ở góc dưới cùng bên phải.

00:12:15.000 --> 00:12:18.000
Chúng tôi đã đề cập đến trải nghiệm không gian để phát lại video.

00:12:18.000 --> 00:12:25.000
Nó có một màn hình lớn lơ lửng trong không gian trước mặt bạn với hình ảnh đẹp và âm thanh không gian tuyệt vời.

00:12:25.000 --> 00:12:32.000
Nó bao gồm các điều khiển phát lại cho mọi thứ bạn cần làm và chúng tôi đã nói về một số trường hợp sử dụng phát lại khác.

00:12:32.000 --> 00:12:35.000
Có một số cách để hiển thị video trong ứng dụng của bạn.

00:12:35.000 --> 00:12:37.000
Hãy so sánh chúng.

00:12:37.000 --> 00:12:39.000
Đây là các API để hiển thị video.

00:12:39.000 --> 00:12:42.000
Mỗi người có những khả năng khác nhau.

00:12:42.000 --> 00:12:45.000
Sử dụng API chính xác cho trải nghiệm truyền thông mà bạn cần.

00:12:45.000 --> 00:12:49.000
Đảm bảo phương tiện của bạn được hiển thị chính xác và có thể truy cập được.

00:12:49.000 --> 00:12:56.000
Đảm bảo rằng nó được tối ưu hóa cho nền tảng và cho phép các định dạng video 3D bằng cách kết xuất với RealityKit.

00:12:56.000 --> 00:13:00.000
Và đảm bảo rằng nó có các điều khiển phát lại mạnh mẽ được điều chỉnh cho nền tảng.

00:13:00.000 --> 00:13:06.000
Và đảm bảo rằng nó được tích hợp với toàn bộ hệ thống để có được trải nghiệm tuyệt vời.

00:13:06.000 --> 00:13:16.000
AVPlayerViewController sẽ cho phép ứng dụng của bạn tận dụng tối đa các tính năng bạn đã sử dụng trong các nền tảng khác của Apple và các tính năng mới, độc đáo của nền tảng này.

00:13:16.000 --> 00:13:21.000
Bạn có thể mang đến trải nghiệm phát lại phim tuyệt vời cho người dùng của mình.

00:13:21.000 --> 00:13:28.000
Khả năng truyền thông không gian đại diện cho cơ hội để mọi người trải nghiệm video theo một cách hoàn toàn mới.

00:13:28.000 --> 00:13:32.000
Để bắt đầu, hãy xem Dự án Mẫu DestinationVideo.

00:13:32.000 --> 00:13:36.000
Nó thể hiện nhiều tính năng được thảo luận ở đây.

00:13:36.000 --> 00:13:40.000
Và kiểm tra những cuộc nói chuyện liên quan này.

00:13:40.000 --> 00:13:45.000
Tôi nóng lòng chờ đợi mọi người xem bạn làm gì với những công cụ mạnh mẽ này.

00:13:45.000 --> 00:13:48.000
Nhưng bây giờ, tôi phải quay lại xem một chương trình.

00:13:48.000 --> 00:13:50.000
Tận hưởng!

00:13:50.000 --> 23:59:59.000
♪

