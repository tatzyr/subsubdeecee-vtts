WEBVTT

00:00:00.000 --> 00:00:10.000
♪ ♪

00:00:10.000 --> 00:00:12.000
Amit: Xin chào mọi người. Tên tôi là Amit.

00:00:12.000 --> 00:00:15.000
Tôi là một kỹ sư trong đội AirPlay.

00:00:15.000 --> 00:00:25.000
Chúng tôi đã tạo ra AirPlay để cho phép bạn chia sẻ không dây video, ảnh, nhạc và hơn thế nữa từ các thiết bị Apple đến các máy thu có khả năng AirPlay của bạn.

00:00:25.000 --> 00:00:36.000
Có những lúc bạn có thể muốn phát nội dung phụ từ nhiều nguồn, như phát quảng cáo, đoạn giới thiệu bản phát hành sắp tới và hơn thế nữa với nội dung chính trong ứng dụng của bạn.

00:00:36.000 --> 00:00:39.000
Nội dung thứ cấp này được gọi là quảng cáo xen kẽ.

00:00:39.000 --> 00:00:46.000
Nếu bạn quan tâm đến việc đảm bảo ứng dụng của mình có trải nghiệm người dùng AirPlay tuyệt vời cho quảng cáo xen kẽ, bạn đã điều chỉnh đúng phiên.

00:00:46.000 --> 00:00:52.000
Trong buổi nói chuyện này, chúng ta sẽ bắt đầu với một cái nhìn tổng quan nhanh về AirPlay và HLS Interstitials.

00:00:52.000 --> 00:00:59.000
Sau đó, chúng ta sẽ thảo luận về cách các hạn chế điều hướng đối với phát lại xen kẽ có thể được chuyển tiếp đến máy thu AirPlay.

00:00:59.000 --> 00:01:05.000
Sau đó chúng ta sẽ xem xét các phương pháp hay nhất để tối ưu hóa phát lại AirPlay trên tất cả các thiết bị.

00:01:05.000 --> 00:01:11.000
Chúng ta sẽ thảo luận ngắn gọn về nội địa hóa kẽ và thử nghiệm AirPlay.

00:01:11.000 --> 00:01:17.000
Cuối cùng, chúng tôi sẽ trình bày một ví dụ về việc cung cấp gói dịch vụ VOD, sử dụng quảng cáo xen kẽ HLS.

00:01:17.000 --> 00:01:22.000
Bạn có thể sử dụng AirPlay theo một trong những cách sau: AirPlay Audio.

00:01:22.000 --> 00:01:31.000
Nếu bạn có nhiều hơn một loa hỗ trợ HomePod hoặc AirPlay, bạn có thể thưởng thức âm nhạc hoặc podcast yêu thích của mình trong nhà một cách đồng bộ hoàn hảo.

00:01:31.000 --> 00:01:39.000
Để biết thêm thông tin về AirPlay Audio, bạn có thể xem phiên "Điều chỉnh trải nghiệm AirPlay Audio của bạn" của đồng nghiệp Kelly của tôi.

00:01:39.000 --> 00:01:51.000
Phản chiếu AirPlay cho phép bạn chia sẻ mọi thứ từ màn hình iOS hoặc macOS của mình như trang web, bản trình bày và bảng tính với máy thu AirPlay.

00:01:51.000 --> 00:02:03.000
AirPlay Video giúp bạn gửi video không dây để xem trên TV có khả năng AirPlay của mình, đó là máy thu Apple TV hoặc Mac hoặc TV thông minh hỗ trợ AirPlay.

00:02:03.000 --> 00:02:12.000
Đây là trải nghiệm video chất lượng cao với cả TV Apple TV hoặc TV có khả năng AirPlay, có thể hỗ trợ video HDR lên đến 4K với âm thanh vòm.

00:02:12.000 --> 00:02:20.000
Với quảng cáo xen kẽ HLS, quảng cáo được coi là tài sản riêng biệt được xác định trong dòng thời gian của tài sản truyền thông chính.

00:02:20.000 --> 00:02:25.000
Khi dòng thời gian của trình phát đa phương tiện chạm vào điểm đánh dấu, chúng ta sẽ bắt đầu phát quảng cáo xen kẽ.

00:02:25.000 --> 00:02:33.000
HLS Interstitials có thể được lên lịch dựa trên VOD hoặc nội dung chính trực tiếp mà không cần sửa đổi nội dung chính.

00:02:33.000 --> 00:02:39.000
Quảng cáo xen kẽ có thể được lên lịch động hoặc đột xuất trong quá trình phát lại.

00:02:39.000 --> 00:02:50.000
Quảng cáo xen kẽ HLS cho phép bạn ràng buộc muộn nội dung quảng cáo của mình, nơi bạn muốn quảng cáo được quyết định vì nội dung chính đang tiếp cận điểm đánh dấu quảng cáo và thậm chí liên kết lại.

00:02:50.000 --> 00:03:02.000
Ví dụ: khi mọi người điều hướng đến một phần video mà họ đã xem, sử dụng quảng cáo xen kẽ HLS, bạn có thể đảm bảo rằng họ sẽ không nhìn thấy cùng một quảng cáo nữa.

00:03:02.000 --> 00:03:07.000
Quảng cáo xen kẽ HLS cung cấp hỗ trợ tích hợp cho AirPlay và Picture in Picture.

00:03:07.000 --> 00:03:12.000
Tất cả các quảng cáo theo lịch trình và quảng cáo xen kẽ sẽ được chuyển sang phiên Airplay.

00:03:12.000 --> 00:03:18.000
HLS Interstitials có thể được sử dụng cho các dịch vụ phát trực tuyến âm thanh và video.

00:03:18.000 --> 00:03:25.000
HLS Interstitials có thể được lên lịch theo một trong hai cách: điều khiển bằng máy chủ, điều khiển máy khách.

00:03:25.000 --> 00:03:32.000
Cả hai phương pháp đều có sự giống nhau về việc thiết lập các thuộc tính để lập lịch và kiểm soát việc trình bày quảng cáo xen kẽ.

00:03:32.000 --> 00:03:40.000
Máy chủ có thể lên lịch quảng cáo xen kẽ bằng cách đặt các thẻ EXT-X-DATERANGE vào danh sách phát phương tiện của nội dung chính.

00:03:40.000 --> 00:03:48.000
Mã ứng dụng có thể sử dụng đối tượng AVPlayerInterstitialEventMonitor để theo dõi lịch trình và tiến trình của quảng cáo xen kẽ.

00:03:48.000 --> 00:03:54.000
Mã ứng dụng có thể lên lịch quảng cáo xen kẽ theo chương trình bằng cách sử dụng AVFoundation APIs.

00:03:54.000 --> 00:04:00.000
Bạn có thể tạo một sự kiện quảng cáo bằng cách tạo một đối tượng của AVPlayerInterstitialEvent.

00:04:00.000 --> 00:04:07.000
Đối tượng AVPlayerInterstitialEvent chứa tất cả thông tin cần thiết để đặt quảng cáo trên dòng thời gian vật phẩm của người chơi.

00:04:07.000 --> 00:04:14.000
Bạn có thể đặt tất cả các đối tượng của AVPlayerInterstitialEvent trên AVPlayerInterstitialEventController.

00:04:14.000 --> 00:04:23.000
AVPlayerInterstitialEventController lên lịch các sự kiện xen kẽ cho các vật phẩm do người chơi chính chơi.

00:04:23.000 --> 00:04:27.000
Đây là một ví dụ về luồng Phát lại cho VOD và nội dung Trực tiếp.

00:04:27.000 --> 00:04:37.000
Như bạn có thể thấy, chúng tôi có nội dung quảng cáo liên tiếp, đó là ad1 và ad2, cho cả trường hợp sử dụng VOD và Live.

00:04:37.000 --> 00:04:41.000
Đối với trường hợp sử dụng VOD, việc phát lại được tiếp tục tại thời điểm nó đã dừng lại.

00:04:41.000 --> 00:04:47.000
Đối với trường hợp sử dụng Trực tiếp, phát lại nhảy về phía trước theo thời gian quảng cáo tiêu thụ.

00:04:47.000 --> 00:04:53.000
Độ lệch tiếp tục của nội dung chính có thể được thiết lập bằng phương pháp do máy chủ điều khiển hoặc do máy khách điều khiển.

00:04:53.000 --> 00:05:04.000
Đối với phương thức máy chủ, độ lệch nối lại cho nội dung chính có thể đạt được bằng cách đặt thuộc tính X-RESUME-OFFSET trong thẻ EXT-DATERANGE trong Danh sách phát HLS.

00:05:04.000 --> 00:05:15.000
Đối với phương thức máy khách, độ lệch nối lại có thể được đặt bằng AVFoundation API, nghĩa là bằng cách đặt thuộc tính resumptionOffset vào AVPlayerInterstitialEvent.

00:05:15.000 --> 00:05:25.000
Để biết chi tiết về thuộc tính danh sách phát HLS và AVFoundation API cho HLS Interstitials, vui lòng tham khảo các liên kết tham khảo trong phiên này.

00:05:25.000 --> 00:05:40.000
AirPlay Video cung cấp các điều khiển tích hợp xuất hiện trên iPhone của bạn trong các ứng dụng, trên Màn hình khóa và trong Trung tâm điều khiển để bạn có thể dễ dàng phát, tạm dừng, tua nhanh, tua lại và điều chỉnh âm lượng trên TV của mình.

00:05:40.000 --> 00:05:46.000
Với AirPlay, người dùng cũng có thể sử dụng điều khiển từ xa của máy thu AirPlay để thực hiện các hành động điều khiển từ xa tương tự.

00:05:46.000 --> 00:05:55.000
Với quảng cáo xen kẽ, đôi khi vì lý do hợp đồng, bạn muốn ngăn người đăng ký của mình nhảy qua hoặc bỏ qua quảng cáo.

00:05:55.000 --> 00:06:00.000
HLS Interstitials có sẵn hỗ trợ cho các hạn chế điều hướng của người dùng.

00:06:00.000 --> 00:06:03.000
Hai hạn chế được xác định.

00:06:03.000 --> 00:06:10.000
Bỏ qua: hạn chế bỏ qua sẽ ngăn người ta phát quảng cáo với tốc độ khác với tốc độ mong muốn.

00:06:10.000 --> 00:06:14.000
Hạn chế nhảy ngăn không cho nhảy ra khỏi quảng cáo hiện tại.

00:06:14.000 --> 00:06:26.000
Một ví dụ về điều này là, nếu người xem cố gắng tìm kiếm trên nhiều hơn một quảng cáo xen kẽ, ít nhất một quảng cáo xen kẽ sẽ được phát trước khi cho phép tìm kiếm hoàn thành.

00:06:26.000 --> 00:06:36.000
Các hạn chế điều hướng được thực thi ở cấp độ giao diện người dùng của người chơi, đó là AVKit hoặc mã ứng dụng tùy chỉnh, trong khi chơi trên thiết bị hoặc bộ thu AirPlay trong khi AirPlay đang hoạt động.

00:06:36.000 --> 00:06:43.000
Các hạn chế điều hướng có thể được áp dụng trong các kết hợp sau: Bỏ qua, Nhảy, Bỏ qua &amp; Nhảy.

00:06:43.000 --> 00:06:51.000
Tương tự như tất cả các thuộc tính khác, các hạn chế điều hướng kẽ có thể được cấu hình bằng cách sử dụng hai phương pháp.

00:06:51.000 --> 00:07:04.000
Điều khiển máy chủ: để định cấu hình các hạn chế điều hướng bằng phương pháp máy chủ, Danh sách phát HLS phải đặt thuộc tính X-RESTRICT dưới thẻ EXT-X-DATERANGE.

00:07:04.000 --> 00:07:12.000
Điều khiển bởi máy khách: trong phương pháp này, mã ứng dụng sẽ đặt các hạn chế thuộc tính của đối tượng AVPlayerInterstitial.

00:07:12.000 --> 00:07:25.000
Sử dụng một trong những phương pháp ở trên, bạn có thể đảm bảo rằng các hạn chế điều hướng được thực thi đối với phát lại xen kẽ để phát lại cục bộ trên các thiết bị Apple cũng như cho phiên AirPlay trên máy thu AirPlay.

00:07:25.000 --> 00:07:28.000
Máy thu AirPlay là phần cứng riêng biệt.

00:07:28.000 --> 00:07:31.000
Người nhận có thể là thiết bị của Apple hoặc không phải của Apple.

00:07:31.000 --> 00:07:37.000
Điều đó có nghĩa là tất cả các máy thu không phải của Apple không thực thi mã AVFoundation.

00:07:37.000 --> 00:07:50.000
Một trong những câu hỏi có thể xuất hiện trong đầu bạn có thể là, ứng dụng có cần thực hiện bất kỳ thay đổi mã nào không, như định cấu hình bất kỳ thuộc tính cụ thể nào, để đảm bảo các hạn chế điều hướng trên quảng cáo xen kẽ được thực thi bởi người nhận AirPlay không?

00:07:50.000 --> 00:08:09.000
Không yêu cầu thay đổi mã, miễn là các hạn chế điều hướng được định cấu hình bằng cách sử dụng một trong các phương pháp mà chúng tôi đã thảo luận, đó là điều khiển bằng máy chủ, bằng cách đặt thuộc tính X-RESTRICT trong danh sách phát, do máy khách điều khiển, bằng cách đặt thuộc tính hạn chế của đối tượng AVPlayerInterstitialEven

00:08:09.000 --> 00:08:18.000
Hãy bắt đầu xây dựng danh sách phát để chứng minh cách áp dụng hạn chế bỏ qua bằng phương pháp máy chủ, đó là danh sách phát HLS.

00:08:18.000 --> 00:08:23.000
Chúng tôi có danh sách phát với nội dung chính là thời lượng mười giây.

00:08:23.000 --> 00:08:26.000
Chúng tôi sẽ cập nhật danh sách phát này với các quảng cáo liên tiếp.

00:08:26.000 --> 00:08:35.000
Bản cập nhật này sẽ thêm hai quảng cáo có thời lượng mười giây vào danh sách phát, sẽ bắt đầu phát sau năm giây vào nội dung chính.

00:08:35.000 --> 00:08:41.000
Vì ngày bắt đầu giống nhau trên cả hai quảng cáo, những quảng cáo này sẽ được trình bày theo thứ tự chúng xuất hiện trong danh sách phát.

00:08:41.000 --> 00:08:45.000
Đó là, trong trường hợp này, ad1 sẽ chơi trước.

00:08:45.000 --> 00:08:52.000
Sau khi phát lại quảng cáo2, trình phát sẽ tiếp tục phát lại nội dung chính nơi nó đã dừng lại.

00:08:52.000 --> 00:08:58.000
Lưu ý rằng thuộc tính X-RESTRICT được đặt để bỏ qua ID xen kẽ đầu tiên, ad1.

00:08:58.000 --> 00:09:04.000
Vì vậy, bỏ qua hạn chế điều hướng sẽ được áp dụng khi phát lại quảng cáo xen kẽ đầu tiên, đó là ad1.

00:09:04.000 --> 00:09:12.000
Tuy nhiên, nếu bạn nhận thấy không có hạn chế điều hướng - đó là thuộc tính X-RESTRICT - có trong ID xen kẽ thứ hai, đó là ad2.

00:09:12.000 --> 00:09:17.000
Thiết lập này mang lại sự linh hoạt trong việc cung cấp quảng cáo của bạn.

00:09:17.000 --> 00:09:19.000
Bây giờ hãy xem xét phương pháp hướng đến khách hàng.

00:09:19.000 --> 00:09:24.000
Để đơn giản hóa ví dụ ở đây, chúng tôi sẽ chỉ thêm một sự kiện quảng cáo, đó là ad1.

00:09:24.000 --> 00:09:32.000
Chúng tôi tạo AVPlayerInterstitialEvent với mục chính và thời gian bắt đầu của sự kiện.

00:09:32.000 --> 00:09:38.000
Sau đó, chúng tôi đặt các tùy chọn cấu hình khác nhau và đặt hạn chế bỏ qua trên ad1event.

00:09:38.000 --> 00:09:42.000
Cuối cùng, chúng tôi đặt ad1event trên bộ điều khiển.

00:09:42.000 --> 00:09:46.000
Hãy nói về cách bạn có thể tối ưu hóa phát lại AirPlay trên máy thu.

00:09:46.000 --> 00:09:49.000
AirPlay được hỗ trợ trên nhiều loại máy thu.

00:09:49.000 --> 00:09:58.000
Những máy thu này bao gồm Apple TV, hộp giải mã tín hiệu, thanh đa phương tiện, thanh âm thanh, loa thông minh và TV thông minh.

00:09:58.000 --> 00:10:05.000
Máy thu AirPlay có thể có các khả năng xử lý phần cứng, phần mềm và phương tiện khác nhau.

00:10:05.000 --> 00:10:13.000
Do sự khác biệt về khả năng xử lý phương tiện, một số máy thu AirPlay có thể bị chậm trễ chuyển đổi khi chuyển đổi giữa các tài sản phương tiện.

00:10:13.000 --> 00:10:23.000
Một trong những lý do phổ biến của sự chậm trễ chuyển đổi trên một số máy thu AirPlay là thời gian cần thiết để chuyển đổi bộ giải mã từ định dạng video này sang định dạng video khác.

00:10:23.000 --> 00:10:32.000
Do sự khác biệt về khả năng xử lý phương tiện trên một số máy thu, việc chuyển đổi giữa các bộ giải mã này có thể mất thời gian, điều này có thể gây ra sự chậm trễ chuyển đổi.

00:10:32.000 --> 00:10:43.000
Đối với trường hợp sử dụng xen kẽ, một ví dụ về điều này có thể là, tài sản chính được mã hóa bằng AVC trong khi tài sản xen kẽ được mã hóa bằng HEVC.

00:10:43.000 --> 00:10:56.000
Để giảm sự chậm trễ chuyển tiếp giữa nội dung phương tiện chính và nội dung phương tiện kẽ trên máy thu AirPlay, bạn nên tiếp tục khớp các thông số vận hành phương tiện giữa nội dung phương tiện chính và nội dung phương tiện kẽ.

00:10:56.000 --> 00:11:02.000
Đối với nội dung video, điều này bao gồm codec video, tốc độ khung hình, tỷ lệ khung hình.

00:11:02.000 --> 00:11:09.000
Đối với nội dung âm thanh, điều này bao gồm codec âm thanh, tần số lấy mẫu, độ phân giải, bố cục kênh.

00:11:09.000 --> 00:11:24.000
Để đảm bảo đồng bộ hóa trong nội dung chính hoặc xen kẽ, tất cả các đơn vị trình bày của các thành phần phương tiện, nghĩa là âm thanh, video, phụ đề, phải được đánh dấu thời gian và căn chỉnh chính xác trong thông số kỹ thuật của nhau.

00:11:24.000 --> 00:11:36.000
Đối với khách hàng của bạn có yêu cầu tăng mức độ tương tác của người đăng ký dựa trên ngôn ngữ quảng cáo xen kẽ hoặc quảng cáo, có thể chỉ định các bản âm thanh và phụ đề phù hợp cho quảng cáo xen kẽ.

00:11:36.000 --> 00:11:44.000
Nếu quảng cáo xen kẽ và nội dung chính có các bản nhạc âm thanh/phụ đề tương tự nhau, lựa chọn bản nhạc tự động sẽ được áp dụng trong khi phát quảng cáo xen kẽ.

00:11:44.000 --> 00:11:49.000
Lựa chọn tự động này được áp dụng cho các phiên phát lại và Airplay cục bộ.

00:11:49.000 --> 00:11:53.000
Không cần thay đổi mã cho việc này.

00:11:53.000 --> 00:12:00.000
Hãy thảo luận ngắn gọn về những cân nhắc bạn phải tính đến khi thử nghiệm AirPlay trong ứng dụng phát trực tuyến của mình.

00:12:00.000 --> 00:12:08.000
Để thử nghiệm video AirPlay trong ứng dụng phát trực tuyến của bạn, bạn cần xây dựng một bộ thử nghiệm với thiết bị gửi AirPlay và thiết bị thu AirPlay.

00:12:08.000 --> 00:12:14.000
Các thiết bị gửi video AirPlay bao gồm iPhone, iPad và Mac.

00:12:14.000 --> 00:12:23.000
Máy thu video AirPlay bao gồm Apple TV, Mac và hơn hàng trăm máy thu TV và TV thông minh không phải của Apple.

00:12:23.000 --> 00:12:28.000
Mỗi máy thu này khác nhau về phần cứng, phần mềm và khả năng phát lại.

00:12:28.000 --> 00:12:42.000
Khi thử nghiệm AirPlay với ứng dụng phát trực tuyến của bạn, bạn nên bắt đầu với Apple TV là bộ thu được lựa chọn, nhưng bạn nên chọn ít nhất một thiết bị từ mỗi loại máy thu AirPlay không phải của Apple.

00:12:42.000 --> 00:12:50.000
Bạn có thể phân chia thêm các thiết bị thu dựa trên khả năng xử lý phương tiện, đó là máy thu cao cấp và cấp thấp.

00:12:50.000 --> 00:13:02.000
Ví dụ: nếu dịch vụ phát trực tuyến của bạn hỗ trợ Dolby Vision, hãy bao gồm bộ thu AirPlay có khả năng Dolby Vision trong bộ thử nghiệm của bạn khi xác thực phát lại AirPlay từ ứng dụng của bạn.

00:13:02.000 --> 00:13:10.000
Ngoài ra, hãy đảm bảo bao gồm bộ thu AirPlay cấp thấp chỉ hỗ trợ âm thanh SDR và âm thanh nổi AAC.

00:13:10.000 --> 00:13:22.000
Xin lưu ý, ngay cả khi ứng dụng phát trực tuyến của bạn chỉ được nhắm mục tiêu cho một phạm vi thiết bị người gửi, ví dụ như iPhone, bạn nên xây dựng một bộ thử nghiệm chứa máy thu cao cấp và cấp thấp.

00:13:22.000 --> 00:13:30.000
Khi chọn máy thu AirPlay để kiểm tra, hãy tham khảo danh sách ngày càng tăng các thiết bị thương mại của Apple trong liên kết tham khảo của bài thuyết trình này.

00:13:30.000 --> 00:13:34.000
Chúng ta sẽ xem xét một kế hoạch VOD ví dụ.

00:13:34.000 --> 00:13:38.000
Nhà cung cấp dịch vụ trong ví dụ này muốn cung cấp ba gói dịch vụ.

00:13:38.000 --> 00:13:47.000
Kế hoạch A: Gói dịch vụ VOD với quảng cáo trong đó phát/tạm dừng là hoạt động duy nhất của người dùng được phép khi phát quảng cáo.

00:13:47.000 --> 00:13:51.000
Kế hoạch B: Kế hoạch dịch vụ VOD không có quảng cáo.

00:13:51.000 --> 00:13:59.000
Kế hoạch C: những người đăng ký đã đăng ký gói này có thể bỏ qua quảng cáo sau khi quảng cáo ban đầu kết thúc.

00:13:59.000 --> 00:14:06.000
Trong ví dụ này, nhà cung cấp dịch vụ muốn có cấu hình tối đa để hỗ trợ xen kẽ trong danh sách phát trên máy chủ.

00:14:06.000 --> 00:14:11.000
Ngoài ra, nhà cung cấp dịch vụ muốn sử dụng cùng một danh sách phát cho tất cả các gói.

00:14:11.000 --> 00:14:17.000
Chúng tôi sẽ sử dụng một danh sách phát tương tự như danh sách phát mà chúng tôi đã sử dụng để chứng minh bỏ qua các hạn chế với những thay đổi nhỏ.

00:14:17.000 --> 00:14:27.000
Trong danh sách phát này, một thẻ EXT-X-DATERANGE lên lịch hai quảng cáo, đó là ad1 và ad2, mỗi quảng cáo có thời lượng mười giây.

00:14:27.000 --> 00:14:31.000
Quảng cáo sẽ bắt đầu phát sau năm giây vào tài sản chính.

00:14:31.000 --> 00:14:36.000
Người chơi sẽ phát cả hai quảng cáo và sau đó tiếp tục phát lại tài sản chính nơi nó đã dừng lại.

00:14:36.000 --> 00:14:40.000
Hạn chế bỏ qua được đặt trên cả hai sự kiện quảng cáo.

00:14:40.000 --> 00:14:52.000
Để hỗ trợ người đăng ký đã đăng ký Gói A, đó là dịch vụ VOD có quảng cáo, không cần thay đổi mã ứng dụng vì danh sách phát đã có tất cả các quy tắc hỗ trợ quảng cáo xen kẽ.

00:14:52.000 --> 00:15:03.000
Để hỗ trợ Kế hoạch B, nghĩa là sẽ không có quảng cáo nào được phát, bạn có thể sử dụng thuộc tính AVPlayerItem sau trong mã ứng dụng: automaticallyHandlesInterstitialEvents được đặt thành false.

00:15:03.000 --> 00:15:13.000
Đặt thuộc tính này thành sai sẽ bỏ qua AVPlayerInterstitialEvents được chỉ định bởi máy chủ trong các thẻ EXT-X-DATERANGE.

00:15:13.000 --> 00:15:25.000
Để hỗ trợ Kế hoạch C, nghĩa là, những người đăng ký vào gói cụ thể này có thể bỏ qua quảng cáo sau khi quảng cáo ban đầu kết thúc, chúng tôi cần đảm bảo rằng các hạn chế đối với quảng cáo đầu tiên, đó là quảng cáo 1, được giữ lại.

00:15:25.000 --> 00:15:37.000
Các sửa đổi phải được thực hiện trong mã ứng dụng khách hàng để ghi đè thuộc tính hạn chế được đặt trên quảng cáo xen kẽ thứ hai là ad2, sao cho việc bỏ qua hạn chế sẽ bị xóa.

00:15:37.000 --> 00:15:46.000
Mã ví dụ ở đây minh họa cách mã ứng dụng có thể được sử dụng để ghi đè hạn chế điều hướng được đặt trên ad2 trong danh sách phát HLS.

00:15:46.000 --> 00:15:53.000
Đối với điều này, trước tiên chúng tôi trích xuất AVPlayerInterstitialEvent cho ad1 và ad2.

00:15:53.000 --> 00:16:00.000
Sau đó, chúng tôi tạo một bản sao của sự kiện ad2 và sau đó xóa các hạn chế điều hướng trên bản sao.

00:16:00.000 --> 00:16:10.000
Cuối cùng chúng tôi đã cập nhật bộ điều khiển với lịch trình của tất cả các sự kiện quảng cáo xen kẽ, đó là ad1Event gốc và bản sao đã sửa đổi của ad2Event.

00:16:10.000 --> 00:16:15.000
Bây giờ hãy xem các video giới thiệu để lập bản đồ trải nghiệm người đăng ký cho tất cả các gói.

00:16:15.000 --> 00:16:31.000
Mỗi bản demo đều trỏ đến cùng một danh sách phát HLS, trong đó chúng tôi có một nội dung chính, đó là "bánh quy trang trí đầu bếp" và hai quảng cáo được lên lịch trong năm giây vào nội dung chính.

00:16:31.000 --> 00:16:34.000
Chúng ta sẽ bắt đầu với bản demo của ví dụ Kế hoạch A.

00:16:34.000 --> 00:16:38.000
Chúng tôi kích hoạt video AirPlay.

00:16:38.000 --> 00:16:42.000
Đây là nội dung chính.

00:16:42.000 --> 00:16:45.000
Đây là ad1 với thời lượng 10 giây.

00:16:45.000 --> 00:16:53.000
Vì hạn chế bỏ qua được đặt bởi máy chủ trong danh sách phát HLS, người đăng ký không thể bỏ qua hoặc chuyển tiếp nhanh quảng cáo này.

00:16:53.000 --> 00:17:01.000
Đây là quảng cáo 2, cũng đã đặt hạn chế bỏ qua do người đăng ký này không thể bỏ qua hoặc chuyển tiếp quảng cáo nhanh.

00:17:01.000 --> 00:17:06.000
Nội dung chính tiếp tục từ quảng cáo bù đắp 1 đã được lên lịch.

00:17:06.000 --> 00:17:11.000
Lưu ý, bây giờ người đăng ký có thể nhảy về phía trước.

00:17:11.000 --> 00:17:24.000
Đối với bản demo thứ hai, chúng tôi thực hiện các bước tương tự như trong bản demo trước, đó là AirPlay cho TV và chúng tôi sẽ chứng minh trải nghiệm người đăng ký cho Kế hoạch B, đó là sẽ không có quảng cáo nào được phát.

00:17:24.000 --> 00:17:39.000
Chúng tôi đang sử dụng cùng một Danh sách phát HLS mà chúng tôi đã sử dụng cho bản demo trước đó, nhưng chúng tôi sẽ không thấy bất kỳ quảng cáo nào được lên lịch sau năm giây, như trong mã ứng dụng, chúng tôi đặt thuộc tính tự động Xử lýInterstitialEvents cho mục chính thành sai.

00:17:39.000 --> 00:17:50.000
Bây giờ chúng tôi chuyển sang bản demo cuối cùng của mình để chứng minh trải nghiệm người đăng ký cho Kế hoạch C - nghĩa là người đăng ký có khả năng bỏ qua quảng cáo sau khi quảng cáo ban đầu kết thúc.

00:17:50.000 --> 00:17:58.000
Chúng tôi bắt đầu với nội dung chính.

00:17:58.000 --> 00:18:07.000
Đây là quảng cáo 1 sẽ phát với tốc độ thông thường và người đăng ký không thể bỏ qua hoặc chuyển tiếp nhanh quảng cáo này.

00:18:07.000 --> 00:18:18.000
Vì chúng tôi đã xóa theo chương trình các hạn chế được đặt trên quảng cáo thứ hai, người đăng ký bây giờ sẽ có thể bỏ qua quảng cáo2, đó là một cảnh quay bằng máy bay không người lái của Los Angeles.

00:18:18.000 --> 00:18:27.000
Để tóm tắt ví dụ này, chúng tôi đã trình bày cách mã ứng dụng khách hàng có thể ghi đè các thuộc tính và cấu hình của quảng cáo xen kẽ phía máy chủ.

00:18:27.000 --> 00:18:49.000
Tùy thuộc vào gói đăng ký, mã ứng dụng khách hàng trong cùng một ứng dụng có thể cho phép AVPlayer lên lịch quảng cáo xen kẽ và thực thi các thuộc tính do máy chủ đặt trong danh sách phát HLS, ghi đè hoàn toàn bằng cách vô hiệu hóa tất cả các quảng cáo xen kẽ được định cấu hình trong danh sách phát HLS trên máy chủ, ghi đè một

00:18:49.000 --> 00:18:58.000
Để kết thúc, bạn có thể lên lịch quảng cáo xen kẽ HLS bằng cách sử dụng phương thức máy chủ hoặc trong mã ứng dụng khách hàng bằng cách sử dụng API AVFoundation.

00:18:58.000 --> 00:19:05.000
Mã ứng dụng cũng có thể ghi đè các thuộc tính và cấu hình của quảng cáo xen kẽ phía máy chủ.

00:19:05.000 --> 00:19:22.000
Để đảm bảo các hạn chế điều hướng được áp dụng cho phát lại cục bộ và cho phiên AirPlay, Danh sách phát HLS phải đặt thuộc tính X-RESTRICT trong thẻ EXT-X-DATERANGE hoặc có thể đạt được điều tương tự trong mã ứng dụng bằng cách đặt thuộc tính hạn chế của đối tượng AVPlayerInterstitialEvent.

00:19:22.000 --> 00:19:33.000
Để giảm sự chậm trễ chuyển tiếp giữa nội dung phương tiện chính và xen kẽ trên máy thu AirPlay, bạn nên tiếp tục khớp các thông số vận hành phương tiện giữa các tài sản phương tiện.

00:19:33.000 --> 00:19:40.000
Để thử nghiệm AirPlay trong ứng dụng phát trực tuyến của bạn, hãy bao gồm nhiều loại máy thu trong bộ thử nghiệm của bạn.

00:19:40.000 --> 00:19:42.000
Hy vọng bạn thấy phiên này có nhiều thông tin.

00:19:42.000 --> 23:59:59.000
Cảm ơn bạn.

