WEBVTT

00:00:00.000 --> 00:00:10.000
♪ ♪

00:00:10.000 --> 00:00:12.000
Artem: Xin chào, tên tôi là Artem.

00:00:12.000 --> 00:00:15.000
Tôi là một kỹ sư trong nhóm Thông báo Đẩy của Apple.

00:00:15.000 --> 00:00:18.000
Tôi rất vui được giới thiệu với bạn Bảng điều khiển Thông báo Đẩy.

00:00:18.000 --> 00:00:25.000
Đây là một công cụ hoàn toàn mới kết hợp một vài tính năng sẽ giúp bạn tích hợp thông báo đẩy vào ứng dụng của mình.

00:00:25.000 --> 00:00:31.000
Tôi sẽ bắt đầu bằng cách gửi một số thông báo từ bảng điều khiển, điều này có thể hữu ích cho thử nghiệm từ đầu đến cuối.

00:00:31.000 --> 00:00:36.000
Tiếp theo, tôi sẽ sử dụng tính năng nhật ký giao hàng để phân tích một số vấn đề phổ biến.

00:00:36.000 --> 00:00:43.000
Và cuối cùng, tôi sẽ giới thiệu cho bạn một số công cụ bổ sung mà bạn có thể tận dụng để làm việc với xác thực và mã thông báo thiết bị.

00:00:43.000 --> 00:00:47.000
Để bắt đầu, tôi sẽ đề cập đến một số điều cơ bản về Thông báo Đẩy.

00:00:47.000 --> 00:00:54.000
Thông báo đẩy là những tin nhắn ngắn được gửi đến thiết bị của người dùng từ một ứng dụng hoặc trang web.

00:00:54.000 --> 00:00:59.000
Chúng là một công cụ cực kỳ mạnh mẽ để mở rộng khả năng của ứng dụng của bạn.

00:00:59.000 --> 00:01:05.000
Có hàng triệu thông báo đẩy được gửi đến các thiết bị Apple mỗi giây, làm phong phú thêm trải nghiệm người dùng.

00:01:05.000 --> 00:01:12.000
Những thông báo này được gửi theo thời gian thực và được thiết kế để cung cấp cho người dùng thông tin kịp thời và có liên quan.

00:01:12.000 --> 00:01:18.000
Điều này cho phép trải nghiệm năng động hơn khi cập nhật ứng dụng của bạn.

00:01:18.000 --> 00:01:25.000
Thông báo đẩy có thể giúp tăng mức độ tương tác của người dùng và cho phép họ luôn cập nhật ứng dụng của bạn.

00:01:25.000 --> 00:01:29.000
Đây là tổng quan ngắn gọn về cách nó hoạt động.

00:01:29.000 --> 00:01:38.000
Phần phụ trợ cho phép gửi thông báo đẩy được gọi tắt là dịch vụ Thông báo Đẩy của Apple, hay viết tắt là APN.

00:01:38.000 --> 00:01:44.000
Câu chuyện về thông báo bắt đầu khi bạn nhắc người dùng cho phép thông báo từ ứng dụng của bạn.

00:01:44.000 --> 00:01:51.000
Nếu người dùng đồng ý, Mã thông báo thiết bị được tạo bởi APN và sau đó được gửi đến thiết bị.

00:01:51.000 --> 00:01:57.000
Mã thông báo đó xác định duy nhất ứng dụng của bạn trên thiết bị cụ thể đó.

00:01:57.000 --> 00:02:03.000
Thông thường mã thông báo sau đó được chuyển tiếp đến máy chủ ứng dụng của bạn để lưu trữ nó để sử dụng trong tương lai.

00:02:03.000 --> 00:02:12.000
Khi máy chủ muốn gửi thông báo đẩy, nó sẽ sử dụng mã thông báo thiết bị được lưu trữ để giải quyết thông báo thông qua APN.

00:02:12.000 --> 00:02:18.000
APNs sau đó gửi thông báo đến ứng dụng trên thiết bị bằng mã thông báo tương ứng.

00:02:18.000 --> 00:02:26.000
Lưu ý rằng mã thông báo thiết bị có thể thay đổi, vì vậy điều cần thiết là phải cập nhật chúng ở phía máy chủ để phân phối chính xác và đáng tin cậy.

00:02:26.000 --> 00:02:33.000
Bảng điều khiển Thông báo Đẩy là một công cụ hoàn toàn mới cung cấp nhiều công cụ để tương tác với APN.

00:02:33.000 --> 00:02:40.000
Nếu bạn đang phát triển một ứng dụng và thêm thông báo đẩy vào nó, bạn có thể muốn có một cách nhanh chóng để kiểm tra nó từ đầu đến cuối.

00:02:40.000 --> 00:02:43.000
Đó là nơi tính năng gửi có ích.

00:02:43.000 --> 00:02:46.000
Tôi đang phát triển ứng dụng Backyard Birds.

00:02:46.000 --> 00:02:52.000
Bây giờ là mùa xuân, và một số loài chim đang trở về từ khu vực trú đông của chúng, vì vậy tôi muốn cho người dùng biết về điều đó.

00:02:52.000 --> 00:02:55.000
Tôi sẽ tạo một thông báo mới.

00:02:55.000 --> 00:03:04.000
Đặt tên cho nó, cung cấp mã thông báo thiết bị của ứng dụng trên điện thoại và sau đó điền vào một số thuộc tính tải trọng.

00:03:04.000 --> 00:03:09.000
Tôi sẽ sử dụng tên của ứng dụng cho tiêu đề.

00:03:09.000 --> 00:03:22.000
Phụ đề sẽ ghi "Cập nhật quan trọng." Và cơ thể sẽ là thông điệp "Robins đã trở lại".

00:03:22.000 --> 00:03:30.000
Bây giờ nó đã sẵn sàng, tôi sẽ nhấp vào gửi.

00:03:30.000 --> 00:03:35.000
Khi một thiết bị nhận được một cú đẩy, nó sẽ hiển thị một thông báo.

00:03:35.000 --> 00:03:42.000
Lịch sử của các thông báo được gửi từ trang này được giữ nguyên để thuận tiện cho bạn trong thanh bên trái.

00:03:42.000 --> 00:03:46.000
Tôi muốn sử dụng lại thông báo cuối cùng, nhưng thay đổi một chút tin nhắn.

00:03:46.000 --> 00:03:53.000
Tôi sẽ sao chép tin nhắn vừa được gửi và tạo một thông báo mới.

00:03:53.000 --> 00:03:57.000
Đây, đặt tên cho nó.

00:03:57.000 --> 00:04:04.000
Và sau đó chuyển đổi công tắc này cho phép tôi nhập tải trọng ở định dạng JSON thô.

00:04:04.000 --> 00:04:18.000
Tôi sẽ chèn tải trọng mà tôi vừa sao chép và chỉ thay đổi tin nhắn sang một tin nhắn khác.

00:04:18.000 --> 00:04:25.000
Cung cấp cùng một mã thông báo Thiết bị, và sau đó gửi nó.

00:04:25.000 --> 00:04:30.000
Và thiết bị nhận được thông báo cập nhật.

00:04:30.000 --> 00:04:35.000
Bảng điều khiển cho phép bạn kiểm tra nhiều loại thông báo và các thuộc tính khác nhau.

00:04:35.000 --> 00:04:39.000
Bạn có thể chỉ định môi trường...

00:04:39.000 --> 00:04:44.000
Hãy thử các loại đẩy khác nhau...

00:04:44.000 --> 00:04:49.000
Đặt thời hạn chính xác...

00:04:49.000 --> 00:04:53.000
Hãy thử các ưu tiên khác nhau...

00:04:53.000 --> 00:05:00.000
Và gửi bất kỳ loại tải trọng nào.

00:05:00.000 --> 00:05:03.000
Tiếp theo, tôi sẽ đề cập đến tính năng Nhật ký giao hàng.

00:05:03.000 --> 00:05:11.000
Đôi khi có những tình huống không nhận được thông báo bạn gửi, khiến bạn không chắc chắn về những gì đã xảy ra với nó.

00:05:11.000 --> 00:05:14.000
Sử dụng công cụ này có thể giúp bạn phân tích những trường hợp như vậy.

00:05:14.000 --> 00:05:21.000
Khi một thông báo đi qua ngăn xếp APN, các sự kiện phản ánh quá trình giao hàng của nó sẽ được ghi lại.

00:05:21.000 --> 00:05:27.000
Và bây giờ bạn có thể truy xuất thông tin đó, sử dụng tiêu đề mới mà APNs trả về khi thông báo được gửi đi.

00:05:27.000 --> 00:05:29.000
Đây là cách nó hoạt động.

00:05:29.000 --> 00:05:36.000
Thiết bị có thể mô phỏng tình huống không nhận được thông báo bằng cách bật chế độ Công suất thấp.

00:05:36.000 --> 00:05:46.000
Sau đó, tôi vào tab Gửi và gửi lại một trong các thông báo.

00:05:46.000 --> 00:06:02.000
Tôi sẽ đặt tên cho nó, dán tải trọng, cung cấp mã thông báo thiết bị và đặt ngày hết hạn vào một lúc nào đó trong tương lai.

00:06:02.000 --> 00:06:08.000
Nhưng lần này, sau khi nhấp vào "gửi", thông báo sẽ không hiển thị trên thiết bị.

00:06:08.000 --> 00:06:19.000
Để tìm hiểu chuyện gì đã xảy ra, tôi sẽ sao chép loại ID mới mà APNs trả về trong phản hồi HTTP, "apns-unique-id".

00:06:19.000 --> 00:06:27.000
Sau khi chuyển sang tab "Nhật ký giao hàng", tôi được trình bày với một trường tìm kiếm nơi tôi có thể đặt ID mà tôi vừa sao chép.

00:06:27.000 --> 00:06:34.000
Khi tôi chạy tìm kiếm, tôi có thể xem lịch sử của thông báo khi nó di chuyển qua ngăn xếp APNs.

00:06:34.000 --> 00:06:41.000
Ở đây sự kiện cuối cùng được "lưu trữ để cân nhắc năng lượng thiết bị", điều này giải thích tại sao tin nhắn không được gửi đi.

00:06:41.000 --> 00:06:50.000
Trong trường hợp này, điện thoại ở Chế độ năng lượng thấp, vì vậy nó đã trì hoãn việc nhận một số thông báo để tiết kiệm pin.

00:06:50.000 --> 00:07:00.000
Khi chế độ Low Power bị vô hiệu hóa, thông báo sẽ được nhận và hiển thị trên thiết bị.

00:07:00.000 --> 00:07:07.000
Sau khi được giao, bản cập nhật tương ứng cũng có thể được nhìn thấy trong nhật ký giao hàng.

00:07:07.000 --> 00:07:10.000
Với công cụ này, bạn có thể phân tích nhiều tình huống khác nhau.

00:07:10.000 --> 00:07:17.000
Mỗi sự kiện lịch sử không chỉ mô tả những gì đã xảy ra, mà còn cả lý do tại sao trong chú giải công cụ tương ứng.

00:07:17.000 --> 00:07:27.000
Ví dụ, một thông báo có thể đi đến bộ nhớ APNs nếu thiết bị ngoại tuyến hoặc có thể bị loại bỏ nếu ứng dụng bị xóa khỏi thiết bị.

00:07:27.000 --> 00:07:31.000
Bạn sẽ tìm thấy nhiều ví dụ hơn khi bạn bắt đầu làm việc với công cụ.

00:07:31.000 --> 00:07:37.000
Tính năng này cũng có sẵn cho các thông báo được gửi qua APNs API thông thường.

00:07:37.000 --> 00:07:43.000
Bạn cần ghi lại "apns-unique-id" từ phản hồi của APN để có thể truy vấn thông tin này.

00:07:43.000 --> 00:07:54.000
Và đối với các thông báo được gửi từ Bảng điều khiển, không cần phải chuyển sang tab "nhật ký giao hàng", thông tin tương tự có sẵn trên chính trang Gửi.

00:07:54.000 --> 00:08:07.000
Khi bạn tích hợp ứng dụng của mình với APNs, bạn sẽ làm việc với các loại mã thông báo khác nhau được sử dụng để xác thực và gửi thông báo, và bảng điều khiển cũng cung cấp nhiều công cụ tiện dụng để giúp bạn làm việc với chúng.

00:08:07.000 --> 00:08:10.000
Hãy đề cập đến xác thực trước.

00:08:10.000 --> 00:08:18.000
Có hai loại xác thực với APN: dựa trên chứng chỉ và dựa trên mã thông báo.

00:08:18.000 --> 00:08:26.000
Xác thực dựa trên chứng chỉ dựa trên chứng chỉ SSL để thiết lập kết nối đáng tin cậy giữa máy chủ của bạn và APN.

00:08:26.000 --> 00:08:33.000
Bạn cần tạo và quản lý chứng chỉ cho từng ứng dụng và môi trường trong cổng thông tin Nhà phát triển Apple.

00:08:33.000 --> 00:08:40.000
Hãy nhớ rằng chứng chỉ hết hạn và cần được gia hạn định kỳ.

00:08:40.000 --> 00:08:49.000
Xác thực dựa trên mã thông báo sử dụng Mã thông báo web JSON để xác thực an toàn và hiệu quả giữa máy chủ nhà cung cấp của bạn và APN.

00:08:49.000 --> 00:08:55.000
Nó yêu cầu tạo mã thông báo được ký bằng khóa riêng được liên kết với tài khoản Nhà phát triển Apple của bạn.

00:08:55.000 --> 00:08:59.000
Khóa riêng tư không hết hạn như chứng chỉ.

00:08:59.000 --> 00:09:05.000
Là một phần của Bảng điều khiển Thông báo Đẩy, giờ đây có một công cụ có thể tạo mã thông báo xác thực cho bạn.

00:09:05.000 --> 00:09:13.000
Tất cả những gì bạn cần làm là cung cấp một khóa riêng tư, được lấy từ cổng thông tin dành cho nhà phát triển...

00:09:13.000 --> 00:09:16.000
Và ID khóa liên quan.

00:09:16.000 --> 00:09:21.000
Sau khi cung cấp những phần này, một mã thông báo mới sẽ được tạo ra.

00:09:21.000 --> 00:09:25.000
Sau đó, bạn có thể sử dụng nó để xác thực các yêu cầu của mình đối với APN.

00:09:25.000 --> 00:09:32.000
Hãy nhớ rằng thời hạn hiệu lực của các mã thông báo này không được vượt quá một giờ, vì vậy chúng cần được luân chuyển định kỳ.

00:09:32.000 --> 00:09:36.000
Và khi bạn tạo mã thông báo, khóa của bạn sẽ không được tải lên ở bất cứ đâu.

00:09:36.000 --> 00:09:40.000
Nó chỉ được sử dụng trong trình duyệt của bạn, vì vậy thông tin cá nhân của bạn được giữ nguyên.

00:09:40.000 --> 00:09:48.000
Nếu bạn đã có mã thông báo, nhưng nghĩ rằng nó có thể không hoạt động, bạn có thể tận dụng một công cụ khác, trình xác thực mã thông báo xác thực.

00:09:48.000 --> 00:09:56.000
Tôi sẽ lấy mã thông báo mà tôi vừa tạo, và sau đó dán nó vào công cụ xác thực.

00:09:56.000 --> 00:10:06.000
Ở đây, tôi nhận lại kết quả xác thực, kết quả này sẽ xác nhận rằng mã thông báo hợp lệ, như trong trường hợp này, hoặc cung cấp cho bạn lý do tại sao nó không hợp lệ.

00:10:06.000 --> 00:10:19.000
Ví dụ: khi tôi cung cấp mã thông báo mà tôi đã sử dụng cách đây một thời gian, kết quả xác thực cho tôi biết rằng yêu cầu "được cấp tại" quá cũ, điều đó có nghĩa là mã thông báo đã hết hạn.

00:10:19.000 --> 00:10:22.000
Và cuối cùng, có trình xác thực Mã thông báo Thiết bị.

00:10:22.000 --> 00:10:29.000
Như bạn nhớ, các mã thông báo này được sử dụng để chỉ định người nhận khi bạn gửi thông báo.

00:10:29.000 --> 00:10:33.000
Chúng được gắn với một môi trường bê tông và kiểu đẩy.

00:10:33.000 --> 00:10:40.000
Khi bạn nhập mã thông báo, bạn sẽ nhận được phản hồi cho bạn biết môi trường và loại đẩy mà mã thông báo hợp lệ, nếu có.

00:10:40.000 --> 00:10:50.000
Ví dụ: khi tôi cung cấp mã thông báo đã được sử dụng trong bản trình diễn trước đó, chúng ta có thể thấy rằng nó hợp lệ cho các loại đẩy Cảnh báo &amp; Nền và môi trường Phát triển.

00:10:50.000 --> 00:10:59.000
Hy vọng rằng bạn sẽ thích sử dụng các tính năng này và thấy việc tích hợp Thông báo Đẩy vào ứng dụng của mình dễ dàng hơn, cung cấp cho mọi người chức năng thú vị mới.

00:10:59.000 --> 00:11:01.000
Bắt đầu ngay hôm nay.

00:11:01.000 --> 00:11:04.000
Gửi thông báo đẩy để kiểm tra tích hợp từ đầu đến cuối.

00:11:04.000 --> 00:11:09.000
Kiểm tra nhật ký giao hàng và hiểu rõ hơn về quy trình giao hàng.

00:11:09.000 --> 00:11:14.000
Xác thực mã thông báo của bạn và tạo mã thông báo mới, tất cả đều từ bảng điều khiển.

00:11:14.000 --> 00:11:23.000
Để biết thêm thông tin về việc triển khai thông báo đẩy trên máy khách, hãy xem video "Thông báo đẩy" từ WWDC20.

00:11:23.000 --> 00:11:25.000
Cảm ơn vì đã xem.

00:11:25.000 --> 23:59:59.000
♪ ♪

