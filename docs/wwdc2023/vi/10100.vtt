WEBVTT

00:00:00.000 --> 00:00:03.000
♪ Hip-hop nhạc cụ êm dịu ♪

00:00:03.000 --> 00:00:10.000
♪

00:00:10.000 --> 00:00:14.000
Xin chào, tên tôi là Roy, và tôi là một kỹ sư trong nhóm Hiệu suất.

00:00:14.000 --> 00:00:19.000
Hôm nay, chúng ta sẽ tìm hiểu cách bạn có thể tối ưu hóa ứng dụng của mình cho điện toán không gian.

00:00:19.000 --> 00:00:25.000
Đầu tiên chúng ta sẽ xem xét các khía cạnh độc đáo của nền tảng mới này về hiệu suất và sức mạnh.

00:00:25.000 --> 00:00:31.000
Sau đó chúng tôi sẽ xem xét việc xây dựng một kế hoạch hiệu suất, bắt đầu bằng việc lập hồ sơ ứng dụng của bạn.

00:00:31.000 --> 00:00:39.000
Và cuối cùng, chúng ta sẽ tham quan những cách tốt nhất để tối ưu hóa các vấn đề về hiệu suất cho nền tảng này.

00:00:39.000 --> 00:00:44.000
Vậy điều gì làm cho tính toán không gian khác biệt về sức mạnh và hiệu suất?

00:00:44.000 --> 00:00:51.000
Đối với một người, nội dung trên màn hình luôn được cập nhật, bất kể cập nhật ứng dụng.

00:00:51.000 --> 00:00:57.000
Bất cứ khi nào mọi người di chuyển cơ thể, bàn tay hoặc mắt của họ, nội dung cần được cập nhật.

00:00:57.000 --> 00:01:04.000
Điều này có nghĩa là hệ thống luôn hiển thị mọi khung hình mọi lúc.

00:01:04.000 --> 00:01:17.000
Nền tảng cũng luôn chạy các thuật toán không gian để tạo hình ảnh và tương tác trên mọi ứng dụng và có thể chạy nhiều ứng dụng cùng một lúc.

00:01:17.000 --> 00:01:20.000
Mọi người sẽ sử dụng ứng dụng của bạn với các ứng dụng khác.

00:01:20.000 --> 00:01:28.000
Để xử lý đa nhiệm và hệ thống bổ sung hoạt động, hãy tối ưu hóa việc sử dụng tài nguyên ứng dụng của riêng bạn nhiều nhất có thể.

00:01:28.000 --> 00:01:35.000
Để mang lại trải nghiệm người dùng tuyệt vời, hiệu suất trong ứng dụng của bạn là điều cần thiết.

00:01:35.000 --> 00:01:45.000
Mọi người muốn các ứng dụng phản hồi ngay lập tức với đầu vào và cung cấp các bản cập nhật trực quan mượt mà để có cảm giác đắm chìm và thoải mái.

00:01:45.000 --> 00:01:52.000
Hãy nói về cách lập hồ sơ và phân tích ứng dụng của bạn cho các vấn đề về hiệu suất.

00:01:52.000 --> 00:01:58.000
Bạn có thể đã quen thuộc với các chỉ số hiệu suất từ các nền tảng khác của Apple.

00:01:58.000 --> 00:02:06.000
Trên bất kỳ nền tảng nào, mọi người muốn các ứng dụng khởi chạy nhanh chóng, tránh hao mòn đĩa và không sử dụng quá nhiều pin.

00:02:06.000 --> 00:02:11.000
Họ cũng muốn các ứng dụng tránh chấm dứt do sử dụng bộ nhớ không hiệu quả.

00:02:11.000 --> 00:02:17.000
Với tính toán không gian, một số chỉ số này mang ý nghĩa mới.

00:02:17.000 --> 00:02:18.000
Nắm quyền lực.

00:02:18.000 --> 00:02:25.000
Người dùng muốn các ứng dụng được tối ưu hóa về năng lượng, không phải cho thời lượng pin, mà vì áp suất nhiệt.

00:02:25.000 --> 00:02:36.000
Để duy trì hiệu suất tuyệt vời, các ứng dụng cần được tối ưu hóa cho việc sử dụng năng lượng của hệ thống, để giảm khả năng gặp phải áp suất nhiệt.

00:02:36.000 --> 00:02:38.000
Treo cổ là một ví dụ khác.

00:02:38.000 --> 00:02:44.000
Chúng xảy ra khi luồng chính của ứng dụng bị đình trệ khi làm việc trong một khoảng thời gian.

00:02:44.000 --> 00:02:51.000
Nhưng trên nền tảng này, ngay cả những gian hàng nhỏ, nhất thời cũng làm gián đoạn khả năng phản hồi.

00:02:51.000 --> 00:02:54.000
Bây giờ hãy xem xét kết xuất.

00:02:54.000 --> 00:03:02.000
Trên các nền tảng khác, bạn có thể tối ưu hóa hiệu suất kết xuất chủ yếu để cung cấp giao diện người dùng mượt mà và hoạt ảnh 3D.

00:03:02.000 --> 00:03:12.000
Nhưng ở đây, hiệu suất kết xuất cũng rất cần thiết cho nội dung tĩnh, vì hệ thống luôn kết xuất.

00:03:12.000 --> 00:03:17.000
Tất cả các nền tảng của Apple đều cung cấp các công cụ để lập hồ sơ các chỉ số này.

00:03:17.000 --> 00:03:23.000
Hôm nay, chúng tôi sẽ đề cập đến việc tìm kiếm các vấn đề về hiệu suất dành riêng cho các ứng dụng điện toán không gian.

00:03:23.000 --> 00:03:34.000
Nhưng để tìm hiểu thêm về việc tối ưu hóa các chỉ số này trên bất kỳ nền tảng nào của Apple, hãy xem phiên "Hướng dẫn sinh tồn hiệu suất ứng dụng tối ưu".

00:03:34.000 --> 00:03:42.000
Để tối ưu hóa ứng dụng của bạn, hãy lập hồ sơ trong quá trình phát triển bằng cách sử dụng các công cụ như Công cụ và Máy đo Xcode.

00:03:42.000 --> 00:03:49.000
Khi ứng dụng của bạn được phát hành, hãy thu thập thêm dữ liệu từ hiện trường để giúp bạn tối ưu hóa hơn nữa ứng dụng của mình.

00:03:49.000 --> 00:03:54.000
Hãy nói nhiều hơn về hồ sơ trong quá trình phát triển.

00:03:54.000 --> 00:04:03.000
RealityKit Trace là một mẫu hoàn toàn mới trong Instruments để giúp lập hồ sơ bất kỳ ứng dụng điện toán không gian nào về hiệu suất và sức mạnh.

00:04:03.000 --> 00:04:14.000
Đây là một công cụ đáng kinh ngạc có thể giúp xác định khi nào ứng dụng của bạn có hiệu suất kết xuất kém hoặc khi nào nó gây ra việc sử dụng năng lượng hệ thống cao.

00:04:14.000 --> 00:04:18.000
Có rất nhiều mẫu nhạc cụ khác mà bạn cũng có thể sử dụng.

00:04:18.000 --> 00:04:26.000
Để tìm hiểu thêm và khám phá mẫu mới này đang hoạt động, hãy xem phiên "Gặp gỡ RealityKit Trace".

00:04:26.000 --> 00:04:31.000
Hiệu suất và sức mạnh của ứng dụng của bạn phụ thuộc vào cách ai đó tương tác với nó.

00:04:31.000 --> 00:04:39.000
Trình mô phỏng không thực hiện công việc giống như một thiết bị thực, vì vậy dữ liệu hiệu suất của nó có thể không chính xác.

00:04:39.000 --> 00:04:41.000
Hồ sơ trong thiết bị.

00:04:41.000 --> 00:04:50.000
Hồ sơ sử dụng các tương tác khác nhau trong ứng dụng của bạn khi phát âm thanh hoặc video hoặc khi sử dụng các công nghệ như FaceTime và Personas.

00:04:50.000 --> 00:04:57.000
Đảm bảo kiểm tra hiệu suất tốt và công suất hệ thống thấp trong vài phút sử dụng.

00:04:57.000 --> 00:05:04.000
Cuối cùng, hãy thử lập hồ sơ trong khi các ứng dụng khác cũng đang chạy và sử dụng tài nguyên.

00:05:04.000 --> 00:05:14.000
Nếu bạn đang mang đến các ứng dụng iPad và iPhone tương thích, hãy đảm bảo lập hồ sơ chúng trên thiết bị để xác định các tối ưu hóa cần thiết hơn nữa.

00:05:14.000 --> 00:05:20.000
Sau khi phát triển, mọi người có thể chạy ứng dụng của bạn trong nhiều điều kiện khác nhau.

00:05:20.000 --> 00:05:27.000
Dữ liệu từ hiện trường là một cách tuyệt vời để tìm ra các vấn đề mà mọi người đang thực sự gặp phải.

00:05:27.000 --> 00:05:35.000
Khi ứng dụng của bạn đang trong giai đoạn thử nghiệm hoặc được phát hành công khai, hãy sử dụng MetricKit để nhận báo cáo chẩn đoán từ người dùng.

00:05:35.000 --> 00:05:47.000
Xcode Organizer cung cấp dữ liệu hiệu suất tổng hợp từ các thiết bị của người dùng đồng ý, bao gồm chẩn đoán năng lượng để giúp tìm ra bất kỳ vấn đề năng lượng nào.

00:05:47.000 --> 00:05:55.000
Tất cả dữ liệu bạn thu thập này giúp bạn tìm ra các nút thắt cổ chai và ưu tiên công việc hiệu suất cho ứng dụng của mình.

00:05:55.000 --> 00:06:00.000
Bây giờ, hãy nói về việc tối ưu hóa ứng dụng điện toán không gian của bạn.

00:06:00.000 --> 00:06:04.000
Các vấn đề về hiệu suất có thể phát sinh từ nhiều lĩnh vực.

00:06:04.000 --> 00:06:19.000
Hôm nay, chúng tôi sẽ đề cập đến các chiến lược để tối ưu hóa một số lĩnh vực cốt lõi: kết xuất, đầu vào của người dùng, ARKit, phát lại âm thanh và video, SharePlay và chấm dứt ứng dụng do áp lực hệ thống.

00:06:19.000 --> 00:06:26.000
Hiệu suất kết xuất tuyệt vời là một trong những ưu tiên hàng đầu cho trải nghiệm người dùng tuyệt vời.

00:06:26.000 --> 00:06:28.000
Hãy đi sâu vào.

00:06:28.000 --> 00:06:37.000
Trong nền tảng này, đường ống kết xuất bắt đầu với ứng dụng của bạn, ứng dụng này chịu trách nhiệm cập nhật nội dung ứng dụng của bạn.

00:06:37.000 --> 00:06:45.000
Giống như tất cả các nền tảng của Apple, giao diện ứng dụng của bạn được cập nhật trên luồng chính và phải cung cấp các bản cập nhật kịp thời.

00:06:45.000 --> 00:06:55.000
Vì ứng dụng của bạn được hiển thị trong không gian 3D cùng với các ứng dụng khác, các bản cập nhật của nó sẽ được gửi đến máy chủ kết xuất hệ thống.

00:06:55.000 --> 00:07:05.000
Máy chủ kết xuất liên tục chạy để xử lý các bản cập nhật từ các ứng dụng, đầu vào của người dùng và từ không gian và môi trường xung quanh họ.

00:07:05.000 --> 00:07:12.000
Nó hiển thị một khung mới với tất cả các bản cập nhật này và gửi nó đến bộ tổng hợp.

00:07:12.000 --> 00:07:15.000
Bộ tổng hợp luôn hiển thị.

00:07:15.000 --> 00:07:21.000
Nó cung cấp các khung hình mới cho màn hình với tốc độ phù hợp với tốc độ làm mới của màn hình.

00:07:21.000 --> 00:07:24.000
Điều này giúp mang lại trải nghiệm thoải mái.

00:07:24.000 --> 00:07:31.000
Tốc độ này thường là 90 khung hình một giây, nhưng có thể cao hơn.

00:07:31.000 --> 00:07:40.000
Trong khi bộ tổng hợp cập nhật màn hình một cách nhất quán, trải nghiệm người dùng tuyệt vời vẫn cần cập nhật trực quan nhanh chóng từ ứng dụng của bạn.

00:07:40.000 --> 00:07:50.000
Nếu ứng dụng của bạn có nội dung hoặc cập nhật mất quá nhiều thời gian để kết xuất, máy chủ kết xuất có thể bỏ lỡ thời hạn kết xuất để có độ trễ kết xuất tối ưu.

00:07:50.000 --> 00:07:59.000
Điều này có nghĩa là hình ảnh ứng dụng có thể đã đến trình tổng hợp trên khung Y, nhưng thay vào đó lại xuất hiện trên khung Y+1.

00:07:59.000 --> 00:08:07.000
Điều này làm trì hoãn các cập nhật trực quan mà mọi người nhìn thấy trên màn hình và làm cho ứng dụng của bạn cảm thấy ít phản hồi hơn.

00:08:07.000 --> 00:08:14.000
Các gian hàng kết xuất đặc biệt nghiêm trọng thậm chí có thể khiến ứng dụng của bạn bị chấm dứt.

00:08:14.000 --> 00:08:28.000
Cho dù ứng dụng của bạn được xây dựng trên SwiftUI, UIKit, RealityKit hay Metal, bạn muốn tối ưu hóa nội dung và cập nhật của nó để giảm giảm tải khung hình và công việc được thực hiện trong máy chủ kết xuất.

00:08:28.000 --> 00:08:33.000
Hãy bắt đầu với việc tối ưu hóa việc sử dụng SwiftUI và UIKit.

00:08:33.000 --> 00:08:40.000
Trên nền tảng này, hệ thống hiển thị hoạt động cho nội dung giao diện người dùng tĩnh, ngay cả khi không có bản cập nhật ứng dụng.

00:08:40.000 --> 00:08:44.000
Công việc kết xuất này có thể tăng lên từ việc thấu chi.

00:08:44.000 --> 00:08:50.000
Sự thấu chi xảy ra khi bạn có nội dung mờ trước nội dung ảo khác.

00:08:50.000 --> 00:09:04.000
GPU phải làm việc để hiển thị cả hai nội dung, nhưng nếu nội dung mờ đó hoàn toàn mờ đục, GPU sẽ không cần hiển thị bất kỳ giao diện người dùng nào đằng sau nó.

00:09:04.000 --> 00:09:11.000
Nếu bạn có bất kỳ chế độ xem giao diện người dùng chồng chéo nào với độ lệch Z, hãy tránh thêm độ trong mờ cho chúng.

00:09:11.000 --> 00:09:20.000
Ngoài ra, càng có nhiều điểm ảnh trên màn hình mà giao diện người dùng ứng dụng của bạn chiếm, càng có nhiều công việc được thực hiện để hiển thị cửa sổ.

00:09:20.000 --> 00:09:24.000
Cân nhắc giảm kích thước mặc định của chúng.

00:09:24.000 --> 00:09:37.000
Các bản vẽ lại giao diện người dùng trong máy chủ kết xuất thường được kích hoạt bởi các bản cập nhật ứng dụng, nhưng trên nền tảng này, chúng cũng được kích hoạt bởi sự mở rộng nội dung động của các lớp hoạt hình cốt lõi.

00:09:37.000 --> 00:09:49.000
Với hành vi này, độ phân giải của văn bản hoặc nội dung giao diện người dùng dựa trên vectơ thay đổi dựa trên nơi người dùng đang tìm kiếm để cho phép hình ảnh sắc nét hơn.

00:09:49.000 --> 00:09:59.000
Điều này cũng có thể dẫn đến việc vẽ lại nội dung giao diện người dùng thường xuyên hơn ở quy mô cao hơn, ngay cả khi không có bản cập nhật ứng dụng.

00:09:59.000 --> 00:10:10.000
SwiftUI và UIKit cho phép hành vi này theo mặc định, nhưng các ứng dụng thực hiện kết xuất Core Animation hoặc Core Graphics tùy chỉnh có thể chọn tham gia hành vi này.

00:10:10.000 --> 00:10:19.000
Để tìm hiểu thêm về lợi ích thị giác và sự đánh đổi của nó, hãy xem phiên "Khám phá kết xuất cho điện toán không gian".

00:10:19.000 --> 00:10:23.000
Chi phí của những bản vẽ lại này bị ảnh hưởng nặng nề bởi các đường chuyền kết xuất ngoài màn hình.

00:10:23.000 --> 00:10:29.000
Điều này có thể được gây ra bởi các hiệu ứng hình ảnh như bóng, mờ và mặt nạ.

00:10:29.000 --> 00:10:34.000
Giảm các hiệu ứng này để giúp hệ thống hiển thị ứng dụng của bạn dễ dàng hơn.

00:10:34.000 --> 00:10:40.000
Để giảm thiểu việc vẽ lại trong ứng dụng của bạn, hãy tránh các bản cập nhật xem không cần thiết bất cứ khi nào có thể.

00:10:40.000 --> 00:10:44.000
Ví dụ, với SwiftUI, sử dụng @Observable.

00:10:44.000 --> 00:10:51.000
@Observable cung cấp theo dõi thay đổi chi tiết hơn và giảm các cập nhật bố cục không cần thiết.

00:10:51.000 --> 00:10:58.000
Tiếp theo, hãy nói về việc tối ưu hóa kết xuất 3D với RealityKit.

00:10:58.000 --> 00:11:03.000
SwiftUI đã thêm RealityView trong năm nay cho điện toán không gian.

00:11:03.000 --> 00:11:10.000
Nó có thể hiển thị nguyên bản các cảnh RealityKit 3D trong hệ thống phân cấp SwiftUI.

00:11:10.000 --> 00:11:18.000
Ứng dụng của bạn phải là một công dân tốt trên nền tảng bằng cách tối ưu hóa các cảnh 3D của bạn cho tất cả các tính năng RealityKit này.

00:11:18.000 --> 00:11:27.000
Trong những cảnh 3D này, sự phức tạp của các tài sản mà chúng chứa có thể làm tăng đáng kể số lượng công việc máy chủ kết xuất được thực hiện mỗi khung hình.

00:11:27.000 --> 00:11:31.000
Vì vậy, hãy bắt đầu bằng cách tối ưu hóa các tài sản này.

00:11:31.000 --> 00:11:37.000
Reality Composer Pro giúp bạn tạo các cảnh RealityKit từ tài sản.

00:11:37.000 --> 00:11:50.000
Từ kết xuất lưới, hạt, hoạt ảnh, vật lý và công việc âm thanh, công cụ này cung cấp số liệu thống kê về toàn bộ cảnh có thể giúp bạn hiểu tác động hiệu suất của nó.

00:11:50.000 --> 00:11:58.000
Khi kiểm tra các số liệu thống kê này, những con số thấp hơn thường có nghĩa là ít công việc hơn, điều này có thể cải thiện hiệu suất kết xuất.

00:11:58.000 --> 00:12:10.000
Xem phiên "Tạo mô hình 3D cho trải nghiệm không gian Quick Look" để tìm hiểu thêm về các phương pháp hay nhất cho hình ảnh và sử dụng năng lượng của tài sản 3D.

00:12:10.000 --> 00:12:15.000
Kết xuất lưới nói riêng là một phần cốt lõi của kết xuất 3D.

00:12:15.000 --> 00:12:21.000
Các mắt lưới và vật liệu phức tạp có thể nhanh chóng trở thành tắc nghẽn hiệu suất.

00:12:21.000 --> 00:12:24.000
Tối ưu hóa hình dạng của tài sản lưới của bạn.

00:12:24.000 --> 00:12:30.000
Giảm số lượng các bộ phận lưới riêng biệt bằng cách kết hợp các bộ phận có chung vật liệu.

00:12:30.000 --> 00:12:36.000
Hình học lưới với số lượng tam giác và đỉnh cao cũng có thể tốn kém.

00:12:36.000 --> 00:12:39.000
Sử dụng tài sản với số lượng nhỏ hơn khi cần thiết.

00:12:39.000 --> 00:12:43.000
Giảm thiểu tác động của việc thấu chi bằng lưới 3D của bạn.

00:12:43.000 --> 00:12:49.000
Để làm điều này, hãy sử dụng tính minh bạch một cách tiết kiệm giống như với nội dung giao diện người dùng.

00:12:49.000 --> 00:13:00.000
Vật liệu "Dựa trên vật lý" trong Reality Composer Pro có ánh sáng môi trường, được tối ưu hóa tốt và hoạt động tốt nhất cho các mắt lưới có độ trong suốt tối thiểu.

00:13:00.000 --> 00:13:12.000
Nhưng đối với nội dung mờ hoặc rất lớn, hãy cân nhắc sử dụng vật liệu Tùy chỉnh với bề mặt không sáng, Sử dụng kết cấu ánh sáng nướng hoặc hình ảnh rẻ hơn khác.

00:13:12.000 --> 00:13:18.000
Điều này giúp tránh các tắc nghẽn tiềm ẩn với các tính toán ánh sáng đắt tiền hơn.

00:13:18.000 --> 00:13:26.000
Để được hướng dẫn thêm về việc xây dựng và sử dụng vật liệu trong RealityKit, hãy xem hai phiên này.

00:13:26.000 --> 00:13:30.000
Có nội dung được tối ưu hóa để kết xuất thời gian chạy là một khởi đầu tuyệt vời.

00:13:30.000 --> 00:13:37.000
Nhưng bạn thậm chí còn có thể làm nhiều hơn để tối ưu hóa ứng dụng của mình với RealityKit.

00:13:37.000 --> 00:13:46.000
Khi ứng dụng của bạn cập nhật nội dung RealityKit, các bản cập nhật sẽ được gửi đến máy chủ kết xuất, máy chủ này sẽ áp dụng và hiển thị chúng.

00:13:46.000 --> 00:13:52.000
Nhưng quá nhiều bản cập nhật trong một khoảng thời gian ngắn có thể trở thành nút thắt cổ chai cho máy chủ kết xuất.

00:13:52.000 --> 00:13:59.000
Ví dụ, ứng dụng của bạn có thể đang nhanh chóng tạo và phá hủy các thực thể RealityKit.

00:13:59.000 --> 00:14:10.000
Nó có thể có quá nhiều hình ảnh động phức tạp, đang cập nhật quá nhiều chế độ xem SwiftUI hoặc nó có thể đang tải nhiều nội dung trong một khung hình duy nhất.

00:14:10.000 --> 00:14:15.000
Tạo các thực thể trước, và ẩn hoặc hiển thị chúng khi cần thiết.

00:14:15.000 --> 00:14:21.000
Bạn có thể xóa và thêm chúng vào hệ thống phân cấp cảnh hoặc sử dụng cờ isEnabled.

00:14:21.000 --> 00:14:28.000
Giảm thiểu số lượng thực thể được cập nhật bằng cách làm phẳng hệ thống phân cấp thực thể lưới của bạn.

00:14:28.000 --> 00:14:37.000
Đối với hoạt ảnh dựa trên mã, hãy xem xét tỷ lệ cập nhật thấp hơn hoặc giảm số lượng thực thể mà hoạt ảnh cập nhật.

00:14:37.000 --> 00:14:44.000
Và khi cập nhật các thực thể RealityKit, tránh vô tình kích hoạt vẽ lại SwiftUI quá mức.

00:14:44.000 --> 00:14:54.000
Khi sử dụng tệp đính kèm, hãy đảm bảo tối ưu hóa kết xuất của chúng giống như cách bạn tối ưu hóa cho tất cả nội dung SwiftUI.

00:14:54.000 --> 00:14:59.000
Tải các nội dung phức tạp cũng có thể kích hoạt các bản cập nhật kết xuất đắt tiền.

00:14:59.000 --> 00:15:05.000
Các tài sản phức tạp cũng có thể góp phần vào thời gian khởi chạy ứng dụng và tải nội dung cao.

00:15:05.000 --> 00:15:15.000
Sử dụng API tải không đồng bộ trong thời gian chạy để tránh chặn luồng chính và tải tài sản tốt trước khi chúng cần thiết.

00:15:15.000 --> 00:15:22.000
Các thực thể sử dụng cùng một tài sản cũng có thể chia sẻ tài sản đó và chỉ tải nó một lần.

00:15:22.000 --> 00:15:30.000
Sử dụng các tệp đã xuất từ Reality Composer Pro vì các tệp này được tối ưu hóa cho thời gian tải và chi phí bộ nhớ.

00:15:30.000 --> 00:15:34.000
Bạn cũng được nén kết cấu miễn phí.

00:15:34.000 --> 00:15:47.000
Giảm kích thước tài sản thường tăng tốc độ tải, nhưng hãy nhớ rằng việc nén kết cấu đã xảy ra với các tệp Reality Composer Pro, vì vậy bạn có thể không cần phải tự làm điều đó.

00:15:47.000 --> 00:15:52.000
Cuối cùng, hãy nói về những trải nghiệm nhập vai với RealityKit.

00:15:52.000 --> 00:16:00.000
Khi ứng dụng của bạn yêu cầu chuyển sang một không gian đầy đủ chuyên dụng, nó sẽ trở thành trải nghiệm tiền cảnh duy nhất đang chạy.

00:16:00.000 --> 00:16:10.000
Khi sử dụng cổng thông tin hoặc chuyển sang trải nghiệm nhập vai hoàn toàn, hệ thống cũng ẩn một phần hoặc toàn bộ môi trường xung quanh của người đó.

00:16:10.000 --> 00:16:17.000
Ứng dụng của bạn có thể tạo ra một môi trường với nội dung RealityKit để lấp đầy không gian của họ.

00:16:17.000 --> 00:16:25.000
Nội dung nhập vai hoàn toàn của bạn cần được hiển thị với nhiều điểm ảnh hơn trên màn hình so với các cảnh trong không gian chung hoặc không gian đầy đủ.

00:16:25.000 --> 00:16:31.000
Điều này có nghĩa là có thể thực hiện nhiều công việc hơn trên GPU để hiển thị nội dung đó.

00:16:31.000 --> 00:16:35.000
Tối ưu hóa loại nội dung này để sử dụng năng lượng GPU.

00:16:35.000 --> 00:16:42.000
Bắt đầu với vật liệu "Tùy chỉnh" với bề mặt không sáng trong Reality Composer Pro để sử dụng năng lượng tối ưu.

00:16:42.000 --> 00:16:50.000
Cân nhắc thêm kết cấu ánh sáng nướng hoặc sử dụng hình ảnh động dựa trên thời gian để có cảm giác ánh sáng năng động thay thế.

00:16:50.000 --> 00:16:56.000
Lập hồ sơ tài liệu của bạn về sức mạnh hệ thống và hiệu suất kết xuất.

00:16:56.000 --> 00:17:01.000
Bạn cũng có thể tạo ra những trải nghiệm hoàn toàn nhập vai với Metal.

00:17:01.000 --> 00:17:09.000
Đối với những người bạn xây dựng công cụ 3D hoặc trải nghiệm sử dụng Metal, hãy nói về một số điều cần tối ưu hóa.

00:17:09.000 --> 00:17:19.000
Bạn có thể sử dụng Metal với khung CompositorServices để bỏ qua máy chủ kết xuất và gửi một bề mặt kết xuất trực tiếp đến bộ tổng hợp.

00:17:19.000 --> 00:17:26.000
Xem phiên "Khám phá kim loại cho các ứng dụng nhập vai" để tìm hiểu cách thực hiện điều này đúng cách.

00:17:26.000 --> 00:17:36.000
Khi sử dụng CompositorServices, hãy tăng tốc độ gửi khung Kim loại của bạn để bộ tổng hợp nhận được một khung mới trên mỗi bản cập nhật của nó.

00:17:36.000 --> 00:17:41.000
Đảm bảo truy vấn bản đồ tìm kiếm mới và đăng dự đoán từng khung.

00:17:41.000 --> 00:17:48.000
Và truy vấn dữ liệu đầu vào này vào giây phút cuối cùng trước khi bạn bắt đầu sử dụng nó để mã hóa công việc GPU.

00:17:48.000 --> 00:17:57.000
Làm cả ba điều này giúp đảm bảo nội dung ảo đáp ứng liên quan đến chuyển động và đầu vào của người dùng.

00:17:57.000 --> 00:18:03.000
Nếu ứng dụng mất quá nhiều thời gian để gửi một khung mới, hệ thống sẽ chấm dứt nó.

00:18:03.000 --> 00:18:06.000
Tránh bất kỳ gian hàng khung dài nào.

00:18:06.000 --> 00:18:14.000
Đảm bảo lập hồ sơ hiệu suất GPU bằng cách sử dụng mẫu Metal System Trace Instruments trong khi chạy ứng dụng của bạn.

00:18:14.000 --> 00:18:27.000
Việc thực thi đổ bóng phân đoạn và đỉnh dài từ ứng dụng Metal của bạn hoặc từ các vật liệu tùy chỉnh với Reality Composer Pro có thể ảnh hưởng nặng nề đến thời gian kết xuất hệ thống.

00:18:27.000 --> 00:18:36.000
Để giảm thời gian phân mảnh và đỉnh, hãy bắt đầu bằng cách giảm các hướng dẫn ALU và truy cập kết cấu bằng bộ đổ bóng.

00:18:36.000 --> 00:18:41.000
Đối với Kim loại, hãy sử dụng bộ đổ bóng tính toán thay thế bất cứ khi nào có thể.

00:18:41.000 --> 00:18:47.000
Xem lại các cuộc nói chuyện này để tìm hiểu thêm về việc tối ưu hóa hiệu suất GPU của bạn.

00:18:47.000 --> 00:18:57.000
Hãy nhớ rằng, tối ưu hóa ứng dụng của bạn cho giao diện người dùng và hiệu suất kết xuất 3D mang lại lợi ích cho trải nghiệm người dùng tổng thể.

00:18:57.000 --> 00:19:00.000
Bây giờ chúng ta hãy chuyển sang hiệu suất đầu vào.

00:19:00.000 --> 00:19:08.000
Mọi người có thể sử dụng mắt, tay, giọng nói và đầu vào phần cứng của họ trên nền tảng này.

00:19:08.000 --> 00:19:12.000
Các bản cập nhật ứng dụng cho đầu vào được xử lý trên luồng chính.

00:19:12.000 --> 00:19:19.000
Nếu những thứ này mất quá nhiều thời gian, nó sẽ khiến ứng dụng của bạn cảm thấy chậm và không phản hồi.

00:19:19.000 --> 00:19:26.000
Các cập nhật đầu vào trên chuỗi chính cần hoàn thành trong thời hạn nhất định dựa trên tốc độ làm mới màn hình.

00:19:26.000 --> 00:19:32.000
Phần cứng cho nền tảng này thường có tốc độ làm mới từ 90 hertz trở lên.

00:19:32.000 --> 00:19:39.000
Đối với tốc độ làm mới 90 hertz, hãy giữ các bản cập nhật đầu vào dưới tám mili giây để có độ trễ tối ưu.

00:19:39.000 --> 00:19:50.000
Khi tương tác với nội dung không gian, hệ thống sẽ thực hiện công việc thử nghiệm để kiểm tra giao diện người dùng hoặc đối tượng 3D mà người dùng đang cố gắng tương tác.

00:19:50.000 --> 00:19:56.000
Đối với nội dung RealityKit, bạn sẽ thêm các máy va chạm vật lý để tương tác với chúng.

00:19:56.000 --> 00:20:06.000
Khi thêm các máy va chạm này, hãy sử dụng máy va chạm tĩnh thay vì máy va chạm động bất cứ khi nào có thể, vì máy va chạm tĩnh rẻ hơn.

00:20:06.000 --> 00:20:13.000
Để giảm công việc kiểm tra lượt truy cập dư thừa trong ứng dụng của bạn, hãy giảm thiểu sự chồng chéo bất kỳ nội dung tương tác nào.

00:20:13.000 --> 00:20:17.000
Bây giờ, hãy chuyển sang ARKit.

00:20:17.000 --> 00:20:26.000
Trên nền tảng này, các thuật toán ARKit luôn chạy để tạo hình ảnh và tương tác trên mọi ứng dụng.

00:20:26.000 --> 00:20:36.000
Ứng dụng của bạn có thể tác động đến sức mạnh hệ thống và sự mượt mà của hình ảnh dựa trên cách nó sử dụng dữ liệu ARKit và neo nội dung ảo.

00:20:36.000 --> 00:20:46.000
Ví dụ: ứng dụng của bạn có thể sử dụng ARKit hoặc RealityKit để đặt nội dung neo vào môi trường xung quanh, đầu hoặc tay của người dùng.

00:20:46.000 --> 00:20:50.000
Mỗi neo bổ sung thêm công việc bổ sung cho hệ thống.

00:20:50.000 --> 00:20:57.000
Khi neo nội dung, hãy xem xét liệu các neo có cần được theo dõi liên tục trong không gian của người dùng hay không.

00:20:57.000 --> 00:21:05.000
Khi sử dụng AnchorComponent trong RealityKit, hãy sử dụng chế độ theo dõi "một lần" để tránh chi phí theo dõi liên tục.

00:21:05.000 --> 00:21:12.000
Giảm thiểu tổng số lượng neo liên tục và thoáng qua từ ứng dụng của bạn.

00:21:12.000 --> 00:21:20.000
Đặc biệt đối với các neo liên tục, mọi ứng dụng đều có thể thêm chúng, vì vậy hãy cố gắng không thêm quá nhiều từ ứng dụng của riêng bạn.

00:21:20.000 --> 00:21:26.000
Thậm chí còn có nhiều tối ưu hóa hơn mà bạn có thể thực hiện trong khi sử dụng dữ liệu ARKit.

00:21:26.000 --> 00:21:35.000
Nếu bạn áp dụng dữ liệu ARKit quá cũ cho nội dung ứng dụng, hình ảnh ứng dụng có thể không đồng bộ với đầu vào.

00:21:35.000 --> 00:21:42.000
Truy vấn dữ liệu ARKit ngay trước khi nó cần được sử dụng và áp dụng nó để cập nhật kịp thời.

00:21:42.000 --> 00:21:46.000
Dự đoán bài đăng rất tốn kém để tính toán.

00:21:46.000 --> 00:21:51.000
Nói chung, chỉ các công cụ kết xuất Kim loại tùy chỉnh mới cần dữ liệu này.

00:21:51.000 --> 00:21:57.000
Nếu bạn chỉ muốn đặt nội dung ứng dụng trong cảnh, RealityKit là một lựa chọn tuyệt vời thay thế.

00:21:57.000 --> 00:22:03.000
Tạo dữ liệu va chạm cho các mắt lưới hiểu cảnh cũng rất tốn kém.

00:22:03.000 --> 00:22:09.000
Nếu bạn sử dụng dữ liệu này, hãy tắt nó khi ứng dụng của bạn không cần nó nữa.

00:22:09.000 --> 00:22:16.000
Bây giờ, hãy nói về việc tối ưu hóa phát lại âm thanh và video cho điện toán không gian.

00:22:16.000 --> 00:22:20.000
Âm thanh không gian được sử dụng theo mặc định trên nền tảng này.

00:22:20.000 --> 00:22:30.000
Hệ thống xử lý thông tin trong thời gian thực về vị trí của người dùng, môi trường xung quanh và nguồn âm thanh để xuất ra âm thanh.

00:22:30.000 --> 00:22:40.000
Nếu ứng dụng của bạn gây ra quá nhiều công việc âm thanh không gian, nó có thể gây ra sự cố với việc sử dụng năng lượng hệ thống hoặc dẫn đến sự chậm trễ trong đầu ra âm thanh.

00:22:40.000 --> 00:22:55.000
Nếu bạn thấy những vấn đề này, có ba điều chính cần xem xét để giảm hoạt động âm thanh không gian: phát đồng thời các nguồn âm thanh, số lượng nguồn âm thanh chuyển động và kích thước của âm trường.

00:22:55.000 --> 00:23:01.000
Tất cả những điều này là các biến số có thể làm tăng công việc tính toán.

00:23:01.000 --> 00:23:03.000
Bây giờ, hãy xem xét video.

00:23:03.000 --> 00:23:08.000
Trong một không gian chung, mọi người có thể phát nhiều video cùng một lúc.

00:23:08.000 --> 00:23:15.000
Đối với mỗi video, hệ thống cần giải mã nó và hiển thị nó trong máy chủ kết xuất.

00:23:15.000 --> 00:23:25.000
Mỗi khung hình video được kết xuất mới cần hiển thị trong khoảng thời gian nhất quán để có trải nghiệm xem video tuyệt vời.

00:23:25.000 --> 00:23:37.000
Để cung cấp cho máy chủ kết xuất nhiều năng lượng và thời gian để đáp ứng thời hạn kết xuất, ứng dụng của bạn nên giảm thiểu cập nhật cho giao diện người dùng hoặc nội dung 3D trong quá trình phát lại video.

00:23:37.000 --> 00:23:41.000
Tốc độ khung hình video cũng ảnh hưởng đến công việc đã hoàn thành.

00:23:41.000 --> 00:23:47.000
Cân nhắc sử dụng video 24 hoặc 30 hertz để có hiệu suất và sức mạnh tối ưu.

00:23:47.000 --> 00:23:58.000
Cuối cùng, giảm số lượng video đồng thời cần được phát và hiển thị trên thiết bị từ ứng dụng của bạn tại bất kỳ thời điểm nào.

00:23:58.000 --> 00:24:06.000
Khi lựa chọn giữa các phương pháp trình bày video, hãy xem xét cách bạn muốn tối ưu hóa cho các tính năng và hiệu suất khác nhau.

00:24:06.000 --> 00:24:12.000
Xem phiên "Tạo trải nghiệm phát lại không gian tuyệt vời" để tìm hiểu thêm.

00:24:12.000 --> 00:24:16.000
Bây giờ, hãy nói về SharePlay.

00:24:16.000 --> 00:24:23.000
Nền tảng này mở ra một bộ trải nghiệm hoàn toàn mới để cộng tác và kết nối với mọi người.

00:24:23.000 --> 00:24:34.000
Để tạo ra trải nghiệm nhóm SharePlay thực sự tuyệt vời, bạn sẽ muốn đảm bảo ứng dụng của mình có thể duy trì hiệu suất tuyệt vời trong thời gian dài.

00:24:34.000 --> 00:24:40.000
Và hiệu suất tính toán không gian tuyệt vời với SharePlay bắt đầu với những điều cơ bản.

00:24:40.000 --> 00:24:44.000
Lập hồ sơ và tối ưu hóa ứng dụng của bạn cho hiệu suất cục bộ trước tiên.

00:24:44.000 --> 00:24:54.000
Sau đó kiểm tra hiệu suất ứng dụng của bạn trong SharePlay để tránh các bản cập nhật kết xuất đắt tiền được đồng bộ hóa trên các thiết bị.

00:24:54.000 --> 00:25:06.000
Lập hồ sơ ứng dụng của bạn về nguồn điện để đảm bảo nhu cầu năng lượng của hệ thống không tạo ra áp suất nhiệt, điều này có thể ngăn ứng dụng của bạn duy trì hiệu suất tuyệt vời của nó.

00:25:06.000 --> 00:25:19.000
Để giải quyết vấn đề này, hãy xem xét cẩn thận những công việc và tính năng nào trong ứng dụng của bạn là cần thiết cho trải nghiệm SharePlay của ứng dụng và tắt bất kỳ thứ gì không cần thiết.

00:25:19.000 --> 00:25:25.000
Cuối cùng, hãy xem xét việc chấm dứt ứng dụng do nhiệt hoặc áp suất bộ nhớ.

00:25:25.000 --> 00:25:29.000
Mọi người có thể sử dụng thiết bị này ở nơi ấm áp.

00:25:29.000 --> 00:25:42.000
Giống như tất cả các nền tảng của Apple, hệ thống quản lý các tài nguyên tính toán có sẵn dưới áp suất nhiệt để giữ cho thiết bị mát mẻ và thoải mái khi sử dụng.

00:25:42.000 --> 00:25:48.000
Có tài nguyên tính toán thấp hơn có thể ảnh hưởng đến hiệu suất ứng dụng của bạn.

00:25:48.000 --> 00:25:59.000
Hệ thống thậm chí có thể chấm dứt ứng dụng của bạn do áp suất nhiệt tới hạn hoặc do thời hạn kết xuất không còn được đáp ứng nữa.

00:25:59.000 --> 00:26:09.000
Khi chịu áp suất nhiệt, hãy làm ít việc hơn trong ứng dụng của bạn để duy trì hiệu suất tốt và giữ cho áp suất nhiệt không tăng thêm nữa.

00:26:09.000 --> 00:26:15.000
Làm điều này bằng cách đăng ký nhận thông báo thermalStateDidChange.

00:26:15.000 --> 00:26:22.000
Khi áp lực tăng cao hơn, hãy điều chỉnh nội dung và cập nhật ứng dụng của bạn để đáp ứng với nó.

00:26:22.000 --> 00:26:32.000
Để xem ứng dụng của bạn hoạt động như thế nào dưới áp suất nhiệt, hãy sử dụng bộ cảm ứng nhiệt trong Xcode để mô phỏng trạng thái nhiệt cao hơn cho thiết bị của bạn.

00:26:32.000 --> 00:26:41.000
Để tìm hiểu thêm về áp suất nhiệt, hãy xem phiên "Thiết kế cho các điều kiện nhiệt độ và mạng bất lợi."

00:26:41.000 --> 00:26:44.000
Tiếp theo, hãy nói về áp lực bộ nhớ.

00:26:44.000 --> 00:26:52.000
Các thiết bị có dung lượng bộ nhớ hạn chế được chia sẻ giữa hệ thống và tất cả các ứng dụng đang chạy.

00:26:52.000 --> 00:27:02.000
Khi thiết bị gần đến giới hạn này, hệ thống bắt đầu chấm dứt các ứng dụng, bắt đầu với các ứng dụng không được sử dụng tích cực.

00:27:02.000 --> 00:27:09.000
Một ứng dụng sử dụng quá nhiều bộ nhớ cũng có thể bị chấm dứt, ngay cả khi nó đang được sử dụng.

00:27:09.000 --> 00:27:13.000
Bạn không muốn điều này xảy ra cho ứng dụng của bạn.

00:27:13.000 --> 00:27:19.000
Bạn có thể tránh điều này bằng cách giảm mức sử dụng bộ nhớ của ứng dụng càng nhiều càng tốt.

00:27:19.000 --> 00:27:29.000
Trên nền tảng này, các ứng dụng có nhiều khả năng có một lượng lớn bộ nhớ được phân bổ cho giao diện người dùng và kết xuất 3D, và phát lại âm thanh và video.

00:27:29.000 --> 00:27:41.000
Nếu ứng dụng của bạn có nội dung giao diện người dùng, hãy giảm phân bổ bộ nhớ kết xuất bằng cách giảm thiểu kết xuất ngoài màn hình, tổng số lượng cửa sổ và nội dung phương tiện.

00:27:41.000 --> 00:27:53.000
Đối với bộ nhớ 3D với RealityKit, độ phân giải của kết cấu và bộ định cỡ hình học của bạn cho các mắt lưới và hạt có thể đóng góp đáng kể vào việc sử dụng bộ nhớ.

00:27:53.000 --> 00:27:57.000
Giảm thiểu chúng bất cứ nơi nào bạn có thể.

00:27:57.000 --> 00:28:05.000
Khi phát âm thanh và video, hãy đánh giá tổng tải bộ nhớ từ tất cả các tệp âm thanh và video trong ứng dụng của bạn.

00:28:05.000 --> 00:28:17.000
Khi thay đổi độ phân giải, tốc độ bit, định dạng tệp và thời lượng, hãy xem xét sự đánh đổi cho trải nghiệm người dùng và hiệu suất so với bất kỳ khoản tiết kiệm bộ nhớ nào.

00:28:17.000 --> 00:28:26.000
Xem lại các cuộc nói chuyện này để tìm hiểu thêm các mẹo để giảm dung lượng bộ nhớ của bạn trên tất cả các nền tảng của Apple.

00:28:26.000 --> 00:28:33.000
Hãy nhớ rằng, hiệu suất là điều cần thiết cho trải nghiệm người dùng tuyệt vời trên nền tảng này.

00:28:33.000 --> 00:28:41.000
Để bắt đầu, hãy lập hồ sơ các ứng dụng của bạn một cách tích cực trong quá trình phát triển để tìm ra các vấn đề về hiệu suất và nguồn điện.

00:28:41.000 --> 00:28:46.000
Xây dựng một kế hoạch hiệu suất xung quanh các chỉ số quan trọng cho điện toán không gian.

00:28:46.000 --> 00:28:53.000
Và tối ưu hóa ứng dụng của bạn để kết xuất, cấp nguồn và tất cả các lĩnh vực khác mà chúng tôi đã đề cập ngày hôm nay.

00:28:53.000 --> 00:29:01.000
Và cuối cùng, thu thập dữ liệu trường hiệu suất bằng các công cụ như MetricKit và Xcode Organizer.

00:29:01.000 --> 00:29:07.000
Tôi nóng lòng muốn xem tất cả các ứng dụng và trải nghiệm tuyệt vời mà bạn nghĩ ra trên nền tảng này.

00:29:07.000 --> 00:29:08.000
Cảm ơn vì đã xem.

00:29:08.000 --> 23:59:59.000
♪

