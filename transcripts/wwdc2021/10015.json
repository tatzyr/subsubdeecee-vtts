[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=2"
  },
  {
    "text": "Hi. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=9"
  },
  {
    "text": "I'm Nick Gillett, an engineer here at Apple ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=10"
  },
  {
    "text": "on the Core Data team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=12"
  },
  {
    "text": "In this session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=14"
  },
  {
    "text": "I'll show you how to easily build applications ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=15"
  },
  {
    "text": "that use NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=17"
  },
  {
    "text": "to share data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=19"
  },
  {
    "text": "with multiple iCloud users.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=20"
  },
  {
    "text": "First, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=23"
  },
  {
    "text": "we'll discuss what sharing means ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=24"
  },
  {
    "text": "with NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=25"
  },
  {
    "text": "and how that affects the types of experiences you can build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=28"
  },
  {
    "text": "Next, we'll take a deep dive into the mechanics of sharing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=32"
  },
  {
    "text": "And finally, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=37"
  },
  {
    "text": "we'll briefly discuss how ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=38"
  },
  {
    "text": "NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=39"
  },
  {
    "text": "can help you enable some additional protection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=41"
  },
  {
    "text": "for sensitive data stored in iCloud. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=44"
  },
  {
    "text": "Let's get started with sharing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=46"
  },
  {
    "text": "For the sake of discussion, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=50"
  },
  {
    "text": "let's imagine I want to share this photo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=52"
  },
  {
    "text": "with some friends of mine. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=54"
  },
  {
    "text": "How might I do that? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=56"
  },
  {
    "text": "On Apple platforms, there are a number of ways ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=57"
  },
  {
    "text": "we can share the data our applications create. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=60"
  },
  {
    "text": "Photos implements a system control ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=63"
  },
  {
    "text": "here in the lower left ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=66"
  },
  {
    "text": "that allows me to call up an Action sheet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=67"
  },
  {
    "text": "It has a wide variety of actions I can take, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=70"
  },
  {
    "text": "including a number of ways to share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=73"
  },
  {
    "text": "For example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=76"
  },
  {
    "text": "I can send it to my friends as an iMessage or email. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=77"
  },
  {
    "text": "But ideally, we would have a single place ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=82"
  },
  {
    "text": "directly in the Photos app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=85"
  },
  {
    "text": "where my friends and I can share our photos with each other. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=86"
  },
  {
    "text": "When I'm signed in to iCloud, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=91"
  },
  {
    "text": "Photos supports another option for sharing: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=93"
  },
  {
    "text": "a shared album. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=96"
  },
  {
    "text": "Photos shared albums create a shared collection of images ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=98"
  },
  {
    "text": "that other users can view and, if desired, contribute to. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=101"
  },
  {
    "text": "I simply give the new album a title ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=106"
  },
  {
    "text": "and then tap Next ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=109"
  },
  {
    "text": "to choose the set of participants. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=110"
  },
  {
    "text": "Here I've chosen four friends to share the photo with. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=113"
  },
  {
    "text": "Heather, Jermaine, Percy, and Mary are all test accounts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=116"
  },
  {
    "text": "I regularly work with when I'm building sharing features. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=121"
  },
  {
    "text": "When I tap Next, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=125"
  },
  {
    "text": "I can see my new album with the photo I shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=126"
  },
  {
    "text": "Photos also allows me to view the participants on the album ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=130"
  },
  {
    "text": "by tapping this person icon in the upper right. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=133"
  },
  {
    "text": "Tapping that brings up the set of participants. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=137"
  },
  {
    "text": "Here I can see their invitation status ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=141"
  },
  {
    "text": "and some of the permissions on the shared album. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=144"
  },
  {
    "text": "How might we build an experience like this? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=147"
  },
  {
    "text": "And more importantly, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=150"
  },
  {
    "text": "how would such an experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=151"
  },
  {
    "text": "change the applications we build? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=152"
  },
  {
    "text": "Well, let me show you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=155"
  },
  {
    "text": "To demonstrate how sharing works ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=157"
  },
  {
    "text": "with NSPersistentCloudKitContainer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=159"
  },
  {
    "text": "I'm going to be using our sample application, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=161"
  },
  {
    "text": "Syncing a Core Data Store with the Cloud. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=164"
  },
  {
    "text": "I've already modified it to support sharing posts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=167"
  },
  {
    "text": "with different iCloud users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=169"
  },
  {
    "text": "And here on the table, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=171"
  },
  {
    "text": "I have a small pool of devices with me, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=172"
  },
  {
    "text": "each logged in to an iCloud account ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=174"
  },
  {
    "text": "belonging to Heather, Jermaine, or Mary. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=176"
  },
  {
    "text": "I'm going to start by launching my application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=180"
  },
  {
    "text": "on Jermaine's device ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=182"
  },
  {
    "text": "and tapping this plus(+) sign in the upper-right corner ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=184"
  },
  {
    "text": "to create a new post. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=187"
  },
  {
    "text": "I'll give it a simple title-- \"Sharing demos are great\"-- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=189"
  },
  {
    "text": "and tap Done.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=192"
  },
  {
    "text": "And then I'll tap this new Action button ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=197"
  },
  {
    "text": "that I've added to bring up the sharing controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=200"
  },
  {
    "text": "I want to send each person an invite ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=202"
  },
  {
    "text": "to work on this post with me via email. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=204"
  },
  {
    "text": "So I'll tap Mail and then enter the information for my friends. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=206"
  },
  {
    "text": "I've already saved Heather and Mary in my address book, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=211"
  },
  {
    "text": "so they're easy to find. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=214"
  },
  {
    "text": "Finally, I'll tap Send to send the email.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=216"
  },
  {
    "text": "Now, on Heather's device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=220"
  },
  {
    "text": "I'll open Mail and tap the link inside the email I sent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=222"
  },
  {
    "text": "which opens up my application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=226"
  },
  {
    "text": "After a short wait, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=228"
  },
  {
    "text": "the post I created on Jermaine's device ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=229"
  },
  {
    "text": "is now visible on this device.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=232"
  },
  {
    "text": "On Mary's device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=239"
  },
  {
    "text": "I'll open Mail and tap the link inside the email I sent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=240"
  },
  {
    "text": "which opens up my application.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=244"
  },
  {
    "text": "After a short wait, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=247"
  },
  {
    "text": "the post I created on Jermaine's device ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=248"
  },
  {
    "text": "is now visible on this device as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=250"
  },
  {
    "text": "But how does all of this work? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=254"
  },
  {
    "text": "And exactly how much did I have to change ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=256"
  },
  {
    "text": "in the sample application? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=258"
  },
  {
    "text": "The answer is, \"Not much.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=260"
  },
  {
    "text": "Sharing is by far the most complicated feature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=263"
  },
  {
    "text": "we have built in to NSPersistentCloudKitContainer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=266"
  },
  {
    "text": "It brings together a huge amount of domain knowledge ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=269"
  },
  {
    "text": "about how CloudKit works ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=272"
  },
  {
    "text": "and how to operate on records and objects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=274"
  },
  {
    "text": "Naturally, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=277"
  },
  {
    "text": "this domain knowledge is reflected ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=279"
  },
  {
    "text": "in the APIs we have built ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=280"
  },
  {
    "text": "for NSPersistentCloudKitContainer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=282"
  },
  {
    "text": "So let's take a look at exactly how ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=285"
  },
  {
    "text": "NSPersistentCloudKitContainer shares objects.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=287"
  },
  {
    "text": "In my brief demo, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=291"
  },
  {
    "text": "I showed an application that makes use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=293"
  },
  {
    "text": "of two CloudKit databases, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=295"
  },
  {
    "text": "the .private and the .shared database. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=297"
  },
  {
    "text": "Each of these is mirrored to a persistent store ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=300"
  },
  {
    "text": "in my application, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=302"
  },
  {
    "text": "one using the .private database scope ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=304"
  },
  {
    "text": "and the other using the .shared database scope. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=306"
  },
  {
    "text": "Using a single managed object context, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=309"
  },
  {
    "text": "my application can access data in both stores. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=312"
  },
  {
    "text": "Let's look at that change in a bit more detail. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=316"
  },
  {
    "text": "The first change I had to make ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=321"
  },
  {
    "text": "was to tell NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=323"
  },
  {
    "text": "to mirror the .shared CloudKit database ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=325"
  },
  {
    "text": "to a new persistent store. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=328"
  },
  {
    "text": "I did this by modifying the CoreDataStack, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=330"
  },
  {
    "text": "adding a new persistent store description-- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=333"
  },
  {
    "text": "here just a copy of the one for the .private store ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=336"
  },
  {
    "text": "with a different URL. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=338"
  },
  {
    "text": "Then, I set its CloudKit container optionsâ€™ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=341"
  },
  {
    "text": "databaseScope property to .shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=344"
  },
  {
    "text": "This is new iOS 15 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=346"
  },
  {
    "text": "and allows NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=349"
  },
  {
    "text": "to be configured to mirror persistent stores ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=351"
  },
  {
    "text": "to the .shared CloudKit database. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=354"
  },
  {
    "text": "To complete the demo, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=356"
  },
  {
    "text": "I had to make two other changes.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=358"
  },
  {
    "text": "I adopted a new method on NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=361"
  },
  {
    "text": "to create the share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=365"
  },
  {
    "text": "share(_ managedObjects: to share: completion:) ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=366"
  },
  {
    "text": "is a new method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=370"
  },
  {
    "text": "designed to pair directly with UICloudSharingController. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=371"
  },
  {
    "text": "I simply added a button action ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=375"
  },
  {
    "text": "to instantiate an instance of UICloudSharingController. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=378"
  },
  {
    "text": "share(_ managedObjects: to share: completion:) ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=381"
  },
  {
    "text": "is meant to be invoked in the create-share phase ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=384"
  },
  {
    "text": "of UICloudSharingController's workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=387"
  },
  {
    "text": "It does a lot of work under the covers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=390"
  },
  {
    "text": "to identify all of the objects ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=392"
  },
  {
    "text": "that need to be shared and to create a share ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=394"
  },
  {
    "text": "for them if needed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=397"
  },
  {
    "text": "Finally, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=400"
  },
  {
    "text": "I invoke UICloudSharingController's ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=401"
  },
  {
    "text": "completion block with the results ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=403"
  },
  {
    "text": "provided by NSPersistentCloudKitContainer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=405"
  },
  {
    "text": "which tells it I'm ready to continue the sharing flow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=408"
  },
  {
    "text": "This means that you can share objects ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=412"
  },
  {
    "text": "using NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=414"
  },
  {
    "text": "in just a few lines of code.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=416"
  },
  {
    "text": "The last change I had to make ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=419"
  },
  {
    "text": "was to be able to accept share invitations, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=421"
  },
  {
    "text": "which I do using this new method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=424"
  },
  {
    "text": "on NSPersistentCloudKitContainer: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=426"
  },
  {
    "text": "acceptShareInvitations(from metadata: into persistentStore: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=428"
  },
  {
    "text": "I used this method in the AppDelegeate's application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=433"
  },
  {
    "text": "userDidAcceptCloudKitShare( with metadata:) method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=437"
  },
  {
    "text": "to simply pass the incoming share metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=441"
  },
  {
    "text": "directly to NSPersistentCloudKitContainer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=444"
  },
  {
    "text": "This method accepts the share ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=447"
  },
  {
    "text": "with the CloudKit server in the container associated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=449"
  },
  {
    "text": "with the persistent store I provide-- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=452"
  },
  {
    "text": "here, the shared store for my application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=454"
  },
  {
    "text": "After the share is accepted, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=458"
  },
  {
    "text": "NSPersistentCloudKitContainer automatically syncs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=460"
  },
  {
    "text": "all of the shared objects into the local store. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=463"
  },
  {
    "text": "So that's how we use NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=466"
  },
  {
    "text": "to combine the .private and .shared databases, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=469"
  },
  {
    "text": "create shares for objects, and accept sharing invitations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=472"
  },
  {
    "text": "But our applications are usually designed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=477"
  },
  {
    "text": "to manage large collections of data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=479"
  },
  {
    "text": "To make it easy to build applications ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=482"
  },
  {
    "text": "that use this shared data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=484"
  },
  {
    "text": "NSPersistentCloudKitContainer has to also help us make sense ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=486"
  },
  {
    "text": "of all of these objects so that we can build ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=490"
  },
  {
    "text": "informative user interfaces for our users.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=492"
  },
  {
    "text": "To understand these challenges a bit more clearly, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=496"
  },
  {
    "text": "we need to identify two crucial concepts for sharing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=498"
  },
  {
    "text": "The first is the notion of a set of actors. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=504"
  },
  {
    "text": "We call them the owner and the participants. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=508"
  },
  {
    "text": "The owner is the iCloud account that actually owns an object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=511"
  },
  {
    "text": "Owners create and share objects with a set of participants. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=515"
  },
  {
    "text": "A participant is any other iCloud account ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=520"
  },
  {
    "text": "that is allowed to operate on those objects in some way. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=524"
  },
  {
    "text": "Participants can have different roles and permissions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=527"
  },
  {
    "text": "that constrain how they can act on a particular set of objects, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=531"
  },
  {
    "text": "which brings us to the second key concept: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=535"
  },
  {
    "text": "how NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=538"
  },
  {
    "text": "and CloudKit structure these shared objects.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=541"
  },
  {
    "text": "In Core Data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=545"
  },
  {
    "text": "we think of our objects in terms of NSManagedObject. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=547"
  },
  {
    "text": "NSPersistentCloudKitContainer turns those managed objects ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=550"
  },
  {
    "text": "into instances of CKRecord that are stored in CloudKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=554"
  },
  {
    "text": "If you've worked with sharing before, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=559"
  },
  {
    "text": "you're probably familiar with hierarchical sharing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=561"
  },
  {
    "text": "where these records are associated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=564"
  },
  {
    "text": "with a root record called the share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=566"
  },
  {
    "text": "But this isn't how ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=569"
  },
  {
    "text": "NSPersistentCloudKitContainer works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=570"
  },
  {
    "text": "NSPersistentCloudKitContainer uses a new feature in CloudKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=573"
  },
  {
    "text": "called Record Zone Sharing, covered in more detail ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=578"
  },
  {
    "text": "in the session \"What's New in CloudKit.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=581"
  },
  {
    "text": "But let's take a look at how NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=584"
  },
  {
    "text": "uses Record Zone Sharing to share managed objects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=588"
  },
  {
    "text": "In a CloudKit database-- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=593"
  },
  {
    "text": "for example, the .private database-- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=594"
  },
  {
    "text": "NSPersistentCloudKitContainer typically manages a private zone ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=596"
  },
  {
    "text": "to store the objects an application creates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=601"
  },
  {
    "text": "In Record Zone Sharing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=604"
  },
  {
    "text": "shared CKRecords are contained inside a shared CKRecordZone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=606"
  },
  {
    "text": "Shared record zones are identified by the presence ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=611"
  },
  {
    "text": "of a single CKShare record. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=614"
  },
  {
    "text": "As with hierarchical sharing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=617"
  },
  {
    "text": "this record contains all of the information necessary ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=619"
  },
  {
    "text": "to work with the zone, like the owner, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=622"
  },
  {
    "text": "the participants, and their permissions and roles. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=624"
  },
  {
    "text": "NSPersistentCloudKitContainer manages these zones ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=629"
  },
  {
    "text": "and automatically assigns records to them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=631"
  },
  {
    "text": "Because there's no root record, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=635"
  },
  {
    "text": "NSPersistentCloudKitContainer also has to understand ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=637"
  },
  {
    "text": "how the concepts of owners and participants apply ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=640"
  },
  {
    "text": "to the entire record zone.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=644"
  },
  {
    "text": "Let's imagine I have a collection of people ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=647"
  },
  {
    "text": "I want to share with. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=650"
  },
  {
    "text": "Sharing with one other person is interesting, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=652"
  },
  {
    "text": "but NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=654"
  },
  {
    "text": "is designed to facilitate sharing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=656"
  },
  {
    "text": "for much larger populations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=658"
  },
  {
    "text": "Each of these participants will be able to access ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=662"
  },
  {
    "text": "and operate on the objects I share with them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=665"
  },
  {
    "text": "And I will be able to access ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=668"
  },
  {
    "text": "and operate on the objects ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=670"
  },
  {
    "text": "that they share with me. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=671"
  },
  {
    "text": "Each participant will also have their own collection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=674"
  },
  {
    "text": "of devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=677"
  },
  {
    "text": "With NSPersistentCloudKitContainer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=679"
  },
  {
    "text": "applications can operate on shared objects ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=681"
  },
  {
    "text": "from any Apple device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=683"
  },
  {
    "text": "For each participant, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=686"
  },
  {
    "text": "NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=688"
  },
  {
    "text": "manages objects in two CloudKit databases, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=690"
  },
  {
    "text": "the .private and the .shared database. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=694"
  },
  {
    "text": "In my .private database, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=697"
  },
  {
    "text": "I would see records and zones that I own ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=699"
  },
  {
    "text": "whether or not those zones are shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=702"
  },
  {
    "text": "For example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=705"
  },
  {
    "text": "the zone that ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=706"
  },
  {
    "text": "NSPersistentCloudKitContainer manages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=707"
  },
  {
    "text": "With sharing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=710"
  },
  {
    "text": "NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=711"
  },
  {
    "text": "will also create shared zones for me ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=713"
  },
  {
    "text": "with a CKShare record ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=716"
  },
  {
    "text": "that controls who can access these zones that I own. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=718"
  },
  {
    "text": "I and, if allowed, other participants can add ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=723"
  },
  {
    "text": "and modify records in these shared zones. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=727"
  },
  {
    "text": "In my .shared database, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=731"
  },
  {
    "text": "I would see record zones ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=733"
  },
  {
    "text": "that other users have shared with me. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=734"
  },
  {
    "text": "If I'm allowed to, I can add records that I own ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=737"
  },
  {
    "text": "to any of those zones ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=740"
  },
  {
    "text": "just as they can in the zones that I own.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=742"
  },
  {
    "text": "Another user will see a different set of zones ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=747"
  },
  {
    "text": "in their .private and .shared databases, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=750"
  },
  {
    "text": "depending on whether or not they are the owner of those zones. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=753"
  },
  {
    "text": "For example, this user may have a private zone ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=757"
  },
  {
    "text": "and a shared zone that they own in their .private database. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=761"
  },
  {
    "text": "In addition, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=765"
  },
  {
    "text": "they would see my two zones that I share with them ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=767"
  },
  {
    "text": "and any other zones they are a participant on ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=770"
  },
  {
    "text": "in their .shared database. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=773"
  },
  {
    "text": "So how does NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=776"
  },
  {
    "text": "know where to keep your records? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=780"
  },
  {
    "text": "In many cases, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=782"
  },
  {
    "text": "it can infer where records belong ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=783"
  },
  {
    "text": "based on the relationship they have to other objects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=786"
  },
  {
    "text": "But you can also tell ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=789"
  },
  {
    "text": "share(_ managedObjects: to share: completion:) ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=791"
  },
  {
    "text": "to store objects in a specific shared zone ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=794"
  },
  {
    "text": "by passing it a non-nil CKShare. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=797"
  },
  {
    "text": "For example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=800"
  },
  {
    "text": "if I change this line of code to use an existing share, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=801"
  },
  {
    "text": "NSPersistentCloudKitContainer will attempt to assign ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=805"
  },
  {
    "text": "the provided post object to that share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=808"
  },
  {
    "text": "These are all the changes I had to make for my first demo, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=812"
  },
  {
    "text": "but my application also needs to effectively communicate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=816"
  },
  {
    "text": "what objects are shared, who they're shared with, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=819"
  },
  {
    "text": "and what those participants can do. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=823"
  },
  {
    "text": "Our users need all of that information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=825"
  },
  {
    "text": "so that they can make good decisions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=828"
  },
  {
    "text": "about the objects they choose to share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=830"
  },
  {
    "text": "So let's look at how I've changed my application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=833"
  },
  {
    "text": "to communicate these states and privileges. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=835"
  },
  {
    "text": "Returning to the sample application, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=838"
  },
  {
    "text": "I can see the data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=841"
  },
  {
    "text": "from the first demo is now displayed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=842"
  },
  {
    "text": "with some new user interface decorations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=844"
  },
  {
    "text": "to indicate that the post is shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=846"
  },
  {
    "text": "If I tap on it, I can also see the participants ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=848"
  },
  {
    "text": "displayed at the bottom of the detail view controller ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=852"
  },
  {
    "text": "with their role, permissions, and acceptance state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=854"
  },
  {
    "text": "We can see here that Jermaine is the owner ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=858"
  },
  {
    "text": "of the share that contains the post ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=860"
  },
  {
    "text": "and Heather is a private participant. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=862"
  },
  {
    "text": "Now I'm going to add a new post, give it a title, and tap Done.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=865"
  },
  {
    "text": "I'll tap the Action button to bring up the sharing controller, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=877"
  },
  {
    "text": "but this time, I want the share to be read-only ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=880"
  },
  {
    "text": "so that the participants can't edit or modify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=883"
  },
  {
    "text": "the contents of the share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=886"
  },
  {
    "text": "So I'll change the share options to mark the share as View Only. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=888"
  },
  {
    "text": "Next, I'll tap Mail and invite Jermaine and Mary.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=892"
  },
  {
    "text": "Finally, I'll send the email.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=899"
  },
  {
    "text": "On Mary's device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=903"
  },
  {
    "text": "I'll accept the new share, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=904"
  },
  {
    "text": "and now I can see the new post. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=906"
  },
  {
    "text": "If I tap on it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=908"
  },
  {
    "text": "I can see that the Edit button is disabled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=910"
  },
  {
    "text": "and the participants entry for Mary shows ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=912"
  },
  {
    "text": "that she is a Read-Only participant ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=915"
  },
  {
    "text": "on the share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=917"
  },
  {
    "text": "Likewise, I can't swipe to delete this post, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=918"
  },
  {
    "text": "and if I put the table view in editing mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=922"
  },
  {
    "text": "by tapping the Edit button, I can't delete this post.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=924"
  },
  {
    "text": "On Jermaine's device now, I'll accept the new share.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=930"
  },
  {
    "text": "And now I can see the new post. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=937"
  },
  {
    "text": "If I tap on it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=942"
  },
  {
    "text": "I can see that the Edit button is disabled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=943"
  },
  {
    "text": "and the participants entry for Jermaine shows ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=946"
  },
  {
    "text": "that he is a Read-Only participant on the share.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=949"
  },
  {
    "text": "Even in this humble sample application, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=956"
  },
  {
    "text": "I've had to make a number of changes to the user interface ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=959"
  },
  {
    "text": "to present information about shared objects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=962"
  },
  {
    "text": "I had to decorate the post table cells ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=965"
  },
  {
    "text": "to indicate which ones are shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=968"
  },
  {
    "text": "I also had to add logic ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=970"
  },
  {
    "text": "to enable or disable editing controls, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=972"
  },
  {
    "text": "depending on the permissions assigned ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=975"
  },
  {
    "text": "to the current user participant. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=977"
  },
  {
    "text": "And finally, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=979"
  },
  {
    "text": "I had to build new user interface elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=980"
  },
  {
    "text": "to display information about the participants ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=983"
  },
  {
    "text": "on an individual share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=986"
  },
  {
    "text": "All of this work required accessing some metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=988"
  },
  {
    "text": "about the CKShare a specific post resides in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=991"
  },
  {
    "text": "NSPersistentCloudKitContainer includes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=995"
  },
  {
    "text": "a number of API methods to align with each of these concerns. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=998"
  },
  {
    "text": "fetchShares(matching objectIDs:) is new in iOS 15 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1002"
  },
  {
    "text": "and allows me to get the CKShare for a specific post. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1006"
  },
  {
    "text": "But these three methods for conditionalizing editing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1010"
  },
  {
    "text": "were introduced alongside our .public database support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1014"
  },
  {
    "text": "at WWDC in 2020. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1017"
  },
  {
    "text": "You can use these methods in your applications ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1020"
  },
  {
    "text": "wherever you need to customize your user interfaces. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1022"
  },
  {
    "text": "But in my application, I took a slightly different approach. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1025"
  },
  {
    "text": "Instead of invoking methods on NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1030"
  },
  {
    "text": "directly, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1033"
  },
  {
    "text": "I built a protocol that exposes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1035"
  },
  {
    "text": "a specific method for each customization I needed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1037"
  },
  {
    "text": "It's called the SharingProvider. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1041"
  },
  {
    "text": "The SharingProvider has methods for binding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1043"
  },
  {
    "text": "directly to specific call sites in my application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1046"
  },
  {
    "text": "For example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1049"
  },
  {
    "text": "I might need to know whether or not an object is shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1050"
  },
  {
    "text": "If it is shared, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1054"
  },
  {
    "text": "I may need to fetch the CKShare ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1055"
  },
  {
    "text": "or the participants for that object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1057"
  },
  {
    "text": "to display more information in my user interface. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1060"
  },
  {
    "text": "Finally, an object may not always be mutable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1064"
  },
  {
    "text": "and individual participants can have different permissions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1067"
  },
  {
    "text": "on the same object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1070"
  },
  {
    "text": "This protocol makes it easy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1072"
  },
  {
    "text": "to add specific logic to my application code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1074"
  },
  {
    "text": "And I'd like to show you one specific call site ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1078"
  },
  {
    "text": "in the MainViewController, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1080"
  },
  {
    "text": "where I needed to know whether or not an object is shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1081"
  },
  {
    "text": "Here I used isShared to decide ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1085"
  },
  {
    "text": "whether or not to convert the title of a post ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1088"
  },
  {
    "text": "to an attributed string and prefix it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1090"
  },
  {
    "text": "with the person.circle symbol ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1093"
  },
  {
    "text": "to show that the post is part of a share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1095"
  },
  {
    "text": "Customizations like this necessarily require ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1098"
  },
  {
    "text": "more complicated code than if I chose not to support sharing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1101"
  },
  {
    "text": "After adding a few of these customizations, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1106"
  },
  {
    "text": "it became obvious ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1108"
  },
  {
    "text": "I needed a way to ensure they all work correctly, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1110"
  },
  {
    "text": "which brings me to ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1113"
  },
  {
    "text": "the main reason the SharingProvider exists: testing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1114"
  },
  {
    "text": "The SharingProvider protocol makes it easy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1118"
  },
  {
    "text": "to test these decision points by injection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1121"
  },
  {
    "text": "This snippet of code is part of a test case I wrote ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1124"
  },
  {
    "text": "for the MainViewController ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1127"
  },
  {
    "text": "to ensure that its table cells correctly indicate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1129"
  },
  {
    "text": "if a post is shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1132"
  },
  {
    "text": "I left off the scaffolding for creating the sample data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1134"
  },
  {
    "text": "but the test crafts a mixed set of managed objects ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1137"
  },
  {
    "text": "that it identifies as shared or not shared ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1141"
  },
  {
    "text": "by the presence of their objectID in this set. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1144"
  },
  {
    "text": "Next, I configure an instance of the BlockBasedShareProvider, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1148"
  },
  {
    "text": "a class written specifically for testing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1153"
  },
  {
    "text": "which allows me to trivially inject custom logic ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1156"
  },
  {
    "text": "into the sharingProvider the MainViewController uses. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1159"
  },
  {
    "text": "Here I'm setting the isSharedBlock ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1163"
  },
  {
    "text": "to call the contains method of the set I created. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1166"
  },
  {
    "text": "This is a cute trick in Swift that allows me to simply check ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1170"
  },
  {
    "text": "if the provided objectID is in sharedObjectIDs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1173"
  },
  {
    "text": "Then, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1178"
  },
  {
    "text": "I set the BlockBasedProvider as the provider ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1179"
  },
  {
    "text": "for the view controller, completing the injection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1182"
  },
  {
    "text": "Finally, this test asks the MainViewController ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1185"
  },
  {
    "text": "for its table cells, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1189"
  },
  {
    "text": "verifying that the ones I've included ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1191"
  },
  {
    "text": "in the sharedObjectIDs set have the expected prefix ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1192"
  },
  {
    "text": "and the cells that correspond to unshared objects don't. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1196"
  },
  {
    "text": "The actual implementation for isShared ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1202"
  },
  {
    "text": "is in the CoreDataStack, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1204"
  },
  {
    "text": "which manages the persistent CloudKit container ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1206"
  },
  {
    "text": "for my application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1208"
  },
  {
    "text": "And you can see it's a bit more complicated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1210"
  },
  {
    "text": "than the simple injection I used in the test. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1212"
  },
  {
    "text": "Now, I could go through this implementation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1216"
  },
  {
    "text": "line by line, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1218"
  },
  {
    "text": "but that's not what's important here. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1220"
  },
  {
    "text": "What's important is that it's way more complicated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1222"
  },
  {
    "text": "than I can easily exercise ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1225"
  },
  {
    "text": "every time I want to verify a change to the table view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1227"
  },
  {
    "text": "and trying to do so would add a lot of friction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1231"
  },
  {
    "text": "to the development process. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1234"
  },
  {
    "text": "On the other hand, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1236"
  },
  {
    "text": "this injection technique ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1238"
  },
  {
    "text": "makes it easy and fast to test different configurations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1240"
  },
  {
    "text": "of shared objects without ever talking to the CloudKit server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1243"
  },
  {
    "text": "It's a little bit more code up front ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1247"
  },
  {
    "text": "to write all of these tests and structure the application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1249"
  },
  {
    "text": "in a way that facilitates this type of injection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1253"
  },
  {
    "text": "but the resulting confidence and reliability are well worth it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1256"
  },
  {
    "text": "As I mentioned, the SharingProvider includes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1261"
  },
  {
    "text": "a number of other important methods ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1264"
  },
  {
    "text": "for the sample application, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1266"
  },
  {
    "text": "and I encourage you to check out their implementations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1268"
  },
  {
    "text": "and the tests I wrote ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1270"
  },
  {
    "text": "for how they impact the user interface. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1272"
  },
  {
    "text": "In all, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1275"
  },
  {
    "text": "I added a little over 1200 lines of test code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1276"
  },
  {
    "text": "and I hope these examples make it really easy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1279"
  },
  {
    "text": "for you to build tests in your own applications. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1282"
  },
  {
    "text": "The final topic I'd like to cover today ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1285"
  },
  {
    "text": "is support for another new feature in CloudKit: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1288"
  },
  {
    "text": "encrypted CKRecord values.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1291"
  },
  {
    "text": "These values are stored in a new payload on CKRecord ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1295"
  },
  {
    "text": "called encryptedValues, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1298"
  },
  {
    "text": "introduced in the \"What's New in CloudKit\" session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1300"
  },
  {
    "text": "This new payload on CKRecord allows values ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1304"
  },
  {
    "text": "to be encrypted using key material ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1307"
  },
  {
    "text": "from the user's keychain. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1309"
  },
  {
    "text": "These values are decrypted locally on device ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1311"
  },
  {
    "text": "after they're downloaded from the CloudKit server, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1314"
  },
  {
    "text": "and they're encrypted locally on device ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1317"
  },
  {
    "text": "before they are uploaded to the CloudKit server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1320"
  },
  {
    "text": "We've enabled adoption of encrypted values ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1323"
  },
  {
    "text": "with just a single click in Xcode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1326"
  },
  {
    "text": "Let's see that in action.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1329"
  },
  {
    "text": "Here in Xcode, I've opened our sample application, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1333"
  },
  {
    "text": "Syncing a Core Data Store with the Cloud. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1336"
  },
  {
    "text": "I'll open the CoreDataCloudKitDemo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1339"
  },
  {
    "text": "managed object model, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1341"
  },
  {
    "text": "and there's a specific property on the post entity ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1343"
  },
  {
    "text": "I want to show you called location. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1346"
  },
  {
    "text": "If I select the location attribute, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1349"
  },
  {
    "text": "I can see its configuration in the data model inspector ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1352"
  },
  {
    "text": "on the right. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1355"
  },
  {
    "text": "I've configured it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1356"
  },
  {
    "text": "to be an optional Transformable attribute ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1357"
  },
  {
    "text": "and checked ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1360"
  },
  {
    "text": "this new Allows Cloud Encryption checkbox. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1361"
  },
  {
    "text": "This new checkbox tells NSPersistentCloudKitContainer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1364"
  },
  {
    "text": "that the value for this attribute ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1368"
  },
  {
    "text": "should be stored in the encryptedValues payload ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1370"
  },
  {
    "text": "of the resulting CKRecord. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1373"
  },
  {
    "text": "If you prefer to read the matrix as code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1375"
  },
  {
    "text": "there's a new boolean-- allowsCloudEncryption-- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1378"
  },
  {
    "text": "on NSAttributeDescription ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1381"
  },
  {
    "text": "that you can use to configure this property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1383"
  },
  {
    "text": "in your model code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1385"
  },
  {
    "text": "Now, encryption with CloudKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1387"
  },
  {
    "text": "is an at-introduction time decision. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1389"
  },
  {
    "text": "That means we can't change our mind later ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1393"
  },
  {
    "text": "and choose to encrypt fields ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1395"
  },
  {
    "text": "that aren't already encrypted today in production. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1397"
  },
  {
    "text": "Likewise, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1400"
  },
  {
    "text": "you can't choose to unencrypt a field ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1401"
  },
  {
    "text": "that is already encrypted. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1404"
  },
  {
    "text": "Once the CloudKit schema is pushed to production, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1406"
  },
  {
    "text": "we can't change any of the field types. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1409"
  },
  {
    "text": "So be sure to use NSPersistentCloudKitContainer's ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1412"
  },
  {
    "text": "initializeSchema method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1415"
  },
  {
    "text": "to ensure that all your fields are present ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1416"
  },
  {
    "text": "and correctly typed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1419"
  },
  {
    "text": "before deploying your schema to production.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1420"
  },
  {
    "text": "It's been my pleasure to introduce ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1424"
  },
  {
    "text": "just some of the changes we've made ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1427"
  },
  {
    "text": "to NSPersistentCloudKitContainer to support sharing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1428"
  },
  {
    "text": "There's a lot of new API to learn about. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1432"
  },
  {
    "text": "So we've updated our sample application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1434"
  },
  {
    "text": "and the documentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1437"
  },
  {
    "text": "to demonstrate how you can use it in your own applications, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1438"
  },
  {
    "text": "including how you can write tests to verify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1442"
  },
  {
    "text": "how your application responds ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1445"
  },
  {
    "text": "to the different states objects can be in ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1447"
  },
  {
    "text": "when working with CloudKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1449"
  },
  {
    "text": "And be sure to let us know if you run into any issues ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1451"
  },
  {
    "text": "by filing bugs with Feedback Assistant. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1454"
  },
  {
    "text": "As always, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1457"
  },
  {
    "text": "I can't wait to see what you build ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1459"
  },
  {
    "text": "with NSPersistentCloudKitContainer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1460"
  },
  {
    "text": "Stay active, close your rings, and have a great WWDC 2021. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1462"
  },
  {
    "text": "[music]",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10015/?time=1468"
  }
]