[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=2"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=7"
  },
  {
    "text": "Jer Noble: Hello, I'm Jer! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=9"
  },
  {
    "text": "And I work on media playback ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=11"
  },
  {
    "text": "in WebKit and Safari here at Apple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=12"
  },
  {
    "text": "People love watching their favorite shows and movies ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=15"
  },
  {
    "text": "and listening to their music together, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=18"
  },
  {
    "text": "whether it’s with people in the same room, next door, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=20"
  },
  {
    "text": "or on the other side of the world. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=23"
  },
  {
    "text": "And now with GroupActivities, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=24"
  },
  {
    "text": "it’s easier than ever to provide a SharePlay experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=26"
  },
  {
    "text": "to your users, wherever they are. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=29"
  },
  {
    "text": "In this session, we'll cover four topics. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=32"
  },
  {
    "text": "An introduction to coordinated playback in Safari; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=35"
  },
  {
    "text": "how to prepare your iOS app to work with SharePlay in Safari; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=39"
  },
  {
    "text": "how to adopt the Media Session API in your app's web page; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=44"
  },
  {
    "text": "and a new web API for coordinating playback ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=49"
  },
  {
    "text": "across multiple devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=52"
  },
  {
    "text": "So let’s start by talking a little bit about SharePlay ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=55"
  },
  {
    "text": "and Safari. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=58"
  },
  {
    "text": "In the previous session, you learned how to create ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=60"
  },
  {
    "text": "an amazing SharePlay experience in your iPhone ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=62"
  },
  {
    "text": "and iPad applications with GroupActivities. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=65"
  },
  {
    "text": "And on macOS Monterey, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=69"
  },
  {
    "text": "you can bring that same experience -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=70"
  },
  {
    "text": "along with your great iPhone and iPad apps -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=72"
  },
  {
    "text": "to Mac using Catalyst. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=75"
  },
  {
    "text": "And if your application has a companion website, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=78"
  },
  {
    "text": "you can bring that same amazing SharePlay experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=80"
  },
  {
    "text": "to your Mac Safari 15 users, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=83"
  },
  {
    "text": "without requiring those users to download your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=85"
  },
  {
    "text": "from the App Store. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=88"
  },
  {
    "text": "And that’s what I’m going to show you how to do ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=89"
  },
  {
    "text": "in this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=91"
  },
  {
    "text": "I’ve been working on an iPhone application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=93"
  },
  {
    "text": "that lets you watch movie trailers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=95"
  },
  {
    "text": "I’ve already added support for GroupActivities to my app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=96"
  },
  {
    "text": "and that lets friends watch movie trailers together ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=100"
  },
  {
    "text": "over FaceTime. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=102"
  },
  {
    "text": "But my movie trailers app also has a website. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=103"
  },
  {
    "text": "And here’s how it should look once I add support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=106"
  },
  {
    "text": "for GroupActivities in that web page as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=109"
  },
  {
    "text": "I’m on a FaceTime call with my friend Sam. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=113"
  },
  {
    "text": "Sam loves watching movie trailers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=115"
  },
  {
    "text": "so I’ve asked them ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=117"
  },
  {
    "text": "to help me test this new Movie Trailers app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=118"
  },
  {
    "text": "When they start playing a new trailer in that app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=120"
  },
  {
    "text": "during our call, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=123"
  },
  {
    "text": "I’ll be invited to watch that trailer through a notification. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=124"
  },
  {
    "text": "It will give me the option to join the session in Safari. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=129"
  },
  {
    "text": "When I click that notification, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=132"
  },
  {
    "text": "Safari will be launched with a URL for the shared content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=135"
  },
  {
    "text": "and when Sam starts playing the trailer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=138"
  },
  {
    "text": "it will play here in Safari at the same time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=140"
  },
  {
    "text": "I can pause, play, and even seek the video here in Safari, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=143"
  },
  {
    "text": "and everyone else in the session will see those same commands ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=147"
  },
  {
    "text": "reflected in their local video at the same time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=150"
  },
  {
    "text": "It's going to be really great! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=153"
  },
  {
    "text": "So, what will it take to add GroupActivities support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=155"
  },
  {
    "text": "to the movie trailers website? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=158"
  },
  {
    "text": "Before we take a look under the hood of Safari -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=160"
  },
  {
    "text": "at the new Web APIs available in Safari 15 -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=162"
  },
  {
    "text": "let's talk about how to get your app ready to work ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=165"
  },
  {
    "text": "with Safari through GroupActivities. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=167"
  },
  {
    "text": "In order to join a GroupActivities session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=170"
  },
  {
    "text": "with Safari, a user with your iPhone or iPad app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=172"
  },
  {
    "text": "will need to create a GroupSessionActivity ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=175"
  },
  {
    "text": "with a fallbackURL that points to your website. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=178"
  },
  {
    "text": "The fallbackURL must identify not just your website, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=182"
  },
  {
    "text": "but the specific content to be played. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=186"
  },
  {
    "text": "When a Watch Together invitation is issued by an iPhone user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=188"
  },
  {
    "text": "to a user on a Mac, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=192"
  },
  {
    "text": "Safari will be launched and asked to load the URL ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=194"
  },
  {
    "text": "that you provide in GroupSessionActivity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=197"
  },
  {
    "text": "Once the fallbackURL is loaded in Safari, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=200"
  },
  {
    "text": "your site will need to implement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=203"
  },
  {
    "text": "a few simple but important Web APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=204"
  },
  {
    "text": "The first is Media Session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=207"
  },
  {
    "text": "Media Session is a standard Web API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=209"
  },
  {
    "text": "which allows your site to tell the browser -- Safari -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=211"
  },
  {
    "text": "more about the current state of media playback ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=214"
  },
  {
    "text": "within your page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=217"
  },
  {
    "text": "Your site can tell the browser the current play state, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=219"
  },
  {
    "text": "the duration of your content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=222"
  },
  {
    "text": "It can provide artwork for the current playback item. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=223"
  },
  {
    "text": "It can even tell the browser that the current content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=226"
  },
  {
    "text": "is an advertisement that can be skipped. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=229"
  },
  {
    "text": "Once the Browser has all this metadata available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=232"
  },
  {
    "text": "it can provide that metadata to the rest of the operating system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=235"
  },
  {
    "text": "and present it to your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=238"
  },
  {
    "text": "outside of the browser window itself. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=240"
  },
  {
    "text": "One place the operating system displays that data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=242"
  },
  {
    "text": "is within something called \"Now Playing.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=245"
  },
  {
    "text": "Now Playing is a great way for users to quickly see ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=247"
  },
  {
    "text": "and control the media that they’re enjoying right now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=250"
  },
  {
    "text": "In iOS, users can access Now Playing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=253"
  },
  {
    "text": "from the Control Center as well as from the Lock screen. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=256"
  },
  {
    "text": "And now in macOS Monterey, users can access Now Playing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=259"
  },
  {
    "text": "directly from the menu bar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=263"
  },
  {
    "text": "And Safari will use the information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=265"
  },
  {
    "text": "provided through Media Session to populate Now Playing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=267"
  },
  {
    "text": "with your content’s title, duration, play state, artwork, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=270"
  },
  {
    "text": "and more. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=274"
  },
  {
    "text": "Now Playing also allows users to control playback ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=275"
  },
  {
    "text": "of what they’re listening to, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=278"
  },
  {
    "text": "by showing the user a simple set of playback controls. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=279"
  },
  {
    "text": "Your site can register with the Media Session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=283"
  },
  {
    "text": "for specific actions to perform ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=285"
  },
  {
    "text": "when a user interacts with Now Playing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=287"
  },
  {
    "text": "so that for example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=289"
  },
  {
    "text": "when a user taps the Play button in Now Playing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=291"
  },
  {
    "text": "Safari can run your site’s own action handler ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=293"
  },
  {
    "text": "to begin playback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=296"
  },
  {
    "text": "Media Session gives your site complete control ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=298"
  },
  {
    "text": "over what metadata to expose to the browser, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=301"
  },
  {
    "text": "as well as control over how to implement playback commands. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=304"
  },
  {
    "text": "Need to do some set up or preflighting ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=308"
  },
  {
    "text": "before beginning playback? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=309"
  },
  {
    "text": "No problem. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=311"
  },
  {
    "text": "With mediaSession’s play action handler, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=312"
  },
  {
    "text": "now you can. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=315"
  },
  {
    "text": "If your site has previously adopted Media Session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=316"
  },
  {
    "text": "you’re halfway done already. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=319"
  },
  {
    "text": "But the movie trailers site hasn’t adopted Media Session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=321"
  },
  {
    "text": "yet, so let’s add support for that now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=324"
  },
  {
    "text": "This site will want to add actions for play, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=327"
  },
  {
    "text": "pause, and seekto. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=330"
  },
  {
    "text": "To do so, we’ll use the mediaSession property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=332"
  },
  {
    "text": "of navigator. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=335"
  },
  {
    "text": "Let’s first add an action handler for play. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=338"
  },
  {
    "text": "We’ll call mediaSession. setActionHandler(), ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=341"
  },
  {
    "text": "passing in the string play and an inline function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=344"
  },
  {
    "text": "that just calls play() on our video element. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=347"
  },
  {
    "text": "Then, we’ll do the same for pause and seekto. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=350"
  },
  {
    "text": "And to make sure that we’re accurately ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=356"
  },
  {
    "text": "representing playback state to the browser, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=357"
  },
  {
    "text": "we’ll add event listeners to our video element ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=360"
  },
  {
    "text": "and update mediaSession when that state changes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=363"
  },
  {
    "text": "First, let’s add a function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=367"
  },
  {
    "text": "called updateMediaSessionState(). ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=368"
  },
  {
    "text": "It will query the video element ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=371"
  },
  {
    "text": "to find out if it’s playing or paused. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=372"
  },
  {
    "text": "Then it will set mediaSession’s playbackState property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=376"
  },
  {
    "text": "to either the string playing or paused, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=378"
  },
  {
    "text": "depending on the video element’s playback state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=381"
  },
  {
    "text": "Next, it will query the video element’s duration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=386"
  },
  {
    "text": "playback rate, and current time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=389"
  },
  {
    "text": "Then, using those values, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=391"
  },
  {
    "text": "it will call mediaSession’s setPositionState() function, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=393"
  },
  {
    "text": "passing in those values in the dictionary parameter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=397"
  },
  {
    "text": "Then, let’s add an event listener ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=401"
  },
  {
    "text": "to detect when those values change, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=402"
  },
  {
    "text": "and call updateMediaSessionState() ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=404"
  },
  {
    "text": "to update mediaSession with those new values. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=406"
  },
  {
    "text": "We’ll need an event listener for playing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=410"
  },
  {
    "text": "pause, duration change, rate change, and time change. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=412"
  },
  {
    "text": "And last, because the movie trailers website ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=418"
  },
  {
    "text": "has both a title string and a URL for the title artwork, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=420"
  },
  {
    "text": "we can set the Media Session’s metadata property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=424"
  },
  {
    "text": "to a new MediaMetadata object containing those values. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=427"
  },
  {
    "text": "So let’s try it out! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=433"
  },
  {
    "text": "I’ll reload my page in Safari, begin playing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=436"
  },
  {
    "text": "then click on the Now Playing icon in the system menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=440"
  },
  {
    "text": "And I see the title and artwork in the Now Playing panel. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=443"
  },
  {
    "text": "And when I tap the Pause button, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=445"
  },
  {
    "text": "our pause action handler is called and playback pauses. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=447"
  },
  {
    "text": "Media Session provides the building blocks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=452"
  },
  {
    "text": "for a Watch Together experience in a web page, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=454"
  },
  {
    "text": "by providing a mechanism for the browser to tell the page ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=457"
  },
  {
    "text": "it should start or stop playback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=460"
  },
  {
    "text": "Now we’re ready move onto the second part ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=463"
  },
  {
    "text": "of creating a cowatching experience in our web page: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=465"
  },
  {
    "text": "coordinating playback across every device in the session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=467"
  },
  {
    "text": "To do so, we’ve extended Media Session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=471"
  },
  {
    "text": "by adding a new property on it called \"Coordinator.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=474"
  },
  {
    "text": "Your page will use Media Session's Coordinator ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=478"
  },
  {
    "text": "to inform every other user in the session of the page’s intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=480"
  },
  {
    "text": "to begin or pause playback, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=484"
  },
  {
    "text": "to seek to a specific point in the media’s timeline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=487"
  },
  {
    "text": "or to move to the next item in a playlist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=489"
  },
  {
    "text": "The Coordinator will communicate those intents ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=493"
  },
  {
    "text": "with all the other devices in the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=496"
  },
  {
    "text": "and listen for changes to every other device's play state, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=498"
  },
  {
    "text": "resolve conflicts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=502"
  },
  {
    "text": "and wait for everyone to be ready to begin playback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=503"
  },
  {
    "text": "And when everyone is ready, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=507"
  },
  {
    "text": "the Coordinator will use the Media Session action handlers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=508"
  },
  {
    "text": "we added earlier to start playback ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=511"
  },
  {
    "text": "along all the other users in the session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=514"
  },
  {
    "text": "And if another user pauses playback for whatever reason, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=516"
  },
  {
    "text": "the Coordinator will call your Media Session’s ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=520"
  },
  {
    "text": "pause action handler. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=522"
  },
  {
    "text": "That said, I’d like to point out a few caveats. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=524"
  },
  {
    "text": "The Coordinator interface is an experimental web API; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=527"
  },
  {
    "text": "it has yet to go through standardization, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=531"
  },
  {
    "text": "and while that process will likely improve this API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=533"
  },
  {
    "text": "some aspects of the API may change. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=536"
  },
  {
    "text": "To find out more, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=539"
  },
  {
    "text": "please watch the W3C’s Media Session GitHub page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=540"
  },
  {
    "text": "This API is currently only implemented in Safari, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=545"
  },
  {
    "text": "though the GroupActivities framework, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=548"
  },
  {
    "text": "which Safari uses to implement the Coordinator, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=550"
  },
  {
    "text": "can -- and we hope will -- be adopted by other Mac browsers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=553"
  },
  {
    "text": "And the final caveat is that while your users can join ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=558"
  },
  {
    "text": "an existing session in Safari, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=561"
  },
  {
    "text": "a GroupSession currently must be initiated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=563"
  },
  {
    "text": "from an iPhone, iPad, or macOS application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=566"
  },
  {
    "text": "So let’s add support for the Coordinator now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=570"
  },
  {
    "text": "The first thing I’d like to do is join the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=575"
  },
  {
    "text": "once it becomes available. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=577"
  },
  {
    "text": "So I’m going to add a coordinatorchange event listener ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=579"
  },
  {
    "text": "to mediaSession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=582"
  },
  {
    "text": "In the handler, if there’s a non-null coordinator property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=584"
  },
  {
    "text": "on mediaSession, I’ll call its join() function. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=587"
  },
  {
    "text": "I’d also like to add an icon to my controls ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=591"
  },
  {
    "text": "to show that we’re playing back in a session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=594"
  },
  {
    "text": "So in the handler, I’ll either show or hide the icon, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=596"
  },
  {
    "text": "based on whether there’s a coordinator property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=600"
  },
  {
    "text": "on mediaSession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=602"
  },
  {
    "text": "I’m also going to hook up a click event listener to the icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=604"
  },
  {
    "text": "to call leave() on the coordinator. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=608"
  },
  {
    "text": "Next, I’m going to modify the event handlers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=613"
  },
  {
    "text": "for my custom controls ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=615"
  },
  {
    "text": "to check for the presence of a coordinator, and if we have one, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=616"
  },
  {
    "text": "call the appropriate coordinator function instead. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=620"
  },
  {
    "text": "I’ll add one for my Play button, and then for my Pause button, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=623"
  },
  {
    "text": "and also for timeline slider. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=628"
  },
  {
    "text": "And let’s see it in action! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=631"
  },
  {
    "text": "I’ve got an invite here from my friend Sam, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=634"
  },
  {
    "text": "and I’m going to accept it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=637"
  },
  {
    "text": "My page loads to the same content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=639"
  },
  {
    "text": "that Sam is watching on their iPhone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=641"
  },
  {
    "text": "And when I click the Play button, both Sam's iPhone ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=643"
  },
  {
    "text": "and my web page begin playing simultaneously. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=647"
  },
  {
    "text": "Allie Fox: The way we get there is an adventure. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=650"
  },
  {
    "text": "Dina: I'm scared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=653"
  },
  {
    "text": "Allie: If it didn't feel that way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=657"
  },
  {
    "text": "it wouldn't be an adventure. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=658"
  },
  {
    "text": "♪ < ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=659"
  },
  {
    "text": "That was great. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=662"
  },
  {
    "text": "Now that the trailer's ended, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=663"
  },
  {
    "text": "Sam uses the iPhone to scrub back to the beginning.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=664"
  },
  {
    "text": "We think that users are going to love watching or listening ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=672"
  },
  {
    "text": "to their favorite content together in your applications, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=675"
  },
  {
    "text": "whether it’s on their iPhone, iPad, Apple TV, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=678"
  },
  {
    "text": "or in Safari running on their Mac. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=682"
  },
  {
    "text": "And we hope you can now bring that experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=685"
  },
  {
    "text": "to all of your users, wherever they are. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=688"
  },
  {
    "text": "For more information about GroupActivities APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=691"
  },
  {
    "text": "start with the sessions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=694"
  },
  {
    "text": "\"Coordinate media playback with Group Activities\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=695"
  },
  {
    "text": "and \"Design for Group Activities.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=699"
  },
  {
    "text": "If you’re interested in the other new web APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=702"
  },
  {
    "text": "that will be available in Safari 15, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=704"
  },
  {
    "text": "make sure to check out the session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=706"
  },
  {
    "text": "\"Develop advanced web content.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=708"
  },
  {
    "text": "Thanks for coming and enjoy the rest of your WWDC21. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=711"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10189/?time=715"
  }
]