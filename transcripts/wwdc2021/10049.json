[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=2"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=7"
  },
  {
    "text": "Daniel Li: Welcome to \"Add intelligence to your widgets.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=9"
  },
  {
    "text": "My name’s Daniel, and I’m an engineer on ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=12"
  },
  {
    "text": "the Proactive Intelligence team at Apple.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=14"
  },
  {
    "text": "In this session, I’ll show you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=17"
  },
  {
    "text": "how your widgets can work with the system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=18"
  },
  {
    "text": "to provide intelligent experiences for your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=20"
  },
  {
    "text": "so your widgets can show up right when they need them.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=22"
  },
  {
    "text": "Widgets live in many places.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=25"
  },
  {
    "text": "From the Home screen on iOS to Notification Center on macOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=27"
  },
  {
    "text": "widgets provide users with information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=32"
  },
  {
    "text": "that they can quickly view with just a glance.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=34"
  },
  {
    "text": "With iPadOS 15, widgets come to the iPad Home screen as well.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=37"
  },
  {
    "text": "There are now more places than ever ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=42"
  },
  {
    "text": "for your widgets to call home.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=43"
  },
  {
    "text": "I’ll first talk about what it means ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=45"
  },
  {
    "text": "for widgets to be intelligent in the system, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=47"
  },
  {
    "text": "and then I’ll show you how you can enable intelligence ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=50"
  },
  {
    "text": "for your widgets by donating relevant information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=52"
  },
  {
    "text": "with the available APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=55"
  },
  {
    "text": "Let’s first go over widget intelligence.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=57"
  },
  {
    "text": "On iPhone and iPad, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=59"
  },
  {
    "text": "widgets can be placed together in a Smart Stack, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=61"
  },
  {
    "text": "where they can be scrolled through ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=63"
  },
  {
    "text": "to provide different kinds of information in one place.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=64"
  },
  {
    "text": "When a user edits a stack, in addition to being able ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=68"
  },
  {
    "text": "to add, remove, or reorder widgets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=71"
  },
  {
    "text": "they can also view and manage ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=74"
  },
  {
    "text": "the stack’s intelligent behaviors.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=75"
  },
  {
    "text": "iOS 14 introduced Smart Rotate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=78"
  },
  {
    "text": "Smart Rotate allows the system, at the right time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=82"
  },
  {
    "text": "to automatically scroll to a widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=85"
  },
  {
    "text": "that is already in a stack.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=87"
  },
  {
    "text": "To know when to rotate to a widget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=89"
  },
  {
    "text": "the system uses relevance signals ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=91"
  },
  {
    "text": "that the widget provides alongside its timeline entries.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=93"
  },
  {
    "text": "It can also rotate to a widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=96"
  },
  {
    "text": "by learning patterns in the user’s behavior.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=98"
  },
  {
    "text": "It does so by receiving donations from the app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=101"
  },
  {
    "text": "whenever the user views information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=104"
  },
  {
    "text": "corresponding to the widget.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=106"
  },
  {
    "text": "With Smart Rotate, if I have a Weather widget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=108"
  },
  {
    "text": "a Reminders widget, and a Calendar widget in a stack, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=111"
  },
  {
    "text": "the Weather widget might tell the system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=115"
  },
  {
    "text": "to suggest itself in the morning when I wake up ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=116"
  },
  {
    "text": "to give me an overview of the day.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=119"
  },
  {
    "text": "At 9:30, the Calendar widget may tell the system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=121"
  },
  {
    "text": "that I have a meeting coming up at 10, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=124"
  },
  {
    "text": "so my stack might rotate to Calendar.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=127"
  },
  {
    "text": "In the afternoon, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=131"
  },
  {
    "text": "one of my reminders has a due date of 3:00 p.m., ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=132"
  },
  {
    "text": "so the widget might tell the stack ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=135"
  },
  {
    "text": "to rotate to Reminders.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=136"
  },
  {
    "text": "And in the evening, the Weather widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=138"
  },
  {
    "text": "might tell the system to show me the weather again ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=140"
  },
  {
    "text": "because it just started raining, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=143"
  },
  {
    "text": "so I know to take an umbrella if I go out for dinner.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=144"
  },
  {
    "text": "iOS 15 introduces a new feature called Widget Suggestions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=148"
  },
  {
    "text": "a brand-new way for users to discover your widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=152"
  },
  {
    "text": "and receive proactive and relevant information.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=154"
  },
  {
    "text": "For Smart Stacks with Widget Suggestions enabled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=158"
  },
  {
    "text": "the system can insert a new widget into a stack ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=160"
  },
  {
    "text": "that doesn’t already contain it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=163"
  },
  {
    "text": "The system can do this given an explicit donation from your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=166"
  },
  {
    "text": "And like with Smart Rotate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=170"
  },
  {
    "text": "the system can also make a Widget Suggestion ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=172"
  },
  {
    "text": "by learning the user’s behavioral patterns in your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=174"
  },
  {
    "text": "With Widget Suggestions, if I only had a Weather widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=179"
  },
  {
    "text": "and a Reminders widget in my stack, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=182"
  },
  {
    "text": "I would still see Smart Rotations to these widgets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=184"
  },
  {
    "text": "throughout the day.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=186"
  },
  {
    "text": "But since I have that meeting at 10:00, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=189"
  },
  {
    "text": "and I don’t have the Calendar widget in my stack, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=190"
  },
  {
    "text": "the Calendar app may tell the system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=193"
  },
  {
    "text": "to proactively insert the widget into my stack at 9:30 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=195"
  },
  {
    "text": "so I don’t forget.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=198"
  },
  {
    "text": "After the widget is no longer relevant, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=200"
  },
  {
    "text": "the system will remove it from my stack.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=202"
  },
  {
    "text": "When I finish my evening workout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=205"
  },
  {
    "text": "the system might show me the Fitness widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=207"
  },
  {
    "text": "so I can get a quick summary of my day’s progress ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=209"
  },
  {
    "text": "in closing my rings.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=211"
  },
  {
    "text": "And afterward, the stack will again return ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=213"
  },
  {
    "text": "to its original state.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=215"
  },
  {
    "text": "Since apps tell the system to temporarily insert widgets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=217"
  },
  {
    "text": "when they’re useful, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=220"
  },
  {
    "text": "they can help users discover widgets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=221"
  },
  {
    "text": "that they may not even know existed.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=223"
  },
  {
    "text": "Now let’s see how you can adopt both Smart Rotate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=225"
  },
  {
    "text": "and Widget Suggestions using the available APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=227"
  },
  {
    "text": "to donate relevant signals to the system.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=230"
  },
  {
    "text": "When donating, you should consider ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=233"
  },
  {
    "text": "all the possible information your widget can show ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=235"
  },
  {
    "text": "and determine which types are more suitable for a suggestion ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=238"
  },
  {
    "text": "than others.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=240"
  },
  {
    "text": "The end goal when choosing how to make donations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=242"
  },
  {
    "text": "to the system is to provide ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=244"
  },
  {
    "text": "timely, glanceable information with obvious value to the user, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=246"
  },
  {
    "text": "so you should consider highlighting situations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=250"
  },
  {
    "text": "that users may find more interesting than others.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=252"
  },
  {
    "text": "A weather widget, for example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=255"
  },
  {
    "text": "could consider imminent rainfall to be a situation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=257"
  },
  {
    "text": "suitable for suggestion as opposed to, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=260"
  },
  {
    "text": "say, a point in time where only the temperature has changed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=263"
  },
  {
    "text": "by an unremarkable amount.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=265"
  },
  {
    "text": "You can adopt Smart Rotate and Widget Suggestions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=267"
  },
  {
    "text": "for your widgets in three separate ways.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=270"
  },
  {
    "text": "First, your app can donate an INRelevantShortcut ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=273"
  },
  {
    "text": "to tell the system when it should create ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=276"
  },
  {
    "text": "a Widget Suggestion for one of your widgets.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=277"
  },
  {
    "text": "Second, your widget can provide relevance scores ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=280"
  },
  {
    "text": "through TimelineEntryRelevance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=283"
  },
  {
    "text": "to enable Smart Rotations when the widget is in a stack.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=285"
  },
  {
    "text": "And third, if your widget is configurable, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=289"
  },
  {
    "text": "when your app donates the configuration intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=291"
  },
  {
    "text": "using INInteraction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=293"
  },
  {
    "text": "the system can learn the user’s behavioral patterns ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=295"
  },
  {
    "text": "to promote your widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=298"
  },
  {
    "text": "through both Smart Rotations and Widget Suggestions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=299"
  },
  {
    "text": "Each of these APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=303"
  },
  {
    "text": "enhances your widget’s presence in powerful ways ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=304"
  },
  {
    "text": "but they all work a bit differently, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=307"
  },
  {
    "text": "so let’s break it down.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=309"
  },
  {
    "text": "Let’s start with donating INRelevantShortcuts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=311"
  },
  {
    "text": "for Widget Suggestions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=313"
  },
  {
    "text": "Whether you use an intent to configure your widget or not, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=315"
  },
  {
    "text": "when your app becomes aware of a highly relevant situation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=318"
  },
  {
    "text": "to show your widget to the user, donating an INRelevantShortcut ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=321"
  },
  {
    "text": "allows the system to proactively insert your widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=326"
  },
  {
    "text": "into one of the user’s stacks if they don’t already ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=329"
  },
  {
    "text": "have your widget on their Home screen.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=331"
  },
  {
    "text": "A relevant shortcut can either ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=334"
  },
  {
    "text": "specify a period of time that it’s relevant ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=336"
  },
  {
    "text": "or have the system determine when to insert the widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=338"
  },
  {
    "text": "based on the user’s behavioral patterns.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=341"
  },
  {
    "text": "INRelevantShortcut supports both static ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=344"
  },
  {
    "text": "and intent-configured widgets but the donation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=346"
  },
  {
    "text": "will look a little different for each configuration type, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=349"
  },
  {
    "text": "so let’s take a look at how to adopt for both types.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=352"
  },
  {
    "text": "If your widget supports StaticConfiguration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=355"
  },
  {
    "text": "simply create a new INRelevantShortcut ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=358"
  },
  {
    "text": "without an intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=360"
  },
  {
    "text": "and set the widgetKind property to the widget’s kind string.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=361"
  },
  {
    "text": "This tells the system which of your app’s widgets to suggest.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=365"
  },
  {
    "text": "Then, optionally set the relevanceProviders property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=370"
  },
  {
    "text": "to an array of INRelevanceProviders.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=373"
  },
  {
    "text": "This tells the system when to suggest your widget.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=376"
  },
  {
    "text": "I’ll explain this in more detail in a bit.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=379"
  },
  {
    "text": "If your widget supports IntentConfiguration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=382"
  },
  {
    "text": "create an instance of the intent used for configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=384"
  },
  {
    "text": "with the necessary parameters.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=387"
  },
  {
    "text": "Then create the INRelevantShortcut ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=389"
  },
  {
    "text": "by passing in the intent as an INShortcut.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=391"
  },
  {
    "text": "And of course, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=394"
  },
  {
    "text": "set the widgetKind and relevanceProviders properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=396"
  },
  {
    "text": "just as you would for a static widget.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=398"
  },
  {
    "text": "To donate a relevant shortcut, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=401"
  },
  {
    "text": "include it in an array of relevant shortcuts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=402"
  },
  {
    "text": "to set in the default INRelevantShortcutStore.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=404"
  },
  {
    "text": "To update the donated shortcuts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=408"
  },
  {
    "text": "you can replace the array of relevant shortcuts in the store ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=410"
  },
  {
    "text": "to a new array.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=413"
  },
  {
    "text": "This means that you can invalidate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=414"
  },
  {
    "text": "a previously donated relevant shortcut ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=416"
  },
  {
    "text": "by omitting it in the new array.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=418"
  },
  {
    "text": "And donating a relevant shortcut that contains an intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=420"
  },
  {
    "text": "can also surface the intent on the Siri watch face.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=423"
  },
  {
    "text": "To tell the system when it can insert your widget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=426"
  },
  {
    "text": "set an array of INRelevanceProviders ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=429"
  },
  {
    "text": "on your relevant shortcut.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=431"
  },
  {
    "text": "There are two options here.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=433"
  },
  {
    "text": "First, you can use INDateRelevanceProvider ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=435"
  },
  {
    "text": "to supply start and end dates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=438"
  },
  {
    "text": "for a fixed, known time period of relevance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=439"
  },
  {
    "text": "such as an upcoming event or breaking news.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=442"
  },
  {
    "text": "You can even use multiple providers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=445"
  },
  {
    "text": "to specify more than one relevant time period.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=447"
  },
  {
    "text": "Second, you can also choose to supply ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=451"
  },
  {
    "text": "an empty array of relevance providers to tell the system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=453"
  },
  {
    "text": "that your widget has something new to show, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=456"
  },
  {
    "text": "and the system will choose a time to suggest the widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=458"
  },
  {
    "text": "based on when the user typically uses your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=461"
  },
  {
    "text": "All other relevance providers support INRelevantShortcuts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=465"
  },
  {
    "text": "for Siri watch face ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=468"
  },
  {
    "text": "and are not supported by Widget Suggestions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=469"
  },
  {
    "text": "Now I’ll walk you through what an adoption might look like ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=472"
  },
  {
    "text": "using an example app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=475"
  },
  {
    "text": "We built an app called Cards ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=478"
  },
  {
    "text": "that lets you view the transactions and balances ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=479"
  },
  {
    "text": "on all of your credit cards ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=481"
  },
  {
    "text": "and includes a widget that shows recent purchases.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=483"
  },
  {
    "text": "Let’s see how we can enable Widget Suggestions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=486"
  },
  {
    "text": "for the Recent Purchases widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=488"
  },
  {
    "text": "by donating INRelevantShortcuts in our app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=490"
  },
  {
    "text": "We want to suggest the widget after a recent purchase ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=493"
  },
  {
    "text": "has just been made on one of our cards.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=495"
  },
  {
    "text": "Since the widget is configured with an intent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=498"
  },
  {
    "text": "in order to allow Widget Suggestions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=501"
  },
  {
    "text": "we’re first going to make sure that our intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=503"
  },
  {
    "text": "supports donations in our intent definition file.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=505"
  },
  {
    "text": "Here’s our intent editor for our ViewRecentPurchases intent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=508"
  },
  {
    "text": "which tells our widget which credit card to show ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=512"
  },
  {
    "text": "and which merchant category to filter the purchases by.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=514"
  },
  {
    "text": "We want to make sure that ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=518"
  },
  {
    "text": "\"Intent is eligible for Siri Suggestions\" is checked.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=519"
  },
  {
    "text": "This enables suggestions for our widget on the Home screen ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=523"
  },
  {
    "text": "as well as suggestions in other places around iOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=526"
  },
  {
    "text": "if we choose to donate them, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=529"
  },
  {
    "text": "but we’ll get to that later with INInteractions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=531"
  },
  {
    "text": "Then we need to create a parameter combination ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=534"
  },
  {
    "text": "that includes the necessary parameters to form the intent.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=536"
  },
  {
    "text": "Since we need both the credit card ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=540"
  },
  {
    "text": "and the merchant category to configure our widget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=542"
  },
  {
    "text": "we’ll create a supported combination ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=545"
  },
  {
    "text": "with both card and category parameters.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=547"
  },
  {
    "text": "Now we can create the intent in our code.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=551"
  },
  {
    "text": "In this code, our app was just notified that the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=554"
  },
  {
    "text": "has just made a purchase.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=558"
  },
  {
    "text": "To make a donation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=560"
  },
  {
    "text": "we start by creating an empty array of INRelevantShortcuts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=561"
  },
  {
    "text": "in case we want to donate multiple shortcuts.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=565"
  },
  {
    "text": "We initialize the intent that we used to configure ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=569"
  },
  {
    "text": "the Recent Purchases widget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=571"
  },
  {
    "text": "and set any parameters that we might need.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=572"
  },
  {
    "text": "Here, we want to set the card parameter on the intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=576"
  },
  {
    "text": "to a card object referring to the card ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=578"
  },
  {
    "text": "that the recent purchase was made on, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=581"
  },
  {
    "text": "and set the category to all ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=583"
  },
  {
    "text": "to have the widget show all purchases on that card.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=585"
  },
  {
    "text": "Then we create an INShortcut with the intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=589"
  },
  {
    "text": "and create an INRelevantShortcut with it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=592"
  },
  {
    "text": "We set the shortcut role to be the information shortcut role, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=595"
  },
  {
    "text": "since the user views information in the widget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=598"
  },
  {
    "text": "and set the widgetKind.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=601"
  },
  {
    "text": "We provide an INDateRelevanceProvider ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=604"
  },
  {
    "text": "starting now and ending in 30 minutes, or 1800 seconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=606"
  },
  {
    "text": "so that the system can remove it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=609"
  },
  {
    "text": "30 minutes right after the purchase was made.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=611"
  },
  {
    "text": "Then we add the shortcut to our array of relevantShortcuts.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=615"
  },
  {
    "text": "Finally, we donate the shortcut ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=620"
  },
  {
    "text": "by setting our relevantShortcuts array ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=622"
  },
  {
    "text": "in the default INRelevantShortcutStore ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=623"
  },
  {
    "text": "and handle any errors in the completion handler.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=626"
  },
  {
    "text": "Now whenever a recent purchase is made, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=630"
  },
  {
    "text": "the system can make a Widget Suggestion ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=633"
  },
  {
    "text": "with the widget by proactively inserting it into a Smart Stack.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=634"
  },
  {
    "text": "Now let’s talk about TimelineEntryRelevance.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=639"
  },
  {
    "text": "When your widget provides timelines to WidgetKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=642"
  },
  {
    "text": "you can specify the relevance of your widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=645"
  },
  {
    "text": "by providing TimelineEntryRelevance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=647"
  },
  {
    "text": "in each timeline entry.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=649"
  },
  {
    "text": "Annotating an entry with relevance indicates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=652"
  },
  {
    "text": "how worthy the widget is of a Smart Rotation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=654"
  },
  {
    "text": "at the time of the entry.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=657"
  },
  {
    "text": "This worthiness of rotation is relative to all other entries ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=659"
  },
  {
    "text": "in the timelines that the widget provides, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=662"
  },
  {
    "text": "so you should determine which entries ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=664"
  },
  {
    "text": "may be more relevant to the user than others.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=666"
  },
  {
    "text": "TimelineEntryRelevance is an optional struct property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=670"
  },
  {
    "text": "on TimelineEntry, along with the date of the entry.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=673"
  },
  {
    "text": "The relevance struct contains a score and duration.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=677"
  },
  {
    "text": "The struct’s float score represents ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=681"
  },
  {
    "text": "how relevant this entry is compared to others.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=682"
  },
  {
    "text": "The higher the score, the more likely the system is ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=686"
  },
  {
    "text": "to rotate to the widget.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=688"
  },
  {
    "text": "When determining what scores to return, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=691"
  },
  {
    "text": "know that positive scores indicate timeline entries ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=693"
  },
  {
    "text": "that are eligible for Smart Rotate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=696"
  },
  {
    "text": "A score of zero tells the system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=699"
  },
  {
    "text": "that the widget should not be rotated to, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=701"
  },
  {
    "text": "such as when the widget doesn’t have ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=703"
  },
  {
    "text": "any information to show and rotating to the widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=704"
  },
  {
    "text": "would not be a positive experience for the user.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=707"
  },
  {
    "text": "Remember that the significance of any provided score ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=710"
  },
  {
    "text": "is relative to others in the widget’s timelines.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=712"
  },
  {
    "text": "Whatever scaling you decide to use for your relevance scores, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=715"
  },
  {
    "text": "just make sure that it’s consistent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=718"
  },
  {
    "text": "across the timelines you return.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=720"
  },
  {
    "text": "We’ll go over an example in a just a bit.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=722"
  },
  {
    "text": "The duration in the relevance struct ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=726"
  },
  {
    "text": "specifies how long the relevance score is valid.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=728"
  },
  {
    "text": "The system uses this, along with the entry’s date, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=731"
  },
  {
    "text": "to determine the valid timeframe ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=734"
  },
  {
    "text": "in which to rotate the stack to the widget.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=736"
  },
  {
    "text": "After the duration passes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=739"
  },
  {
    "text": "the system will treat the score as zero ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=741"
  },
  {
    "text": "until relevance is provided again in a future entry.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=742"
  },
  {
    "text": "You can specify a duration of zero to keep the score valid ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=746"
  },
  {
    "text": "until the next entry that provides relevance.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=749"
  },
  {
    "text": "Let’s take a look at what this looks like in code.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=751"
  },
  {
    "text": "Here we have our CardRecentPurchasesEntry struct, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=754"
  },
  {
    "text": "which conforms to the TimelineEntry protocol.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=758"
  },
  {
    "text": "Since the protocol requires an optional relevance property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=761"
  },
  {
    "text": "we can declare the relevance property in our struct.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=764"
  },
  {
    "text": "Now when we create the timeline entry, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=768"
  },
  {
    "text": "we can attach a TimelineEntryRelevance instance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=770"
  },
  {
    "text": "to our entries when we create our timeline.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=772"
  },
  {
    "text": "Now let’s work through what a timeline might look like ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=775"
  },
  {
    "text": "for the Recent Purchases widget and see some examples ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=777"
  },
  {
    "text": "for scores we can provide for our timeline relevance.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=780"
  },
  {
    "text": "Here’s an example timeline ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=784"
  },
  {
    "text": "that the Recent Purchases widget might return throughout a day.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=785"
  },
  {
    "text": "We might think, perhaps, that a user cares ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=789"
  },
  {
    "text": "more about purchases that involve higher spending.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=791"
  },
  {
    "text": "We can then make our scores for our purchases ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=794"
  },
  {
    "text": "scale linearly with the amount spent.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=796"
  },
  {
    "text": "Let’s leave the relevance durations as 0 for now.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=799"
  },
  {
    "text": "At 8:15, we would return a score of 0, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=803"
  },
  {
    "text": "since there’s no purchases to show.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=806"
  },
  {
    "text": "At 9:41, our 52 dollar and 60 cent purchase ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=809"
  },
  {
    "text": "means that our score would be 52.6, and so on.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=812"
  },
  {
    "text": "Plotting it on a graph, we see that our shopping spree ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=816"
  },
  {
    "text": "has a relatively high score compared to other scores, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=819"
  },
  {
    "text": "so the system will prioritize rotating to our widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=822"
  },
  {
    "text": "more with this entry than with other entries.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=824"
  },
  {
    "text": "The other entries still have positive scores, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=828"
  },
  {
    "text": "so the system could still rotate to the widget at those times, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=830"
  },
  {
    "text": "though with a lower priority.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=833"
  },
  {
    "text": "And since we set our durations to 0, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=836"
  },
  {
    "text": "the relevance scores stay valid until the next timeline entry ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=838"
  },
  {
    "text": "with a relevance update.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=841"
  },
  {
    "text": "We could just as well have chosen ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=843"
  },
  {
    "text": "another scoring mechanism.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=844"
  },
  {
    "text": "Let’s say we return a score of 50 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=846"
  },
  {
    "text": "if the purchase is above 50 dollars, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=848"
  },
  {
    "text": "and 1 for purchases below.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=850"
  },
  {
    "text": "Once again, we return 0 if there’s no purchases at all.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=852"
  },
  {
    "text": "For our grocery and shopping purchases ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=857"
  },
  {
    "text": "we returned 50, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=858"
  },
  {
    "text": "and for our spending at the Soup Diner ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=860"
  },
  {
    "text": "and the movie theater, we return 1.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=861"
  },
  {
    "text": "With the score graph, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=865"
  },
  {
    "text": "we can see that the score rises to 50 at 9:41 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=866"
  },
  {
    "text": "and stays there until 6:52.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=869"
  },
  {
    "text": "Since 50 is the highest possible score in our timeline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=872"
  },
  {
    "text": "the system is most likely to show our widget at this time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=876"
  },
  {
    "text": "Since our widget shows recent purchases, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=880"
  },
  {
    "text": "we don’t want the system to rotate to our widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=882"
  },
  {
    "text": "with purchases made a long time ago.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=885"
  },
  {
    "text": "So let’s only allow the system to rotate to our widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=887"
  },
  {
    "text": "within the 30 minutes after the purchase was made.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=890"
  },
  {
    "text": "To achieve this, we can use the duration property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=894"
  },
  {
    "text": "on the relevance struct.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=897"
  },
  {
    "text": "We set a relevance duration of 30 minutes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=898"
  },
  {
    "text": "or 1800 seconds, for each entry.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=901"
  },
  {
    "text": "By setting the duration of relevance to be half an hour, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=904"
  },
  {
    "text": "we’re telling the system to mark the entries ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=907"
  },
  {
    "text": "as eligible for rotation for half an hour, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=909"
  },
  {
    "text": "and then mark them as ineligible for rotation afterward.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=911"
  },
  {
    "text": "In these examples, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=914"
  },
  {
    "text": "we’re basing our score off of the purchase amount, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=916"
  },
  {
    "text": "but really, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=918"
  },
  {
    "text": "timeline relevance scores can be whatever you like.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=920"
  },
  {
    "text": "We could have also used which credit card it is, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=923"
  },
  {
    "text": "where the purchase was made, when the purchase was made, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=925"
  },
  {
    "text": "or something else entirely.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=928"
  },
  {
    "text": "There’s no one right way to do it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=930"
  },
  {
    "text": "Now onto donating INInteractions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=932"
  },
  {
    "text": "In your app, you can create and donate an intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=936"
  },
  {
    "text": "used to configure your widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=938"
  },
  {
    "text": "to enable both Smart Rotations and Widget Suggestions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=940"
  },
  {
    "text": "through INInteractions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=943"
  },
  {
    "text": "An app donates an INInteraction every time the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=945"
  },
  {
    "text": "views information in the app corresponding to information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=949"
  },
  {
    "text": "that the widget shows.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=952"
  },
  {
    "text": "Each donation is a data point ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=955"
  },
  {
    "text": "for the system’s behavioral model ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=956"
  },
  {
    "text": "that learns when the user tends to view ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=958"
  },
  {
    "text": "information in the app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=960"
  },
  {
    "text": "Whenever the model predicts that the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=963"
  },
  {
    "text": "may want to perform the interaction again, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=965"
  },
  {
    "text": "the system creates a suggestion for the intent.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=967"
  },
  {
    "text": "And as long as the donated intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=971"
  },
  {
    "text": "is the same one used to configure your widget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=973"
  },
  {
    "text": "the system will automatically produce both Smart Rotations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=975"
  },
  {
    "text": "and Widget Suggestions from the prediction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=978"
  },
  {
    "text": "along with other suggestions around the system.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=980"
  },
  {
    "text": "To get going with donating INInteraction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=983"
  },
  {
    "text": "in the Cards project, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=985"
  },
  {
    "text": "just as with donating INRelevantShortcuts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=986"
  },
  {
    "text": "we want to make sure that our intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=989"
  },
  {
    "text": "is eligible for suggestions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=991"
  },
  {
    "text": "and create a supported combination ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=993"
  },
  {
    "text": "with the parameters necessary to configure our widget.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=995"
  },
  {
    "text": "Here, also make sure to eventually design ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=998"
  },
  {
    "text": "the suggestion UI for when your donation shows up ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1000"
  },
  {
    "text": "in other locations in the system.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1003"
  },
  {
    "text": "In the Cards app, whenever our user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1006"
  },
  {
    "text": "views all of the recent purchases for a card, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1008"
  },
  {
    "text": "we can donate our widget’s intent to let the system know ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1011"
  },
  {
    "text": "that the user is currently interested in the information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1014"
  },
  {
    "text": "that our widget shows.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1016"
  },
  {
    "text": "First, we initialize our intent.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1018"
  },
  {
    "text": "We set the card parameter to the card ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1022"
  },
  {
    "text": "that the user is currently viewing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1024"
  },
  {
    "text": "and set the category to be all, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1026"
  },
  {
    "text": "since the user is currently viewing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1028"
  },
  {
    "text": "all transactions for this card.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1029"
  },
  {
    "text": "Then we’ll wrap our intent with an INInteraction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1033"
  },
  {
    "text": "and call the donate method.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1036"
  },
  {
    "text": "Now the system will know that the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1038"
  },
  {
    "text": "has just looked at the recent purchases for this card ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1040"
  },
  {
    "text": "in our app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1043"
  },
  {
    "text": "After a while, the system can learn ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1044"
  },
  {
    "text": "when the user tends to do this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1046"
  },
  {
    "text": "and suggest the matching widget at the most opportune times.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1048"
  },
  {
    "text": "Not only do the INInteraction donations you make ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1053"
  },
  {
    "text": "enable Smart Rotations and Widget Suggestions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1055"
  },
  {
    "text": "but they also allow the system to show your intent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1058"
  },
  {
    "text": "as a Siri Suggestion on the Lock Screen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1060"
  },
  {
    "text": "in Spotlight, and in the Siri Shortcut Suggestions widget.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1063"
  },
  {
    "text": "This is true even if your widget doesn’t adopt intents.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1067"
  },
  {
    "text": "To learn more about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1071"
  },
  {
    "text": "what donating INInteractions can do for your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1072"
  },
  {
    "text": "and getting even more out of the on-device intelligence, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1075"
  },
  {
    "text": "be sure to check out the talk, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1078"
  },
  {
    "text": "“Donate intents and expand your app’s presence.” ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1080"
  },
  {
    "text": "So, INRelevantShortcut, TimelineEntryRelevance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1084"
  },
  {
    "text": "and INInteraction are the three ways in which you can support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1087"
  },
  {
    "text": "Smart Rotate and Widget Suggestions for your widgets.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1090"
  },
  {
    "text": "Due to other donations in the system, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1094"
  },
  {
    "text": "along with performance considerations, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1096"
  },
  {
    "text": "a donation is not a guarantee ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1098"
  },
  {
    "text": "that your widget will be surfaced.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1100"
  },
  {
    "text": "But by adopting these APIs in a cohesive manner, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1102"
  },
  {
    "text": "you can work with the system to give your widget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1105"
  },
  {
    "text": "the best shot possible at being shown.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1107"
  },
  {
    "text": "While developing, it may also be helpful to bypass ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1110"
  },
  {
    "text": "the system’s limitations for surfacing widgets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1112"
  },
  {
    "text": "by turning on WidgetKit Developer Mode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1115"
  },
  {
    "text": "found in Developer Settings in the Settings app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1117"
  },
  {
    "text": "So to wrap up, Widget Suggestions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1120"
  },
  {
    "text": "are a brand-new way for your widgets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1123"
  },
  {
    "text": "to proactively show up right when your users need them, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1125"
  },
  {
    "text": "who may not even know they existed.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1127"
  },
  {
    "text": "And for your widgets already added to a stack, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1130"
  },
  {
    "text": "Smart Rotate lets them be a reliable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1133"
  },
  {
    "text": "and dependable part of your user’s day.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1135"
  },
  {
    "text": "By working with the system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1138"
  },
  {
    "text": "and leveraging on-device intelligence, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1139"
  },
  {
    "text": "these features allow your widget to be more discoverable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1142"
  },
  {
    "text": "and more proactive, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1144"
  },
  {
    "text": "and contribute to an intelligent Home screen experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1146"
  },
  {
    "text": "We’re incredibly excited to see ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1149"
  },
  {
    "text": "how you add intelligence to your widgets.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1150"
  },
  {
    "text": "Thank you and have a wonderful WWDC.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1153"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1156"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10049/?time=1157"
  }
]