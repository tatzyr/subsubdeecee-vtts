[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=2"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=7"
  },
  {
    "text": "Edward: Hi, and welcome to WWDC! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=9"
  },
  {
    "text": "I'm Edward, an engineer on the Wallet team, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=12"
  },
  {
    "text": "and later I'll be joined by my colleague, Russ. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=15"
  },
  {
    "text": "We're very excited to be here today ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=18"
  },
  {
    "text": "to talk to you about what's new in Wallet and Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=20"
  },
  {
    "text": "Today I'd like to talk about three main areas. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=23"
  },
  {
    "text": "First, I'd like to share some Wallet updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=26"
  },
  {
    "text": "and tell you about some exciting rollouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=28"
  },
  {
    "text": "we've had in the last year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=30"
  },
  {
    "text": "Second, we have made a lot of exciting updates to Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=33"
  },
  {
    "text": "We've also added some new functionality, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=36"
  },
  {
    "text": "making payments even easier to use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=38"
  },
  {
    "text": "Third, I want to go through some new API enhancements ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=41"
  },
  {
    "text": "that we've made. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=44"
  },
  {
    "text": "So let's get started with some updates to Wallet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=46"
  },
  {
    "text": "As you may have heard in the Keynote, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=50"
  },
  {
    "text": "we're bringing identity cards to Apple Wallet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=52"
  },
  {
    "text": "Starting in the US, with a few select states, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=55"
  },
  {
    "text": "you can just scan your driver's license ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=58"
  },
  {
    "text": "or state ID and capture a selfie. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=59"
  },
  {
    "text": "Your ID is protected by the Secure Element. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=62"
  },
  {
    "text": "The TSA is working to enable airport security checkpoints ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=65"
  },
  {
    "text": "as the first place you can use your digital ID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=69"
  },
  {
    "text": "For more information on this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=72"
  },
  {
    "text": "check out the links associated with this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=74"
  },
  {
    "text": "Also new in iOS 15, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=78"
  },
  {
    "text": "we've added support for HomeKit-connected locks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=80"
  },
  {
    "text": "so users can now tap to unlock a door with a home key pass. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=82"
  },
  {
    "text": "When it comes to adding passes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=87"
  },
  {
    "text": "we know many of your users install them right from the web. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=89"
  },
  {
    "text": "In iOS 14, if you wanted to add four movie tickets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=92"
  },
  {
    "text": "for example, you would add them individually. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=96"
  },
  {
    "text": "New this year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=99"
  },
  {
    "text": "we've added multipass downloads from Safari. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=101"
  },
  {
    "text": "With a straightforward change, you can bundle passes together, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=105"
  },
  {
    "text": "making the experience smooth for your users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=108"
  },
  {
    "text": "To do this, you'll need to do three things. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=111"
  },
  {
    "text": "First, zip the PkPass files together. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=115"
  },
  {
    "text": "Second, set the file extension to .pkpasses. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=119"
  },
  {
    "text": "And, finally, use the correct mime type. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=123"
  },
  {
    "text": "Now, all the passes in the bundle will be downloaded ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=127"
  },
  {
    "text": "and processed by Wallet in a single download. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=130"
  },
  {
    "text": "And with all these passes, it can sometimes be troublesome ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=134"
  },
  {
    "text": "for you to keep track of them all. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=137"
  },
  {
    "text": "We also know that many people don't like to delete old passes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=140"
  },
  {
    "text": "preferring instead to have them as keepsakes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=143"
  },
  {
    "text": "but that can make Wallet kind of cluttered. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=146"
  },
  {
    "text": "So new in iOS 15, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=148"
  },
  {
    "text": "Wallet will now automatically hide your expired passes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=150"
  },
  {
    "text": "keeping passes organized and easy to find. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=154"
  },
  {
    "text": "Let me show you an example ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=157"
  },
  {
    "text": "of how you can take advantage of this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=158"
  },
  {
    "text": "Here we see some JSON from an example pass. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=161"
  },
  {
    "text": "Wallet looks at three fields to determine if a pass ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=164"
  },
  {
    "text": "should be automatically hidden. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=167"
  },
  {
    "text": "Number one, the pass has an expiration date ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=169"
  },
  {
    "text": "that is older than the current date. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=172"
  },
  {
    "text": "Two, the relevant date is older than one day. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=176"
  },
  {
    "text": "Or three, the pass has been voided. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=180"
  },
  {
    "text": "To ensure a great experience for your users, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=184"
  },
  {
    "text": "you should ensure these fields are set correctly ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=187"
  },
  {
    "text": "on your passes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=189"
  },
  {
    "text": "Now let me tell you about some updates we've made to Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=191"
  },
  {
    "text": "Apple Pay continues to be the easiest way ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=194"
  },
  {
    "text": "to make payments on iPhone, iPad, Apple Watch, and Mac. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=196"
  },
  {
    "text": "It allows users to make payments in apps and on the web. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=201"
  },
  {
    "text": "Apple Pay is supported in iMessage and Business Chat, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=205"
  },
  {
    "text": "and also in App Clips ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=208"
  },
  {
    "text": "for streamlined, in-the-moment experiences. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=209"
  },
  {
    "text": "Apple Pay usage around the world continues to grow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=212"
  },
  {
    "text": "We've added support in Mexico, Israel, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=216"
  },
  {
    "text": "and South Africa this year, meaning Apple Pay ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=218"
  },
  {
    "text": "is now available in 55 countries and regions across the globe. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=221"
  },
  {
    "text": "We've added support for Express Transit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=226"
  },
  {
    "text": "in more locations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=228"
  },
  {
    "text": "And, we've included support for combined credit and debit cards ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=230"
  },
  {
    "text": "in places such as Brazil. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=233"
  },
  {
    "text": "Now, I'd like to show you a few changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=235"
  },
  {
    "text": "that you can make to your apps and websites ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=237"
  },
  {
    "text": "to create a great payment experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=239"
  },
  {
    "text": "Last year we added support for more button types ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=242"
  },
  {
    "text": "such as Rent with Apple Pay and Top Up with Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=245"
  },
  {
    "text": "Today we're introducing one more: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=250"
  },
  {
    "text": "Continue with Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=252"
  },
  {
    "text": "You should use this button when offering Apple Pay in a cart ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=255"
  },
  {
    "text": "alongside other buttons. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=258"
  },
  {
    "text": "You can use Continue as a call to action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=260"
  },
  {
    "text": "We're also introducing a new JavaScript implementation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=263"
  },
  {
    "text": "for the Apple Pay button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=266"
  },
  {
    "text": "This new button supports all current button types and styles. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=268"
  },
  {
    "text": "It's easy to implement, and can be customized ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=271"
  },
  {
    "text": "to match the design of your sites. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=274"
  },
  {
    "text": "Here is an example implementation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=276"
  },
  {
    "text": "As you can see, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=278"
  },
  {
    "text": "the button size and style can be configured easily. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=279"
  },
  {
    "text": "Note that the styles are prefixed with \"apple-pay\". ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=282"
  },
  {
    "text": "For more information on this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=286"
  },
  {
    "text": "check out the documentation on the Apple Developer Portal. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=287"
  },
  {
    "text": "Next, I'd like to show you the big changes we've made ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=292"
  },
  {
    "text": "to Apple Pay for iPhone and iPad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=294"
  },
  {
    "text": "For iOS 15, we're excited to make payments even better ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=298"
  },
  {
    "text": "with a brand-new Apple Pay experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=301"
  },
  {
    "text": "We rebuilt the Apple Pay sheet from the ground up in SwiftUI ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=304"
  },
  {
    "text": "with an all-new design. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=307"
  },
  {
    "text": "It gives users an even clearer and smoother payment experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=309"
  },
  {
    "text": "with a great new look. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=312"
  },
  {
    "text": "We also implemented several new features ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=315"
  },
  {
    "text": "to improve conversion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=317"
  },
  {
    "text": "For users new to Apple Pay, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=319"
  },
  {
    "text": "we simplified the flow to add a card and addresses ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=321"
  },
  {
    "text": "from the payment sheet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=324"
  },
  {
    "text": "Existing users will be able to add another card ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=326"
  },
  {
    "text": "without leaving the Apple Pay experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=328"
  },
  {
    "text": "We also redesigned the error handling ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=331"
  },
  {
    "text": "for more clarity when a problem does occur. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=333"
  },
  {
    "text": "Once a user has finished adding a new payment method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=336"
  },
  {
    "text": "they seamlessly resume their transaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=339"
  },
  {
    "text": "We also added a new summary view ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=342"
  },
  {
    "text": "which shows more detailed information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=344"
  },
  {
    "text": "such as payment items, discounts, and subtotals. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=346"
  },
  {
    "text": "New for iOS 15, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=350"
  },
  {
    "text": "we also display your app's icon on the summary view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=352"
  },
  {
    "text": "For payments on the web, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=357"
  },
  {
    "text": "we're now showing the Web Clip icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=358"
  },
  {
    "text": "on the payment summary view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=361"
  },
  {
    "text": "In Apple Pay, this was previously only visible ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=363"
  },
  {
    "text": "when using handoff from a Mac to complete a transaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=366"
  },
  {
    "text": "Now your website icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=369"
  },
  {
    "text": "is viewable within the Apple Pay transaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=371"
  },
  {
    "text": "to provide visual reassurance for the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=373"
  },
  {
    "text": "that payment is going to the right place. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=376"
  },
  {
    "text": "If you accept Apple Pay on the web ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=378"
  },
  {
    "text": "and you haven't already set a Web Clip icon, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=381"
  },
  {
    "text": "we would strongly recommend you make your icon visible to users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=383"
  },
  {
    "text": "To do this, you should provide a 2x and 3x icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=388"
  },
  {
    "text": "at the sizes shown in your root document folder. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=392"
  },
  {
    "text": "Apple Pay will then automatically retrieve ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=395"
  },
  {
    "text": "and display this icon with the payment request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=398"
  },
  {
    "text": "Detailed information on implementing this ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=401"
  },
  {
    "text": "is available in the Human Interface Guidelines section ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=403"
  },
  {
    "text": "of the Apple Developer site. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=406"
  },
  {
    "text": "While we're on the subject of icon sizes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=409"
  },
  {
    "text": "I wanted to remind you of the new icon size requirements ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=412"
  },
  {
    "text": "for your PKPasses. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=414"
  },
  {
    "text": "Since notifications in iOS 15 now display a bigger icon, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=417"
  },
  {
    "text": "you'll need to update your PKPass icons ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=422"
  },
  {
    "text": "to a minimum of 38x38 at 1x to ensure that your icons ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=424"
  },
  {
    "text": "are displayed without blurring. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=429"
  },
  {
    "text": "We're also pleased to introduce more flexibility ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=433"
  },
  {
    "text": "in the total line. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=436"
  },
  {
    "text": "This will enable you to add a date ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=438"
  },
  {
    "text": "if the payment occurs later; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=440"
  },
  {
    "text": "for example, if you take pre-orders ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=442"
  },
  {
    "text": "or to add the frequency for a recurring payment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=444"
  },
  {
    "text": "Many of the new features we've just observed can be added ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=449"
  },
  {
    "text": "to your apps with only a few straightforward changes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=451"
  },
  {
    "text": "So we'll now take a closer look ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=455"
  },
  {
    "text": "into the API enhancements we're introducing in iOS 15. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=456"
  },
  {
    "text": "We're pleased to add support for shipping date ranges. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=460"
  },
  {
    "text": "Now you can present your users with relevant shipping ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=463"
  },
  {
    "text": "or pickup times within Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=466"
  },
  {
    "text": "These can be used to set estimated shipping ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=468"
  },
  {
    "text": "or delivery dates or time windows for in-store pickups. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=470"
  },
  {
    "text": "This extra information is displayed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=474"
  },
  {
    "text": "right on the main Apple Pay view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=476"
  },
  {
    "text": "The new shipping date APIs have built-in support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=479"
  },
  {
    "text": "for calendars and time zones. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=481"
  },
  {
    "text": "This makes the handling of shipping dates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=483"
  },
  {
    "text": "or pick up times in your app straightforward ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=485"
  },
  {
    "text": "and the relevant information is displayed clearly to your users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=487"
  },
  {
    "text": "Now I'll briefly show you how this works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=491"
  },
  {
    "text": "We start by defining a normal shipping method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=495"
  },
  {
    "text": "using the same PKShippingMethod as before. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=497"
  },
  {
    "text": "Next, we choose a calendar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=501"
  },
  {
    "text": "In this example, we use the user's current calendar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=503"
  },
  {
    "text": "We use today as a reference and estimate the arrival ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=507"
  },
  {
    "text": "between three to seven days from this date. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=511"
  },
  {
    "text": "We then determine the start and end date for our date range ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=514"
  },
  {
    "text": "using the calendar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=517"
  },
  {
    "text": "Finally, we convert the dates to the appropriate date components ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=519"
  },
  {
    "text": "and then we add them to the shipping method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=523"
  },
  {
    "text": "We use date components rather than simple dates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=526"
  },
  {
    "text": "so we can take advantage of the rich calendar ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=529"
  },
  {
    "text": "and time zone support built into iOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=531"
  },
  {
    "text": "This enables use cases that would otherwise not be possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=534"
  },
  {
    "text": "For example, we can provide the correct time zone ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=538"
  },
  {
    "text": "for a pickup time regardless of the user's current time zone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=541"
  },
  {
    "text": "This level of detail also allows us to show ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=545"
  },
  {
    "text": "the date and time information most appropriate to the user, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=548"
  },
  {
    "text": "such as displaying a specific pickup time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=551"
  },
  {
    "text": "We've included a JavaScript equivalent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=555"
  },
  {
    "text": "for Apple Pay on the web. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=557"
  },
  {
    "text": "You can see we specify the date component range ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=559"
  },
  {
    "text": "a little differently than we do in Swift. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=562"
  },
  {
    "text": "Your date components can be used in conjunction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=565"
  },
  {
    "text": "with any of our supported pickup types. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=567"
  },
  {
    "text": "For example, you could display a pickup time in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=570"
  },
  {
    "text": "In addition to date ranges, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=575"
  },
  {
    "text": "you can now declare a read-only shipping address. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=576"
  },
  {
    "text": "You can use this to inform the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=579"
  },
  {
    "text": "of a specific pickup location. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=581"
  },
  {
    "text": "To enable this, you must provide address details ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=584"
  },
  {
    "text": "as an instance of PKContact. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=587"
  },
  {
    "text": "In this example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=590"
  },
  {
    "text": "we have created a postal address as a CNMutablePostalAddress ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=591"
  },
  {
    "text": "so we can set all the address components that we need. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=596"
  },
  {
    "text": "You can now add the shipping contact ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=599"
  },
  {
    "text": "to payment request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=601"
  },
  {
    "text": "Finally we declare the editing mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=603"
  },
  {
    "text": "and specify the required shipping fields. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=606"
  },
  {
    "text": "The address fields included in the PKContact ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=608"
  },
  {
    "text": "will be presented to the user as read-only. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=611"
  },
  {
    "text": "In this example, we've provided a pick up postal address, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=614"
  },
  {
    "text": "which the user won't be able to edit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=618"
  },
  {
    "text": "And here's the equivalent in JavaScript ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=621"
  },
  {
    "text": "for Apple Pay on the web. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=623"
  },
  {
    "text": "You setup a shippingContact dictionary, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=625"
  },
  {
    "text": "set the shippingType, the shippingContactEditingMode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=628"
  },
  {
    "text": "and the requiredShippingContactFields, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=632"
  },
  {
    "text": "and then you include the other fields ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=635"
  },
  {
    "text": "for a JavaScript payment request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=636"
  },
  {
    "text": "For more information, check out the documentation available ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=639"
  },
  {
    "text": "on the Apple Pay section of the Developer Portal. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=642"
  },
  {
    "text": "Another great new feature for iOS 15 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=646"
  },
  {
    "text": "is support for coupon codes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=649"
  },
  {
    "text": "Now your users can enter promotional codes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=651"
  },
  {
    "text": "once they've initiated a payment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=654"
  },
  {
    "text": "This is intended so your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=656"
  },
  {
    "text": "don't have to cancel their Apple Pay transaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=658"
  },
  {
    "text": "if they forgot to apply a discount code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=661"
  },
  {
    "text": "You might also consider implementing this ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=664"
  },
  {
    "text": "if you have an express purchase flow where users can check out ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=667"
  },
  {
    "text": "from the product page or the shopping cart, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=670"
  },
  {
    "text": "but the coupon entry field is only presented at checkout. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=673"
  },
  {
    "text": "We've provided methods to update the payment request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=677"
  },
  {
    "text": "so you can validate the discount codes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=680"
  },
  {
    "text": "or return error messages when required. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=682"
  },
  {
    "text": "Let's dive in and take a look at the code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=685"
  },
  {
    "text": "You can make changes using the delegate method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=688"
  },
  {
    "text": "which performs updates whenever the coupon code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=691"
  },
  {
    "text": "is changed by the user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=693"
  },
  {
    "text": "For example, you could use this to validate a code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=695"
  },
  {
    "text": "and then update any payment totals. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=698"
  },
  {
    "text": "You also use the method to return customized errors ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=701"
  },
  {
    "text": "or update the payment summary items and shipping methods. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=704"
  },
  {
    "text": "Russ will show you an example of this in more detail shortly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=707"
  },
  {
    "text": "We recommend prepopulating codes whenever possible, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=713"
  },
  {
    "text": "as well as displaying relevant error messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=716"
  },
  {
    "text": "for invalid codes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=718"
  },
  {
    "text": "I hope you've enjoyed these exciting API enhancements ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=721"
  },
  {
    "text": "for iOS 15. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=723"
  },
  {
    "text": "Now that we have talked all about this in theory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=726"
  },
  {
    "text": "I'm going to hand you over to Russ for a demo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=728"
  },
  {
    "text": "so you can see how to implement all these great new features. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=730"
  },
  {
    "text": "Russ Fenenga: Thanks, Edward. Hello, everyone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=733"
  },
  {
    "text": "My name is Russ, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=736"
  },
  {
    "text": "and I'm a software engineer on the Wallet team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=737"
  },
  {
    "text": "And I'm thrilled to be able to demonstrate to you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=739"
  },
  {
    "text": "some of the amazing new features we have added ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=741"
  },
  {
    "text": "to the payment sheet in iOS 15 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=743"
  },
  {
    "text": "and how you can integrate them into your apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=746"
  },
  {
    "text": "So let's get started! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=748"
  },
  {
    "text": "Here I have my ticket purchasing app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=750"
  },
  {
    "text": "for the food festival I'm planning. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=752"
  },
  {
    "text": "My app has already implemented the existing protocol methods ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=754"
  },
  {
    "text": "from PKPaymentAuthorization ControllerDelegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=757"
  },
  {
    "text": "in order to take advantage of the Apple Pay payment sheet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=760"
  },
  {
    "text": "With iOS 15, the payment sheet will automatically be updated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=763"
  },
  {
    "text": "to the new look without any additional work. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=766"
  },
  {
    "text": "I've decided that with the update to iOS 15 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=769"
  },
  {
    "text": "I want my festival attendees to finally have the ability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=772"
  },
  {
    "text": "to request their tickets in multiple ways. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=775"
  },
  {
    "text": "To do this, I'll need to add support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=778"
  },
  {
    "text": "for multiple shipping methods, so let's dive in! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=780"
  },
  {
    "text": "I'll head into our PaymentHandler class ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=784"
  },
  {
    "text": "where I build the PKPaymentRequest ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=786"
  },
  {
    "text": "to begin adding support for multiple PKShippingMethods. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=788"
  },
  {
    "text": "The first thing I'm going to add is a helper function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=792"
  },
  {
    "text": "that returns me an array of PKShippingMethods ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=795"
  },
  {
    "text": "representing the different options available to my users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=798"
  },
  {
    "text": "The first PKShippingMethod I create ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=802"
  },
  {
    "text": "is a standard shipping method, letting the user know ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=804"
  },
  {
    "text": "they can collect their tickets at the festival. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=807"
  },
  {
    "text": "New to iOS 15, I want to provide the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=810"
  },
  {
    "text": "an estimated range it will take the tickets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=813"
  },
  {
    "text": "to be shipped to them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=815"
  },
  {
    "text": "To do this I create a Date and Calendar object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=816"
  },
  {
    "text": "then define a shippingStart and shippingEnd date ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=819"
  },
  {
    "text": "three to five days from now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=823"
  },
  {
    "text": "I'm then able to specify the date components ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=824"
  },
  {
    "text": "that I want to display to the user in the payment sheet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=827"
  },
  {
    "text": "Then I build my PKShippingMethod ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=830"
  },
  {
    "text": "making sure I set the new property, dateComponentsRange, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=833"
  },
  {
    "text": "and return the array of the two shipping methods. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=836"
  },
  {
    "text": "The last thing I need to do is set the shipping methods ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=840"
  },
  {
    "text": "on the PKPaymentRequest like so.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=843"
  },
  {
    "text": "With these simple changes, I can build my app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=850"
  },
  {
    "text": "and check out the new shipping methods in the payment sheet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=852"
  },
  {
    "text": "A new row has automatically been added to the payment sheet ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=856"
  },
  {
    "text": "showing the shipping methods. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=858"
  },
  {
    "text": "If I tap the row ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=860"
  },
  {
    "text": "I'll see both shipping methods that were just added, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=861"
  },
  {
    "text": "including the one that supports date ranges. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=864"
  },
  {
    "text": "I've also decided that for the festival this year ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=868"
  },
  {
    "text": "I want to send out coupon codes to all my attendees ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=871"
  },
  {
    "text": "and add the functionality to redeem them ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=874"
  },
  {
    "text": "directly through the payment sheet in my app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=876"
  },
  {
    "text": "To do this, there are two main changes that I need to make. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=878"
  },
  {
    "text": "Let's head back into the code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=881"
  },
  {
    "text": "The first is when building the PKPaymentRequest. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=885"
  },
  {
    "text": "There is a new boolean, supportsCouponCode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=888"
  },
  {
    "text": "that needs to be set to true. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=890"
  },
  {
    "text": "There also is a new optional property, couponCode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=894"
  },
  {
    "text": "that you can set on your PKPaymentRequest ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=897"
  },
  {
    "text": "to prepopulate the coupon field ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=899"
  },
  {
    "text": "with one of your already valid coupon codes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=901"
  },
  {
    "text": "Next, let's jump down to my class extension that conforms ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=904"
  },
  {
    "text": "to the PKPaymentAuthorization ControllerDelegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=907"
  },
  {
    "text": "and implement the new protocol method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=910"
  },
  {
    "text": "paymentAuthorizationController didChangeCouponCode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=912"
  },
  {
    "text": "where I will be able to handle updating my summary items ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=915"
  },
  {
    "text": "and display errors related to the coupon code entry ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=918"
  },
  {
    "text": "when a coupon code is entered. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=921"
  },
  {
    "text": "The first thing I'm going to need is a helper function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=923"
  },
  {
    "text": "that updates our PKPaymentSummaryItems ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=926"
  },
  {
    "text": "if a valid coupon code is entered. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=928"
  },
  {
    "text": "I grab a reference to the first summary item ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=931"
  },
  {
    "text": "which is our subtotal item. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=933"
  },
  {
    "text": "From there, I create a new PKPaymentSummaryItem ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=936"
  },
  {
    "text": "that lets the user see the discount that was applied. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=939"
  },
  {
    "text": "I then create a new summary item for tax and total, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=942"
  },
  {
    "text": "and then return the array of them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=946"
  },
  {
    "text": "Now that I have my discount application logic written, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=949"
  },
  {
    "text": "I can then write my coupon code validation logic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=951"
  },
  {
    "text": "I first check if my coupon code that the user entered was empty ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=957"
  },
  {
    "text": "and if it is, just call our completion ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=961"
  },
  {
    "text": "passing in the unmodified payment summary items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=963"
  },
  {
    "text": "If the entered coupon code matches a valid coupon code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=968"
  },
  {
    "text": "then I use the just created applyDiscount function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=971"
  },
  {
    "text": "to return the updated summary items ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=974"
  },
  {
    "text": "into our CouponCodeUpdate object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=976"
  },
  {
    "text": "For your apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=981"
  },
  {
    "text": "you'll most likely need to be fetching valid coupon codes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=982"
  },
  {
    "text": "from your server at this point. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=984"
  },
  {
    "text": "Finally, if the entered coupon code was invalid, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=987"
  },
  {
    "text": "I use the new PKPaymentRequest convenience initializer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=990"
  },
  {
    "text": "paymentCouponCodeInvalidError, and supply it a description ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=993"
  },
  {
    "text": "to be shown directly in the payment sheet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=997"
  },
  {
    "text": "We also have a second convenience initializer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=999"
  },
  {
    "text": "for expired coupon codes: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1001"
  },
  {
    "text": "paymentCouponCodeExpired ErrorWithLocalizedDescription. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1003"
  },
  {
    "text": "I then pass this error into our coupon code update initializer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1007"
  },
  {
    "text": "as well as the original SummaryItems. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1010"
  },
  {
    "text": "Just like that, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1014"
  },
  {
    "text": "I've added support for coupon codes inside my app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1015"
  },
  {
    "text": "Let's check it out. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1019"
  },
  {
    "text": "To enter a coupon code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1023"
  },
  {
    "text": "I just need to tap into the summary view ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1025"
  },
  {
    "text": "and enter a coupon code into the coupon code text field. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1027"
  },
  {
    "text": "If I first enter an invalid coupon code, Fest, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1031"
  },
  {
    "text": "the error message I supplied ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1034"
  },
  {
    "text": "is shown directly below the text field. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1035"
  },
  {
    "text": "Now if I enter a valid coupon code, FESTIVAL, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1037"
  },
  {
    "text": "the payment summary items are immediately updated. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1041"
  },
  {
    "text": "Then I just need to select the shipping contact ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1046"
  },
  {
    "text": "as well as shipping address ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1049"
  },
  {
    "text": "and my payment request is ready to go.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1050"
  },
  {
    "text": "With these simple changes, you're now ready ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1056"
  },
  {
    "text": "to test your updates to the payment sheet ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1058"
  },
  {
    "text": "on a device in our Apple Pay sandbox environment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1060"
  },
  {
    "text": "Now, back to Edward. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1063"
  },
  {
    "text": "Edward: Thanks, Russ. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1065"
  },
  {
    "text": "Russ just showed us how easy it is ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1066"
  },
  {
    "text": "to implement multiple shipping methods, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1068"
  },
  {
    "text": "the new date range, and coupon code APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1070"
  },
  {
    "text": "This year we've delivered some exciting new updates to Wallet ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1074"
  },
  {
    "text": "such as home key passes, identification, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1077"
  },
  {
    "text": "hiding expired passes, and multiple pass ingestion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1081"
  },
  {
    "text": "We introduced the new JavaScript payment button ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1085"
  },
  {
    "text": "for Apple Pay on the web, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1087"
  },
  {
    "text": "and the new Apple Pay experience on iOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1089"
  },
  {
    "text": "You learned about the new shipping APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1092"
  },
  {
    "text": "which include support for date ranges ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1094"
  },
  {
    "text": "and read-only addresses, as well as coupon codes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1096"
  },
  {
    "text": "and how you can implement these in your own apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1099"
  },
  {
    "text": "For more information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1102"
  },
  {
    "text": "check out the Apple Pay section of the Developer Portal. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1104"
  },
  {
    "text": "This includes the Apple Pay sandbox ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1107"
  },
  {
    "text": "for testing payment requests from your apps and websites. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1109"
  },
  {
    "text": "Thank you for watching. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1113"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10092/?time=1115"
  }
]