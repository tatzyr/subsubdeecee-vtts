[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=0"
  },
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=3"
  },
  {
    "text": "Hi, everyone! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=9"
  },
  {
    "text": "I'm Prashant, an AVFoundation Engineer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=10"
  },
  {
    "text": "Welcome to WWDC21. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=13"
  },
  {
    "text": "In recent years, the popularity ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=15"
  },
  {
    "text": "of over-the-top streaming services ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=17"
  },
  {
    "text": "have approached that of linear television. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=19"
  },
  {
    "text": "Depending on the market that you're in, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=21"
  },
  {
    "text": "your users might actually prefer free ad-supported content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=23"
  },
  {
    "text": "over ad-free content that they need to pay for. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=27"
  },
  {
    "text": "So if you're interested in including ads ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=29"
  },
  {
    "text": "and other interstitials in your HLS streams, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=31"
  },
  {
    "text": "you've tuned in to the right session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=33"
  },
  {
    "text": "Before we dive in, let's quickly review ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=35"
  },
  {
    "text": "some of the existing mechanisms ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=37"
  },
  {
    "text": "for inserting ads in HLS streams. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=39"
  },
  {
    "text": "You could perform server side ad insertion ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=41"
  },
  {
    "text": "using DISCONTINUITY tags. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=43"
  },
  {
    "text": "This is a fairly static scheme in that the ad segments ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=45"
  },
  {
    "text": "are stitched together with the content segments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=48"
  },
  {
    "text": "and this stitching has to be done ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=50"
  },
  {
    "text": "even before the playlist is vended to the user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=51"
  },
  {
    "text": "As you might imagine, this doesn't allow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=54"
  },
  {
    "text": "for late binding of your ad assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=56"
  },
  {
    "text": "where you'd like for an ad to be decisioned ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=57"
  },
  {
    "text": "as the user is approaching the ad marker ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=59"
  },
  {
    "text": "or even rebinding, say, when a user navigates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=62"
  },
  {
    "text": "to a portion of the video that they've already watched, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=64"
  },
  {
    "text": "they're going to see the same ad all over again. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=66"
  },
  {
    "text": "Since HLS operates at a segment granularity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=68"
  },
  {
    "text": "transitions to and from ad pods ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=71"
  },
  {
    "text": "need to happen at segment boundaries. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=73"
  },
  {
    "text": "If your ad marker happens to be present ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=75"
  },
  {
    "text": "in the middle a content segment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=77"
  },
  {
    "text": "you'd have to split up that segment ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=78"
  },
  {
    "text": "in order to stitch in the ad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=80"
  },
  {
    "text": "Oftentimes, the number of quality tiers would be different ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=82"
  },
  {
    "text": "between your primary and interstitial assets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=85"
  },
  {
    "text": "In order to stitch the ad together ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=88"
  },
  {
    "text": "with all the primary quality tiers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=89"
  },
  {
    "text": "the ads would need to be conditioned ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=91"
  },
  {
    "text": "to match the content encoding. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=93"
  },
  {
    "text": "And you'd also want to make sure that the ads use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=94"
  },
  {
    "text": "the same codecs as the primary content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=96"
  },
  {
    "text": "And in live streaming scenarios, your packager might ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=99"
  },
  {
    "text": "have to do a lot of back-end bookkeeping. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=102"
  },
  {
    "text": "Your ads and interstitials would mostly be ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=104"
  },
  {
    "text": "video-on-demand streams. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=106"
  },
  {
    "text": "But the packager would have to spool these out ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=108"
  },
  {
    "text": "on a per-segment basis ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=110"
  },
  {
    "text": "for the entirety of the ad break. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=111"
  },
  {
    "text": "You could also insert ads on the client side. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=113"
  },
  {
    "text": "Until now, we didn't have an official recommendation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=115"
  },
  {
    "text": "on how this can be done. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=117"
  },
  {
    "text": "One of the more popular approaches ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=119"
  },
  {
    "text": "is to use a two-player scheme ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=120"
  },
  {
    "text": "where one player would present the primary content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=122"
  },
  {
    "text": "while the other would present the interstitials. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=124"
  },
  {
    "text": "And transitions are achieved by coordinating playback ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=127"
  },
  {
    "text": "between the two players and by managing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=129"
  },
  {
    "text": "player view hierarchies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=131"
  },
  {
    "text": "While this works well, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=133"
  },
  {
    "text": "the issues here are mostly on the performance side. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=134"
  },
  {
    "text": "If buffering is not properly coordinated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=136"
  },
  {
    "text": "between the two players, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=138"
  },
  {
    "text": "pre-fetching your ad would impact ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=139"
  },
  {
    "text": "the adaptive bit rate performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=141"
  },
  {
    "text": "of the primary content stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=143"
  },
  {
    "text": "And features like Picture in Picture and AirPlay ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=145"
  },
  {
    "text": "are really hard to do well ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=147"
  },
  {
    "text": "with these custom player approaches. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=148"
  },
  {
    "text": "This year, we've addressed all these concerns ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=151"
  },
  {
    "text": "and in general attempted to make ad insertion ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=154"
  },
  {
    "text": "a lot more simple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=155"
  },
  {
    "text": "We're introducing HLS interstitials ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=157"
  },
  {
    "text": "where ads are treated as separate assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=159"
  },
  {
    "text": "that can be scheduled onto a program timeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=161"
  },
  {
    "text": "Ads are no longer stitched in with DISCONTINUITY tags. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=164"
  },
  {
    "text": "Instead they remain as self-contained assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=167"
  },
  {
    "text": "that can be referenced via their master playlist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=169"
  },
  {
    "text": "As we'll soon see, this scheme is dynamic, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=172"
  },
  {
    "text": "allowing for late binding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=174"
  },
  {
    "text": "and even rebinding to your ad inventory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=175"
  },
  {
    "text": "You're no longer constrained to segment boundaries. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=178"
  },
  {
    "text": "You could arbitrarily place ads anywhere ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=180"
  },
  {
    "text": "on the program timeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=182"
  },
  {
    "text": "HLS interstitials in conjunction with AVKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=184"
  },
  {
    "text": "offers built-in support for navigation restrictions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=187"
  },
  {
    "text": "on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=190"
  },
  {
    "text": "We also have built-in support for AirPlay ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=192"
  },
  {
    "text": "and Picture in Picture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=193"
  },
  {
    "text": "All your scheduled ads and interstitials will be ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=195"
  },
  {
    "text": "carried over the AirPlay session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=197"
  },
  {
    "text": "We also coordinate buffering ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=200"
  },
  {
    "text": "and the use of other system resources ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=201"
  },
  {
    "text": "between the primary and interstitial players ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=203"
  },
  {
    "text": "so as to achieve seamless transitions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=205"
  },
  {
    "text": "Now let's take a look at a typical playback flow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=208"
  },
  {
    "text": "when we present some video-on-demand content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=210"
  },
  {
    "text": "along with ads using HLS interstitials.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=212"
  },
  {
    "text": "The blue bar in this picture represents your main content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=216"
  },
  {
    "text": "and the orange and green bars ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=219"
  },
  {
    "text": "are the ads that you'd like to schedule during playback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=221"
  },
  {
    "text": "Now, the primary would play up until the ad marker, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=224"
  },
  {
    "text": "at which point it would pause, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=226"
  },
  {
    "text": "and the first ad would start playing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=228"
  },
  {
    "text": "Once the first ad plays out, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=230"
  },
  {
    "text": "the second ad would immediately follow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=231"
  },
  {
    "text": "After the second ad, the primary would resume ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=234"
  },
  {
    "text": "from where it left off. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=236"
  },
  {
    "text": "Now let's take a look at the buffering sequence. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=238"
  },
  {
    "text": "We start by buffering the primary ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=241"
  },
  {
    "text": "up until the start time of the first ad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=242"
  },
  {
    "text": "Now we'd pre-buffer the first ad, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=244"
  },
  {
    "text": "making it possible to achieve a smooth transition. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=245"
  },
  {
    "text": "After this has completely buffered, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=248"
  },
  {
    "text": "we'd pre-buffer the second ad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=250"
  },
  {
    "text": "And after the second ad has completely buffered, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=252"
  },
  {
    "text": "we'd start buffering the primary again ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=254"
  },
  {
    "text": "so that we switch back seamlessly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=256"
  },
  {
    "text": "The playback flow for live scenarios is similar, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=258"
  },
  {
    "text": "except that we'd rejoin the primary ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=261"
  },
  {
    "text": "after jumping forward by the ad duration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=263"
  },
  {
    "text": "This is so that we remain in sync with the live edge. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=265"
  },
  {
    "text": "And this also adopts a similar buffering strategy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=268"
  },
  {
    "text": "such that seamless transitions are possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=271"
  },
  {
    "text": "So how would you schedule ads with HLS interstitials? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=273"
  },
  {
    "text": "You can now do server side ad insertion using DATERANGE tags. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=278"
  },
  {
    "text": "For this, we're introducing a new date range class ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=281"
  },
  {
    "text": "with attributes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=283"
  },
  {
    "text": "This playlist is carrying timing information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=285"
  },
  {
    "text": "through a PROGRAM-DATE-TIME tag. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=287"
  },
  {
    "text": "These tags are now mandatory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=289"
  },
  {
    "text": "since the ad schedule is now specified using dates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=291"
  },
  {
    "text": "Here we see an ad lined up using the DATERANGE tag, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=295"
  },
  {
    "text": "with the class set to com.apple.hls.interstitial. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=298"
  },
  {
    "text": "The ID attribute uniquely identifies the event. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=302"
  },
  {
    "text": "START-DATE is where you'd like for the ad ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=305"
  },
  {
    "text": "to start in the primary timeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=307"
  },
  {
    "text": "Here we see that the ad is scheduled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=309"
  },
  {
    "text": "at 5 seconds into playback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=310"
  },
  {
    "text": "The DURATION attribute specifies the duration of the ad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=312"
  },
  {
    "text": "The X-ASSET-URI attribute specifies the URI ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=316"
  },
  {
    "text": "of the ad's master playlist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=319"
  },
  {
    "text": "And the X-RESUME-OFFSET attribute specifies the offset ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=321"
  },
  {
    "text": "from the START-DATE, where you'd like primary playback to resume. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=324"
  },
  {
    "text": "A resume offset of 0 would mean ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=328"
  },
  {
    "text": "that the primary would resume from where it left off. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=330"
  },
  {
    "text": "If the resume offset attribute is absent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=333"
  },
  {
    "text": "we'd rejoin the primary at an offset ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=335"
  },
  {
    "text": "which equals the ad duration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=336"
  },
  {
    "text": "This is probably what you'd want to do for live scenarios.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=338"
  },
  {
    "text": "Sometimes you might wish to skip over in-stream ads ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=343"
  },
  {
    "text": "as shown here. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=345"
  },
  {
    "text": "For that, you'd simply specify the resume offset ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=346"
  },
  {
    "text": "to be the duration of the in-stream ad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=348"
  },
  {
    "text": "You can schedule multiple ads using DATERANGE tags. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=351"
  },
  {
    "text": "Here we see the first ad scheduled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=354"
  },
  {
    "text": "at 5 seconds into the primary ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=355"
  },
  {
    "text": "and the second one at 10 seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=357"
  },
  {
    "text": "You can schedule back-to-back ads ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=360"
  },
  {
    "text": "simply by specifying the same start time for each of them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=362"
  },
  {
    "text": "Here we see that the first ad starts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=365"
  },
  {
    "text": "at 5 seconds into playback, and so does the second. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=366"
  },
  {
    "text": "The ads would be displayed in the order ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=370"
  },
  {
    "text": "that they appear in the playlist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=371"
  },
  {
    "text": "These approaches where you use the X-ASSET-URI attribute ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=373"
  },
  {
    "text": "to reference your ad would require you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=376"
  },
  {
    "text": "to define your ad pod when you're adding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=378"
  },
  {
    "text": "the DATERANGE tag to the playlist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=380"
  },
  {
    "text": "But you could defer that decision ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=382"
  },
  {
    "text": "using the X-ASSET-LIST attribute. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=383"
  },
  {
    "text": "The X-ASSET-LIST points to a JSON object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=386"
  },
  {
    "text": "that contains the event schedule. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=389"
  },
  {
    "text": "The object has an ASSETS array that specifies ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=392"
  },
  {
    "text": "the list of interstitials, with each entry specifying ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=395"
  },
  {
    "text": "the URI of the master playlist and the duration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=398"
  },
  {
    "text": "Note that this JSON object would be fetched ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=401"
  },
  {
    "text": "only at buffering time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=404"
  },
  {
    "text": "allowing for late binding to your ad inventory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=405"
  },
  {
    "text": "Usually, ads would play out fully to the end. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=408"
  },
  {
    "text": "However, you can specify an end time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=410"
  },
  {
    "text": "for your ad using the X-PLAYOUT-LIMIT attribute. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=412"
  },
  {
    "text": "You can use this attribute to implement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=415"
  },
  {
    "text": "early return scenarios in live broadcasts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=416"
  },
  {
    "text": "An early return is where you'd like to interrupt ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=419"
  },
  {
    "text": "your ad break in order to return to the live feed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=421"
  },
  {
    "text": "This could be due to a breaking news scenario, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=424"
  },
  {
    "text": "or maybe there was some sudden excitement on the sports field ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=426"
  },
  {
    "text": "that you don't want your viewers to miss out on. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=428"
  },
  {
    "text": "So how would you use this to implement early return? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=430"
  },
  {
    "text": "Here we have a live playlist that contains six segments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=433"
  },
  {
    "text": "The live edge is at the end of segment six. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=436"
  },
  {
    "text": "Now the playhead would usually be ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=438"
  },
  {
    "text": "three target durations behind the live edge. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=440"
  },
  {
    "text": "In this case, it's at the end of segment three. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=442"
  },
  {
    "text": "At this point, a 15-second ad spot ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=445"
  },
  {
    "text": "is decisioned to follow segment six. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=447"
  },
  {
    "text": "So the playlist update actually contains all six segments ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=449"
  },
  {
    "text": "along with a DATERANGE tag carrying the ad schedule. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=452"
  },
  {
    "text": "In the next update, the playhead would've moved ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=455"
  },
  {
    "text": "to the end of segment four, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=457"
  },
  {
    "text": "and the ad is still scheduled to follow segment six. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=459"
  },
  {
    "text": "The shaded segment seven here simply represents the ad break. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=462"
  },
  {
    "text": "In the following update, the playhead has moved ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=465"
  },
  {
    "text": "to the end of segment five, and in the next update, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=467"
  },
  {
    "text": "we're at the beginning of the ad break. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=470"
  },
  {
    "text": "If you don't do anything, the ad would play out for 15 seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=472"
  },
  {
    "text": "But if you want to schedule an early return, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=476"
  },
  {
    "text": "say, after 12 seconds, you'd simply specify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=478"
  },
  {
    "text": "the play-out limit to be that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=480"
  },
  {
    "text": "Now your ad would play for 12 seconds ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=482"
  },
  {
    "text": "before returning to the program. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=484"
  },
  {
    "text": "Oftentimes for contractual reasons, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=487"
  },
  {
    "text": "you'd want to prevent your user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=489"
  },
  {
    "text": "from jumping over or skipping through the ads. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=491"
  },
  {
    "text": "You can specify navigation restrictions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=493"
  },
  {
    "text": "using the X-RESTRICT attribute. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=495"
  },
  {
    "text": "X-RESTRICT with a value jump would prevent a user to seek ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=497"
  },
  {
    "text": "from a time before the ad to a time after the ad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=500"
  },
  {
    "text": "An X-RESTRICT with a value skip would prevent one ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=503"
  },
  {
    "text": "from playing the ad at a rate different from what is desired. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=506"
  },
  {
    "text": "Note that these restrictions are enforced by the UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=509"
  },
  {
    "text": "On tvOS, they're enforced by AVKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=512"
  },
  {
    "text": "And they should be available to you if you use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=514"
  },
  {
    "text": "the AVPlayerViewController for your video presentation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=516"
  },
  {
    "text": "When you're on other platforms or if you're not using AVKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=519"
  },
  {
    "text": "it's up to your application to enforce these restrictions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=522"
  },
  {
    "text": "Now that we've seen how you could schedule ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=526"
  },
  {
    "text": "server side ads using DATERANGE tags, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=527"
  },
  {
    "text": "let's see how you can monitor their progress at the client. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=530"
  },
  {
    "text": "For this, we're introducing two new AVFoundation objects: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=533"
  },
  {
    "text": "the AVPlayerInterstitialEventMonitor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=536"
  },
  {
    "text": "that notifies the client when an interstitial ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=538"
  },
  {
    "text": "is scheduled or playing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=540"
  },
  {
    "text": "and the AVPlayerInterstitialEvent object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=541"
  },
  {
    "text": "which contains all the information necessary ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=544"
  },
  {
    "text": "to place ads on a player item's timeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=546"
  },
  {
    "text": "The AVPlayerInterstitialEventMonitor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=550"
  },
  {
    "text": "has the following properties: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=552"
  },
  {
    "text": "a primary player that is playing your primary asset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=554"
  },
  {
    "text": "a handle to the interstitial player ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=556"
  },
  {
    "text": "that you can use to monitor playback of the ads, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=558"
  },
  {
    "text": "an events array which is an array ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=561"
  },
  {
    "text": "of AVPlayerInterstitialEvent objects that represent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=563"
  },
  {
    "text": "the different interstitials set on the player. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=565"
  },
  {
    "text": "We'll get to the description ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=568"
  },
  {
    "text": "of the AVPlayerInterstitialEvent object shortly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=569"
  },
  {
    "text": "A handle to the currentEvent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=572"
  },
  {
    "text": "So this would be valid when an interstitial ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=574"
  },
  {
    "text": "is playing and null otherwise. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=575"
  },
  {
    "text": "And then we have the eventsDidChangeNotification ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=578"
  },
  {
    "text": "which would fire when the event schedule changes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=580"
  },
  {
    "text": "and finally the currentEvent- DidChangeNotification ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=583"
  },
  {
    "text": "which would fire when we transition ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=586"
  },
  {
    "text": "to and from interstitials. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=587"
  },
  {
    "text": "The AVPlayerInterstitialEvent object that describes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=590"
  },
  {
    "text": "an interstitial event has properties that are basically ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=592"
  },
  {
    "text": "analogues of the DATERANGE attributes that we saw earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=595"
  },
  {
    "text": "The primaryItem represents your primary asset ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=598"
  },
  {
    "text": "on whose timeline you'd like to schedule the interstitials. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=601"
  },
  {
    "text": "The identifier is similar to the ID attribute ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=604"
  },
  {
    "text": "and this uniquely identifies the event. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=606"
  },
  {
    "text": "The time and date fields specify the start time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=609"
  },
  {
    "text": "of the interstitial in media time and date respectively. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=611"
  },
  {
    "text": "This would be like the START-DATE attribute. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=614"
  },
  {
    "text": "We'd use a copy of the template items to create ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=617"
  },
  {
    "text": "the interstitial player items that'd represent your ad pod. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=619"
  },
  {
    "text": "So this is similar to the ASSET-LIST attribute ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=623"
  },
  {
    "text": "that we saw earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=624"
  },
  {
    "text": "The restrictions property would specify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=626"
  },
  {
    "text": "the navigation restrictions for your interstitials. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=628"
  },
  {
    "text": "Then we have the resumptionOffset ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=631"
  },
  {
    "text": "and playoutLimit properties that are similar ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=633"
  },
  {
    "text": "to their DATERANGE counterparts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=635"
  },
  {
    "text": "And finally we have a dictionary of userDefinedAttributes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=637"
  },
  {
    "text": "So you can specify custom attributes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=641"
  },
  {
    "text": "in the DATERANGE tag, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=643"
  },
  {
    "text": "and these would be surfaced to your client application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=644"
  },
  {
    "text": "through the userDefinedAttributes property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=647"
  },
  {
    "text": "For instance, you might include a beacon URL ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=650"
  },
  {
    "text": "and other custom attributes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=652"
  },
  {
    "text": "for reporting ad playback metrics. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=654"
  },
  {
    "text": "Here's some example code that shows how you might use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=657"
  },
  {
    "text": "these APIs to update your UI when an interstitial is playing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=659"
  },
  {
    "text": "You create an AVPlayer to play your primary content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=663"
  },
  {
    "text": "So this content has interstitials scheduled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=666"
  },
  {
    "text": "using the DATERANGE tags. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=668"
  },
  {
    "text": "And then create an AVPlayerInterstitialEventMonitor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=671"
  },
  {
    "text": "and set it on the player. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=673"
  },
  {
    "text": "You then subscribe ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=675"
  },
  {
    "text": "to the currentEvent- DidChangeNotification ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=676"
  },
  {
    "text": "to inform your application when the player transitions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=678"
  },
  {
    "text": "in and out of interstitials. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=681"
  },
  {
    "text": "And when that notification fires, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=683"
  },
  {
    "text": "you simply update your UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=685"
  },
  {
    "text": "Sometimes you might want to schedule ads ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=687"
  },
  {
    "text": "on the client side. For that, we're introducing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=689"
  },
  {
    "text": "the AVPlayer- InterstitialEventController ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=691"
  },
  {
    "text": "that lets you programmatically set events on an AVPlayer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=693"
  },
  {
    "text": "This object inherits from the AVPlayerInterstitialEventMonitor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=698"
  },
  {
    "text": "and so has a lot of properties in common. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=702"
  },
  {
    "text": "One thing to note is that while ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=704"
  },
  {
    "text": "the events property is read-only at the monitor, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=705"
  },
  {
    "text": "it is a read-write property at the controller, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=708"
  },
  {
    "text": "thus letting you programatically schedule events. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=710"
  },
  {
    "text": "And this also has the cancelCurrentEvent API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=713"
  },
  {
    "text": "that lets you cancel ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=716"
  },
  {
    "text": "the currently playing interstitial. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=717"
  },
  {
    "text": "In this sample, we see how one might schedule ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=720"
  },
  {
    "text": "an ad pod containing two ads on an AVPlayer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=722"
  },
  {
    "text": "You create an AVPlayer to play your primary asset. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=725"
  },
  {
    "text": "You then create an AVPlayer- InterstitialEventController ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=729"
  },
  {
    "text": "and set it on the AVPlayer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=731"
  },
  {
    "text": "You create an array of AVPlayer items ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=734"
  },
  {
    "text": "that represent your ad pod. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=736"
  },
  {
    "text": "Then create an AVPlayerInterstitialEvent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=738"
  },
  {
    "text": "object where you specify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=740"
  },
  {
    "text": "the primaryItem to be the player's current item, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=741"
  },
  {
    "text": "as this represents your movie asset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=743"
  },
  {
    "text": "the start time in this example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=746"
  },
  {
    "text": "some 10 seconds into playback, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=747"
  },
  {
    "text": "and the templateItems to be the ad pod ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=749"
  },
  {
    "text": "that we created earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=751"
  },
  {
    "text": "And after the object is created, you simply set it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=753"
  },
  {
    "text": "on the events property of the controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=755"
  },
  {
    "text": "You might notice that just before we set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=758"
  },
  {
    "text": "the player on the AVPlayerViewController, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=760"
  },
  {
    "text": "we set the currentItem.translates- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=762"
  },
  {
    "text": "PlayerInterstitialEvents property to true. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=764"
  },
  {
    "text": "When this is set, AVKit would place navigation markers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=767"
  },
  {
    "text": "on the timeline and also enforce navigation restrictions on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=770"
  },
  {
    "text": "Now let's cut to a demo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=775"
  },
  {
    "text": "where we go over AVKit integration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=776"
  },
  {
    "text": "with HLS interstitials on tvOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=778"
  },
  {
    "text": "Here we have an ad scheduled to start ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=782"
  },
  {
    "text": "at some 40 seconds into playback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=784"
  },
  {
    "text": "And this ad has no navigation restrictions set. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=786"
  },
  {
    "text": "You can see that the ad marker is visible on the timeline.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=790"
  },
  {
    "text": "As the ad is playing, a countdown timer appears ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=795"
  },
  {
    "text": "over the playhead. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=798"
  },
  {
    "text": "And since this ad has no restrictions set, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=800"
  },
  {
    "text": "as I glide my hand over to the edge ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=802"
  },
  {
    "text": "of the Apple TV remote, I'd get an option to skip. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=804"
  },
  {
    "text": "And doing so would cause us to skip out of the ad ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=807"
  },
  {
    "text": "and go back to the primary. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=809"
  },
  {
    "text": "Now for this one, we have the same setup, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=812"
  },
  {
    "text": "but the ad has the skip restriction set.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=814"
  },
  {
    "text": "So now when the ad plays, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=820"
  },
  {
    "text": "you will not see an option to skip out of the ad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=822"
  },
  {
    "text": "You will have to wait for it to play out completely ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=824"
  },
  {
    "text": "before returning to the primary. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=826"
  },
  {
    "text": "Tom Hanks in \"Greyhound.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=829"
  },
  {
    "text": "Rated PG-13. Exclusively on Apple TV+. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=831"
  },
  {
    "text": "Thank you, Josh.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=835"
  },
  {
    "text": "Here we have two ads as we see on this timeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=837"
  },
  {
    "text": "The first with no navigation restrictions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=839"
  },
  {
    "text": "and the second with a jump restriction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=842"
  },
  {
    "text": "So when we attempt to jump past both the ads...",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=844"
  },
  {
    "text": "We see that the playhead snaps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=850"
  },
  {
    "text": "to the restricted ad marker while the ad plays.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=852"
  },
  {
    "text": "We'll bring hell down from on high.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=855"
  },
  {
    "text": "Tom Hanks in \"Greyhound.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=860"
  },
  {
    "text": "Rated PG-13. Exclusively on Apple TV+. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=862"
  },
  {
    "text": "And after the ad plays out, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=866"
  },
  {
    "text": "we'd resume from the seek location.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=867"
  },
  {
    "text": "To wrap up, you can now schedule ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=871"
  },
  {
    "text": "server side ads using DATERANGE tags. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=873"
  },
  {
    "text": "You'd want to specify the resume offset to be 0 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=875"
  },
  {
    "text": "for video-on-demand streams such that you'd rejoin ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=878"
  },
  {
    "text": "the program from where you left off. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=880"
  },
  {
    "text": "And you could skip this attribute for live streams ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=882"
  },
  {
    "text": "so that we rejoin at the live edge. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=884"
  },
  {
    "text": "You can use the X-ASSET-LIST attribute for late binding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=886"
  },
  {
    "text": "of your ad assets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=889"
  },
  {
    "text": "schedule early return in live broadcasts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=891"
  },
  {
    "text": "using the X-PLAYOUT-LIMIT attribute, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=892"
  },
  {
    "text": "and specify navigation restrictions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=895"
  },
  {
    "text": "with the X-RESTRICT attribute. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=897"
  },
  {
    "text": "To monitor ad playback on the client side, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=899"
  },
  {
    "text": "you'd use the AVPlayer- InterstitialEventMonitor. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=901"
  },
  {
    "text": "And you can programatically set ads ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=904"
  },
  {
    "text": "using the AVPlayer- InterstitialEventController. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=906"
  },
  {
    "text": "Thank you for watching\nand enjoy the rest of WWDC21.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10140/?time=908"
  }
]