[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=2"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=7"
  },
  {
    "text": "Adam Sonnanstine: Hello! my name is Adam, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=9"
  },
  {
    "text": "and I'm here today to show you what's new in AVFoundation.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=11"
  },
  {
    "text": "We have three new features to discuss today.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=15"
  },
  {
    "text": "We're going to spend most of our time talking about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=17"
  },
  {
    "text": "what's new in the world of AVAsset inspection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=19"
  },
  {
    "text": "and then we'll give a quick introduction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=23"
  },
  {
    "text": "to two other features: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=24"
  },
  {
    "text": "video compositing with metadata and caption file authoring.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=26"
  },
  {
    "text": "So without further ado, let's jump into our first topic, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=30"
  },
  {
    "text": "which is AVAsset async Inspection.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=33"
  },
  {
    "text": "But first, a little bit of background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=37"
  },
  {
    "text": "starting with a refresher on AVAsset.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=38"
  },
  {
    "text": "AVAsset is AVFoundation's core model object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=42"
  },
  {
    "text": "for representing things like movie files ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=45"
  },
  {
    "text": "stored on the user's device; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=47"
  },
  {
    "text": "movie files stored elsewhere, such as a remote server; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=49"
  },
  {
    "text": "and other forms of audiovisual content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=53"
  },
  {
    "text": "such as HTTP Live Streams and compositions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=55"
  },
  {
    "text": "And when you have an asset, you most often want to play it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=58"
  },
  {
    "text": "but just as often, you're going to want to inspect it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=62"
  },
  {
    "text": "You want to ask it questions like, what's its duration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=65"
  },
  {
    "text": "or what are the formats of audio and video it contains? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=68"
  },
  {
    "text": "And that's what we're really going to be talking about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=71"
  },
  {
    "text": "in this topic: asset inspection.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=73"
  },
  {
    "text": "And whenever you're inspecting an asset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=76"
  },
  {
    "text": "there are two important things to keep in mind.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=78"
  },
  {
    "text": "The first is that asset inspection happens on demand.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=82"
  },
  {
    "text": "This is mainly because movie files can be quite large.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=86"
  },
  {
    "text": "A feature-length film could be several gigabytes in size.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=89"
  },
  {
    "text": "You wouldn't want the asset ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=92"
  },
  {
    "text": "to eagerly download the entire file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=93"
  },
  {
    "text": "just in case you ask for its duration later.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=96"
  },
  {
    "text": "Instead, the asset waits ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=98"
  },
  {
    "text": "until you ask it to load a property value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=100"
  },
  {
    "text": "then it downloads just the information it needs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=102"
  },
  {
    "text": "to give you that value.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=105"
  },
  {
    "text": "The second thing to keep in mind is that asset inspection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=107"
  },
  {
    "text": "is an asynchronous process.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=110"
  },
  {
    "text": "This is really important because network I/O can take some time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=112"
  },
  {
    "text": "If the asset is stored across the network, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=115"
  },
  {
    "text": "you wouldn't want your app's main thread to be blocked ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=118"
  },
  {
    "text": "while AVAsset issues a synchronous network request.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=120"
  },
  {
    "text": "Instead, AVAsset will asynchronously ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=123"
  },
  {
    "text": "deliver the result when it's ready.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=126"
  },
  {
    "text": "With these two things in mind, we have a new API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=128"
  },
  {
    "text": "for inspecting asset properties, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=131"
  },
  {
    "text": "and it looks a little bit like this.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=132"
  },
  {
    "text": "The main thing to notice is this new load method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=136"
  },
  {
    "text": "which takes in a property identifier -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=138"
  },
  {
    "text": "in this case .duration -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=140"
  },
  {
    "text": "in order for you to tell it which property value to load.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=142"
  },
  {
    "text": "Each property identifier is associated with a result type ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=145"
  },
  {
    "text": "at compile time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=148"
  },
  {
    "text": "which determines the return type of the load method.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=149"
  },
  {
    "text": "In this case, the duration is a CMTime, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=153"
  },
  {
    "text": "so the result is a CMTime.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=156"
  },
  {
    "text": "One thing you may not have seen before is this await keyword.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=158"
  },
  {
    "text": "This is a new feature in Swift, and it's used to mark, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=162"
  },
  {
    "text": "at the call site, that the load method is asynchronous.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=164"
  },
  {
    "text": "For all the details on async/await ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=168"
  },
  {
    "text": "and the broader concurrency effort in Swift, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=170"
  },
  {
    "text": "I encourage you to check out the session called ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=173"
  },
  {
    "text": "\"Meet async/await in Swift.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=175"
  },
  {
    "text": "For now, as a quick way of understanding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=178"
  },
  {
    "text": "how to use our new property loading method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=179"
  },
  {
    "text": "I like to think of the await keyword ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=182"
  },
  {
    "text": "as dividing the calling function into two parts.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=184"
  },
  {
    "text": "First, there's the part that happens ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=187"
  },
  {
    "text": "before the asynchronous operation begins.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=188"
  },
  {
    "text": "In this case, we create an asset and ask it to load its duration.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=191"
  },
  {
    "text": "At this point, the asset goes off and does the I/O ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=195"
  },
  {
    "text": "and parsing necessary to determine its duration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=197"
  },
  {
    "text": "and we await its result.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=200"
  },
  {
    "text": "While we're waiting, the calling function is suspended, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=202"
  },
  {
    "text": "which means the code written after the await ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=205"
  },
  {
    "text": "doesn't execute right away.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=207"
  },
  {
    "text": "However, the thread we were running on isn't blocked.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=210"
  },
  {
    "text": "Instead, it's free to do more work while we're waiting.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=213"
  },
  {
    "text": "Once the asynchronous duration loading has finished, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=216"
  },
  {
    "text": "then the second half of the function is scheduled to be run.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=219"
  },
  {
    "text": "In this case, if the duration loading was successful, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=222"
  },
  {
    "text": "we store the duration into a local constant ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=225"
  },
  {
    "text": "and send it off to another function.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=228"
  },
  {
    "text": "Or, if the operation failed, an error will be thrown ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=230"
  },
  {
    "text": "once the calling function resumes.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=233"
  },
  {
    "text": "So that's the basics of loading a property value asynchronously.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=236"
  },
  {
    "text": "You can also load the values of multiple properties at once, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=240"
  },
  {
    "text": "and you do this simply ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=243"
  },
  {
    "text": "by passing in more than one property identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=244"
  },
  {
    "text": "to the load method.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=247"
  },
  {
    "text": "In this case, we're loading both the duration and the tracks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=248"
  },
  {
    "text": "at the same time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=251"
  },
  {
    "text": "This is not only convenient, but it can also be more efficient.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=253"
  },
  {
    "text": "If the asset knows all the properties you're interested in, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=256"
  },
  {
    "text": "it can batch up the work required to load their values.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=259"
  },
  {
    "text": "The result of loading multiple property values is a tuple, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=263"
  },
  {
    "text": "with the loaded values in the same order you used ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=266"
  },
  {
    "text": "for the property identifiers.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=268"
  },
  {
    "text": "Just like loading a single property value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=270"
  },
  {
    "text": "this is type safe.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=273"
  },
  {
    "text": "In this case, the first element of the result tuple is a CMTime ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=274"
  },
  {
    "text": "and the second element is an array of AVAssetTracks.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=278"
  },
  {
    "text": "And of course, just like with loading a single value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=282"
  },
  {
    "text": "this is an asynchronous operation.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=284"
  },
  {
    "text": "In addition to asynchronously loading property values, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=287"
  },
  {
    "text": "you can also check the status of a property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=290"
  },
  {
    "text": "without waiting for the value to load ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=292"
  },
  {
    "text": "at any time using the new status(of: ) method.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=294"
  },
  {
    "text": "You pass in the same property identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=298"
  },
  {
    "text": "that you use for the load method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=299"
  },
  {
    "text": "and this'll return an enum with four possible cases.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=301"
  },
  {
    "text": "Each property starts off as .notYetLoaded.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=304"
  },
  {
    "text": "Remember that asset inspection happens on demand, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=307"
  },
  {
    "text": "so until you ask to load a property value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=310"
  },
  {
    "text": "the asset won't have done any work to load it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=314"
  },
  {
    "text": "If you happen to check the status ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=316"
  },
  {
    "text": "while the loading is in progress, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=318"
  },
  {
    "text": "you'll get the .loading case.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=320"
  },
  {
    "text": "Or, if the property is already loaded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=321"
  },
  {
    "text": "you'll get the .loaded case, which comes bundled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=323"
  },
  {
    "text": "with the value that was loaded as an associated value.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=326"
  },
  {
    "text": "Finally, if a failure occurred -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=329"
  },
  {
    "text": "perhaps because the network went down -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=331"
  },
  {
    "text": "you'll get the .failed case, which comes bundled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=333"
  },
  {
    "text": "with an error to describe what went wrong.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=335"
  },
  {
    "text": "Note that this'll be the same error that was thrown ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=338"
  },
  {
    "text": "by the invocation of the load method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=341"
  },
  {
    "text": "that initiated the failed loading request.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=343"
  },
  {
    "text": "So that's the new API for loading asynchronous properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=346"
  },
  {
    "text": "and checking their status.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=349"
  },
  {
    "text": "AVAsset has quite a few properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=351"
  },
  {
    "text": "whose values can be loaded asynchronously.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=353"
  },
  {
    "text": "Most of these vend a self-contained value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=356"
  },
  {
    "text": "but the .tracks and .metadata properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=358"
  },
  {
    "text": "vend more complex objects you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=360"
  },
  {
    "text": "to descend into the hierarchical structure of the asset.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=362"
  },
  {
    "text": "In the case of the .tracks property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=366"
  },
  {
    "text": "you'll get an array of AVAssetTracks.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=368"
  },
  {
    "text": "An AVAssetTrack has its own collection of properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=370"
  },
  {
    "text": "whose values can be loaded asynchronously ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=373"
  },
  {
    "text": "using that same load method.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=375"
  },
  {
    "text": "Similarly, the .metadata property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=378"
  },
  {
    "text": "gives you an array of AVMetadataItems, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=380"
  },
  {
    "text": "and several AVMetadataItem properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=382"
  },
  {
    "text": "can also be loaded asynchronously ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=385"
  },
  {
    "text": "using the load method.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=387"
  },
  {
    "text": "The last bit of new API in this area ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=389"
  },
  {
    "text": "is a collection of asynchronous methods that you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=391"
  },
  {
    "text": "to get at specific subsets of certain property values.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=394"
  },
  {
    "text": "So instead of loading all the tracks, for example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=397"
  },
  {
    "text": "you can use one of these first three methods ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=400"
  },
  {
    "text": "to load just some of the tracks -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=402"
  },
  {
    "text": "for example, just the audio tracks.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=403"
  },
  {
    "text": "There are several new methods like this ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=406"
  },
  {
    "text": "on both AVAsset and AVAssetTrack.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=407"
  },
  {
    "text": "So that's all the new API we have ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=411"
  },
  {
    "text": "for inspecting assets asynchronously.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=413"
  },
  {
    "text": "But at this point, I have a small confession to make.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=416"
  },
  {
    "text": "None of this functionality is actually new.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=420"
  },
  {
    "text": "The APIs are new, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=422"
  },
  {
    "text": "but these classes have always had the ability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=424"
  },
  {
    "text": "to load their property values asynchronously.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=426"
  },
  {
    "text": "It's just that, with the old APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=429"
  },
  {
    "text": "you would've had to write code more like this.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=431"
  },
  {
    "text": "It was a three-step process.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=434"
  },
  {
    "text": "You first have to call ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=436"
  },
  {
    "text": "the loadValuesAsynchronously method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=437"
  },
  {
    "text": "giving it strings to tell it which properties to load.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=440"
  },
  {
    "text": "Then you need to make sure that each of the properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=443"
  },
  {
    "text": "actually did successfully load and didn't fail.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=445"
  },
  {
    "text": "Then, once you've gotten that far, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=449"
  },
  {
    "text": "you can fetch the loaded value either by querying ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=451"
  },
  {
    "text": "the corresponding synchronous property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=453"
  },
  {
    "text": "or by calling one of the synchronous filtering methods.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=455"
  },
  {
    "text": "This is not only verbose and repetitive, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=458"
  },
  {
    "text": "it's also easy to misuse.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=461"
  },
  {
    "text": "For example, it's very easy to forget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=463"
  },
  {
    "text": "to do these essential loading and status-checking steps.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=465"
  },
  {
    "text": "What you're left with are these synchronous properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=469"
  },
  {
    "text": "and methods that can be called at any time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=471"
  },
  {
    "text": "but if you call them without first loading ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=474"
  },
  {
    "text": "the property values, you'll end up doing blocking I/O.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=476"
  },
  {
    "text": "If you do this on your main thread, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=480"
  },
  {
    "text": "this means that your app can end up hanging ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=482"
  },
  {
    "text": "at unpredictable times.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=484"
  },
  {
    "text": "So in addition to the fact that the new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=486"
  },
  {
    "text": "are simply easier to use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=489"
  },
  {
    "text": "the fact that they also eliminate these common misuses ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=491"
  },
  {
    "text": "means that we plan to deprecate the old synchronous APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=494"
  },
  {
    "text": "for Swift clients in a future release.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=498"
  },
  {
    "text": "This is an excellent time to move ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=501"
  },
  {
    "text": "to the new asynchronous versions of these interfaces, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=502"
  },
  {
    "text": "and to help you do that ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=506"
  },
  {
    "text": "we've prepared a short migration guide.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=507"
  },
  {
    "text": "So, if you're doing that trifecta of loading the value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=509"
  },
  {
    "text": "checking its status, and then grabbing a synchronous property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=513"
  },
  {
    "text": "now you can simply call the load method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=517"
  },
  {
    "text": "and do that all in one asynchronous step.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=519"
  },
  {
    "text": "Similarly, if you're doing that three-step process ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=523"
  },
  {
    "text": "but using a synchronous filtering method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=525"
  },
  {
    "text": "instead of a property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=528"
  },
  {
    "text": "you can now call the asynchronous equivalent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=529"
  },
  {
    "text": "of that filtering method and do that in one step.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=532"
  },
  {
    "text": "If you're switching over the status of a property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=535"
  },
  {
    "text": "using the old statusOfValue(forKey: ) method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=538"
  },
  {
    "text": "and then grabbing the synchronous property value ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=540"
  },
  {
    "text": "when you see that you're in the .loaded case, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=543"
  },
  {
    "text": "now you can take advantage of the fact that the .loaded case ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=545"
  },
  {
    "text": "of the new status enum comes bundled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=548"
  },
  {
    "text": "with that .loaded value.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=551"
  },
  {
    "text": "If your app is doing something a little bit more interesting, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=553"
  },
  {
    "text": "like loading the value of a property in one part of the code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=556"
  },
  {
    "text": "and then fetching the loaded value ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=559"
  },
  {
    "text": "in a different part of the code, there are a couple ways ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=560"
  },
  {
    "text": "you could do this with the new interface.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=563"
  },
  {
    "text": "I recommend just calling the load method again.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=565"
  },
  {
    "text": "This is the easiest and safest way to do it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=568"
  },
  {
    "text": "and if the property has already been loaded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=570"
  },
  {
    "text": "this won't duplicate the work that's already been done.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=572"
  },
  {
    "text": "Instead, it'll just return a cached value.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=575"
  },
  {
    "text": "However, there's one caveat to this and that is that, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=578"
  },
  {
    "text": "because the load method is an async method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=580"
  },
  {
    "text": "it can only be called from an async context.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=583"
  },
  {
    "text": "So if you really need to get the value of the property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=586"
  },
  {
    "text": "from a pure synchronous context, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=589"
  },
  {
    "text": "you can do something like get the status of the property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=591"
  },
  {
    "text": "and assert that it's loaded ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=594"
  },
  {
    "text": "in order to grab the value of the property synchronously.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=595"
  },
  {
    "text": "Still, you have to be careful doing this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=598"
  },
  {
    "text": "because it's possible for a property to become failed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=600"
  },
  {
    "text": "even after it's already been loaded.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=603"
  },
  {
    "text": "Finally, if you're skipping the loading ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=606"
  },
  {
    "text": "and status-checking steps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=608"
  },
  {
    "text": "and just relying on the current behavior of the properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=610"
  },
  {
    "text": "and methods in that they block until the result is available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=612"
  },
  {
    "text": "well, we're actually not providing a replacement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=616"
  },
  {
    "text": "for this.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=618"
  },
  {
    "text": "This has never been the recommended way to use the API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=619"
  },
  {
    "text": "and so we've always discouraged it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=622"
  },
  {
    "text": "We designed the new property-loading APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=624"
  },
  {
    "text": "to be just about as easy to use as fetching a simple property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=627"
  },
  {
    "text": "so migrating to the new APIs should be straightforward.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=630"
  },
  {
    "text": "And with that, that's all for our first topic.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=635"
  },
  {
    "text": "I'm really excited about our new way to inspect assets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=638"
  },
  {
    "text": "using Swift's new async features, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=640"
  },
  {
    "text": "and I hope you'll enjoy using them as much as I have.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=642"
  },
  {
    "text": "Now let's move on to the first of our two shorter topics: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=646"
  },
  {
    "text": "video compositing with metadata.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=649"
  },
  {
    "text": "Here we're talking about video compositing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=652"
  },
  {
    "text": "which is the process of taking multiple video tracks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=654"
  },
  {
    "text": "and composing them into a single stream of video frames.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=657"
  },
  {
    "text": "And in particular, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=661"
  },
  {
    "text": "we have an enhancement for custom video compositors, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=662"
  },
  {
    "text": "which is where you provide the code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=665"
  },
  {
    "text": "that does the compositing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=667"
  },
  {
    "text": "New this year, you can get per-frame metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=670"
  },
  {
    "text": "delivered to you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=672"
  },
  {
    "text": "in your custom compositor's frame composition callback.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=673"
  },
  {
    "text": "As an example, let's say you have a sequence of GPS data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=677"
  },
  {
    "text": "and that data is time-stamped and synchronized ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=680"
  },
  {
    "text": "with your video, and you want to use that GPS data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=682"
  },
  {
    "text": "in order to influence how your frames are composed together.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=685"
  },
  {
    "text": "You can do that now, and the first step is to write ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=689"
  },
  {
    "text": "the GPS data to a timed metadata track in your source movie.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=691"
  },
  {
    "text": "In order do to this with AVAssetWriter, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=696"
  },
  {
    "text": "check out the existing class, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=698"
  },
  {
    "text": "AVAssetWriter InputMetadataAdaptor.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=699"
  },
  {
    "text": "Now let's take a look at the new API.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=703"
  },
  {
    "text": "Let's say you're starting with a source movie ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=706"
  },
  {
    "text": "that has a certain collection of tracks.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=708"
  },
  {
    "text": "Perhaps it has an audio track, two video tracks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=711"
  },
  {
    "text": "and three timed metadata tracks.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=713"
  },
  {
    "text": "But let's say that tracks four and five contain metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=716"
  },
  {
    "text": "that's useful for your video compositing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=718"
  },
  {
    "text": "but track six is unrelated.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=721"
  },
  {
    "text": "You have two setup steps to perform, and the first ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=724"
  },
  {
    "text": "is to use the new source SampleDataTrackIDs property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=726"
  },
  {
    "text": "to tell your video composition object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=730"
  },
  {
    "text": "the IDs of all the timed metadata tracks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=733"
  },
  {
    "text": "that are relevant for the entire video composition.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=734"
  },
  {
    "text": "Once you've done that, the second step ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=738"
  },
  {
    "text": "is to take each of your video composition instructions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=740"
  },
  {
    "text": "and do something similar, but this time you set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=743"
  },
  {
    "text": "the requiredSourceSampleData TrackIDs property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=745"
  },
  {
    "text": "to tell it the track ID -- or IDs -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=748"
  },
  {
    "text": "that are relevant for that particular instruction.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=751"
  },
  {
    "text": "It's important that you do both of these setup steps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=754"
  },
  {
    "text": "or you simply won't get any metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=756"
  },
  {
    "text": "in your composition callback.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=759"
  },
  {
    "text": "Now let's move over to the callback itself.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=761"
  },
  {
    "text": "When you get your asynchronous video composition request object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=764"
  },
  {
    "text": "in your callback, there are two new APIs that you use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=767"
  },
  {
    "text": "in order to get the metadata for your video composition.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=770"
  },
  {
    "text": "The first is the source SampleDataTrackIDs property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=774"
  },
  {
    "text": "which replays the track IDs for the metadata tracks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=777"
  },
  {
    "text": "that are relevant to that request.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=780"
  },
  {
    "text": "Then for each of the track IDs, you can use the ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=782"
  },
  {
    "text": "sourceTimedMetadata(byTrackID :) method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=785"
  },
  {
    "text": "in order to get the current timed metadata group ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=787"
  },
  {
    "text": "for that track.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=790"
  },
  {
    "text": "Now, AVTimedMetadataGroup is a high-level representation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=792"
  },
  {
    "text": "of the metadata, with the value parsed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=795"
  },
  {
    "text": "into a string, date, or other high-level object.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=797"
  },
  {
    "text": "If you'd rather work with the raw bytes of the metadata, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=802"
  },
  {
    "text": "you can use the sourceSampleBuffer(byTrackID: ) ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=804"
  },
  {
    "text": "method to get a CMSampleBuffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=806"
  },
  {
    "text": "instead of an AVTimedMetadataGroup.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=809"
  },
  {
    "text": "Once you have the metadata in hand, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=812"
  },
  {
    "text": "you can use the metadata along with your source video frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=814"
  },
  {
    "text": "to generate your output video frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=817"
  },
  {
    "text": "and finish off the request.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=819"
  },
  {
    "text": "So that's all it takes to get metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=822"
  },
  {
    "text": "into your custom video compositor callback ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=824"
  },
  {
    "text": "so you can do more interesting things ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=827"
  },
  {
    "text": "with your video compositions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=828"
  },
  {
    "text": "Now onto our final topic, which is caption file authoring.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=832"
  },
  {
    "text": "New this year for macOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=837"
  },
  {
    "text": "AVFoundation is adding support for two file formats.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=838"
  },
  {
    "text": "First, we have iTunes Timed Text, or .itt files, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=842"
  },
  {
    "text": "which contain subtitles.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=846"
  },
  {
    "text": "The other file format is Scenarist Closed Captions -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=847"
  },
  {
    "text": "or .scc files -- which contain closed captions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=850"
  },
  {
    "text": "AVFoundation is adding support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=854"
  },
  {
    "text": "for authoring these two file formats, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=855"
  },
  {
    "text": "ingesting captions from these types of files, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=858"
  },
  {
    "text": "and also for previewing captions at runtime ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=860"
  },
  {
    "text": "to see what they'll look like during playback.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=863"
  },
  {
    "text": "On the authoring side, we have some new APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=866"
  },
  {
    "text": "starting with AVCaption, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=868"
  },
  {
    "text": "which is the model object that represents a single caption.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=870"
  },
  {
    "text": "It has properties for things like the text, position, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=873"
  },
  {
    "text": "styling, and other attributes of a single caption.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=876"
  },
  {
    "text": "You can create AVCaptions yourself ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=880"
  },
  {
    "text": "and use an AVAssetWriterInputCaptionAdaptor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=882"
  },
  {
    "text": "in order to write them to one of these two file formats.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=885"
  },
  {
    "text": "In addition, we have a new validation service ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=889"
  },
  {
    "text": "in the AVCaptionConversion Validator class, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=891"
  },
  {
    "text": "which helps you make sure the captions you're writing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=894"
  },
  {
    "text": "are actually compatible with the file format you've chosen.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=896"
  },
  {
    "text": "As an example of why this is important, consider .scc files.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=900"
  },
  {
    "text": "They contain CEA-608 captions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=904"
  },
  {
    "text": "which is a format that has very specific limitations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=906"
  },
  {
    "text": "about how many captions you can have in a given amount of time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=909"
  },
  {
    "text": "all the way down to having a fixed bit budget ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=913"
  },
  {
    "text": "for the data representing the individual characters ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=915"
  },
  {
    "text": "and their styling.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=918"
  },
  {
    "text": "So the validator will help you not only ensure ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=919"
  },
  {
    "text": "that your stream of captions is compatible with the file format, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=921"
  },
  {
    "text": "it'll also suggest tweaks you can make to your captions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=925"
  },
  {
    "text": "such as adjusting their time stamps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=928"
  },
  {
    "text": "in order to make them compatible.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=930"
  },
  {
    "text": "The new API for ingesting captions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=933"
  },
  {
    "text": "is AVAssetReader OutputCaptionAdaptor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=935"
  },
  {
    "text": "which allows you to take one of these files ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=938"
  },
  {
    "text": "and read in AVCaption objects from it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=940"
  },
  {
    "text": "Finally, we have an AVCaptionRenderer class, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=943"
  },
  {
    "text": "which allows you to take a single caption ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=946"
  },
  {
    "text": "or a group of captions and render them to a CGContext ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=948"
  },
  {
    "text": "in order to get a preview of what they'll look like ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=951"
  },
  {
    "text": "during playback.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=954"
  },
  {
    "text": "So that's just the tip of the iceberg ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=956"
  },
  {
    "text": "for our new caption file authoring APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=957"
  },
  {
    "text": "If you're interested in adopting them, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=960"
  },
  {
    "text": "we encourage you to get in touch with us -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=962"
  },
  {
    "text": "either in the forums or in the conference labs -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=964"
  },
  {
    "text": "and we can help answer any questions that you have.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=966"
  },
  {
    "text": "And that was our final topic, so let's wrap up.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=970"
  },
  {
    "text": "Our big topic for the day was inspecting AVAsset properties, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=974"
  },
  {
    "text": "the importance of doing so on demand and asynchronously, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=977"
  },
  {
    "text": "the new APIs in this area, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=981"
  },
  {
    "text": "and some tips for migrating from the old APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=983"
  },
  {
    "text": "We then talked about using timed metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=986"
  },
  {
    "text": "to further customize your custom video compositions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=988"
  },
  {
    "text": "Finally, I gave a brief introduction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=992"
  },
  {
    "text": "to caption file authoring and the new APIs in that area.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=994"
  },
  {
    "text": "That's all for today.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=998"
  },
  {
    "text": "Thank you very much for watching and enjoy WWDC21.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=1000"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10146/?time=1004"
  }
]