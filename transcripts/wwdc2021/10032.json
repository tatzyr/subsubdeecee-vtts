[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=2"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=7"
  },
  {
    "text": "Megan Gardner: Hello! My name is Megan Gardner, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=9"
  },
  {
    "text": "an engineer on the WebKit team, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=12"
  },
  {
    "text": "and today we're going to explore WKWebView additions together. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=13"
  },
  {
    "text": "Before we start our journey, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=18"
  },
  {
    "text": "let's make sure we know what we're exploring. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=19"
  },
  {
    "text": "Let me tell you what WKWebView is ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=21"
  },
  {
    "text": "and why you might want to use it in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=24"
  },
  {
    "text": "When a user clicks a URL, they are expecting a web page ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=26"
  },
  {
    "text": "to load and be able to interact with that content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=30"
  },
  {
    "text": "Loading the URL, rendering the content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=33"
  },
  {
    "text": "and running any JavaScript on that content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=36"
  },
  {
    "text": "is a very complicated task! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=38"
  },
  {
    "text": "So we have encapsulated most of that work for you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=41"
  },
  {
    "text": "inside of WKWebView. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=43"
  },
  {
    "text": "And not just for you! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=46"
  },
  {
    "text": "WKWebView is the view that is used to show all web content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=48"
  },
  {
    "text": "on iOS and much of MacOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=51"
  },
  {
    "text": "This includes Safari. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=53"
  },
  {
    "text": "So if you need to show a web page in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=55"
  },
  {
    "text": "then you might assume you need to add a WKWebView. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=57"
  },
  {
    "text": "But wait! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=60"
  },
  {
    "text": "What are you doing with that content? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=61"
  },
  {
    "text": "If you need a way to view a web page, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=64"
  },
  {
    "text": "but you don't need much customized interaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=66"
  },
  {
    "text": "with that content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=68"
  },
  {
    "text": "you probably just need an SFSafariViewController. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=70"
  },
  {
    "text": "This is like a tiny Safari inside your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=73"
  },
  {
    "text": "Using one of these views is incredibly simple, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=77"
  },
  {
    "text": "but there is a trade-off. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=79"
  },
  {
    "text": "There is little you can do ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=82"
  },
  {
    "text": "to interact with the web content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=83"
  },
  {
    "text": "But this year, we have made it easier to do just a bit more ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=85"
  },
  {
    "text": "with Safari view controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=89"
  },
  {
    "text": "Your users have always been able to run app extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=91"
  },
  {
    "text": "through the share sheet on your Safari view controller's content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=95"
  },
  {
    "text": "but for special functions built only for your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=99"
  },
  {
    "text": "that has been a little cumbersome ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=102"
  },
  {
    "text": "and hard for users to discover. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=105"
  },
  {
    "text": "So in iOS 15, we have added a new API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=107"
  },
  {
    "text": "to bring one of your app extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=111"
  },
  {
    "text": "to a customized button on Safari view controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=113"
  },
  {
    "text": "You can map this button to one of your app's share extensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=117"
  },
  {
    "text": "and you can even set an image for that button ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=120"
  },
  {
    "text": "that will best represent the extension that will run, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=123"
  },
  {
    "text": "allowing users to run your app extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=126"
  },
  {
    "text": "directly from the toolbar, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=128"
  },
  {
    "text": "including running JavaScript on the page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=130"
  },
  {
    "text": "But this is still a very limited amount of interaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=132"
  },
  {
    "text": "And that's where WKWebView comes in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=135"
  },
  {
    "text": "WKWebView allows you to do many things ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=138"
  },
  {
    "text": "with the content that it is showing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=141"
  },
  {
    "text": "We have many APIs for loading, manipulating, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=143"
  },
  {
    "text": "and interacting with the content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=146"
  },
  {
    "text": "So, if you need to show web content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=148"
  },
  {
    "text": "and you need to have complex interactions with it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=150"
  },
  {
    "text": "then WKWebView is for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=153"
  },
  {
    "text": "And since WKWebView is about interacting with web content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=156"
  },
  {
    "text": "we are always striving to make that easier for you to do. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=159"
  },
  {
    "text": "We take on more of the workload by making easy APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=163"
  },
  {
    "text": "for you to adopt that will help you access and manipulate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=166"
  },
  {
    "text": "the content of your web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=169"
  },
  {
    "text": "This year we have been hard at work, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=171"
  },
  {
    "text": "adding new and helpful features to WKWebView, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=173"
  },
  {
    "text": "and today, I'd love to tell you about some of them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=176"
  },
  {
    "text": "First, we'll cover several APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=180"
  },
  {
    "text": "that will allow you to interact with ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=183"
  },
  {
    "text": "and manipulate your web content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=184"
  },
  {
    "text": "without using having to inject JavaScript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=186"
  },
  {
    "text": "Then we will cover several APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=189"
  },
  {
    "text": "that will give you access to functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=191"
  },
  {
    "text": "that previously has only been available in Safari, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=193"
  },
  {
    "text": "allowing for a deeper browser-like experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=196"
  },
  {
    "text": "in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=199"
  },
  {
    "text": "Before we go over these APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=202"
  },
  {
    "text": "that will allow you to opt-out of using JavaScript, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=204"
  },
  {
    "text": "let's review why you might want to avoid JavaScript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=207"
  },
  {
    "text": "We love JavaScript! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=212"
  },
  {
    "text": "It is the language of the web! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=215"
  },
  {
    "text": "But injecting JavaScript is complicated. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=216"
  },
  {
    "text": "The interface between native and web ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=220"
  },
  {
    "text": "that you need to cross via injection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=222"
  },
  {
    "text": "can be difficult and cumbersome to navigate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=224"
  },
  {
    "text": "It can also easily have unintended side effects ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=227"
  },
  {
    "text": "or be difficult to manage when dealing with content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=230"
  },
  {
    "text": "from multiple web sources. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=233"
  },
  {
    "text": "It's best to avoid that headache if you can. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=235"
  },
  {
    "text": "There are also some features ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=239"
  },
  {
    "text": "that are just incompatible with injected JavaScript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=241"
  },
  {
    "text": "Last year, we introduced a new feature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=244"
  },
  {
    "text": "called app-bound domains. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=246"
  },
  {
    "text": "This allows you to specify which domains ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=248"
  },
  {
    "text": "you would like to allow deep interaction with ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=250"
  },
  {
    "text": "in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=253"
  },
  {
    "text": "App-bound domains helps increase the security and privacy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=254"
  },
  {
    "text": "of your app for your users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=257"
  },
  {
    "text": "But to get this benefit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=259"
  },
  {
    "text": "you cannot inject JavaScript into your web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=260"
  },
  {
    "text": "Doing so disables the feature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=263"
  },
  {
    "text": "There are also other high-value features, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=266"
  },
  {
    "text": "like Apple Pay, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=268"
  },
  {
    "text": "that you do not have access to in your web view ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=270"
  },
  {
    "text": "if you choose to inject JavaScript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=272"
  },
  {
    "text": "Therefore, we've added several new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=275"
  },
  {
    "text": "to allow you to easily interact with the content in your web view ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=277"
  },
  {
    "text": "without having to deal with injecting JavaScript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=280"
  },
  {
    "text": "These new APIs fall into three categories. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=284"
  },
  {
    "text": "First, we have simple ways for you to access ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=287"
  },
  {
    "text": "the pages' theme color and related colors ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=290"
  },
  {
    "text": "for a website. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=292"
  },
  {
    "text": "Next, a way to disable text interaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=295"
  },
  {
    "text": "as well as being able to control media playback in your web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=297"
  },
  {
    "text": "First, let's explore theme color. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=303"
  },
  {
    "text": "You might remember last year we told you about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=306"
  },
  {
    "text": "one of our mission-critical internal apps, Browser Pets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=308"
  },
  {
    "text": "which was written by Brady Eidson ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=312"
  },
  {
    "text": "to combine the feeds ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=314"
  },
  {
    "text": "from our WebKittens and Pups on Safari websites. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=315"
  },
  {
    "text": "Well, with all the new APIs available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=318"
  },
  {
    "text": "Brady and I decided we should update this important tool, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=321"
  },
  {
    "text": "to get the most out of our many morale-raising cats and dogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=324"
  },
  {
    "text": "One of the engineers on the WebKittens website ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=329"
  },
  {
    "text": "has decided to add a dynamic theme color ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=332"
  },
  {
    "text": "that changes with the season, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=335"
  },
  {
    "text": "adding a little flair to our important pet photos. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=336"
  },
  {
    "text": "I wanted this to be reflected in the app as well, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=340"
  },
  {
    "text": "but I did not want to duplicate the code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=342"
  },
  {
    "text": "Fortunately, we have a new API that makes this very easy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=345"
  },
  {
    "text": "As you can see here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=351"
  },
  {
    "text": "I can set the color of the header view ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=352"
  },
  {
    "text": "to the theme color of the website ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=355"
  },
  {
    "text": "using this new API, thus leveraging the work ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=357"
  },
  {
    "text": "that my fellow engineer put into the WebKittens website. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=360"
  },
  {
    "text": "The website engineer can even add new themes in the future, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=364"
  },
  {
    "text": "and they will be reflected in the app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=367"
  },
  {
    "text": "without any additional work on my part. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=368"
  },
  {
    "text": "If themeColor isn't set, in a future seed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=372"
  },
  {
    "text": "we have an alternate calculated background color exposed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=375"
  },
  {
    "text": "as underPageBackgroundColor, which you can use similarly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=378"
  },
  {
    "text": "You might have noticed how Safari is using this ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=382"
  },
  {
    "text": "to create a look that blends the app with the web page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=384"
  },
  {
    "text": "You can even write to this value to customize the color ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=388"
  },
  {
    "text": "that is used to fill the background ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=391"
  },
  {
    "text": "when scrolling past the end of web content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=393"
  },
  {
    "text": "Next, let's talk about text interaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=398"
  },
  {
    "text": "We have recently added videos ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=401"
  },
  {
    "text": "to the WebKittens and Pups on Safari websites, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=402"
  },
  {
    "text": "and Browser Pets users have been complaining ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=405"
  },
  {
    "text": "about accidentally activating the text selection controls ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=407"
  },
  {
    "text": "when trying to play those videos. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=410"
  },
  {
    "text": "Well, we don't want that! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=413"
  },
  {
    "text": "Fortunately, there is a new API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=415"
  },
  {
    "text": "to quickly and easily disable text interaction on a web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=417"
  },
  {
    "text": "It's simple! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=421"
  },
  {
    "text": "When setting up your web view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=422"
  },
  {
    "text": "just make sure to set textInteractionEnabled to false ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=424"
  },
  {
    "text": "in the preferences used to create the web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=427"
  },
  {
    "text": "This will turn off all text interactions in that web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=430"
  },
  {
    "text": "Now text selection controls ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=434"
  },
  {
    "text": "won't get in the way of the media controls, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=435"
  },
  {
    "text": "and we can play those kitty videos unhindered. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=438"
  },
  {
    "text": "Speaking of media controls, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=440"
  },
  {
    "text": "we have some great updates for media playback controls! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=443"
  },
  {
    "text": "Previously, if you wanted to pause or suspend media ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=446"
  },
  {
    "text": "that was playing in your web view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=449"
  },
  {
    "text": "you'd need to inject JavaScript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=451"
  },
  {
    "text": "You'd also need to find the specific element ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=454"
  },
  {
    "text": "in the DOM to be able to control it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=456"
  },
  {
    "text": "But now, we have a simple API that makes it easy to control ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=459"
  },
  {
    "text": "the state of media in your web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=462"
  },
  {
    "text": "You can now easily pause all media, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=466"
  },
  {
    "text": "close all media windows, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=469"
  },
  {
    "text": "get the state of the media on the page, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=472"
  },
  {
    "text": "or set media suspended, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=476"
  },
  {
    "text": "which will pause media and disable user controls ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=477"
  },
  {
    "text": "until setAllMediaPlaybackSuspended ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=480"
  },
  {
    "text": "is set to false. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=482"
  },
  {
    "text": "To help you get more familiar with these new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=484"
  },
  {
    "text": "and how easy they are use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=487"
  },
  {
    "text": "I'm going to turn it over to Brady who will show you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=489"
  },
  {
    "text": "how we utilized these new media control APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=492"
  },
  {
    "text": "in Browser Pets! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=495"
  },
  {
    "text": "Brady Eidson: Thanks, Megan. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=496"
  },
  {
    "text": "Hello, I'm Brady Eidson, an engineer on the WebKit team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=498"
  },
  {
    "text": "As Megan alluded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=502"
  },
  {
    "text": "both the WebKittens and Pups on Safari websites ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=503"
  },
  {
    "text": "recently added the ability to post videos ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=506"
  },
  {
    "text": "instead of just still images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=508"
  },
  {
    "text": "which means our Browser Pets app has videos now, too. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=510"
  },
  {
    "text": "Here's how the app looks right now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=514"
  },
  {
    "text": "These buttons are native UI buttons ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=517"
  },
  {
    "text": "for various features I'm adding. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=520"
  },
  {
    "text": "That banner at the top of the page is web content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=522"
  },
  {
    "text": "and the website has set a theme color, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=525"
  },
  {
    "text": "which I have adopted using the web view themeColor property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=527"
  },
  {
    "text": "Megan mentioned. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=530"
  },
  {
    "text": "Once videos were added, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=532"
  },
  {
    "text": "some folks expressed their preferences ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=533"
  },
  {
    "text": "to not have videos autoplaying. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=535"
  },
  {
    "text": "This Pause button is to accommodate them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=537"
  },
  {
    "text": "Let's see what it does.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=540"
  },
  {
    "text": "Just the kittens video paused, not the dogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=544"
  },
  {
    "text": "And pressing Play, nothing happens. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=547"
  },
  {
    "text": "Let's take a look at the code.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=550"
  },
  {
    "text": "This JavaScript was my only option ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=554"
  },
  {
    "text": "to try to pause these videos before, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=556"
  },
  {
    "text": "and it's been problematic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=558"
  },
  {
    "text": "I have to understand the structure of web pages ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=561"
  },
  {
    "text": "from two different websites, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=563"
  },
  {
    "text": "and that structure is constantly changing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=564"
  },
  {
    "text": "For example, this JavaScript from the Pups website ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=567"
  },
  {
    "text": "used to work but doesn't anymore. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=570"
  },
  {
    "text": "Fortunately now there's a better way. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=574"
  },
  {
    "text": "First, I adopted calling pauseAllMediaPlayback ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=577"
  },
  {
    "text": "on the web view.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=579"
  },
  {
    "text": "That's equivalent to calling the JavaScript function pause ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=585"
  },
  {
    "text": "on every media element on a page.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=588"
  },
  {
    "text": "And it works nicely. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=592"
  },
  {
    "text": "But notice what happens when I refresh the page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=594"
  },
  {
    "text": "The videos play again. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=598"
  },
  {
    "text": "New page load. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=601"
  },
  {
    "text": "These videos have never been paused. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=602"
  },
  {
    "text": "If I want something more sticky, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=605"
  },
  {
    "text": "I'd use setAllMediaPlaybackSuspended. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=608"
  },
  {
    "text": "Let's try that now.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=613"
  },
  {
    "text": "Notice how it pauses the videos, and they remain paused, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=617"
  },
  {
    "text": "even after refreshing the page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=621"
  },
  {
    "text": "That's because this setting ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=623"
  },
  {
    "text": "is a property of the web view itself ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=625"
  },
  {
    "text": "and not of any content inside of it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=627"
  },
  {
    "text": "It also allows me to resume. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=630"
  },
  {
    "text": "Thanks to these new APIs, you now have the flexibility ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=633"
  },
  {
    "text": "to add a better media experience to your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=636"
  },
  {
    "text": "Back to you, Megan. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=639"
  },
  {
    "text": "Megan: Thanks, Brady! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=640"
  },
  {
    "text": "Those pets look great, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=641"
  },
  {
    "text": "and even better with the new media controls. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=643"
  },
  {
    "text": "So those are our new APIs for WKWebView ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=646"
  },
  {
    "text": "that let you avoid using JavaScript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=649"
  },
  {
    "text": "We hope they make writing your apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=652"
  },
  {
    "text": "and interacting with your web content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=653"
  },
  {
    "text": "even easier than before. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=655"
  },
  {
    "text": "Next, we'll review several browser-level APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=658"
  },
  {
    "text": "that will give you access to functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=661"
  },
  {
    "text": "that previously has only been available in Safari. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=663"
  },
  {
    "text": "We have three areas of API to cover. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=667"
  },
  {
    "text": "First is a simple HTTPS override flag. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=670"
  },
  {
    "text": "Next is media capture or -- as it known on the web -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=674"
  },
  {
    "text": "getUserMedia, which is fully available ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=678"
  },
  {
    "text": "in your web view now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=680"
  },
  {
    "text": "And finally, a new API to manage downloads ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=683"
  },
  {
    "text": "which will work in connection with WKWebView ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=686"
  },
  {
    "text": "to allow and manage downloads in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=688"
  },
  {
    "text": "So let's start with HTTPS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=692"
  },
  {
    "text": "Security and privacy on the web ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=695"
  },
  {
    "text": "has always been important, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=697"
  },
  {
    "text": "and we are always searching for new ways ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=699"
  },
  {
    "text": "to make security and privacy easier for you and your users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=701"
  },
  {
    "text": "There has been a broad industry push to move traffic to HTTPS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=706"
  },
  {
    "text": "as this is a safer and more secure way ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=711"
  },
  {
    "text": "to browse the web. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=714"
  },
  {
    "text": "Many top sites support HTTPS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=715"
  },
  {
    "text": "and some even automatically upgrade connections ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=718"
  },
  {
    "text": "from HTTP to HTTPS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=720"
  },
  {
    "text": "Beginning in iOS 15 and macOS Monterey, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=724"
  },
  {
    "text": "we are taking HTTP requests to sites that we know ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=727"
  },
  {
    "text": "support HTTPS and upgrading them for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=731"
  },
  {
    "text": "In order to get this added security, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=735"
  },
  {
    "text": "you don't need to do anything at all! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=737"
  },
  {
    "text": "But, if you do need to turn it off ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=740"
  },
  {
    "text": "for some local debugging, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=742"
  },
  {
    "text": "there's an easy flag to set on configuration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=744"
  },
  {
    "text": "Hopefully you will not need this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=748"
  },
  {
    "text": "but it's here if you do, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=749"
  },
  {
    "text": "and it probably shouldn't be done in production code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=751"
  },
  {
    "text": "Next, let's review what's been happening with media capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=754"
  },
  {
    "text": "Staring in iOS 14.3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=758"
  },
  {
    "text": "we enabled getUserMedia for WKWebView, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=761"
  },
  {
    "text": "which allowed WebRTC functions to work inside your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=764"
  },
  {
    "text": "Now, we've made it even better! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=768"
  },
  {
    "text": "When you load your web content from a custom scheme handler, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=771"
  },
  {
    "text": "the user request prompt will show your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=774"
  },
  {
    "text": "as the origin of the request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=776"
  },
  {
    "text": "rather than show a request from the website URL. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=778"
  },
  {
    "text": "This should make the experience more intuitive and seamless ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=782"
  },
  {
    "text": "for your users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=784"
  },
  {
    "text": "If you want the prompt to remain as a request from the URL, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=786"
  },
  {
    "text": "just load without the custom scheme handler, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=789"
  },
  {
    "text": "and the prompt will be shown as it is today. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=792"
  },
  {
    "text": "We also have a new API to allow you to decide ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=795"
  },
  {
    "text": "when and how to prompt the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=798"
  },
  {
    "text": "for camera and microphone permissions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=800"
  },
  {
    "text": "when working with web content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=802"
  },
  {
    "text": "Once you have obtained user permissions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=804"
  },
  {
    "text": "for the camera and microphone ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=806"
  },
  {
    "text": "via normal entitlements and prompts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=808"
  },
  {
    "text": "you can decide if the permission prompts should be shown. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=811"
  },
  {
    "text": "You can use this to implement your own prompt ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=815"
  },
  {
    "text": "or remember the users' previous response ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=817"
  },
  {
    "text": "for web content you control and trust. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=820"
  },
  {
    "text": "By creating and setting the UI delegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=824"
  },
  {
    "text": "on your WKWebView, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=827"
  },
  {
    "text": "you can now decide when the user should be prompted ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=828"
  },
  {
    "text": "for permission to use their camera or microphone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=831"
  },
  {
    "text": "If you do not implement this delegate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=835"
  },
  {
    "text": "users will continue to get the prompt as they do today. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=837"
  },
  {
    "text": "But if you want to skip the prompt ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=841"
  },
  {
    "text": "because you have saved the user preferences ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=843"
  },
  {
    "text": "from previous interactions with a website, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=845"
  },
  {
    "text": "this delegate will allow you to do that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=847"
  },
  {
    "text": "How did we leverage these new APIs for Browser Pets? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=850"
  },
  {
    "text": "Well, due to circumstances beyond our control, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=853"
  },
  {
    "text": "the team had to cancel ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=857"
  },
  {
    "text": "our monthly Pups in the Park meetup. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=858"
  },
  {
    "text": "To fulfill that need to share our dear doggies ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=861"
  },
  {
    "text": "with each other, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=864"
  },
  {
    "text": "Brady and I decided to add a virtual dog park ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=865"
  },
  {
    "text": "to Browser Pets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=867"
  },
  {
    "text": "so we could still get our social doggy goodness going on. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=869"
  },
  {
    "text": "This involves using getUserMedia to set up WebRTC functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=872"
  },
  {
    "text": "so we could see and chat with each other ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=877"
  },
  {
    "text": "and our doggie friends real time! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=879"
  },
  {
    "text": "When setting up the UI delegate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=883"
  },
  {
    "text": "we know that requests from our server ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=884"
  },
  {
    "text": "are ones that our users would give permission to ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=887"
  },
  {
    "text": "if they already gave permission to the app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=889"
  },
  {
    "text": "to use the camera and microphone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=891"
  },
  {
    "text": "So I can skip that prompt by setting this delegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=893"
  },
  {
    "text": "on my WKWebView. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=895"
  },
  {
    "text": "But that's not all I can do! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=897"
  },
  {
    "text": "Instead of having to execute JavaScript ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=899"
  },
  {
    "text": "to start and stop this user media, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=902"
  },
  {
    "text": "we can get and set the state, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=904"
  },
  {
    "text": "similar to how we can interact with media controls ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=906"
  },
  {
    "text": "without JavaScript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=908"
  },
  {
    "text": "This work for camera as well as for microphone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=910"
  },
  {
    "text": "To help you get even more familiar with these new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=915"
  },
  {
    "text": "and how easy they are use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=918"
  },
  {
    "text": "I'm going to turn it back over to Brady who will show you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=920"
  },
  {
    "text": "how we added that virtual dog park to Browser Pets! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=922"
  },
  {
    "text": "Brady: Thanks, Megan. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=926"
  },
  {
    "text": "As Megan mentioned, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=928"
  },
  {
    "text": "we had to get a virtual dog park up and running ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=929"
  },
  {
    "text": "because of the times we're living in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=931"
  },
  {
    "text": "Let's take another look at the Browser Pets app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=933"
  },
  {
    "text": "Some of you may have noticed a Call button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=936"
  },
  {
    "text": "Let's tap that now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=939"
  },
  {
    "text": "We're instantly connected to our virtual dog park ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=940"
  },
  {
    "text": "hosted at our friend's house. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=943"
  },
  {
    "text": "Let's join the fun by tapping Connect. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=945"
  },
  {
    "text": "Now, because this is the first time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=949"
  },
  {
    "text": "we've ever used the camera in this app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=950"
  },
  {
    "text": "we get the system-wide prompt about Browser Pets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=953"
  },
  {
    "text": "Let's definitely choose Allow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=956"
  },
  {
    "text": "And the second prompt -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=959"
  },
  {
    "text": "specific to the website we are currently viewing -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=960"
  },
  {
    "text": "is the default behavior today in the system. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=963"
  },
  {
    "text": "Let's allow that also. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=965"
  },
  {
    "text": "And there we are. getUserMedia in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=967"
  },
  {
    "text": "But let's see if we can make a change to our WKUIDelegate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=971"
  },
  {
    "text": "like Megan mentioned, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=975"
  },
  {
    "text": "to make the experience even better.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=976"
  },
  {
    "text": "In our delegate, we'll just check for the host ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=983"
  },
  {
    "text": "providing our virtual dog park content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=986"
  },
  {
    "text": "and allow media capture access. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=988"
  },
  {
    "text": "Let's see how that changes Browser Pets.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=990"
  },
  {
    "text": "Great. No prompt. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=996"
  },
  {
    "text": "And the way we used the delegate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=998"
  },
  {
    "text": "we also keep our users safe and private ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1000"
  },
  {
    "text": "if future content comes from any other host ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1003"
  },
  {
    "text": "and tries to access the camera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1005"
  },
  {
    "text": "Now that we're in a video chat, let's try the Mute button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1008"
  },
  {
    "text": "As you can see, my camera feed dropped. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1011"
  },
  {
    "text": "You'll also notice that the recording indicator ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1014"
  },
  {
    "text": "in the status bar has disappeared ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1017"
  },
  {
    "text": "and unmuting, I can bring back my camera feed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1019"
  },
  {
    "text": "and the recording indicator returns. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1022"
  },
  {
    "text": "This was easy; no JavaScript necessary. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1024"
  },
  {
    "text": "All I had to do was hook it up to webView.setCameraCaptureState ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1027"
  },
  {
    "text": "as Megan had mentioned. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1031"
  },
  {
    "text": "This was just a taste of how these APIs enable you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1034"
  },
  {
    "text": "to easily customize the media capture experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1037"
  },
  {
    "text": "in your WKWebView app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1040"
  },
  {
    "text": "Back to you, Megan. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1041"
  },
  {
    "text": "Megan: Thanks, Brady! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1043"
  },
  {
    "text": "I'm so glad we could continue to meet ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1044"
  },
  {
    "text": "with all our fabulous pets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1047"
  },
  {
    "text": "Lastly, let's talk about downloads. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1050"
  },
  {
    "text": "Browser Pets users have been telling me they want to be able ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1053"
  },
  {
    "text": "to share these cute animal pictures ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1056"
  },
  {
    "text": "with their friends and family, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1058"
  },
  {
    "text": "but only Apple employees have been allowed to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1060"
  },
  {
    "text": "the Browser Pets app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1062"
  },
  {
    "text": "Fortunately, we've added an API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1064"
  },
  {
    "text": "that lets you allow and manage downloads from your web view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1066"
  },
  {
    "text": "making sharing files easier than ever! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1070"
  },
  {
    "text": "There are three ways to initiate a download from the web. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1074"
  },
  {
    "text": "The web content can initiate a download, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1078"
  },
  {
    "text": "the server can initiate a download, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1080"
  },
  {
    "text": "and the app can initiate a download. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1083"
  },
  {
    "text": "Web content initiates a download with JavaScript similar to this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1086"
  },
  {
    "text": "When this JavaScript is executed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1091"
  },
  {
    "text": "it initiates a download navigation action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1093"
  },
  {
    "text": "which calls the navigation delegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1096"
  },
  {
    "text": "with shouldPerformDownload set to true. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1099"
  },
  {
    "text": "You should use this value to determine -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1102"
  },
  {
    "text": "along with other logic -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1104"
  },
  {
    "text": "if the download should be allowed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1106"
  },
  {
    "text": "The server can initiate a download in HTTP like this ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1110"
  },
  {
    "text": "after calling loadRequest on your web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1114"
  },
  {
    "text": "When that happens, your WKNavigationResponse ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1119"
  },
  {
    "text": "will have a Content-Disposition header field ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1122"
  },
  {
    "text": "with a value containing \"attachment\", ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1125"
  },
  {
    "text": "and when it does, you should return ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1128"
  },
  {
    "text": "WKNavigationActionPolicyDownload ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1130"
  },
  {
    "text": "from your decision handler to start the download. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1133"
  },
  {
    "text": "Finally, your app can decide it wants to download something ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1136"
  },
  {
    "text": "in the context of the current page ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1139"
  },
  {
    "text": "using an NSURLRequest like this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1141"
  },
  {
    "text": "Whatever method you use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1145"
  },
  {
    "text": "when you get the WKDownload object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1147"
  },
  {
    "text": "you need to set the delegate property on that object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1149"
  },
  {
    "text": "to be able to tell it where to write the bytes to disk. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1153"
  },
  {
    "text": "If you do not, the download will automatically be cancelled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1157"
  },
  {
    "text": "If a download fails, the data to resume the download ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1161"
  },
  {
    "text": "will be handed to you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1164"
  },
  {
    "text": "if you implement the method on the delegate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1166"
  },
  {
    "text": "You can then use that data to restart the download ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1168"
  },
  {
    "text": "off of a web view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1171"
  },
  {
    "text": "With this new API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1173"
  },
  {
    "text": "I can now offer an easy way ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1175"
  },
  {
    "text": "to download the kitties to Files, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1177"
  },
  {
    "text": "and not to save them to Photos. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1179"
  },
  {
    "text": "So those are our browser-level APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1182"
  },
  {
    "text": "We think they will offer you and your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1185"
  },
  {
    "text": "many more options for having a rich web experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1187"
  },
  {
    "text": "in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1190"
  },
  {
    "text": "Wow, what a journey! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1194"
  },
  {
    "text": "Today we have explored so many things together. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1196"
  },
  {
    "text": "We've talked about several APIs that you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1200"
  },
  {
    "text": "instead of injecting JavaScript, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1202"
  },
  {
    "text": "and we've covered some more powerful browser-level features. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1205"
  },
  {
    "text": "It's so much easier to use our new theme color, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1210"
  },
  {
    "text": "text interaction, and media playback APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1213"
  },
  {
    "text": "And we've made it easier and safer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1217"
  },
  {
    "text": "to have a richer experience in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1220"
  },
  {
    "text": "with automatic HTTPS connections, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1222"
  },
  {
    "text": "easy and safe control of getUserMedia prompts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1225"
  },
  {
    "text": "and the addition of WKDownload, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1229"
  },
  {
    "text": "so you can easily manage downloads in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1232"
  },
  {
    "text": "You can learn more about some of the new web APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1237"
  },
  {
    "text": "we are supporting this year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1240"
  },
  {
    "text": "in the \"Develop advanced web content\" session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1242"
  },
  {
    "text": "You can also discover new ways to debug and improve ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1245"
  },
  {
    "text": "your web content in \"Discover Web Inspector improvements\"; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1248"
  },
  {
    "text": "two great sessions that will help you with making ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1252"
  },
  {
    "text": "great web content for your app or for the web. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1255"
  },
  {
    "text": "The web is still growing, and as it does, so will we. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1260"
  },
  {
    "text": "Many of the APIs we implemented this year ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1264"
  },
  {
    "text": "were based on developer feedback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1267"
  },
  {
    "text": "So if you have an API you are wanting to see, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1269"
  },
  {
    "text": "we want to hear from you! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1272"
  },
  {
    "text": "In addition to feedback with Apple, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1275"
  },
  {
    "text": "webkit.org has multiple ways to reach out, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1277"
  },
  {
    "text": "from our Slack workspaces to our mailing lists. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1280"
  },
  {
    "text": "WebKit is open source, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1283"
  },
  {
    "text": "so this is also where you can learn to check out ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1285"
  },
  {
    "text": "and build WebKit yourself, as well as file bugs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1287"
  },
  {
    "text": "Thank you joining me ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1290"
  },
  {
    "text": "on this exploration of our new APIs! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1292"
  },
  {
    "text": "I hope you have a great rest of WWDC21! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1294"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10032/?time=1298"
  }
]