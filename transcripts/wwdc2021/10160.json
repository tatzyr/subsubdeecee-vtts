[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=2"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=7"
  },
  {
    "text": "David Hayward: Hi, my name is David Hayward, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=9"
  },
  {
    "text": "and I'm an engineer with the Core Image team.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=11"
  },
  {
    "text": "Today, my colleagues Tuomas Viitanen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=14"
  },
  {
    "text": "Matt Dickoff, and I will be giving a detailed presentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=16"
  },
  {
    "text": "that will show you everything you need to know ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=20"
  },
  {
    "text": "about the ProRAW image format ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=22"
  },
  {
    "text": "and how add support for it to your application.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=24"
  },
  {
    "text": "Here’s what we will discuss today.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=28"
  },
  {
    "text": "First, I will describe what makes up a ProRAW file.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=30"
  },
  {
    "text": "Next, we will discuss how to capture these files, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=34"
  },
  {
    "text": "how to store them in a photo library, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=38"
  },
  {
    "text": "and how to edit and display them.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=42"
  },
  {
    "text": "Let’s start with, What is a ProRAW? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=45"
  },
  {
    "text": "For some time, Apple devices have been able ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=48"
  },
  {
    "text": "to fully leverage our Image Signal Processor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=51"
  },
  {
    "text": "to capture beautiful HEIC or JPEG images ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=53"
  },
  {
    "text": "that are ready for display.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=56"
  },
  {
    "text": "Then starting in iOS 10, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=58"
  },
  {
    "text": "we supported capturing Bayer-pattern RAW sensor data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=61"
  },
  {
    "text": "and storing that in a DNG file.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=64"
  },
  {
    "text": "The differences and advantages of these two approaches ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=67"
  },
  {
    "text": "was well-described in the WWDC 2016 session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=69"
  },
  {
    "text": "titled “Advances in iOS photography”.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=73"
  },
  {
    "text": "That presentation used a great analogy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=76"
  },
  {
    "text": "to describe the two formats.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=79"
  },
  {
    "text": "A processed HEIC or JPEG is like going to a bakery ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=81"
  },
  {
    "text": "and ordering a multilayer cake.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=84"
  },
  {
    "text": "Whereas a Bayer-pattern RAW file is like going to the grocer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=87"
  },
  {
    "text": "and getting the raw ingredients to make a cake.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=90"
  },
  {
    "text": "The advantage of processed HEIC or JPEGs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=93"
  },
  {
    "text": "are that you get a final image baked by Apple.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=96"
  },
  {
    "text": "It is fast to display and has great quality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=99"
  },
  {
    "text": "because it is made by fusing multiple capture frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=102"
  },
  {
    "text": "using Smart HDR, Deep Fusion, or Night mode.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=105"
  },
  {
    "text": "Also, it has a small file size ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=109"
  },
  {
    "text": "because it uses advanced lossy compression.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=111"
  },
  {
    "text": "The advantage of Bayer RAW is that you get an image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=114"
  },
  {
    "text": "that has much greater flexibility for editing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=117"
  },
  {
    "text": "It has not been saved using lossy compression, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=120"
  },
  {
    "text": "and it has more bits of precision.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=122"
  },
  {
    "text": "Our goal with ProRAW ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=125"
  },
  {
    "text": "was to establish an image format with the best features of both.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=127"
  },
  {
    "text": "The advantage of ProRAW ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=132"
  },
  {
    "text": "is that it has a similar look to HEIC ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=133"
  },
  {
    "text": "but uses lossless compression.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=136"
  },
  {
    "text": "Also, depending on the scene, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=138"
  },
  {
    "text": "it is fused from multiple exposures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=140"
  },
  {
    "text": "so it has great dynamic range for editing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=142"
  },
  {
    "text": "Because they are low noise and already demosaiced, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=145"
  },
  {
    "text": "they are reasonably fast to display.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=148"
  },
  {
    "text": "The ProRAW format is designed to maximize three properties: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=151"
  },
  {
    "text": "compatibility, quality, and look.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=156"
  },
  {
    "text": "Let's discuss each of these in some more detail.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=160"
  },
  {
    "text": "In order to ensure compatibility, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=163"
  },
  {
    "text": "the ProRAW files are contained in a standard Adobe DNG file.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=165"
  },
  {
    "text": "The linearized DNG file format is supported by Apple apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=170"
  },
  {
    "text": "such as Photos, Adobe apps such Lightroom, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=174"
  },
  {
    "text": "and many others.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=177"
  },
  {
    "text": "Many apps get support automatically ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=179"
  },
  {
    "text": "via the system frameworks, ImageIO, and Core Image.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=181"
  },
  {
    "text": "Earlier versions of iOS and macOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=185"
  },
  {
    "text": "also have basic support for the format.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=187"
  },
  {
    "text": "And it is also worth mentioning that the files can contain ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=190"
  },
  {
    "text": "full resolution, JPEG-quality prerendered previews.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=192"
  },
  {
    "text": "All ProRAWs captured by Camera app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=197"
  },
  {
    "text": "will contain these previews ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=199"
  },
  {
    "text": "which will look identical to the image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=201"
  },
  {
    "text": "if it had been taken without ProRAW mode enabled.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=203"
  },
  {
    "text": "The quality of a ProRAW file is quite impressive.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=207"
  },
  {
    "text": "The pixels in the DNG are scene-referred and linearizable, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=210"
  },
  {
    "text": "may be generated from multiple demosaiced exposures ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=216"
  },
  {
    "text": "combined with image fusion, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=219"
  },
  {
    "text": "losslessly compressed 12-bit RGB; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=222"
  },
  {
    "text": "but we create these bits through an adaptive companding curve ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=225"
  },
  {
    "text": "so we can achieve up to 14 stops of dynamic range.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=229"
  },
  {
    "text": "The resulting file sizes can range from 10 megabytes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=233"
  },
  {
    "text": "to 40 megabytes, but that size will scale ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=236"
  },
  {
    "text": "based on the unique scene of each photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=239"
  },
  {
    "text": "Apple goes to great effort ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=242"
  },
  {
    "text": "tuning the quality of our images.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=243"
  },
  {
    "text": "ProRAW images have a default look ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=245"
  },
  {
    "text": "that is consistent with the look of our HEICs and JPEGs.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=247"
  },
  {
    "text": "This is achieved by embedding special tags in the DNG file.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=251"
  },
  {
    "text": "These tags are documented in the DNG spec ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=255"
  },
  {
    "text": "and provide the recipe for how to render ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=258"
  },
  {
    "text": "the default look of each image.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=260"
  },
  {
    "text": "The first tag applied is the LinearizationTable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=263"
  },
  {
    "text": "which decompands the 12-bit stored data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=265"
  },
  {
    "text": "to linear scene values.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=268"
  },
  {
    "text": "We use the BaselineExposure tag because ProRAW images adapt ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=271"
  },
  {
    "text": "to the dynamic range of the scene.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=275"
  },
  {
    "text": "The BaselineSharpness tag allows us to specify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=278"
  },
  {
    "text": "how much edge sharpening to apply by default.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=281"
  },
  {
    "text": "The ProfileGainTableMap tag -- which is new ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=285"
  },
  {
    "text": "in the DNG 1.6 spec -- allows us to describe ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=288"
  },
  {
    "text": "how the adjust the bright and shadow regions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=291"
  },
  {
    "text": "Lastly, is the ProfileToneCurve ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=295"
  },
  {
    "text": "that specifies the output global tone curve.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=296"
  },
  {
    "text": "All of these tags are unique to each image.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=300"
  },
  {
    "text": "Because they provide the recipe and not the cake, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=303"
  },
  {
    "text": "the image remains highly editable.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=305"
  },
  {
    "text": "For example, the default sharpness, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=308"
  },
  {
    "text": "or tone curves, can be altered at any time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=309"
  },
  {
    "text": "Lastly, when present in the scene, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=312"
  },
  {
    "text": "we store semantic masks in the ProRAW ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=314"
  },
  {
    "text": "for regions such a people, skin, and sky.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=317"
  },
  {
    "text": "So now that we know what makes up a ProRAW, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=321"
  },
  {
    "text": "I would like to introduce Tuomas ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=323"
  },
  {
    "text": "who will describe how to capture them.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=325"
  },
  {
    "text": "Tuomas Viitanen: Thank you, David.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=327"
  },
  {
    "text": "My name is Tuomas Viitanen.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=329"
  },
  {
    "text": "I'm an engineer in the Camera Software team, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=331"
  },
  {
    "text": "and I will guide you through how you can capture Apple ProRAWs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=333"
  },
  {
    "text": "with your application.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=336"
  },
  {
    "text": "AVFoundation Capture APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=338"
  },
  {
    "text": "provide you with access to camera on iOS and MacOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=340"
  },
  {
    "text": "They allow you to stream live preview and video, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=343"
  },
  {
    "text": "capture photos, and record movies, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=345"
  },
  {
    "text": "among many other things.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=347"
  },
  {
    "text": "And as a recent addition, we added support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=349"
  },
  {
    "text": "to capture photos in the new Apple ProRAW DNG format.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=351"
  },
  {
    "text": "A good source of information on the basic use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=355"
  },
  {
    "text": "of the AVFoundation Capture APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=357"
  },
  {
    "text": "are Advances in iOS Photography talk from WWDC 2016 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=359"
  },
  {
    "text": "that explains how to use the AVCapture photo output ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=364"
  },
  {
    "text": "and AVCam sample code that is an example ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=367"
  },
  {
    "text": "of a simple camera capture application.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=369"
  },
  {
    "text": "Next, we'll look at the Apple ProRAW capture in detail.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=372"
  },
  {
    "text": "But first, let's take a quick look ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=376"
  },
  {
    "text": "at where Apple ProRAW is supported.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=379"
  },
  {
    "text": "A good starting point for that is to do a comparison ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=381"
  },
  {
    "text": "with the existing Bayer RAW support.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=383"
  },
  {
    "text": "Bayer RAW was introduced in iOS 10 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=386"
  },
  {
    "text": "and is supported on a wide range of devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=388"
  },
  {
    "text": "Apple ProRAW was introduced in iOS 14.3 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=391"
  },
  {
    "text": "and is supported on iPhone 12 Pro and iPhone 12 Pro Max.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=394"
  },
  {
    "text": "Apple's own Camera application supports Apple ProRAW capture ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=400"
  },
  {
    "text": "with all fusion captures, like Deep Fusion and Night mode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=402"
  },
  {
    "text": "as well as with flash captures.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=405"
  },
  {
    "text": "Apple ProRAW allows photo-quality prioritization ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=407"
  },
  {
    "text": "to be set to .balanced and .quality, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=410"
  },
  {
    "text": "which allows you to get the benefit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=412"
  },
  {
    "text": "of Apple image fusion to your RAW captures.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=414"
  },
  {
    "text": "While Bayer RAW is only supported ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=418"
  },
  {
    "text": "on single-camera AVCaptureDevices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=420"
  },
  {
    "text": "like wide and tele.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=422"
  },
  {
    "text": "Apple ProRAW is supported on all devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=424"
  },
  {
    "text": "including dual wide-, dual-, and triple-camera devices ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=426"
  },
  {
    "text": "that seamlessly switch between cameras when zooming.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=429"
  },
  {
    "text": "Similar to Bayer RAW, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=433"
  },
  {
    "text": "Apple ProRAW does not support depth data delivery ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=435"
  },
  {
    "text": "nor content aware distortion correction.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=438"
  },
  {
    "text": "Live Photo capture is only supported with Bayer RAW ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=441"
  },
  {
    "text": "but portrait effects matte and semantic segmentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=444"
  },
  {
    "text": "skin and sky mattes are only supported with ProRAW.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=447"
  },
  {
    "text": "So, let's go through how you can capture Apple ProRAWs.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=451"
  },
  {
    "text": "The items we cover are: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=455"
  },
  {
    "text": "how to set up your capture device and capture session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=457"
  },
  {
    "text": "how to set up your photo output, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=460"
  },
  {
    "text": "how to prepare your photo settings ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=462"
  },
  {
    "text": "for the ProRAW capture, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=464"
  },
  {
    "text": "and what options you have after you capture a ProRAW photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=465"
  },
  {
    "text": "Let's start from setting up the session.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=469"
  },
  {
    "text": "Apple ProRAW is only supported on the formats ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=473"
  },
  {
    "text": "that support the highest quality photos.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=475"
  },
  {
    "text": "You will get that by setting the capture sessionPreset ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=478"
  },
  {
    "text": "to .photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=480"
  },
  {
    "text": "Or if you would like to select the device format manually, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=482"
  },
  {
    "text": "you can find the formats ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=486"
  },
  {
    "text": "that support the highest quality stills.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=487"
  },
  {
    "text": "Note that this is different from high quality stills, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=489"
  },
  {
    "text": "which is supported on a broader set of formats.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=492"
  },
  {
    "text": "And then simply configure the desired format ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=495"
  },
  {
    "text": "to be the activeFormat of the device.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=498"
  },
  {
    "text": "In this example and later, I'm simply using the first index ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=501"
  },
  {
    "text": "from the list of supported items, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=504"
  },
  {
    "text": "but you'll want to replace this with a selection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=505"
  },
  {
    "text": "that's based on criteria that works best for your application.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=508"
  },
  {
    "text": "Now, let's look how you can configure the photo output ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=512"
  },
  {
    "text": "for the ProRAW capture.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=515"
  },
  {
    "text": "First, you need to enable ProRAW on the photoOutput.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=517"
  },
  {
    "text": "Be sure to do that already before starting the session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=521"
  },
  {
    "text": "as it will otherwise cause ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=524"
  },
  {
    "text": "a lengthy pipeline reconfiguration.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=525"
  },
  {
    "text": "Setting this property to true prepares the capture pipeline ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=528"
  },
  {
    "text": "for ProRAW captures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=531"
  },
  {
    "text": "and adds the ProRAW pixel formats ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=532"
  },
  {
    "text": "to the list of supported RAW photo pixel format types.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=534"
  },
  {
    "text": "If you like, you can also indicate to the capture pipeline ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=538"
  },
  {
    "text": "whether you prefer speed or quality with your captures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=541"
  },
  {
    "text": "or if you just like a balance between the two.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=544"
  },
  {
    "text": "More info on the effect of photo-quality prioritization ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=547"
  },
  {
    "text": "to the captured photos can be found from ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=550"
  },
  {
    "text": "the Capture high-quality photos using video formats talk.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=552"
  },
  {
    "text": "And next, we'll look how you can prepare for the capture.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=557"
  },
  {
    "text": "To be able to create photo settings ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=560"
  },
  {
    "text": "for your ProRAW capture, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=562"
  },
  {
    "text": "you need to select a correct RAW pixel format.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=563"
  },
  {
    "text": "You get the supported RAW pixel formats from the same ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=566"
  },
  {
    "text": "availableRawPhoto PixelFormatTypes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=569"
  },
  {
    "text": "that gives you the supported Bayer RAW formats.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=572"
  },
  {
    "text": "You can distinguish the ProRAW formats ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=575"
  },
  {
    "text": "from the BayerRAW formats using the new ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=577"
  },
  {
    "text": "isAppleProRAWPixelFormat class method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=579"
  },
  {
    "text": "on the photoOutput.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=582"
  },
  {
    "text": "An example of a ProRAW pixel format is l64r ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=584"
  },
  {
    "text": "that's a 16-bit full range RGBA pixel format.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=587"
  },
  {
    "text": "For reference, you can also query ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=592"
  },
  {
    "text": "whether a format is a Bayer RAW format ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=593"
  },
  {
    "text": "using isBayerRAWPixelFormat class method.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=595"
  },
  {
    "text": "Next, we'll go through some of the options you have ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=599"
  },
  {
    "text": "for capturing Apple ProRAW and, optionally, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=602"
  },
  {
    "text": "a fully rendered process photo along with it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=604"
  },
  {
    "text": "The first and simplest option of capturing ProRAW ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=608"
  },
  {
    "text": "is to request only the ProRAW photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=611"
  },
  {
    "text": "To do that, you can simply specify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=613"
  },
  {
    "text": "the rawPixelFormatType when creating the photoSettings.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=615"
  },
  {
    "text": "This gives you a single asset which is simple to work with ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=619"
  },
  {
    "text": "and store to photo library like Matt will later show you.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=622"
  },
  {
    "text": "It's also possible to capture a pair of processed photo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=625"
  },
  {
    "text": "and ProRAW similar to what you can do with Bayer RAW ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=628"
  },
  {
    "text": "by providing also the processedFormat ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=632"
  },
  {
    "text": "for the photoSettings.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=634"
  },
  {
    "text": "But this requires you to work with multiple assets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=636"
  },
  {
    "text": "and it's also harder to keep track of them ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=638"
  },
  {
    "text": "in the photo library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=641"
  },
  {
    "text": "Luckily, Apple ProRAW supports ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=642"
  },
  {
    "text": "up to a full-resolution JPEG image as thumbnail, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=644"
  },
  {
    "text": "and in many cases, this gives you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=647"
  },
  {
    "text": "the best of the previous two options.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=649"
  },
  {
    "text": "To request a thumbnail, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=652"
  },
  {
    "text": "you can select the desired format from ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=653"
  },
  {
    "text": "availableRawEmbedded ThumbnailPhotoCodecTypes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=655"
  },
  {
    "text": "and specify the desired thumbnail dimensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=658"
  },
  {
    "text": "Now you're almost ready to capture a ProRAW photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=661"
  },
  {
    "text": "But before that, if you like, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=665"
  },
  {
    "text": "you can specify the photo-quality prioritization ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=667"
  },
  {
    "text": "for this capture.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=670"
  },
  {
    "text": "Note that the value you specify here must be less than ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=671"
  },
  {
    "text": "or equal to the maxPhotoQualityPrioritization ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=674"
  },
  {
    "text": "you specified previously on the photoOutput.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=677"
  },
  {
    "text": "You can also request up to a display-sized preview image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=680"
  },
  {
    "text": "if you would like to have something to show ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=684"
  },
  {
    "text": "for the clients quickly after the capture.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=685"
  },
  {
    "text": "And then you can capture the ProRAW photo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=689"
  },
  {
    "text": "using the same capturePhoto method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=691"
  },
  {
    "text": "that's used for all other still captures as well.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=693"
  },
  {
    "text": "Now that the still capture is on the way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=696"
  },
  {
    "text": "let's take a look what you can do ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=699"
  },
  {
    "text": "when the requested photo is ready.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=700"
  },
  {
    "text": "When the photo is fully processed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=704"
  },
  {
    "text": "your didFinishProcessingPhoto delegate will be invoked ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=706"
  },
  {
    "text": "with an AVCapturePhoto representing the ProRAW photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=709"
  },
  {
    "text": "If you requested a preview image for the capture, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=713"
  },
  {
    "text": "you can now get the pixel buffer with uncompressed preview image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=716"
  },
  {
    "text": "or a CGImageRepresentation of that to show on the display.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=719"
  },
  {
    "text": "And in case you requested a processed photo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=723"
  },
  {
    "text": "along with the ProRAW, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=725"
  },
  {
    "text": "your didFinishProcessingPhoto delegate will be invoked twice.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=727"
  },
  {
    "text": "You can distinguish the ProRAW from the processed photo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=731"
  },
  {
    "text": "using isRawPhoto property on the received AVCapturePhoto.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=733"
  },
  {
    "text": "And then you can simply request the fileDataRepresentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=738"
  },
  {
    "text": "for the ProRAW to save the DNG to the photo library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=742"
  },
  {
    "text": "Or optionally, get a pixel buffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=746"
  },
  {
    "text": "with the RAW pixel data if you prefer to work with that.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=748"
  },
  {
    "text": "Like David mentioned earlier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=752"
  },
  {
    "text": "the ProRAW DNG may include semantic segmentation mattes.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=754"
  },
  {
    "text": "The inclusion of these mattes is automatic ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=758"
  },
  {
    "text": "and scene dependent.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=760"
  },
  {
    "text": "While the mattes are currently not available through ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=762"
  },
  {
    "text": "the AVFoundation Capture APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=764"
  },
  {
    "text": "you can retrieve them through Core Image and ImageIO APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=766"
  },
  {
    "text": "like David will later show you.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=769"
  },
  {
    "text": "And finally, we'll look at some customization options ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=771"
  },
  {
    "text": "you have with the ProRAW DNG.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=774"
  },
  {
    "text": "You can customize the ProRAW by implementing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=776"
  },
  {
    "text": "the AVCapturePhotoFileData RepresentationCustomizer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=778"
  },
  {
    "text": "delegate methods.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=781"
  },
  {
    "text": "By implementing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=783"
  },
  {
    "text": "replacementAppleProRAW CompressionSettings, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=785"
  },
  {
    "text": "you can change the compression bit depth and quality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=787"
  },
  {
    "text": "of the ProRAW photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=790"
  },
  {
    "text": "The Apple ProRAW is encoded losslessly by default ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=793"
  },
  {
    "text": "using 12 bits with a companding curve.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=796"
  },
  {
    "text": "You can change the bit depth of the losslessly compressed ProRAW ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=798"
  },
  {
    "text": "by keeping the quality level at 1 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=802"
  },
  {
    "text": "and providing the desired bit depth with the customizer.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=804"
  },
  {
    "text": "This saves storage space ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=808"
  },
  {
    "text": "but still keeps the high quality of the ProRAW photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=809"
  },
  {
    "text": "In case you prefer a lossy compression, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=812"
  },
  {
    "text": "you can set the quality level to below 1, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=814"
  },
  {
    "text": "in which case ProRAW is compressed automatically ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=817"
  },
  {
    "text": "using 8-bit lossy compression.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=819"
  },
  {
    "text": "This gives you a small file size, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=822"
  },
  {
    "text": "but does have a clear impact ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=823"
  },
  {
    "text": "on the quality of the ProRAW photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=825"
  },
  {
    "text": "Now that you have implemented the customizer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=827"
  },
  {
    "text": "you can request customization for the captured ProRAW DNG ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=829"
  },
  {
    "text": "in your didFinishProcessingPhoto delegate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=833"
  },
  {
    "text": "By creating the customizer and providing that ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=836"
  },
  {
    "text": "for fileDataRepresentation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=838"
  },
  {
    "text": "you will get the customized ProRAW back ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=840"
  },
  {
    "text": "with the compression settings you just provided.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=842"
  },
  {
    "text": "That was the introduction to the Apple ProRAW capture ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=845"
  },
  {
    "text": "using AVFoundation Capture APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=847"
  },
  {
    "text": "I'll hand it over to Matt who will tell you more ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=850"
  },
  {
    "text": "about Apple ProRAW and photo library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=852"
  },
  {
    "text": "Matt? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=855"
  },
  {
    "text": "Matt Dickoff: Thanks, Tuomas! Hello! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=856"
  },
  {
    "text": "My name's Matt Dickoff, and I'm an engineer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=858"
  },
  {
    "text": "on the Photos team.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=859"
  },
  {
    "text": "I'll be walking you through how to first save ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=861"
  },
  {
    "text": "the ProRAW file you've just captured ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=863"
  },
  {
    "text": "as a complete asset in the photo library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=864"
  },
  {
    "text": "Then, we'll step through how to fetch RAWs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=866"
  },
  {
    "text": "that already exist in the photo library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=868"
  },
  {
    "text": "PhotoKit is a pair of frameworks used to interact ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=871"
  },
  {
    "text": "with the photo library on Apple Platforms.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=873"
  },
  {
    "text": "It was first introduced in these releases ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=876"
  },
  {
    "text": "and has seen improvements and additions since then.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=878"
  },
  {
    "text": "Notably, it has support for RAW image formats ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=881"
  },
  {
    "text": "like Apple ProRAW.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=883"
  },
  {
    "text": "Today I'll only be covering the specific APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=885"
  },
  {
    "text": "that deal with RAWs in the photo library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=888"
  },
  {
    "text": "If you still have questions about PhotoKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=890"
  },
  {
    "text": "after this presentation, I encourage you to take a look ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=892"
  },
  {
    "text": "at the online developer documentation.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=894"
  },
  {
    "text": "In order to save a new asset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=897"
  },
  {
    "text": "we'll need to perform changes on the shared PHPhotoLibrary.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=899"
  },
  {
    "text": "As with saving any asset, the change we'll be making ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=902"
  },
  {
    "text": "is a PHAssetCreationRequest, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=905"
  },
  {
    "text": "and we'll be adding our Apple ProRAW file ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=907"
  },
  {
    "text": "to this asset as the primary .photo PHAssetResource.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=909"
  },
  {
    "text": "So let's see what the code for that looks like.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=913"
  },
  {
    "text": "First, we start by performing changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=916"
  },
  {
    "text": "on the shared photo library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=918"
  },
  {
    "text": "We'll simply make a PHAssetCreationRequest ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=921"
  },
  {
    "text": "and then add the Apple ProRAW file to it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=923"
  },
  {
    "text": "as the primary photo resource.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=926"
  },
  {
    "text": "And that's it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=928"
  },
  {
    "text": "Just handle the success and error ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=930"
  },
  {
    "text": "as your application sees fit.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=931"
  },
  {
    "text": "Now that we know how to add assets to the photo library, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=933"
  },
  {
    "text": "let's take a look at how we can fetch them back, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=936"
  },
  {
    "text": "including RAW assets that the user may already have ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=938"
  },
  {
    "text": "in their library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=941"
  },
  {
    "text": "I'm happy to say that in iOS 15, we've provided a new ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=942"
  },
  {
    "text": "PHAssetCollectionSubtype, .smartAlbumRAW.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=946"
  },
  {
    "text": "With this smart album, you can easily get a collection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=950"
  },
  {
    "text": "that contains all the assets in the photo library ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=952"
  },
  {
    "text": "that have a RAW resource.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=954"
  },
  {
    "text": "This album is the same RAW album that you see ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=956"
  },
  {
    "text": "in the Apple Photos app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=958"
  },
  {
    "text": "Now that we have some PHAssets with RAW resources, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=960"
  },
  {
    "text": "let's take a look at what it takes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=963"
  },
  {
    "text": "to actually get at those resources.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=964"
  },
  {
    "text": "First, we'll want to get all the PHAssetResources ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=968"
  },
  {
    "text": "for a PHAsset.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=970"
  },
  {
    "text": "Next, we'll be looking for two different types of resource: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=972"
  },
  {
    "text": "the .photo we talked about previously, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=975"
  },
  {
    "text": "and additionally, .alternatePhoto.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=977"
  },
  {
    "text": "I want to take a brief moment to explain ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=979"
  },
  {
    "text": "what .alternatePhoto is.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=981"
  },
  {
    "text": "Some photo libraries will contain assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=983"
  },
  {
    "text": "that follow the old RAW plus JPEG storage model ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=986"
  },
  {
    "text": "that some DSLR cameras use.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=988"
  },
  {
    "text": "This requires storing the RAW and a JPEG ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=990"
  },
  {
    "text": "as two distinct resources; the JPEG as the photo ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=993"
  },
  {
    "text": "and the RAW as the alternate photo.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=997"
  },
  {
    "text": "This leads to an increased file footprint ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=999"
  },
  {
    "text": "in the photo library, less portability, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1001"
  },
  {
    "text": "and often a confusing user experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1003"
  },
  {
    "text": "This model is not recommended for Apple ProRAW.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1006"
  },
  {
    "text": "If your intent is to save a ProRAW file ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1008"
  },
  {
    "text": "to the photo library, you should use the capture settings ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1011"
  },
  {
    "text": "to embed a full-size JPEG preview in the file.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1013"
  },
  {
    "text": "Now, back to our resources.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1017"
  },
  {
    "text": "We'll be checking the uniformTypeIdentifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1019"
  },
  {
    "text": "of the resource to see if it conforms to a RAW type ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1021"
  },
  {
    "text": "that we are interested in.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1024"
  },
  {
    "text": "And finally, once we have a RAW resource, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1026"
  },
  {
    "text": "we'll use the PHAssetResourceManager ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1028"
  },
  {
    "text": "to retrieve the actual data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1031"
  },
  {
    "text": "Now let's take a look at that in code.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1033"
  },
  {
    "text": "First, we iterate through all the PHAssetResources ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1036"
  },
  {
    "text": "on an asset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1038"
  },
  {
    "text": "look for any that are .photo or .alternatePhoto type, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1040"
  },
  {
    "text": "check that they conform to the RAW image UTType, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1044"
  },
  {
    "text": "and finally use the PHAssetResourceManager ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1048"
  },
  {
    "text": "to request the data for that resource.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1051"
  },
  {
    "text": "And that's it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1054"
  },
  {
    "text": "You now know how to use PhotoKit to both save and retrieve assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1055"
  },
  {
    "text": "with RAW resources from the photo library.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1059"
  },
  {
    "text": "Now I'm going to hand it back to David who will talk about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1061"
  },
  {
    "text": "how best to edit and display Apple ProRAW images.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1063"
  },
  {
    "text": "David: Thank you, Matt.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1067"
  },
  {
    "text": "The last section of our talk today will be about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1068"
  },
  {
    "text": "how to use the Core Image framework ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1071"
  },
  {
    "text": "to edit and display ProRAW images.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1073"
  },
  {
    "text": "I will describe how to create CIImages from a ProRAW file; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1076"
  },
  {
    "text": "how to apply the most common user adjustments; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1081"
  },
  {
    "text": "how you can turn off the default look to get linear, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1086"
  },
  {
    "text": "scene-referred values; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1089"
  },
  {
    "text": "how to render edits to output-referred formats ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1091"
  },
  {
    "text": "such as HEIC; and finally, how to display ProRAWs to a Mac ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1094"
  },
  {
    "text": "with an Extended Dynamic Range display.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1099"
  },
  {
    "text": "Getting a preview image from a ProRAW is possible ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1103"
  },
  {
    "text": "using the CGImageSourceCreateWithURL ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1106"
  },
  {
    "text": "and CGImageSourceCreate ThumbnailAtIndex APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1109"
  },
  {
    "text": "New in iOS 15 and macOS 12, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1114"
  },
  {
    "text": "Core Image has added a new convenience API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1117"
  },
  {
    "text": "to access the preview.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1119"
  },
  {
    "text": "Getting semantic segmentation mattes such as person, skin, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1121"
  },
  {
    "text": "and sky is supported by passing the desired option key ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1125"
  },
  {
    "text": "when initializing the CIImage.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1128"
  },
  {
    "text": "This too has a new and more convenient API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1132"
  },
  {
    "text": "to access the optional matte images.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1135"
  },
  {
    "text": "Most importantly, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1139"
  },
  {
    "text": "your application will want to get the primary ProRAW image.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1141"
  },
  {
    "text": "If your application just wants to show ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1145"
  },
  {
    "text": "the default rendering look, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1147"
  },
  {
    "text": "all you need to do is create an immutable CIImage ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1148"
  },
  {
    "text": "from a URL or data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1152"
  },
  {
    "text": "However, if your application wants to unlock ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1154"
  },
  {
    "text": "the full editability of ProRAWs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1157"
  },
  {
    "text": "then create a CIFilter from the URL.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1159"
  },
  {
    "text": "If you just ask that filter for its outputImage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1162"
  },
  {
    "text": "you will get a CIImage with a default look.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1165"
  },
  {
    "text": "The key advantage of this API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1169"
  },
  {
    "text": "is that the filter can be easily modified.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1171"
  },
  {
    "text": "The RAW CIFilter has several inputs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1174"
  },
  {
    "text": "that your application can change to produce new outputImage.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1176"
  },
  {
    "text": "The basic code pattern is to set a value object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1181"
  },
  {
    "text": "for one of the documented key strings.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1184"
  },
  {
    "text": "This setValue forKey API was due for an update though.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1187"
  },
  {
    "text": "So new in iOS 15 and macOS 12, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1192"
  },
  {
    "text": "we have created a more discoverable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1195"
  },
  {
    "text": "and Swift-friendly API.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1197"
  },
  {
    "text": "To use the new API, create a CIRAWFilter instance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1199"
  },
  {
    "text": "and then just set the desired property to a new value.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1204"
  },
  {
    "text": "Next, let’s discuss what properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1207"
  },
  {
    "text": "you might want to change.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1209"
  },
  {
    "text": "Given the dynamic range of ProRAW images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1212"
  },
  {
    "text": "one of the most important controls to provide is exposure.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1214"
  },
  {
    "text": "You can set this value to any float.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1217"
  },
  {
    "text": "For example, set it to positive 1 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1220"
  },
  {
    "text": "to make the image twice as bright ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1222"
  },
  {
    "text": "or negative 1 to make it half as bright.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1224"
  },
  {
    "text": "Because ProRAWs are edited ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1228"
  },
  {
    "text": "in a linear scene-referred space, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1229"
  },
  {
    "text": "adjusting the image white balance is more effective.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1231"
  },
  {
    "text": "The scene neutral can be specified as a temperature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1235"
  },
  {
    "text": "in degrees kelvin, or as an x/y chromaticity coordinate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1238"
  },
  {
    "text": "The default sharpness of a ProRAW look ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1243"
  },
  {
    "text": "can be adjusted to any value from zero to one.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1246"
  },
  {
    "text": "And the strength of ProRAW local tone map can be adjusted ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1250"
  },
  {
    "text": "to any value from zero to one.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1253"
  },
  {
    "text": "The local tone map allows for each region of the image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1256"
  },
  {
    "text": "to have its own optimized tone curve.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1259"
  },
  {
    "text": "Here is an example of a ProRAW image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1262"
  },
  {
    "text": "with a local tone map strength turned to fully off...",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1264"
  },
  {
    "text": "and at half strength...",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1268"
  },
  {
    "text": "and fully on.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1270"
  },
  {
    "text": "In this image, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1272"
  },
  {
    "text": "the local tone curves bring up the darker regions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1273"
  },
  {
    "text": "and bring down the brighter areas ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1276"
  },
  {
    "text": "so as to present the best possible result ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1278"
  },
  {
    "text": "on a Standard Dynamic Range display.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1280"
  },
  {
    "text": "Next, let’s discuss how your application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1283"
  },
  {
    "text": "can get direct access to the 14 stops ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1285"
  },
  {
    "text": "of linear scene-referred data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1287"
  },
  {
    "text": "Most users will prefer the common adjustments ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1290"
  },
  {
    "text": "I described earlier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1292"
  },
  {
    "text": "but access to linear data can be very useful ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1294"
  },
  {
    "text": "for certain application cases.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1296"
  },
  {
    "text": "To get a linear image, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1299"
  },
  {
    "text": "you just need turn off the filter inputs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1301"
  },
  {
    "text": "that apply the default look to the image.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1303"
  },
  {
    "text": "Set the baselineExposure, exposureBias, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1306"
  },
  {
    "text": "boost, and localToneMapAmount to 0, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1309"
  },
  {
    "text": "and disable gamut mapping before getting the outputImage.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1312"
  },
  {
    "text": "Once you have the linearRAWImage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1317"
  },
  {
    "text": "you can use it as an input to other Core Image filters ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1319"
  },
  {
    "text": "to perform scene-referred computations.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1323"
  },
  {
    "text": "For example, you could use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1325"
  },
  {
    "text": "the built-in Core Image histogram filter ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1327"
  },
  {
    "text": "to calculate statistics.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1329"
  },
  {
    "text": "Or you may want to render the linear image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1332"
  },
  {
    "text": "to get its pixel data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1334"
  },
  {
    "text": "To do this, just create a CIRenderDestination ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1336"
  },
  {
    "text": "for a RGBA-half-float mutable data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1339"
  },
  {
    "text": "tell the render destination ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1342"
  },
  {
    "text": "to use a linear colorSpace of your choice, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1344"
  },
  {
    "text": "and then have a CIContext start a task ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1348"
  },
  {
    "text": "to render the rawFilter’s output image.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1351"
  },
  {
    "text": "Here is an example of ProRAW with the default look ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1355"
  },
  {
    "text": "in comparison to the as-captured linear scene-referred image.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1357"
  },
  {
    "text": "The linear image will look flat and underexposed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1362"
  },
  {
    "text": "but it still contains the full and unclipped 14 stops of data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1366"
  },
  {
    "text": "from the scene.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1370"
  },
  {
    "text": "This pair of images also provides a good illustration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1371"
  },
  {
    "text": "of the difference between an output-referred image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1374"
  },
  {
    "text": "and a scene-referred image.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1377"
  },
  {
    "text": "In the output-referred default look, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1380"
  },
  {
    "text": "the area of the image with the maximum luma ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1382"
  },
  {
    "text": "is in the sunset on the left.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1384"
  },
  {
    "text": "But this sky area on the right ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1387"
  },
  {
    "text": "has a luma that is 80 percent as bright as that of the sunset.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1389"
  },
  {
    "text": "While the default image looks great, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1393"
  },
  {
    "text": "the luma values do not represent the reality of the scene.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1395"
  },
  {
    "text": "For the linear scene-referred image, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1400"
  },
  {
    "text": "the sky on the right of the image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1402"
  },
  {
    "text": "has a maximum radiance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1404"
  },
  {
    "text": "of just 12 percent of the radiance of the sunset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1405"
  },
  {
    "text": "which is more physically logical.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1408"
  },
  {
    "text": "This is why the linear scene-referred image ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1411"
  },
  {
    "text": "is so important for image processing and analysis.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1413"
  },
  {
    "text": "After your application has made changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1416"
  },
  {
    "text": "to the ProRAW CIFilter properties, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1418"
  },
  {
    "text": "you may want to save the image to an output-referred format ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1421"
  },
  {
    "text": "such as HEIC or JPEG.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1425"
  },
  {
    "text": "Here’s an example of how to save ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1428"
  },
  {
    "text": "the rawFilter output image to an 8-bit deep HEIC file.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1430"
  },
  {
    "text": "With this API, you can specify the output colorSpace to use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1434"
  },
  {
    "text": "though we recommend displayP3.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1438"
  },
  {
    "text": "It is also possible to use the options dictionary ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1441"
  },
  {
    "text": "to save the semantic masks into the HEIC.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1444"
  },
  {
    "text": "Also, because ProRAWs have extra precision, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1447"
  },
  {
    "text": "you might consider using this new Core Image API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1450"
  },
  {
    "text": "to save to 10-bit deep HEIC files.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1454"
  },
  {
    "text": "So far, all of the adjustments I’ve described ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1457"
  },
  {
    "text": "produce an output image that is tone-mapped ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1459"
  },
  {
    "text": "and gamut-mapped to the Standard Dynamic Range.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1461"
  },
  {
    "text": "This is commonly abbreviated as “SDR”.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1465"
  },
  {
    "text": "The next topic I’d like to discuss ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1468"
  },
  {
    "text": "is how you can present the dynamic range ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1470"
  },
  {
    "text": "of ProRAW images in full glory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1472"
  },
  {
    "text": "on an Extended Dynamic Range display.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1475"
  },
  {
    "text": "Many Mac displays -- ranging from the MacBook Pros ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1478"
  },
  {
    "text": "to iMacs to the Pro Display XDR -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1481"
  },
  {
    "text": "can present EDR content using a MetalKit View.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1484"
  },
  {
    "text": "To display a ProRAW CIImage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1488"
  },
  {
    "text": "we recommend using a MetalKit View subclass ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1490"
  },
  {
    "text": "for best performance.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1493"
  },
  {
    "text": "Your MetalKit View subclass should create a CIContext ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1495"
  },
  {
    "text": "and a MTLCommandQueue for the view.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1499"
  },
  {
    "text": "For important details on how to get the best performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1502"
  },
  {
    "text": "with Core Image in a MetalKit View, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1504"
  },
  {
    "text": "please review our presentation from last year on the subject.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1507"
  },
  {
    "text": "If your Mac display supports EDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1511"
  },
  {
    "text": "then you can set the view’s colorPixelFormat to rgba16Float ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1513"
  },
  {
    "text": "and set wantsExtendedDynamic RangeContent to true.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1518"
  },
  {
    "text": "Then, when it is time for your view subclass to draw, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1523"
  },
  {
    "text": "set the rawFilter.extended DynamicRangeAmount to 1 ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1526"
  },
  {
    "text": "and tell the Core Image context to start a task ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1530"
  },
  {
    "text": "to render the outputImage.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1533"
  },
  {
    "text": "Looking at a ProRAW image on an EDR display ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1535"
  },
  {
    "text": "is really something one needs to see in person ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1538"
  },
  {
    "text": "to fully appreciate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1541"
  },
  {
    "text": "But let me try to approximate what it looks like.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1542"
  },
  {
    "text": "Here, the SDR image is shown, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1545"
  },
  {
    "text": "while this shows what that same ProRAW file will feel like ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1549"
  },
  {
    "text": "in EDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1553"
  },
  {
    "text": "The bright areas and specular highlights ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1555"
  },
  {
    "text": "are no longer restricted by tone mapping, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1557"
  },
  {
    "text": "so they will be visible in full glory.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1560"
  },
  {
    "text": "This concludes our presentation on Apple ProRAW.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1563"
  },
  {
    "text": "Today we have described in detail ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1567"
  },
  {
    "text": "the design and contents of the file format ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1569"
  },
  {
    "text": "as well as how you can capture, store, and edit these images.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1571"
  },
  {
    "text": "I look forward to seeing how your applications ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1576"
  },
  {
    "text": "can unlock the full potential of these images.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1578"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10160/?time=1581"
  }
]