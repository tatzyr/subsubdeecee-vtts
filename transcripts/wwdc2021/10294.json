[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=2"
  },
  {
    "text": "Hello, and welcome to WWDC. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=9"
  },
  {
    "text": "My name is Joel, and I would like to tell you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=12"
  },
  {
    "text": "about how you can add music to your apps with MusicKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=13"
  },
  {
    "text": "MusicKit is a new framework for Apple platforms ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=17"
  },
  {
    "text": "which offers expressive APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=20"
  },
  {
    "text": "for your apps to access music items in Swift. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=21"
  },
  {
    "text": "It leverages the new Swift concurrency syntax ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=25"
  },
  {
    "text": "and is designed from the ground up to be ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=28"
  },
  {
    "text": "used in conjunction with SwiftUI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=29"
  },
  {
    "text": "MusicKit accelerates the way your apps integrate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=32"
  },
  {
    "text": "with Apple Music API, which are our set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=34"
  },
  {
    "text": "of server-side APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=36"
  },
  {
    "text": "for accessing the wide array of catalog content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=38"
  },
  {
    "text": "from Apple Music, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=40"
  },
  {
    "text": "thus making it much easier for you to build compelling apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=41"
  },
  {
    "text": "that tie into Apple Music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=45"
  },
  {
    "text": "First, we'll talk about how to request music content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=47"
  },
  {
    "text": "with MusicKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=50"
  },
  {
    "text": "Next, we'll talk about other topics that are ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=51"
  },
  {
    "text": "important for the way your apps integrate with Apple Music, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=54"
  },
  {
    "text": "such as requesting consent from the user for your app to access ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=57"
  },
  {
    "text": "Apple Music-related data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=61"
  },
  {
    "text": "managing tokens required for accessing Apple Music API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=64"
  },
  {
    "text": "accessing subscription information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=68"
  },
  {
    "text": "and related capabilities, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=70"
  },
  {
    "text": "playing music from the Apple Music catalog, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=72"
  },
  {
    "text": "and finally, how to show subscription offers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=76"
  },
  {
    "text": "for Apple Music, in case your user isn't already a subscriber. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=79"
  },
  {
    "text": "MusicKit offers a new model layer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=83"
  },
  {
    "text": "for accessing music items, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=85"
  },
  {
    "text": "with structured requests that allow you to fetch content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=86"
  },
  {
    "text": "from Apple Music API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=88"
  },
  {
    "text": "You can either search for content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=90"
  },
  {
    "text": "in the Apple Music catalog, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=92"
  },
  {
    "text": "or fetch resources based on a specific filter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=94"
  },
  {
    "text": "These requests produce responses with items ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=98"
  },
  {
    "text": "grouped in collections, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=100"
  },
  {
    "text": "which have built-in support for pagination, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=102"
  },
  {
    "text": "allowing you to get the next batch of items ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=103"
  },
  {
    "text": "from an initial response. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=105"
  },
  {
    "text": "So, what do these music items look like? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=107"
  },
  {
    "text": "Let's take a look at a specific example with an album. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=109"
  },
  {
    "text": "\"Album\" is a value type with properties grouped ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=111"
  },
  {
    "text": "in three different categories. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=114"
  },
  {
    "text": "The first category contains simple attributes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=116"
  },
  {
    "text": "such as a string property like \"title,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=118"
  },
  {
    "text": "a boolean property like \"isCompilation,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=120"
  },
  {
    "text": "or more structured properties like \"artwork,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=123"
  },
  {
    "text": "which gives you access to URLs for the artwork ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=125"
  },
  {
    "text": "alongside relevant sizing information and related colors. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=128"
  },
  {
    "text": "Album also offers several relationships, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=131"
  },
  {
    "text": "such as related artists or genres, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=134"
  },
  {
    "text": "or the list of tracks in a given album. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=137"
  },
  {
    "text": "For example, the result of the \"tracks\" relationship ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=139"
  },
  {
    "text": "is a collection of values of type \"Track,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=142"
  },
  {
    "text": "which is another type of music item. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=144"
  },
  {
    "text": "Finally, in addition to these ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=146"
  },
  {
    "text": "strong model-level relationships, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=148"
  },
  {
    "text": "\"Album\" offers several weaker associations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=150"
  },
  {
    "text": "of related content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=152"
  },
  {
    "text": "Associations are very similar to relationships, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=154"
  },
  {
    "text": "but they are typically more ephemeral, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=157"
  },
  {
    "text": "or more editorially driven. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=158"
  },
  {
    "text": "For example, the \"appearsOn\" association on an album ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=160"
  },
  {
    "text": "returns a collection of playlists, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=163"
  },
  {
    "text": "but, unlike collections for relationships, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=166"
  },
  {
    "text": "this one also has a title. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=168"
  },
  {
    "text": "Loading and accessing relationships ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=170"
  },
  {
    "text": "with MusicKit is very simple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=172"
  },
  {
    "text": "Given an album, you can easily fetch another representation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=173"
  },
  {
    "text": "of this same album that includes relationships like \"artists\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=176"
  },
  {
    "text": "and \"tracks,\" as well as associations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=180"
  },
  {
    "text": "like \"related albums,\" in a single operation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=182"
  },
  {
    "text": "The \"with\" method needs to be called ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=186"
  },
  {
    "text": "with the special Swift keyword \"await,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=188"
  },
  {
    "text": "which indicates that this will perform ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=190"
  },
  {
    "text": "an asynchronous operation behind the scenes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=192"
  },
  {
    "text": "This will indeed fetch a more complete representation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=194"
  },
  {
    "text": "of this album from Apple Music API over the network. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=197"
  },
  {
    "text": "You can then get the list of tracks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=200"
  },
  {
    "text": "from this detailed album, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=202"
  },
  {
    "text": "and iterate over those tracks as you would with a regular array. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=204"
  },
  {
    "text": "And here's the console output for this code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=208"
  },
  {
    "text": "Accessing associations such as \"related albums\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=210"
  },
  {
    "text": "works the same way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=213"
  },
  {
    "text": "with the only difference being that they typically ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=214"
  },
  {
    "text": "also include a title, accessible directly on the collection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=216"
  },
  {
    "text": "You can then iterate over the collection in that same manner ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=220"
  },
  {
    "text": "to print a few of those related albums. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=223"
  },
  {
    "text": "And here's the console output for this code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=225"
  },
  {
    "text": "Now, let's take a look at a demo of requesting ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=228"
  },
  {
    "text": "music content with MusicKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=230"
  },
  {
    "text": "I've been working on an app which allows me ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=231"
  },
  {
    "text": "to find and enjoy albums from Apple Music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=233"
  },
  {
    "text": "I can search for albums using this search field, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=237"
  },
  {
    "text": "which is already connected some code to load ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=240"
  },
  {
    "text": "matching search results ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=242"
  },
  {
    "text": "using the music catalog search request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=243"
  },
  {
    "text": "This app also keeps track ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=245"
  },
  {
    "text": "of the list of albums I recently viewed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=247"
  },
  {
    "text": "We can find more information about this album titled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=249"
  },
  {
    "text": "\"Catch A Vibe - EP\" by selecting it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=251"
  },
  {
    "text": "and you may have noticed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=254"
  },
  {
    "text": "the list of tracks for this album being animated in ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=256"
  },
  {
    "text": "after this detail view appeared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=259"
  },
  {
    "text": "This is done by loading the \"tracks\" relationship ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=260"
  },
  {
    "text": "of this album as we just saw, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=263"
  },
  {
    "text": "and updating the state variable for our SwiftUI view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=265"
  },
  {
    "text": "which is then used to populate this list. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=268"
  },
  {
    "text": "We can begin playing music from this album with the play button ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=270"
  },
  {
    "text": "underneath the artwork, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=273"
  },
  {
    "text": "or by selecting a specific track. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=274"
  },
  {
    "text": "This will simply use the playback API in MusicKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=276"
  },
  {
    "text": "to set the queue with this list of tracks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=279"
  },
  {
    "text": "and call the play method on the player. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=282"
  },
  {
    "text": "Let's try it out! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=284"
  },
  {
    "text": "So, if I select the track titled \"Catch a Vibe\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=287"
  },
  {
    "text": "by Karun & MONBRU... ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=289"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=292"
  },
  {
    "text": "This song begins playing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=294"
  },
  {
    "text": "♪ Ooh, oh, no ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=297"
  },
  {
    "text": "Our app even works automatically ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=299"
  },
  {
    "text": "in media controls in the Lock screen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=301"
  },
  {
    "text": "which allows me to scrub to a halfway point in this song. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=303"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=305"
  },
  {
    "text": "But I was hoping to use this app to help me rediscover ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=312"
  },
  {
    "text": "old music from my CD library, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=314"
  },
  {
    "text": "like this album from Phoenix. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=316"
  },
  {
    "text": "So, I'd like to add a feature that would allow me ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=318"
  },
  {
    "text": "to point the camera of my iPhone to the barcode of an old CD ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=320"
  },
  {
    "text": "and have this app surface this same album in digital format. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=324"
  },
  {
    "text": "I've already added some experimental code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=329"
  },
  {
    "text": "for this feature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=330"
  },
  {
    "text": "When I enable it, I can see a barcode button ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=332"
  },
  {
    "text": "at the bottom, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=335"
  },
  {
    "text": "which brings up a camera view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=338"
  },
  {
    "text": "If I point it to the barcode of this CD, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=339"
  },
  {
    "text": "it automatically recognizes the barcode value and displays it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=342"
  },
  {
    "text": "All I'm missing is some code that uses MusicKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=346"
  },
  {
    "text": "to find the corresponding album. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=349"
  },
  {
    "text": "Let's go ahead and add that to our app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=351"
  },
  {
    "text": "So let me make an albumsRequest ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=354"
  },
  {
    "text": "using the MusicCatalogResourceRequest. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=358"
  },
  {
    "text": "I am looking specifically for albums.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=361"
  },
  {
    "text": "And here, we want to make sure we find albums ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=367"
  },
  {
    "text": "where the UPC property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=370"
  },
  {
    "text": "which stands for Universal Product Code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=372"
  },
  {
    "text": "that's the technical term for bar code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=375"
  },
  {
    "text": "is equalTo: detectedBarcode.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=378"
  },
  {
    "text": "I can perform this request asynchronously.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=383"
  },
  {
    "text": "albumsRequest.response.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=391"
  },
  {
    "text": "And then from the response, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=396"
  },
  {
    "text": "I can look for the first album ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=398"
  },
  {
    "text": "in the results.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=400"
  },
  {
    "text": "Then I can then pass this first album ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=409"
  },
  {
    "text": "to the handleDetectedAlbum ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=411"
  },
  {
    "text": "helper method down below.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=412"
  },
  {
    "text": "handleDetectedAlbum (firstAlbum).",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=417"
  },
  {
    "text": "This method dismisses the barcode scanning view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=422"
  },
  {
    "text": "and then pushes the album detail view for the detected album.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=425"
  },
  {
    "text": "And it's decorated here with MainActor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=430"
  },
  {
    "text": "to make sure it will be executed on the main thread. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=432"
  },
  {
    "text": "So when we call it, we need to make sure ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=436"
  },
  {
    "text": "that we add the await keyword.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=437"
  },
  {
    "text": "So let's build and run our app again and try it out.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=443"
  },
  {
    "text": "Tap the barcode button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=448"
  },
  {
    "text": "Take my album.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=452"
  },
  {
    "text": "It worked! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=458"
  },
  {
    "text": "Now, it's going to be much easier to enjoy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=461"
  },
  {
    "text": "my old music in digital format on Apple Music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=463"
  },
  {
    "text": "MusicKit also offers a general purpose data request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=467"
  },
  {
    "text": "which is different from structured requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=471"
  },
  {
    "text": "in that it allows you to load content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=473"
  },
  {
    "text": "from an arbitrary Apple Music API endpoint using its URL.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=474"
  },
  {
    "text": "What you'll get back from this request is the raw data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=481"
  },
  {
    "text": "for the JSON response from Apple Music API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=484"
  },
  {
    "text": "You need to decode this raw data with JSONDecoder, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=487"
  },
  {
    "text": "but doing that doesn't have to be hard ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=491"
  },
  {
    "text": "because you can leverage existing music item types, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=493"
  },
  {
    "text": "since they conform to the Codable protocol. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=497"
  },
  {
    "text": "Let's take a look at an example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=499"
  },
  {
    "text": "If you wanted to load the list of top level genres ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=501"
  },
  {
    "text": "from Apple Music, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=503"
  },
  {
    "text": "you could do it by loading content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=505"
  },
  {
    "text": "from this specific URL, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=506"
  },
  {
    "text": "and here's the corresponding JSON response. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=508"
  },
  {
    "text": "If you take a closer look at this result, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=511"
  },
  {
    "text": "you can see in the middle what looks like a genre resource. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=513"
  },
  {
    "text": "So, how would you represent this in Swift? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=516"
  },
  {
    "text": "Sure enough, MusicKit has a Genre type. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=519"
  },
  {
    "text": "Zooming back, how would you represent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=522"
  },
  {
    "text": "the entire response in Swift? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=524"
  },
  {
    "text": "You can create a struct, with a data member, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=526"
  },
  {
    "text": "which is a simple array of genres. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=528"
  },
  {
    "text": "Then, make sure to mark this struct as Decodable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=531"
  },
  {
    "text": "And this doesn't even require writing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=534"
  },
  {
    "text": "any additional decoding logic, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=536"
  },
  {
    "text": "because \"Genre\" itself also conforms to Decodable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=538"
  },
  {
    "text": "So, to load this data in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=542"
  },
  {
    "text": "you would put this struct at the top of your file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=544"
  },
  {
    "text": "then you would construct the URL using the specific ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=547"
  },
  {
    "text": "country code for your user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=550"
  },
  {
    "text": "Create a music data request using this URL, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=552"
  },
  {
    "text": "and get the response from that, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=555"
  },
  {
    "text": "following the same pattern we've already seen. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=557"
  },
  {
    "text": "Once you have that response, you can decode its data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=560"
  },
  {
    "text": "using JSONDecoder, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=563"
  },
  {
    "text": "by passing in the type MyGenresResponse ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=564"
  },
  {
    "text": "to the decode method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=567"
  },
  {
    "text": "And that's it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=569"
  },
  {
    "text": "You can now access individual genres ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=570"
  },
  {
    "text": "in your strongly-typed genres response. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=572"
  },
  {
    "text": "And, as you can see, you get the same kind of music item ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=575"
  },
  {
    "text": "you can otherwise fetch from other requests in MusicKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=579"
  },
  {
    "text": "So, that's how you would load content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=582"
  },
  {
    "text": "from any arbitrary URL for Apple Music API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=583"
  },
  {
    "text": "And now that we know how to load music content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=587"
  },
  {
    "text": "let's discuss some important preliminary steps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=590"
  },
  {
    "text": "for integrating your apps with Apple Music, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=592"
  },
  {
    "text": "starting with privacy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=594"
  },
  {
    "text": "We want users to remain in control over which apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=596"
  },
  {
    "text": "have access to their data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=599"
  },
  {
    "text": "So, before you can request any data from Apple Music API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=601"
  },
  {
    "text": "which can include the user's listening history ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=603"
  },
  {
    "text": "or their music library, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=606"
  },
  {
    "text": "you need to get the user's informed consent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=607"
  },
  {
    "text": "for your app to access Apple Music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=609"
  },
  {
    "text": "Asking for this user content needs to be done ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=612"
  },
  {
    "text": "on a per-device and per-app basis. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=614"
  },
  {
    "text": "And here's what the user consent dialog looks like ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=617"
  },
  {
    "text": "in the context of an app named Zova, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=619"
  },
  {
    "text": "which is a great fitness app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=621"
  },
  {
    "text": "that allows you to work out with their playlists ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=622"
  },
  {
    "text": "on Apple Music or your own playlist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=624"
  },
  {
    "text": "When you go to start a workout for the first time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=628"
  },
  {
    "text": "Zova asks for permission to access Apple Music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=630"
  },
  {
    "text": "This dialog needs to convey to the user why your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=633"
  },
  {
    "text": "needs access to Apple Music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=636"
  },
  {
    "text": "To that end, your app's usage description for Apple Music, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=638"
  },
  {
    "text": "which you need to define in your Info.plist, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=642"
  },
  {
    "text": "is included as the subtitle of this dialog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=644"
  },
  {
    "text": "Here's an example of how you might request user consent ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=648"
  },
  {
    "text": "for MusicKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=650"
  },
  {
    "text": "Say you have a feature in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=651"
  },
  {
    "text": "that requires MusicKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=653"
  },
  {
    "text": "and that you're gating access to this feature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=654"
  },
  {
    "text": "using the isAuthorizedForMusicKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=656"
  },
  {
    "text": "state variable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=658"
  },
  {
    "text": "At the appropriate point in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=659"
  },
  {
    "text": "before you try to use MusicKit, you can request authorization ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=661"
  },
  {
    "text": "to access Apple Music with this asynchronous request method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=665"
  },
  {
    "text": "This will only prompt the user if your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=668"
  },
  {
    "text": "hasn't been authorized yet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=671"
  },
  {
    "text": "The request method returns a status value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=673"
  },
  {
    "text": "and you can set your isAuthorizedForMusicKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=675"
  },
  {
    "text": "variable to \"true\" if that status is equal to \"authorized.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=677"
  },
  {
    "text": "Now, let's talk briefly about tokens required ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=681"
  },
  {
    "text": "for loading data from Apple Music API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=684"
  },
  {
    "text": "Apple Music API requires a developer token, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=686"
  },
  {
    "text": "which essentially authenticates your app with the API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=689"
  },
  {
    "text": "Previously, to get this developer token, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=692"
  },
  {
    "text": "you would have had to create a MusicKit private key ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=695"
  },
  {
    "text": "in the developer portal, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=697"
  },
  {
    "text": "put it on a server under your control, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=699"
  },
  {
    "text": "to ensure the key is kept private, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=701"
  },
  {
    "text": "and have your app request a new developer token ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=703"
  },
  {
    "text": "from your server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=705"
  },
  {
    "text": "But now, with MusicKit for Swift, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=708"
  },
  {
    "text": "you no longer need to worry about any of this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=709"
  },
  {
    "text": "as the developer token is automatically generated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=712"
  },
  {
    "text": "for your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=714"
  },
  {
    "text": "You just need to opt in to this new automatic behavior ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=716"
  },
  {
    "text": "by enrolling in the developer portal. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=719"
  },
  {
    "text": "Specifically, in the page where you register your App ID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=721"
  },
  {
    "text": "select the App Services tab at the bottom, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=724"
  },
  {
    "text": "and enable the MusicKit checkbox. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=727"
  },
  {
    "text": "And you're done! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=730"
  },
  {
    "text": "Additionally, Apple Music API requires ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=731"
  },
  {
    "text": "a user token for any personalized endpoint. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=733"
  },
  {
    "text": "And just like the developer token, new this year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=737"
  },
  {
    "text": "the user token is automatically generated on your behalf. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=739"
  },
  {
    "text": "One more thing you may need to use MusicKit in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=743"
  },
  {
    "text": "is a way to figure out if your user has ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=745"
  },
  {
    "text": "an active Apple Music subscription. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=747"
  },
  {
    "text": "Subscription information in MusicKit is exposed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=750"
  },
  {
    "text": "as three distinct capabilities, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=752"
  },
  {
    "text": "which tell you if the user can play content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=754"
  },
  {
    "text": "from the Apple Music catalog, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=756"
  },
  {
    "text": "if they have iCloud Music Library enabled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=758"
  },
  {
    "text": "or if they can become subscribers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=761"
  },
  {
    "text": "in case they don't already have an active subscription.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=762"
  },
  {
    "text": "Make sure to check the relevant capability for the specific ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=767"
  },
  {
    "text": "Apple Music-related functionality in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=770"
  },
  {
    "text": "For example, if you have a play button ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=773"
  },
  {
    "text": "hooked up to play some music, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=775"
  },
  {
    "text": "you may want to keep it disabled if your user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=777"
  },
  {
    "text": "cannot play catalog content from Apple Music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=779"
  },
  {
    "text": "You can define a state variable in your view ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=782"
  },
  {
    "text": "to keep track of the music subscription. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=785"
  },
  {
    "text": "Then, you can apply the disabled modifier to your button ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=787"
  },
  {
    "text": "to make sure it stays disabled ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=791"
  },
  {
    "text": "if the music subscription property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=792"
  },
  {
    "text": "\"canPlayCatalogContent\" is set to \"false.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=794"
  },
  {
    "text": "And finally, inside of an asynchronous block ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=797"
  },
  {
    "text": "passed to the new task modifier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=800"
  },
  {
    "text": "you can use the new subscription updates stream ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=803"
  },
  {
    "text": "to be notified of changes in the music subscription. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=805"
  },
  {
    "text": "Now, let's talk about playback with MusicKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=808"
  },
  {
    "text": "MusicKit offers two distinct players, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=811"
  },
  {
    "text": "which we call SystemMusicPlayer and ApplicationMusicPlayer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=813"
  },
  {
    "text": "Let's get into the differences between those players, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=817"
  },
  {
    "text": "starting with an example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=819"
  },
  {
    "text": "Whereas a social media app may want to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=821"
  },
  {
    "text": "the SystemMusicPlayer to change what's playing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=823"
  },
  {
    "text": "out of the system music app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=825"
  },
  {
    "text": "a fitness app might prefer to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=827"
  },
  {
    "text": "the ApplicationMusicPlayer to keep their playback state ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=829"
  },
  {
    "text": "completely independent from the system music app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=832"
  },
  {
    "text": "Both of these players automatically report ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=835"
  },
  {
    "text": "the now playing information and handle remote commands. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=837"
  },
  {
    "text": "This is what gave us deep integration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=840"
  },
  {
    "text": "with system media controls in the lock screen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=842"
  },
  {
    "text": "earlier in our demo. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=844"
  },
  {
    "text": "However, the now-playing app is reported differently. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=846"
  },
  {
    "text": "If you use the SystemMusicPlayer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=849"
  },
  {
    "text": "the Music app will be reported as the now-playing app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=851"
  },
  {
    "text": "whereas if you use the ApplicationMusicPlayer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=854"
  },
  {
    "text": "your app will be the one reported as the now-playing app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=857"
  },
  {
    "text": "Ownership of the playback queue is also different. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=860"
  },
  {
    "text": "With SystemMusicPlayer, your app is merely remote-controlling ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=863"
  },
  {
    "text": "the system Music app, whereas with ApplicationMusicPlayer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=866"
  },
  {
    "text": "your app owns a completely separate playback queue. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=870"
  },
  {
    "text": "Both of these players allow you to set the queue ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=873"
  },
  {
    "text": "with one or more items, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=875"
  },
  {
    "text": "add an item to play next, or to play later. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=877"
  },
  {
    "text": "But only the ApplicationMusicPlayer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=880"
  },
  {
    "text": "gives you additional control over the playback queue, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=882"
  },
  {
    "text": "allowing you to insert items in the middle, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=885"
  },
  {
    "text": "or removing items that had been added previously. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=887"
  },
  {
    "text": "Finally, if your user isn't already ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=890"
  },
  {
    "text": "an Apple Music subscriber, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=893"
  },
  {
    "text": "you may want to allow them to start a free trial ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=894"
  },
  {
    "text": "for Apple Music from within your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=897"
  },
  {
    "text": "so they'll be able to enjoy all the functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=899"
  },
  {
    "text": "you've worked on to improve the user experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=901"
  },
  {
    "text": "of your app with music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=903"
  },
  {
    "text": "The subscription offer can be configured by tailoring ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=904"
  },
  {
    "text": "the main message shown to the user to better correspond ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=907"
  },
  {
    "text": "to the functionality in your app, like “play music”.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=910"
  },
  {
    "text": "It can also be contextual, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=915"
  },
  {
    "text": "highlighting a specific song, album, or a playlist.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=917"
  },
  {
    "text": "And by using the subscription offer sheet in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=921"
  },
  {
    "text": "you can get rewarded for bringing in ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=924"
  },
  {
    "text": "new Apple Music subscribers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=926"
  },
  {
    "text": "through our affiliate program, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=928"
  },
  {
    "text": "which we call the Apple Services ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=929"
  },
  {
    "text": "Performance Partners Program. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=931"
  },
  {
    "text": "To show a contextual music subscription offer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=933"
  },
  {
    "text": "in your app, you'll need to keep track ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=936"
  },
  {
    "text": "of the music subscription as we saw earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=938"
  },
  {
    "text": "You'll also need another state variable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=941"
  },
  {
    "text": "to keep track of whether the offer is being shown. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=943"
  },
  {
    "text": "Pass in the ID of, say, an album, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=946"
  },
  {
    "text": "as the itemID property of your subscription offer options. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=949"
  },
  {
    "text": "Keep the offer button disabled whenever “canBecomeSubscriber” ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=953"
  },
  {
    "text": "is set to \"false\" on the music subscription. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=956"
  },
  {
    "text": "Then, use the musicSubscriptionOffer modifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=959"
  },
  {
    "text": "with a binding to the isShowingOffer property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=962"
  },
  {
    "text": "and also including your options. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=965"
  },
  {
    "text": "Finally, set the isShowingOffer variable to \"true.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=968"
  },
  {
    "text": "Let's go back to our app and see what ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=971"
  },
  {
    "text": "the contextual offer for Apple Music looks like. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=973"
  },
  {
    "text": "In our earlier demo, we were already signed in ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=976"
  },
  {
    "text": "with an active Apple Music subscription. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=979"
  },
  {
    "text": "So, to simulate the scenario where it might be appropriate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=981"
  },
  {
    "text": "to show a subscription offer for Apple Music, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=983"
  },
  {
    "text": "you can just go Settings, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=985"
  },
  {
    "text": "and sign out of your account.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=989"
  },
  {
    "text": "Then, if I go back to my app, you can see that the play button ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=993"
  },
  {
    "text": "was disabled and moved to the left to make room ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=997"
  },
  {
    "text": "for another button that invites the user to join Apple Music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1000"
  },
  {
    "text": "If I tap this button, a subscription offer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1005"
  },
  {
    "text": "is presented, highlighting the specific album ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1008"
  },
  {
    "text": "we were just looking at in our app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1012"
  },
  {
    "text": "And that's how you can allow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1014"
  },
  {
    "text": "users to start a free trial ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1015"
  },
  {
    "text": "for Apple Music ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1017"
  },
  {
    "text": "from within your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1018"
  },
  {
    "text": "In conclusion, there are many types of apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1019"
  },
  {
    "text": "that can be enhanced by adding a little bit of music ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1022"
  },
  {
    "text": "as part of their experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1024"
  },
  {
    "text": "For example, you can make your games a lot more immersive ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1026"
  },
  {
    "text": "by playing background music that matches the mood of your game. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1029"
  },
  {
    "text": "Or you can play upbeat music ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1033"
  },
  {
    "text": "to keep your users motivated in a fitness app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1035"
  },
  {
    "text": "And in a social media app, you can keep your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1038"
  },
  {
    "text": "even more engaged with content that highlights music.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1041"
  },
  {
    "text": "To go even further, make sure to check out ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1045"
  },
  {
    "text": "some related sessions, so you can learn about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1047"
  },
  {
    "text": "harnessing the power of Shazam signatures with ShazamKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1050"
  },
  {
    "text": "and dive deeper into concurrency with SwiftUI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1053"
  },
  {
    "text": "Thanks for watching, and enjoy WWDC 2021! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1056"
  },
  {
    "text": "[percussive music]",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10294/?time=1059"
  }
]