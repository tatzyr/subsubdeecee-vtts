[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=2"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=7"
  },
  {
    "text": "Itai Rom: Welcome to \"Customize your advanced ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=9"
  },
  {
    "text": "Xcode Cloud workflows.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=11"
  },
  {
    "text": "My name is Itai, and I'll be joined later ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=12"
  },
  {
    "text": "by my colleague, Yan. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=14"
  },
  {
    "text": "This year we're introducing Xcode Cloud. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=17"
  },
  {
    "text": "Xcode Cloud is a continuous integration and delivery service ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=20"
  },
  {
    "text": "built into Xcode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=23"
  },
  {
    "text": "and designed exclusively for Apple developers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=24"
  },
  {
    "text": "In other sessions, we've shown how you can set up ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=27"
  },
  {
    "text": "end-to-end workflows to continuously build, test, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=29"
  },
  {
    "text": "and distribute your apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=32"
  },
  {
    "text": "In this session, we're going to talk about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=34"
  },
  {
    "text": "some more advanced features that you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=36"
  },
  {
    "text": "to customize Xcode Cloud to better fit your team's needs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=38"
  },
  {
    "text": "Xcode Cloud is designed to integrate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=42"
  },
  {
    "text": "with Apple developer tools and services -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=44"
  },
  {
    "text": "like the developer website, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=47"
  },
  {
    "text": "TestFlight, and App Store Connect -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=48"
  },
  {
    "text": "right out of the box. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=50"
  },
  {
    "text": "It also integrates with your essential, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=52"
  },
  {
    "text": "day-to-day development tools, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=53"
  },
  {
    "text": "like all major Git-based source control providers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=55"
  },
  {
    "text": "and even Slack for messaging. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=58"
  },
  {
    "text": "However, you may have in-house or proprietary tools ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=60"
  },
  {
    "text": "and other external services that are a key part of your pipeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=63"
  },
  {
    "text": "In this session, we'll demonstrate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=67"
  },
  {
    "text": "how you can customize Xcode Cloud ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=68"
  },
  {
    "text": "to integrate well with these tools and services. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=70"
  },
  {
    "text": "We're going to cover four customization topics. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=75"
  },
  {
    "text": "First, we'll discuss using environment variables ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=78"
  },
  {
    "text": "to pass extra bits of information into your builds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=80"
  },
  {
    "text": "We'll learn how to use scripts to run custom commands ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=83"
  },
  {
    "text": "in the actions you run in your build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=86"
  },
  {
    "text": "And also how to add other source repositories ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=89"
  },
  {
    "text": "that you need during a build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=91"
  },
  {
    "text": "And finally, how you can use webhooks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=93"
  },
  {
    "text": "to integrate Xcode Cloud with other systems your team uses. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=95"
  },
  {
    "text": "There's a lot to cover, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=99"
  },
  {
    "text": "so let's get straight into it with environment variables. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=100"
  },
  {
    "text": "As you plan and configure workflows for your project, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=104"
  },
  {
    "text": "there may be times when you want the behavior of your build ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=107"
  },
  {
    "text": "to be slightly different ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=109"
  },
  {
    "text": "depending on which workflow is running. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=110"
  },
  {
    "text": "For example, if your app depends on an API service, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=113"
  },
  {
    "text": "you may want your tests to use a staging environment ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=116"
  },
  {
    "text": "rather than production. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=118"
  },
  {
    "text": "In this case, you'd want to pass a different URL ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=120"
  },
  {
    "text": "for the API service into your tests. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=123"
  },
  {
    "text": "Environment variables allow you to do just that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=126"
  },
  {
    "text": "They're simple key-value pairs that allow you to define ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=129"
  },
  {
    "text": "some information that you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=132"
  },
  {
    "text": "to further control the behavior of your build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=133"
  },
  {
    "text": "You can configure any environment variables you need ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=137"
  },
  {
    "text": "right in the Environment section of your workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=139"
  },
  {
    "text": "Since they're part of your workflow configuration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=142"
  },
  {
    "text": "you don't have to commit any additional information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=144"
  },
  {
    "text": "to your source repository. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=147"
  },
  {
    "text": "Every time your workflow runs, the variables you've defined ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=149"
  },
  {
    "text": "will be set in the environments that are running the actions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=151"
  },
  {
    "text": "For sensitive information, like API keys or access tokens, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=157"
  },
  {
    "text": "you can configure a secret environment variable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=161"
  },
  {
    "text": "Secret environment variables are handled securely. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=164"
  },
  {
    "text": "They're encrypted and stored securely at all times, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=167"
  },
  {
    "text": "and their decrypted values are only available ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=169"
  },
  {
    "text": "in the temporary environments ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=171"
  },
  {
    "text": "that are used to run your actions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=173"
  },
  {
    "text": "The values are also redacted from logs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=175"
  },
  {
    "text": "and you can't view them in the workflow editor ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=178"
  },
  {
    "text": "like you can for a nonsecret variable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=180"
  },
  {
    "text": "Making an environment variable secret is easy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=183"
  },
  {
    "text": "Just check the \"Secret\" checkbox ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=185"
  },
  {
    "text": "in the environment variables table. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=187"
  },
  {
    "text": "The value of your environment variable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=189"
  },
  {
    "text": "will then be hidden from view and once you save your change, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=190"
  },
  {
    "text": "will be stored securely ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=193"
  },
  {
    "text": "and can no longer be viewed in the workflow editor. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=195"
  },
  {
    "text": "Environment variables provide a handy mechanism ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=200"
  },
  {
    "text": "to customize behavior and pass additional information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=202"
  },
  {
    "text": "into your workflows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=205"
  },
  {
    "text": "They're even more powerful ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=206"
  },
  {
    "text": "in conjunction with our next advanced feature: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=208"
  },
  {
    "text": "custom scripts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=210"
  },
  {
    "text": "Between Xcode Cloud's workflows and Xcode's schemes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=212"
  },
  {
    "text": "you have a lot of flexibility in how you can set up the actions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=215"
  },
  {
    "text": "that you want to run in your workflows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=218"
  },
  {
    "text": "But sometimes you'll need to run custom logic ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=221"
  },
  {
    "text": "or additional commands during an action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=222"
  },
  {
    "text": "and custom scripts provide a powerful ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=225"
  },
  {
    "text": "and flexible way to achieve this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=226"
  },
  {
    "text": "A custom script is a shell script that you write ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=230"
  },
  {
    "text": "and include in your source repository. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=232"
  },
  {
    "text": "Your custom scripts are run in each of the actions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=235"
  },
  {
    "text": "in your workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=237"
  },
  {
    "text": "There are three types of scripts available: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=239"
  },
  {
    "text": "the post-clone script, the pre-Xcodebuild script, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=241"
  },
  {
    "text": "and the post-Xcodebuild script. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=245"
  },
  {
    "text": "Each time Xcode Cloud runs an action ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=248"
  },
  {
    "text": "it performs a series of steps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=251"
  },
  {
    "text": "and each of the custom scripts, as hinted at by its name, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=253"
  },
  {
    "text": "is run as a step at a particular point in an action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=256"
  },
  {
    "text": "First, Xcode Cloud sets up a temporary environment ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=259"
  },
  {
    "text": "and clones source code from your primary repository. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=263"
  },
  {
    "text": "Afterwards, Xcode Cloud runs the post-clone script. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=266"
  },
  {
    "text": "After resolving all other source dependencies, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=270"
  },
  {
    "text": "Xcode cloud runs the pre-Xcodebuild script. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=273"
  },
  {
    "text": "Next, Xcode Cloud runs the action's ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=276"
  },
  {
    "text": "corresponding Xcodebuild command. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=278"
  },
  {
    "text": "When the Xcodebuild step finishes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=281"
  },
  {
    "text": "Xcode Cloud runs the post-Xcodebuild script ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=282"
  },
  {
    "text": "and saves any artifacts it generated earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=285"
  },
  {
    "text": "If your workflow includes several actions -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=289"
  },
  {
    "text": "for example, multiple build actions -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=291"
  },
  {
    "text": "or build, test, analyze, and archive actions -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=293"
  },
  {
    "text": "Xcode Cloud runs your custom scripts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=296"
  },
  {
    "text": "at the appropriate times for each action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=298"
  },
  {
    "text": "Adding a custom script to Xcode Cloud is easy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=302"
  },
  {
    "text": "You simply add a shell script with the appropriate name ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=305"
  },
  {
    "text": "into a folder called \"ci_scripts\", ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=308"
  },
  {
    "text": "and place this folder at the same level as the project file ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=310"
  },
  {
    "text": "or workspace you're using in your workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=313"
  },
  {
    "text": "Since custom scripts are part of your source code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=316"
  },
  {
    "text": "you can test out script changes in pull requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=319"
  },
  {
    "text": "or even customize their behavior on different branches. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=321"
  },
  {
    "text": "When Xcode Cloud runs your actions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=325"
  },
  {
    "text": "it looks for the existence of each of the scripts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=327"
  },
  {
    "text": "at the appropriate time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=330"
  },
  {
    "text": "and runs them if they're present. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=331"
  },
  {
    "text": "You don't need to configure your workflow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=333"
  },
  {
    "text": "to run your custom scripts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=335"
  },
  {
    "text": "If the scripts are there, they'll be run. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=336"
  },
  {
    "text": "Do note that the name of the ci_scripts folder ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=339"
  },
  {
    "text": "and the scripts inside ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=342"
  },
  {
    "text": "must exactly match this naming convention ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=343"
  },
  {
    "text": "in order for Xcode Cloud to find and run your scripts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=346"
  },
  {
    "text": "Environment variables that you've configured ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=352"
  },
  {
    "text": "in your workflow are available to use in your custom scripts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=354"
  },
  {
    "text": "including secret environment variables. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=357"
  },
  {
    "text": "In addition, Xcode Cloud also provides ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=360"
  },
  {
    "text": "a variety of other useful environment variables. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=362"
  },
  {
    "text": "You can use these variables ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=365"
  },
  {
    "text": "to add flow control to your scripts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=367"
  },
  {
    "text": "so that you can ensure the commands you want to run ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=368"
  },
  {
    "text": "are run at the correct points during your workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=371"
  },
  {
    "text": "For example, if you want to check if your action is running ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=375"
  },
  {
    "text": "for iOS, macOS, tvOS, or watchOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=378"
  },
  {
    "text": "you can use the value of the CI_PRODUCT_PLATFORM variable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=381"
  },
  {
    "text": "In a more targeted scenario -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=386"
  },
  {
    "text": "perhaps there's a command you only want to run ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=388"
  },
  {
    "text": "during the archive action of a specific workflow -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=390"
  },
  {
    "text": "you can check that the CI_XCODEBUILD_ACTION ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=393"
  },
  {
    "text": "and CI_WORKFLOW variables match the archive action ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=395"
  },
  {
    "text": "and the specific workflow before running the command. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=399"
  },
  {
    "text": "Let's see custom scripts in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=403"
  },
  {
    "text": "My team works on a smoothie ordering app called Fruta. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=406"
  },
  {
    "text": "In the \"Explore Xcode Cloud workflows\" session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=409"
  },
  {
    "text": "you learned how to set up workflows to build, test, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=412"
  },
  {
    "text": "and distribute apps, like Fruta. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=414"
  },
  {
    "text": "We use Xcode Cloud to build and test ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=417"
  },
  {
    "text": "every time we create a pull request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=419"
  },
  {
    "text": "We also distribute builds from our pull requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=422"
  },
  {
    "text": "to members of our team via TestFlight, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=424"
  },
  {
    "text": "allowing them to verify and sign off on changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=427"
  },
  {
    "text": "before the code is merged. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=429"
  },
  {
    "text": "Today, I'd like to make it easier for team members ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=431"
  },
  {
    "text": "to tell if the build installed on their device ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=434"
  },
  {
    "text": "is from a pull request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=436"
  },
  {
    "text": "We can do that by using a different app icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=438"
  },
  {
    "text": "when we're building from a pull request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=440"
  },
  {
    "text": "As you might've guessed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=444"
  },
  {
    "text": "using a custom script makes setting this up a breeze. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=445"
  },
  {
    "text": "Let's see how.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=448"
  },
  {
    "text": "Over in Xcode, I already have the Fruta project open. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=452"
  },
  {
    "text": "Before I can add a custom script, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=455"
  },
  {
    "text": "I first need to add a ci_scripts folder to my project. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=457"
  },
  {
    "text": "I can do this by selecting my project in the project navigator ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=460"
  },
  {
    "text": "and clicking the plus button at the bottom ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=464"
  },
  {
    "text": "and then selecting New Group. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=466"
  },
  {
    "text": "I'll type in the folder name, ci_scripts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=471"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=475"
  },
  {
    "text": "Next, I'll add the beta app icon set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=479"
  },
  {
    "text": "that our designer created to the ci_scripts folder, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=482"
  },
  {
    "text": "so that my custom script can swap it into place ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=485"
  },
  {
    "text": "during the build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=487"
  },
  {
    "text": "To do that, I'll drag it in to my ci_scripts folder ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=489"
  },
  {
    "text": "from Finder. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=492"
  },
  {
    "text": "In the sheet, I'll uncheck any selected targets ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=497"
  },
  {
    "text": "and click Finish.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=499"
  },
  {
    "text": "Finally, let's add a pre-Xcodebuild script. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=504"
  },
  {
    "text": "This script will run prior to the Xcodebuild command, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=507"
  },
  {
    "text": "and I'll use it to swap Fruta's default app icon set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=510"
  },
  {
    "text": "with the beta app icon set when appropriate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=513"
  },
  {
    "text": "I've already created a script to use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=516"
  },
  {
    "text": "so all I need to do is add it into the ci_scripts folder.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=518"
  },
  {
    "text": "Again, I'll uncheck any targets in the sheet ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=528"
  },
  {
    "text": "and click Finish.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=531"
  },
  {
    "text": "Now that my script is in place, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=537"
  },
  {
    "text": "let's take a closer look at what it does. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=538"
  },
  {
    "text": "First, I want to make sure that the app icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=543"
  },
  {
    "text": "is only swapped out when the build is coming ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=545"
  },
  {
    "text": "from a pull request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=548"
  },
  {
    "text": "I can use one of the environment variables ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=549"
  },
  {
    "text": "that Xcode Cloud provides to check at run time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=551"
  },
  {
    "text": "if the build is a pull request or not. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=554"
  },
  {
    "text": "There are a variety of environment variables ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=556"
  },
  {
    "text": "related to pull requests that I could use for this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=558"
  },
  {
    "text": "but in this case I'm going to check that ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=560"
  },
  {
    "text": "the CI_PULL_REQUEST_NUMBER environment variable is set.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=562"
  },
  {
    "text": "Also, I only want the beta app icon to be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=569"
  },
  {
    "text": "for builds that are distributed to TestFlight. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=572"
  },
  {
    "text": "Whenever Xcode Cloud distributes a build to TestFlight, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=574"
  },
  {
    "text": "it always builds an archive of the project first. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=577"
  },
  {
    "text": "So a good way to check this is to verify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=580"
  },
  {
    "text": "if the CI_XCODEBUILD_ACTION environment variable's value ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=582"
  },
  {
    "text": "is \"archive\".",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=586"
  },
  {
    "text": "If both of these environment variables ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=591"
  },
  {
    "text": "have the expected values, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=593"
  },
  {
    "text": "then I remove the existing app icon set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=594"
  },
  {
    "text": "and replace it with the beta app icon set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=597"
  },
  {
    "text": "using the rm and mv commands. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=599"
  },
  {
    "text": "Also, take note that I'm using the CI_WORKSPACE ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=606"
  },
  {
    "text": "environment variable to construct the right path ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=608"
  },
  {
    "text": "for both the default and the beta app icon sets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=611"
  },
  {
    "text": "All that's left to do is to open up a pull request ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=616"
  },
  {
    "text": "with these changes and wait for Xcode Cloud ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=618"
  },
  {
    "text": "to build and distribute Fruta to TestFlight. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=620"
  },
  {
    "text": "Rather than walk through that process now, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=623"
  },
  {
    "text": "I've prepared a build ahead of time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=625"
  },
  {
    "text": "Here, Xcode Cloud has built and distributed Fruta ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=628"
  },
  {
    "text": "from my pull request branch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=631"
  },
  {
    "text": "In the TestFlight app on my phone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=633"
  },
  {
    "text": "I can verify that my build is using the new beta app icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=635"
  },
  {
    "text": "I just added. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=638"
  },
  {
    "text": "Now I can merge my pull request and everyone on the team ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=639"
  },
  {
    "text": "will start seeing the same beta app icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=642"
  },
  {
    "text": "in builds of their own pull requests. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=645"
  },
  {
    "text": "Now that we've seen how to use custom scripts in Xcode Cloud, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=648"
  },
  {
    "text": "there are a few important things to note about them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=652"
  },
  {
    "text": "The standard output and standard error from your custom scripts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=654"
  },
  {
    "text": "are included in the logs for the action they ran in, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=658"
  },
  {
    "text": "and they can also be downloaded from the Artifacts tab. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=661"
  },
  {
    "text": "If your script doesn't appear to be running ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=664"
  },
  {
    "text": "when you expect it to, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=666"
  },
  {
    "text": "double-check that you've named it correctly ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=668"
  },
  {
    "text": "and placed it in a ci_scripts folder ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=669"
  },
  {
    "text": "alongside your project or workspace. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=672"
  },
  {
    "text": "Make sure to add helpful logging and resiliency to aid you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=674"
  },
  {
    "text": "in troubleshooting any failures in your custom scripts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=677"
  },
  {
    "text": "For example, if your script makes network requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=681"
  },
  {
    "text": "to external services, you may want to include logic ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=683"
  },
  {
    "text": "to retry those requests with verbose logging enabled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=686"
  },
  {
    "text": "Additionally, Xcode Cloud respects the exit codes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=690"
  },
  {
    "text": "of your scripts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=693"
  },
  {
    "text": "So if your script exits with a nonzero value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=694"
  },
  {
    "text": "Xcode Cloud will consider this a failure ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=697"
  },
  {
    "text": "and will fail the overall action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=699"
  },
  {
    "text": "You can take advantage of this ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=701"
  },
  {
    "text": "to ensure that the commands you need to run ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=703"
  },
  {
    "text": "in your script are successful ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=705"
  },
  {
    "text": "before Xcode Cloud continues on with the rest of the action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=707"
  },
  {
    "text": "Lastly, it should be noted that in a test action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=711"
  },
  {
    "text": "multiple environments are used to build and run your tests. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=714"
  },
  {
    "text": "Only the environment that is used for building your tests ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=717"
  },
  {
    "text": "will have your source code cloned into it by default. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=720"
  },
  {
    "text": "The environments that run your tests ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=723"
  },
  {
    "text": "won't have source code cloned into them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=725"
  },
  {
    "text": "They'll only have the ci_scripts folder made available on them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=727"
  },
  {
    "text": "As a result, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=730"
  },
  {
    "text": "the post-clone script won't run in these environments ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=731"
  },
  {
    "text": "and your custom scripts and any of their dependencies, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=734"
  },
  {
    "text": "such as other shell scripts and small tools, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=737"
  },
  {
    "text": "must be entirely contained within the ci_scripts folder. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=739"
  },
  {
    "text": "With custom scripts and environment variables, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=744"
  },
  {
    "text": "you have two powerful tools ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=746"
  },
  {
    "text": "to customize the behavior of your workflows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=747"
  },
  {
    "text": "Next, my colleague Yan will show you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=750"
  },
  {
    "text": "how to use additional repositories with Xcode Cloud ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=752"
  },
  {
    "text": "so that you can make use of Swift packages ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=755"
  },
  {
    "text": "and other dependencies in your workflows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=757"
  },
  {
    "text": "Yan Huang: Thanks, Itai. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=761"
  },
  {
    "text": "Many projects are built using tools, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=762"
  },
  {
    "text": "libraries, and frameworks. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=764"
  },
  {
    "text": "Those dependencies are often hosted in Git repositories ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=766"
  },
  {
    "text": "shared across projects, and they need to be retrieved ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=770"
  },
  {
    "text": "for your project to build successfully. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=774"
  },
  {
    "text": "Xcode Cloud automatically helps adding these extra repositories. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=776"
  },
  {
    "text": "For example, we want to add a new feature to allow users ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=781"
  },
  {
    "text": "to invite their friends and share a drink ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=785"
  },
  {
    "text": "to the Fruta app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=787"
  },
  {
    "text": "Another team has implemented a similar feature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=789"
  },
  {
    "text": "So we are going to reuse their package called \"InvitationsKit\", ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=792"
  },
  {
    "text": "which is hosted on a private Git repository ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=796"
  },
  {
    "text": "shared with my team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=799"
  },
  {
    "text": "Let's see how to add this package. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=801"
  },
  {
    "text": "Here am I in Xcode with the Fruta project. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=805"
  },
  {
    "text": "I can add a package from the File menu ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=809"
  },
  {
    "text": "and select Add Package. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=811"
  },
  {
    "text": "I already have the Nature Labs shared packages collection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=815"
  },
  {
    "text": "which contains a list of packages ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=819"
  },
  {
    "text": "within our organization. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=821"
  },
  {
    "text": "I'm going to select InvitationsKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=823"
  },
  {
    "text": "and click on Add Package. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=825"
  },
  {
    "text": "Now that the dependency is added, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=829"
  },
  {
    "text": "I'm going to commit this new dependency ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=832"
  },
  {
    "text": "from the Source Control menu ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=834"
  },
  {
    "text": "and push my changes to my branch.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=836"
  },
  {
    "text": "We setup a workflow in Xcode Cloud ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=851"
  },
  {
    "text": "that will start a new build when it receives a new commit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=854"
  },
  {
    "text": "from any branch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=857"
  },
  {
    "text": "So this new commit should initiate a new build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=858"
  },
  {
    "text": "Since this is the first time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=861"
  },
  {
    "text": "that we're adding this dependency, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=863"
  },
  {
    "text": "I expect that the build is going to fail ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=865"
  },
  {
    "text": "because Xcode Cloud does not have access ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=867"
  },
  {
    "text": "to the InvitationsKit repository. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=869"
  },
  {
    "text": "But Xcode Cloud provides an easy UI to address this issue. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=872"
  },
  {
    "text": "Let's head to Xcode Cloud in App Store Connect ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=877"
  },
  {
    "text": "and take a look at this new build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=879"
  },
  {
    "text": "As expected, the build has failed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=883"
  },
  {
    "text": "Xcode Cloud shows a warning banner ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=886"
  },
  {
    "text": "indicating that it has an issue with accessing the repository ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=888"
  },
  {
    "text": "and provides me with the option to grant access to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=892"
  },
  {
    "text": "I go ahead and click on the Manage Repositories button.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=896"
  },
  {
    "text": "It takes me to the settings page, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=903"
  },
  {
    "text": "where I can hover over the invitationsKit repository link ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=905"
  },
  {
    "text": "and then click on Grant.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=909"
  },
  {
    "text": "Depending on your source control service, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=916"
  },
  {
    "text": "you might be directed to approve Xcode Cloud ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=919"
  },
  {
    "text": "to access the repository. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=921"
  },
  {
    "text": "I went ahead and provided access to InvitationsKit in Github.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=923"
  },
  {
    "text": "Now, when I look back in Xcode Cloud, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=938"
  },
  {
    "text": "it shows Access Granted. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=941"
  },
  {
    "text": "I can now rerun the build.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=943"
  },
  {
    "text": "We expect this build to pass this time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=950"
  },
  {
    "text": "You can go back to the Additional Repositories section ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=954"
  },
  {
    "text": "under Settings to find out all the repositories ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=957"
  },
  {
    "text": "that have been connected. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=960"
  },
  {
    "text": "You can also reject access from there ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=962"
  },
  {
    "text": "if they are no longer being used. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=964"
  },
  {
    "text": "Xcode Cloud will detect newly referenced repositories ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=967"
  },
  {
    "text": "during a build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=971"
  },
  {
    "text": "When we add a dependency ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=972"
  },
  {
    "text": "that Xcode Cloud does not have access to, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=974"
  },
  {
    "text": "the UI provides a quick and easy way to fix this issue. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=977"
  },
  {
    "text": "This is valid for any Git operations ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=982"
  },
  {
    "text": "including cloning a repository inside a custom script ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=985"
  },
  {
    "text": "or referencing a Git submodule. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=989"
  },
  {
    "text": "This also applies to all the other ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=992"
  },
  {
    "text": "dependency management tools. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=994"
  },
  {
    "text": "In this demo, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=997"
  },
  {
    "text": "we used the new Swift Packages Collection feature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=998"
  },
  {
    "text": "to include an additional package. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1002"
  },
  {
    "text": "If you want to learn more about it, check out ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1004"
  },
  {
    "text": "\"Discover and curate Swift Packages using Collections.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1006"
  },
  {
    "text": "So far we have demonstrated to you how to customize your build ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1012"
  },
  {
    "text": "within Xcode Cloud. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1016"
  },
  {
    "text": "But sometimes you and your team may also want to collaborate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1018"
  },
  {
    "text": "through external services. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1021"
  },
  {
    "text": "For example, you may want to notify the beta testers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1023"
  },
  {
    "text": "when a new build is ready. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1026"
  },
  {
    "text": "This is where webhooks can come to help. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1028"
  },
  {
    "text": "Webhooks provide a way for Xcode Cloud ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1032"
  },
  {
    "text": "to communicate with your services. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1034"
  },
  {
    "text": "With its rich payload that is sent at different stages ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1037"
  },
  {
    "text": "of a build lifecycle, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1040"
  },
  {
    "text": "you will be able to further automate your workflow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1042"
  },
  {
    "text": "and improve your teams' collaborations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1045"
  },
  {
    "text": "Let's dive in to find out more about it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1048"
  },
  {
    "text": "You can set up webhooks in Xcode Cloud ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1051"
  },
  {
    "text": "to receive your real-time updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1053"
  },
  {
    "text": "at three different stages of your build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1056"
  },
  {
    "text": "First, when the build is created, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1059"
  },
  {
    "text": "either because you pushed some code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1062"
  },
  {
    "text": "or manually started a build; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1064"
  },
  {
    "text": "then, when the build is starting; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1066"
  },
  {
    "text": "finally, when the build has completed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1069"
  },
  {
    "text": "no matter if the build failed or succeeded. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1072"
  },
  {
    "text": "Let's see how to add a new webhook to our project ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1076"
  },
  {
    "text": "Adding webhooks is easy in Xcode Cloud. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1081"
  },
  {
    "text": "Click on Settings tab on the left column. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1085"
  },
  {
    "text": "Click on Webhooks and then the plus button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1088"
  },
  {
    "text": "Then it will ask you to enter the names of your webhook ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1094"
  },
  {
    "text": "and the URL to an app or services ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1097"
  },
  {
    "text": "that's capable of receiving and handling HTTP requests. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1100"
  },
  {
    "text": "Then, click on Save. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1105"
  },
  {
    "text": "Xcode Cloud allows you to create up to five webhooks per product. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1108"
  },
  {
    "text": "Make sure to provide a unique name ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1113"
  },
  {
    "text": "for each of your webhooks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1114"
  },
  {
    "text": "to ensure you can easily identify them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1116"
  },
  {
    "text": "The payload that is sent to your endpoint is a JSON blob ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1120"
  },
  {
    "text": "with information about your build and product, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1124"
  },
  {
    "text": "such as your App Store Connect application, your workflow, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1127"
  },
  {
    "text": "your product, your build, and more. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1133"
  },
  {
    "text": "You need to set up an app or a service to receive ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1141"
  },
  {
    "text": "and handle the payload that is sent over ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1144"
  },
  {
    "text": "via HttpRequest. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1146"
  },
  {
    "text": "Let's take a look at a sample code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1148"
  },
  {
    "text": "on how to achieve that using Swift on AWS Lambda. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1150"
  },
  {
    "text": "First, we receive the request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1156"
  },
  {
    "text": "Then decode its payload to a JSON object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1159"
  },
  {
    "text": "Then we check the name of the workflow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1163"
  },
  {
    "text": "and the build state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1166"
  },
  {
    "text": "If the workflow is a release workflow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1167"
  },
  {
    "text": "and the build state has succeeded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1170"
  },
  {
    "text": "we'll post a message to Twitter to let testers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1172"
  },
  {
    "text": "or beta users know it's available for testing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1175"
  },
  {
    "text": "Finally, we will return a 200 status code to acknowledge ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1180"
  },
  {
    "text": "that the webhook request has been successfully handled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1184"
  },
  {
    "text": "If you wish to learn more ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1188"
  },
  {
    "text": "about running Swift serverless functions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1190"
  },
  {
    "text": "check out this session in WWDC 2020. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1193"
  },
  {
    "text": "If your endpoint doesn't return a successful status code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1199"
  },
  {
    "text": "Xcode Cloud will try to send the request again. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1203"
  },
  {
    "text": "Xcode Cloud also makes it easy to inspect the content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1206"
  },
  {
    "text": "of the webhooks that were delivered ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1209"
  },
  {
    "text": "to your endpoint. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1211"
  },
  {
    "text": "You can go to Xcode Cloud in App Store Connect; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1214"
  },
  {
    "text": "click on your settings and the webhooks; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1218"
  },
  {
    "text": "select the webhook you wish to inspect. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1221"
  },
  {
    "text": "Then it shows you a list of deliveries ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1225"
  },
  {
    "text": "at different time stamps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1227"
  },
  {
    "text": "and select the one that interests you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1229"
  },
  {
    "text": "It shows you the request that was sent to your service ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1232"
  },
  {
    "text": "and the response that was received. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1235"
  },
  {
    "text": "There are so many things you can do with Xcode Cloud webhooks. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1239"
  },
  {
    "text": "Here are a few additional examples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1243"
  },
  {
    "text": "You can automatically create or resolve issues ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1246"
  },
  {
    "text": "from your bug-checking system; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1250"
  },
  {
    "text": "send notifications to a paging system when a build fails; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1252"
  },
  {
    "text": "initiate downstream builds ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1257"
  },
  {
    "text": "as part of a complex release workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1259"
  },
  {
    "text": "When it comes to extending your workflow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1263"
  },
  {
    "text": "using the exhaustive content of the webhook, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1265"
  },
  {
    "text": "the sky is the limit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1268"
  },
  {
    "text": "Let's recap on what we have learned in this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1271"
  },
  {
    "text": "First, we learned about how to pass in environment variables ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1274"
  },
  {
    "text": "for your build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1277"
  },
  {
    "text": "Then we demonstrated how to set up scripts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1278"
  },
  {
    "text": "to customize your build process and how to work ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1281"
  },
  {
    "text": "with additional repositories in your project. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1284"
  },
  {
    "text": "Finally, we learned how to set up webhooks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1288"
  },
  {
    "text": "to receive callbacks from Xcode Cloud ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1291"
  },
  {
    "text": "at different stages of build life cycle. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1293"
  },
  {
    "text": "We hope these features ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1296"
  },
  {
    "text": "can enhance your team's day-to-day workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1297"
  },
  {
    "text": "Thank you for watching. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1300"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10269/?time=1301"
  }
]