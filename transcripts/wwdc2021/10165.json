[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1"
  },
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=4"
  },
  {
    "text": "Hi, my name is Yagil Burowski, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=9"
  },
  {
    "text": "and I'm an engineer on the Location Technologies team at Apple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=12"
  },
  {
    "text": "In this talk, I'll cover the latest advancements, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=15"
  },
  {
    "text": "as well as the new features that are coming ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=18"
  },
  {
    "text": "to the Nearby Interaction framework this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=21"
  },
  {
    "text": "The Nearby Interaction framework makes it easy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=23"
  },
  {
    "text": "to take advantage of the unique capabilities of U1, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=26"
  },
  {
    "text": "Apple's chip for Ultra-Wideband technology, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=29"
  },
  {
    "text": "and enables creating precise ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=32"
  },
  {
    "text": "and spatially-aware interactions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=35"
  },
  {
    "text": "between nearby devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=37"
  },
  {
    "text": "It's the same technology that powers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=39"
  },
  {
    "text": "\"Precision Finding\" with AirTag ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=41"
  },
  {
    "text": "and the fluid handoff gestures ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=44"
  },
  {
    "text": "between iPhone and HomePod mini. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=46"
  },
  {
    "text": "This is what we'll cover in this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=48"
  },
  {
    "text": "We'll start with updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=51"
  },
  {
    "text": "to the user permission flow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=53"
  },
  {
    "text": "After that, we'll introduce new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=55"
  },
  {
    "text": "for running Nearby Interaction with compatible third-party hardware.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=58"
  },
  {
    "text": "And we'll finish with talking ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=64"
  },
  {
    "text": "about resources for app developers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=66"
  },
  {
    "text": "as well as accessory manufacturers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=68"
  },
  {
    "text": "for getting started with adopting these new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=70"
  },
  {
    "text": "in apps and third-party accessories. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=73"
  },
  {
    "text": "Before we dive in, for those of you who are new to Nearby Interaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=76"
  },
  {
    "text": "or just need a refresher, let's quickly recap ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=80"
  },
  {
    "text": "how you use the framework in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=83"
  },
  {
    "text": "You start with creating a session instance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=86"
  },
  {
    "text": "That's the main object through which you'll configure ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=90"
  },
  {
    "text": "and run your spatial interactions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=93"
  },
  {
    "text": "with nearby devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=96"
  },
  {
    "text": "Next, you'll need to designate a part of your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=98"
  },
  {
    "text": "to conform to the NISessionDelegate protocol. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=102"
  },
  {
    "text": "The delegate will receive updates from the framework.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=106"
  },
  {
    "text": "The next thing you need to do is ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=112"
  },
  {
    "text": "create a configuration object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=114"
  },
  {
    "text": "which will be a subclass of NIConfiguration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=117"
  },
  {
    "text": "For example, you can create ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=121"
  },
  {
    "text": "a NearbyPeerConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=123"
  },
  {
    "text": "when you want start a session between two iPhones ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=125"
  },
  {
    "text": "that are running your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=129"
  },
  {
    "text": "Once you call run on the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=131"
  },
  {
    "text": "with the configuration you had created, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=134"
  },
  {
    "text": "Nearby Interaction will start providing your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=137"
  },
  {
    "text": "a stream of NearbyObject updates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=140"
  },
  {
    "text": "each containing distance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=143"
  },
  {
    "text": "and, optionally, direction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=145"
  },
  {
    "text": "to nearby devices ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=148"
  },
  {
    "text": "that are actively participating in the session.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=149"
  },
  {
    "text": "If you're interested in a deeper dive ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=154"
  },
  {
    "text": "into the framework's APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=156"
  },
  {
    "text": "please watch last year's WWDC talk, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=158"
  },
  {
    "text": "\"Meet Nearby Interaction.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=161"
  },
  {
    "text": "To access data such as distance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=164"
  },
  {
    "text": "or direction to a nearby device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=167"
  },
  {
    "text": "your app needs to get the user's permission.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=169"
  },
  {
    "text": "So, let's talk about the improvements ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=174"
  },
  {
    "text": "to the user-permission flow we've made this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=176"
  },
  {
    "text": "This is the Nearby Interaction permission flow in iOS 14. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=179"
  },
  {
    "text": "The prompt will appear the first time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=183"
  },
  {
    "text": "your app runs a session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=186"
  },
  {
    "text": "in a new app lifetime. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=188"
  },
  {
    "text": "The options on the alert, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=191"
  },
  {
    "text": "\"Don't Allow\" or \"Allow Once,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=193"
  },
  {
    "text": "provide a very clear choice, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=196"
  },
  {
    "text": "but since this permission is one-time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=198"
  },
  {
    "text": "it can also lead to additional prompts ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=202"
  },
  {
    "text": "in certain situations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=204"
  },
  {
    "text": "So, this year, there's a new way to grant apps permission ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=207"
  },
  {
    "text": "to use Nearby Interaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=210"
  },
  {
    "text": "This is the new \"Nearby Interaction\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=214"
  },
  {
    "text": "permission prompt in iOS 15. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=216"
  },
  {
    "text": "It looks kind of similar, but it's different ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=218"
  },
  {
    "text": "in a couple of important ways. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=221"
  },
  {
    "text": "The system will automatically show the permission prompt ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=223"
  },
  {
    "text": "on the first time your app runs an NISession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=227"
  },
  {
    "text": "So, it's really important for you to make sure ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=230"
  },
  {
    "text": "that the timing of when you run your NISession ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=233"
  },
  {
    "text": "coincides with a clear user intent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=237"
  },
  {
    "text": "so it's easy for your users to understand ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=240"
  },
  {
    "text": "why a particular feature in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=244"
  },
  {
    "text": "requires access to Nearby Interaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=246"
  },
  {
    "text": "Let's take a closer look ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=250"
  },
  {
    "text": "at the new options on the prompt. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=251"
  },
  {
    "text": "The new \"OK\" option grants your app permission ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=254"
  },
  {
    "text": "while the app is in use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=258"
  },
  {
    "text": "Whether the user accepts or denies ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=260"
  },
  {
    "text": "your app's request to use Nearby Interaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=264"
  },
  {
    "text": "the permission prompt will not show again.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=266"
  },
  {
    "text": "Starting in iOS 15, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=270"
  },
  {
    "text": "apps that use Nearby Interaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=272"
  },
  {
    "text": "will appear in Settings. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=274"
  },
  {
    "text": "So, if users ever change their minds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=277"
  },
  {
    "text": "they can head over to the Settings app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=279"
  },
  {
    "text": "and change your app's \"Nearby Interaction\" access. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=281"
  },
  {
    "text": "Make sure to test for this scenario when developing your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=284"
  },
  {
    "text": "Let's summarize the new Nearby Interaction user permission model.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=290"
  },
  {
    "text": "The new permission prompt, when accepted, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=296"
  },
  {
    "text": "gives your app persistent permission ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=298"
  },
  {
    "text": "to use Nearby Interaction while the app is in use.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=300"
  },
  {
    "text": "The alert will present a usage description string, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=305"
  },
  {
    "text": "provided by you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=309"
  },
  {
    "text": "in your app's Info.plist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=311"
  },
  {
    "text": "In this purpose string, be clear and concise, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=313"
  },
  {
    "text": "and explain what are the awesome features in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=316"
  },
  {
    "text": "that need access to Nearby Interaction.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=319"
  },
  {
    "text": "After the prompt shows for the first and final time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=324"
  },
  {
    "text": "your app's name and icon will appear in the Settings app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=328"
  },
  {
    "text": "which means that users can change ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=334"
  },
  {
    "text": "your app's permission state at any time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=336"
  },
  {
    "text": "When your app does not have sufficient permission to use Nearby Interaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=339"
  },
  {
    "text": "your NISessions will be invalidated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=343"
  },
  {
    "text": "with a permission-related error code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=346"
  },
  {
    "text": "So, if a key functionality in your app relies on access ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=350"
  },
  {
    "text": "to Nearby Interaction, be sure to explain this clearly ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=353"
  },
  {
    "text": "to your users and guide them ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=357"
  },
  {
    "text": "to the Settings app when appropriate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=359"
  },
  {
    "text": "That was the new permission prompt in iOS 15.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=362"
  },
  {
    "text": "And now, we're excited to introduce some new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=367"
  },
  {
    "text": "that make it possible to use Nearby Interaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=370"
  },
  {
    "text": "with compatible third-party hardware. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=373"
  },
  {
    "text": "We wanted this API to work ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=375"
  },
  {
    "text": "with a wide range of accessories you may consider building. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=378"
  },
  {
    "text": "So, we based Nearby Interaction's ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=382"
  },
  {
    "text": "third-party hardware support ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=384"
  },
  {
    "text": "on standards we've been working on with industry groups.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=386"
  },
  {
    "text": "And to help you get started on prototyping, experimenting, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=391"
  },
  {
    "text": "and building your accessories, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=394"
  },
  {
    "text": "we've worked with the chipset manufacturers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=396"
  },
  {
    "text": "who are making available development kits ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=399"
  },
  {
    "text": "containing hardware and firmware ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=401"
  },
  {
    "text": "that is able to interoperate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=404"
  },
  {
    "text": "with U1 in iPhone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=406"
  },
  {
    "text": "So, alongside development kits, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=409"
  },
  {
    "text": "we're also making available sample app code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=412"
  },
  {
    "text": "that works out-of-the-box ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=415"
  },
  {
    "text": "with the hardware in the development kits. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=417"
  },
  {
    "text": "So, together, they can serve ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=419"
  },
  {
    "text": "as an excellent starting point for your project.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=422"
  },
  {
    "text": "And if you're an accessory manufacturer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=427"
  },
  {
    "text": "please check out the Nearby Interaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=429"
  },
  {
    "text": "Accessory Protocol Specification document ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=431"
  },
  {
    "text": "that will be available to you in \"Developer Preview\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=434"
  },
  {
    "text": "on the Apple developer website. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=437"
  },
  {
    "text": "Whether you just want to tinker with this exciting new technology, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=440"
  },
  {
    "text": "or you're ready to integrate Ultra Wideband ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=443"
  },
  {
    "text": "into your very own accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=446"
  },
  {
    "text": "let's look at a simple example ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=448"
  },
  {
    "text": "that illustrates how you use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=450"
  },
  {
    "text": "the Nearby Interaction API ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=453"
  },
  {
    "text": "with a third-party accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=454"
  },
  {
    "text": "Enabling different functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=457"
  },
  {
    "text": "based on the user's precise distance to an accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=459"
  },
  {
    "text": "can be a powerful way ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=462"
  },
  {
    "text": "to streamline interactions with that device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=464"
  },
  {
    "text": "So, let's say that you're building an accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=467"
  },
  {
    "text": "and you want to integrate Ultra Wideband into it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=469"
  },
  {
    "text": "to enable a set of features ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=473"
  },
  {
    "text": "that will really make it stand out. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=475"
  },
  {
    "text": "And since Ultra Wideband can give you precise distance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=478"
  },
  {
    "text": "you're planning to utilize it to keep track ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=482"
  },
  {
    "text": "of a couple of precise zones ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=485"
  },
  {
    "text": "or regions around the accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=487"
  },
  {
    "text": "So, let's say that you define a region ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=489"
  },
  {
    "text": "around the accessory that has a 1.5-meter radius, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=492"
  },
  {
    "text": "and another, larger one with a 3-meter radius. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=496"
  },
  {
    "text": "And let's say that you care about these specific distances ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=499"
  },
  {
    "text": "because, when the user enters ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=503"
  },
  {
    "text": "the larger region around the accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=505"
  },
  {
    "text": "you want to enable some functionality A. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=507"
  },
  {
    "text": "And when the user enters the smaller region, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=511"
  },
  {
    "text": "you want to enable functionality B.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=514"
  },
  {
    "text": "So, how do you actually achieve this in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=518"
  },
  {
    "text": "using the Nearby Interaction framework? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=520"
  },
  {
    "text": "First of all, Nearby Interaction expects your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=523"
  },
  {
    "text": "and your accessory to have some sort ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=526"
  },
  {
    "text": "of capability to exchange data between them.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=530"
  },
  {
    "text": "As for the particular technology ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=534"
  },
  {
    "text": "to use to exchange data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=537"
  },
  {
    "text": "that is entirely up to you and what your accessory does ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=539"
  },
  {
    "text": "and does not need to do. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=542"
  },
  {
    "text": "Suppose your accessory already supports Bluetooth. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=546"
  },
  {
    "text": "This will put you in a great spot ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=549"
  },
  {
    "text": "because you'll be able to utilize your existing Bluetooth capability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=551"
  },
  {
    "text": "for your data exchange requirement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=555"
  },
  {
    "text": "If your accessory is connected to the local network ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=558"
  },
  {
    "text": "or is securely connected to the internet, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=561"
  },
  {
    "text": "you're in great shape, too. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=564"
  },
  {
    "text": "That capability to send data back and forth between the app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=566"
  },
  {
    "text": "and the accessory will serve you for what you'll need to do next.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=570"
  },
  {
    "text": "Recall that when we wanted to start a session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=575"
  },
  {
    "text": "between two iPhones running your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=577"
  },
  {
    "text": "we created a NearbyPeerConfiguration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=579"
  },
  {
    "text": "To start a session with an accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=583"
  },
  {
    "text": "we'll create a NearbyAccessoryConfiguration.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=585"
  },
  {
    "text": "This is a new NIConfiguration type ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=590"
  },
  {
    "text": "in iOS 15. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=592"
  },
  {
    "text": "To instantiate an Accessory Configuration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=595"
  },
  {
    "text": "we need to provide it some configuration data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=598"
  },
  {
    "text": "describing the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=602"
  },
  {
    "text": "that the framework expects to receive ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=603"
  },
  {
    "text": "in a particular format ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=606"
  },
  {
    "text": "called Accessory Configuration Data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=608"
  },
  {
    "text": "But how do we get this configuration data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=612"
  },
  {
    "text": "and what is this particular format? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=614"
  },
  {
    "text": "U1-compatible Ultra-Wideband hardware, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=617"
  },
  {
    "text": "like the types you'll be able to get ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=620"
  },
  {
    "text": "from certified technology providers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=622"
  },
  {
    "text": "will know how to generate this configuration data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=625"
  },
  {
    "text": "upon request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=628"
  },
  {
    "text": "This means that code you're running ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=631"
  },
  {
    "text": "on the accessory itself ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=634"
  },
  {
    "text": "will need to generate this data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=636"
  },
  {
    "text": "and then send it over to your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=638"
  },
  {
    "text": "on your data channel. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=641"
  },
  {
    "text": "Let's look at a code example ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=645"
  },
  {
    "text": "for instantiating a NearbyAccessoryConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=647"
  },
  {
    "text": "with data received from an accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=650"
  },
  {
    "text": "Let's assume that setupAccessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=654"
  },
  {
    "text": "is a helper method I wrote in my app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=656"
  },
  {
    "text": "Whenever I get the Accessory Configuration Data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=660"
  },
  {
    "text": "from an accessory, there's logic in my app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=663"
  },
  {
    "text": "that routes it to this function, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=666"
  },
  {
    "text": "along with the accessory's name. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=668"
  },
  {
    "text": "At this point, I can create ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=672"
  },
  {
    "text": "an NINearbyAccessoryConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=674"
  },
  {
    "text": "using the data I received from the accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=677"
  },
  {
    "text": "You'll notice that I create my configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=680"
  },
  {
    "text": "inside a do/catch statement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=683"
  },
  {
    "text": "I do this because if the data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=687"
  },
  {
    "text": "I received from the accessory is invalid in some way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=689"
  },
  {
    "text": "the NIConfiguration init method ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=693"
  },
  {
    "text": "will throw an exception. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=696"
  },
  {
    "text": "But if the configuration object is created successfully, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=699"
  },
  {
    "text": "it means that the data I received from the accessory is ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=703"
  },
  {
    "text": "in the right format and can now be used. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=707"
  },
  {
    "text": "The ultimate reason for creating a configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=710"
  },
  {
    "text": "is for using it to run a session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=713"
  },
  {
    "text": "But before I do that, there's a good opportunity for me ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=716"
  },
  {
    "text": "to cache some useful data for later use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=720"
  },
  {
    "text": "The new NearbyAccessoryConfiguration type ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=723"
  },
  {
    "text": "has a DiscoveryToken property for the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=726"
  },
  {
    "text": "that the framework automatically populates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=730"
  },
  {
    "text": "In addition, in the setupAccessory function I defined, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=733"
  },
  {
    "text": "I also have the accessory's name. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=737"
  },
  {
    "text": "So, it could be really useful to save the discovery token ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=741"
  },
  {
    "text": "alongside the accessory's name at this stage ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=745"
  },
  {
    "text": "because, later on, when I start receiving ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=749"
  },
  {
    "text": "NearbyObject updates about this accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=752"
  },
  {
    "text": "I would be able to use the token and the name ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=755"
  },
  {
    "text": "to correlate the updates back to this accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=758"
  },
  {
    "text": "and then display more relevant and rich UI.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=762"
  },
  {
    "text": "Okay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=767"
  },
  {
    "text": "So, we have valid configuration data from the accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=768"
  },
  {
    "text": "and we used it to create ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=771"
  },
  {
    "text": "an accessory configuration object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=773"
  },
  {
    "text": "Now, we can get ready to interact with this accessory.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=776"
  },
  {
    "text": "To manage the interaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=782"
  },
  {
    "text": "we'll need an NISession instance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=784"
  },
  {
    "text": "and we'll need to set the session's delegate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=786"
  },
  {
    "text": "To start the session, we simply call ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=789"
  },
  {
    "text": "the \"run\" function on the session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=792"
  },
  {
    "text": "using the accessory configuration object we created.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=795"
  },
  {
    "text": "Just like Nearby Interaction needed configuration data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=799"
  },
  {
    "text": "from the accessory, the accessory also needs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=803"
  },
  {
    "text": "configuration data from Nearby Interaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=806"
  },
  {
    "text": "in order to know how to configure itself. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=808"
  },
  {
    "text": "This data needs to be in a format ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=811"
  },
  {
    "text": "called \"Shareable Configuration Data.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=814"
  },
  {
    "text": "When you run a session with an accessory configuration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=817"
  },
  {
    "text": "Nearby Interaction will provide ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=821"
  },
  {
    "text": "the Shareable Configuration Data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=823"
  },
  {
    "text": "to your app through a delegate callback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=825"
  },
  {
    "text": "And just like we used the data channel ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=829"
  },
  {
    "text": "to receive the accessory's configuration data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=831"
  },
  {
    "text": "here, we'll use it again ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=835"
  },
  {
    "text": "to send the shareable configuration data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=837"
  },
  {
    "text": "back to the accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=839"
  },
  {
    "text": "To make things more concrete, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=841"
  },
  {
    "text": "let's look at a code example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=843"
  },
  {
    "text": "Shareable Configuration Data is provided to your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=845"
  },
  {
    "text": "through the didGenerate delegate callback, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=848"
  },
  {
    "text": "which is a new delegate callback in iOS 15.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=851"
  },
  {
    "text": "Here is a possible implementation of this callback in an app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=856"
  },
  {
    "text": "The framework provides the Shareable Configuration Data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=859"
  },
  {
    "text": "and also indicates which accessory it should go to, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=863"
  },
  {
    "text": "which is really useful in case you're interacting ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=866"
  },
  {
    "text": "with multiple accessories. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=870"
  },
  {
    "text": "You should plan to send the data to the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=872"
  },
  {
    "text": "as soon as possible over your data channel. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=875"
  },
  {
    "text": "On a general note, managing data connections ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=879"
  },
  {
    "text": "to different accessories can take on many different forms, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=882"
  },
  {
    "text": "all depending on your use case. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=885"
  },
  {
    "text": "For simplicity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=888"
  },
  {
    "text": "let's say that in my app's architecture, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=890"
  },
  {
    "text": "I chose to keep an independent data connection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=892"
  },
  {
    "text": "for each accessory I'm interacting with. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=895"
  },
  {
    "text": "And to keep my code nicely organized, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=898"
  },
  {
    "text": "I defined a helper function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=901"
  },
  {
    "text": "that gives me back a connection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=903"
  },
  {
    "text": "based on the NearbyObject I give it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=905"
  },
  {
    "text": "Once I get a reference to the connection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=908"
  },
  {
    "text": "I'll use it to send the Shareable Configuration Data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=910"
  },
  {
    "text": "to the accessory right away. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=914"
  },
  {
    "text": "It's important to optimize your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=917"
  },
  {
    "text": "for sending the shareable configuration data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=920"
  },
  {
    "text": "to the accessory with as little delay as possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=922"
  },
  {
    "text": "If the ShareableConfigurationData is not sent quickly enough, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=925"
  },
  {
    "text": "your session may timeout. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=929"
  },
  {
    "text": "A timeout in a session with an accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=931"
  },
  {
    "text": "will be communicated to your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=934"
  },
  {
    "text": "through the didRemove delegate callback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=936"
  },
  {
    "text": "Let's look at how you might handle this scenario.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=940"
  },
  {
    "text": "When Nearby Interaction gives me the didRemove callback, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=944"
  },
  {
    "text": "shown on the screen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=947"
  },
  {
    "text": "I'll first check the \"reason\" parameter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=949"
  },
  {
    "text": "If the reason is .timeout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=952"
  },
  {
    "text": "and I have high confidence ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=954"
  },
  {
    "text": "that the accessory may still be nearby, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=956"
  },
  {
    "text": "I can attempt to retry to interact with it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=959"
  },
  {
    "text": "To decide whether or not I should go ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=964"
  },
  {
    "text": "into a \"retry flow\" with this accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=966"
  },
  {
    "text": "I defined a helper function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=968"
  },
  {
    "text": "that contains specialized logic ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=971"
  },
  {
    "text": "that helps me make this decision. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=973"
  },
  {
    "text": "You can imagine that conditions like ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=976"
  },
  {
    "text": "\"How many times have I retried without being successful?\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=979"
  },
  {
    "text": "or \"Has the accessory notified me it has stopped?\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=982"
  },
  {
    "text": "or other similar questions can be a part of decisions like this.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=985"
  },
  {
    "text": "If I do decide to retry, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=991"
  },
  {
    "text": "all I have to do is run the session again ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=993"
  },
  {
    "text": "with the same configuration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=996"
  },
  {
    "text": "Keep in mind, that the cached configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=999"
  },
  {
    "text": "will only remain valid as long as the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1002"
  },
  {
    "text": "on the accessory was not terminated. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1005"
  },
  {
    "text": "If the session was terminated, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1008"
  },
  {
    "text": "I'll have to go through the same flow ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1010"
  },
  {
    "text": "I used to create and run the session the first time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1013"
  },
  {
    "text": "Keep in mind that sessions on the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1016"
  },
  {
    "text": "is something the code running on the accessory has to manage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1019"
  },
  {
    "text": "and can be done in many different ways, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1023"
  },
  {
    "text": "all depending on your use case.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1025"
  },
  {
    "text": "Okay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1029"
  },
  {
    "text": "You sent the Shareable Configuration Data to your accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1030"
  },
  {
    "text": "and you even have logic to handle retries if needed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1034"
  },
  {
    "text": "What's next? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1037"
  },
  {
    "text": "Just like with the Accessory Configuration Data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1039"
  },
  {
    "text": "U1-compatible hardware in the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1042"
  },
  {
    "text": "will automatically know what to do ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1045"
  },
  {
    "text": "with the Shareable Configuration Data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1048"
  },
  {
    "text": "once your accessory code provides it to it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1050"
  },
  {
    "text": "So, once the code running on the accessory receives the data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1054"
  },
  {
    "text": "it needs to provide it as-is, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1058"
  },
  {
    "text": "and as quickly as possible, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1060"
  },
  {
    "text": "to the Ultra-Wideband hardware on board. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1062"
  },
  {
    "text": "You might be wondering-- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1066"
  },
  {
    "text": "how will the Ultra-Wideband hardware in the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1067"
  },
  {
    "text": "know to generate or consume the configuration data? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1070"
  },
  {
    "text": "Both the Accessory Configuration Data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1074"
  },
  {
    "text": "and the Shareable Configuration Data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1076"
  },
  {
    "text": "are defined in a specification document ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1079"
  },
  {
    "text": "we published earlier this spring. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1082"
  },
  {
    "text": "The document is intended ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1086"
  },
  {
    "text": "for chipset and module manufactures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1087"
  },
  {
    "text": "and it contains the necessary details ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1090"
  },
  {
    "text": "for creating Ultra-Wideband solutions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1093"
  },
  {
    "text": "that use industry standards ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1096"
  },
  {
    "text": "to interoperate with U1 in iPhone.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1097"
  },
  {
    "text": "On top of the interoperability specification ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1102"
  },
  {
    "text": "for chipset manufacturers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1105"
  },
  {
    "text": "we are also releasing a specification ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1107"
  },
  {
    "text": "targeted at accessory manufacturers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1110"
  },
  {
    "text": "So, if you're hoping to build an accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1112"
  },
  {
    "text": "that contains Ultra-Wideband hardware, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1115"
  },
  {
    "text": "and you want to interact with it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1117"
  },
  {
    "text": "using the Nearby Interaction framework in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1119"
  },
  {
    "text": "this document is for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1123"
  },
  {
    "text": "You'll find it on the developer website, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1125"
  },
  {
    "text": "alongside additional resources ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1127"
  },
  {
    "text": "for getting started. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1130"
  },
  {
    "text": "This is where we left off. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1132"
  },
  {
    "text": "We had just sent the Shareable Configuration Data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1134"
  },
  {
    "text": "to the accessory over the data channel. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1137"
  },
  {
    "text": "Now, let's see what happens ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1141"
  },
  {
    "text": "once the code on the accessory receives it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1142"
  },
  {
    "text": "and provides it to the Ultra-Wideband hardware.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1145"
  },
  {
    "text": "After receiving the shareable configuration data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1149"
  },
  {
    "text": "the Ultra-Wideband hardware on the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1153"
  },
  {
    "text": "will immediately start running ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1156"
  },
  {
    "text": "in the appropriate configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1158"
  },
  {
    "text": "for interacting with the NISession in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1160"
  },
  {
    "text": "And if both the accessory and the iPhone running your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1164"
  },
  {
    "text": "are nearby one another, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1168"
  },
  {
    "text": "the session will start providing your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1169"
  },
  {
    "text": "a stream of NearbyObject updates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1172"
  },
  {
    "text": "containing distance and, optionally, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1174"
  },
  {
    "text": "direction to the accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1177"
  },
  {
    "text": "You can even interact with several accessories simultaneously, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1180"
  },
  {
    "text": "by creating and running a session for each one. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1184"
  },
  {
    "text": "Depending on the hardware features on the accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1187"
  },
  {
    "text": "you may also be able to get equivalent proximity updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1191"
  },
  {
    "text": "in the code running on the accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1194"
  },
  {
    "text": "Once you get NearbyObject updates from the framework, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1196"
  },
  {
    "text": "what do you do with them? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1200"
  },
  {
    "text": "As a reminder, we wanted to build an experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1202"
  },
  {
    "text": "in which the app and the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1206"
  },
  {
    "text": "enable functionality A ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1209"
  },
  {
    "text": "when the user enters the larger region, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1210"
  },
  {
    "text": "and enable functionality B ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1213"
  },
  {
    "text": "when the user enters the smaller region around the accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1215"
  },
  {
    "text": "Let's look at a code example that shows how you could do this ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1218"
  },
  {
    "text": "using NearbyObject updates in your iOS app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1222"
  },
  {
    "text": "When the session between the app and the accessory is running, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1226"
  },
  {
    "text": "updates about the accessory are delivered to the session's delegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1230"
  },
  {
    "text": "through the didUpdate delegate callback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1234"
  },
  {
    "text": "First, I'll grab a reference to the nearby object ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1238"
  },
  {
    "text": "for which the framework is giving me an update. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1241"
  },
  {
    "text": "Next, I'll create a local variable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1244"
  },
  {
    "text": "with the distance to this object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1247"
  },
  {
    "text": "which the framework is providing in meters. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1249"
  },
  {
    "text": "The next thing I'll do is provide this data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1252"
  },
  {
    "text": "to a helper function I have in my app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1256"
  },
  {
    "text": "I called getSmoothedDistance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1258"
  },
  {
    "text": "I defined this function in my app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1262"
  },
  {
    "text": "to help me guard against rapid changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1264"
  },
  {
    "text": "in the distance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1267"
  },
  {
    "text": "For example, in cases where the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1268"
  },
  {
    "text": "makes sudden movements, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1271"
  },
  {
    "text": "or they happen to be standing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1273"
  },
  {
    "text": "on the boundary between the zones. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1275"
  },
  {
    "text": "Lastly, I can check to see ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1278"
  },
  {
    "text": "if the user's distance from the accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1280"
  },
  {
    "text": "crossed my predefined thresholds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1283"
  },
  {
    "text": "Here, I can choose to enableFunctionalityA ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1286"
  },
  {
    "text": "or FunctionalityB based on the current distance.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1289"
  },
  {
    "text": "If you're interested in learning more about designing experiences ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1294"
  },
  {
    "text": "based on distance and direction between devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1298"
  },
  {
    "text": "check out the \"Design for Spatial Interaction\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1301"
  },
  {
    "text": "WWDC talk from this year.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1304"
  },
  {
    "text": "So, let's summarize what we discussed in this session.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1308"
  },
  {
    "text": "We talked about how the new permission model allows your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1313"
  },
  {
    "text": "to access Nearby Interaction while the app is in use.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1317"
  },
  {
    "text": "We took a deep dive into the brand-new world ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1322"
  },
  {
    "text": "of Nearby Interaction-enabled third-party accessories, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1325"
  },
  {
    "text": "and what APIs you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1328"
  },
  {
    "text": "to build spatial interactions with your very own accessory. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1330"
  },
  {
    "text": "We also discussed third-party development kits, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1334"
  },
  {
    "text": "available from supported technology providers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1337"
  },
  {
    "text": "and iOS app code that you can use to get started ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1340"
  },
  {
    "text": "with your project right away. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1344"
  },
  {
    "text": "So, go on ahead, give it a try, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1346"
  },
  {
    "text": "and start experimenting and prototyping your use cases.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1348"
  },
  {
    "text": "And when you're ready to adopt Ultra Wideband in your accessory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1352"
  },
  {
    "text": "read the relevant specification documents, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1356"
  },
  {
    "text": "available on the Apple developer website. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1358"
  },
  {
    "text": "That's it for this year's Nearby Interaction updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1362"
  },
  {
    "text": "Thanks for tuning in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1365"
  },
  {
    "text": "We hope this session was helpful ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1366"
  },
  {
    "text": "and contained all the information you need ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1368"
  },
  {
    "text": "to get started with building some amazing apps and accessories. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1370"
  },
  {
    "text": "[upbeat music]",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10165/?time=1374"
  }
]