[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=2"
  },
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=5"
  },
  {
    "text": "Hi. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=9"
  },
  {
    "text": "My name is Peikang, and I’m from Video Coding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=10"
  },
  {
    "text": "and the Processing team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=13"
  },
  {
    "text": "Welcome to “Exploring low-latency video encoding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=14"
  },
  {
    "text": "with Video Toolbox.” ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=17"
  },
  {
    "text": "The low-latency encoding is very important ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=20"
  },
  {
    "text": "for many video applications, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=22"
  },
  {
    "text": "especially real-time video communication apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=24"
  },
  {
    "text": "In this talk, I’m going to introduce ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=27"
  },
  {
    "text": "a new encoding mode in Video Toolbox ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=30"
  },
  {
    "text": "to achieve low-latency encoding. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=32"
  },
  {
    "text": "The goal of this new mode is to optimize ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=35"
  },
  {
    "text": "the existing encoder pipeline for real-time applications. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=38"
  },
  {
    "text": "So what does a real-time video application require? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=42"
  },
  {
    "text": "We need to minimize the end-to-end latency ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=47"
  },
  {
    "text": "in the communication so that people ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=49"
  },
  {
    "text": "won’t be talking over each other.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=51"
  },
  {
    "text": "We need to enhance the interoperability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=54"
  },
  {
    "text": "by letting the video apps capable ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=57"
  },
  {
    "text": "of communicating with more devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=59"
  },
  {
    "text": "The encoder pipeline should be efficient ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=61"
  },
  {
    "text": "when there are more than one recipients in the call.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=64"
  },
  {
    "text": "The app needs to present the video ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=68"
  },
  {
    "text": "in its best visual quality.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=70"
  },
  {
    "text": "We need a reliable mechanism to recover ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=73"
  },
  {
    "text": "the communication from errors introduced by network loss.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=75"
  },
  {
    "text": "The low-latency video encoding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=80"
  },
  {
    "text": "that I’m going to talk about today ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=82"
  },
  {
    "text": "will optimize in all these aspects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=84"
  },
  {
    "text": "With this mode, your real-time application ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=87"
  },
  {
    "text": "can achieve new levels of performance.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=89"
  },
  {
    "text": "In this talk, first I’m going to give ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=93"
  },
  {
    "text": "an overview of low-latency video encoding. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=96"
  },
  {
    "text": "We can have the basic idea about how we achieve ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=99"
  },
  {
    "text": "low latency in the pipeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=102"
  },
  {
    "text": "Then I’m going to show how to use VTCompressionSession APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=105"
  },
  {
    "text": "to build the pipeline and encode with low-latency mode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=109"
  },
  {
    "text": "Finally, I will talk about multiple features ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=114"
  },
  {
    "text": "we are introducing in low-latency mode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=117"
  },
  {
    "text": "Let me first give an overview on low-latency video encoding. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=120"
  },
  {
    "text": "Here is a brief diagram of a video encoder pipeline ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=125"
  },
  {
    "text": "on Apple’s platform. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=128"
  },
  {
    "text": "The Video Toolbox takes the CVImagebuffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=130"
  },
  {
    "text": "as the input image. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=133"
  },
  {
    "text": "It asks the video encoder ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=135"
  },
  {
    "text": "to perform compression algorithms ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=137"
  },
  {
    "text": "such as H.264 to reduce the size of raw data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=139"
  },
  {
    "text": "The output compressed data is wrapped ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=144"
  },
  {
    "text": "in CMSampleBuffer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=146"
  },
  {
    "text": "and it can be transmitted through network ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=148"
  },
  {
    "text": "for video communication. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=150"
  },
  {
    "text": "As we may notice from the previous diagram, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=153"
  },
  {
    "text": "the end-to-end latency can be affected ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=156"
  },
  {
    "text": "by two factors: the processing time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=158"
  },
  {
    "text": "and the network transmission time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=161"
  },
  {
    "text": "To minimize the processing time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=164"
  },
  {
    "text": "the low-latency mode eliminates frame reordering. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=167"
  },
  {
    "text": "A one in, one out encoding pattern is followed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=170"
  },
  {
    "text": "Also, the rate controller in this mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=174"
  },
  {
    "text": "has a faster adaptation in response ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=177"
  },
  {
    "text": "to the network change, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=180"
  },
  {
    "text": "so the delay caused by network congestion ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=181"
  },
  {
    "text": "is minimized as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=184"
  },
  {
    "text": "With these two optimizations, we can already see ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=186"
  },
  {
    "text": "obvious performance improvements compared with the default mode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=190"
  },
  {
    "text": "The low-latency encoding can reduce the delay ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=194"
  },
  {
    "text": "of up to 100 milliseconds for a 720p 30fps video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=197"
  },
  {
    "text": "Such saving can be critical for video conferencing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=201"
  },
  {
    "text": "As we reduce the latency, we can achieve ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=206"
  },
  {
    "text": "a more efficient encoding pipeline ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=209"
  },
  {
    "text": "for real-time communications ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=211"
  },
  {
    "text": "like video conferencing and live broadcasting.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=213"
  },
  {
    "text": "Also, the low-latency mode always uses ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=217"
  },
  {
    "text": "a hardware-accelerated video encoder ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=220"
  },
  {
    "text": "in order to save powers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=223"
  },
  {
    "text": "Note, the supported video codec type ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=225"
  },
  {
    "text": "in this mode is H.264, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=228"
  },
  {
    "text": "and we’re bringing this feature on both iOS and macOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=231"
  },
  {
    "text": "Next, I want to talk about how to use low-latency mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=236"
  },
  {
    "text": "with Video Toolbox. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=240"
  },
  {
    "text": "I’m going to first recap the use of VTCompressionSession ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=242"
  },
  {
    "text": "and then show you the step ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=246"
  },
  {
    "text": "we need to enable low-latency encoding. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=248"
  },
  {
    "text": "When we use VTCompressionSession, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=251"
  },
  {
    "text": "the first thing is to create the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=254"
  },
  {
    "text": "with VTCompressionSessionCreate API.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=256"
  },
  {
    "text": "We can optionally config the session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=261"
  },
  {
    "text": "such as target bit rate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=263"
  },
  {
    "text": "through VTSessionSetProperty API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=265"
  },
  {
    "text": "If the configuration is not provided, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=268"
  },
  {
    "text": "the encoder will operate with the default behavior.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=271"
  },
  {
    "text": "After the session is created and properly configured, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=275"
  },
  {
    "text": "we can pass the CVImageBuffer to the session with ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=279"
  },
  {
    "text": "VTCompressionSessionEncodeFrame call. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=282"
  },
  {
    "text": "The encoded result can be retrieved ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=286"
  },
  {
    "text": "from the output handler ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=288"
  },
  {
    "text": "provided during the session creation.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=290"
  },
  {
    "text": "Enabling low-latency encoding ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=293"
  },
  {
    "text": "in the compression session is easy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=295"
  },
  {
    "text": "The only change we need is in the session creation.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=298"
  },
  {
    "text": "Here is a code snippet showing how to do that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=302"
  },
  {
    "text": "First we need a CFMutableDictionary ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=306"
  },
  {
    "text": "for the encoderSpecification. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=308"
  },
  {
    "text": "The encoderSpecification is used to specify ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=311"
  },
  {
    "text": "a particular video encoder that the session must use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=314"
  },
  {
    "text": "And then we need to set EnableLowLatencyRateControl flag ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=318"
  },
  {
    "text": "in the encoderSpecification.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=322"
  },
  {
    "text": "Finally, we need to give this encoderSpecification ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=325"
  },
  {
    "text": "to VTCompressionSessionCreate, and the compression session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=328"
  },
  {
    "text": "will be operating in low-latency mode.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=332"
  },
  {
    "text": "The configuration step is the same as usual. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=336"
  },
  {
    "text": "For example, we can set the target bit rate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=339"
  },
  {
    "text": "with AverageBitRate property.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=342"
  },
  {
    "text": "OK, we’ve covered the basics of the low-latency mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=345"
  },
  {
    "text": "with Video Toolbox. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=349"
  },
  {
    "text": "I’d like to move on to the new features ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=351"
  },
  {
    "text": "in this mode that can further help you ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=353"
  },
  {
    "text": "develop a real-time video application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=355"
  },
  {
    "text": "So far, we’ve talked about the latency benefit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=359"
  },
  {
    "text": "by using the low-latency mode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=361"
  },
  {
    "text": "The rest of the benefits can be achieved ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=364"
  },
  {
    "text": "by the features I’m going introduce.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=367"
  },
  {
    "text": "The first feature is the new profiles. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=370"
  },
  {
    "text": "We enhanced the interoperability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=373"
  },
  {
    "text": "by adding two new profiles to the pipeline.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=375"
  },
  {
    "text": "And we are also excited to talk about temporal scalability. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=380"
  },
  {
    "text": "This feature can be very helpful in video conferencing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=384"
  },
  {
    "text": "You can now have a fine-grained control ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=388"
  },
  {
    "text": "over the image quality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=390"
  },
  {
    "text": "with max frame quantization parameter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=392"
  },
  {
    "text": "Last, we want to improve the error resilience ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=395"
  },
  {
    "text": "by adding the support of long-term reference.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=398"
  },
  {
    "text": "Let’s talk about the new profile support. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=402"
  },
  {
    "text": "Profile defines a group of coding algorithms ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=405"
  },
  {
    "text": "that the decoder is capable to support. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=407"
  },
  {
    "text": "In order to communicate with the receiver side, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=411"
  },
  {
    "text": "the encoded bitstream should comply ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=414"
  },
  {
    "text": "with the specific profile that the decoder supports.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=416"
  },
  {
    "text": "Here in Video Toolbox, we support a bunch of profiles, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=420"
  },
  {
    "text": "such as baseline profile, main profile, and high profile.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=424"
  },
  {
    "text": "Today we added two new profiles to the family: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=429"
  },
  {
    "text": "constrained baseline profile, CBP, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=433"
  },
  {
    "text": "and constrained high profile, CHP.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=435"
  },
  {
    "text": "CBP is primarily used for low-cost applications ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=439"
  },
  {
    "text": "and CHP, on the other hand, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=443"
  },
  {
    "text": "has more advanced algorithms for better compression ratio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=445"
  },
  {
    "text": "You should check the decoder capabilities ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=449"
  },
  {
    "text": "in order to know which profile should be used.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=451"
  },
  {
    "text": "To request CBP, simply set ProfileLevel ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=455"
  },
  {
    "text": "session property to ContrainedBaseLine_AutoLevel.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=459"
  },
  {
    "text": "Similarly, we can set the profile level ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=463"
  },
  {
    "text": "to ContrainedHigh_AutoLevel to use CHP.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=466"
  },
  {
    "text": "Now let’s talk about temporal scalability. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=470"
  },
  {
    "text": "We can use temporal scalability to enhance the efficiency ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=474"
  },
  {
    "text": "for multi-party video calls.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=477"
  },
  {
    "text": "Let us consider a simple, three-party ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=481"
  },
  {
    "text": "video conferencing scenario. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=483"
  },
  {
    "text": "In this model, receiver \"A\" has ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=485"
  },
  {
    "text": "a lower bandwidth of 600kbps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=487"
  },
  {
    "text": "and receiver B has a higher bandwidth ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=491"
  },
  {
    "text": "of 1,000kbps.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=493"
  },
  {
    "text": "Normally, the sender needs to encode two sets of bitstreams ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=496"
  },
  {
    "text": "in order to meet the downlink bandwidth ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=500"
  },
  {
    "text": "of each receiver side. This may not be optimal.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=503"
  },
  {
    "text": "The model can be more efficient with temporal scalability, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=508"
  },
  {
    "text": "where the sender only needs to encode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=512"
  },
  {
    "text": "one single bitstream but can be later divided ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=514"
  },
  {
    "text": "into two layers.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=517"
  },
  {
    "text": "Let me show you how this process works.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=520"
  },
  {
    "text": "Here is a sequence of encoded video frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=524"
  },
  {
    "text": "where each of the frames uses the previous frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=528"
  },
  {
    "text": "as predictive reference.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=531"
  },
  {
    "text": "We can pull half of the frames into another layer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=534"
  },
  {
    "text": "and we can change the reference so that only the frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=538"
  },
  {
    "text": "in the original layer are used for prediction.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=541"
  },
  {
    "text": "The original layer is called base layer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=545"
  },
  {
    "text": "and the new constructed layer is called enhancement layer.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=548"
  },
  {
    "text": "The enhancement layer can be used as a supplement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=553"
  },
  {
    "text": "of the base layer in order to improve the frame rate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=556"
  },
  {
    "text": "For receiver \"A,\" we can send base layer frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=560"
  },
  {
    "text": "because the base layer itself is decodable already. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=563"
  },
  {
    "text": "And more importantly, since the base layer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=567"
  },
  {
    "text": "contains only half of the frames, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=570"
  },
  {
    "text": "the transmitted data rate will be low.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=573"
  },
  {
    "text": "On the other hand, receiver B can enjoy ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=577"
  },
  {
    "text": "a smoother video since it has a sufficient bandwidth ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=580"
  },
  {
    "text": "to receive base layer frames and enhancement layer frames.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=583"
  },
  {
    "text": "Let me show you the videos encoded ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=588"
  },
  {
    "text": "using temporal scalability. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=590"
  },
  {
    "text": "I’m going to play two videos, one from the base layer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=593"
  },
  {
    "text": "and the other from the base layer together ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=597"
  },
  {
    "text": "with the enhancement layer.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=599"
  },
  {
    "text": "The base layer itself can be played normally, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=602"
  },
  {
    "text": "but at the same time, we may notice the video ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=605"
  },
  {
    "text": "is not quite smooth.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=608"
  },
  {
    "text": "We can immediately see the difference ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=611"
  },
  {
    "text": "if we play the second video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=613"
  },
  {
    "text": "The right video has a higher frame rate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=616"
  },
  {
    "text": "compared with the left one ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=618"
  },
  {
    "text": "because it contains both base layer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=619"
  },
  {
    "text": "and enhancement layer.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=621"
  },
  {
    "text": "The left video has 50% of the input frame rate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=624"
  },
  {
    "text": "and it uses 60% of the target bit rate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=628"
  },
  {
    "text": "These two videos only require the encoder ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=631"
  },
  {
    "text": "to encode one single bitstream at one time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=634"
  },
  {
    "text": "This will be much more power efficient ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=637"
  },
  {
    "text": "when we are doing multi-party video conferencing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=640"
  },
  {
    "text": "Another benefit of temporal scalability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=644"
  },
  {
    "text": "is error resilience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=646"
  },
  {
    "text": "As we can see, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=648"
  },
  {
    "text": "the frames in the enhancement layer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=650"
  },
  {
    "text": "are not used for prediction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=652"
  },
  {
    "text": "so there is no dependency on these frames.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=654"
  },
  {
    "text": "This would mean if one or more enhancement layer frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=658"
  },
  {
    "text": "are dropped during network transmission, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=661"
  },
  {
    "text": "other frames won’t be affected. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=664"
  },
  {
    "text": "This makes the whole session more robust.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=667"
  },
  {
    "text": "The way to enable temporal scalability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=671"
  },
  {
    "text": "is pretty straightforward. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=673"
  },
  {
    "text": "We created a new session property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=675"
  },
  {
    "text": "in low-latency mode called BaseLayerFrameRateFraction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=677"
  },
  {
    "text": "Simply set this property to 0.5, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=682"
  },
  {
    "text": "meaning half of the input frames are assigned ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=686"
  },
  {
    "text": "to base layer and the rest are assigned ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=688"
  },
  {
    "text": "to enhancement layer.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=691"
  },
  {
    "text": "You can check the layer information ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=694"
  },
  {
    "text": "from the sample buffer attachment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=696"
  },
  {
    "text": "For base layer frames, the CMSampleAttachmentKey_ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=698"
  },
  {
    "text": "IsDependedOnByOthers will be true, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=702"
  },
  {
    "text": "and otherwise it will be false.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=706"
  },
  {
    "text": "We also have the option to set the target bit rate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=709"
  },
  {
    "text": "for each layer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=712"
  },
  {
    "text": "Remember that we use the session property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=714"
  },
  {
    "text": "AverageBitRate to config the target bit rate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=716"
  },
  {
    "text": "After the target bit rate is configured, we can set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=721"
  },
  {
    "text": "the new BaseLayerBitRateFraction property ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=724"
  },
  {
    "text": "to control the percentage of the target bit rate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=727"
  },
  {
    "text": "needed for the base layer.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=729"
  },
  {
    "text": "If this property is not set, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=732"
  },
  {
    "text": "a default value of 0.6 will be used. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=734"
  },
  {
    "text": "And we recommend the base layer bit rate fraction ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=738"
  },
  {
    "text": "should range from 0.6 to 0.8.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=741"
  },
  {
    "text": "Now, let’s move to max frame quantization parameter, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=746"
  },
  {
    "text": "or max frame QP.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=750"
  },
  {
    "text": "Frame QP is used to regulate image quality and data rate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=753"
  },
  {
    "text": "We can use low-frame QP ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=759"
  },
  {
    "text": "to generate a high-quality image. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=761"
  },
  {
    "text": "The image size will be large in this case.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=763"
  },
  {
    "text": "On the other hand, we can use a high-frame QP ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=767"
  },
  {
    "text": "to generate an image in low quality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=770"
  },
  {
    "text": "but with smaller size.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=773"
  },
  {
    "text": "In low-latency mode, the encoder adjusts frame QP ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=776"
  },
  {
    "text": "using factors such as image complexity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=779"
  },
  {
    "text": "input frame rate, video motion ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=782"
  },
  {
    "text": "in order to produce the best visual quality ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=784"
  },
  {
    "text": "under current target bit rate constraint. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=787"
  },
  {
    "text": "So we encourage to rely ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=790"
  },
  {
    "text": "on the encoder’s default behavior ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=792"
  },
  {
    "text": "for adjusting frame QP.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=794"
  },
  {
    "text": "But in some cases where the client ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=797"
  },
  {
    "text": "has a specific requirement for the video quality, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=799"
  },
  {
    "text": "we now let you control the max frame QP ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=803"
  },
  {
    "text": "that the encoder is allowed to use.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=806"
  },
  {
    "text": "With the max frame QP, the encoder will always choose ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=809"
  },
  {
    "text": "the frame QP that is smaller than this limit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=813"
  },
  {
    "text": "so the client can have a fine-grained control ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=816"
  },
  {
    "text": "over the image quality.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=819"
  },
  {
    "text": "It’s worth mentioning that the regular rate control ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=822"
  },
  {
    "text": "still works even with the max frame QP specified. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=825"
  },
  {
    "text": "If the encoder hits the max frame QP cap ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=829"
  },
  {
    "text": "but is running out of bit rate budget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=832"
  },
  {
    "text": "it will start dropping frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=835"
  },
  {
    "text": "in order to maintain the target bit rate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=837"
  },
  {
    "text": "One example of using this feature is to transmit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=841"
  },
  {
    "text": "screen content video over a poor network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=844"
  },
  {
    "text": "You can make a trade-off by sacrificing the frame rate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=848"
  },
  {
    "text": "in order to send sharp screen content images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=851"
  },
  {
    "text": "Setting max frame QP can meet this requirement.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=855"
  },
  {
    "text": "Let’s look at the interface. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=860"
  },
  {
    "text": "You can pass the max frame QP ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=862"
  },
  {
    "text": "with the new session property MaxAllowedFrameQP.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=864"
  },
  {
    "text": "Keep in mind that the value of max frame QP ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=869"
  },
  {
    "text": "must range from 1 to 51 according to the standard.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=872"
  },
  {
    "text": "Let’s talk about the last feature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=878"
  },
  {
    "text": "we’ve developed in low-latency mode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=880"
  },
  {
    "text": "long-term reference.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=882"
  },
  {
    "text": "Long-term reference or LTR can be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=885"
  },
  {
    "text": "for error resilience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=888"
  },
  {
    "text": "Let’s look at this diagram showing the encoder, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=890"
  },
  {
    "text": "sender client, and the receiver client ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=893"
  },
  {
    "text": "in the pipeline.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=895"
  },
  {
    "text": "Suppose the video communication ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=898"
  },
  {
    "text": "goes through a network with poor connection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=900"
  },
  {
    "text": "Frame loss can happen ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=903"
  },
  {
    "text": "because of the transmission error.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=904"
  },
  {
    "text": "When the receiver client detects a frame loss, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=907"
  },
  {
    "text": "it can request a refresh frame in order to reset the session.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=911"
  },
  {
    "text": "If the encoder gets the request, normally it will encode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=916"
  },
  {
    "text": "a key frame for the refresh purpose. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=920"
  },
  {
    "text": "But the key frame is usually quite large.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=923"
  },
  {
    "text": "A large key frame takes a longer time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=926"
  },
  {
    "text": "to get to the receiver. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=928"
  },
  {
    "text": "Since the network condition is already poor, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=930"
  },
  {
    "text": "a large frame could compound the network congestion issue.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=933"
  },
  {
    "text": "So, can we use a predictive frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=938"
  },
  {
    "text": "instead of a key frame for refresh? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=941"
  },
  {
    "text": "The answer is yes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=943"
  },
  {
    "text": "if we have frame acknowledgement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=945"
  },
  {
    "text": "Let me show you how it works.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=948"
  },
  {
    "text": "First, we need to decide frames that require acknowledgement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=951"
  },
  {
    "text": "We call these frames long-term reference, or LTR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=955"
  },
  {
    "text": "This is the decision from the encoder. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=960"
  },
  {
    "text": "When the sender client transmits an LTR frame, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=963"
  },
  {
    "text": "it also needs to request acknowledgement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=966"
  },
  {
    "text": "from the receiver client.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=969"
  },
  {
    "text": "If the LTR frame is successfully received, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=972"
  },
  {
    "text": "an acknowledgement needs to be sent back.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=975"
  },
  {
    "text": "Once the sender client gets the acknowledgement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=979"
  },
  {
    "text": "and passes that information to the encoder, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=982"
  },
  {
    "text": "the encoder knows which LTR frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=985"
  },
  {
    "text": "have been received by the other side.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=987"
  },
  {
    "text": "Let’s look at the bad network situation again.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=990"
  },
  {
    "text": "When the encoder gets the refresh request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=994"
  },
  {
    "text": "since this time, the encoder has ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=997"
  },
  {
    "text": "a bunch of acknowledged LTRs, it is able ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=999"
  },
  {
    "text": "to encode a frame that is predicted ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1002"
  },
  {
    "text": "from one of these acknowledged LTRs.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1004"
  },
  {
    "text": "A frame that is encoded in this way is called LTR-P.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1007"
  },
  {
    "text": "Usually an LTR-P is much smaller in terms of encoded frame size ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1013"
  },
  {
    "text": "compared to a key frame, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1017"
  },
  {
    "text": "so it is easier to transmit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1020"
  },
  {
    "text": "Now, let’s talk about the APIs for LTR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1022"
  },
  {
    "text": "Note that the frame acknowledgement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1027"
  },
  {
    "text": "needs to be handled by application layer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1029"
  },
  {
    "text": "It can be done with mechanisms such as RPSI message ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1032"
  },
  {
    "text": "in RTP Control Protocol.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1037"
  },
  {
    "text": "Here we’re only going to focus on how the encoder ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1040"
  },
  {
    "text": "and the sender client communicate in this process.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1043"
  },
  {
    "text": "Once you have enabled low-latency encoding, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1048"
  },
  {
    "text": "you can enable this feature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1051"
  },
  {
    "text": "by setting EnableLTR session property.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1053"
  },
  {
    "text": "When an LTR frame is encoded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1057"
  },
  {
    "text": "the encoder will signal a unique frame token ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1060"
  },
  {
    "text": "in the sample attachment RequireLTRAcknowledgementToken.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1062"
  },
  {
    "text": "The sender client is responsible for reporting ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1068"
  },
  {
    "text": "the acknowledged LTR frames to the encoder ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1071"
  },
  {
    "text": "through AcknowledgedLTRTokens frame property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1074"
  },
  {
    "text": "Since more than one acknowledgement can come ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1077"
  },
  {
    "text": "at a time, we need to use an array ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1080"
  },
  {
    "text": "to store these frame tokens.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1083"
  },
  {
    "text": "You can request a refresh frame at any time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1086"
  },
  {
    "text": "through ForceLTRRefresh frame property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1089"
  },
  {
    "text": "Once the encoder receives this request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1092"
  },
  {
    "text": "an LTR-P will be encoded. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1095"
  },
  {
    "text": "If there is no acknowledged LTR available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1098"
  },
  {
    "text": "the encoder will generate a key frame in this case.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1101"
  },
  {
    "text": "All right. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1106"
  },
  {
    "text": "Now we’ve covered the new features ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1107"
  },
  {
    "text": "in low-latency mode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1108"
  },
  {
    "text": "We can talk about using these features together.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1110"
  },
  {
    "text": "For example, we can use temporal scalability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1114"
  },
  {
    "text": "and max frame quantization parameter ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1117"
  },
  {
    "text": "for a group screen sharing application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1119"
  },
  {
    "text": "The temporal scalability ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1122"
  },
  {
    "text": "can efficiently generate output videos ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1124"
  },
  {
    "text": "for each recipient, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1126"
  },
  {
    "text": "and we can lower the max frame QP ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1128"
  },
  {
    "text": "for a sharper UI and text in the screen content.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1131"
  },
  {
    "text": "If the communication goes through a poor network ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1135"
  },
  {
    "text": "and a refresh frame is needed to recover ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1138"
  },
  {
    "text": "from the error, long-term reference can be used. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1140"
  },
  {
    "text": "And if the receiver can only decode constrained profiles, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1145"
  },
  {
    "text": "we can encode with constrained baseline profile ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1149"
  },
  {
    "text": "or constrained high profile.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1152"
  },
  {
    "text": "OK. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1155"
  },
  {
    "text": "We’ve covered a few topics here. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1156"
  },
  {
    "text": "We’ve introduced a low-latency encoding mode in Video Toolbox.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1159"
  },
  {
    "text": "We’ve talked about how to use VTCompressionSession APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1164"
  },
  {
    "text": "to encode videos in low-latency mode.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1168"
  },
  {
    "text": "Besides the latency benefit, we also developed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1171"
  },
  {
    "text": "a bunch of new features to address the requirements ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1174"
  },
  {
    "text": "for real-time video application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1178"
  },
  {
    "text": "With all these improvements, I hope the low-latency mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1180"
  },
  {
    "text": "can make your video app more amazing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1183"
  },
  {
    "text": "Thanks for watching and have a great WWDC 2021. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1186"
  },
  {
    "text": "[upbeat music]",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10158/?time=1190"
  }
]