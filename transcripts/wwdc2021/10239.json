[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=7"
  },
  {
    "text": "Stuart Cheshire: Welcome to ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=9"
  },
  {
    "text": "\"Reduce network delays for your app\".",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=10"
  },
  {
    "text": "My name is Stuart Cheshire.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=12"
  },
  {
    "text": "I'm going to talk about factors that contribute ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=15"
  },
  {
    "text": "to making network apps feel slow today ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=17"
  },
  {
    "text": "and then I'll hand over to my colleague Vidhi Goel ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=20"
  },
  {
    "text": "to tell you about the techniques and APIs you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=23"
  },
  {
    "text": "to make your network app more responsive.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=26"
  },
  {
    "text": "Let's start by talking about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=28"
  },
  {
    "text": "something you may have already seen in the WWDC beta of iOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=30"
  },
  {
    "text": "If you look in Developer settings, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=36"
  },
  {
    "text": "you will see a new item in the Networking section ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=38"
  },
  {
    "text": "called Responsiveness.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=40"
  },
  {
    "text": "While upload throughput, download throughput, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=42"
  },
  {
    "text": "and idle ping time are all interesting, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=45"
  },
  {
    "text": "the main factor that affects the responsiveness ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=47"
  },
  {
    "text": "of your network app is the network's responsiveness ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=50"
  },
  {
    "text": "under working conditions, not idle conditions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=52"
  },
  {
    "text": "The typical internet speed test idle ping time measurement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=56"
  },
  {
    "text": "tells you how well your internet connection works ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=60"
  },
  {
    "text": "when you're not using it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=62"
  },
  {
    "text": "What matters is how well your internet connection works ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=63"
  },
  {
    "text": "when you are using it.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=66"
  },
  {
    "text": "Tap on Test.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=68"
  },
  {
    "text": "It will warn you that it will generate network traffic, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=70"
  },
  {
    "text": "it will measure your network for a few seconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=73"
  },
  {
    "text": "and then it will tell you how well your network is performing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=76"
  },
  {
    "text": "under working conditions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=79"
  },
  {
    "text": "The tool reports network responsiveness ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=82"
  },
  {
    "text": "in round trips per minute, or RPM, instead of milliseconds.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=84"
  },
  {
    "text": "We created this new RPM metric ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=89"
  },
  {
    "text": "because milliseconds are a fairly abstract concept ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=92"
  },
  {
    "text": "to a lot of people.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=94"
  },
  {
    "text": "People are also more familiar with metrics ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=96"
  },
  {
    "text": "where higher is better.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=98"
  },
  {
    "text": "The RPM metric produces numbers in the range ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=100"
  },
  {
    "text": "from a few hundred RPM to a few thousand RPM, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=102"
  },
  {
    "text": "just like the RPM of your car engine.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=106"
  },
  {
    "text": "There's also a command-line version of this test tool ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=109"
  },
  {
    "text": "on macOS called NetworkQuality.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=111"
  },
  {
    "text": "You might think that your home or work network ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=115"
  },
  {
    "text": "has a great ping time, but that's when it's idle.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=117"
  },
  {
    "text": "Run this network quality test for yourself -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=120"
  },
  {
    "text": "on your iPhone or Mac -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=123"
  },
  {
    "text": "and you might find that when your network is being used, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=124"
  },
  {
    "text": "its responsiveness becomes a lot worse.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=127"
  },
  {
    "text": "And I do mean a lot worse.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=130"
  },
  {
    "text": "Your network might have an idle round-trip time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=133"
  },
  {
    "text": "of 20 milliseconds, which sounds pretty good, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=135"
  },
  {
    "text": "but you might find that under working conditions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=138"
  },
  {
    "text": "the round-trip time goes up to 600 milliseconds or more.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=140"
  },
  {
    "text": "That's 30 times worse.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=144"
  },
  {
    "text": "Network responsiveness under working conditions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=146"
  },
  {
    "text": "is what matters for your app's user experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=149"
  },
  {
    "text": "We all see this problem all the time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=153"
  },
  {
    "text": "but especially with audio and video ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=155"
  },
  {
    "text": "freezes, and dropouts during video conferencing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=159"
  },
  {
    "text": "High network delays hurt all apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=161"
  },
  {
    "text": "but we've got used to that, so we notice it more ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=164"
  },
  {
    "text": "when it affects video conferencing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=167"
  },
  {
    "text": "When we have problems with our video conferences, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=169"
  },
  {
    "text": "we think we'll fix it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=172"
  },
  {
    "text": "by upgrading our internet connection.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=173"
  },
  {
    "text": "People have gone from a few megabits per second ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=176"
  },
  {
    "text": "to gigabit and above, yet the problems still happen.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=178"
  },
  {
    "text": "A few megabits per second ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=182"
  },
  {
    "text": "should be plenty for video conferencing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=183"
  },
  {
    "text": "so why do we still have these problems? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=186"
  },
  {
    "text": "When buffers in the network are excessively large, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=189"
  },
  {
    "text": "when they fill up, they don't improve throughput, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=193"
  },
  {
    "text": "but they do add delay.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=196"
  },
  {
    "text": "We normally think of the internet operating like this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=198"
  },
  {
    "text": "with packets flowing speedily through the network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=201"
  },
  {
    "text": "But if we look inside the cloud, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=205"
  },
  {
    "text": "we'll see that it really works more like this.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=207"
  },
  {
    "text": "The packet you see coming out of the network ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=211"
  },
  {
    "text": "is not the one that you saw go in.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=213"
  },
  {
    "text": "Packets spend a lot of time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=216"
  },
  {
    "text": "sitting in excessively large buffers in the network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=217"
  },
  {
    "text": "This phenomenon of excessively large buffers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=220"
  },
  {
    "text": "is called bufferbloat, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=223"
  },
  {
    "text": "and until now it hasn't been widely measured, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=224"
  },
  {
    "text": "despite the effect it has on everyday network use.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=227"
  },
  {
    "text": "The good news is that there are ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=231"
  },
  {
    "text": "modern queue management algorithms, like CoDel -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=233"
  },
  {
    "text": "the Controlled Delay queueing algorithm -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=236"
  },
  {
    "text": "that eliminate bufferbloat.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=239"
  },
  {
    "text": "When the network keeps queues short, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=241"
  },
  {
    "text": "the time a packet spends waiting in the network ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=243"
  },
  {
    "text": "is dramatically reduced.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=245"
  },
  {
    "text": "It's possible to get high throughput and low delay ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=247"
  },
  {
    "text": "at the same time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=250"
  },
  {
    "text": "It's not an either/or choice. It's not a zero-sum game.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=252"
  },
  {
    "text": "We're working with the industry ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=256"
  },
  {
    "text": "to deploy smarter queue management algorithms ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=257"
  },
  {
    "text": "and improve network responsiveness ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=260"
  },
  {
    "text": "under working conditions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=262"
  },
  {
    "text": "But for now, if you want to give a great user experience, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=263"
  },
  {
    "text": "you will want to make your apps cope with the internet ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=267"
  },
  {
    "text": "as it is today.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=270"
  },
  {
    "text": "Bufferbloat is a large component of the network delays ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=271"
  },
  {
    "text": "your application will experience, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=274"
  },
  {
    "text": "but it's not the only source of delay.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=277"
  },
  {
    "text": "There's software and hardware processing time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=279"
  },
  {
    "text": "As CPUs get ever faster, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=282"
  },
  {
    "text": "this processing time continues to shrink.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=284"
  },
  {
    "text": "There's the actual data transmission time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=287"
  },
  {
    "text": "As data rates increase from kilobits to megabits ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=289"
  },
  {
    "text": "to gigabits per second, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=293"
  },
  {
    "text": "transmission time continues to shrink.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=294"
  },
  {
    "text": "Then there's the time delay due to buffering in the network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=297"
  },
  {
    "text": "As I said, we're working with the industry ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=300"
  },
  {
    "text": "on reducing these delays.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=302"
  },
  {
    "text": "But there's always going to be ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=304"
  },
  {
    "text": "the speed-of-light signal propagation delay.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=306"
  },
  {
    "text": "Back in the 1990s, the Stanford-to-MIT ping time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=308"
  },
  {
    "text": "round-trip, coast-to-coast, across the United States, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=312"
  },
  {
    "text": "was already under 100 milliseconds.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=316"
  },
  {
    "text": "That's pretty close to the speed-of-light limit already, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=318"
  },
  {
    "text": "so it's not going to get much better.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=321"
  },
  {
    "text": "We're working on reducing the other three delays, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=324"
  },
  {
    "text": "but the speed-of-light delay will never go away, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=326"
  },
  {
    "text": "so this is why it’s important to design your apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=329"
  },
  {
    "text": "taking network round-trip times into account.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=332"
  },
  {
    "text": "When we're talking about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=336"
  },
  {
    "text": "taking network round-trip times into account, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=337"
  },
  {
    "text": "what kind of apps are we talking about? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=340"
  },
  {
    "text": "Everyone knows that video conferencing ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=342"
  },
  {
    "text": "is severely affected by high network delays.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=345"
  },
  {
    "text": "Everyone knows that online games are severely affected ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=348"
  },
  {
    "text": "by high network delays.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=351"
  },
  {
    "text": "But this affects all apps that use the network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=353"
  },
  {
    "text": "I'm talking about getting weather forecasts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=356"
  },
  {
    "text": "stock quotes, driving directions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=358"
  },
  {
    "text": "This affects web browsing.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=360"
  },
  {
    "text": "It affects skipping ahead while watching a streaming video.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=362"
  },
  {
    "text": "Think about how many apps include ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=365"
  },
  {
    "text": "some animated spinning delay indicator ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=367"
  },
  {
    "text": "while the app is waiting for the network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=369"
  },
  {
    "text": "Maybe your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=371"
  },
  {
    "text": "We show that \"please wait\" indicator ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=373"
  },
  {
    "text": "so that the user doesn't think the app has hung.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=375"
  },
  {
    "text": "It's great that we put so much effort ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=378"
  },
  {
    "text": "into giving the user something to look at ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=380"
  },
  {
    "text": "while they wait for the slow network, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=382"
  },
  {
    "text": "but we should also put equal effort ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=384"
  },
  {
    "text": "into reducing the time they spend waiting.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=386"
  },
  {
    "text": "If you have an app where you ever show ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=388"
  },
  {
    "text": "a delay indicator while waiting for data from the network, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=390"
  },
  {
    "text": "there are techniques you can use to reduce those wait times.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=393"
  },
  {
    "text": "The time an app waits for network data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=397"
  },
  {
    "text": "is a function of ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=399"
  },
  {
    "text": "how long it takes for one network round trip, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=401"
  },
  {
    "text": "and how many network round trips your app requires.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=404"
  },
  {
    "text": "As an app developer, there's not a lot you can do ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=408"
  },
  {
    "text": "to improve the underlying network round-trip time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=411"
  },
  {
    "text": "but you can control how many round trips your app requires.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=414"
  },
  {
    "text": "Let me introduce my colleague, Vidhi Goel, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=418"
  },
  {
    "text": "to tell you how you can do that.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=421"
  },
  {
    "text": "Vidhi Goel: Thanks, Stuart.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=424"
  },
  {
    "text": "Hi, I am Vidhi, and today I'd like to talk to you about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=426"
  },
  {
    "text": "what you can do as a developer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=430"
  },
  {
    "text": "to reduce network delays in your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=432"
  },
  {
    "text": "App responsiveness is inversely proportional ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=436"
  },
  {
    "text": "to the number of network round trips.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=439"
  },
  {
    "text": "Let me show you how you can reduce these network round trips ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=442"
  },
  {
    "text": "by adopting the modern networking protocols ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=447"
  },
  {
    "text": "and make your apps super snappy.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=450"
  },
  {
    "text": "To speed up your apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=452"
  },
  {
    "text": "adopt the modern networking protocols ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=454"
  },
  {
    "text": "such as HTTP/3 & QUIC, TCP Fast Open, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=456"
  },
  {
    "text": "TLS 1.3, and Multipath TCP.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=462"
  },
  {
    "text": "With these techniques, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=467"
  },
  {
    "text": "your app can potentially achieve multiple round-trip reductions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=469"
  },
  {
    "text": "in delivering data to your user.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=473"
  },
  {
    "text": "Server side support is required ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=476"
  },
  {
    "text": "for all of these modern protocols, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=478"
  },
  {
    "text": "so check with your provider about their readiness.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=481"
  },
  {
    "text": "We are happy to tell you that all of these technologies ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=485"
  },
  {
    "text": "are available on iOS and macOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=489"
  },
  {
    "text": "Let's look into each of these technologies.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=492"
  },
  {
    "text": "First up, we have HTTP/3 and QUIC ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=495"
  },
  {
    "text": "which are enabled by default in iOS 15 and macOS Monterey.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=498"
  },
  {
    "text": "QUIC is a transport protocol which can set up ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=505"
  },
  {
    "text": "a connection much faster than TCP and TLS.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=507"
  },
  {
    "text": "By reducing the head-of-line blocking, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=512"
  },
  {
    "text": "QUIC can significantly reduce delays ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=515"
  },
  {
    "text": "in delivering data to your user.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=518"
  },
  {
    "text": "And here is the best part: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=521"
  },
  {
    "text": "if you are already using URLSession, you’re all set.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=523"
  },
  {
    "text": "If you provide your own application layer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=527"
  },
  {
    "text": "using the Network framework APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=530"
  },
  {
    "text": "and want to take advantage of QUIC, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=533"
  },
  {
    "text": "simply create an NWConnection with QUIC parameters ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=535"
  },
  {
    "text": "and set a TLS Application-Layer protocol or ALPN.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=539"
  },
  {
    "text": "Please check out the ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=544"
  },
  {
    "text": "\"Accelerate networking with HTTP/3 and QUIC\" session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=545"
  },
  {
    "text": "to learn more about how to use these technologies in your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=549"
  },
  {
    "text": "QUIC is useful in many scenarios.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=554"
  },
  {
    "text": "However, TCP may still be the right choice ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=557"
  },
  {
    "text": "for some applications.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=561"
  },
  {
    "text": "When using TCP, you can eliminate an entire round trip ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=564"
  },
  {
    "text": "by sending the app data along with the TCP handshake.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=569"
  },
  {
    "text": "TCP Fast Open is supported ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=575"
  },
  {
    "text": "in Network framework and Sockets.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=577"
  },
  {
    "text": "To use it with NWConnections, there are two options: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=581"
  },
  {
    "text": "the first option is to allow Fast Open on your connection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=587"
  },
  {
    "text": "and in this case, the app will provide the initial data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=591"
  },
  {
    "text": "to be sent out with the handshake.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=595"
  },
  {
    "text": "To enable this, set the allowFastOpen parameter ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=598"
  },
  {
    "text": "to true and create your connection.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=602"
  },
  {
    "text": "And then, before calling start, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=606"
  },
  {
    "text": "you would call send with your initial data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=609"
  },
  {
    "text": "When using TCP Fast Open, you have to be careful ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=614"
  },
  {
    "text": "that you only send idempotent requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=619"
  },
  {
    "text": "with the handshake.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=622"
  },
  {
    "text": "Idempotent basically means that the data is safe to be replayed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=624"
  },
  {
    "text": "over the network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=628"
  },
  {
    "text": "There is another way to use TCP Fast Open ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=630"
  },
  {
    "text": "that does not require your app to send its own initial data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=634"
  },
  {
    "text": "If your app is using TLS over TCP, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=640"
  },
  {
    "text": "you can choose to send the TLS handshake message ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=643"
  },
  {
    "text": "as the initial data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=646"
  },
  {
    "text": "To enable this, go to your TCP-specific options ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=649"
  },
  {
    "text": "and set enableFastOpen to true.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=653"
  },
  {
    "text": "The recommended way to use TCP Fast Open ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=658"
  },
  {
    "text": "is via the Network framework API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=661"
  },
  {
    "text": "but if your app is built over Sockets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=664"
  },
  {
    "text": "then you would call the connectx API with the respective flags ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=667"
  },
  {
    "text": "to specify that you want to send idempotent data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=672"
  },
  {
    "text": "with the handshake.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=675"
  },
  {
    "text": "I mentioned idempotent a couple of times.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=677"
  },
  {
    "text": "Let me explain what it means and why it is important to send ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=681"
  },
  {
    "text": "only idempotent requests with the handshake.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=685"
  },
  {
    "text": "An idempotent and replay-safe operation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=689"
  },
  {
    "text": "is one that has no additional effect ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=692"
  },
  {
    "text": "if it is performed more than once.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=695"
  },
  {
    "text": "For example, when the user goes ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=699"
  },
  {
    "text": "to the developer.apple.com web page, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=702"
  },
  {
    "text": "the HTTP GET request for this web page is sent out ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=705"
  },
  {
    "text": "with the TCP handshake.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=709"
  },
  {
    "text": "If the acknowledgment for this request ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=712"
  },
  {
    "text": "was either delayed or dropped in the network, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=714"
  },
  {
    "text": "the device will resend the HTTP GET request ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=718"
  },
  {
    "text": "which may get routed to a different server.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=722"
  },
  {
    "text": "And this time the acknowledgement arrives ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=726"
  },
  {
    "text": "along with the HTTP response.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=728"
  },
  {
    "text": "As the HTTP GET request does not have ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=732"
  },
  {
    "text": "any additional effect ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=734"
  },
  {
    "text": "when it is resent over the network, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=736"
  },
  {
    "text": "it is considered as an idempotent request.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=739"
  },
  {
    "text": "Now, let's say the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=743"
  },
  {
    "text": "is trying to buy a new iPhone 12.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=745"
  },
  {
    "text": "The HTTP request sent for this operation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=749"
  },
  {
    "text": "is not an idempotent request.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=752"
  },
  {
    "text": "It could result in multiple transactions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=756"
  },
  {
    "text": "if the request goes to a different server each time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=759"
  },
  {
    "text": "when the data is replayed over the network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=762"
  },
  {
    "text": "Keeping that in mind, let's talk about TLS 1.3.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=766"
  },
  {
    "text": "TLS 1.3 removes an entire round trip ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=771"
  },
  {
    "text": "from the handshake as compared to TLS 1.2.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=775"
  },
  {
    "text": "It also provides stronger security.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=779"
  },
  {
    "text": "It is enabled by default ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=783"
  },
  {
    "text": "since iOS 13.4 for URLSession and NWConnection.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=785"
  },
  {
    "text": "The TLS 1.3 protocol defines early data support, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=791"
  },
  {
    "text": "which can save yet another round trip ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=795"
  },
  {
    "text": "by sending idempotent requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=797"
  },
  {
    "text": "along with the TLS handshake message.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=799"
  },
  {
    "text": "Let's switch gears and look at Multipath TCP ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=803"
  },
  {
    "text": "which works a bit differently in reducing network delays.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=807"
  },
  {
    "text": "Multipath TCP allows a single TCP connection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=811"
  },
  {
    "text": "to continue as the device switches ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=815"
  },
  {
    "text": "from one network to another.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=817"
  },
  {
    "text": "To get the low latency feature of Multipath TCP, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=820"
  },
  {
    "text": "use the interactive mode API.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=824"
  },
  {
    "text": "It will save all the round trips needed ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=828"
  },
  {
    "text": "to establish a new connection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=830"
  },
  {
    "text": "and the system will automatically choose ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=832"
  },
  {
    "text": "the faster network path for your data packets.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=835"
  },
  {
    "text": "To opt in from the client, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=839"
  },
  {
    "text": "set the multipathServiceType property to interactive ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=841"
  },
  {
    "text": "on your URLSession configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=845"
  },
  {
    "text": "or on your NWParameters.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=848"
  },
  {
    "text": "To give you an idea of how many round trips you can save ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=851"
  },
  {
    "text": "with these modern technologies, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=855"
  },
  {
    "text": "let's start with a reference point.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=857"
  },
  {
    "text": "Let's say your app is currently running TLS 1.2 over TCP.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=860"
  },
  {
    "text": "In this case it will take four round trips ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=865"
  },
  {
    "text": "to get the first byte to your user.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=868"
  },
  {
    "text": "If your server switches from TLS 1.2 to TLS 1.3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=872"
  },
  {
    "text": "your connections will eliminate an entire round trip.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=877"
  },
  {
    "text": "If you enable TCP Fast Open on your connection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=881"
  },
  {
    "text": "you will save yet another round trip.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=885"
  },
  {
    "text": "In iOS 15, HTTP/3 over QUIC ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=889"
  },
  {
    "text": "provides a reduction to two round trips.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=893"
  },
  {
    "text": "The QUIC protocol also defines early data support, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=897"
  },
  {
    "text": "which could enable a further reduction to one round trip.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=901"
  },
  {
    "text": "Based on our measurements at Apple, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=907"
  },
  {
    "text": "it is common for the users to see round-trip times ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=909"
  },
  {
    "text": "that sometimes spike up as high as 600 milliseconds.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=912"
  },
  {
    "text": "Let's see what that means for your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=918"
  },
  {
    "text": "Four round trips at 600 milliseconds ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=921"
  },
  {
    "text": "means your user is waiting almost two and a half seconds ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=924"
  },
  {
    "text": "for the data to arrive.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=928"
  },
  {
    "text": "That's a huge amount of time ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=930"
  },
  {
    "text": "to wait and stare at the network spinner.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=932"
  },
  {
    "text": "By adopting the modern networking protocols, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=936"
  },
  {
    "text": "you can reduce that time to first byte from 2.4 seconds ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=939"
  },
  {
    "text": "to about half a second.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=944"
  },
  {
    "text": "The user will definitively notice the difference ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=947"
  },
  {
    "text": "when the data arrives a whole second and a half earlier.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=950"
  },
  {
    "text": "Every developer who wants great network performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=955"
  },
  {
    "text": "should pay attention to the number of round trips.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=958"
  },
  {
    "text": "This is where the big wins are.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=962"
  },
  {
    "text": "All the technologies that I've talked about ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=966"
  },
  {
    "text": "help to reduce network delays in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=968"
  },
  {
    "text": "in real-world network conditions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=971"
  },
  {
    "text": "If you test your app on 5G, LTE, or fast Wi-Fi networks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=974"
  },
  {
    "text": "your app responsiveness might seem fine to you.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=980"
  },
  {
    "text": "But your users aren't always using your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=983"
  },
  {
    "text": "in the best network conditions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=986"
  },
  {
    "text": "To simulate realistic networks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=989"
  },
  {
    "text": "Network Link Conditioner tool is available for iOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=992"
  },
  {
    "text": "from the Developer settings menu.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=995"
  },
  {
    "text": "For macOS, you can download it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=998"
  },
  {
    "text": "from the Apple Developer website.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1000"
  },
  {
    "text": "This tool is a reliable and repeatable way ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1003"
  },
  {
    "text": "to test your app in different network conditions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1006"
  },
  {
    "text": "that your users may experience in their day-to-day life.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1009"
  },
  {
    "text": "If you recall, Stuart mentioned earlier that you can't do much ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1013"
  },
  {
    "text": "about reducing your network round-trip time.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1018"
  },
  {
    "text": "Well, that's not entirely true.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1022"
  },
  {
    "text": "Let me explain how you can reduce the network ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1025"
  },
  {
    "text": "round-trip time when you correctly inform the system ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1029"
  },
  {
    "text": "about your app traffic.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1032"
  },
  {
    "text": "Most apps have a mix of traffic that they send or receive.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1035"
  },
  {
    "text": "There is a lot of data that is exchanged ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1040"
  },
  {
    "text": "from the user's device when running a bunch of apps.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1043"
  },
  {
    "text": "In real-world networks, like a home or office Wi-Fi, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1047"
  },
  {
    "text": "a number of devices share the same network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1051"
  },
  {
    "text": "These devices simultaneously send and receive ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1055"
  },
  {
    "text": "significant amount of data while using a set of apps.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1059"
  },
  {
    "text": "To avoid building up long queues in this shared network, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1063"
  },
  {
    "text": "it is crucial that you classify your app data appropriately ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1068"
  },
  {
    "text": "so that the system can manage your traffic efficiently ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1072"
  },
  {
    "text": "in order to maintain low network delays.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1076"
  },
  {
    "text": "And when you allow the system to maintain low network delays, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1079"
  },
  {
    "text": "it makes your app's foreground traffic faster ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1083"
  },
  {
    "text": "and hence the data that matters most to the users ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1086"
  },
  {
    "text": "is delivered quickly.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1090"
  },
  {
    "text": "Let me illustrate this with an example.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1092"
  },
  {
    "text": "Many apps prefetch content like graphics, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1096"
  },
  {
    "text": "audio files, et cetera, to make it available for later use.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1099"
  },
  {
    "text": "When the app is prefetching a substantial amount of data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1104"
  },
  {
    "text": "this is what the network might look like.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1109"
  },
  {
    "text": "The bottleneck queue can become full.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1112"
  },
  {
    "text": "If at this point, the user initiates a network activity -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1116"
  },
  {
    "text": "like viewing their profile page -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1120"
  },
  {
    "text": "the response for this request ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1123"
  },
  {
    "text": "will be queued at the end of the network queue, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1125"
  },
  {
    "text": "and it may take seconds before the profile is shown.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1128"
  },
  {
    "text": "This would not be a good user experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1132"
  },
  {
    "text": "Now, let's look at what happens to the network ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1136"
  },
  {
    "text": "when we mark these nonuser initiated prefetching tasks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1140"
  },
  {
    "text": "as background.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1144"
  },
  {
    "text": "Marking these non user initiated transfers as background ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1146"
  },
  {
    "text": "will dramatically reduce the size of the network queue ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1151"
  },
  {
    "text": "which will then become available for other foreground data.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1154"
  },
  {
    "text": "Thus, any foreground data -- that is, the green packets -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1159"
  },
  {
    "text": "will be delivered instantly ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1163"
  },
  {
    "text": "for a quick, delightful experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1165"
  },
  {
    "text": "In iOS 15 and macOS Monterey, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1169"
  },
  {
    "text": "the background service type has improved dramatically.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1173"
  },
  {
    "text": "We have added new congestion control algorithms ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1177"
  },
  {
    "text": "for background uploads and downloads.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1180"
  },
  {
    "text": "These new algorithms not only reduce network delays ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1184"
  },
  {
    "text": "significantly, for better user experience, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1188"
  },
  {
    "text": "but also ensure that the background transfers ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1191"
  },
  {
    "text": "finish in nearly the same time as other traffic.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1195"
  },
  {
    "text": "Let's look at the networking APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1199"
  },
  {
    "text": "that you can adopt to take advantage ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1201"
  },
  {
    "text": "of the background service type.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1204"
  },
  {
    "text": "When your app is in the foreground ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1207"
  },
  {
    "text": "and performing non-user-initiated transfers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1209"
  },
  {
    "text": "you would use the default URLSession ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1213"
  },
  {
    "text": "and set the network service type to background ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1216"
  },
  {
    "text": "on your URL requests.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1219"
  },
  {
    "text": "Again, this allows the system to maintain low network delays.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1222"
  },
  {
    "text": "And for NWConnection, you would set the service class ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1228"
  },
  {
    "text": "to background on your NWParameters.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1232"
  },
  {
    "text": "If your app starts a long-running transfer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1237"
  },
  {
    "text": "whether it is user initiated or not, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1240"
  },
  {
    "text": "you would create a background URLSession ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1243"
  },
  {
    "text": "to continue running even when your app is suspended.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1246"
  },
  {
    "text": "For time-insensitive tasks, you can set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1251"
  },
  {
    "text": "the isDiscretionary property to true.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1254"
  },
  {
    "text": "This will allow the system to wait for optimal conditions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1257"
  },
  {
    "text": "to perform the transfer.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1261"
  },
  {
    "text": "We've talked about how your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1265"
  },
  {
    "text": "can help in keeping the network queues short.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1267"
  },
  {
    "text": "Another source of delay can be on the sending device itself.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1271"
  },
  {
    "text": "Historically, networking stacks ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1277"
  },
  {
    "text": "have used very large send buffers.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1279"
  },
  {
    "text": "This adds a lot of unnecessary delay, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1283"
  },
  {
    "text": "sometimes in the order of seconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1286"
  },
  {
    "text": "before the packet even enters the network.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1288"
  },
  {
    "text": "We fixed this for URLSession and NWConnection ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1292"
  },
  {
    "text": "way back in 2015.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1296"
  },
  {
    "text": "But most servers on the internet ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1300"
  },
  {
    "text": "run on Linux and use BSD Sockets.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1302"
  },
  {
    "text": "Contact your server operators to ensure that they are using ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1307"
  },
  {
    "text": "the TCP not sent low watermark socket option ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1311"
  },
  {
    "text": "to reduce the delays at the source.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1315"
  },
  {
    "text": "For your next steps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1321"
  },
  {
    "text": "Adopt the modern networking protocols ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1323"
  },
  {
    "text": "to eliminate multiple round trips.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1326"
  },
  {
    "text": "Use the background mode for prefetching assets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1330"
  },
  {
    "text": "bulk transfers, and non urgent tasks.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1334"
  },
  {
    "text": "Test your app's performance in different network conditions.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1338"
  },
  {
    "text": "Network Link Conditioner is an excellent tool for doing that.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1344"
  },
  {
    "text": "Keeping network delays low ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1349"
  },
  {
    "text": "improves the responsiveness of your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1351"
  },
  {
    "text": "and enhances the overall user experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1354"
  },
  {
    "text": "Thanks for watching and have a great WWDC! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1358"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10239/?time=1362"
  }
]