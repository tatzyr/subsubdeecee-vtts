[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=0"
  },
  {
    "text": "♪ Bass music playing ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=2"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=5"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=7"
  },
  {
    "text": "Alex Telek: Hi, I'm Alex. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=9"
  },
  {
    "text": "I'm an engineer on the Shazam team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=10"
  },
  {
    "text": "Thanks for joining this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=12"
  },
  {
    "text": "Today, I'm going to show you how to create ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=14"
  },
  {
    "text": "custom audio experiences for your app with ShazamKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=17"
  },
  {
    "text": "using custom catalog recognition. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=20"
  },
  {
    "text": "On this session, I'm going to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=22"
  },
  {
    "text": "some of the existing ShazamKit concepts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=25"
  },
  {
    "text": "such as catalogs, signatures, and media items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=27"
  },
  {
    "text": "If you're not already familiar with those, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=31"
  },
  {
    "text": "make sure to check out the \"Explore ShazamKit\" talk. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=34"
  },
  {
    "text": "Let's take a look at what we will be covering today. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=37"
  },
  {
    "text": "We will talk about how to build catalogs ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=41"
  },
  {
    "text": "with custom audio and metadata. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=43"
  },
  {
    "text": "We will learn how you can match audio to your own custom catalog ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=46"
  },
  {
    "text": "when using the microphone and the AVFAudio framework ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=50"
  },
  {
    "text": "to record audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=53"
  },
  {
    "text": "Then we are going to customize our app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=55"
  },
  {
    "text": "to synchronize content to the custom audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=58"
  },
  {
    "text": "Finally, we will cover some of the best practices ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=61"
  },
  {
    "text": "that you can use when working with custom catalogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=64"
  },
  {
    "text": "This is a code-along. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=68"
  },
  {
    "text": "There is a project available on the developer portal ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=70"
  },
  {
    "text": "that we will be using throughout this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=72"
  },
  {
    "text": "I recommend that you download the project before we begin. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=76"
  },
  {
    "text": "As learning becomes increasingly more digital, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=80"
  },
  {
    "text": "we need to come up with ways to keep children engaged. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=82"
  },
  {
    "text": "What if you could play a video on your Apple TV ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=86"
  },
  {
    "text": "and have a companion app that displays questions ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=90"
  },
  {
    "text": "at exactly the right time? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=93"
  },
  {
    "text": "Today, I'm going to show you how to build a remote app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=95"
  },
  {
    "text": "that synchronizes and reacts to an educational video ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=99"
  },
  {
    "text": "using custom catalog recognition. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=102"
  },
  {
    "text": "First, what are custom catalogs exactly, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=105"
  },
  {
    "text": "and how do we build one? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=108"
  },
  {
    "text": "Custom catalog is a collection of signatures that you generate ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=110"
  },
  {
    "text": "from any audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=114"
  },
  {
    "text": "You can also add associated metadata for each signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=116"
  },
  {
    "text": "To add signatures to your custom catalog, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=121"
  },
  {
    "text": "you can use the SignatureGenerator object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=123"
  },
  {
    "text": "It will convert audio buffers into a signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=126"
  },
  {
    "text": "First, create a signature generator, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=130"
  },
  {
    "text": "then using the installTap function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=133"
  },
  {
    "text": "on the audioEngine's inputNode, append the buffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=136"
  },
  {
    "text": "and the audioTime to the generator. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=139"
  },
  {
    "text": "The buffer parameter is a buffer of audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=142"
  },
  {
    "text": "captured from the output of the inputNode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=145"
  },
  {
    "text": "audioTime is the time when the buffer was captured. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=147"
  },
  {
    "text": "When you specify the audioFormat make sure that the format is PCM ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=152"
  },
  {
    "text": "in one of the supported sample rates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=156"
  },
  {
    "text": "Calling the signature function on the generator ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=160"
  },
  {
    "text": "will convert the audio buffers into a signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=162"
  },
  {
    "text": "We call this the reference signature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=166"
  },
  {
    "text": "which we can then add to a custom catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=167"
  },
  {
    "text": "You can also add signatures to a catalog ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=171"
  },
  {
    "text": "by using a shazamsignature file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=173"
  },
  {
    "text": "This is an opaque file that can be shared across devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=176"
  },
  {
    "text": "To make it easier adopting custom catalogs with ShazamKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=180"
  },
  {
    "text": "for this session we included this file for you to use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=183"
  },
  {
    "text": "Before we begin, let's open the downloaded project ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=187"
  },
  {
    "text": "and see what we have in there. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=190"
  },
  {
    "text": "Let's take a close look at the Question object.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=192"
  },
  {
    "text": "A Question represents a custom content in the app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=198"
  },
  {
    "text": "First, there's a title and an offset. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=202"
  },
  {
    "text": "A title is a string describing a section in the video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=206"
  },
  {
    "text": "Offset is the time when this section appears. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=209"
  },
  {
    "text": "For example, at 45 seconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=213"
  },
  {
    "text": "the teacher starts talking about a math equation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=215"
  },
  {
    "text": "You would create a Question with that title ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=218"
  },
  {
    "text": "and 45 as the offset. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=221"
  },
  {
    "text": "Equation represents a teaching moment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=225"
  },
  {
    "text": "showing mathematical equations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=228"
  },
  {
    "text": "You can use this as incremental building blocks. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=230"
  },
  {
    "text": "For instance, you might want to show ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=233"
  },
  {
    "text": "the left- and the right-hand side of an equation ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=235"
  },
  {
    "text": "at different offsets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=238"
  },
  {
    "text": "Finally, answerRange and requiresAnswer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=240"
  },
  {
    "text": "are used to indicate when an interactive UI would show, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=244"
  },
  {
    "text": "so children can practice answering the questions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=247"
  },
  {
    "text": "Let's take a look at what this would look like ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=251"
  },
  {
    "text": "for our educational video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=253"
  },
  {
    "text": "The first question starts at 14 seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=256"
  },
  {
    "text": "I have one red apple at 21 seconds ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=259"
  },
  {
    "text": "and adding three green apples at 25 seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=263"
  },
  {
    "text": "Finally, at 31 seconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=267"
  },
  {
    "text": "the student will have a chance to answer the question. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=270"
  },
  {
    "text": "Note, that videos are usually formatted in hours, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=273"
  },
  {
    "text": "minutes and seconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=276"
  },
  {
    "text": "so to create offsets like I did here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=278"
  },
  {
    "text": "you should convert the time into seconds first. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=280"
  },
  {
    "text": "For example, you could ask Siri for help, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=284"
  },
  {
    "text": "like, \"What's three minutes and 14 seconds in seconds?\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=286"
  },
  {
    "text": "Now, let's dive into the code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=292"
  },
  {
    "text": "and see how we can get started with custom catalogs! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=293"
  },
  {
    "text": "First, I'm going to build a catalog by adding a signature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=297"
  },
  {
    "text": "with some metadata associated to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=301"
  },
  {
    "text": "Here, I have CatalogProvider ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=306"
  },
  {
    "text": "with a function that creates the catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=308"
  },
  {
    "text": "The reference signature that you are going to add to the catalog ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=313"
  },
  {
    "text": "is called FoodMath.shazamsignature.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=316"
  },
  {
    "text": "Let's load that file in ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=324"
  },
  {
    "text": "and create a signature object from it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=325"
  },
  {
    "text": "Once you have that, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=329"
  },
  {
    "text": "you define the metadata using media items.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=331"
  },
  {
    "text": "I'm going to set ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=339"
  },
  {
    "text": "some of the predefined media item property keys, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=341"
  },
  {
    "text": "such as title and subtitle. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=343"
  },
  {
    "text": "This is going to describe the educational video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=346"
  },
  {
    "text": "I also created an extension on SHMediaItemProperty ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=349"
  },
  {
    "text": "with two custom keys: ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=353"
  },
  {
    "text": "teacher and episode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=356"
  },
  {
    "text": "Setting the episode number and the name of the teacher ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=358"
  },
  {
    "text": "will further customize the content of the catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=361"
  },
  {
    "text": "All you have to do now ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=364"
  },
  {
    "text": "is to create a customCatalog object.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=366"
  },
  {
    "text": "Then call addReferenceSignature on it ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=375"
  },
  {
    "text": "and pass in the signature and the mediaItem object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=377"
  },
  {
    "text": "This will associate the metadata you just created ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=381"
  },
  {
    "text": "with the reference signature you loaded from disk. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=384"
  },
  {
    "text": "Perfect! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=387"
  },
  {
    "text": "Now that I have that in place, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=389"
  },
  {
    "text": "I can start matching audio to the catalog ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=391"
  },
  {
    "text": "and see the result in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=393"
  },
  {
    "text": "So let's open the Matcher. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=396"
  },
  {
    "text": "We are going to match the input audio from the microphone ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=400"
  },
  {
    "text": "to the content of the custom catalog we just created. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=403"
  },
  {
    "text": "To capture audio from the microphone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=407"
  },
  {
    "text": "you can use AVAudioEngine from AVFAudio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=409"
  },
  {
    "text": "In this project, I already added a description ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=414"
  },
  {
    "text": "for the microphone usage in the Info.plist file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=416"
  },
  {
    "text": "Also in the Matcher, I included code ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=423"
  },
  {
    "text": "to request microphone permission and set up the audio session.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=426"
  },
  {
    "text": "First, to receive updates on matches, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=432"
  },
  {
    "text": "you create a session object and set the delegate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=435"
  },
  {
    "text": "The match function takes the custom catalog ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=443"
  },
  {
    "text": "we created before, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=446"
  },
  {
    "text": "so you can just pass that to the session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=447"
  },
  {
    "text": "Now, you're ready to match the audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=450"
  },
  {
    "text": "using the installTap function on the audioEngine's inputNode.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=452"
  },
  {
    "text": "The function returns an audioBuffer -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=461"
  },
  {
    "text": "which is the converted audio from the microphone -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=463"
  },
  {
    "text": "and an audioTime -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=466"
  },
  {
    "text": "which is the time when the buffer was captured. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=468"
  },
  {
    "text": "Then, you call matchStreamingBuffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=471"
  },
  {
    "text": "on the session and pass in the audio buffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=474"
  },
  {
    "text": "and the audio time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=476"
  },
  {
    "text": "We recommend that you include the time when available ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=479"
  },
  {
    "text": "as this is going to be validated by the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=482"
  },
  {
    "text": "to ensure that the provided audio is contiguous. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=484"
  },
  {
    "text": "Since you set the session delegate at the beginning, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=489"
  },
  {
    "text": "to handle updates, you can implement ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=492"
  },
  {
    "text": "the session: didFind match: function ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=494"
  },
  {
    "text": "from the session delegate.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=496"
  },
  {
    "text": "For this, I created an object called MatchResult.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=504"
  },
  {
    "text": "It contains a MatchedMediaItem, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=512"
  },
  {
    "text": "returned by the session: didFind match: function, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=514"
  },
  {
    "text": "this is the metadata that's associated ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=517"
  },
  {
    "text": "with the reference signature in the catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=520"
  },
  {
    "text": "It will include details we created earlier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=523"
  },
  {
    "text": "like the episode number and the teacher's name. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=526"
  },
  {
    "text": "It can be only generated from a match, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=529"
  },
  {
    "text": "and it contains extra information related to that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=532"
  },
  {
    "text": "Also in the MatchResult, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=536"
  },
  {
    "text": "we have the Question object I showed you earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=538"
  },
  {
    "text": "This is representing a section in the video ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=543"
  },
  {
    "text": "with a math equation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=545"
  },
  {
    "text": "We will use this to find the relevant content ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=547"
  },
  {
    "text": "for a match. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=549"
  },
  {
    "text": "So inside the delegate, we set MatchResult ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=551"
  },
  {
    "text": "to take the first MatchedMediaItem object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=554"
  },
  {
    "text": "and for now we, will set nothing for the Question.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=557"
  },
  {
    "text": "Now let's build and run and see the match in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=566"
  },
  {
    "text": "This is our FoodMath app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=570"
  },
  {
    "text": "it has a list of episodes that are available for the students. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=572"
  },
  {
    "text": "I can play the video and together with my colleague Neil, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=576"
  },
  {
    "text": "we can learn to solve some math problems. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=579"
  },
  {
    "text": "Neil, what do you have for us today? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=581"
  },
  {
    "text": "Neil: So the format is I'll ask you a question, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=584"
  },
  {
    "text": "you'll have some time to think about it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=588"
  },
  {
    "text": "and then we'll see if you got it right! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=590"
  },
  {
    "text": "You can play along too if you have our app. < ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=592"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=594"
  },
  {
    "text": "As I started the video, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=596"
  },
  {
    "text": "the app recognized that we are listening to episode three, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=598"
  },
  {
    "text": "\"Count on Me.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=600"
  },
  {
    "text": "This is great! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=602"
  },
  {
    "text": "Next, I want to figure out what sections to show ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=604"
  },
  {
    "text": "for a particular offset in the audio, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=608"
  },
  {
    "text": "using our Question object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=610"
  },
  {
    "text": "We use MatchedMediaItem ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=612"
  },
  {
    "text": "to know what video we are watching, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=614"
  },
  {
    "text": "but it also contains extra information about a match, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=616"
  },
  {
    "text": "such as the predictedCurrentMatchOffset. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=620"
  },
  {
    "text": "This is an auto-updating position ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=623"
  },
  {
    "text": "in the reference signature ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=625"
  },
  {
    "text": "represented as a time interval in seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=626"
  },
  {
    "text": "You can use this to figure out where you are in the video ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=630"
  },
  {
    "text": "and find the relevant Question object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=633"
  },
  {
    "text": "Going back to the code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=637"
  },
  {
    "text": "in the delegate callback, instead of setting nil, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=639"
  },
  {
    "text": "I want to find the last Question that comes right after ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=642"
  },
  {
    "text": "the predicatedCurrentMatchOffset.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=645"
  },
  {
    "text": "I can use the question's offset to compare the values. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=653"
  },
  {
    "text": "session:didFindMatch can be called multiple times ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=657"
  },
  {
    "text": "with the same match.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=661"
  },
  {
    "text": "So let's implement a filter that will only update the result ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=666"
  },
  {
    "text": "when you get a new Question object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=670"
  },
  {
    "text": "Once you have that, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=673"
  },
  {
    "text": "you can update the result with the value.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=675"
  },
  {
    "text": "Now let's see how that looks; build and run. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=681"
  },
  {
    "text": "This time, I want to learn about addition. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=688"
  },
  {
    "text": "I'm going to play the video again ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=691"
  },
  {
    "text": "and see if the content of the question will show up ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=693"
  },
  {
    "text": "synced with the video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=695"
  },
  {
    "text": "Neil: Question one. Let's get started. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=700"
  },
  {
    "text": "I went to the shops today and I fancied some apples, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=703"
  },
  {
    "text": "so I bought one red apple; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=706"
  },
  {
    "text": "and I bought one, two, three green apples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=708"
  },
  {
    "text": "How many apples did I buy in total? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=714"
  },
  {
    "text": "Your timer starts... now. < ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=717"
  },
  {
    "text": "Alex: Now it's question time. What's one plus three? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=721"
  },
  {
    "text": "Could it be five? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=724"
  },
  {
    "text": "Oh. No, I got that one wrong. Let's try again. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=727"
  },
  {
    "text": "I'm going to rewind the video, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=730"
  },
  {
    "text": "and this time I'll pay more attention! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=732"
  },
  {
    "text": "Neil: Question one. Let's get started. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=739"
  },
  {
    "text": "I went to the shops today and I fancied some apples, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=742"
  },
  {
    "text": "so I bought one red apple; ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=745"
  },
  {
    "text": "and I bought one, two, three green apples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=747"
  },
  {
    "text": "How many apples did I buy in total? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=754"
  },
  {
    "text": "Your timer starts... now. < ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=756"
  },
  {
    "text": "Alex: Now that I heard it again, I know that the answer is four. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=759"
  },
  {
    "text": "What if you find this question too easy? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=766"
  },
  {
    "text": "Let me skip forward and see if Neil has something ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=769"
  },
  {
    "text": "a bit more complicated to teach us.",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=771"
  },
  {
    "text": "Neil: Question four. The last question. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=780"
  },
  {
    "text": "So today, I'm feeling pretty hungry. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=784"
  },
  {
    "text": "So I've decided I'm going to buy 14 apples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=788"
  },
  {
    "text": "One... two... three... four -- < ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=792"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=798"
  },
  {
    "text": "Alex: That's a lot of apples. Let me go ahead a bit more. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=800"
  },
  {
    "text": "Skip ahead 20 seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=805"
  },
  {
    "text": "Neil: So I decided to buy another 28 apples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=807"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=812"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=815"
  },
  {
    "text": "One... two... three... ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=816"
  },
  {
    "text": "four... five... six...",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=822"
  },
  {
    "text": "26... 27... ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=829"
  },
  {
    "text": "28 apples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=835"
  },
  {
    "text": "How many apples did I buy in total? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=837"
  },
  {
    "text": "Your timer starts now. < ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=839"
  },
  {
    "text": "Alex: Now, that is a great question. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=842"
  },
  {
    "text": "Did you follow? ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=844"
  },
  {
    "text": "I'm going to go with my favorite number! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=845"
  },
  {
    "text": "That is correct! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=850"
  },
  {
    "text": "The answer to the ultimate question is 42! ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=851"
  },
  {
    "text": "It's simple: no matter where the student is in the video, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=855"
  },
  {
    "text": "your remote app will keep up and update the content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=858"
  },
  {
    "text": "Let's cover some of the best practices ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=861"
  },
  {
    "text": "when using custom catalogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=864"
  },
  {
    "text": "Custom catalogs can be shared between devices seamlessly ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=867"
  },
  {
    "text": "using the shazamcatalog file extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=871"
  },
  {
    "text": "You can load from and save to disk using a fileURL ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=874"
  },
  {
    "text": "as well as deliver them over the network. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=878"
  },
  {
    "text": "When using a remote web service, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=881"
  },
  {
    "text": "you may want to download the catalog first ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=883"
  },
  {
    "text": "and then use the add function on the custom catalog object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=885"
  },
  {
    "text": "Make sure to provide a local catalog ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=890"
  },
  {
    "text": "when there's no available one over the network. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=892"
  },
  {
    "text": "Catalogs can store custom keys to return data ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=896"
  },
  {
    "text": "specific to your use case. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=899"
  },
  {
    "text": "Make sure that the data you add in your catalog ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=901"
  },
  {
    "text": "is one of the valid property list values. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=904"
  },
  {
    "text": "When using matchStreamingBuffer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=908"
  },
  {
    "text": "ShazamKit will match the audio stream ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=910"
  },
  {
    "text": "and balance the performance as well as the intensity ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=913"
  },
  {
    "text": "of the search, doing all the work of generating ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=916"
  },
  {
    "text": "and auto-updating the signature for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=919"
  },
  {
    "text": "So now you built a full app ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=923"
  },
  {
    "text": "that's synchronized to an educational video, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=924"
  },
  {
    "text": "updating the content to where the student currently is ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=927"
  },
  {
    "text": "using only a signature and a custom catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=931"
  },
  {
    "text": "This is just one of the many examples ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=936"
  },
  {
    "text": "that is possible, ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=937"
  },
  {
    "text": "and we are really excited to see what you will build ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=939"
  },
  {
    "text": "using ShazamKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=941"
  },
  {
    "text": "Thank you and have a great WWDC. ",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=943"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2021/10045/?time=946"
  }
]