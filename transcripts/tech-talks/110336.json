[
  {
    "text": "Hello. My name's Katie, and welcome to this session ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=3"
  },
  {
    "text": "on implementing Apple Pay and order tracking.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=5"
  },
  {
    "text": "Let's look at the agenda for today.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=8"
  },
  {
    "text": "First, I will take you through the basics needed ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=10"
  },
  {
    "text": "to get started with Apple Pay.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=12"
  },
  {
    "text": "Then I will show you how to create a payment request ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=14"
  },
  {
    "text": "and respond to changes in the payment sheet.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=17"
  },
  {
    "text": "You can also add order details at the end of the payment flow ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=19"
  },
  {
    "text": "so the user can track their order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=21"
  },
  {
    "text": "The order details will enable Wallet ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=23"
  },
  {
    "text": "to retrieve an ordered package, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=25"
  },
  {
    "text": "which I will show you how to build.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=26"
  },
  {
    "text": "Finally, I will show you how to update your order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=28"
  },
  {
    "text": "So let's get started.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=31"
  },
  {
    "text": "Apple Pay is the easy, secure, and private way to pay.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=33"
  },
  {
    "text": "If you're a developer of a website or app, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=36"
  },
  {
    "text": "you can use Apple Pay to improve your conversion ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=38"
  },
  {
    "text": "and user experience.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=40"
  },
  {
    "text": "There are two essential items to create to get started.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=42"
  },
  {
    "text": "The first is an identifier which uniquely identifies you ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=44"
  },
  {
    "text": "as a merchant able to accept payments.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=47"
  },
  {
    "text": "To create one, you should head to the identifier section ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=50"
  },
  {
    "text": "of the Apple Developer portal.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=52"
  },
  {
    "text": "The conventional format is in reverse DNS, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=54"
  },
  {
    "text": "beginning with the word \"merchant.\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=56"
  },
  {
    "text": "Use your spiffy new merchant identifier ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=58"
  },
  {
    "text": "to create a payment processing certificate.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=60"
  },
  {
    "text": "Put very succinctly, Apple Pay encrypts each payload ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=62"
  },
  {
    "text": "with your registered merchant identifier ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=65"
  },
  {
    "text": "and public certificate.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=67"
  },
  {
    "text": "This payload can then be decrypted ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=69"
  },
  {
    "text": "and processed on your end.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=71"
  },
  {
    "text": "You can then return whether the payment succeeded or failed.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=73"
  },
  {
    "text": "Talk to your payment service provider ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=76"
  },
  {
    "text": "for the specifics on processing the payment.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=77"
  },
  {
    "text": "There are different steps to setting up Apple Pay ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=79"
  },
  {
    "text": "between apps and websites.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=82"
  },
  {
    "text": "To set up Apple Pay for use in your app, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=84"
  },
  {
    "text": "simply navigate to the Signing & Capabilities tab in Xcode ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=86"
  },
  {
    "text": "and add your merchant identifier under the Apple Pay capability.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=89"
  },
  {
    "text": "If you're building a website and want to set up Apple Pay there, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=92"
  },
  {
    "text": "there are some additional steps required.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=95"
  },
  {
    "text": "You must register the domains that will process ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=97"
  },
  {
    "text": "the Apple Pay transaction, which can be done ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=99"
  },
  {
    "text": "in the identifier section of the Apple Developer portal.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=101"
  },
  {
    "text": "While you're there, you can create ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=104"
  },
  {
    "text": "an Apple Pay Merchant Identity Certificate ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=106"
  },
  {
    "text": "linked to the merchant identifier you made earlier.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=108"
  },
  {
    "text": "This certificate is used to authenticate your sessions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=111"
  },
  {
    "text": "to Apple Pay servers.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=113"
  },
  {
    "text": "Whether you're integrating an app or on web, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=115"
  },
  {
    "text": "if you're working with an e-commerce platform ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=117"
  },
  {
    "text": "or a payment service provider, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=119"
  },
  {
    "text": "check out their specific instructions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=120"
  },
  {
    "text": "as they may simplify some of these steps.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=122"
  },
  {
    "text": "Now let's look at how to actually implement Apple Pay.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=124"
  },
  {
    "text": "Before displaying Apple Pay-related content, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=127"
  },
  {
    "text": "you should check whether the user ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=129"
  },
  {
    "text": "is able to make payments with the current configuration.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=130"
  },
  {
    "text": "Capabilities denote which types of payments ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=134"
  },
  {
    "text": "the sheet can currently accept, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=136"
  },
  {
    "text": "such as 3D Secure or credit or debit cards.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=138"
  },
  {
    "text": "You will later specify the capabilities you accept ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=141"
  },
  {
    "text": "when you configure the payment request.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=144"
  },
  {
    "text": "You can check for networks the user already has available, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=146"
  },
  {
    "text": "keeping in mind that the user is able to add more cards ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=148"
  },
  {
    "text": "if none are currently available.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=151"
  },
  {
    "text": "Now that you know your user can make payments, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=153"
  },
  {
    "text": "it's time to display the Apple Pay button.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=155"
  },
  {
    "text": "Make sure to select the best call to action and button type ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=158"
  },
  {
    "text": "in alignment with the action the user needs to take.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=161"
  },
  {
    "text": "Display the Apple Pay button prominently, above the fold, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=163"
  },
  {
    "text": "and as the first payment option.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=166"
  },
  {
    "text": "The Apple Pay button is fully localized ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=169"
  },
  {
    "text": "and can also be adapted for the user's settings.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=171"
  },
  {
    "text": "To display an Apple Pay button in your app with the UIKit, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=173"
  },
  {
    "text": "firstly, create a PKPaymentButton, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=176"
  },
  {
    "text": "specifying the type and style of the button.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=179"
  },
  {
    "text": "The type describes the kind of payment; for example, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=182"
  },
  {
    "text": "Donate with Apple Pay or Continue with Apple Pay.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=185"
  },
  {
    "text": "The style controls the appearance of the button, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=188"
  },
  {
    "text": "like whether it's light or dark.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=190"
  },
  {
    "text": "Use the automatic style for the button ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=192"
  },
  {
    "text": "to dynamically change based on the user's settings.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=194"
  },
  {
    "text": "On web, use a JavaScript Apple Pay button.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=196"
  },
  {
    "text": "To add one, first, load the button script ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=200"
  },
  {
    "text": "into your web page on your content delivery network.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=202"
  },
  {
    "text": "The JavaScript Apple Pay button also enables you ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=205"
  },
  {
    "text": "to specify type, style, and localization.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=207"
  },
  {
    "text": "You can also use CSS to further customize ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=211"
  },
  {
    "text": "the button's dimensions.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=213"
  },
  {
    "text": "We need to create a payment request ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=215"
  },
  {
    "text": "so that the payment sheet knows what to expect.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=216"
  },
  {
    "text": "In apps, we can do that by creating a PKPaymentRequest.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=219"
  },
  {
    "text": "There are many fields that can be set on the request ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=223"
  },
  {
    "text": "depending on your needs, but the essentials include ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=225"
  },
  {
    "text": "the merchant identifier you created earlier, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=227"
  },
  {
    "text": "the types of payments you can accept, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=230"
  },
  {
    "text": "the country and currency code of the payment.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=232"
  },
  {
    "text": "Specify the networks that you accept payments from.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=235"
  },
  {
    "text": "This should be done in order of preference so Apple Pay ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=238"
  },
  {
    "text": "and choose the preferred network for cobatched cards.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=240"
  },
  {
    "text": "Finally, summary items are included ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=243"
  },
  {
    "text": "as part of this transaction.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=245"
  },
  {
    "text": "Let's take a closer look at summary items.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=247"
  },
  {
    "text": "To do that, we can imagine that you run an online pet goods shop ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=250"
  },
  {
    "text": "and would like to offer customers ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=253"
  },
  {
    "text": "the ability to check out their orders with Apple Pay.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=254"
  },
  {
    "text": "These summary items consist of the total cost of the items ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=257"
  },
  {
    "text": "your customer has selected minus any discounts.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=260"
  },
  {
    "text": "They should help to break down the cost to a customer.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=263"
  },
  {
    "text": "The last summary item is always the total, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=266"
  },
  {
    "text": "and the label for this total must be the company ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=269"
  },
  {
    "text": "receiving the payment.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=271"
  },
  {
    "text": "It is required that there should be at least one item ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=272"
  },
  {
    "text": "set in the array here.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=274"
  },
  {
    "text": "Now, we're ready to display the payment sheet.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=276"
  },
  {
    "text": "First, we create a PKPayment AuthorizationViewController, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=279"
  },
  {
    "text": "sending in the request we set up moments ago.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=283"
  },
  {
    "text": "You are in charge of presenting viewController ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=286"
  },
  {
    "text": "that is returned to you.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=288"
  },
  {
    "text": "Now, let's have a look at this delegate we're setting.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=290"
  },
  {
    "text": "The PKPaymentAuthorization ViewControllerDelegate ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=293"
  },
  {
    "text": "is how the sheet communicates changes to you, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=296"
  },
  {
    "text": "such as when the user selects a new email address ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=298"
  },
  {
    "text": "or when they authorize the transaction.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=301"
  },
  {
    "text": "You should respond to the changes ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=303"
  },
  {
    "text": "that are appropriate to you; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=304"
  },
  {
    "text": "however, you are always responsible for dismissing ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=306"
  },
  {
    "text": "a payment sheet and should implement ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=309"
  },
  {
    "text": "paymentAuthorizationViewControll erDidFinish to handle this.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=311"
  },
  {
    "text": "You should always try to return errors to the user ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=314"
  },
  {
    "text": "as early as possible with a helpful description ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=317"
  },
  {
    "text": "to help them resolve the issue.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=319"
  },
  {
    "text": "For example, if there is a problem ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=321"
  },
  {
    "text": "with the user's new shipping address, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=323"
  },
  {
    "text": "you should return an error as part ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=324"
  },
  {
    "text": "of the PKPaymentRequest ShippingContactUpdate.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=326"
  },
  {
    "text": "didAuthorizePayment is called when the user is happy ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=329"
  },
  {
    "text": "with the details and uses Face ID, Touch ID, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=331"
  },
  {
    "text": "or their passcode to proceed with the transaction.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=334"
  },
  {
    "text": "You need to handle the PKPayment sent to you ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=337"
  },
  {
    "text": "either yourself or by passing it onto a payment processor.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=339"
  },
  {
    "text": "You must call the handler with an appropriate result.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=343"
  },
  {
    "text": "In iOS 16, we introduced the ability ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=347"
  },
  {
    "text": "to easily create an Apple Pay button in SwiftUI.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=349"
  },
  {
    "text": "All you need to do is pass in the payment request ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=352"
  },
  {
    "text": "when creating a Pay with Apple Pay button ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=354"
  },
  {
    "text": "and the payment sheet will display automatically ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=356"
  },
  {
    "text": "when the user interacts with the button.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=358"
  },
  {
    "text": "The type of the button, and optionally, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=361"
  },
  {
    "text": "the style can also be set.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=363"
  },
  {
    "text": "The payment authorization change is analogous ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=365"
  },
  {
    "text": "to the delegate we looked at on the previous slide.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=367"
  },
  {
    "text": "Let's look at how to respond to user updates.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=370"
  },
  {
    "text": "The user has just authorized a payment ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=373"
  },
  {
    "text": "and the payment authorization phase change ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=375"
  },
  {
    "text": "informs your app of this ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=377"
  },
  {
    "text": "Your app then sends the payment information to your server ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=379"
  },
  {
    "text": "and asks it to handle the payment.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=382"
  },
  {
    "text": "Check whether the server result indicates success ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=385"
  },
  {
    "text": "and handle any error returned by your server, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=387"
  },
  {
    "text": "ensuring you still call the result handler ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=390"
  },
  {
    "text": "with an appropriate error.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=392"
  },
  {
    "text": "If the server result does indicate success, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=393"
  },
  {
    "text": "complete the payment ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=396"
  },
  {
    "text": "with an appropriate authorization result.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=397"
  },
  {
    "text": "The result you return must contain what happened ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=399"
  },
  {
    "text": "when attempting to process the payment; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=401"
  },
  {
    "text": "for example, if the postal address is invalid.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=403"
  },
  {
    "text": "In most cases, the payment will have either succeeded or failed.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=406"
  },
  {
    "text": "If the payment did fail, you can also return ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=410"
  },
  {
    "text": "one or more errors ordered by importance.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=413"
  },
  {
    "text": "That will be displayed to the user ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=415"
  },
  {
    "text": "so they can try to transact again.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=416"
  },
  {
    "text": "This authorization result can optionally contain ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=418"
  },
  {
    "text": "order details, which we will look into shortly.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=420"
  },
  {
    "text": "Now let's have a look at how to do this on the web.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=423"
  },
  {
    "text": "The W3C payment request API is an open standard ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=426"
  },
  {
    "text": "that enables you to handle payments on the web.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=429"
  },
  {
    "text": "You can create the PaymentRequest object ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=431"
  },
  {
    "text": "and populate it with methods where you can specify ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=434"
  },
  {
    "text": "that Apple Pay is available; details which contains ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=436"
  },
  {
    "text": "information about the transaction, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=440"
  },
  {
    "text": "like the total and the shipping methods; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=442"
  },
  {
    "text": "and options which specifies what information ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=444"
  },
  {
    "text": "you want the user to provide.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=447"
  },
  {
    "text": "You'll have to complete merchant validation on your server, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=449"
  },
  {
    "text": "so create a new merchant session ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=451"
  },
  {
    "text": "and pass it into the complete function.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=453"
  },
  {
    "text": "Just like native, you can respond to interactions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=455"
  },
  {
    "text": "the user makes in the payment sheet ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=457"
  },
  {
    "text": "and you'll also need to handle the payment response ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=459"
  },
  {
    "text": "when the user authenticates.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=461"
  },
  {
    "text": "Now that you're all integrated with Apple Pay, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=463"
  },
  {
    "text": "we can start actually building an order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=465"
  },
  {
    "text": "In iOS 16, we introduced order tracking.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=467"
  },
  {
    "text": "Your customers can now see order details ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=470"
  },
  {
    "text": "and tracking information, all from within the Wallet app.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=472"
  },
  {
    "text": "They'll be able to know instantly ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=475"
  },
  {
    "text": "when they can pick up their orders, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=477"
  },
  {
    "text": "if the orders have been delivered, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=478"
  },
  {
    "text": "if there have been any problems, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=480"
  },
  {
    "text": "or received notifications.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=482"
  },
  {
    "text": "So now that you've successfully integrated ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=484"
  },
  {
    "text": "your pet shop business with Apple Pay, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=486"
  },
  {
    "text": "you may also like to add order tracking.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=487"
  },
  {
    "text": "Let's see how.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=490"
  },
  {
    "text": "You'll notice that getting started with orders ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=492"
  },
  {
    "text": "is similar to setting up Apple Pay.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=493"
  },
  {
    "text": "Head back over to the Identifiers section ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=496"
  },
  {
    "text": "of the Developer portal ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=498"
  },
  {
    "text": "and create an order type identifier.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=499"
  },
  {
    "text": "This identifies your organization ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=503"
  },
  {
    "text": "as an entity that provides order information.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=505"
  },
  {
    "text": "Like with the merchant identifier, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=508"
  },
  {
    "text": "we recommend using a similar reverse DNS-style naming scheme, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=510"
  },
  {
    "text": "this time prepending the word \"order.\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=513"
  },
  {
    "text": "Next, create an Order Type ID certificate ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=516"
  },
  {
    "text": "from the certificate section of the developer portal.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=519"
  },
  {
    "text": "You will use a Certificate to build order packages, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=522"
  },
  {
    "text": "update orders, and send notifications.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=524"
  },
  {
    "text": "Now that we've got that set up, we can add an order to Wallet ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=528"
  },
  {
    "text": "from right within the Apple Pay purchasing flow.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=531"
  },
  {
    "text": "To do that, let's take a look back ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=534"
  },
  {
    "text": "at our simple payment processing flow ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=536"
  },
  {
    "text": "you should recognize from earlier.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=537"
  },
  {
    "text": "We already know your server is sent payment information ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=540"
  },
  {
    "text": "for processing.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=542"
  },
  {
    "text": "If the payment is successfully processed, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=543"
  },
  {
    "text": "your server should create an order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=545"
  },
  {
    "text": "To support order tracking in the result you return, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=548"
  },
  {
    "text": "you should also include some details ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=550"
  },
  {
    "text": "about the order you created.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=552"
  },
  {
    "text": "These order details enable the device ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=554"
  },
  {
    "text": "to asynchronously request the order from your server.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=556"
  },
  {
    "text": "Your server then turns the order package to the device, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=559"
  },
  {
    "text": "which will then be displayed in Wallet.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=561"
  },
  {
    "text": "For now, let's take a closer look ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=563"
  },
  {
    "text": "at the order details you'll need to return ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=565"
  },
  {
    "text": "as part of the PKPayment authorization result.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=567"
  },
  {
    "text": "The order details is comprised of four fields.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=570"
  },
  {
    "text": "The order type identifier ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=573"
  },
  {
    "text": "is simply the one you created earlier.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=575"
  },
  {
    "text": "You should generate a way to identify your order, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=577"
  },
  {
    "text": "but it must be unique within the scope ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=580"
  },
  {
    "text": "of your order type identifier.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=581"
  },
  {
    "text": "Include the URL for your web service.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=583"
  },
  {
    "text": "Finally, your server needs to generate ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=587"
  },
  {
    "text": "a secure authentication token.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=589"
  },
  {
    "text": "This is a shared secret between the user's devices ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=591"
  },
  {
    "text": "and your server.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=593"
  },
  {
    "text": "The device will use this token to authenticate itself ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=594"
  },
  {
    "text": "when requesting the order package.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=597"
  },
  {
    "text": "This example initially looks very similar ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=600"
  },
  {
    "text": "to the normal payment authorization flow ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=601"
  },
  {
    "text": "we saw earlier.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=603"
  },
  {
    "text": "Let's add the order details in.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=605"
  },
  {
    "text": "First, grab them from the serverResult, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=607"
  },
  {
    "text": "then create a PKPaymentOrderDetails object, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=610"
  },
  {
    "text": "setting the Order Type ID, order ID, web service URL, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=613"
  },
  {
    "text": "and the authentication token.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=617"
  },
  {
    "text": "Assign this to your PKPayment authorization result.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=619"
  },
  {
    "text": "On the web, it's also simple to add your order details ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=623"
  },
  {
    "text": "using the W3C Payment Request API.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=625"
  },
  {
    "text": "Like before, extract the order details from the server result.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=629"
  },
  {
    "text": "Return these order details ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=633"
  },
  {
    "text": "and the data you complete the payment with.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=634"
  },
  {
    "text": "After the order details have been returned the device, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=638"
  },
  {
    "text": "those details will be synched ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=640"
  },
  {
    "text": "across each of the user's devices.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=641"
  },
  {
    "text": "Each device will request the order package from your server, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=644"
  },
  {
    "text": "providing the order details.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=647"
  },
  {
    "text": "Verify the authentication token by matching it ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=649"
  },
  {
    "text": "to the one you sent with the order details.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=651"
  },
  {
    "text": "Provided the authentication token matches, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=654"
  },
  {
    "text": "return the order package to the device.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=656"
  },
  {
    "text": "Now the order is ready to display in Wallet ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=659"
  },
  {
    "text": "for that device.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=661"
  },
  {
    "text": "You should attempt to repair your order as soon as possible ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=663"
  },
  {
    "text": "so that it's available as soon as the device requests it.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=666"
  },
  {
    "text": "If your server fails to return the order, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=669"
  },
  {
    "text": "the device will attempt multiple retries ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=672"
  },
  {
    "text": "with an exponential backoff.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=674"
  },
  {
    "text": "We've seen this order package referenced many times now, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=676"
  },
  {
    "text": "but what exactly is it comprised of? ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=679"
  },
  {
    "text": "Orders are distributed as order packages.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=682"
  },
  {
    "text": "They contain everything needed to display your order ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=685"
  },
  {
    "text": "to the user and prove it's from you.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=687"
  },
  {
    "text": "An order package contains a JSON dictionary ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=689"
  },
  {
    "text": "that describes your order, images like your logo, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=691"
  },
  {
    "text": "and an inline image for each item in your order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=695"
  },
  {
    "text": "Refer to the Human Interface Guidelines ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=698"
  },
  {
    "text": "and the referral sources for guidance on creating images.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=700"
  },
  {
    "text": "Also include localized resources like strings files.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=703"
  },
  {
    "text": "Keep an eye out for the total order size ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=707"
  },
  {
    "text": "and only include what's relevant.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=709"
  },
  {
    "text": "All of this content is described in another JSON dictionary ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=711"
  },
  {
    "text": "called the \"manifest.\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=714"
  },
  {
    "text": "You can think of it like a table of contents.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=716"
  },
  {
    "text": "It contains a reference to all the files in the order package.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=718"
  },
  {
    "text": "The key for an entry is the relative file path ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=722"
  },
  {
    "text": "and the value is the files' SHA256 checksum ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=724"
  },
  {
    "text": "which is a different checksum to what's used in parses.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=728"
  },
  {
    "text": "Now what we need to do is sign the package ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=731"
  },
  {
    "text": "to prove its authenticity.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=733"
  },
  {
    "text": "The signature verifies that the order package ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=735"
  },
  {
    "text": "originates from a trusted source -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=737"
  },
  {
    "text": "you.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=739"
  },
  {
    "text": "It is a detached cryptographic message signature ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=740"
  },
  {
    "text": "of the manifest, same as parses.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=743"
  },
  {
    "text": "Sign the manifest with the private key ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=746"
  },
  {
    "text": "associated with your Order Type ID certificate ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=747"
  },
  {
    "text": "and with the Apple Worldwide Developer Relations ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=750"
  },
  {
    "text": "Intermediate Certificate, ensuring you use ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=752"
  },
  {
    "text": "the renewed version of the certificate.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=754"
  },
  {
    "text": "To finish building the order, simply compress the package ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=756"
  },
  {
    "text": "and change the file extension to order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=760"
  },
  {
    "text": "Now it's time to update your order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=762"
  },
  {
    "text": "Order information often changes over time; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=765"
  },
  {
    "text": "for example, the order of pet goodies ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=768"
  },
  {
    "text": "your customer made earlier is now on its way.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=770"
  },
  {
    "text": "Supporting automatic updates enables you to deliver ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=773"
  },
  {
    "text": "this update to your customer quickly and securely.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=776"
  },
  {
    "text": "Your customer now has their pet supplies order in Wallet, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=779"
  },
  {
    "text": "and the order indicates support for updates, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=782"
  },
  {
    "text": "so the device will register with your web service.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=784"
  },
  {
    "text": "Later on, the customer's order is now out for delivery, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=787"
  },
  {
    "text": "so your server will notify all registered devices ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=790"
  },
  {
    "text": "using the registration information.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=793"
  },
  {
    "text": "When the customer's device receives the push notification, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=795"
  },
  {
    "text": "it will now ask for the order from your server.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=798"
  },
  {
    "text": "Your server then returns the updated order package ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=801"
  },
  {
    "text": "to the device.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=803"
  },
  {
    "text": "Now that we know how a basic order flow works, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=805"
  },
  {
    "text": "let's break down the exact steps you'll need to take ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=808"
  },
  {
    "text": "to support order updates.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=810"
  },
  {
    "text": "First, indicate that you support updates for an order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=812"
  },
  {
    "text": "It's super easy to tell Wallet that your order ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=816"
  },
  {
    "text": "supports updates; you just need to include ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=818"
  },
  {
    "text": "two pieces of information in the order package.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=820"
  },
  {
    "text": "In the order.json, add the webServiceURL you'd like.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=823"
  },
  {
    "text": "This would be the same one you provided in the order details.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=827"
  },
  {
    "text": "Also add an authenticationToken field, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=831"
  },
  {
    "text": "which Wallet will use to prove its authenticity ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=833"
  },
  {
    "text": "when requesting order updates.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=835"
  },
  {
    "text": "You'll have to manage when devices ask to add ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=837"
  },
  {
    "text": "or remove themselves from being registered.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=839"
  },
  {
    "text": "Your server must be able to handle ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=842"
  },
  {
    "text": "adding or removing registration information.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=844"
  },
  {
    "text": "It must be able to find the devices ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=847"
  },
  {
    "text": "that registered for updates to an order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=849"
  },
  {
    "text": "This enables your server to notify these devices ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=851"
  },
  {
    "text": "when you update the order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=854"
  },
  {
    "text": "Your server must also be able to find the orders ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=855"
  },
  {
    "text": "that a device registered for so that your server knows ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=857"
  },
  {
    "text": "which updated orders are relevant for that device.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=860"
  },
  {
    "text": "There are different ways ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=863"
  },
  {
    "text": "you could structure this information.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=864"
  },
  {
    "text": "One way will be to use a relational database ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=866"
  },
  {
    "text": "with two entities -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=868"
  },
  {
    "text": "one for devices and one for orders -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=870"
  },
  {
    "text": "and a many-to-many relationship for registrations.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=872"
  },
  {
    "text": "When the order is updated, your server needs to notify ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=875"
  },
  {
    "text": "the registered devices.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=878"
  },
  {
    "text": "So your server needs to grab the relevant devices ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=880"
  },
  {
    "text": "based on the stored registration information, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=883"
  },
  {
    "text": "then send a push notification to each device ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=885"
  },
  {
    "text": "using its push token.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=888"
  },
  {
    "text": "The Order Type ID doubles as push topic, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=890"
  },
  {
    "text": "and the payload should be empty.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=892"
  },
  {
    "text": "You can use the Order Type ID certificate ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=894"
  },
  {
    "text": "to communicate with APNs.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=896"
  },
  {
    "text": "One more thing to note about notifications ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=899"
  },
  {
    "text": "is that the enum property changeNotifications ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=900"
  },
  {
    "text": "can be set on the order package to customize ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=903"
  },
  {
    "text": "how you'd like order notifications to be delivered.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=905"
  },
  {
    "text": "The options available are enabled, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=908"
  },
  {
    "text": "which will always send order update notifications ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=911"
  },
  {
    "text": "and is the default value.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=913"
  },
  {
    "text": "If you don't want Wallet to duplicate your notifications, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=916"
  },
  {
    "text": "set disableIfAppInstalled which will not send notifications ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=919"
  },
  {
    "text": "if the user has apps installed that you listed ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=922"
  },
  {
    "text": "in the order package.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=925"
  },
  {
    "text": "The registered devices will each ask for the new order package ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=926"
  },
  {
    "text": "which your server will provide.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=930"
  },
  {
    "text": "When a device receives a push notification, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=932"
  },
  {
    "text": "it doesn't know yet which orders have changed, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=934"
  },
  {
    "text": "as the push notification is empty.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=936"
  },
  {
    "text": "Together with your server, the device figures out ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=938"
  },
  {
    "text": "which orders have changed since the last time it requested them.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=941"
  },
  {
    "text": "Use the registration information your server stored ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=944"
  },
  {
    "text": "to find relevant orders, then return their IDs.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=946"
  },
  {
    "text": "Keep track of update times and include a modification tag ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=950"
  },
  {
    "text": "in your response to limit the number of Order IDs ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=954"
  },
  {
    "text": "returned by future requests.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=956"
  },
  {
    "text": "You can use a timestamp, for example.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=958"
  },
  {
    "text": "The value is opaque to the device.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=961"
  },
  {
    "text": "The device will provide the modification tag ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=963"
  },
  {
    "text": "the next time it requests changes.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=965"
  },
  {
    "text": "Finally, the device will request the latest package ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=968"
  },
  {
    "text": "for each order your server indicated is updated.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=970"
  },
  {
    "text": "We've covered a lot today.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=973"
  },
  {
    "text": "Follow these practices to provide ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=976"
  },
  {
    "text": "the best customer experience possible.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=977"
  },
  {
    "text": "When implementing Apple Pay, offer express checkout ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=979"
  },
  {
    "text": "by displaying the Apple Pay button ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=982"
  },
  {
    "text": "on the product or cart page.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=984"
  },
  {
    "text": "Users can select shipping options and addresses ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=986"
  },
  {
    "text": "directly in the payment sheet ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=988"
  },
  {
    "text": "and check out without typing anything.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=989"
  },
  {
    "text": "When implementing order tracking, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=991"
  },
  {
    "text": "use the knowledge you have about your customer preferences ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=993"
  },
  {
    "text": "to provide relevant localizations only.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=995"
  },
  {
    "text": "Additionally, be mindful of the number of assets ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=998"
  },
  {
    "text": "you include to keep the order package size small.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1000"
  },
  {
    "text": "When you update an order, promptly notify devices ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1003"
  },
  {
    "text": "that registered for updates to it.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1006"
  },
  {
    "text": "Orders in Wallet should match the actual state of the order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1008"
  },
  {
    "text": "Make sure to also check out the Human Interface Guidelines ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1011"
  },
  {
    "text": "for order tracking and also in displaying the Apple Pay button.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1014"
  },
  {
    "text": "Today, I've covered getting started implementing Apple Pay ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1018"
  },
  {
    "text": "through the building and updating an order.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1020"
  },
  {
    "text": "This talk is intended to introduce you ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1022"
  },
  {
    "text": "to implementing Apple Pay and order tracking, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1025"
  },
  {
    "text": "but you should definitely check out the documentation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1027"
  },
  {
    "text": "linked in the session notes to dig into more details.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1029"
  },
  {
    "text": "Additionally, you can check out our most recent WWDC video.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1032"
  },
  {
    "text": "Thank you so much for your time today.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1036"
  },
  {
    "text": "And I hope you enjoy the rest of your day.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110336/?time=1039"
  }
]