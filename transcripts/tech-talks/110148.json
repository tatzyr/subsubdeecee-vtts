[
  {
    "text": "Jon Davis: Hello, I'm Jon Davis, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1"
  },
  {
    "text": "web technologies evangelist for the Safari and WebKit teams. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=2"
  },
  {
    "text": "I'm excited to be your guide on how to build ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=7"
  },
  {
    "text": "and deploy Safari extensions for iOS. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=9"
  },
  {
    "text": "Now, there are a couple of different types ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=13"
  },
  {
    "text": "of extensions for iOS. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=14"
  },
  {
    "text": "We've had content blockers on iOS for a few years, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=16"
  },
  {
    "text": "and that's a type of extension that allows you to configure ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=19"
  },
  {
    "text": "powerful rules to block resource loads. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=22"
  },
  {
    "text": "But I'm here to tell you about Safari web extensions. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=25"
  },
  {
    "text": "They were introduced last year on macOS Big Sur ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=28"
  },
  {
    "text": "and this fall, we brought them to iOS 15 and iPadOS 15. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=31"
  },
  {
    "text": "It's a type of extension that uses web technologies ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=36"
  },
  {
    "text": "that works across other browsers, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=40"
  },
  {
    "text": "and our users are loving them. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=42"
  },
  {
    "text": "It's the most popular category on the App Store, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=44"
  },
  {
    "text": "and they're easy to install, like any other app. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=46"
  },
  {
    "text": "And that's because Safari web extensions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=49"
  },
  {
    "text": "are distributed with an app. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=51"
  },
  {
    "text": "And that means you get the benefits ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=54"
  },
  {
    "text": "of being on the App Store. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=56"
  },
  {
    "text": "Users can discover your extensions, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=58"
  },
  {
    "text": "you can easily sell your extensions up front -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=60"
  },
  {
    "text": "You can even take advantage ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=63"
  },
  {
    "text": "of powerful features like in-app payments ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=65"
  },
  {
    "text": "to unlock advanced features of your extensions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=67"
  },
  {
    "text": "or use TestFlight to run a beta program. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=70"
  },
  {
    "text": "But maybe you're saying, \"That's all well and good, John, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=72"
  },
  {
    "text": "but I'm a web developer, not an app developer.\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=75"
  },
  {
    "text": "Well, me too! And they asked me to be your guide. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=78"
  },
  {
    "text": "So I'm here to help you learn Xcode, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=81"
  },
  {
    "text": "and we're going to build a new project from scratch. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=83"
  },
  {
    "text": "I'm also going to touch on ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=87"
  },
  {
    "text": "the privacy-preserving permissions model of Safari ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=88"
  },
  {
    "text": "and how to submit your extension ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=92"
  },
  {
    "text": "with some tips on sailing through that App Review process. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=93"
  },
  {
    "text": "So let's get started working with Xcode. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=98"
  },
  {
    "text": "And to do that, we'll need to download and install it ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=102"
  },
  {
    "text": "from the App Store. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=105"
  },
  {
    "text": "I'm going to launch the App Store, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=107"
  },
  {
    "text": "and in Search I'll type \"Xcode\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=108"
  },
  {
    "text": "and it comes up just about right away. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=111"
  },
  {
    "text": "And then all you need to do is click the Get button ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=113"
  },
  {
    "text": "and then click Install. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=115"
  },
  {
    "text": "Now, it is a sizeable download that'll take a while ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=117"
  },
  {
    "text": "but when you're able to launch it, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=120"
  },
  {
    "text": "Xcode will prompt you to install Command Line Tools. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=121"
  },
  {
    "text": "If you skipped installing them, you can easily do that later ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=125"
  },
  {
    "text": "from the command line in Terminal. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=128"
  },
  {
    "text": "You'll just need to type \"xcode-select\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=132"
  },
  {
    "text": "and add the install flag, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=136"
  },
  {
    "text": "and that'll kick off the install process. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=137"
  },
  {
    "text": "Now, my environment is ready to go, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=139"
  },
  {
    "text": "so I won't run this command now, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=142"
  },
  {
    "text": "but you'll want to make sure you have them installed ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=144"
  },
  {
    "text": "because they include an important tool ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=145"
  },
  {
    "text": "called the Safari web extension converter. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=147"
  },
  {
    "text": "It's useful if you've written ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=151"
  },
  {
    "text": "a web extension for another browser ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=152"
  },
  {
    "text": "or one you've written for Safari on macOS ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=154"
  },
  {
    "text": "that you'd like to upgrade with support for Safari on iOS. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=156"
  },
  {
    "text": "Now I have a simple demo web extension in my Documents folder ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=161"
  },
  {
    "text": "and this hello-world extension is written for another browser, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=164"
  },
  {
    "text": "and it simply shows a \"Hello World\" message ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=168"
  },
  {
    "text": "in a pop-up. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=171"
  },
  {
    "text": "Now I can use the converter tool to upgrade it to work with iOS. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=173"
  },
  {
    "text": "In Terminal, just type \"xc\", as in Xcode -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=177"
  },
  {
    "text": "so that's \"xcrun\". ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=179"
  },
  {
    "text": "And then \"safari-web-extension-converter\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=183"
  },
  {
    "text": "and a path to the project. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=186"
  },
  {
    "text": "If you have an extension written for Safari on macOS, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=188"
  },
  {
    "text": "you can also upgrade it using the converter tool. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=191"
  },
  {
    "text": "Just type \"xcrun safari-web-extension-converter\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=194"
  },
  {
    "text": "and add the rebuild-project flag ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=198"
  },
  {
    "text": "followed by the path to the macOS extension. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=200"
  },
  {
    "text": "But let's actually see what the convertor tool does ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=204"
  },
  {
    "text": "when we run it on the Hello World extension.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=206"
  },
  {
    "text": "And pressing Return, it begins the process. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=213"
  },
  {
    "text": "And what it's actually doing is wrapping our extension ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=216"
  },
  {
    "text": "into an app project that we can compile and run ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=218"
  },
  {
    "text": "for iOS and macOS. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=221"
  },
  {
    "text": "Now, switching back to the Terminal for a moment, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=224"
  },
  {
    "text": "I want to point out this note that has a warning here, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=226"
  },
  {
    "text": "showing that iOS extensions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=229"
  },
  {
    "text": "require nonpersistent background pages. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=231"
  },
  {
    "text": "This is actually really great because it's basically giving us ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=233"
  },
  {
    "text": "a to-do list of the things we'll need to check ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=236"
  },
  {
    "text": "to make sure our extension will work for iOS. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=238"
  },
  {
    "text": "Let's get back into Xcode. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=242"
  },
  {
    "text": "This extension is almost ready. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=244"
  },
  {
    "text": "The background script is already set up to run ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=246"
  },
  {
    "text": "in a nonpersistent way. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=249"
  },
  {
    "text": "We just need to tell Safari to run it that way. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=251"
  },
  {
    "text": "So all I need to do to get this to work for iOS ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=254"
  },
  {
    "text": "is to edit the manifest file. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=258"
  },
  {
    "text": "And in the background section, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=261"
  },
  {
    "text": "I'll add the persistent key with a value of false. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=263"
  },
  {
    "text": "And that's it! ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=270"
  },
  {
    "text": "Let's try running this in the simulator. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=271"
  },
  {
    "text": "I'm going to use the Build Targets menu ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=274"
  },
  {
    "text": "and choose iPhone 13 Pro. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=276"
  },
  {
    "text": "Now, I have a lot of simulators installed already, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=278"
  },
  {
    "text": "but you may need to use the Add Additional Simulators ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=281"
  },
  {
    "text": "to download the ones you'd like to test in. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=283"
  },
  {
    "text": "So I'll select iPhone 13 Pro and click the build and run button; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=286"
  },
  {
    "text": "the one that looks like a play button. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=290"
  },
  {
    "text": "And this is going to build our app ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=292"
  },
  {
    "text": "and launch it in the simulator. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=293"
  },
  {
    "text": "You can see the status here ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=295"
  },
  {
    "text": "in the upper-right of the status bar. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=296"
  },
  {
    "text": "Now, switching to the simulator, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=298"
  },
  {
    "text": "I'll need to wait until the app gets installed and launches.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=300"
  },
  {
    "text": "Once it's launched, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=307"
  },
  {
    "text": "I can switch over to the Settings app, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=309"
  },
  {
    "text": "find the Safari section, and tap on Extensions, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=313"
  },
  {
    "text": "and then turn on our Hello World extension. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=318"
  },
  {
    "text": "Now we can try it out in Safari. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=324"
  },
  {
    "text": "Launch Safari and tap the Aa menu. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=326"
  },
  {
    "text": "There, you'll find the Hello World extension, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=330"
  },
  {
    "text": "and I can tap on it, and it prompts for permission. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=332"
  },
  {
    "text": "I'll talk more about that later, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=335"
  },
  {
    "text": "but for now, I'll select Allow For One Day. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=336"
  },
  {
    "text": "And there we go. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=339"
  },
  {
    "text": "A \"Hello World!\" message in a pop-up. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=340"
  },
  {
    "text": "And that's how easy it is for you to convert a web extension ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=343"
  },
  {
    "text": "written for another browser. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=346"
  },
  {
    "text": "So I had an idea for a project ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=349"
  },
  {
    "text": "to build a preview of Open Graph metadata; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=351"
  },
  {
    "text": "the same metadata that's used to show previews ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=354"
  },
  {
    "text": "on social media sites like Twitter. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=357"
  },
  {
    "text": "You get this nice image, a title, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=359"
  },
  {
    "text": "and description of the web page. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=361"
  },
  {
    "text": "And so, I'd like to build an extension ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=364"
  },
  {
    "text": "that can preview that data using a pop-up. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=366"
  },
  {
    "text": "So that's what we're going to build today. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=368"
  },
  {
    "text": "So let's start by creating a new project in Xcode. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=373"
  },
  {
    "text": "I'll select Safari Extension App under Multiplatform ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=378"
  },
  {
    "text": "and click Next. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=383"
  },
  {
    "text": "For the product name ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=387"
  },
  {
    "text": "I'm going to use \"Open Graph Preview.\" ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=388"
  },
  {
    "text": "It already has my team filled in and an organization identifier ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=392"
  },
  {
    "text": "using the reverse domain convention. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=396"
  },
  {
    "text": "I'll leave the language as Swift and click Next. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=398"
  },
  {
    "text": "Now it's asking for a place to save the project -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=403"
  },
  {
    "text": "the desktop will work fine -- and I'm going to leave ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=406"
  },
  {
    "text": "the \"Create Git repository on Mac\" enabled -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=408"
  },
  {
    "text": "I love having version control built in -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=412"
  },
  {
    "text": "and I'll click Create. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=415"
  },
  {
    "text": "And this will generate the project for us ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=418"
  },
  {
    "text": "from the template. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=420"
  },
  {
    "text": "Now, before we go any further, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=422"
  },
  {
    "text": "let me give you a brief overview of Xcode. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=424"
  },
  {
    "text": "On the left side of the window is the navigation sidebar ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=429"
  },
  {
    "text": "with all of the resources for your project organized for you. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=432"
  },
  {
    "text": "In the center is the main editor ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=438"
  },
  {
    "text": "for the files you select from the navigator sidebar ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=440"
  },
  {
    "text": "and then the right is an inspector sidebar ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=443"
  },
  {
    "text": "that changes based on the file you're editing. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=445"
  },
  {
    "text": "We're not going to need the inspector sidebar ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=449"
  },
  {
    "text": "so I'm going to go ahead and hide it so that we have ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=451"
  },
  {
    "text": "a little bit more room to work with. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=454"
  },
  {
    "text": "Now let's take a look at the files that make up ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=458"
  },
  {
    "text": "a new Safari web extension project, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=460"
  },
  {
    "text": "and at the top of the navigator sidebar is the project file. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=462"
  },
  {
    "text": "When you select it, it opens the main editor ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=466"
  },
  {
    "text": "to a configuration option screen for the project. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=468"
  },
  {
    "text": "Now below that is the Shared (App) folder, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=473"
  },
  {
    "text": "and this has the resources for the app launch screen. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=475"
  },
  {
    "text": "When you click the disclosure triangle ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=478"
  },
  {
    "text": "next to the Resources folder, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=480"
  },
  {
    "text": "you'll see it's just web resources. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=481"
  },
  {
    "text": "In fact, it's just an HTML file that you can edit, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=485"
  },
  {
    "text": "and the template sets you up to easily customize the markup, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=488"
  },
  {
    "text": "the styles, and the script. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=491"
  },
  {
    "text": "The Shared (Extensions) folder has all of the resources ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=493"
  },
  {
    "text": "for our extension. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=496"
  },
  {
    "text": "And then when you expand the Resources folder, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=498"
  },
  {
    "text": "you'll see all the familiar files for a web extension. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=501"
  },
  {
    "text": "The manifest is here, the background script, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=507"
  },
  {
    "text": "the content script, and the pop-up files. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=510"
  },
  {
    "text": "The iOS (App) and macOS (App) folders ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=514"
  },
  {
    "text": "have platform-specific resources and then below that ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=518"
  },
  {
    "text": "the iOS (Extension) and macOS (Extension) folders ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=522"
  },
  {
    "text": "have extension-specific resources for those platforms. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=526"
  },
  {
    "text": "We're not going to need to worry about them for this project, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=529"
  },
  {
    "text": "so I'm going to go ahead and put them away ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=531"
  },
  {
    "text": "because all of our work will be in the Shared (Extension) files. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=533"
  },
  {
    "text": "And let's start in the manifest file. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=538"
  },
  {
    "text": "And you can see that the template provides ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=543"
  },
  {
    "text": "everything we need to get started, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=545"
  },
  {
    "text": "including filling out the name and description ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=547"
  },
  {
    "text": "from the project information. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=550"
  },
  {
    "text": "Below that, it specifies some default icons; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=554"
  },
  {
    "text": "you'll want to remember to provide your own ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=557"
  },
  {
    "text": "for your project.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=559"
  },
  {
    "text": "And then here, it provides a background script, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=564"
  },
  {
    "text": "and you can see it's already set up ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=567"
  },
  {
    "text": "to run the background script in a nonpersistent way. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=568"
  },
  {
    "text": "Now, for this project, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=572"
  },
  {
    "text": "we're actually not going to need the background script, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=573"
  },
  {
    "text": "so I'm going to go ahead and remove this entry ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=575"
  },
  {
    "text": "from the manifest file and go ahead and remove ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=578"
  },
  {
    "text": "the background script itself and move that to the trash. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=581"
  },
  {
    "text": "Next, it sets up the content script, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=589"
  },
  {
    "text": "and here is where it declares the JavaScript file ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=591"
  },
  {
    "text": "and the domain pattern for the website it can be injected on. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=593"
  },
  {
    "text": "Now, I want this tool to be usable on any site ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=597"
  },
  {
    "text": "the user wants to use it on, so I'm actually going to change ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=600"
  },
  {
    "text": "the \"example.com\" here to an asterisk ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=604"
  },
  {
    "text": "so it can match any domain. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=607"
  },
  {
    "text": "Below that, it declares the browser action section ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=611"
  },
  {
    "text": "and here we define a \"popup\" file ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=615"
  },
  {
    "text": "and then a set of default toolbar icons -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=618"
  },
  {
    "text": "again, you'll want to remember to supply your own ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=620"
  },
  {
    "text": "for your project. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=623"
  },
  {
    "text": "And finally, we have the permissions key, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=625"
  },
  {
    "text": "where I'm going to add activeTab ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=627"
  },
  {
    "text": "as a permission we're going to use. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=629"
  },
  {
    "text": "Why activeTab? ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=631"
  },
  {
    "text": "I'm so glad you asked.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=633"
  },
  {
    "text": "Let's take a quick look ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=637"
  },
  {
    "text": "at the different permissions extensions can use. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=638"
  },
  {
    "text": "The extensions model in Safari is set up ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=642"
  },
  {
    "text": "to put users in control. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=644"
  },
  {
    "text": "It doesn't work without user interaction first, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=647"
  },
  {
    "text": "and so they're badged on first use ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=649"
  },
  {
    "text": "to help train users. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=651"
  },
  {
    "text": "Permissions are granted per website, and that means ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=654"
  },
  {
    "text": "website permissions will show up in Safari's settings ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=657"
  },
  {
    "text": "and preferences for users to control. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=660"
  },
  {
    "text": "Now, there are four fun flavors of permissions to look at. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=664"
  },
  {
    "text": "Let's go through each. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=668"
  },
  {
    "text": "The first type of permission is the script injection permission. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=670"
  },
  {
    "text": "This allows you to inject JavaScript ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=674"
  },
  {
    "text": "and even style sheets into the page a user is browsing, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=676"
  },
  {
    "text": "based on the domains of websites listed in the matches key. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=680"
  },
  {
    "text": "Extensions injecting scripts get badged in the toolbar ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=685"
  },
  {
    "text": "when the website the user is browsing ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=689"
  },
  {
    "text": "matches the pattern in the matches key. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=691"
  },
  {
    "text": "The user will need to click the extension to enable it. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=693"
  },
  {
    "text": "And it's always just sitting there, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=697"
  },
  {
    "text": "waiting to be enabled by the user. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=698"
  },
  {
    "text": "The next type of permission is the implicit permission. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=702"
  },
  {
    "text": "Now, there are a couple of different types ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=705"
  },
  {
    "text": "of implicit permissions declared in the manifest file. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=707"
  },
  {
    "text": "The first that I have highlighted here ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=710"
  },
  {
    "text": "are nonsensitive, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=712"
  },
  {
    "text": "which doesn't require any extra privileges. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=713"
  },
  {
    "text": "And the second type are sensitive permissions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=717"
  },
  {
    "text": "because they have a website-identifying data, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=719"
  },
  {
    "text": "and this is one of the ways that we protect user privacy. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=721"
  },
  {
    "text": "When you call an API, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=726"
  },
  {
    "text": "it waits for a callback with the data. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=728"
  },
  {
    "text": "Users get prompted after interacting with the extension, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=730"
  },
  {
    "text": "and they'll have about a minute to respond. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=733"
  },
  {
    "text": "When they approve it, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=737"
  },
  {
    "text": "the callback gets fulfilled and the data is given back. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=738"
  },
  {
    "text": "Anything they've already approved gets fulfilled ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=741"
  },
  {
    "text": "just about right away. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=743"
  },
  {
    "text": "The next type of permission is the explicit permission, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=746"
  },
  {
    "text": "and this is explicit because the extension itself ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=748"
  },
  {
    "text": "is requesting permission. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=751"
  },
  {
    "text": "A prompt is always shown modally, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=754"
  },
  {
    "text": "and it's not badged because it's the extension itself ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=756"
  },
  {
    "text": "requesting permission, not the user. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=759"
  },
  {
    "text": "And the last type of permission is the active tab permission. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=762"
  },
  {
    "text": "This is a special case where if you want to avoid alerts, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=765"
  },
  {
    "text": "active tab is the answer. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=768"
  },
  {
    "text": "Users will need to interact with the extension ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=770"
  },
  {
    "text": "via the toolbar, or on Mac they can use a keyboard shortcut ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=772"
  },
  {
    "text": "or a contextual menu. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=775"
  },
  {
    "text": "This grants a tabs permission for the current domain ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=777"
  },
  {
    "text": "in the current tab. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=780"
  },
  {
    "text": "And that's the one we want to use today. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=783"
  },
  {
    "text": "Now let's move on to coding the content script. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=787"
  },
  {
    "text": "And the content script template ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=790"
  },
  {
    "text": "is set up to send and listen for messages. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=791"
  },
  {
    "text": "Now, we won't need to send a message from the content script, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=794"
  },
  {
    "text": "but we will need to listen for one. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=796"
  },
  {
    "text": "The first thing we need our content script to do ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=799"
  },
  {
    "text": "is to grab the Open Graph metadata from the page ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=801"
  },
  {
    "text": "the user is browsing, and we can just use ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=804"
  },
  {
    "text": "some simple DOM API to find the right meta tags ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=806"
  },
  {
    "text": "for the OG title, description, and image. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=810"
  },
  {
    "text": "Now, the way the extension will work, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=814"
  },
  {
    "text": "the user will tap on the extension to open the pop-up ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=816"
  },
  {
    "text": "and it will be the pop-up script's job ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=820"
  },
  {
    "text": "to ask the content script for the Open Graph data ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=823"
  },
  {
    "text": "from the current page. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=826"
  },
  {
    "text": "So in this listener callback, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=827"
  },
  {
    "text": "we want to listen for a message with the magic word. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=829"
  },
  {
    "text": "Now, if we get a message without the magic word, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=834"
  },
  {
    "text": "then we're just not going to do anything. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=839"
  },
  {
    "text": "In fact, we'll just return void here. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=841"
  },
  {
    "text": "But if we do get a message with the magic word, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=843"
  },
  {
    "text": "then we'll send back the data from the meta tags. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=846"
  },
  {
    "text": "And that's all we need to do in the content script. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=850"
  },
  {
    "text": "So let's move on to setting up our pop-up, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=853"
  },
  {
    "text": "and we'll start in the pop-up HTML file. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=857"
  },
  {
    "text": "You can see the style sheet and the JavaScript for the pop-up ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=859"
  },
  {
    "text": "are included right here. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=863"
  },
  {
    "text": "So for web developers, you're going to feel right at home. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=865"
  },
  {
    "text": "Now for our markup in this file, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=867"
  },
  {
    "text": "we just need to set up some placeholder elements ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=869"
  },
  {
    "text": "for our title and description and image previews. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=871"
  },
  {
    "text": "So now we have a placeholder element for the title, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=877"
  },
  {
    "text": "and for the description, and for our image.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=882"
  },
  {
    "text": "Next, will make some adjustments to our pop-up's style sheet. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=889"
  },
  {
    "text": "Here, I only need to make a few minor adjustments ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=895"
  },
  {
    "text": "to make it look great on all platforms. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=898"
  },
  {
    "text": "And last, I just need to set up a responsive design layout ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=904"
  },
  {
    "text": "for the images to fill the space and maintain aspect ratio. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=906"
  },
  {
    "text": "Finally, we come to the heart of the extension ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=912"
  },
  {
    "text": "by editing the popup script, and first we need to grab ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=915"
  },
  {
    "text": "a reference to those placeholder elements ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=918"
  },
  {
    "text": "we defined in our popup HTML file. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=920"
  },
  {
    "text": "Next, we need to send a message to the content script ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=924"
  },
  {
    "text": "and to do that, we need to query for the active tab. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=927"
  },
  {
    "text": "So to query for the active tab in the current window, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=932"
  },
  {
    "text": "we'll use the tabs.query API. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=935"
  },
  {
    "text": "And in the tabs.query API, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=940"
  },
  {
    "text": "we'll filter by active tab in the current window. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=942"
  },
  {
    "text": "Once we have the correct tab, we can now send the message. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=948"
  },
  {
    "text": "And in sending the message, we'll pass the current tabs ID ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=953"
  },
  {
    "text": "and of course, our magic word. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=959"
  },
  {
    "text": "Then when we get the response, we simply need to update ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=964"
  },
  {
    "text": "our placeholder elements with the data. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=967"
  },
  {
    "text": "That's it! ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=970"
  },
  {
    "text": "Now, let's try running our extension in the simulator. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=972"
  },
  {
    "text": "Again, from the Target menu, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=976"
  },
  {
    "text": "I'll select iPhone 13 Pro simulator. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=977"
  },
  {
    "text": "I'll click the build and run button to kick off the process ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=981"
  },
  {
    "text": "and switch to the simulator, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=983"
  },
  {
    "text": "where I'll wait for the app to launch. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=985"
  },
  {
    "text": "Once it's launched, I can enable our new extension ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=988"
  },
  {
    "text": "in the Settings app. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=991"
  },
  {
    "text": "So let's switch to Settings ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=993"
  },
  {
    "text": "and scroll to Safari. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=996"
  },
  {
    "text": "Then tap it and tap Extensions, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=998"
  },
  {
    "text": "and under Open Graph Preview I can toggle it on. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1002"
  },
  {
    "text": "Now let's launch Safari ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1008"
  },
  {
    "text": "and I'll tap the Aa menu. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1011"
  },
  {
    "text": "And there in the menu is Open Graph Preview. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1016"
  },
  {
    "text": "Now, when I tap on this, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1019"
  },
  {
    "text": "I get a permission request for the content script. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1021"
  },
  {
    "text": "I'll select Allow For One Day. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1024"
  },
  {
    "text": "And bingo, we have a preview of this page's open graph data. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1026"
  },
  {
    "text": "Now let's try it on another page. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1031"
  },
  {
    "text": "Again from the Aa menu, I'll tap Open Graph Preview ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1035"
  },
  {
    "text": "and Allow For One Day. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1038"
  },
  {
    "text": "And there we have it, but that's not quite right. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1040"
  },
  {
    "text": "We shouldn't have a broken image. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1043"
  },
  {
    "text": "So to figure out what's going on here, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1046"
  },
  {
    "text": "I can use Web Inspector in Safari. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1047"
  },
  {
    "text": "If you haven't enabled it, go to Safari Preferences ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1050"
  },
  {
    "text": "and under the Advanced tab ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1054"
  },
  {
    "text": "enable Show Develop menu in the menu bar. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1055"
  },
  {
    "text": "Then from the Develop menu, you can select Web Inspector ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1059"
  },
  {
    "text": "for the content from the simulator. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1062"
  },
  {
    "text": "And when I do that, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1065"
  },
  {
    "text": "I can easily see that the image did not load. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1066"
  },
  {
    "text": "So if the URL is wrong, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1070"
  },
  {
    "text": "that's probably coming from the content. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1072"
  },
  {
    "text": "So let's open another Web Inspector for webkit.org.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1075"
  },
  {
    "text": "Now I can search for the og meta tag data. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1086"
  },
  {
    "text": "And here I can see we have a title, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1090"
  },
  {
    "text": "and we have a description -- Ah, but we're missing the image. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1094"
  },
  {
    "text": "And that's what's going on. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1098"
  },
  {
    "text": "We have an undefined case we're not handling. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1099"
  },
  {
    "text": "So back in Xcode, all we need to do ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1102"
  },
  {
    "text": "is handle that undefined case. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1106"
  },
  {
    "text": "Now I can try running this again. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1110"
  },
  {
    "text": "Clicking the Build and Run button, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1113"
  },
  {
    "text": "I'll click Replace to replace it on the simulator, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1114"
  },
  {
    "text": "and once it launches on the simulator, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1119"
  },
  {
    "text": "I can jump back into Safari and try it again.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1121"
  },
  {
    "text": "From the Aa menu, I'll select Open Graph Preview and bingo. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1128"
  },
  {
    "text": "Perfect! ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1133"
  },
  {
    "text": "It shows the title and description, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1135"
  },
  {
    "text": "but we should make sure it works ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1138"
  },
  {
    "text": "on a page that does have an image, and it does. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1139"
  },
  {
    "text": "Perfect! ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1144"
  },
  {
    "text": "Well, getting it to work in the simulator is a great way ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1147"
  },
  {
    "text": "to test on a number of devices, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1149"
  },
  {
    "text": "but it's always a good idea to test on a real device. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1151"
  },
  {
    "text": "So I have an iPhone handy. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1155"
  },
  {
    "text": "Back in Xcode, I'll select the Target menu ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1158"
  },
  {
    "text": "and choose the iPhone. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1162"
  },
  {
    "text": "Now let's build and run and launch it on this device.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1167"
  },
  {
    "text": "After it's running on the device and launches, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1179"
  },
  {
    "text": "I'll need to enable it in Settings. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1183"
  },
  {
    "text": "So let's switch back to the Settings app. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1185"
  },
  {
    "text": "Under Safari and Extensions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1188"
  },
  {
    "text": "and Open Graph Preview, we'll toggle it on. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1191"
  },
  {
    "text": "Now, launching Safari again, I'll tap the Aa menu. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1194"
  },
  {
    "text": "And I can see the extension and tap it, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1199"
  },
  {
    "text": "and Allow For One Day. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1202"
  },
  {
    "text": "And it works perfect. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1205"
  },
  {
    "text": "Let's try this on a few other pages to make sure ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1208"
  },
  {
    "text": "we have all of the cases working. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1211"
  },
  {
    "text": "Here on developer.apple.com ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1214"
  },
  {
    "text": "it didn't prompt for extra permission ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1216"
  },
  {
    "text": "because it's part of the apple.com domain. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1217"
  },
  {
    "text": "Let's try on webkit.org.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1221"
  },
  {
    "text": "And here we'll tap the Aa menu again and Open Graph Preview ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1227"
  },
  {
    "text": "and again it prompts because this is a different website. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1232"
  },
  {
    "text": "Perfect. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1236"
  },
  {
    "text": "And one more on the post with an image. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1238"
  },
  {
    "text": "We'll tap Aa, Open Graph Preview. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1242"
  },
  {
    "text": "Perfect! ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1246"
  },
  {
    "text": "So, excellent. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1249"
  },
  {
    "text": "Now that we have our app and extension working ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1250"
  },
  {
    "text": "in the simulator and a real device, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1252"
  },
  {
    "text": "I'd say we're ready to submit this to the App Store. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1254"
  },
  {
    "text": "First, there's a quick detail to take care of before submitting. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1259"
  },
  {
    "text": "In your project settings, select your iOS app target ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1263"
  },
  {
    "text": "and be sure to set an App Category. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1267"
  },
  {
    "text": "I'll select Developer Tools. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1270"
  },
  {
    "text": "Next, from the Product menu, select Archive. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1273"
  },
  {
    "text": "And similar to the build process, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1279"
  },
  {
    "text": "you'll see the progress in the right side of the status bar. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1281"
  },
  {
    "text": "When it's ready, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1287"
  },
  {
    "text": "select the build archive you're ready to submit, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1288"
  },
  {
    "text": "and click the Distribute App button. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1291"
  },
  {
    "text": "From the assistant, under method of distribution ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1293"
  },
  {
    "text": "we'll select App Store Connect and click Next. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1296"
  },
  {
    "text": "For destination, I'll leave Upload and click Next. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1299"
  },
  {
    "text": "And it will begin to communicate with App Store Connect ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1304"
  },
  {
    "text": "to prepare an app record.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1307"
  },
  {
    "text": "Here I can review the name and make sure my SKU ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1312"
  },
  {
    "text": "is unique among SKUs used for other apps ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1315"
  },
  {
    "text": "in my App Store Connect account. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1317"
  },
  {
    "text": "Now I'll click the Next button, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1320"
  },
  {
    "text": "and it begins to prepare our app record for review. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1323"
  },
  {
    "text": "First, though, there are some distribution options ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1326"
  },
  {
    "text": "that it will ask for. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1329"
  },
  {
    "text": "These are all very helpful, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1330"
  },
  {
    "text": "so I'm going to leave them and click Next. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1331"
  },
  {
    "text": "And I definitely want to keep Automatically manage signing ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1335"
  },
  {
    "text": "and click Next. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1338"
  },
  {
    "text": "Now we'll get a chance to review the app content ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1342"
  },
  {
    "text": "and the extension content. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1345"
  },
  {
    "text": "When we're happy with it, I'll click Upload. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1348"
  },
  {
    "text": "While we wait for the upload to complete, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1355"
  },
  {
    "text": "let's take a quick look at some tips ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1357"
  },
  {
    "text": "for getting through App Store Review. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1359"
  },
  {
    "text": "First, make sure you own all the code and any content, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1361"
  },
  {
    "text": "images, or other assets used in your project. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1365"
  },
  {
    "text": "Ensure you have or can prove permission for any APIs ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1369"
  },
  {
    "text": "or JavaScript frameworks that are called. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1372"
  },
  {
    "text": "You'll also want to remember to provide a custom icon ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1375"
  },
  {
    "text": "and use a unique name for your app -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1378"
  },
  {
    "text": "help it to stand out on the App Store. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1381"
  },
  {
    "text": "And don't just decorate the web with emojis. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1383"
  },
  {
    "text": "The best web extensions -- the ones that get featured -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1385"
  },
  {
    "text": "provide something useful to the user. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1388"
  },
  {
    "text": "And if you have code for any web payments ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1391"
  },
  {
    "text": "or donations for another browser, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1393"
  },
  {
    "text": "you'll need to disable it for App Store Review. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1396"
  },
  {
    "text": "Upfront sales of extensions are easy and wildly popular ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1399"
  },
  {
    "text": "in the App Store. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1402"
  },
  {
    "text": "Let's check on that upload process. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1404"
  },
  {
    "text": "The upload completed successfully. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1408"
  },
  {
    "text": "Great. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1410"
  },
  {
    "text": "Now in Safari, I can log in to App Store Connect ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1411"
  },
  {
    "text": "and click on My Apps to see the new app record ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1414"
  },
  {
    "text": "that's been created. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1416"
  },
  {
    "text": "And clicking on Open Graph Preview, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1418"
  },
  {
    "text": "I can provide some additional information for the App Store. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1420"
  },
  {
    "text": "You'll want to provide some preview images for your app. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1423"
  },
  {
    "text": "And then under Promotional Text ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1427"
  },
  {
    "text": "you should provide some descriptive information ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1428"
  },
  {
    "text": "about what's new in this release. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1430"
  },
  {
    "text": "Under Description, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1433"
  },
  {
    "text": "you'll want to provide a complete description ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1435"
  },
  {
    "text": "of what this extension does for your users ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1436"
  },
  {
    "text": "and then you can also supply some keywords. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1439"
  },
  {
    "text": "Note the hundred-character limit; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1442"
  },
  {
    "text": "you'll need to be precise. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1444"
  },
  {
    "text": "You'll also want to provide a URL specifically for a page ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1446"
  },
  {
    "text": "where users can get support for your extension. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1449"
  },
  {
    "text": "And optionally, you can include an address for a marketing page. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1452"
  },
  {
    "text": "Then you'll use the upload tools ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1456"
  },
  {
    "text": "to select the correct upload for your app. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1458"
  },
  {
    "text": "And once you have all of that filled out, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1461"
  },
  {
    "text": "you can click the Submit For Review button ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1463"
  },
  {
    "text": "to begin the App Review process. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1466"
  },
  {
    "text": "And that's how easy it is to build and submit ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1471"
  },
  {
    "text": "Safari web extensions. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1474"
  },
  {
    "text": "We encourage you to submit your extensions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1476"
  },
  {
    "text": "for both iOS and MacOS ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1477"
  },
  {
    "text": "and check out the resources associated with this session. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1480"
  },
  {
    "text": "And be sure to file feedback; we'd love to hear from you. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1485"
  },
  {
    "text": "You can use Feedback Assistant to file bugs ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1488"
  },
  {
    "text": "or make feature requests. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1490"
  },
  {
    "text": "And thanks for watching.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110148/?time=1494"
  }
]