[
  {
    "text": "Simon Manning: Hi, I'm Simon, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=0"
  },
  {
    "text": "and I'm an engineer on the CloudKit team.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=1"
  },
  {
    "text": "Today I'm going to demonstrate how to use CloudKit ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=3"
  },
  {
    "text": "to support sharing data between users of an app.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=6"
  },
  {
    "text": "I'll start by introducing our Sharing sample app, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=10"
  },
  {
    "text": "available on GitHub.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=12"
  },
  {
    "text": "Then I'll walk through how to support creating shares ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=15"
  },
  {
    "text": "and inviting other users to participate in those shares ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=18"
  },
  {
    "text": "in an app.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=20"
  },
  {
    "text": "I'll discuss how your app can share ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=23"
  },
  {
    "text": "and accept invitations on behalf of participating users, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=25"
  },
  {
    "text": "how to fetch shared records, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=29"
  },
  {
    "text": "how your app can provide a customized sharing experience, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=33"
  },
  {
    "text": "and lastly, the zone-based sharing model ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=37"
  },
  {
    "text": "available in CloudKit.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=39"
  },
  {
    "text": "First up, the Sharing sample app.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=42"
  },
  {
    "text": "As a reminder, CloudKit is a framework ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=45"
  },
  {
    "text": "that gives your application access to a database on iCloud.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=47"
  },
  {
    "text": "This is exposed in the API as a CKContainer ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=51"
  },
  {
    "text": "through which you can access multiple CKDatabases.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=54"
  },
  {
    "text": "Each container has one public database ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=58"
  },
  {
    "text": "where all users can potentially read and write records.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=60"
  },
  {
    "text": "If the device has a logged-in iCloud account, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=64"
  },
  {
    "text": "your app also has access to a private database ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=66"
  },
  {
    "text": "which contains that user's data.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=69"
  },
  {
    "text": "And if your app supports sharing, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=72"
  },
  {
    "text": "then data which is shared with the current iCloud user ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=74"
  },
  {
    "text": "will be available to your app in their shared CKDatabase.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=77"
  },
  {
    "text": "To demonstrate both initiating shares ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=83"
  },
  {
    "text": "from the record-owning user ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=85"
  },
  {
    "text": "and accepting invitations to a share as a participant, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=87"
  },
  {
    "text": "I'll be referring to a sample app ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=90"
  },
  {
    "text": "available on the Apple GitHub account.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=91"
  },
  {
    "text": "Sharing is a minimal example of a contacts app.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=95"
  },
  {
    "text": "It supports creating new contact records ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=98"
  },
  {
    "text": "in the user's private database, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=100"
  },
  {
    "text": "sharing individual contacts with other users of the app, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=102"
  },
  {
    "text": "and displaying all contacts ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=106"
  },
  {
    "text": "shared with the current user from others.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=107"
  },
  {
    "text": "The Sharing repository ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=110"
  },
  {
    "text": "contains an implementation using Swift concurrency, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=111"
  },
  {
    "text": "as well as a completion handler-based implementation, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=114"
  },
  {
    "text": "available on separate branches.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=117"
  },
  {
    "text": "To begin sharing, first create a new contact record ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=121"
  },
  {
    "text": "and save it to the owner's private database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=124"
  },
  {
    "text": "The addContact function is called by Sharing's ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=127"
  },
  {
    "text": "Add New Contact UI.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=129"
  },
  {
    "text": "It creates a new CKRecord with a recordType of Contact ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=132"
  },
  {
    "text": "and stores a name and phone number.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=136"
  },
  {
    "text": "The record is then saved to the private database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=139"
  },
  {
    "text": "Sharing a contact record with other users of the Sharing app ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=143"
  },
  {
    "text": "begins by creating a share.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=146"
  },
  {
    "text": "Sharing in CloudKit relies on a specialized kind of record ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=150"
  },
  {
    "text": "called a CKShare.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=153"
  },
  {
    "text": "When your user wants to share records with others, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=155"
  },
  {
    "text": "create a CKShare on their behalf ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=158"
  },
  {
    "text": "and save it to the private database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=160"
  },
  {
    "text": "Because this user owns all the records being shared, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=163"
  },
  {
    "text": "they're also the owner of the share record itself.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=166"
  },
  {
    "text": "This share record is the source of truth ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=170"
  },
  {
    "text": "for what data is being shared, who it's being shared with, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=172"
  },
  {
    "text": "and what permissions are available to share participants.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=175"
  },
  {
    "text": "Share permissions are how the owner of the share ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=180"
  },
  {
    "text": "can control access to the shared records.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=182"
  },
  {
    "text": "The publicPermission property represents the permission level ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=185"
  },
  {
    "text": "for any user with a link to the share.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=188"
  },
  {
    "text": "By default, users with just the URL have no access.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=192"
  },
  {
    "text": "Setting this property to a more permissive value ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=197"
  },
  {
    "text": "allows any user with the share's URL to join.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=199"
  },
  {
    "text": "Each invited participant also has a permission level ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=204"
  },
  {
    "text": "determined by the share's owner.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=207"
  },
  {
    "text": "Participant objects describe a specific user's ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=209"
  },
  {
    "text": "participation in a share, including the user's identity ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=212"
  },
  {
    "text": "and their invitation acceptance status.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=215"
  },
  {
    "text": "Permissions are set on each participant object individually ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=218"
  },
  {
    "text": "and each participant is added to the participants array ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=224"
  },
  {
    "text": "on the CKShare.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=226"
  },
  {
    "text": "To begin sharing records from a user's private database, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=229"
  },
  {
    "text": "first determine the root record of the share.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=233"
  },
  {
    "text": "The root record and all its child records ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=236"
  },
  {
    "text": "will be included in this share.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=238"
  },
  {
    "text": "Then, create the CKShare record ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=240"
  },
  {
    "text": "and save both the root record and CKShare ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=243"
  },
  {
    "text": "to the current user's private database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=246"
  },
  {
    "text": "In Sharing, the createShare function initializes a CKShare ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=250"
  },
  {
    "text": "with the contact record to be shared.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=253"
  },
  {
    "text": "The CKShare and root record ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=256"
  },
  {
    "text": "are saved to the owner's private database, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=258"
  },
  {
    "text": "and the CKShare is returned back to the UI ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=260"
  },
  {
    "text": "to start the invitation process.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=263"
  },
  {
    "text": "Both the CKShare and root record must be saved together ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=267"
  },
  {
    "text": "in the same operation.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=270"
  },
  {
    "text": "Saving only the CKShare will generate an error, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=272"
  },
  {
    "text": "even if the root record already exists in CloudKit.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=275"
  },
  {
    "text": "Sharing a root record also shares its child records.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=278"
  },
  {
    "text": "Now that your app is creating shares, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=283"
  },
  {
    "text": "I'll cover how you can configure and send user invitations ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=285"
  },
  {
    "text": "to participate in a share.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=288"
  },
  {
    "text": "The sample app uses a view controller provided by UIKit ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=291"
  },
  {
    "text": "named UICloudSharingController.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=294"
  },
  {
    "text": "Implementing this controller in your app ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=298"
  },
  {
    "text": "allows users to easily invite participants to their CKShare, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=300"
  },
  {
    "text": "set up permissions, view and manage participation, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=304"
  },
  {
    "text": "or stop sharing records all together.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=307"
  },
  {
    "text": "Here's how UICloudSharingController ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=311"
  },
  {
    "text": "appears in the Sharing sample app ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=313"
  },
  {
    "text": "when sharing a new contact record.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=315"
  },
  {
    "text": "Users can choose how to send share invitations, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=318"
  },
  {
    "text": "and permissions can be configured ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=321"
  },
  {
    "text": "in the Share Options section.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=322"
  },
  {
    "text": "Implement the controller's delegate protocol ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=325"
  },
  {
    "text": "to provide additional information about the share, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=327"
  },
  {
    "text": "as well as receive notifications about sharing events and errors.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=330"
  },
  {
    "text": "In addition to the methods described here, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=335"
  },
  {
    "text": "there are methods to configure the item title, item type, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=337"
  },
  {
    "text": "and thumbnail image to display on share invitations.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=340"
  },
  {
    "text": "Now that the owner of the share has sent invitations to others, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=345"
  },
  {
    "text": "your app needs to process and accept the share ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=348"
  },
  {
    "text": "on behalf of the invited participants.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=350"
  },
  {
    "text": "Enable the CKSharingSupported boolean ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=353"
  },
  {
    "text": "in your app's Info.plist.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=355"
  },
  {
    "text": "This lets the system know that your app supports sharing, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=358"
  },
  {
    "text": "and should process invitation URLs ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=360"
  },
  {
    "text": "and call the relevant delegate functions.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=363"
  },
  {
    "text": "When a share invitation is opened and accepted, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=367"
  },
  {
    "text": "your app will receive a CKShare.Metadata object ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=369"
  },
  {
    "text": "through delegate method callbacks.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=372"
  },
  {
    "text": "Your app uses this metadata to inform CloudKit ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=375"
  },
  {
    "text": "that the current user is accepting and participating ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=377"
  },
  {
    "text": "in this share through the accept function on the container, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=380"
  },
  {
    "text": "or through a CKAcceptSharesOperation.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=383"
  },
  {
    "text": "With an applicationDelegate lifecycle, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=388"
  },
  {
    "text": "the system will launch your app and call the ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=390"
  },
  {
    "text": "userDidAcceptCloudKitShareWith: shareMetadata ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=392"
  },
  {
    "text": "delegate method.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=395"
  },
  {
    "text": "Initialize a CKContainer object using the identifier ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=398"
  },
  {
    "text": "provided in the shareMetadata object.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=401"
  },
  {
    "text": "Then call accept on the CKContainer, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=404"
  },
  {
    "text": "passing in the shareMetadata object, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=407"
  },
  {
    "text": "to let CloudKit know the current user has accepted the share.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=410"
  },
  {
    "text": "Now that your app is sending invitations ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=415"
  },
  {
    "text": "to share private records ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=417"
  },
  {
    "text": "and processing and accepting those invitations, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=419"
  },
  {
    "text": "I'll cover how your app can fetch and modify shared records ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=422"
  },
  {
    "text": "that users are participating in.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=425"
  },
  {
    "text": "Records shared with the current iCloud user ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=428"
  },
  {
    "text": "are available inside the app container's ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=430"
  },
  {
    "text": "sharedCloudDatabase.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=432"
  },
  {
    "text": "The same CloudKit APIs for fetching, querying, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=435"
  },
  {
    "text": "and manipulating data inside private and public databases ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=438"
  },
  {
    "text": "can be used with the shared database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=442"
  },
  {
    "text": "In the sample app, shared records are fetched ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=445"
  },
  {
    "text": "in the fetchSharedContacts function.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=448"
  },
  {
    "text": "It uses the recordZoneChanges operation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=450"
  },
  {
    "text": "to progressively fetch and process changes.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=453"
  },
  {
    "text": "Each time this operation completes, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=456"
  },
  {
    "text": "it returns a moreComing boolean property, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=459"
  },
  {
    "text": "representing whether there are more changes to fetch.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=461"
  },
  {
    "text": "It also returns a changeToken, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=466"
  },
  {
    "text": "which is a pointer to a specific change in the zone's history.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=467"
  },
  {
    "text": "You can use this changeToken to only fetch changes ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=472"
  },
  {
    "text": "that occur after that point in time.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=474"
  },
  {
    "text": "For the first fetch, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=477"
  },
  {
    "text": "or to refetch all changes in a zone's history, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=478"
  },
  {
    "text": "set the changeToken to nil.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=482"
  },
  {
    "text": "Managing active shares depends on the current user.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=485"
  },
  {
    "text": "For owners of a share, the share can be stopped ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=488"
  },
  {
    "text": "by deleting the CKShare record ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=491"
  },
  {
    "text": "from the owner's private database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=493"
  },
  {
    "text": "The owner can also delete the shared root record entirely.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=496"
  },
  {
    "text": "The removeParticipant function on the CKShare record object ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=500"
  },
  {
    "text": "provides a way to remove individual participants, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=503"
  },
  {
    "text": "which can be found on the participants property.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=506"
  },
  {
    "text": "And lastly, the UICloudSharingController UI ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=509"
  },
  {
    "text": "makes it possible for owners ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=513"
  },
  {
    "text": "to stop sharing with all participants.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=514"
  },
  {
    "text": "For the participant user of a share, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=518"
  },
  {
    "text": "participation can be stopped by deleting the root CKRecord ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=519"
  },
  {
    "text": "from the user's shared database, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=523"
  },
  {
    "text": "or using the UICloudSharingController UI.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=525"
  },
  {
    "text": "Note that deleting the root CKRecord ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=528"
  },
  {
    "text": "from the user's shared database ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=531"
  },
  {
    "text": "only stops participation in the share -- ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=533"
  },
  {
    "text": "the original root record would still exist ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=535"
  },
  {
    "text": "in the owner's private database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=537"
  },
  {
    "text": "While the Sharing sample app uses UICloudSharingController ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=541"
  },
  {
    "text": "to handle participant lookup and invitation, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=544"
  },
  {
    "text": "you can also implement this functionality ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=547"
  },
  {
    "text": "with the CloudKit API and build a custom user experience ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=549"
  },
  {
    "text": "for both owners and participants of a share.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=552"
  },
  {
    "text": "First, to search for participants to invite ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=556"
  },
  {
    "text": "to a CKShare, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=558"
  },
  {
    "text": "use the CKFetchShare ParticipantsOperation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=559"
  },
  {
    "text": "or shareParticipants functions on the relevant CKContainer.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=562"
  },
  {
    "text": "Phone number, email, and user record IDs ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=567"
  },
  {
    "text": "are supported as parameters.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=569"
  },
  {
    "text": "Next, set the specific permission level ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=573"
  },
  {
    "text": "for this participation, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=576"
  },
  {
    "text": "and add the participant to the CKShare ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=577"
  },
  {
    "text": "with the addParticipant function.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=579"
  },
  {
    "text": "Always save the modified CKShare ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=582"
  },
  {
    "text": "back to the private database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=584"
  },
  {
    "text": "The saved CKShare record has a url property ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=587"
  },
  {
    "text": "which can be sent to invited participants ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=590"
  },
  {
    "text": "to accept and process.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=592"
  },
  {
    "text": "An invitation URL can be used to fetch ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=595"
  },
  {
    "text": "the share's CKShare.Metadata and confirm participation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=597"
  },
  {
    "text": "through the accept(shareMetadata) function ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=601"
  },
  {
    "text": "on the app's container.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=603"
  },
  {
    "text": "The Sharing app demonstrates CloudKit sharing ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=606"
  },
  {
    "text": "with a hierarchical sharing model, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=608"
  },
  {
    "text": "where a single record is shared as a root record, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=610"
  },
  {
    "text": "and any children of that record are also shared.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=613"
  },
  {
    "text": "Zone sharing, a new model introduced in iOS 15, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=616"
  },
  {
    "text": "allows entire zones of records to be shared instead.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=619"
  },
  {
    "text": "When sharing a zone, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=624"
  },
  {
    "text": "all of the records in the zone are shared, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=625"
  },
  {
    "text": "not just a single record's hierarchy.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=628"
  },
  {
    "text": "Because zone sharing affects all of the records in a record zone, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=630"
  },
  {
    "text": "this type of sharing cannot coexist ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=634"
  },
  {
    "text": "with hierarchical shares in the same record zone.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=636"
  },
  {
    "text": "You can either have one or more hierarchical shares in a zone, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=640"
  },
  {
    "text": "or a single zone-wide share.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=643"
  },
  {
    "text": "Zone sharing and hierarchical sharing ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=647"
  },
  {
    "text": "each have their benefits, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=649"
  },
  {
    "text": "and both should be utilized depending on your use case.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=650"
  },
  {
    "text": "In the context of the Sharing sample app, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=654"
  },
  {
    "text": "zone sharing could be useful if groups of contacts ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=656"
  },
  {
    "text": "were organized in separate record zones.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=659"
  },
  {
    "text": "A zone share could be used to share ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=662"
  },
  {
    "text": "those groups of contacts with other users.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=663"
  },
  {
    "text": "To learn more about zone sharing, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=667"
  },
  {
    "text": "check out \"What's new in CloudKit\" from WWDC21.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=669"
  },
  {
    "text": "To create a new zone-wide share, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=674"
  },
  {
    "text": "initialize it with the custom record zone's ID ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=676"
  },
  {
    "text": "to be shared and save it to the private database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=679"
  },
  {
    "text": "The process for accepting share invitations ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=683"
  },
  {
    "text": "and fetching records from the shared database ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=685"
  },
  {
    "text": "is the same as before.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=687"
  },
  {
    "text": "To determine if a share is a zone-wide share, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=689"
  },
  {
    "text": "check the recordName property of its recordID.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=692"
  },
  {
    "text": "If the value is CKRecordNameZoneWideShare, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=696"
  },
  {
    "text": "the share is managing a shared record zone; ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=699"
  },
  {
    "text": "otherwise, it's managing a shared record hierarchy.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=702"
  },
  {
    "text": "Now that you know how to support sharing in your app, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=706"
  },
  {
    "text": "start creating CKShare records ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=710"
  },
  {
    "text": "and allow users to collaborate with others.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=712"
  },
  {
    "text": "Get a jump start on your sharing UI ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=715"
  },
  {
    "text": "using UICloudSharingController, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=717"
  },
  {
    "text": "or build a custom implementation to fit your needs.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=719"
  },
  {
    "text": "Use familiar fetch and modify API ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=722"
  },
  {
    "text": "to access shared records from the shared cloud database.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=725"
  },
  {
    "text": "And start exploring new sharing use cases in your app ",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=728"
  },
  {
    "text": "that could benefit from implementing zone sharing.",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=731"
  },
  {
    "text": "Thanks for watching!",
    "link": "https://developer.apple.com/videos/play/tech-talks-10874/?time=735"
  }
]