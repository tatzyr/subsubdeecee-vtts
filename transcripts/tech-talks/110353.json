[
  {
    "text": "Hello, my name is Tim Chien. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=0"
  },
  {
    "text": "I'm an engineer on the MapKit team here at Apple, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=3"
  },
  {
    "text": "working on MapKit JS. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=7"
  },
  {
    "text": "Today I'm going to talk about several exciting new features ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=9"
  },
  {
    "text": "you can use to deliver the best possible experience ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=13"
  },
  {
    "text": "when integrating MapKit JS with your web application. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=16"
  },
  {
    "text": "Since the introduction of MapKit JS in 2018, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=22"
  },
  {
    "text": "we have worked tirelessly adding new features every year. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=26"
  },
  {
    "text": "With that, MapKit JS has become an indispensable part ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=31"
  },
  {
    "text": "of Apple's web offering, integrated into many websites ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=35"
  },
  {
    "text": "like in our own Find My servers on icloud.com, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=39"
  },
  {
    "text": "and third-party websites like DuckDuckGo, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=44"
  },
  {
    "text": "and a property search website in Greece. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=48"
  },
  {
    "text": "You'll notice this website is taking advantage ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=52"
  },
  {
    "text": "of MapKit JS's ability to localize the map features. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=54"
  },
  {
    "text": "We made it super easy to adopt MapKit JS in any web application ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=59"
  },
  {
    "text": "with a simple include and initialization. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=64"
  },
  {
    "text": "However, we want to provide you the flexibility ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=68"
  },
  {
    "text": "to adopt MapKit JS in the manner ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=71"
  },
  {
    "text": "that optimizes the performance of your application. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=74"
  },
  {
    "text": "So starting this year, we have turned our eyes to performance ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=78"
  },
  {
    "text": "and looked at how we could make your pages ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=83"
  },
  {
    "text": "more responsive, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=87"
  },
  {
    "text": "faster to load, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=89"
  },
  {
    "text": "and in a manner designed to give you more control, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=92"
  },
  {
    "text": "enabling you to include only the functionalities you need ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=95"
  },
  {
    "text": "when you need them. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=99"
  },
  {
    "text": "Today, I'm happy to introduce three new features ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=101"
  },
  {
    "text": "that will just do that, including a new markup ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=104"
  },
  {
    "text": "for high-performance MapKit JS loading, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=108"
  },
  {
    "text": "the ability to load additional MapKit JS libraries on demand, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=111"
  },
  {
    "text": "and finally, a new way for an application to signal ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=116"
  },
  {
    "text": "the desired map features to present to the user. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=120"
  },
  {
    "text": "Now to demonstrate how these new features can improve ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=125"
  },
  {
    "text": "your web application, let's say you're building ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=129"
  },
  {
    "text": "an interactive treasure map for your fellow pirates. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=132"
  },
  {
    "text": "You have adopted the default implementation of MapKit JS. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=136"
  },
  {
    "text": "However, when viewing this page over the lousy pirate ship Wi-Fi ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=140"
  },
  {
    "text": "it takes too long to load and the user has to wait too long ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=145"
  },
  {
    "text": "for the map to appear, making your shipmates impatient. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=149"
  },
  {
    "text": "So to prevent a mutiny, you can use ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=154"
  },
  {
    "text": "the new high-performance MapKit JS loading markup. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=156"
  },
  {
    "text": "It swaps the default implementation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=161"
  },
  {
    "text": "for an expanded markup with additional properties you'll use ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=163"
  },
  {
    "text": "to tune your web app. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=167"
  },
  {
    "text": "First, MapKit JS now offers a new JavaScript bundle, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=170"
  },
  {
    "text": "market.core.js, that contains only the minimum amount of code ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=174"
  },
  {
    "text": "to get yourself started. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=179"
  },
  {
    "text": "Next, we want to let MapKit JS know the subset of features ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=182"
  },
  {
    "text": "we will need. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=186"
  },
  {
    "text": "Here, we specify just the map library, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=188"
  },
  {
    "text": "which is the minimum feature set to show an interactive map. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=191"
  },
  {
    "text": "We will prevent MapKit JS from blocking the page load ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=196"
  },
  {
    "text": "by using the async attribute ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=199"
  },
  {
    "text": "and invoke a callback specified by data callback attribute ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=202"
  },
  {
    "text": "when it finishes loading. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=206"
  },
  {
    "text": "Since MapKit JS no longer blocks the page from loading, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=208"
  },
  {
    "text": "your web app should assert its readiness ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=212"
  },
  {
    "text": "before assessing its interfaces for the first time. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=215"
  },
  {
    "text": "As an example, here is an async function ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=219"
  },
  {
    "text": "that will resolve to the MapKit interface ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=222"
  },
  {
    "text": "when MapKit JS is ready. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=224"
  },
  {
    "text": "As always, MapKit JS is available ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=228"
  },
  {
    "text": "on the global window object as soon as it has been loaded. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=230"
  },
  {
    "text": "If the MapKit object is undefined, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=235"
  },
  {
    "text": "that means MapKit JS has not been loaded yet. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=238"
  },
  {
    "text": "Additionally, we want to check if the initial libraries ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=242"
  },
  {
    "text": "have been loaded. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=245"
  },
  {
    "text": "Recall that we asked for the map library ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=247"
  },
  {
    "text": "in the markup using the data library's attribute. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=249"
  },
  {
    "text": "Failing either of the two tests means the callback set ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=254"
  },
  {
    "text": "using the data callback attribute has not been invoked. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=258"
  },
  {
    "text": "Here we convert a callback into a promise ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=262"
  },
  {
    "text": "for our async function and clean up the callback ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=265"
  },
  {
    "text": "right after promise resolution. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=269"
  },
  {
    "text": "With that, we have guaranteed that MapKit JS ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=271"
  },
  {
    "text": "is ready to roll when this feature returns. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=274"
  },
  {
    "text": "Now, back to the syntax. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=277"
  },
  {
    "text": "There are some other useful attributes ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=280"
  },
  {
    "text": "in our high-performance markup, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=282"
  },
  {
    "text": "including the crossorigin attribute ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=285"
  },
  {
    "text": "that allows the browser to reuse a single HTTP/2 connection ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=287"
  },
  {
    "text": "for all the requests going to the MapKit JS CDN. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=292"
  },
  {
    "text": "We would also like MapKit JS to initialize itself ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=296"
  },
  {
    "text": "as soon as it has the opportunity to do so. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=299"
  },
  {
    "text": "We can achieve that by setting an initial token ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=303"
  },
  {
    "text": "in the markup. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=306"
  },
  {
    "text": "Piece it together and we will make our page load even faster, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=307"
  },
  {
    "text": "but we are not there yet.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=312"
  },
  {
    "text": "Since we only asked for the map library, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=318"
  },
  {
    "text": "we would need to load the annotations library to be able ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=321"
  },
  {
    "text": "to put our pirate ship and treasures back on the map. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=324"
  },
  {
    "text": "And that's where our second optimization comes in handy. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=330"
  },
  {
    "text": "A new method is offered just for that MapKit download. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=334"
  },
  {
    "text": "It loads additional libraries asynchronously on demand. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=340"
  },
  {
    "text": "And if any library you load requires another, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=344"
  },
  {
    "text": "it will be handled automatically. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=347"
  },
  {
    "text": "And here it is in action. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=351"
  },
  {
    "text": "Simply call MapKit download method ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=354"
  },
  {
    "text": "to load the annotations library. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=356"
  },
  {
    "text": "Add a listener for the load event, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=361"
  },
  {
    "text": "then add your annotation when it is called. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=364"
  },
  {
    "text": "And of course, you can load more than annotations. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=369"
  },
  {
    "text": "For example, services encompass all services APIs ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=373"
  },
  {
    "text": "like search and geocoder. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=377"
  },
  {
    "text": "Full map loads all the features available ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=380"
  },
  {
    "text": "on the MapKit map class. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=383"
  },
  {
    "text": "And that includes basic map, overlays, annotations, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=386"
  },
  {
    "text": "and user location display. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=393"
  },
  {
    "text": "And GeoJSON loads the GeoJSON importer.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=396"
  },
  {
    "text": "Now, this is a good loading experience, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=405"
  },
  {
    "text": "but we can do even better than this. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=408"
  },
  {
    "text": "This is the third feature we are going to introduce today: ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=412"
  },
  {
    "text": "prioritized map start-up. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=416"
  },
  {
    "text": "With the new load priority property, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=420"
  },
  {
    "text": "we can instruct MapKit JS to show points of interest ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=424"
  },
  {
    "text": "sooner to give feral pirates a better head start. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=427"
  },
  {
    "text": "When setting the load priority, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=431"
  },
  {
    "text": "you should cater to the best experience that your user needs. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=434"
  },
  {
    "text": "There are three load priority options available. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=439"
  },
  {
    "text": "Points of Interest instructs MapKit map ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=444"
  },
  {
    "text": "to show the map labels and points of interest sooner, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=446"
  },
  {
    "text": "even before your annotations. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=449"
  },
  {
    "text": "Land Cover, on the other hand, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=452"
  },
  {
    "text": "will service just the land cover, roads, and borders. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=454"
  },
  {
    "text": "As these options will interfere with some map behaviors ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=460"
  },
  {
    "text": "during start-up, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=463"
  },
  {
    "text": "like rotation or precise map region of the viewport, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=465"
  },
  {
    "text": "you can turn off load priority altogether ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=469"
  },
  {
    "text": "by setting it to none. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=472"
  },
  {
    "text": "And here is what it looks like in action. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=475"
  },
  {
    "text": "Simply use load priority in the map constructor option ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=479"
  },
  {
    "text": "to specify the desired priority. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=482"
  },
  {
    "text": "Here we ask MapKit map to show the points of interest first.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=485"
  },
  {
    "text": "Now that's an even better loading experience. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=495"
  },
  {
    "text": "Today, we introduced three new features ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=499"
  },
  {
    "text": "designed to improve the map load experience of your application. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=502"
  },
  {
    "text": "We believe that you can integrate MapKit JS ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=507"
  },
  {
    "text": "while ensuring that the overall user experience ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=509"
  },
  {
    "text": "remains seamless and unimpaired. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=512"
  },
  {
    "text": "For your existing application, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=516"
  },
  {
    "text": "feel free to adopt these new features gradually, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=517"
  },
  {
    "text": "as each will bring its own benefit. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=521"
  },
  {
    "text": "Be sure to check out the detailed documentation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=524"
  },
  {
    "text": "and the Maps Server API session shown below. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=526"
  },
  {
    "text": "We look forward to seeing how you take advantage ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=530"
  },
  {
    "text": "of these new features. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=533"
  },
  {
    "text": "Thank you.",
    "link": "https://developer.apple.com/videos/play/tech-talks-110353/?time=535"
  }
]