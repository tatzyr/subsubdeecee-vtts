[
  {
    "text": "Building upon Imageblocks and tile shading, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=1"
  },
  {
    "text": "Imageblock Sample Coverage Control gives you ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=4"
  },
  {
    "text": "new opportunities to optimize your multisampled render passes ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=6"
  },
  {
    "text": "and is designed for the enhanced multisampling hardware ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=10"
  },
  {
    "text": "in the A11's GPU. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=13"
  },
  {
    "text": "Imageblock Sample Coverage ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=15"
  },
  {
    "text": "is the third in a series of presentations ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=17"
  },
  {
    "text": "focused on new Metal 2 features on A11.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=19"
  },
  {
    "text": "Before we dive into the enhanced multisampling features ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=23"
  },
  {
    "text": "in Metal 2, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=26"
  },
  {
    "text": "let's have a quick refresher on Multisample Antialiasing. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=27"
  },
  {
    "text": "Multisample Antialiasing, or MSAA, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=31"
  },
  {
    "text": "is a technique used to improve the appearance ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=34"
  },
  {
    "text": "of primitive edges by representing each pixel ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=36"
  },
  {
    "text": "with multiple depth and color samples. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=39"
  },
  {
    "text": "First let's take a look at how a GPU renders a triangle ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=42"
  },
  {
    "text": "without multisampling. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=45"
  },
  {
    "text": "Here's a four by four grid of pixels ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=47"
  },
  {
    "text": "representing your color attachment.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=49"
  },
  {
    "text": "The GPU's rasterizer samples the center of a pixel ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=53"
  },
  {
    "text": "to determine if it is covered by a primitive. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=56"
  },
  {
    "text": "Let's bring in a triangle.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=59"
  },
  {
    "text": "All the pixel centers covered by the primitive ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=62"
  },
  {
    "text": "are colored red. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=64"
  },
  {
    "text": "If each pixel only has a single sample position, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=66"
  },
  {
    "text": "a pixel is classified as covered or not covered ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=69"
  },
  {
    "text": "based only on the pixel center. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=72"
  },
  {
    "text": "You can see in the resulting image ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=74"
  },
  {
    "text": "the classic symptom of edge aliasing: ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=75"
  },
  {
    "text": "the staircase artifacts also known as jaggies. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=78"
  },
  {
    "text": "Let's see the same triangle ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=82"
  },
  {
    "text": "rendered with multisample antialiasing. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=83"
  },
  {
    "text": "For this example, each pixel ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=86"
  },
  {
    "text": "has four evenly distributed sampling positions. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=89"
  },
  {
    "text": "With four samples per pixel, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=93"
  },
  {
    "text": "the GPU's rasterizer can determine finer grained coverage ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=94"
  },
  {
    "text": "for the primitive. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=98"
  },
  {
    "text": "When a multisampled attachment is resolved, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=100"
  },
  {
    "text": "the GPU will average the values of the samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=102"
  },
  {
    "text": "to determine the final color of each pixel. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=106"
  },
  {
    "text": "This results in a smoother edge ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=109"
  },
  {
    "text": "and reduces the appearance of the staircase effect. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=110"
  },
  {
    "text": "In traditional multisampling implementations, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=114"
  },
  {
    "text": "the tradeoffs for the improved edge appearance ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=116"
  },
  {
    "text": "are the computational overhead of blending each sample, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=119"
  },
  {
    "text": "the larger memory footprint ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=122"
  },
  {
    "text": "of multisampled attachments textures, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=124"
  },
  {
    "text": "and the higher memory bandwidth ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=127"
  },
  {
    "text": "to store and resolve multiple samples per pixel. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=128"
  },
  {
    "text": "Apple's A-Series GPUs ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=132"
  },
  {
    "text": "have a very efficient MSAA implementation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=134"
  },
  {
    "text": "that directly addresses these tradeoffs. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=138"
  },
  {
    "text": "The hardware tracks ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=141"
  },
  {
    "text": "whether each pixel contains a primitive edge ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=142"
  },
  {
    "text": "so that your blending executes per sample ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=145"
  },
  {
    "text": "only for the pixels that have difference sample values. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=147"
  },
  {
    "text": "With Metal on A-series GPUs, you can eliminate ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=151"
  },
  {
    "text": "the extra memory storage requirements ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=154"
  },
  {
    "text": "by using memoryless render targets ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=156"
  },
  {
    "text": "for the multisampled attachments. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=157"
  },
  {
    "text": "The full sample data ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=160"
  },
  {
    "text": "only exists temporarily in tile memory.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=161"
  },
  {
    "text": "By using Metal's multisample resolve store action, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=165"
  },
  {
    "text": "you avoid incurring any additional ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=168"
  },
  {
    "text": "system memory bandwidth ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=170"
  },
  {
    "text": "by directly resolving from tile memory ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=172"
  },
  {
    "text": "to the resolve attachment. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=174"
  },
  {
    "text": "In addition, Metal 2 introduced Programmable Sample Positions ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=177"
  },
  {
    "text": "to allow you to choose the sample locations ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=181"
  },
  {
    "text": "and control your sampling pattern. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=184"
  },
  {
    "text": "With Metal 2 on A11, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=186"
  },
  {
    "text": "we made multisampling even more efficient at blending. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=189"
  },
  {
    "text": "While current A-series GPUs ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=192"
  },
  {
    "text": "already track whether edges intersect each pixel, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=194"
  },
  {
    "text": "the A11 GPU extends this tracking ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=197"
  },
  {
    "text": "to an even finer granularity by tracking ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=200"
  },
  {
    "text": "the number of unique samples within each pixel. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=203"
  },
  {
    "text": "Even without using any other Metal 2 features, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=206"
  },
  {
    "text": "your existing multisampled applications ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=209"
  },
  {
    "text": "will blend more efficiently ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=211"
  },
  {
    "text": "with A11's GPU's enhanced multisampling hardware.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=213"
  },
  {
    "text": "Leveraging the flexibility of other Metal 2 features ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=218"
  },
  {
    "text": "such as Imageblocks and tile shading, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=221"
  },
  {
    "text": "Imageblock Sample Coverage Control gives you access ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=223"
  },
  {
    "text": "to each pixel's sample coverage tracking data ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=226"
  },
  {
    "text": "for even more control ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=228"
  },
  {
    "text": "of your multisampled render passes. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=230"
  },
  {
    "text": "With Imageblock Sample Coverage Control, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=233"
  },
  {
    "text": "your tile pipelines can resolve sample data ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=235"
  },
  {
    "text": "at any time in a render pass ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=237"
  },
  {
    "text": "using your own custom resolve algorithms.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=239"
  },
  {
    "text": "To understand the additional flexibility ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=244"
  },
  {
    "text": "provided by Imageblock Sample Coverage Control, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=246"
  },
  {
    "text": "you first need to understand how edge tracking works ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=248"
  },
  {
    "text": "in the A-Series GPUs. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=251"
  },
  {
    "text": "Current A-series GPUs rasterize your scene in tiles, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=254"
  },
  {
    "text": "and each tile contains metadata ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=257"
  },
  {
    "text": "that tracks whether a pixel contains a primitive edge.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=260"
  },
  {
    "text": "In this image, the red pixels contains primitive edges, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=264"
  },
  {
    "text": "and the white pixels do not. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=267"
  },
  {
    "text": "The number of edge-containing pixels increases ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=270"
  },
  {
    "text": "relative to the density of your scene's geometry. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=272"
  },
  {
    "text": "When a pixel contains a primitive edge, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=275"
  },
  {
    "text": "that means it has multiple unique sample values. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=277"
  },
  {
    "text": "For this reason, the blend equation executes per sample ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=281"
  },
  {
    "text": "for edge-containing pixels. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=284"
  },
  {
    "text": "Pixels that do not contain an edge need to blend only once.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=286"
  },
  {
    "text": "The A11 GPU tracks edges with a finer granularity. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=290"
  },
  {
    "text": "Pixels that contain edges ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=294"
  },
  {
    "text": "often only have a few unique samples. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=295"
  },
  {
    "text": "The A11 GPU's enhanced multisampling ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=298"
  },
  {
    "text": "tracks and blends only the unique samples. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=300"
  },
  {
    "text": "In the Metal Shading Language, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=304"
  },
  {
    "text": "we give a name to these unique samples: ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=305"
  },
  {
    "text": "colors.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=308"
  },
  {
    "text": "So let's take a look at how the A11 GPU ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=310"
  },
  {
    "text": "improves multisampled blending performance. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=312"
  },
  {
    "text": "For pixels that contain a primitive edge, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=315"
  },
  {
    "text": "the A11 GPU will track ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=317"
  },
  {
    "text": "the number of unique colors in that pixel. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=318"
  },
  {
    "text": "As primitives intersect or completely cover a pixel, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=321"
  },
  {
    "text": "the number of colors contained in that pixel ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=324"
  },
  {
    "text": "will grow and shrink. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=326"
  },
  {
    "text": "The A11 GPU tracks these transitions automatically. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=328"
  },
  {
    "text": "In the diagram on the right, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=332"
  },
  {
    "text": "the pixel contains four samples, but only two colors. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=334"
  },
  {
    "text": "When the A11 GPU ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=338"
  },
  {
    "text": "needs to blend the next primitive with this pixel, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=339"
  },
  {
    "text": "there are only two unique samples to blend. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=342"
  },
  {
    "text": "And for advanced rendering algorithms ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=345"
  },
  {
    "text": "that use programmable blending, the savings will be significant.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=347"
  },
  {
    "text": "So let's take a fragment ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=352"
  },
  {
    "text": "through a few of these color tracking transitions. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=353"
  },
  {
    "text": "Initially, each fragment contains a single color, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=356"
  },
  {
    "text": "representing all samples. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=360"
  },
  {
    "text": "This would be your clear color when a render pass begins. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=362"
  },
  {
    "text": "If a primitive edge cuts through a pixel, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=366"
  },
  {
    "text": "the A11 GPU will create a new unique color ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=369"
  },
  {
    "text": "and assign the covered samples to the new color. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=372"
  },
  {
    "text": "The two samples covered by this green triangle ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=375"
  },
  {
    "text": "are assigned to the new color one. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=378"
  },
  {
    "text": "The samples that are not covered ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=380"
  },
  {
    "text": "are still assigned to the color zero. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=382"
  },
  {
    "text": "Let's say the next primitive that intersects this pixel ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=385"
  },
  {
    "text": "is a red translucent triangle. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=388"
  },
  {
    "text": "The red triangle covers three samples. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=390"
  },
  {
    "text": "Current A-Series GPUs would blend each ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=393"
  },
  {
    "text": "of the three covered samples. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=396"
  },
  {
    "text": "The A11 GPU, blends only twice ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=398"
  },
  {
    "text": "because two of the covered samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=401"
  },
  {
    "text": "share the same color index. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=402"
  },
  {
    "text": "In this case, color one is a blend of green and red, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=405"
  },
  {
    "text": "and the GPU creates a new color at index two ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=409"
  },
  {
    "text": "since that is a new, unique color. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=412"
  },
  {
    "text": "The number of unique colors in a pixel can grow ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=415"
  },
  {
    "text": "when a primitive cuts through a pixel. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=418"
  },
  {
    "text": "But there are times when the hardware will reduce ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=420"
  },
  {
    "text": "the number of unique colors. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=422"
  },
  {
    "text": "Here, an opaque, non-blending triangle ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=425"
  },
  {
    "text": "entirely covers the pixel. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=428"
  },
  {
    "text": "All four samples are completely replaced by blue, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=430"
  },
  {
    "text": "so the A11 GPU will merge the three colors back to one, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=434"
  },
  {
    "text": "since all the blue samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=438"
  },
  {
    "text": "can be represented by a single color again. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=440"
  },
  {
    "text": "The enhanced mutlisampling hardware in the A11 GPU ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=443"
  },
  {
    "text": "is so powerful that we extended ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=447"
  },
  {
    "text": "the Metal shading language ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=448"
  },
  {
    "text": "to give you explicit control over sample coverage ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=450"
  },
  {
    "text": "with Imageblock Sample Coverage Control. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=452"
  },
  {
    "text": "With this new feature, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=456"
  },
  {
    "text": "tile pipelines have the capability ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=457"
  },
  {
    "text": "to resolve sample data in place in the middle of a render pass ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=459"
  },
  {
    "text": "by changing the color coverage of the pixel. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=463"
  },
  {
    "text": "And since you write the kernel in Metal Shading Language, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=466"
  },
  {
    "text": "that means you can write your own custom resolve filters. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=469"
  },
  {
    "text": "Let's go through a simple example. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=472"
  },
  {
    "text": "First, we have a kernel ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=475"
  },
  {
    "text": "that has an imageblock argument. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=476"
  },
  {
    "text": "Next, we query the number of colors ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=480"
  },
  {
    "text": "at a given coordinate in the imageblock. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=482"
  },
  {
    "text": "For a render pass with four samples per pixel, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=485"
  },
  {
    "text": "the value returned can be one, two, three, or four, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=487"
  },
  {
    "text": "depending on how many unique colors are at that pixel. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=491"
  },
  {
    "text": "A multisampled imageblock can return an imageblock data ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=494"
  },
  {
    "text": "for each sample or color. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=497"
  },
  {
    "text": "In this example, we will get the imageblock data for color c. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=500"
  },
  {
    "text": "Since this example is looping over ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=505"
  },
  {
    "text": "the number of unique colors, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=507"
  },
  {
    "text": "we also need to consider the number of samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=508"
  },
  {
    "text": "that are covered by each color. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=510"
  },
  {
    "text": "We do this by getting the coverage mask ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=513"
  },
  {
    "text": "for this color index ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=514"
  },
  {
    "text": "and calling pop count ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=516"
  },
  {
    "text": "to get the number of set bits in the mask. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=518"
  },
  {
    "text": "Next, we finish resolving our color ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=521"
  },
  {
    "text": "by dividing by the number of samples per pixel ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=524"
  },
  {
    "text": "and writing the resolved value back to the imageblock ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=527"
  },
  {
    "text": "with a full sample mask. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=529"
  },
  {
    "text": "By writing a single value with a full sample mask, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=532"
  },
  {
    "text": "the A11 GPU will merge all the sample data ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=535"
  },
  {
    "text": "back to a single color. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=538"
  },
  {
    "text": "Now this is an example of a basic resolve, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=540"
  },
  {
    "text": "but since it is a tile pipeline, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=543"
  },
  {
    "text": "you can write a kernel to resolve your sample data ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=545"
  },
  {
    "text": "in a way that best fits your application. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=547"
  },
  {
    "text": "So you just saw an example of writing a custom resolve filter. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=551"
  },
  {
    "text": "Let's discuss another reason to use tile shading ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=554"
  },
  {
    "text": "to resolve sample data. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=556"
  },
  {
    "text": "Now, some applications render complex scenes ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=558"
  },
  {
    "text": "with lots of opaque geometry and lots of translucent geometry ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=561"
  },
  {
    "text": "like particles. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=564"
  },
  {
    "text": "While the A11 GPU will do its best ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=566"
  },
  {
    "text": "to blend only the unique colors for each pixel, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=568"
  },
  {
    "text": "if you know that your scene has a lot of blended geometry, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=571"
  },
  {
    "text": "with large amount of overdraw, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=574"
  },
  {
    "text": "you may want to resolve your sample data ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=576"
  },
  {
    "text": "with a tile pipeline before the heavy blending phase. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=577"
  },
  {
    "text": "With Imageblock Sample Coverage Control, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=581"
  },
  {
    "text": "you can resolve the sample data with a tile pipeline ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=583"
  },
  {
    "text": "after rendering your opaque geometry ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=586"
  },
  {
    "text": "to ensure that all pixels contain a single unique color ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=588"
  },
  {
    "text": "prior to blending. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=591"
  },
  {
    "text": "Let's look at a more advanced example ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=593"
  },
  {
    "text": "of using a tile pipeline ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=595"
  },
  {
    "text": "to change the coverage of the sample data. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=596"
  },
  {
    "text": "Since the tile pipeline can be implemented ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=599"
  },
  {
    "text": "with the compute function, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=601"
  },
  {
    "text": "you can do much more than simply average values together. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=602"
  },
  {
    "text": "Our Surface Aggregation sample app starts ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=606"
  },
  {
    "text": "with a multisampled single-pass deferred shading algorithm ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=609"
  },
  {
    "text": "and uses a tile-based kernel dispatch ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=612"
  },
  {
    "text": "to reduce the number of shaded samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=614"
  },
  {
    "text": "in the deferred pass. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=617"
  },
  {
    "text": "The goal of this algorithm is to shade fewer samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=619"
  },
  {
    "text": "in the expensive deferred pass ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=622"
  },
  {
    "text": "while retaining the edge-smoothing benefits ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=624"
  },
  {
    "text": "of multisample antialiasing. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=626"
  },
  {
    "text": "We won't dive into all the details of the algorithm, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=629"
  },
  {
    "text": "so be sure to download and explore ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=631"
  },
  {
    "text": "our Surface Aggregation sample app. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=633"
  },
  {
    "text": "But now let's visualize how this technique ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=636"
  },
  {
    "text": "reduces the cost of shading. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=638"
  },
  {
    "text": "The two images visualize the pixels ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=641"
  },
  {
    "text": "containing more than one sample per pixel in the g-buffer. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=643"
  },
  {
    "text": "The image on the left shows the g-buffer ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=647"
  },
  {
    "text": "before merging surfaces, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=649"
  },
  {
    "text": "and the image on the right ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=651"
  },
  {
    "text": "shows the g-buffer after merging surfaces. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=652"
  },
  {
    "text": "The surface aggregation kernel is able to reduce ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=655"
  },
  {
    "text": "the number of g-buffer samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=657"
  },
  {
    "text": "that need to be shaded. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=659"
  },
  {
    "text": "As you can see on the right image, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=661"
  },
  {
    "text": "the only pixels containing multiple unique samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=662"
  },
  {
    "text": "are on true creases and depth boundaries. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=665"
  },
  {
    "text": "Before Metal 2 on the A11 GPU, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=669"
  },
  {
    "text": "this algorithm would require ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=672"
  },
  {
    "text": "a separate render pass for each phase of the algorithm, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=673"
  },
  {
    "text": "incurring multiple round trips to system memory. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=677"
  },
  {
    "text": "But with Imageblock Sample Coverage Control, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=680"
  },
  {
    "text": "all three phases of the algorithm ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=682"
  },
  {
    "text": "can be merged into one render pass, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=684"
  },
  {
    "text": "saving your app a ton of memory bandwidth. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=686"
  },
  {
    "text": "As you can see in the diagram, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=689"
  },
  {
    "text": "all three phases operate on the imageblock ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=690"
  },
  {
    "text": "keeping all the working data inside tile memory. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=693"
  },
  {
    "text": "First, you will render the g-buffer ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=696"
  },
  {
    "text": "to the imageblock in tile memory. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=698"
  },
  {
    "text": "And next, you will dispatch ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=700"
  },
  {
    "text": "the surface aggregation tile pipeline ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=701"
  },
  {
    "text": "to reduce the number of g-buffer samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=703"
  },
  {
    "text": "into fewer aggregate g-buffer samples. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=706"
  },
  {
    "text": "Finally, the deferred shading pass ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=710"
  },
  {
    "text": "will only shade each aggregate sample.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=711"
  },
  {
    "text": "If you're interested in learning more about this technique, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=716"
  },
  {
    "text": "please visit the link at the end of this presentation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=718"
  },
  {
    "text": "to download the sample app.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=721"
  },
  {
    "text": "To recap, we first talked about the hardware enhancements ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=724"
  },
  {
    "text": "made to multisampling in the A11 GPU. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=727"
  },
  {
    "text": "The A11 GPU tracks the number of unique samples ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=730"
  },
  {
    "text": "in every pixel to reduce the cost of blending. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=733"
  },
  {
    "text": "This optimization applies to both API blending ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=737"
  },
  {
    "text": "as well as programmable blending. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=740"
  },
  {
    "text": "We then discussed the enhancements ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=743"
  },
  {
    "text": "in Metal 2 for the A11 GPU ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=744"
  },
  {
    "text": "that expose this powerful hardware feature ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=746"
  },
  {
    "text": "to kernels used in tile shading. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=748"
  },
  {
    "text": "With Imageblock Sample Coverage Control, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=751"
  },
  {
    "text": "you can write your own custom resolve kernels ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=753"
  },
  {
    "text": "and dispatch them at any time in a render pass ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=756"
  },
  {
    "text": "to implement powerful new optimizations. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=759"
  },
  {
    "text": "Together, the enhanced multisampling in the A11 GPU ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=762"
  },
  {
    "text": "and the new shading language features in Metal 2 ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=766"
  },
  {
    "text": "enable new techniques to keep your data on-chip longer. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=769"
  },
  {
    "text": "You can use this feature ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=773"
  },
  {
    "text": "to implement algorithms like Surface Aggregation ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=774"
  },
  {
    "text": "in a single render pass. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=777"
  },
  {
    "text": "For more information about Metal 2 ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=780"
  },
  {
    "text": "and links to the sample code, ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=782"
  },
  {
    "text": "please visit the developer website ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=784"
  },
  {
    "text": "at developer.apple.com/metal. ",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=786"
  },
  {
    "text": "Thank you for watching.",
    "link": "https://developer.apple.com/videos/play/tech-talks-606/?time=790"
  }
]