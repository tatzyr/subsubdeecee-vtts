[
  {
    "text": "♪ Mellow instrumental hip-hop ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=0"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=3"
  },
  {
    "text": "David Johnson: Hello, everyone.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=10"
  },
  {
    "text": "Welcome to \"What's New in Safari Extensions.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=11"
  },
  {
    "text": "My name is David Johnson, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=13"
  },
  {
    "text": "and I'm a Safari extensions engineer here at Apple.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=14"
  },
  {
    "text": "Today, I'm excited to tell you about some recent developments ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=16"
  },
  {
    "text": "in Safari extensions, highlighting improvements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=19"
  },
  {
    "text": "to the user experience and new features.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=21"
  },
  {
    "text": "First, we want to thank you for creating ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=24"
  },
  {
    "text": "and sharing the over 2000 Safari extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=26"
  },
  {
    "text": "available on the App Store today.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=28"
  },
  {
    "text": "Demand for Safari extensions on iOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=30"
  },
  {
    "text": "has been especially impressive.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=32"
  },
  {
    "text": "They're often among the top categories on the App Store ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=33"
  },
  {
    "text": "since their introduction at WWDC21.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=35"
  },
  {
    "text": "Your extensions empower users to customize ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=38"
  },
  {
    "text": "their browsing experience across macOS, iOS, and iPadOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=40"
  },
  {
    "text": "There are four ways to build Safari extensions: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=45"
  },
  {
    "text": "content blockers, share extensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=47"
  },
  {
    "text": "app extensions, and web extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=49"
  },
  {
    "text": "Safari 17 continues to support all of these types, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=51"
  },
  {
    "text": "but the future of browser customization ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=54"
  },
  {
    "text": "lies in web extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=56"
  },
  {
    "text": "Apple is dedicated to standardizing web extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=57"
  },
  {
    "text": "alongside the other major browser vendors.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=60"
  },
  {
    "text": "This collaboration aims to improve compatibility, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=62"
  },
  {
    "text": "streamline development, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=64"
  },
  {
    "text": "and ensure a familiar experience across all browsers.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=66"
  },
  {
    "text": "We're working together ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=69"
  },
  {
    "text": "in the W3C WebExtensions Community Group, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=70"
  },
  {
    "text": "where Apple proudly serves as a cochair.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=72"
  },
  {
    "text": "By connecting with other browser and extension developers ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=75"
  },
  {
    "text": "to drive this standardization effort, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=77"
  },
  {
    "text": "we're building a stronger and more unified ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=79"
  },
  {
    "text": "web extension ecosystem.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=80"
  },
  {
    "text": "Before jumping into today's topics, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=83"
  },
  {
    "text": "I'd like to share two key details ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=84"
  },
  {
    "text": "about Safari web extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=85"
  },
  {
    "text": "First, Safari 17 will continue to support both Manifest v2 ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=88"
  },
  {
    "text": "and v3 web extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=92"
  },
  {
    "text": "We'll continue to add new features to Manifest v3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=94"
  },
  {
    "text": "so update when it makes sense for your extension.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=97"
  },
  {
    "text": "Second, web extensions are the best way ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=100"
  },
  {
    "text": "to build extensions for Safari across platforms.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=102"
  },
  {
    "text": "With a single shared codebase, web extensions allow you ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=105"
  },
  {
    "text": "to customize the capabilities of Safari on iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=107"
  },
  {
    "text": "iPadOS, macOS, and now xrOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=110"
  },
  {
    "text": "That's right, web extension available on iOS and iPadOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=114"
  },
  {
    "text": "will also be available on xrOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=117"
  },
  {
    "text": "Web extensions on xrOS work just like you'd expect ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=120"
  },
  {
    "text": "and have the same capabilities as extensions on iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=123"
  },
  {
    "text": "including the ability to inject scripts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=125"
  },
  {
    "text": "run background content, and display popovers.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=127"
  },
  {
    "text": "We're excited to see how your extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=131"
  },
  {
    "text": "enhance the browsing experience on xrOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=132"
  },
  {
    "text": "To learn more about Safari on xrOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=135"
  },
  {
    "text": "check out \"Meet Safari for xrOS.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=137"
  },
  {
    "text": "With those announcements out of the way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=141"
  },
  {
    "text": "here's what we'll cover in the rest of today's session.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=143"
  },
  {
    "text": "First, we'll delve into some new and updated extension APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=146"
  },
  {
    "text": "and how they enhance the capabilities ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=149"
  },
  {
    "text": "of Safari extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=150"
  },
  {
    "text": "Then we'll cover per-site permissions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=153"
  },
  {
    "text": "for Safari app extensions, offering users more control ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=154"
  },
  {
    "text": "over their browsing experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=158"
  },
  {
    "text": "And finally, we'll take a look at how to ensure compatibility ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=160"
  },
  {
    "text": "with both Safari Profiles and Private Browsing.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=163"
  },
  {
    "text": "Up first, new extension APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=167"
  },
  {
    "text": "Content blockers are a great way to clean up web pages, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=170"
  },
  {
    "text": "remove annoyances, and block loading of scripts.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=173"
  },
  {
    "text": "Content blockers use rules defined in JSON to block or hide ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=176"
  },
  {
    "text": "content without needing access to any information ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=179"
  },
  {
    "text": "about what websites are visited.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=181"
  },
  {
    "text": "Declaratively hiding content on web pages can be tricky.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=183"
  },
  {
    "text": "That's why content blockers now support :has() selectors.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=186"
  },
  {
    "text": ":has() selectors are great because they allow ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=190"
  },
  {
    "text": "your content blocker to precisely target parent elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=191"
  },
  {
    "text": "based on their children.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=194"
  },
  {
    "text": "In this rule example, we're hiding any elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=196"
  },
  {
    "text": "with the class .post that also have a child element ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=198"
  },
  {
    "text": "with the class .paid-promo.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=201"
  },
  {
    "text": "Extensions that hide webpage content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=203"
  },
  {
    "text": "or block network requests, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=205"
  },
  {
    "text": "are some of the most popular types of extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=206"
  },
  {
    "text": "That's why Safari continues to support you ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=209"
  },
  {
    "text": "in creating innovative and effective extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=211"
  },
  {
    "text": "that offer a secure and private browsing experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=213"
  },
  {
    "text": "for your users.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=215"
  },
  {
    "text": "If you're looking to block or modify network requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=217"
  },
  {
    "text": "with a web extension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=219"
  },
  {
    "text": "you should check out these updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=220"
  },
  {
    "text": "to Declarative Net Request.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=222"
  },
  {
    "text": "Declarative Net Request is a powerful API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=224"
  },
  {
    "text": "that provides a way for your web extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=226"
  },
  {
    "text": "to block and modify network requests.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=228"
  },
  {
    "text": "Like content blockers, your extension provides rules ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=232"
  },
  {
    "text": "in a JSON format and Safari handles the rest.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=234"
  },
  {
    "text": "This means enhanced power efficiency, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=237"
  },
  {
    "text": "especially on battery-powered devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=239"
  },
  {
    "text": "Since these rules are declarative, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=243"
  },
  {
    "text": "your extension doesn't need access ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=245"
  },
  {
    "text": "to webpages the user visits, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=246"
  },
  {
    "text": "increasing their privacy and security.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=248"
  },
  {
    "text": "One big update to Declarative Net Request ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=251"
  },
  {
    "text": "in Safari 16.4 is that your extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=253"
  },
  {
    "text": "can now modify request headers.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=255"
  },
  {
    "text": "In this example, I've defined an action ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=258"
  },
  {
    "text": "that sets a custom User-Agent header ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=260"
  },
  {
    "text": "for all requests made to example.com.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=262"
  },
  {
    "text": "Beyond setting headers, this action type can modify headers ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=264"
  },
  {
    "text": "by adding new values, removing existing values, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=267"
  },
  {
    "text": "or even removing headers entirely ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=270"
  },
  {
    "text": "from HTTP requests.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=271"
  },
  {
    "text": "Modifying network requests is a powerful tool, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=275"
  },
  {
    "text": "and there are some key points to keep in mind.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=277"
  },
  {
    "text": "First, you must declare ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=280"
  },
  {
    "text": "the declarativeNetRequestWithHostAccess permission ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=281"
  },
  {
    "text": "in the manifest.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=284"
  },
  {
    "text": "In Safari 16.4, this permission is now also required ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=286"
  },
  {
    "text": "for redirect actions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=289"
  },
  {
    "text": "Your extension must also be granted per-site permissions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=291"
  },
  {
    "text": "for any modify headers or redirect actions to be applied.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=293"
  },
  {
    "text": "This ensures that the user has control over their data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=297"
  },
  {
    "text": "on a site-by-site basis.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=299"
  },
  {
    "text": "By keeping these considerations in mind, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=301"
  },
  {
    "text": "you can create powerful and privacy-friendly ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=303"
  },
  {
    "text": "content-blocking extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=305"
  },
  {
    "text": "that provide a tailored experience for your users.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=306"
  },
  {
    "text": "If you're building an extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=309"
  },
  {
    "text": "that uses Declarative Net Request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=310"
  },
  {
    "text": "you may want to let your users know ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=312"
  },
  {
    "text": "just how many requests it has blocked.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=313"
  },
  {
    "text": "Using the new ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=316"
  },
  {
    "text": "declarativeNetRequest.setExtensionActionOptions API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=317"
  },
  {
    "text": "you can configure the badge text to display action counts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=321"
  },
  {
    "text": "such as the number of blocked loads.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=323"
  },
  {
    "text": "In this example, we set the ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=325"
  },
  {
    "text": "displayActionCountAsBadgeText option to true, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=327"
  },
  {
    "text": "which is currently the only option for this API.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=330"
  },
  {
    "text": "Your extension badge will update automatically ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=334"
  },
  {
    "text": "based on the actions taken.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=335"
  },
  {
    "text": "This allows your users to easily monitor ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=338"
  },
  {
    "text": "the extension's activity and effectiveness, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=340"
  },
  {
    "text": "all while keeping their browsing history private.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=342"
  },
  {
    "text": "Now I'll cover an update to the scripting API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=345"
  },
  {
    "text": "that gives you more control over the behavior of your extension.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=347"
  },
  {
    "text": "With the registerContentScript set of APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=351"
  },
  {
    "text": "you can create content scripts that can be registered, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=353"
  },
  {
    "text": "updated, or removed programmatically.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=355"
  },
  {
    "text": "This means that you can target specific pages or conditions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=358"
  },
  {
    "text": "to apply to content scripts.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=360"
  },
  {
    "text": "In this example, I'm registering a script ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=363"
  },
  {
    "text": "to be injected onto pages that match webkit.org.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=364"
  },
  {
    "text": "This script registration will also persist across sessions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=368"
  },
  {
    "text": "This new API complements the static content scripts ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=371"
  },
  {
    "text": "defined in the extension manifest, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=373"
  },
  {
    "text": "giving you greater flexibility in managing content scripts ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=375"
  },
  {
    "text": "and enabling you to create more advanced features ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=378"
  },
  {
    "text": "for your extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=379"
  },
  {
    "text": "Safari 16.4 also brings a new storage area ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=382"
  },
  {
    "text": "to web extensions: the session storage area.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=384"
  },
  {
    "text": "Storing and retrieving data from session storage ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=387"
  },
  {
    "text": "uses the same familiar functions as other storage areas.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=389"
  },
  {
    "text": "This API allows you to store data in memory ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=393"
  },
  {
    "text": "for the duration of your browser session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=395"
  },
  {
    "text": "providing a fast and efficient way to access data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=397"
  },
  {
    "text": "between nonpersistent background page loads.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=399"
  },
  {
    "text": "Unlike local storage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=402"
  },
  {
    "text": "session storage is not persisted to disk ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=403"
  },
  {
    "text": "and it's cleared when Safari quits.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=405"
  },
  {
    "text": "This makes session storage particularly useful ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=407"
  },
  {
    "text": "for storing sensitive or security-related data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=409"
  },
  {
    "text": "such as decryption keys or authentication tokens, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=411"
  },
  {
    "text": "that should not be stored in local storage.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=414"
  },
  {
    "text": "Finally, we know that making sure your extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=418"
  },
  {
    "text": "has all the right icon sizes for different UI elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=420"
  },
  {
    "text": "is a chore.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=423"
  },
  {
    "text": "That's why starting in Safari 16.4, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=424"
  },
  {
    "text": "you can now create a single SVG icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=426"
  },
  {
    "text": "that looks beautiful at any size.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=428"
  },
  {
    "text": "Safari will take care of scaling your extension's icon sharply, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=430"
  },
  {
    "text": "letting you focus on everything else.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=433"
  },
  {
    "text": "Those API updates are just some of the improvements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=435"
  },
  {
    "text": "to Safari extensions this year.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=437"
  },
  {
    "text": "Now let's talk about Safari app extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=439"
  },
  {
    "text": "and per-site permissions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=441"
  },
  {
    "text": "If you're already familiar with per-site permissions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=444"
  },
  {
    "text": "from web extensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=446"
  },
  {
    "text": "they work the same way for app extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=447"
  },
  {
    "text": "Users are able to grant extensions access ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=449"
  },
  {
    "text": "to websites as they browse, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=451"
  },
  {
    "text": "providing for better privacy and control.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=453"
  },
  {
    "text": "When an extension is first turned on, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=456"
  },
  {
    "text": "it won't have access to any sites that the user visits.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=457"
  },
  {
    "text": "The first time an extension tries to access the page, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=460"
  },
  {
    "text": "Safari will badge the extension's toolbar item ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=463"
  },
  {
    "text": "alerting the user that the extension wants access ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=465"
  },
  {
    "text": "to the current page.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=467"
  },
  {
    "text": "When the user clicks on that toolbar item, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=468"
  },
  {
    "text": "they'll be shown information about what access ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=470"
  },
  {
    "text": "the extension will have, and be given the option ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=472"
  },
  {
    "text": "to Allow for One Day, or Always Allow.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=473"
  },
  {
    "text": "When granted permission, the extension's toolbar item ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=477"
  },
  {
    "text": "will be tinted to show that the extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=479"
  },
  {
    "text": "has access to the current page.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=480"
  },
  {
    "text": "Anyone that upgrades to Safari 17 ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=483"
  },
  {
    "text": "and already has Safari app extensions turned on ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=485"
  },
  {
    "text": "will have all permissions migrated for those extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=487"
  },
  {
    "text": "They'll also be shown a banner giving them the option ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=490"
  },
  {
    "text": "to increase their privacy.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=492"
  },
  {
    "text": "If Ask for Each Website is chosen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=494"
  },
  {
    "text": "all Safari app extension permissions will be reset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=496"
  },
  {
    "text": "and your users will be able to grant your extension access ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=498"
  },
  {
    "text": "to each site as they visit.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=500"
  },
  {
    "text": "There are no new APIs to adopt to support this change ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=503"
  },
  {
    "text": "in Safari 17; however, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=505"
  },
  {
    "text": "take some time to review your extension's assumptions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=507"
  },
  {
    "text": "and test how your extensions behave in Safari 17.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=509"
  },
  {
    "text": "Your users will have full control over the websites ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=513"
  },
  {
    "text": "every Safari app extension can access.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=515"
  },
  {
    "text": "Your extension will automatically have access ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=518"
  },
  {
    "text": "to sites when permission is granted by the user.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=520"
  },
  {
    "text": "However, permissions can be granted or revoked at any time.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=522"
  },
  {
    "text": "Toolbar items are now shown by default for all extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=527"
  },
  {
    "text": "Take a look at how your extension icon appears in Safari ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=529"
  },
  {
    "text": "and supply a PDF vector icon ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=532"
  },
  {
    "text": "that can be tinted appropriately.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=533"
  },
  {
    "text": "Finally, let's talk about updates to how extensions work ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=536"
  },
  {
    "text": "in both Profiles and Private Browsing.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=539"
  },
  {
    "text": "In Safari 17, users will be able to control which extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=542"
  },
  {
    "text": "have access to their Private Browsing windows and tabs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=545"
  },
  {
    "text": "without needing to turn off the extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=548"
  },
  {
    "text": "in other browsing contexts.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=550"
  },
  {
    "text": "Extensions that inject scripts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=552"
  },
  {
    "text": "or can read information about the pages a user visits, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=554"
  },
  {
    "text": "are turned off by default.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=556"
  },
  {
    "text": "However, extensions that don't access content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=558"
  },
  {
    "text": "like content blockers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=561"
  },
  {
    "text": "are automatically allowed in Private Browsing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=562"
  },
  {
    "text": "because there aren't any additional privacy concerns.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=564"
  },
  {
    "text": "Here's the updated Extensions pane in Safari settings on macOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=567"
  },
  {
    "text": "and there are similar updates on iOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=570"
  },
  {
    "text": "There's a new option to allow this extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=572"
  },
  {
    "text": "in Private Browsing.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=574"
  },
  {
    "text": "For extensions that are turned on, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=575"
  },
  {
    "text": "it's one click in Safari settings ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=577"
  },
  {
    "text": "to allow that extension access to Private Browsing as well.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=578"
  },
  {
    "text": "Profiles are new in Safari this year.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=582"
  },
  {
    "text": "They're a way to keep browsing data separated.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=584"
  },
  {
    "text": "Profiles contain separate history, cookies, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=586"
  },
  {
    "text": "and website data.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=589"
  },
  {
    "text": "Users can also choose which extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=591"
  },
  {
    "text": "they want to turn on per profile.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=592"
  },
  {
    "text": "This includes new tab page extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=594"
  },
  {
    "text": "And of course, all these settings sync ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=596"
  },
  {
    "text": "across all of a user's iPhone, iPad, and Macs through iCloud.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=598"
  },
  {
    "text": "The Extensions pane in Safari settings ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=603"
  },
  {
    "text": "has also been updated to list the profiles ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=604"
  },
  {
    "text": "where an extension is active.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=606"
  },
  {
    "text": "Here you can see that the Sea Creator extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=608"
  },
  {
    "text": "is active in both Work and School profiles.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=610"
  },
  {
    "text": "When an extension is turned on in a profile, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=613"
  },
  {
    "text": "it is an entirely new instance of that extension.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=615"
  },
  {
    "text": "This means each instance will have a different UUID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=617"
  },
  {
    "text": "background page, and storage.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=620"
  },
  {
    "text": "However, per-site permissions are shared across profiles.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=623"
  },
  {
    "text": "That means your users only need ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=625"
  },
  {
    "text": "to grant your extension access once.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=627"
  },
  {
    "text": "When running in a profile, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=629"
  },
  {
    "text": "an extension only has access to the windows, tabs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=631"
  },
  {
    "text": "and other data related to that profile.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=633"
  },
  {
    "text": "If your extension communicates with a native host app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=636"
  },
  {
    "text": "make sure that your app expects to receive messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=638"
  },
  {
    "text": "from multiple profiles ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=640"
  },
  {
    "text": "and respects the separation of data across those profiles.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=641"
  },
  {
    "text": "When your app receives a call to beginRequest(with context:), ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=645"
  },
  {
    "text": "decode the userInfo dictionary.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=648"
  },
  {
    "text": "If your extension is active in a profile, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=650"
  },
  {
    "text": "there will be a profileIdentifier value ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=652"
  },
  {
    "text": "for the key SFExtensionProfileKey.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=654"
  },
  {
    "text": "Since extensions have unique instances per profile, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=659"
  },
  {
    "text": "it's possible to inspect their background content separately.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=661"
  },
  {
    "text": "From the Develop menu in Safari 17, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=665"
  },
  {
    "text": "you can dive into ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=667"
  },
  {
    "text": "the Web Extension Background Content menu item ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=668"
  },
  {
    "text": "and see the background pages and service workers ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=670"
  },
  {
    "text": "grouped by extension.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=672"
  },
  {
    "text": "Each extension will list its inspectable content per profile.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=673"
  },
  {
    "text": "To learn more about the improvements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=677"
  },
  {
    "text": "to Safari developer features this year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=679"
  },
  {
    "text": "check out \"What's new in Web Inspector\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=680"
  },
  {
    "text": "and \"Rediscover Safari developer features.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=682"
  },
  {
    "text": "In summary, Safari is committed to standardizing web extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=686"
  },
  {
    "text": "and providing you with new APIs to create innovative ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=689"
  },
  {
    "text": "and effective extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=691"
  },
  {
    "text": "We'd love for you to join in the discussion ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=693"
  },
  {
    "text": "and help shape the future of web extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=695"
  },
  {
    "text": "by participating in the WECG.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=696"
  },
  {
    "text": "With per-site permissions for app extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=699"
  },
  {
    "text": "and support for new features like :has() selectors, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=701"
  },
  {
    "text": "you can create extensions that offer a secure ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=703"
  },
  {
    "text": "and private browsing experience for your users.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=705"
  },
  {
    "text": "Don't forget to update your extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=708"
  },
  {
    "text": "to take advantage of these new capabilities ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=710"
  },
  {
    "text": "and ensure they work well with both Profiles ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=711"
  },
  {
    "text": "and Private Browsing.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=713"
  },
  {
    "text": "And finally, provide feedback through Feedback Assistant ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=715"
  },
  {
    "text": "as you test your extensions in Safari 17.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=718"
  },
  {
    "text": "Thank you for listening, and have a great rest of WWDC.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=721"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10119/?time=724"
  }
]