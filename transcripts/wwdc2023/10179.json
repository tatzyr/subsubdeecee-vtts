[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=0"
  },
  {
    "text": "Erin: Hi! My name is Erin, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=10"
  },
  {
    "text": "and I'm an Engineer on the CoreMotion team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=12"
  },
  {
    "text": "I'm excited to tell you about some cool updates to CoreMotion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=15"
  },
  {
    "text": "CoreMotion serves as a central framework to access motion data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=19"
  },
  {
    "text": "from inertial sensors. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=22"
  },
  {
    "text": "As our hardware has advanced, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=24"
  },
  {
    "text": "so has our ability to capture motion information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=26"
  },
  {
    "text": "Crash detection, fall detection, and spatial audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=29"
  },
  {
    "text": "are just some of the features that rely on improved sensing capabilities. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=33"
  },
  {
    "text": "With CoreMotion, you can take advantage of these improvements in your own apps too. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=38"
  },
  {
    "text": "In this session, I'll focus on some of the newer ways ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=43"
  },
  {
    "text": "you can interact with motion data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=46"
  },
  {
    "text": "but before I get to what's new, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=48"
  },
  {
    "text": "I'd like to give you a quick reminder of the sensors that generate motion data.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=50"
  },
  {
    "text": "Capturing the way a device moves is central to how we experience them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=55"
  },
  {
    "text": "Many of Apple's devices use built-in sensors ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=59"
  },
  {
    "text": "to help create a notion of their movement through space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=63"
  },
  {
    "text": "Take Apple Watch for example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=66"
  },
  {
    "text": "Its built-in sensors include an accelerometer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=68"
  },
  {
    "text": "which measures acceleration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=71"
  },
  {
    "text": "a gyroscope, which measures rotation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=73"
  },
  {
    "text": "a magnetometer, which measures the magnetic field, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=77"
  },
  {
    "text": "and a barometer, which measures pressure. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=80"
  },
  {
    "text": "Together, they help track how the device moves and orients in space.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=83"
  },
  {
    "text": "Generating an idea of a device's movement is fundamental ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=88"
  },
  {
    "text": "to many of the features we enjoy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=92"
  },
  {
    "text": "These include things like tracking the number of steps you've taken that day ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=94"
  },
  {
    "text": "and how many calories you've burned during a workout. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=98"
  },
  {
    "text": "It supports experiences that rely on the orientation of the device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=100"
  },
  {
    "text": "like with a stargazing app to explore the stars in our sky. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=104"
  },
  {
    "text": "Features that keep us safe by detecting when you've been in a car crash ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=108"
  },
  {
    "text": "or when you've fallen, also rely on tracking movement ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=112"
  },
  {
    "text": "using those same sensors. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=115"
  },
  {
    "text": "These are just some of the many applications that are possible, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=117"
  },
  {
    "text": "and we always look forward to seeing how you leverage CoreMotion.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=120"
  },
  {
    "text": "Now that I've given you a brief overview of some of the sensors that are involved, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=124"
  },
  {
    "text": "I'll go over getting motion data from audio products like AirPods, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=128"
  },
  {
    "text": "getting water submersion data updates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=132"
  },
  {
    "text": "and finally, a new way to stream higher rate sensor data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=135"
  },
  {
    "text": "Let's get started with headphone motion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=139"
  },
  {
    "text": "Not too long ago, spatial audio with dynamic head tracking ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=142"
  },
  {
    "text": "changed the way we experience music and movies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=147"
  },
  {
    "text": "Dynamic head tracking relies on the same device motion algorithms ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=150"
  },
  {
    "text": "that live on iPhone and Apple Watch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=154"
  },
  {
    "text": "When CMHeadphoneMotionManager was introduced a couple years ago, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=157"
  },
  {
    "text": "the same data that made dynamic head tracking possible ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=161"
  },
  {
    "text": "was made available to you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=164"
  },
  {
    "text": "By streaming attitude, user acceleration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=167"
  },
  {
    "text": "and rotation rate data to a connected iOS or iPadOS device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=170"
  },
  {
    "text": "you could track the way your head moves. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=175"
  },
  {
    "text": "Head tracking unlocked a lot of cool features, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=177"
  },
  {
    "text": "from gaming to fitness applications. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=180"
  },
  {
    "text": "And now, this year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=182"
  },
  {
    "text": "CMHeadphoneMotionManager is coming to macOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=184"
  },
  {
    "text": "Let's go through some details.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=188"
  },
  {
    "text": "CMHeadphoneMotionManager was first made available ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=190"
  },
  {
    "text": "in iOS and iPadOS 14. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=193"
  },
  {
    "text": "And starting this year, it's also coming to macOS 14. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=197"
  },
  {
    "text": "You can use CMHeadphoneMotionManager to stream device motion ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=201"
  },
  {
    "text": "from audio products that support spatial audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=205"
  },
  {
    "text": "with dynamic head tracking, like AirPods Pro, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=208"
  },
  {
    "text": "to a connected iOS, iPadOS, or macOS device.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=211"
  },
  {
    "text": "Inspect CMDeviceMotion for attitude, user acceleration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=215"
  },
  {
    "text": "and rotation rate data during streaming from supported devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=220"
  },
  {
    "text": "just like you would on iPhone and Apple Watch.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=224"
  },
  {
    "text": "Note additional information specific to CMHeadphoneMotionManager, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=227"
  },
  {
    "text": "like SensorLocation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=231"
  },
  {
    "text": "that help disambiguate where the source of the data is, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=233"
  },
  {
    "text": "whether it's from the left or right bud.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=236"
  },
  {
    "text": "Because data is streamed from a remote device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=239"
  },
  {
    "text": "it's important to understand when it's connected.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=242"
  },
  {
    "text": "CMHeadphoneMotionManagerDelegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=245"
  },
  {
    "text": "makes it easy to listen for connection state updates.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=247"
  },
  {
    "text": "Let me show you how to use it.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=251"
  },
  {
    "text": "Adopt the CMHeadphoneMotionManagerDelegate protocol ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=254"
  },
  {
    "text": "to respond to connection state updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=257"
  },
  {
    "text": "Data is available when the audio device is connected to a supported streaming device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=260"
  },
  {
    "text": "like iPhone, iPad, or Mac. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=264"
  },
  {
    "text": "If Automatic Ear Detection is enabled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=267"
  },
  {
    "text": "you'll receive events that impact head tracking too. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=270"
  },
  {
    "text": "You'll get a disconnect event when the buds are taken out of ear, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=273"
  },
  {
    "text": "and a connect event when they're put back in.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=276"
  },
  {
    "text": "Similarly, if automatic head detection is enabled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=279"
  },
  {
    "text": "putting on and taking off over ear headphones will trigger these events. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=283"
  },
  {
    "text": "Setting up CMHeadphoneMotionManager to listen for these events ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=288"
  },
  {
    "text": "and stream data is easy. Let me show you how.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=292"
  },
  {
    "text": "Before you start streaming, you'll want to make sure ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=295"
  },
  {
    "text": "that device motion data is available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=298"
  },
  {
    "text": "which can be checked using the isDeviceMotionAvailable property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=300"
  },
  {
    "text": "Assign a delegate to receive the connection events I spoke about earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=305"
  },
  {
    "text": "Then, start streaming data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=309"
  },
  {
    "text": "CMHeadphoneMotionManager exposes both a push and a pull interface to grab data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=311"
  },
  {
    "text": "In this example, we'll use the push interface. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=316"
  },
  {
    "text": "Use startDeviceMotionUpdates and specify an operation queue and handler.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=319"
  },
  {
    "text": "Because you're accessing motion data, authorization is important. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=324"
  },
  {
    "text": "Users of your app are prompted to authorize your app for motion data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=329"
  },
  {
    "text": "using the Motion Usage Description key you add to your Info.plist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=333"
  },
  {
    "text": "You can check the authorizationStatus property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=338"
  },
  {
    "text": "to confirm whether you've been authorized for motion data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=340"
  },
  {
    "text": "and provide a seamless experience regardless of permission level.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=343"
  },
  {
    "text": "Once you're authorized and data starts streaming, tracking head pose is easy ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=347"
  },
  {
    "text": "using the attitude information provided with each device motion update. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=352"
  },
  {
    "text": "For example, we can keep track of a reference attitude as startingPose ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=356"
  },
  {
    "text": "and use the multiply method to conveniently obtain ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=361"
  },
  {
    "text": "the current sample's relative change to that original pose. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=364"
  },
  {
    "text": "Along with the attitude, user acceleration, and rotation rate data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=368"
  },
  {
    "text": "each device motion update contains sensor location information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=373"
  },
  {
    "text": "This is important because motion data is delivered to you from one bud at a time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=378"
  },
  {
    "text": "The SensorLocation enum delivered with each sample lets you identify ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=384"
  },
  {
    "text": "which bud sourced the data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=389"
  },
  {
    "text": "The bud streaming the data can be impacted by a number of things, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=391"
  },
  {
    "text": "including in-ear state if Automatic Ear Detection is enabled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=395"
  },
  {
    "text": "For example, if data was streaming from my right bud ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=399"
  },
  {
    "text": "but I take it out of my ear with Automatic Ear Detection enabled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=403"
  },
  {
    "text": "then my left bud will take over the data stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=406"
  },
  {
    "text": "This allows for a more seamless head tracking experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=409"
  },
  {
    "text": "Convenient head tracking opened the door to a lot of different experiences. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=413"
  },
  {
    "text": "Things like counting the number of pushups you did or monitoring posture ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=417"
  },
  {
    "text": "were made easier than ever. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=421"
  },
  {
    "text": "And now, with macOS support, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=423"
  },
  {
    "text": "you're able to stream motion data from head-tracking-enabled audio products ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=425"
  },
  {
    "text": "to an even wider range of devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=429"
  },
  {
    "text": "We're excited to see what you build using CMHeadphoneMotionManager. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=432"
  },
  {
    "text": "Now, you don't need to measure pressure to track how your head moves, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=437"
  },
  {
    "text": "but something else does. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=440"
  },
  {
    "text": "I'm going to talk about ways you can interact with water-based activities ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=442"
  },
  {
    "text": "using some cool updates to CMWaterSubmersionManager.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=446"
  },
  {
    "text": "During water-based activities like snorkeling or swimming, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=451"
  },
  {
    "text": "there are a lot of things that are interesting to know ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=455"
  },
  {
    "text": "about the water and your submersion state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=457"
  },
  {
    "text": "You're probably interested in how deep you are ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=460"
  },
  {
    "text": "and what the water temperature is. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=463"
  },
  {
    "text": "It's also useful to know when you're submerged ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=465"
  },
  {
    "text": "or if you've exited the water back onto shore or a boat, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=468"
  },
  {
    "text": "and what the surface air pressure during your activity is. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=471"
  },
  {
    "text": "Using the built-in barometer, CMWaterSubmersionManager ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=474"
  },
  {
    "text": "can track these metrics for you during your water-based activities. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=478"
  },
  {
    "text": "Let me give you some details.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=482"
  },
  {
    "text": "CMWaterSubmersionManager is available on Apple Watch Ultra running watchOS 9. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=484"
  },
  {
    "text": "Use CMWaterSubmersionManagerDelegate to listen for depth, temperature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=490"
  },
  {
    "text": "and submersion state data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=496"
  },
  {
    "text": "Make sure to add the Shallow Depth and Pressure capability to your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=498"
  },
  {
    "text": "and get a seamless experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=502"
  },
  {
    "text": "when users of your app start their water-based activities ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=504"
  },
  {
    "text": "by configuring Auto Launch settings. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=507"
  },
  {
    "text": "Let me show you how to get started using CMWaterSubmersionManager. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=509"
  },
  {
    "text": "To start tracking water submersion state, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=514"
  },
  {
    "text": "set up CMWaterSubmersionManager after checking availability. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=517"
  },
  {
    "text": "Then, assign a delegate to start receiving updates about submersion state and events. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=522"
  },
  {
    "text": "Let's talk a bit about how to receive those updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=527"
  },
  {
    "text": "Getting updates is simple using CMWaterSubmersionManagerDelegate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=530"
  },
  {
    "text": "There are a number of different types of updates that you can receive. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=535"
  },
  {
    "text": "Updates to submersion state, like when you enter and exit the water, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=539"
  },
  {
    "text": "are delivered using the didUpdate method with CMWaterSubmersionEvent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=543"
  },
  {
    "text": "You'll receive an errorOccurred update when there are issues, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=548"
  },
  {
    "text": "like if you tried to receive updates when your app is missing the entitlement, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=552"
  },
  {
    "text": "or is on an unsupported platform. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=556"
  },
  {
    "text": "Water temperature updates are delivered using CMWaterTemperature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=559"
  },
  {
    "text": "They come with a notion of uncertainty, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=563"
  },
  {
    "text": "as it takes a couple seconds for the watch temperature to equalize with the water. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=565"
  },
  {
    "text": "So, when you first become submerged, uncertainty will be higher ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=570"
  },
  {
    "text": "and then begin to converge once you've spent more time in the water. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=574"
  },
  {
    "text": "Note that water temperature is only available when submerged.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=578"
  },
  {
    "text": "You'll receive depth, pressure, surface pressure, and submersion state updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=582"
  },
  {
    "text": "with CMWaterSubmersionMeasurement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=588"
  },
  {
    "text": "During your submerged activity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=590"
  },
  {
    "text": "measurements are delivered to your app at regular intervals. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=592"
  },
  {
    "text": "Note that some of this data, like depth, are only applicable ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=596"
  },
  {
    "text": "when you're in the submerged state, so these are optional.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=600"
  },
  {
    "text": "Depth under water corresponds to certain depth states. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=603"
  },
  {
    "text": "Let me show you how they're mapped.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=607"
  },
  {
    "text": "Let's start with the state out of water, when you're in the notSubmerged state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=610"
  },
  {
    "text": "Above 1 meter under water, you're in the submergedShallow state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=614"
  },
  {
    "text": "Beyond 1 meter, you're in the submergedDeep state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=618"
  },
  {
    "text": "With the Shallow Depth and Pressure capability, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=621"
  },
  {
    "text": "it's easy to ensure users of your app stay within depth zones ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=624"
  },
  {
    "text": "that minimize the risk of decompression sickness.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=628"
  },
  {
    "text": "It keeps the maximum depth at 6 meters, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=631"
  },
  {
    "text": "and lets you know when you're close to that depth. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=634"
  },
  {
    "text": "You can use the maximum depth property to check the depth being monitored for. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=636"
  },
  {
    "text": "As you approach 6 meters, you'll enter the approachingMaxDepth state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=641"
  },
  {
    "text": "Beyond 6 meters, you're in the pastMaxDepth state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=645"
  },
  {
    "text": "Data is vended down to 6 meters, plus some uncertainty in the pastMaxDepth state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=649"
  },
  {
    "text": "Beyond that, you're in the sensorDepthError state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=655"
  },
  {
    "text": "By dividing depth into zones, CMWaterSubmersionManager makes it easy ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=658"
  },
  {
    "text": "to monitor for changes in depth with a focus on safety and sensor limits. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=663"
  },
  {
    "text": "If you're interested in use cases beyond the 6 meter depth maximum, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=668"
  },
  {
    "text": "you can check out the documentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=672"
  },
  {
    "text": "for more information on the managed entitlement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=674"
  },
  {
    "text": "Whichever way you choose, creating great experiences for water sports ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=677"
  },
  {
    "text": "is easier than ever with CMWaterSubmersionManager.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=680"
  },
  {
    "text": "There's are a lot of sports out of water too though, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=684"
  },
  {
    "text": "and I'm excited to share a way to consume high rate motion data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=687"
  },
  {
    "text": "during these activities using CMBatchedSensorManager. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=690"
  },
  {
    "text": "Let's first start off with some background.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=695"
  },
  {
    "text": "I've talked through some of the ways motion data is delivered to you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=697"
  },
  {
    "text": "Device motion algorithms fuse data from the built-in accelerometer and gyroscope ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=701"
  },
  {
    "text": "to provide an easy way to track the way a device, like Apple Watch, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=706"
  },
  {
    "text": "is moving through space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=710"
  },
  {
    "text": "You may be familiar with CMMotionManager, which delivers these samples ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=712"
  },
  {
    "text": "on a per-sample basis to your app in real time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=716"
  },
  {
    "text": "The maximum supported frequency is 100 Hz. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=720"
  },
  {
    "text": "This means it's a great choice if you have low latency requirements, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=723"
  },
  {
    "text": "such as UI components that rely on the instantaneous attitude of the device.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=727"
  },
  {
    "text": "Now, how does this compare with the way we deliver high rate data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=733"
  },
  {
    "text": "using the new CMBatchedSensorManager? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=737"
  },
  {
    "text": "CMBatchedSensorManager provides batches of sensor data on a fixed schedule, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=741"
  },
  {
    "text": "delivering a batch of data per second. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=746"
  },
  {
    "text": "This means we're able to deliver higher rate data at a lower overhead to your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=748"
  },
  {
    "text": "That's 800 Hz accelerometer and 200 Hz device motion, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=753"
  },
  {
    "text": "compared to 100 Hz with the existing CMMotionManager. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=757"
  },
  {
    "text": "Now, you can access some of the same data streams ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=761"
  },
  {
    "text": "that power the features that keep us safe, like fall and crash detection.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=764"
  },
  {
    "text": "Because data is batched, there are some things to consider ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=770"
  },
  {
    "text": "when thinking about using CMBatchedSensorManager. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=773"
  },
  {
    "text": "If your app has workout-centric features that can benefit from high rate data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=776"
  },
  {
    "text": "but without very tight latency requirements, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=781"
  },
  {
    "text": "then CMBatchedSensorManager is well suited.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=783"
  },
  {
    "text": "I went through how higher rate sensor data is delivered to you, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=787"
  },
  {
    "text": "and how it compares to what's provided by some of our existing interfaces. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=791"
  },
  {
    "text": "Let me show you some of the ways it can be used.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=795"
  },
  {
    "text": "Many sports are centered around short-duration impact-based events. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=798"
  },
  {
    "text": "This includes activities like golfing, tennis, and baseball, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=803"
  },
  {
    "text": "to name just a few examples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=807"
  },
  {
    "text": "In these, capturing more information during that swing movement ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=810"
  },
  {
    "text": "might be critical to evaluating form and improving your game. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=814"
  },
  {
    "text": "This is where capturing higher rate sensor data comes into play. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=818"
  },
  {
    "text": "We'll benefit by anchoring this in a concrete example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=823"
  },
  {
    "text": "Let's focus on a baseball swing.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=826"
  },
  {
    "text": "A swing has a couple different phases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=828"
  },
  {
    "text": "In this figure, we can see pre-swing setup, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=831"
  },
  {
    "text": "the actual swing, then the post-impact follow-through. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=834"
  },
  {
    "text": "An important metric for swing quality is time to contact. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=838"
  },
  {
    "text": "In other words, how much time elapses between ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=842"
  },
  {
    "text": "when the batter starts the swing of the bat, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=844"
  },
  {
    "text": "and the time when the bat hits the ball. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=847"
  },
  {
    "text": "Using high rate sensor data, we can divide this into three steps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=849"
  },
  {
    "text": "On the batter's wrist, we can see Apple Watch ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=853"
  },
  {
    "text": "with the x, y, and z directions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=856"
  },
  {
    "text": "We can imagine the path of the wrist as it moves around the batter in blue, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=859"
  },
  {
    "text": "with the gravity vector pointing down. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=863"
  },
  {
    "text": "To compute time to contact, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=866"
  },
  {
    "text": "I'll first detect the point of impact between the bat and the ball ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=868"
  },
  {
    "text": "using 800 Hz accelerometer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=871"
  },
  {
    "text": "Then, I'll identify the start of the swing using rotation along gravity ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=874"
  },
  {
    "text": "with 200 Hz device motion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=878"
  },
  {
    "text": "Finally, we can compute the difference between these timestamps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=881"
  },
  {
    "text": "from the start of the swing to impact, called time to contact. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=884"
  },
  {
    "text": "Let's start by visualizing the sensor data during the swing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=889"
  },
  {
    "text": "to get a sense of what we're looking for.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=892"
  },
  {
    "text": "Here, I've plotted the accelerometer data in the z direction ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=894"
  },
  {
    "text": "for a window of one second containing one swing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=898"
  },
  {
    "text": "I can see that between 0.5 and 0.6 seconds there's a burst of activity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=901"
  },
  {
    "text": "Our algorithm to detect the point of impact ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=907"
  },
  {
    "text": "will center around this observation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=910"
  },
  {
    "text": "Let's compare the amount of signal information available during the swing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=913"
  },
  {
    "text": "with 800 Hz accelerometer on top and 100 Hz accelerometer on bottom. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=917"
  },
  {
    "text": "In that section of interest, between 0.5 and 0.6 seconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=923"
  },
  {
    "text": "we now have 80 data points instead of 10, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=927"
  },
  {
    "text": "giving us a much finer grained picture of what's going on. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=930"
  },
  {
    "text": "This helps us zero in on the things we're interested in, like impact. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=933"
  },
  {
    "text": "Now, let's look at the same swing from the device motion perspective. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=938"
  },
  {
    "text": "This plots rotation rate along gravity at 200 Hz. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=943"
  },
  {
    "text": "I can see the swing start by the way rotation rate begins to change ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=947"
  },
  {
    "text": "at around the 0.3 second mark. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=951"
  },
  {
    "text": "Let's put these together. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=953"
  },
  {
    "text": "With these plots aligned by time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=956"
  },
  {
    "text": "I can get a feel for how the information in 800 Hz accelerometer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=958"
  },
  {
    "text": "and 200 Hz device motion helps me compute time to contact. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=962"
  },
  {
    "text": "Now that I have a good idea of how the swing shows up in the sensor streams, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=967"
  },
  {
    "text": "I can use CMBatchedSensorManager to start streaming and processing data.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=971"
  },
  {
    "text": "First, we want to confirm the data is available on this platform. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=977"
  },
  {
    "text": "You can do so by checking isAccelerometerSupported.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=980"
  },
  {
    "text": "You can check for device motion support using a similar property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=984"
  },
  {
    "text": "Apple Watch Series 8 and Ultra support both high rate accelerometer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=988"
  },
  {
    "text": "and device motion.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=992"
  },
  {
    "text": "Because this a workout-centric API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=995"
  },
  {
    "text": "you need to have an active HealthKit workout session to get data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=998"
  },
  {
    "text": "Once you're in a HealthKit Workout session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1001"
  },
  {
    "text": "you can start receiving updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1003"
  },
  {
    "text": "With Swift async support, it's easy to receive batches of sensor data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1005"
  },
  {
    "text": "and process each batch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1010"
  },
  {
    "text": "Make sure you evaluate for conditions to exit the loop; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1011"
  },
  {
    "text": "for example, if the workout has ended.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1015"
  },
  {
    "text": "Remember that errors are surfaced if we aren't authorized for motion data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1018"
  },
  {
    "text": "or on an unsupported platform. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1022"
  },
  {
    "text": "Now, let's zoom in on what I want to do with each batch of data.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1024"
  },
  {
    "text": "For each batch, I'll call a feed function to run my algorithm on the data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1028"
  },
  {
    "text": "When the bat makes contact with the ball, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1034"
  },
  {
    "text": "I expect to see a pronounced response in the z direction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1036"
  },
  {
    "text": "Remember, the z axis is perpendicular to the watch crown. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1039"
  },
  {
    "text": "This reverberation is a good approximation of the impact. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1044"
  },
  {
    "text": "I'll process each accelerometer batch with this in mind.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1048"
  },
  {
    "text": "First, I want to better isolate the higher frequency response ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1052"
  },
  {
    "text": "as the force is displaced upon contact. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1056"
  },
  {
    "text": "To do this, I'll filter the z samples as fz. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1058"
  },
  {
    "text": "Using the filtered data, I'll approximate the point of impact ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1063"
  },
  {
    "text": "as the peak of the filtered signal. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1067"
  },
  {
    "text": "Let's keep track of the index associated with that sample as impactIndex. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1069"
  },
  {
    "text": "Using the impactIndex drawn from the filtered signal, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1074"
  },
  {
    "text": "I can grab the impact timestamp from the original batch of data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1077"
  },
  {
    "text": "This brings me to the second step on the way to compute time to contact: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1081"
  },
  {
    "text": "detecting the start of the swing using rotation along gravity.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1086"
  },
  {
    "text": "Imagine the path of Apple Watch as the batter takes a swing; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1091"
  },
  {
    "text": "it'll follow a path around the body to meet the ball. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1094"
  },
  {
    "text": "So I expect to see non zero rotation rate along gravity during the swing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1098"
  },
  {
    "text": "and close to zero rotation rate along gravity outside of the swing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1103"
  },
  {
    "text": "By streaming high frequency device motion into a local buffer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1107"
  },
  {
    "text": "I can use the rotation rate data to identify where the swing started.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1111"
  },
  {
    "text": "Let's take a closer look at what my compute function looks like. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1115"
  },
  {
    "text": "I'll iterate through my local buffer backwards ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1119"
  },
  {
    "text": "to investigate around the point of interest: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1121"
  },
  {
    "text": "the impact timestamp. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1123"
  },
  {
    "text": "Since I know the start of the swing must precede the impact, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1126"
  },
  {
    "text": "I can run a series of shouldProcess checks ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1129"
  },
  {
    "text": "before processing each sample in the buffer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1132"
  },
  {
    "text": "This can include a timestamp check to confirm ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1134"
  },
  {
    "text": "the device motion sample is from before the impact time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1137"
  },
  {
    "text": "I can also put bounds on the swing duration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1141"
  },
  {
    "text": "It makes sense that the start of the swing doesn't occur more than a certain duration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1144"
  },
  {
    "text": "before it makes contact with the ball.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1148"
  },
  {
    "text": "For samples that pass my series of initial checks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1151"
  },
  {
    "text": "I compute the rotation along gravity in my computeRotation function, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1154"
  },
  {
    "text": "which sums the product of each axis's rotation rate and gravity values. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1158"
  },
  {
    "text": "With rotation along gravity computed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1163"
  },
  {
    "text": "I can start looking for the start of the swing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1165"
  },
  {
    "text": "A simple swing start check might look for the consistent failure ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1168"
  },
  {
    "text": "of the rotation rate along gravity to meet a threshold value. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1171"
  },
  {
    "text": "Once I stop seeing rotation rate along gravity meet that threshold, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1175"
  },
  {
    "text": "I'll use that as the start time of the swing and exit out of the loop. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1179"
  },
  {
    "text": "As a final check, I'll validate the swing we detected. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1183"
  },
  {
    "text": "Here, I can look at the accumulated rotation along gravity during the swing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1187"
  },
  {
    "text": "and confirm it's within expected thresholds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1192"
  },
  {
    "text": "And with that, I can return the start timestamp I detected. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1195"
  },
  {
    "text": "This brings me to the final step, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1199"
  },
  {
    "text": "step 3, where I now have everything I need to compute time to contact. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1201"
  },
  {
    "text": "Let's go back to our initial feed function.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1205"
  },
  {
    "text": "Using CMBatchedSensorManager, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1208"
  },
  {
    "text": "I started by streaming accelerometer and device motion data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1210"
  },
  {
    "text": "I detected impactTime by using ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1214"
  },
  {
    "text": "the filtered accelerometer data in the z direction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1216"
  },
  {
    "text": "Then, I identified the start of the swing near that impact timestamp ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1220"
  },
  {
    "text": "by inspecting rotation rate along gravity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1224"
  },
  {
    "text": "I'll take the difference between the two timestamps ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1227"
  },
  {
    "text": "to compute time to contact.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1229"
  },
  {
    "text": "This was a simple example of how you can develop features based on sensor data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1232"
  },
  {
    "text": "The extra signal information in the higher frequency data streams ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1237"
  },
  {
    "text": "opens the door to a lot of other investigations too. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1240"
  },
  {
    "text": "Let's take a look.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1243"
  },
  {
    "text": "We saw this accelerometer data trace earlier ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1245"
  },
  {
    "text": "with the 800 Hz accelerometer stream in the z direction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1248"
  },
  {
    "text": "Now, take a look at the second plot. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1252"
  },
  {
    "text": "It looks pretty similar, but it's not quite the same. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1255"
  },
  {
    "text": "This is a trace from a missed swing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1258"
  },
  {
    "text": "where the bat did not actually make contact with the ball. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1261"
  },
  {
    "text": "Even though the swing motion itself is similar for both, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1264"
  },
  {
    "text": "you can see how the high rate data streams ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1267"
  },
  {
    "text": "give us extra insight into differences like this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1270"
  },
  {
    "text": "The algorithms you develop can capitalize on these differences ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1273"
  },
  {
    "text": "to detect things that weren't possible before.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1276"
  },
  {
    "text": "To summarize, the same device motion algorithms ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1279"
  },
  {
    "text": "provide data to you in a couple different ways.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1282"
  },
  {
    "text": "CMMotionManager vends data at a maximum of 100 Hz on a per-sample basis. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1285"
  },
  {
    "text": "This makes it a great choice if you have low latency requirements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1292"
  },
  {
    "text": "on a sub-second scale, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1296"
  },
  {
    "text": "or have motion-based features outside of workouts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1298"
  },
  {
    "text": "The new CMBatchedSensorManager delivers data at higher rates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1302"
  },
  {
    "text": "with caps of 200 Hz device motion and 800 Hz accelerometer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1306"
  },
  {
    "text": "on a batched schedule, delivering a batch of data per second. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1310"
  },
  {
    "text": "This makes it useful for workout-centric features ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1315"
  },
  {
    "text": "that can benefit from high-rate data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1317"
  },
  {
    "text": "It's available on Apple Watch Series 8 and Ultra. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1320"
  },
  {
    "text": "Even though I focused on a baseball swing to use CMBatchedSensorManager, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1323"
  },
  {
    "text": "these higher rate data streams can provide valuable insight ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1328"
  },
  {
    "text": "into the motion of Apple Watch for all workouts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1331"
  },
  {
    "text": "particularly during short duration or impact-based activities.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1334"
  },
  {
    "text": "That was CMBatchedSensorManager, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1339"
  },
  {
    "text": "and this concludes my review of what's new with CoreMotion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1341"
  },
  {
    "text": "We have great ways to interact with motion, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1345"
  },
  {
    "text": "whether it's on headphones or Apple Watch.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1347"
  },
  {
    "text": "There are a ton of cool ways to use motion data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1350"
  },
  {
    "text": "and I've covered just a few examples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1353"
  },
  {
    "text": "I encourage you to try them out, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1355"
  },
  {
    "text": "and check out the documentation for more information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1357"
  },
  {
    "text": "Make sure to give us feedback too. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1360"
  },
  {
    "text": "For an example of how motion data is translated into health-based features, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1362"
  },
  {
    "text": "like measuring mobility, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1366"
  },
  {
    "text": "check out the \"Beyond Counting Steps\" session from WWDC 2020. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1368"
  },
  {
    "text": "For more information on running workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1373"
  },
  {
    "text": "to take advantage of CMBatchedSensorManager, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1375"
  },
  {
    "text": "take a look at \"Building custom workouts with WorkoutKit.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1378"
  },
  {
    "text": "We're so excited to see how you use motion data to create amazing new experiences. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1382"
  },
  {
    "text": "Thank you for watching.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10179/?time=1387"
  }
]