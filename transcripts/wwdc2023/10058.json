[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=0"
  },
  {
    "text": "James: Hello. I'm James Magahern from UIKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=10"
  },
  {
    "text": "and I'll be your guide through what's new with text and text interactions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=13"
  },
  {
    "text": "Text plays a crucial role in every application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=17"
  },
  {
    "text": "It's the primary way to consume information and communicate.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=20"
  },
  {
    "text": "Now we're giving you even more tools ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=24"
  },
  {
    "text": "to create a powerful text experience in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=27"
  },
  {
    "text": "whether you're starting from scratch or from high-level abstractions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=29"
  },
  {
    "text": "I'll be going over a bunch of great improvements to crafting text experiences ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=33"
  },
  {
    "text": "and how to take advantage of them in your apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=38"
  },
  {
    "text": "including some changes to system selection UI, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=40"
  },
  {
    "text": "adding text item actions and menus to UITextViews, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=43"
  },
  {
    "text": "lists and bullets in TextKit 2, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=47"
  },
  {
    "text": "dictation UI on macOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=50"
  },
  {
    "text": "and some important updates for internationalization. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=52"
  },
  {
    "text": "We'll begin by talking about some changes to selection UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=56"
  },
  {
    "text": "New on all our platforms is a completely redesigned text cursor.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=59"
  },
  {
    "text": "We now display an inline, interactive switcher ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=64"
  },
  {
    "text": "when changing input languages, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=67"
  },
  {
    "text": "more ergonomic selection handles when doing range selection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=70"
  },
  {
    "text": "and we also have a completely new loupe ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=73"
  },
  {
    "text": "to make it easier to place the cursor in large bodies of text. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=76"
  },
  {
    "text": "If your app is using UITextViews or UITextFields, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=79"
  },
  {
    "text": "then you'll get all this new UI automatically. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=84"
  },
  {
    "text": "Additionally, we made sure that clients of UITextInteraction ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=87"
  },
  {
    "text": "also get the new selection UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=90"
  },
  {
    "text": "However, if you have a highly customized UI for displaying text, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=93"
  },
  {
    "text": "it can be challenging to keep up with these changes in your own implementation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=97"
  },
  {
    "text": "especially if you aren't able to adopt UITextInteraction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=101"
  },
  {
    "text": "That's why in iOS 17, we've added UITextSelectionDisplayInteraction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=106"
  },
  {
    "text": "which just provides the selection UI ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=111"
  },
  {
    "text": "without the gestures included with UITextInteraction.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=113"
  },
  {
    "text": "UITextSelectionDisplayInteraction is a new type of UIInteraction ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=117"
  },
  {
    "text": "that can be installed on any UIView. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=121"
  },
  {
    "text": "You must also provide an object that implements the UITextInput protocol, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=124"
  },
  {
    "text": "which defines various methods for the interaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=129"
  },
  {
    "text": "to obtain selection state from your view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=132"
  },
  {
    "text": "UITextSelectionDisplayInteraction will then do all the heavy lifting for you, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=136"
  },
  {
    "text": "providing the cursor view and cursor accessories, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=141"
  },
  {
    "text": "as well as the range highlight and selection handles. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=144"
  },
  {
    "text": "All of these views are replaceable too, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=148"
  },
  {
    "text": "so you can customize the behavior if you need to. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=150"
  },
  {
    "text": "Here's a quick look at an example of how to do this in code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=153"
  },
  {
    "text": "First, create a selection display interaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=156"
  },
  {
    "text": "and provide it with your document object that implements the UITextInput protocol. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=160"
  },
  {
    "text": "This can be the same as your view, if applicable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=166"
  },
  {
    "text": "Next, simply add the interaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=170"
  },
  {
    "text": "to the view you want to display the selection UI inside of. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=172"
  },
  {
    "text": "This can be a container view or the view that renders your document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=176"
  },
  {
    "text": "Whenever the selection state changes, just make sure ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=181"
  },
  {
    "text": "to call setNeedsSelectionUpdate on the interaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=185"
  },
  {
    "text": "and the interaction will take care of updating all the views ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=187"
  },
  {
    "text": "to reflect your new selection state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=190"
  },
  {
    "text": "In addition to UITextSelectionDisplayInteraction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=193"
  },
  {
    "text": "we've also added a new API for displaying a loupe. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=196"
  },
  {
    "text": "It can be used on any view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=199"
  },
  {
    "text": "and UITextSelectionDisplayInteraction or UITextInput isn't required to use it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=201"
  },
  {
    "text": "It's recommended to use a gesture recognizer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=207"
  },
  {
    "text": "such as UIPanGestureRecognizer, to drive the loupe's updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=209"
  },
  {
    "text": "Here's how to manage a loupe session in code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=215"
  },
  {
    "text": "When using a pan gesture recognizer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=218"
  },
  {
    "text": "in the callback, grab the gesture's location and selection widget, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=220"
  },
  {
    "text": "in this case, the cursor view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=224"
  },
  {
    "text": "Next, if the gesture is beginning, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=227"
  },
  {
    "text": "create a new UITextLoupeSession by calling begin(at:), ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=230"
  },
  {
    "text": "providing the loupe's starting location, selection widget, and coordinate space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=234"
  },
  {
    "text": "Then when the gesture moves around, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=240"
  },
  {
    "text": "call move(to:) on the existing loupe session to update its location. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=242"
  },
  {
    "text": "Lastly, when the gesture recognizer ends, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=248"
  },
  {
    "text": "make sure to call invalidate on the loupe session to dismiss it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=251"
  },
  {
    "text": "Next I'd like to go over text item actions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=255"
  },
  {
    "text": "and how you can use them to display menus inside of text views. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=258"
  },
  {
    "text": "Text item interactions in UITextView are now much more customizable ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=262"
  },
  {
    "text": "using new APIs on UITextViewDelegate.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=267"
  },
  {
    "text": "These new additions make it possible to modify the primary action for text items ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=271"
  },
  {
    "text": "or present a menu like the candidate menu shown here in the Translate app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=275"
  },
  {
    "text": "Previously, UITextView allows developers to disable item interactions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=281"
  },
  {
    "text": "through the shouldInteractWith APIs on UITextViewDelegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=286"
  },
  {
    "text": "for links and attachments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=290"
  },
  {
    "text": "In iOS 17, you now have the ability to customize item interactions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=293"
  },
  {
    "text": "for text items in text views. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=297"
  },
  {
    "text": "UITextViewDelegate has gained new methods to customize both the primary action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=300"
  },
  {
    "text": "or provide a menu for specific text items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=305"
  },
  {
    "text": "Here's a quick review of what text items actually are ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=309"
  },
  {
    "text": "and how they integrate with your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=313"
  },
  {
    "text": "Text items represent the content that support item interactions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=316"
  },
  {
    "text": "This includes text attachments, represented by NSTextAttachment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=321"
  },
  {
    "text": "and links, represented by NSLinkAttributeName. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=327"
  },
  {
    "text": "UITextItem now also supports tagging custom ranges of text for interaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=332"
  },
  {
    "text": "To tag a range for interaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=338"
  },
  {
    "text": "use the UITextItemTagAttributeName on the attributed string ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=340"
  },
  {
    "text": "representing the range of text you wish to make interactive. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=344"
  },
  {
    "text": "With these new APIs, it is now possible to change ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=347"
  },
  {
    "text": "the default tap or menu behavior when a text item is interacted with. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=350"
  },
  {
    "text": "For instance, you might want to redirect known links ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=356"
  },
  {
    "text": "to existing views within the app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=359"
  },
  {
    "text": "or add custom menus to parts of the text. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=362"
  },
  {
    "text": "To continue to suppress or disable the primary action or menu, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=367"
  },
  {
    "text": "simply return nil for the menuConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=371"
  },
  {
    "text": "or primaryAction delegate methods.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=374"
  },
  {
    "text": "Here's a small code example demonstrating how to show a menu ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=378"
  },
  {
    "text": "in response to the user tapping on a link inside of your UITextView. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=381"
  },
  {
    "text": "Just implement the menuConfigurationFor:defaultMenu: method ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=387"
  },
  {
    "text": "from UITextViewDelegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=391"
  },
  {
    "text": "and return a menu configuration containing the menu you wish to display. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=393"
  },
  {
    "text": "You may also provide a preview as part of the menu configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=398"
  },
  {
    "text": "to show inline with the rest of the context menu.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=402"
  },
  {
    "text": "List and bullet support have also been added to TextKit 2. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=406"
  },
  {
    "text": "I'll go over how you can take advantage of this in your application. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=410"
  },
  {
    "text": "In addition to supporting multiple different kinds of bulleted items, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=413"
  },
  {
    "text": "roman numeral, alphabetical, and decimal ordering is also supported. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=417"
  },
  {
    "text": "Each one will automatically be localized ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=422"
  },
  {
    "text": "based on the device or app's configured locale, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=424"
  },
  {
    "text": "so worldwide internationalization is built right in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=427"
  },
  {
    "text": "Here's a quick example of how you can get started with text lists ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=432"
  },
  {
    "text": "using attributed strings. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=435"
  },
  {
    "text": "Use the textLists property on NSParagraphStyle ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=437"
  },
  {
    "text": "to define which paragraph has an ordered list applied to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=440"
  },
  {
    "text": "The system will automatically number the items ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=445"
  },
  {
    "text": "based on line terminating characters like newlines, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=447"
  },
  {
    "text": "and UITextView will automatically propagate the paragraph style ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=450"
  },
  {
    "text": "based on typing attributes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=454"
  },
  {
    "text": "There are some big changes in the way dictation works on macOS Sonoma. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=456"
  },
  {
    "text": "We have some new APIs to help you make sure ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=461"
  },
  {
    "text": "your custom text elements work well with the new design. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=463"
  },
  {
    "text": "This is how the new dictation indicator behaves on macOS 14. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=466"
  },
  {
    "text": "Like on iOS, dictation has a trailing glow effect while speaking, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=472"
  },
  {
    "text": "and a microphone indicator appears when at rest.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=476"
  },
  {
    "text": "Notice that after scrolling, the indicator next to the cursor will stick ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=481"
  },
  {
    "text": "to the edge of the scroll view, and offer a button ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=485"
  },
  {
    "text": "to return to the current position in the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=488"
  },
  {
    "text": "If you're using a standard text control in AppKit like NSTextView, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=492"
  },
  {
    "text": "you'll get this behavior right out of the box. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=496"
  },
  {
    "text": "If your app offers a customized implementation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=499"
  },
  {
    "text": "for showing the insertion point, there's a little bit of work ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=502"
  },
  {
    "text": "you'll need to do to support this new behavior.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=505"
  },
  {
    "text": "Similar to UITextSelectionDisplayInteraction for iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=508"
  },
  {
    "text": "there's now a new API for macOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=512"
  },
  {
    "text": "that also allows you to remain consistent with the system's selection UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=514"
  },
  {
    "text": "Instead of drawing your own cursor, adopt NSTextInsertionIndicator, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=518"
  },
  {
    "text": "which is a customizable NSView subclass that you can place ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=523"
  },
  {
    "text": "inside of your document's view to indicate the cursor position. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=527"
  },
  {
    "text": "Its appearance is customizable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=531"
  },
  {
    "text": "You can change the color and size. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=533"
  },
  {
    "text": "By default, it will follow the current accent color. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=536"
  },
  {
    "text": "It makes supporting the dictation effects really easy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=540"
  },
  {
    "text": "There's just a little bit of configuration required ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=543"
  },
  {
    "text": "to allow the system to insert the appropriate views into your hierarchy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=545"
  },
  {
    "text": "Here's how to get started using NSTextInsertionIndicator on macOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=549"
  },
  {
    "text": "Simply create an NSTextInsertionIndicator view and add it as a subview ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=555"
  },
  {
    "text": "to whatever view is displaying the contents of your document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=559"
  },
  {
    "text": "Once you've done that, set effectsViewInserter to a block ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=564"
  },
  {
    "text": "that inserts views provided by your system into your document's view hierarchy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=567"
  },
  {
    "text": "The system will automatically take care of positioning the effect views ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=572"
  },
  {
    "text": "and making sure they get updated as the insertion indicator moves around. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=576"
  },
  {
    "text": "When your custom text view resigns responder status, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=581"
  },
  {
    "text": "make sure to hide the cursor by setting displayMode to hidden.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=584"
  },
  {
    "text": "As text is inserted, updates to the frame will automatically be animated ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=590"
  },
  {
    "text": "with a glow effect if dictation is used as the input source. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=594"
  },
  {
    "text": "If you need to disable the glow effect, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=599"
  },
  {
    "text": "remove the showEffectsView option from automaticModeOptions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=601"
  },
  {
    "text": "When the user changes input modes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=607"
  },
  {
    "text": "an effect view is displayed beneath the cursor in horizontal text ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=609"
  },
  {
    "text": "to show the language selection UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=613"
  },
  {
    "text": "If you need to override the placement of this UI, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=617"
  },
  {
    "text": "you can specify preferredTextAccessoryPlacement ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=619"
  },
  {
    "text": "in your implementation of NSTextInputClient. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=622"
  },
  {
    "text": "The system checks the value of this property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=626"
  },
  {
    "text": "to determine where to draw the accessories. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=628"
  },
  {
    "text": "When the text cursor is scrolled offscreen during dictation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=631"
  },
  {
    "text": "the system will also display a scroll-away indicator ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=635"
  },
  {
    "text": "to indicate the relative position of the cursor ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=638"
  },
  {
    "text": "and offer an affordance to get back to the dictation point.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=640"
  },
  {
    "text": "To make sure this behavior is supported in your custom text view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=646"
  },
  {
    "text": "make sure to adopt NSTextInputClient ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=649"
  },
  {
    "text": "and implement the selectionRect and documentVisibleRect properties. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=652"
  },
  {
    "text": "Notify the system about scrolling beginning and ending ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=658"
  },
  {
    "text": "by calling textInputClientWillStartScrollingOrZooming ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=661"
  },
  {
    "text": "and willEndScrollingOrZooming. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=664"
  },
  {
    "text": "Making sure your app works well in every language is crucial ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=668"
  },
  {
    "text": "to providing an outstanding text experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=671"
  },
  {
    "text": "We've made some important changes to standard text controls, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=675"
  },
  {
    "text": "enhancing their readability and ergonomics across a broader range of languages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=677"
  },
  {
    "text": "Supporting dynamic type in your apps goes a long way ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=682"
  },
  {
    "text": "towards improving the layout of your UI in every language. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=686"
  },
  {
    "text": "Something important to consider when laying out text elements in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=690"
  },
  {
    "text": "is the fact that many languages can have variable line heights ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=693"
  },
  {
    "text": "in addition to layout direction and font styles. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=697"
  },
  {
    "text": "A common issue encountered when dealing with variable line heights ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=702"
  },
  {
    "text": "between languages is the problem of clipped text. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=705"
  },
  {
    "text": "Not only does this look bad, but it can also drastically impact readability ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=709"
  },
  {
    "text": "and significantly hinder the overall user experience of your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=714"
  },
  {
    "text": "These issues may be difficult to notice, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=719"
  },
  {
    "text": "especially if you aren't able to test your app in every language. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=721"
  },
  {
    "text": "We've made some improvements to standard text elements, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=724"
  },
  {
    "text": "like UITextField and UILabel, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=727"
  },
  {
    "text": "to address this problem automatically in most cases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=729"
  },
  {
    "text": "However, there are some best practices that you should still make sure to follow ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=733"
  },
  {
    "text": "to ensure the system can prevent clipping of these elements. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=737"
  },
  {
    "text": "To prevent these common clipping issues, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=741"
  },
  {
    "text": "all our platforms will now automatically adjust the line height ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=743"
  },
  {
    "text": "in UILabel or UITextField ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=747"
  },
  {
    "text": "to accommodate languages with highly dynamic line heights. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=749"
  },
  {
    "text": "This new behavior takes place only in specific cases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=753"
  },
  {
    "text": "First, keep in mind that line heights are now dependent ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=757"
  },
  {
    "text": "on the device's configured preferred languages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=760"
  },
  {
    "text": "Second, this adjustment affects the entire user interface, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=763"
  },
  {
    "text": "increasing line heights for all text elements, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=767"
  },
  {
    "text": "even those that display scripts with fixed line heights, like English, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=770"
  },
  {
    "text": "which wouldn't normally require the extra space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=774"
  },
  {
    "text": "This is intentional to ensure visual consistency ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=777"
  },
  {
    "text": "across all text elements. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=780"
  },
  {
    "text": "Lastly, this automatic adjustment only applies ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=782"
  },
  {
    "text": "to text elements that use text styles. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=785"
  },
  {
    "text": "Custom fonts will continue to use their fixed line heights. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=788"
  },
  {
    "text": "This behavior isn't entirely new, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=792"
  },
  {
    "text": "as it has been in effect for several releases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=794"
  },
  {
    "text": "However, in iOS 17 it's much more dynamic, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=797"
  },
  {
    "text": "and the exact adjustment depends on both the text style and language used.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=800"
  },
  {
    "text": "To take advantage of this behavior, adopt Text Styles ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=806"
  },
  {
    "text": "by creating a UIFont explicitly with the preferredFont(forTextStyle:) method ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=809"
  },
  {
    "text": "and assign it to a text element, like UILabel. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=813"
  },
  {
    "text": "Next, avoid setting clipsToBounds on text elements. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=817"
  },
  {
    "text": "Ascenders and descenders for languages like Thai and Hindi will often protrude ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=821"
  },
  {
    "text": "beyond the line height bounds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=825"
  },
  {
    "text": "This is generally acceptable in most layouts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=828"
  },
  {
    "text": "since there's usually extra space around neighboring elements, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=830"
  },
  {
    "text": "but it does mean that setting clipsToBounds will result ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=833"
  },
  {
    "text": "in those text elements being clipped. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=836"
  },
  {
    "text": "UIKit has also been updated to prevent unnecessary use of this setting ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=839"
  },
  {
    "text": "where it was previously enabled by default. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=843"
  },
  {
    "text": "Lastly, ensure that your UIs are responsive to changes in height ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=846"
  },
  {
    "text": "and that all other controls remain aligned, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=851"
  },
  {
    "text": "as text elements can now grow vertically. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=853"
  },
  {
    "text": "We also made substantial enhancements to line-breaking behavior ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=856"
  },
  {
    "text": "for languages such as Chinese, German, Japanese, and Korean. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=860"
  },
  {
    "text": "These improvements apply different rules ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=864"
  },
  {
    "text": "based on what kind of text style you're using in your UI ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=866"
  },
  {
    "text": "and which language is being displayed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=869"
  },
  {
    "text": "For instance, previously, a word within Korean text ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=872"
  },
  {
    "text": "might have been split between lines. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=876"
  },
  {
    "text": "Now UIKit prevents such splitting for title text styles, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=879"
  },
  {
    "text": "ensuring a more seamless reading experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=883"
  },
  {
    "text": "To benefit from this new behavior in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=887"
  },
  {
    "text": "similarly adopt Text Styles. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=890"
  },
  {
    "text": "So that's everything you need to know ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=893"
  },
  {
    "text": "to create a powerful text experience in your app on iOS 17.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=895"
  },
  {
    "text": "If you're using a custom text view in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=900"
  },
  {
    "text": "make sure to use the system selection UI ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=903"
  },
  {
    "text": "to take advantage of all the new features in the OS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=905"
  },
  {
    "text": "Use text items to create better interactions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=909"
  },
  {
    "text": "with links in your text views. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=912"
  },
  {
    "text": "Leverage the powerful new features of TextKit 2 ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=915"
  },
  {
    "text": "to provide a more rich text editing experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=918"
  },
  {
    "text": "And adopt Text Styles in common text elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=921"
  },
  {
    "text": "to ensure a great user experience for everyone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=925"
  },
  {
    "text": "regardless of what language or preferred text size. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=927"
  },
  {
    "text": "That's all for now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=931"
  },
  {
    "text": "Thanks for watching. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=932"
  },
  {
    "text": "Be sure to rate five stars and leave a comment down below. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=934"
  },
  {
    "text": "♪ ♪",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10058/?time=937"
  }
]