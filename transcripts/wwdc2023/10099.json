[
  {
    "text": "♪ Mellow instrumental hip-hop ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=0"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=3"
  },
  {
    "text": "Sarina Wu: Hello! My name is Sarina, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=10"
  },
  {
    "text": "and I'm a Software Engineer on the RealityKit Tools team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=11"
  },
  {
    "text": "Harjas Monga: And I am Harjas, a Profiling Tools Engineer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=14"
  },
  {
    "text": "Sarina: Today, Harjas and I will be introducing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=17"
  },
  {
    "text": "the RealityKit Trace template in Instruments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=19"
  },
  {
    "text": "We'll show you how this template can help you optimize ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=22"
  },
  {
    "text": "the performance of your spatial experiences. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=23"
  },
  {
    "text": "Performance is essential to the user experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=26"
  },
  {
    "text": "in spatial computing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=28"
  },
  {
    "text": "To learn how to optimize spatial experiences, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=30"
  },
  {
    "text": "we will briefly cover how rendering works ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=32"
  },
  {
    "text": "on this platform, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=33"
  },
  {
    "text": "show you how to profile using the RealityKit Trace template ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=35"
  },
  {
    "text": "in Instruments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=38"
  },
  {
    "text": "and briefly cover the other great tools ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=39"
  },
  {
    "text": "available to optimize your content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=41"
  },
  {
    "text": "This platform has unique performance constraints. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=43"
  },
  {
    "text": "To understand them, you first need to understand ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=46"
  },
  {
    "text": "how rendering works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=47"
  },
  {
    "text": "Rendering includes your app process, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=49"
  },
  {
    "text": "the render server, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=52"
  },
  {
    "text": "and the compositor. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=54"
  },
  {
    "text": "How your app interacts with these components ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=56"
  },
  {
    "text": "will depend on the types of experiences you create. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=58"
  },
  {
    "text": "Let's take a look at the types of experiences you can create ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=61"
  },
  {
    "text": "for your spatial apps and how they are rendered. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=63"
  },
  {
    "text": "Apps on the platform can enter either the Shared Space ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=67"
  },
  {
    "text": "or a Full Space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=70"
  },
  {
    "text": "These have different performance implications ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=71"
  },
  {
    "text": "to consider based on how they render. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=73"
  },
  {
    "text": "When multiple apps run side by side, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=76"
  },
  {
    "text": "they are all rendered in the same space, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=78"
  },
  {
    "text": "which is one of the reasons we call it the Shared Space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=80"
  },
  {
    "text": "This means that the performance of your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=83"
  },
  {
    "text": "can be affected by the work that the render server is doing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=85"
  },
  {
    "text": "to render the other apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=88"
  },
  {
    "text": "Then the render server works with the compositor ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=90"
  },
  {
    "text": "to generate the final frames. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=92"
  },
  {
    "text": "When your app enters a Full Space, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=96"
  },
  {
    "text": "all other visible apps are hidden. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=97"
  },
  {
    "text": "This means that the performance of your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=100"
  },
  {
    "text": "is no longer affected by the rendering work ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=102"
  },
  {
    "text": "for the apps that are now hidden. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=104"
  },
  {
    "text": "To learn more about how to enter a Full Space, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=106"
  },
  {
    "text": "check out the session \"Go beyond the window with SwiftUI.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=108"
  },
  {
    "text": "Based on what was just covered, we have two recommended ways ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=112"
  },
  {
    "text": "to profile your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=115"
  },
  {
    "text": "Whenever you are investigating performance issues ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=117"
  },
  {
    "text": "or analyzing system power impact, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=119"
  },
  {
    "text": "you should profile your app in isolation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=121"
  },
  {
    "text": "to understand your app's impact on system performance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=123"
  },
  {
    "text": "When you expect your app to work alongside other apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=126"
  },
  {
    "text": "you should profile your app with those other apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=129"
  },
  {
    "text": "This is important to understand ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=132"
  },
  {
    "text": "how the user would experience your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=133"
  },
  {
    "text": "Let's profile a spatial app to show you ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=136"
  },
  {
    "text": "how you can optimize your app's performance in isolation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=138"
  },
  {
    "text": "using the RealityKit Trace template. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=141"
  },
  {
    "text": "We've been working on Hello World, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=143"
  },
  {
    "text": "and we want to make sure that there are no performance issues. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=145"
  },
  {
    "text": "Sarina: This is the Start screen of the app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=148"
  },
  {
    "text": "which is a SwiftUI View. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=150"
  },
  {
    "text": "This view has an Objects in Orbit button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=152"
  },
  {
    "text": "We can tap on that button to learn more ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=154"
  },
  {
    "text": "about objects orbiting Earth. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=156"
  },
  {
    "text": "The button opens a new view that lists examples ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=158"
  },
  {
    "text": "of different objects that are orbiting Earth. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=160"
  },
  {
    "text": "This view has 3D models of these objects, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=163"
  },
  {
    "text": "including a satellite, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=165"
  },
  {
    "text": "the Moon, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=168"
  },
  {
    "text": "and a telescope. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=170"
  },
  {
    "text": "In this view, there is also a View Orbits button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=174"
  },
  {
    "text": "We can explore this by tapping the button, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=177"
  },
  {
    "text": "which will open an immersive experience showing Earth ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=179"
  },
  {
    "text": "and a satellite orbiting around it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=181"
  },
  {
    "text": "We've used detailed assets for these models, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=185"
  },
  {
    "text": "and I suspect that they're affecting the performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=187"
  },
  {
    "text": "of this app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=189"
  },
  {
    "text": "In the immersive experience, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=191"
  },
  {
    "text": "we can see the path of the satellite animate ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=192"
  },
  {
    "text": "as it orbits Earth. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=194"
  },
  {
    "text": "We can even scale the Earth up to see it in more detail. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=197"
  },
  {
    "text": "This interaction is incredibly choppy, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=200"
  },
  {
    "text": "so I think there's a performance issue here. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=202"
  },
  {
    "text": "Harjas and I profiled that experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=205"
  },
  {
    "text": "using the RealityKit Trace template. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=206"
  },
  {
    "text": "Harjas, could you walk us through it? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=209"
  },
  {
    "text": "Harjas: Of course, let's walk through ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=210"
  },
  {
    "text": "all the features available in RealityKit Trace. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=212"
  },
  {
    "text": "RealityKit Trace is available as a new template ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=215"
  },
  {
    "text": "in Instruments 15. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=218"
  },
  {
    "text": "It can be used to profile both a real device and a simulator. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=220"
  },
  {
    "text": "To get the most accurate and actionable information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=224"
  },
  {
    "text": "you should profile a real device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=226"
  },
  {
    "text": "When profiling against the simulator ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=229"
  },
  {
    "text": "not all the timing information will be accurate ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=231"
  },
  {
    "text": "because of the hardware and software differences ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=234"
  },
  {
    "text": "between your Mac and on-device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=236"
  },
  {
    "text": "But you could still use it for quick iteration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=238"
  },
  {
    "text": "and improving some of the statistics ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=240"
  },
  {
    "text": "that are not based on time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=242"
  },
  {
    "text": "The RealityKit Trace template contains several instruments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=244"
  },
  {
    "text": "The first instrument you will want to look at ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=248"
  },
  {
    "text": "is the RealityKit Frames instrument. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=250"
  },
  {
    "text": "This instrument tracks each frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=253"
  },
  {
    "text": "being rendered by the device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=254"
  },
  {
    "text": "You can zoom in on these frames to check ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=258"
  },
  {
    "text": "how long each frame took to render. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=260"
  },
  {
    "text": "With this, you can check how long each stage ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=263"
  },
  {
    "text": "of the frame took to render. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=265"
  },
  {
    "text": "This gives you a high-level idea of what portion ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=267"
  },
  {
    "text": "of the render pipeline could be causing performance problems. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=269"
  },
  {
    "text": "In order to achieve a smooth user experience, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=273"
  },
  {
    "text": "your application should be able to achieve 90 frames per second. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=275"
  },
  {
    "text": "However, the OS may not always be targeting 90 fps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=280"
  },
  {
    "text": "It will render at the frame rate most appropriate for the content ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=283"
  },
  {
    "text": "being displayed and the environment the device is in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=286"
  },
  {
    "text": "Because the frame rate can change, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=289"
  },
  {
    "text": "every frame has a deadline in which it has ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=291"
  },
  {
    "text": "to complete rendering so that the device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=293"
  },
  {
    "text": "can hit whatever the current target frame rate is. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=295"
  },
  {
    "text": "The frames are classified into three groups: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=299"
  },
  {
    "text": "frames that are completing well within their deadline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=302"
  },
  {
    "text": "frames that are just barely finishing within their deadline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=305"
  },
  {
    "text": "and frames than run past their deadline ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=308"
  },
  {
    "text": "and result in frame drops. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=310"
  },
  {
    "text": "These classifications are color coded ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=312"
  },
  {
    "text": "green, orange, and red, respectively. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=315"
  },
  {
    "text": "Frames that are running past the deadline ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=317"
  },
  {
    "text": "will negatively impact the user experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=319"
  },
  {
    "text": "If you zoom out and check the frames from a high level, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=323"
  },
  {
    "text": "the color coding allows you to quickly find ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=326"
  },
  {
    "text": "the problematic parts of the trace. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=328"
  },
  {
    "text": "So, you can narrow down any performance investigations ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=330"
  },
  {
    "text": "to the areas where there are the most frame drops. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=334"
  },
  {
    "text": "In addition to the individual frames, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=337"
  },
  {
    "text": "the instrument also visualizes the average amount of time ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=340"
  },
  {
    "text": "the system spent on CPU or GPU work to render each frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=343"
  },
  {
    "text": "The next instrument you will want to check ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=349"
  },
  {
    "text": "is the RealityKit Metrics instrument. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=351"
  },
  {
    "text": "At a top level, the instrument draws ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=353"
  },
  {
    "text": "all the bottlenecks that it detected. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=355"
  },
  {
    "text": "These bottlenecks are generated by looking at ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=357"
  },
  {
    "text": "comprehensive timing information from the entire render pipeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=359"
  },
  {
    "text": "Prioritize the bottlenecks that occur during the same time ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=363"
  },
  {
    "text": "that frames exceed their deadline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=366"
  },
  {
    "text": "In the detail view below, you will find ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=370"
  },
  {
    "text": "that these RealityKit bottlenecks ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=372"
  },
  {
    "text": "are summarized by severity and type. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=374"
  },
  {
    "text": "You can dig in further to see exactly what kind of bottleneck ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=378"
  },
  {
    "text": "the instrument found and how much it affected ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=381"
  },
  {
    "text": "your overall performance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=383"
  },
  {
    "text": "In the extended detail view, the instrument provides ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=386"
  },
  {
    "text": "recommendations on how to diagnose ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=389"
  },
  {
    "text": "these bottlenecks further and what steps you can take ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=391"
  },
  {
    "text": "to mitigate them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=393"
  },
  {
    "text": "By expanding the RealityKit Metrics track, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=396"
  },
  {
    "text": "you will be presented with several types of metrics ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=398"
  },
  {
    "text": "from different components of the render pipeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=401"
  },
  {
    "text": "These statistics can help you understand ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=404"
  },
  {
    "text": "the full complexity of the scene your app is presenting. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=407"
  },
  {
    "text": "Some of the key metrics will have associated thresholds ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=409"
  },
  {
    "text": "to help inform you on reasonable expectations for those metrics. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=412"
  },
  {
    "text": "Use the metrics to help guide you further ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=417"
  },
  {
    "text": "in diagnosing a bottleneck or why a frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=419"
  },
  {
    "text": "is not hitting its deadline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=421"
  },
  {
    "text": "RealityKit Metrics will visualize ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=425"
  },
  {
    "text": "how much time is being spent in each frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=427"
  },
  {
    "text": "to run the application's RealityKit systems. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=429"
  },
  {
    "text": "This includes all the built-in systems ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=432"
  },
  {
    "text": "and all the custom systems your application may implement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=434"
  },
  {
    "text": "This information is best combined with Time Profiler ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=438"
  },
  {
    "text": "so you can optimize your RealityKit system code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=441"
  },
  {
    "text": "Lastly, review the System Power Impact lane ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=446"
  },
  {
    "text": "shown in RealityKit Metrics to understand ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=448"
  },
  {
    "text": "the power envelope your application needs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=451"
  },
  {
    "text": "to work within to provide a great ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=453"
  },
  {
    "text": "and consistent user experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=455"
  },
  {
    "text": "Now let's take a look at some traces we took ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=458"
  },
  {
    "text": "while we were stepping through the world experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=460"
  },
  {
    "text": "The first scene in the app was the Start screen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=463"
  },
  {
    "text": "which is implemented in SwiftUI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=465"
  },
  {
    "text": "In the frames instrument, there are quite a few ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=468"
  },
  {
    "text": "dropped frames throughout this trace. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=471"
  },
  {
    "text": "These dropped frames may not seem significant, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=473"
  },
  {
    "text": "but they can really damage the user experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=475"
  },
  {
    "text": "I can use Option-drag to zoom in ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=478"
  },
  {
    "text": "on one of the more problematic areas. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=480"
  },
  {
    "text": "And by adjusting the time range, I can check what bottlenecks ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=484"
  },
  {
    "text": "the RealityKit Metrics instrument found ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=489"
  },
  {
    "text": "during these long-running frames. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=491"
  },
  {
    "text": "The Instrument found that the largest bottleneck ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=495"
  },
  {
    "text": "in this time was Core Animation Encoding. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=498"
  },
  {
    "text": "So I'm going to check the Core Animation statistics, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=501"
  },
  {
    "text": "which can be found by clicking on the disclosure triangle ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=504"
  },
  {
    "text": "next to RealityKit Metrics Instrument ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=507"
  },
  {
    "text": "and selecting the track labeled Core Animation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=511"
  },
  {
    "text": "These Core Animation metrics can help inform us ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=515"
  },
  {
    "text": "on what might have caused these frame drops. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=517"
  },
  {
    "text": "When investigating these metrics, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=520"
  },
  {
    "text": "you will notice that some of them ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=522"
  },
  {
    "text": "have context of how severe the metric is. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=523"
  },
  {
    "text": "In the timeline, this is reflected in the color coding. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=527"
  },
  {
    "text": "This is to guide you on what are reasonable thresholds ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=530"
  },
  {
    "text": "for these key metrics. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=533"
  },
  {
    "text": "Based on the timeline visualization, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=535"
  },
  {
    "text": "it is clear that the application ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=537"
  },
  {
    "text": "is exceeding the recommended threshold ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=538"
  },
  {
    "text": "for the number of offscreen prepares. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=541"
  },
  {
    "text": "The summary at the bottom shows that the average number ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=543"
  },
  {
    "text": "of offscreen prepares here are 180, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=546"
  },
  {
    "text": "which is quite a high average. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=550"
  },
  {
    "text": "When considering the Core Animation statistics, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=553"
  },
  {
    "text": "there are three types of work you want to keep in mind. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=555"
  },
  {
    "text": "Firstly, transparency and blur effects ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=558"
  },
  {
    "text": "are very expensive operations for the system. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=560"
  },
  {
    "text": "Use these effects when they deliver ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=563"
  },
  {
    "text": "most impact to the user, otherwise use them sparingly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=565"
  },
  {
    "text": "The number of render passes is determined by how many layers ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=569"
  },
  {
    "text": "Core Animation has to render individually ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=573"
  },
  {
    "text": "for the entire image. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=575"
  },
  {
    "text": "And finally, there are offscreen passes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=577"
  },
  {
    "text": "So as the name implies, an offscreen pass ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=580"
  },
  {
    "text": "is a render pass that is rendered offscreen ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=582"
  },
  {
    "text": "and not to the display. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=585"
  },
  {
    "text": "An offscreen pass requires the rendering pass ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=587"
  },
  {
    "text": "to pause what it's currently doing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=589"
  },
  {
    "text": "and do some work that won't be shown to the user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=592"
  },
  {
    "text": "However, the output of the offscreen pass ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=596"
  },
  {
    "text": "is needed to continue the regular rendering pass. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=598"
  },
  {
    "text": "Offscreen passes are particularly impactful ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=602"
  },
  {
    "text": "for spatial apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=604"
  },
  {
    "text": "Unlike other app platforms, this platform continuously ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=606"
  },
  {
    "text": "renders spatial apps because every single frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=610"
  },
  {
    "text": "needs to account for environment factors, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=613"
  },
  {
    "text": "such as the user's head movements. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=616"
  },
  {
    "text": "Therefore, your static UI needs to be efficient enough ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=619"
  },
  {
    "text": "that it can be rendered at the system's target frame rate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=622"
  },
  {
    "text": "There are four main types of work ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=626"
  },
  {
    "text": "that can cause an offscreen pass: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=627"
  },
  {
    "text": "shadows, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=630"
  },
  {
    "text": "masking, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=631"
  },
  {
    "text": "rounded rectangles, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=632"
  },
  {
    "text": "and visual effects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=634"
  },
  {
    "text": "To learn more about offscreen passes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=635"
  },
  {
    "text": "watch our tech talk ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=637"
  },
  {
    "text": "on \"Demystify and eliminate hitches in the render phase.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=638"
  },
  {
    "text": "Since there were a lot of offscreen passes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=643"
  },
  {
    "text": "I am going to check the SwiftUI code for this view ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=645"
  },
  {
    "text": "to find what could have caused them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=647"
  },
  {
    "text": "In the SwiftUI code, this view is not doing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=650"
  },
  {
    "text": "any masking or visual effects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=652"
  },
  {
    "text": "But there are instances of shadows being applied. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=654"
  },
  {
    "text": "For example, in the SwiftUI View item, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=657"
  },
  {
    "text": "shadows are being applied to several buttons. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=659"
  },
  {
    "text": "Shadows are a particularly expensive operation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=662"
  },
  {
    "text": "especially when combined with transparency. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=664"
  },
  {
    "text": "While shadows are a useful UI idiom, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=667"
  },
  {
    "text": "for spatial apps, you should use them ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=669"
  },
  {
    "text": "when they deliver a significant effect to the user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=670"
  },
  {
    "text": "I'm going to disable these shadows ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=673"
  },
  {
    "text": "and take look at a new trace. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=675"
  },
  {
    "text": "With the shadows disabled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=678"
  },
  {
    "text": "in the RealityKit Frames Instrument, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=679"
  },
  {
    "text": "there are few frame issues and RealityKit Metrics reports ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=682"
  },
  {
    "text": "that offscreen passes have reduced by four times. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=685"
  },
  {
    "text": "Now, the next scene that we saw in the World app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=690"
  },
  {
    "text": "was the objects in orbit view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=693"
  },
  {
    "text": "I am going to open up a trace from that scene ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=694"
  },
  {
    "text": "to see if there is anything that can be optimized. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=696"
  },
  {
    "text": "In the Frames Instrument, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=701"
  },
  {
    "text": "there are a scattering of dropped frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=703"
  },
  {
    "text": "throughout the trace with lots of bottlenecks. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=705"
  },
  {
    "text": "The detail view for RealityKit Metrics ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=708"
  },
  {
    "text": "provides a summary of those bottlenecks.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=711"
  },
  {
    "text": "In the summary, most of these bottlenecks ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=715"
  },
  {
    "text": "are related to GPU Work Stalls. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=717"
  },
  {
    "text": "Because the bottleneck type reported most frequently ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=720"
  },
  {
    "text": "are GPU stalls, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=723"
  },
  {
    "text": "I am again going to expand RealityKit Metrics. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=724"
  },
  {
    "text": "But this time, I'll investigate using the 3D Render track.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=728"
  },
  {
    "text": "I'm going to select the area of the trace ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=734"
  },
  {
    "text": "that has a high number of frame drops. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=736"
  },
  {
    "text": "In this time selection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=741"
  },
  {
    "text": "the 3D Render metrics reports that the triangle ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=742"
  },
  {
    "text": "and vertex counts are far exceeding ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=746"
  },
  {
    "text": "the recommended thresholds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=748"
  },
  {
    "text": "Next, I am going to highlight the area of the trace ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=751"
  },
  {
    "text": "where there aren't nearly as many frame drops.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=753"
  },
  {
    "text": "And according to the rendering metrics, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=759"
  },
  {
    "text": "the triangle and vertex counts ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=760"
  },
  {
    "text": "are within the recommended thresholds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=763"
  },
  {
    "text": "This means you should really be evaluating the number ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=766"
  },
  {
    "text": "and quality of the assets the app is using in the scene. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=768"
  },
  {
    "text": "When optimizing asset rendering, first check the triangles, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=772"
  },
  {
    "text": "vertices, and draw calls from the 3D Rendering group ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=776"
  },
  {
    "text": "in RealityKit Metrics. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=779"
  },
  {
    "text": "To optimize these metrics, use simple shape meshes ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=781"
  },
  {
    "text": "when possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=784"
  },
  {
    "text": "Take advantage of instancing when utilizing assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=786"
  },
  {
    "text": "with the same mesh. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=789"
  },
  {
    "text": "Check the complexity of assets using the statistics ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=791"
  },
  {
    "text": "in Reality Composer Pro, which is a new developer tool ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=794"
  },
  {
    "text": "that allows you to assemble, edit, and preview 3D content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=797"
  },
  {
    "text": "That content could later be accessed through code ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=802"
  },
  {
    "text": "directly in your Xcode project. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=804"
  },
  {
    "text": "To learn more about this tool and how to create great assets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=807"
  },
  {
    "text": "check out the session \"Meet Reality Composer Pro.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=810"
  },
  {
    "text": "I went ahead and swapped out the assets I was using ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=814"
  },
  {
    "text": "with those that used fewer polygons ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=817"
  },
  {
    "text": "and captured a new trace. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=819"
  },
  {
    "text": "In this trace, the Frames Instrument reports ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=821"
  },
  {
    "text": "that all the frames are hitting their deadlines. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=823"
  },
  {
    "text": "And if I check the 3D rendering statistics again, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=827"
  },
  {
    "text": "it reports that the triangle and vertex counts ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=832"
  },
  {
    "text": "are reduced substantially. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=835"
  },
  {
    "text": "While these assets did use fewer polygons, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=837"
  },
  {
    "text": "there was no loss in quality of the experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=839"
  },
  {
    "text": "The next trace is for when we were interacting ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=842"
  },
  {
    "text": "with the Earth model. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=844"
  },
  {
    "text": "During this scene, resizing the globe ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=846"
  },
  {
    "text": "was actually quite jittery. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=848"
  },
  {
    "text": "RealityKit Metrics reports that the System Power Impact lane ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=850"
  },
  {
    "text": "was very high for a substantial amount of time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=854"
  },
  {
    "text": "This is indicating that some part of your application ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=858"
  },
  {
    "text": "is being very inefficient and the user experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=861"
  },
  {
    "text": "could be impacted. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=863"
  },
  {
    "text": "You should target for your application to work well ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=865"
  },
  {
    "text": "while keeping the device's system power impact ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=867"
  },
  {
    "text": "in the nominal state for as much time as possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=870"
  },
  {
    "text": "When profiling to reduce system power impact, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=873"
  },
  {
    "text": "always profile with your application in isolation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=875"
  },
  {
    "text": "to ensure you get the most actionable information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=879"
  },
  {
    "text": "You can lower the system power impact using several approaches. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=882"
  },
  {
    "text": "First, make sure that the statistics ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=886"
  },
  {
    "text": "from RealityKit Metrics are within expectations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=888"
  },
  {
    "text": "If these are exceeding expectations, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=891"
  },
  {
    "text": "the device could be operating at higher power states ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=893"
  },
  {
    "text": "for long stretches of time to deliver a smooth experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=896"
  },
  {
    "text": "Next, check what work the CPU and GPU are doing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=900"
  },
  {
    "text": "For the CPU, check if Time Profiler reports high CPU usage ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=904"
  },
  {
    "text": "during your high-power draw regions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=909"
  },
  {
    "text": "And if it does, optimize your CPU-bound code ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=911"
  },
  {
    "text": "using Time Profiler. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=915"
  },
  {
    "text": "For the GPU, we have performance states. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=917"
  },
  {
    "text": "When the GPU is in the maximum stage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=920"
  },
  {
    "text": "it draws a considerable amount of power. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=922"
  },
  {
    "text": "In that case, we should use the Metal System Trace template ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=925"
  },
  {
    "text": "in Instruments to see what work is being done on the GPU. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=928"
  },
  {
    "text": "That way, we can understand what could be optimized. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=933"
  },
  {
    "text": "Going back to the trace, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=937"
  },
  {
    "text": "Time Profiler tells us that the CPU usage ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=940"
  },
  {
    "text": "was averaging 100 percent in this region, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=943"
  },
  {
    "text": "and the GPU performance states ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=946"
  },
  {
    "text": "were minimum during most of this time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=948"
  },
  {
    "text": "Using Time Profiler, I can check what caused the high CPU usage. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=952"
  },
  {
    "text": "The heaviest stack trace is in the extended detail view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=957"
  },
  {
    "text": "This is a very useful feature of the Time Profiler, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=960"
  },
  {
    "text": "as it allows you to quickly find the most expensive parts ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=963"
  },
  {
    "text": "of your code in the call tree. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=966"
  },
  {
    "text": "Looking at these frames, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=968"
  },
  {
    "text": "it appears that Entity.makeModel is using a lot of CPU time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=970"
  },
  {
    "text": "The next frame down is calling Entity.generateCollisionShapes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=975"
  },
  {
    "text": "Therefore, the performance issue appears to being caused ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=980"
  },
  {
    "text": "by constantly generating models and collision shapes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=984"
  },
  {
    "text": "which is an expensive operation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=988"
  },
  {
    "text": "I'm going to open Xcode to see what I can do about this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=990"
  },
  {
    "text": "This is the Entity.makeModel function call ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=994"
  },
  {
    "text": "that the call tree showed was taking a lot of CPU time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=997"
  },
  {
    "text": "This is getting invoked within the makeGlobe function. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1002"
  },
  {
    "text": "I can Control-click on the makeGlobe function ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1009"
  },
  {
    "text": "to see who is invoking it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1011"
  },
  {
    "text": "It's getting invoked from the Orbit SwiftUI view body. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1014"
  },
  {
    "text": "This is antipattern that should be avoided ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1018"
  },
  {
    "text": "because the view body needs to be computed very quickly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1020"
  },
  {
    "text": "You should avoid doing model loading ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1025"
  },
  {
    "text": "or any other expensive operations ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1026"
  },
  {
    "text": "in the body of your SwiftUI views ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1029"
  },
  {
    "text": "because any time the state of the view changes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1031"
  },
  {
    "text": "all those expensive operations need to be recomputed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1034"
  },
  {
    "text": "So, what I am going to do is remove this call ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1037"
  },
  {
    "text": "from the view body. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1040"
  },
  {
    "text": "Next, in the ViewModel, I will add a reusable version ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1043"
  },
  {
    "text": "of the Earth entity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1045"
  },
  {
    "text": "And finally, I am going to use that reusable Earth entity ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1049"
  },
  {
    "text": "in the Orbit View. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1052"
  },
  {
    "text": "Now, when the view body is recomputed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1056"
  },
  {
    "text": "the app is not wasting time reloading the same model. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1059"
  },
  {
    "text": "Looking at the trace after our fix, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1063"
  },
  {
    "text": "the power impact is brought back down to the nominal state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1066"
  },
  {
    "text": "And Time Profiler reports that the CPU usage ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1070"
  },
  {
    "text": "has dropped from 100 percent to 10 percent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1073"
  },
  {
    "text": "After all these optimizations, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1076"
  },
  {
    "text": "there are few reported bottlenecks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1078"
  },
  {
    "text": "almost every frame is hitting its deadline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1079"
  },
  {
    "text": "and power is within expectations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1082"
  },
  {
    "text": "Now, the World app is a well-optimized app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1084"
  },
  {
    "text": "for this platform. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1086"
  },
  {
    "text": "Now that we've reduced the number of offscreen passes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1089"
  },
  {
    "text": "replaced the high-polygon assets with reasonable ones, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1092"
  },
  {
    "text": "and lowered CPU and power usage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1096"
  },
  {
    "text": "we're going to step through the optimized version of this app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1098"
  },
  {
    "text": "The start screen looks great, and since the shadows ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1103"
  },
  {
    "text": "weren't adding much to the user experience, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1105"
  },
  {
    "text": "this was a good optimization. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1107"
  },
  {
    "text": "Next, let's open up the Objects in Orbit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1110"
  },
  {
    "text": "These models look great, even though we are using assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1113"
  },
  {
    "text": "with fewer polygons. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1116"
  },
  {
    "text": "So that extra detail was just wasting resources. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1118"
  },
  {
    "text": "And finally, we're going to open up the Earth model again ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1121"
  },
  {
    "text": "and try resizing.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1123"
  },
  {
    "text": "Now this interaction is as smooth as butter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1127"
  },
  {
    "text": "That was a brief overview of how to use RealityKit Trace ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1133"
  },
  {
    "text": "to optimize your apps for this new platform. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1137"
  },
  {
    "text": "Hey, Sarina, what other tools are available for developers? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1139"
  },
  {
    "text": "Sarina: There are several tools available ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1143"
  },
  {
    "text": "to help you optimize your apps for spatial computing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1144"
  },
  {
    "text": "For optimizing SwiftUI content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1147"
  },
  {
    "text": "there are domain-specific instruments ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1149"
  },
  {
    "text": "in the Instruments app for analyzing SwiftUI, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1150"
  },
  {
    "text": "Core Animation, and hangs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1153"
  },
  {
    "text": "You can learn more about the Hangs instrument in the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1155"
  },
  {
    "text": "\"Analyze hangs with Instruments.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1157"
  },
  {
    "text": "There are also several tools available ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1160"
  },
  {
    "text": "to optimize your 3D asset-based content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1161"
  },
  {
    "text": "The Time Profiler Instrument can help you find areas ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1164"
  },
  {
    "text": "where your app is taking the most time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1167"
  },
  {
    "text": "such as when a large amount of time is spent loading assets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1169"
  },
  {
    "text": "The RealityKit Metrics Instrument ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1172"
  },
  {
    "text": "can help you diagnose when scenes have too many assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1173"
  },
  {
    "text": "or assets that are too complex. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1176"
  },
  {
    "text": "Finally, you can also check the complexity of your assets ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1178"
  },
  {
    "text": "as you're assembling a scene using Reality Composer Pro. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1180"
  },
  {
    "text": "To learn more about Reality Composer Pro, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1184"
  },
  {
    "text": "watch the session \"Meet Reality Composer Pro.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1186"
  },
  {
    "text": "If you are using Metal in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1189"
  },
  {
    "text": "the most useful tool will be the Metal System Trace template ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1191"
  },
  {
    "text": "in Instruments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1193"
  },
  {
    "text": "This template has key metrics, such as the GPU timeline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1195"
  },
  {
    "text": "GPU counters, and GPU performance state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1198"
  },
  {
    "text": "To learn more about this template and other tools ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1201"
  },
  {
    "text": "for profiling Metal content, check out the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1203"
  },
  {
    "text": "\"Discover Metal debugging, profiling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1205"
  },
  {
    "text": "and asset creation tools.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1207"
  },
  {
    "text": "To recap, performance is essential for this platform. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1210"
  },
  {
    "text": "Apps need to be well optimized ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1213"
  },
  {
    "text": "to deliver the best possible user experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1215"
  },
  {
    "text": "You can use the RealityKit Trace template ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1217"
  },
  {
    "text": "to find performance bottlenecks in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1219"
  },
  {
    "text": "Profiling proactively with other instruments ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1222"
  },
  {
    "text": "and checking your content in Reality Composer Pro ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1224"
  },
  {
    "text": "can also help you find and resolve performance issues. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1226"
  },
  {
    "text": "To learn more about how to use the RealityKit Trace template ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1229"
  },
  {
    "text": "to optimize your apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1232"
  },
  {
    "text": "please check out the developer documentation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1234"
  },
  {
    "text": "And to get a better understanding of performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1236"
  },
  {
    "text": "for this platform, watch the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1238"
  },
  {
    "text": "\"Optimize app power and performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1240"
  },
  {
    "text": "for spatial computing.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1242"
  },
  {
    "text": "Enjoy optimizing your spatial computing apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1244"
  },
  {
    "text": "whatever the trace may be. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1246"
  },
  {
    "text": "Harjas: Thank you for watching. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1248"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10099/?time=1249"
  }
]