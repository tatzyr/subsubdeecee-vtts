[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=0"
  },
  {
    "text": "Ethan: Hi, I'm Ethan. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=10"
  },
  {
    "text": "I'm from the Siri Understanding team and here to talk to you ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=12"
  },
  {
    "text": "about some exciting developments in speech recognition. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=14"
  },
  {
    "text": "In iOS 10, we introduced the Speech framework. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=17"
  },
  {
    "text": "It allowed you to leverage the same technology ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=20"
  },
  {
    "text": "that powers Siri and keyboard dictation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=22"
  },
  {
    "text": "to create voice enabled apps by using a simple, intuitive interface. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=25"
  },
  {
    "text": "However, the speech recognizer class, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=29"
  },
  {
    "text": "out of the box, isn't suitable for all apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=31"
  },
  {
    "text": "To explain why, let's talk about how speech recognition works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=34"
  },
  {
    "text": "A speech recognition system first feeds audio data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=37"
  },
  {
    "text": "into an Acoustic Model, which produces a phonetic representation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=40"
  },
  {
    "text": "Then the phonetic representation is converted into a written form, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=44"
  },
  {
    "text": "or transcription. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=48"
  },
  {
    "text": "Sometimes, multiple phonetic representations fit the audio data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=50"
  },
  {
    "text": "or a single phonetic representation may correspond to multiple transcriptions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=53"
  },
  {
    "text": "In these cases, we end up with multiple candidate transcriptions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=57"
  },
  {
    "text": "and we need a way to disambiguate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=61"
  },
  {
    "text": "To do this, we employ something called a language model. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=63"
  },
  {
    "text": "A language model predicts the likelihood that a given word ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=66"
  },
  {
    "text": "will come next in a sequence of words. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=69"
  },
  {
    "text": "Applied to a whole sentence, it can give us a feel for whether ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=71"
  },
  {
    "text": "the sentence is probably nonsense. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=74"
  },
  {
    "text": "The language model helps us reject candidates which are unlikely, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=77"
  },
  {
    "text": "based on patterns of usage that the model was exposed to during training. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=79"
  },
  {
    "text": "Since iOS 10, the Speech framework has encapsulated ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=84"
  },
  {
    "text": "this entire process in order to present an interface that is easy to use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=86"
  },
  {
    "text": "To understand why that might not be ideal, let's consider an example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=90"
  },
  {
    "text": "I love to play chess, and I've been working on a chess app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=94"
  },
  {
    "text": "that will let users dictate individual moves, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=97"
  },
  {
    "text": "as well as common openings and defenses. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=100"
  },
  {
    "text": "Here, my opponent has played the classic Queen's Gambit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=102"
  },
  {
    "text": "I've been studying, and I like the response E5, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=107"
  },
  {
    "text": "the Albin counter gambit.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=109"
  },
  {
    "text": "Play the Albin counter gambit.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=113"
  },
  {
    "text": "Uh oh, there's a problem. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=116"
  },
  {
    "text": "The recognizer is misrecognizing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=118"
  },
  {
    "text": "my chess move as a music request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=120"
  },
  {
    "text": "The language model that the recognizer uses was exposed ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=123"
  },
  {
    "text": "to a lot of music requests during its training process, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=126"
  },
  {
    "text": "so it is prepared for queries like, “Play the album,” ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=128"
  },
  {
    "text": "followed by an album name. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=132"
  },
  {
    "text": "Conversely, it's probably never encountered my preferred transcription. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=133"
  },
  {
    "text": "By abstracting away the behavior of the language model, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=138"
  },
  {
    "text": "the Speech framework forces all apps to use the same model, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=141"
  },
  {
    "text": "even though different domains call for different behavior. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=144"
  },
  {
    "text": "Beginning in iOS 17, you'll be able to customize the behavior ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=147"
  },
  {
    "text": "of the SFSpeechRecognizer's language model, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=151"
  },
  {
    "text": "tailor it to your application, and improve its accuracy.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=153"
  },
  {
    "text": "To get started with language model customization, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=158"
  },
  {
    "text": "first create a collection of training data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=160"
  },
  {
    "text": "You can do this during your development process. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=163"
  },
  {
    "text": "Then, in your app, you'll prepare the data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=166"
  },
  {
    "text": "configure a recognition request, and then run it.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=168"
  },
  {
    "text": "Let's talk about the process of building your collection of training data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=173"
  },
  {
    "text": "At a high level, training data will consist of bits ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=177"
  },
  {
    "text": "of text that represent phrases your app's users are likely to speak. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=180"
  },
  {
    "text": "These will teach the model to expect those phrases ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=185"
  },
  {
    "text": "and boost the likelihood that they'll be recognized correctly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=188"
  },
  {
    "text": "Experiment often, as it's surprising to see how ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=191"
  },
  {
    "text": "capable the recognizer is, and how much it improves over time.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=194"
  },
  {
    "text": "The speech framework introduces a new class that acts ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=198"
  },
  {
    "text": "as a container for training data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=201"
  },
  {
    "text": "It's built using the result builder DSL. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=202"
  },
  {
    "text": "You can provide an exact phrase or part of a phrase using a PhraseCount object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=205"
  },
  {
    "text": "A PhraseCount will also describe how many times the sample should be ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=210"
  },
  {
    "text": "represented in the final data set. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=213"
  },
  {
    "text": "This can be used to weight certain phrases more heavily than others. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=216"
  },
  {
    "text": "Only so much data can be accepted by the system, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=220"
  },
  {
    "text": "so balance your need to boost phrases against your overall training data budget. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=222"
  },
  {
    "text": "You can also leverage templates to generate a large number ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=227"
  },
  {
    "text": "of samples that fit a regular pattern. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=230"
  },
  {
    "text": "Here, I've defined three classes of words that together make up a chess move. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=232"
  },
  {
    "text": "The piece to move, which doubles as the file that I'm targeting, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=237"
  },
  {
    "text": "the royal piece that defines which side of the board to play on, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=241"
  },
  {
    "text": "and the rank to move to. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=244"
  },
  {
    "text": "By putting them together into a pattern, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=246"
  },
  {
    "text": "I can easily generate data samples representing every possible move. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=248"
  },
  {
    "text": "Here, the count applies to the entire template, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=253"
  },
  {
    "text": "so I'll get 10,000 samples representing chess moves, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=255"
  },
  {
    "text": "divided evenly among all of the resulting data samples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=258"
  },
  {
    "text": "When I'm done building up the data object, I export it to a file ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=261"
  },
  {
    "text": "and deploy into my app like any other asset.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=265"
  },
  {
    "text": "If your app makes use of specialized terminology, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=268"
  },
  {
    "text": "for example, a medical app that includes the names of pharmaceuticals, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=271"
  },
  {
    "text": "you can define both the spelling and pronunciations of those terms, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=275"
  },
  {
    "text": "and provide phrase counts that demonstrates their usage. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=278"
  },
  {
    "text": "Pronunciations are accepted in the form of X-SAMPA strings. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=281"
  },
  {
    "text": "Each locale supports a unique subset of pronunciation symbols. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=285"
  },
  {
    "text": "Refer to the documentation for the full set of locales ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=290"
  },
  {
    "text": "and supported symbols. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=292"
  },
  {
    "text": "For my app, I want to make sure the recognizer can ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=295"
  },
  {
    "text": "understand the Winawer variation, a common variant of the French defense. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=297"
  },
  {
    "text": "I describe the pronunciation using the subset of X-SAMPA symbols ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=302"
  },
  {
    "text": "that are supported by this locale.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=305"
  },
  {
    "text": "You can use the same API to train on data that your app can access at runtime. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=309"
  },
  {
    "text": "You might do this to support usage patterns that are specific ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=313"
  },
  {
    "text": "to your users, such as focusing on the chess openings ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=316"
  },
  {
    "text": "and defenses that your user is trying to learn. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=319"
  },
  {
    "text": "You might also want to train on named entities. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=322"
  },
  {
    "text": "Maybe your app supports network play against your user's contacts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=324"
  },
  {
    "text": "And as always, respecting the user's privacy is paramount.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=328"
  },
  {
    "text": "For example, a communication app may want to boost commands to call contacts ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=333"
  },
  {
    "text": "based on the frequency with which ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=337"
  },
  {
    "text": "those contacts appear in the call history. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=338"
  },
  {
    "text": "This kind of information should always ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=341"
  },
  {
    "text": "stay on device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=342"
  },
  {
    "text": "You simply call into the same methods from within your app to generate a data object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=344"
  },
  {
    "text": "write it to a file, and ingest it as shown earlier.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=349"
  },
  {
    "text": "Once training data is generated, it is bound to a single locale. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=353"
  },
  {
    "text": "If you want to support multiple locales within a single script, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=357"
  },
  {
    "text": "you can use standard localization facilities ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=360"
  },
  {
    "text": "like NSLocalizedString to do so. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=362"
  },
  {
    "text": "Now, let's talk about deploying your model in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=365"
  },
  {
    "text": "First, you need to call a new method, prepareCustomLanguageModel, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=368"
  },
  {
    "text": "that accepts the file we generated in the previous step ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=372"
  },
  {
    "text": "and produces two new files that we'll use later. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=375"
  },
  {
    "text": "This method call can have a large amount of associated latency, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=379"
  },
  {
    "text": "so it's best to call it off the main thread, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=383"
  },
  {
    "text": "and hide the latency behind some UI, such as a loading screen. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=385"
  },
  {
    "text": "Sometimes, you need to keep data on the device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=390"
  },
  {
    "text": "where it's generated in order to respect the user's privacy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=392"
  },
  {
    "text": "LM customization supports this ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=395"
  },
  {
    "text": "by never sending customization data over the network. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=397"
  },
  {
    "text": "All customized requests are serviced strictly on device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=400"
  },
  {
    "text": "When your app constructs the speech recognition request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=404"
  },
  {
    "text": "you first enforce that the recognition is run on device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=407"
  },
  {
    "text": "Failing to do so will cause requests to be serviced without customization. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=410"
  },
  {
    "text": "Then you attach the language model to your request object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=415"
  },
  {
    "text": "Now, with LM customization turned on in my app... ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=419"
  },
  {
    "text": "Play the Albin counter gambit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=423"
  },
  {
    "text": "My custom terms work as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=426"
  },
  {
    "text": "Play the Winawer variation.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=428"
  },
  {
    "text": "By customizing the language model, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=432"
  },
  {
    "text": "I've tuned the recognizer to my application's domain, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=434"
  },
  {
    "text": "and I've gained some control over how it behaves. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=436"
  },
  {
    "text": "Most importantly, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=439"
  },
  {
    "text": "I've improved speech recognition accuracy for my app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=440"
  },
  {
    "text": "Now that the Speech framework can be adapted to more apps and more users, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=444"
  },
  {
    "text": "it's even more powerful and can be used to create even better experiences. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=447"
  },
  {
    "text": "Language model customization provides you a way ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=452"
  },
  {
    "text": "to enhance the speech recognizer and customize it for your apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=454"
  },
  {
    "text": "I'm super excited to see all of the amazing things ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=458"
  },
  {
    "text": "you'll accomplish with it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=460"
  },
  {
    "text": "Thank you, and remember to play for the center. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=462"
  },
  {
    "text": "♪ ♪",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10101/?time=464"
  }
]