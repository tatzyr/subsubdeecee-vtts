[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=0"
  },
  {
    "text": "Siraj: Hello, everyone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=10"
  },
  {
    "text": "My name is Siraj, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=12"
  },
  {
    "text": "and I'm an Engineer in CoreLocation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=13"
  },
  {
    "text": "Thanks for joining \"Discover Streamlined Location Updates,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=16"
  },
  {
    "text": "where I'll be talking about our new CoreLocation API for getting locations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=19"
  },
  {
    "text": "Let's get started.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=24"
  },
  {
    "text": "Getting location updates now ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=27"
  },
  {
    "text": "is as simple as writing this one line of code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=29"
  },
  {
    "text": "How cool! Isn't it? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=33"
  },
  {
    "text": "This is our new Swift native API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=35"
  },
  {
    "text": "with out of box support for modern swift concurrency to get location updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=38"
  },
  {
    "text": "Let's take a deep dive then. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=43"
  },
  {
    "text": "We'll start the talk by describing in detail the structure of our new ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=45"
  },
  {
    "text": "CLLocationUpdate API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=49"
  },
  {
    "text": "Followed by how to get location updates using this API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=52"
  },
  {
    "text": "Then I'll go over what needs to be done in order to get location updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=57"
  },
  {
    "text": "in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=61"
  },
  {
    "text": "Followed by how updates can pause and resume automatically. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=63"
  },
  {
    "text": "Finally, we'll wrap up by describing the lifecycle of your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=68"
  },
  {
    "text": "as it gets updates through this API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=72"
  },
  {
    "text": "Let's explore the structure of the CLocationUpdate API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=75"
  },
  {
    "text": "We are introducing a new class CLLocationUpdate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=79"
  },
  {
    "text": "which has a static function liveUpdates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=84"
  },
  {
    "text": "that returns an AsyncSequence called Updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=86"
  },
  {
    "text": "Which can directly be iterated using for/try/await, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=90"
  },
  {
    "text": "to yield an element of type CLLocationUpdate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=94"
  },
  {
    "text": "that contains a location of type CLLocation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=98"
  },
  {
    "text": "and a boolean flag isStationary for managing automatic, pause and resume. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=103"
  },
  {
    "text": "liveUpdates also consumes an optional argument ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=109"
  },
  {
    "text": "of LiveConfiguration enum type. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=113"
  },
  {
    "text": "Now, let's do some code walkthrough ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=116"
  },
  {
    "text": "and see how we can get updates using this new API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=119"
  },
  {
    "text": "Let's build a basic app that starts location updates from the Foreground. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=123"
  },
  {
    "text": "First import CoreLocation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=128"
  },
  {
    "text": "Then we'll call the static factory function ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=131"
  },
  {
    "text": "liveUpdates provided by the CLLocationUpdate class ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=134"
  },
  {
    "text": "to get the Updates AsyncSequence. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=139"
  },
  {
    "text": "Which can directly be iterated using for/try/await ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=142"
  },
  {
    "text": "to get a CLLocationUpdate in the closure. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=146"
  },
  {
    "text": "And then get the location by accessing its location property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=150"
  },
  {
    "text": "All right, so at this point our updates have started. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=155"
  },
  {
    "text": "How about if we have to stop it? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=159"
  },
  {
    "text": "Stopping is as simple as breaking from the for loop. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=162"
  },
  {
    "text": "Remember isStationary? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=165"
  },
  {
    "text": "Let's break out of the for loop ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=168"
  },
  {
    "text": "when this isStationary is reported to be true, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=170"
  },
  {
    "text": "automatically stopping the updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=173"
  },
  {
    "text": "Explicit start and stop messages are not required anymore. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=176"
  },
  {
    "text": "Let's check out the AsyncSequence returned by CLLocationUpdate API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=180"
  },
  {
    "text": "All the powerful things which we can do over an AsyncSequence ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=186"
  },
  {
    "text": "like finding, selecting, and excluding elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=190"
  },
  {
    "text": "can also be performed on this updates sequence. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=194"
  },
  {
    "text": "In this example, I'll walk you through how we can use the first filter ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=197"
  },
  {
    "text": "directly on the AsyncSequence. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=202"
  },
  {
    "text": "Under the hood updates are started ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=205"
  },
  {
    "text": "and the location of each element is checked for speed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=207"
  },
  {
    "text": "As soon as an update whose speed is more than 200 is found, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=211"
  },
  {
    "text": "that first element will be returned, completing the operation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=216"
  },
  {
    "text": "Updates will automatically stop once the first match is found. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=221"
  },
  {
    "text": "But did you notice the speed here? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=226"
  },
  {
    "text": "This is 200 meter per second, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=228"
  },
  {
    "text": "so roughly around 447 miles per hour. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=230"
  },
  {
    "text": "That's too fast, right? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=234"
  },
  {
    "text": "So we need to be careful while using these filters ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=236"
  },
  {
    "text": "because execution will get stuck until a match is found, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=240"
  },
  {
    "text": "and be even more careful if you try using this for filtering the locations ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=244"
  },
  {
    "text": "based on horizontalAccuracy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=250"
  },
  {
    "text": "Okay, so this is our sample code from the previous slide for getting updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=252"
  },
  {
    "text": "where we are not specifying any configuration to liveUpdates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=257"
  },
  {
    "text": "So they are configured automatically with a default config. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=261"
  },
  {
    "text": "But liveUpdates API can take an explicit configuration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=266"
  },
  {
    "text": "This configuration is a new enum type ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=270"
  },
  {
    "text": "which we are introducing as part of this API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=273"
  },
  {
    "text": "Let's see what are the members of this enum type and their use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=276"
  },
  {
    "text": "LiveConfiguration enum is a collection of pre-baked configurations ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=281"
  },
  {
    "text": "an app can choose from to start the updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=286"
  },
  {
    "text": "It has default, automotiveNavigation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=290"
  },
  {
    "text": "otherNavigation, fitness, and airborne as its members. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=293"
  },
  {
    "text": "If your app is already using a particular CLActivityType ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=299"
  },
  {
    "text": "with existing location updates API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=303"
  },
  {
    "text": "then you can choose a corresponding LiveConfiguration member ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=306"
  },
  {
    "text": "to have the same location experience while adopting the new API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=310"
  },
  {
    "text": "But if you don't have the need for a specific activityType, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=314"
  },
  {
    "text": "then you can start the updates either with default configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=318"
  },
  {
    "text": "or don't specify any configuration at all. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=322"
  },
  {
    "text": "So what does this \"updates\" AsyncSequence yield? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=325"
  },
  {
    "text": "When you iterate it, it gives you an object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=329"
  },
  {
    "text": "which is of type CLLocationUpdate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=332"
  },
  {
    "text": "It contains an optional location of type CLLocation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=335"
  },
  {
    "text": "If no location is available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=339"
  },
  {
    "text": "we deliver an update with location marked as nil. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=341"
  },
  {
    "text": "It also contains a boolean property isStationary ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=345"
  },
  {
    "text": "through which we manage automatic pause / resume of location updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=349"
  },
  {
    "text": "All right, so we just covered how to get updates from the foreground. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=354"
  },
  {
    "text": "Now let's talk about how to get updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=359"
  },
  {
    "text": "when your app is running in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=362"
  },
  {
    "text": "LiveActivity is the best way to enable background location updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=364"
  },
  {
    "text": "As long as your LiveActivity remains active, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=370"
  },
  {
    "text": "your app can receive updates without any other additional setup. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=373"
  },
  {
    "text": "But don't worry if your app doesn't have a LiveActivity yet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=377"
  },
  {
    "text": "This won't be a blocker for adopting the new API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=381"
  },
  {
    "text": "Instead you can use CLBackgroundActivitySession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=384"
  },
  {
    "text": "Let's explore how it works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=389"
  },
  {
    "text": "Many of you might already be familiar ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=392"
  },
  {
    "text": "with this blue background location indicator, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=394"
  },
  {
    "text": "which is displayed when an app authorized as While Using ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=397"
  },
  {
    "text": "gets updates in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=401"
  },
  {
    "text": "CLBackgroundActivitySession uses the same indicator ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=403"
  },
  {
    "text": "to provide background location capability to your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=408"
  },
  {
    "text": "It does so by maintaining the visibility for user ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=411"
  },
  {
    "text": "regarding location services being used in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=415"
  },
  {
    "text": "And since the visibility is maintained, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=419"
  },
  {
    "text": "it keeps the app effectively in-use ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=421"
  },
  {
    "text": "letting it access locations even from the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=424"
  },
  {
    "text": "CLBackgroundActivitySession supports the app's authorization as a whole. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=428"
  },
  {
    "text": "So it will enable your app not only to receive updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=433"
  },
  {
    "text": "while in the background, but also to monitor for events using CLMonitor. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=437"
  },
  {
    "text": "BackgroundActivitySession has no dependency on Updates being started. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=443"
  },
  {
    "text": "Just creating the session displays the indicator ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=448"
  },
  {
    "text": "when your app is in the background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=451"
  },
  {
    "text": "letting it receive updates and events as needed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=452"
  },
  {
    "text": "In order to use CLBackgroundActivitySession, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=457"
  },
  {
    "text": "you need to instantiate it and hold it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=460"
  },
  {
    "text": "Be cautious about the hold part, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=463"
  },
  {
    "text": "because object deallocation will automatically invalidate the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=466"
  },
  {
    "text": "potentially ending your app's access to background location. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=470"
  },
  {
    "text": "Your app still needs to have location in its UIBackgroundModes array, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=474"
  },
  {
    "text": "in order for BackgroundActivitySession to work effectively. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=479"
  },
  {
    "text": "If you don't have an outstanding session, then you must start the new session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=483"
  },
  {
    "text": "from the foreground, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=487"
  },
  {
    "text": "but you can only rejoin an existing one from the the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=489"
  },
  {
    "text": "Let's do a quick code walk through ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=493"
  },
  {
    "text": "and see how to use backgroundActivitySession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=495"
  },
  {
    "text": "This is our same \"how to get updates\" code slide from the previous section.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=498"
  },
  {
    "text": "Before starting the updates, you should instantiate ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=504"
  },
  {
    "text": "a CLBackgroundActivitySession object to start a new session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=507"
  },
  {
    "text": "Note, we are assigning the session to self.backgroundActivity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=512"
  },
  {
    "text": "which is a property and not to a local variable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=516"
  },
  {
    "text": "And this is important because if we used a local variable, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=519"
  },
  {
    "text": "then when it goes out of scope, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=523"
  },
  {
    "text": "the object it holds would be deallocated, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=525"
  },
  {
    "text": "invalidating the session and potentially ending your app's access to location. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=528"
  },
  {
    "text": "Then when we want to end our session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=533"
  },
  {
    "text": "we can do that by sending the invalidate message ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=536"
  },
  {
    "text": "or by letting the object be destroyed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=539"
  },
  {
    "text": "So that's how your app can get updates in the background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=542"
  },
  {
    "text": "either through LiveActivity or through CLBackgroundActivitySession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=546"
  },
  {
    "text": "Now let's see how this new API contributes to battery life ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=550"
  },
  {
    "text": "by automatically pausing and resuming the updates.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=555"
  },
  {
    "text": "Let's assume the app is receiving updates while the user is moving. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=559"
  },
  {
    "text": "But multiple times in a day, the device will become stationary. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=564"
  },
  {
    "text": "For example, when a user reaches their office, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=568"
  },
  {
    "text": "they may leave their device on the desk. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=571"
  },
  {
    "text": "In such a situation we would be giving your app the same locations over and over.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=574"
  },
  {
    "text": "Instead, we can be power efficient here by pausing the updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=580"
  },
  {
    "text": "This off loads your app as well, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=584"
  },
  {
    "text": "by not giving it redundant locations to process. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=586"
  },
  {
    "text": "So once the device is in stationary state for a sufficient amount of time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=590"
  },
  {
    "text": "CLLocationUpdate API will recognize this ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=595"
  },
  {
    "text": "and trigger Automatic Pause. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=598"
  },
  {
    "text": "When pause is triggered, we will send an update ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=601"
  },
  {
    "text": "with a non-nil location and isStationary flag marked as True. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=604"
  },
  {
    "text": "This is how you know that the user has ceased to move, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=608"
  },
  {
    "text": "rather than their location becoming unavailable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=611"
  },
  {
    "text": "Later, when the device becomes non-stationary, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=615"
  },
  {
    "text": "updates will automatically resume without any user interaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=618"
  },
  {
    "text": "With this resuming update, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=622"
  },
  {
    "text": "we will send isStationary marked as False, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=624"
  },
  {
    "text": "continuing the delivery of updates to your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=627"
  },
  {
    "text": "So automatically pausing and resuming the updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=631"
  },
  {
    "text": "while your app is in background ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=634"
  },
  {
    "text": "does have an impact on its lifecycle. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=636"
  },
  {
    "text": "Let's go through the various lifecycle phases your app will undergo ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=639"
  },
  {
    "text": "while running in the background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=643"
  },
  {
    "text": "and what action needs to be taken ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=645"
  },
  {
    "text": "to maintain the continuity of background updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=647"
  },
  {
    "text": "Your app while running in foreground and receiving updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=651"
  },
  {
    "text": "may transition from foreground running to background running ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=655"
  },
  {
    "text": "and vice versa. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=658"
  },
  {
    "text": "But now with this new API, at times your app might transition ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=661"
  },
  {
    "text": "from the background running state to the suspended state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=665"
  },
  {
    "text": "This will likely happen when there are no updates to deliver. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=669"
  },
  {
    "text": "For example, due to automatic pause, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=674"
  },
  {
    "text": "because of a stationary device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=676"
  },
  {
    "text": "or because Location Services is not able to compute a location fix. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=679"
  },
  {
    "text": "But don't worry! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=683"
  },
  {
    "text": "CLLocationUpdate is not going to leave your app in the suspended state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=685"
  },
  {
    "text": "Instead, as soon as updates are available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=689"
  },
  {
    "text": "either because automatic resume kicked in ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=693"
  },
  {
    "text": "or maybe location is now available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=696"
  },
  {
    "text": "we will unsuspend your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=698"
  },
  {
    "text": "transitioning it back into the background running state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=700"
  },
  {
    "text": "When your app is resumed from the suspended state, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=704"
  },
  {
    "text": "no action is required to continue the updates in background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=707"
  },
  {
    "text": "Suspended is not the only state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=712"
  },
  {
    "text": "It's possible that your app can transition all the way into the terminated state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=714"
  },
  {
    "text": "And this transition can happen in several ways. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=719"
  },
  {
    "text": "Let's go through them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=722"
  },
  {
    "text": "First, directly from background running due to app crash, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=724"
  },
  {
    "text": "or user close ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=728"
  },
  {
    "text": "or system termination when resources are constrained. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=730"
  },
  {
    "text": "Second, your app can transition into Terminated state ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=735"
  },
  {
    "text": "even from the suspended state, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=738"
  },
  {
    "text": "due to user close or resource constraint. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=741"
  },
  {
    "text": "But we have a good news for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=745"
  },
  {
    "text": "Our API can recover your app in most cases, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=747"
  },
  {
    "text": "even when it's terminated and not running at all. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=751"
  },
  {
    "text": "We will recover your app as soon as location updates are available ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=754"
  },
  {
    "text": "by launching it in the background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=758"
  },
  {
    "text": "and this will transition your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=761"
  },
  {
    "text": "from terminated to background running ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=763"
  },
  {
    "text": "But after receiving the launch, you have to perform some steps ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=766"
  },
  {
    "text": "to make sure your background location session can continue.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=770"
  },
  {
    "text": "You need to restart the updates by calling liveUpdates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=775"
  },
  {
    "text": "and if your app was previously using a background activity session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=779"
  },
  {
    "text": "then you also need to recreate a CLBackgroundActivitySession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=783"
  },
  {
    "text": "Remember I mentioned, you can only rejoin an existing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=788"
  },
  {
    "text": "CLBackgroundActivitySession from the background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=792"
  },
  {
    "text": "but can not start a new one? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=795"
  },
  {
    "text": "Here is some more explanation on that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=797"
  },
  {
    "text": "The background activity session object you just recreated? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=800"
  },
  {
    "text": "It is not the start of a new session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=803"
  },
  {
    "text": "You have just created a new session object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=806"
  },
  {
    "text": "Now, since your app has already started a session before it was terminated, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=809"
  },
  {
    "text": "this recreation allowed your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=813"
  },
  {
    "text": "to rejoin that existing session from the background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=816"
  },
  {
    "text": "allowing your app to continue its background location updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=819"
  },
  {
    "text": "Okay, so we just discussed ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=824"
  },
  {
    "text": "how you should be recreating your liveUpdates ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=826"
  },
  {
    "text": "and background activity session after receiving background app launch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=829"
  },
  {
    "text": "Related with recreation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=834"
  },
  {
    "text": "there are few things that you should be careful about.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=836"
  },
  {
    "text": "Your app should perform any recreation immediately ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=840"
  },
  {
    "text": "upon receiving background app launch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=843"
  },
  {
    "text": "Place the recreation of these objects ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=846"
  },
  {
    "text": "somewhere that will get executed when your app receives a background launch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=848"
  },
  {
    "text": "For our sample app, we have placed the recreation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=853"
  },
  {
    "text": "in UIApplicationDelegate's - didFinishLaunchingWithOptions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=856"
  },
  {
    "text": "which gets called once the app launch has finished. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=861"
  },
  {
    "text": "All right! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=865"
  },
  {
    "text": "So this is our new location updates API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=866"
  },
  {
    "text": "with simplified adoption and improved battery performance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=869"
  },
  {
    "text": "It will be available starting this year on all the platforms. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=872"
  },
  {
    "text": "I highly encourage you all to try CLLocationUpdate in your apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=877"
  },
  {
    "text": "and provide your valuable feedback to us through Feedback Assistant. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=881"
  },
  {
    "text": "We also have a sample app showcasing how to use this new API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=886"
  },
  {
    "text": "which you can download from the Resources section. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=891"
  },
  {
    "text": "Apple Developer docs for CLLocationUpdate are also available for more API details. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=894"
  },
  {
    "text": "I also recommend watching our \"Meet Core Location Monitor\" session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=901"
  },
  {
    "text": "which covers Core Location Monitoring API we are adding this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=905"
  },
  {
    "text": "That's all from my side on \"Discover streamlined location updates.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=910"
  },
  {
    "text": "Thanks for watching! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=914"
  },
  {
    "text": "♪ ♪",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10180/?time=916"
  }
]