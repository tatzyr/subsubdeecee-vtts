[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=0"
  },
  {
    "text": "Keith Holleman: Hi, my name is Keith Holleman, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=10"
  },
  {
    "text": "and I’m part of the Internet Technologies team here at Apple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=13"
  },
  {
    "text": "Today I’ll be talking about how you can use network relays ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=16"
  },
  {
    "text": "to enhance the privacy and security of your apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=19"
  },
  {
    "text": "We will start this session by exploring the technology used for network relays. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=23"
  },
  {
    "text": "Relays are used across many privacy features at Apple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=28"
  },
  {
    "text": "We love how this technology is both effective and easy to use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=32"
  },
  {
    "text": "and now you will have two ways to use relays in your apps as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=36"
  },
  {
    "text": "First, you can configure relays within an app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=41"
  },
  {
    "text": "to protect the network traffic for your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=44"
  },
  {
    "text": "Second, you can extend relays to the device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=47"
  },
  {
    "text": "for accessing private resources in an enterprise, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=50"
  },
  {
    "text": "as an alternative to a VPN. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=53"
  },
  {
    "text": "Let’s dive in and get started. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=57"
  },
  {
    "text": "Relays form the basis of great features, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=59"
  },
  {
    "text": "such as iCloud Private Relay, Mail privacy protection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=62"
  },
  {
    "text": "and hiding IP addresses from trackers in Safari. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=66"
  },
  {
    "text": "Your app may also handle sensitive information about users ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=70"
  },
  {
    "text": "that they want to keep private, and you may want to ensure that ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=74"
  },
  {
    "text": "your own servers can’t associate that information with client IP addresses. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=77"
  },
  {
    "text": "Now, your app can use relays that you select ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=82"
  },
  {
    "text": "to provide strong privacy protections for all of your users.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=85"
  },
  {
    "text": "A relay is a special type of proxy that is optimized for performance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=91"
  },
  {
    "text": "uses the latest transport and security protocols, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=96"
  },
  {
    "text": "and is natively built into the modern network stack ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=99"
  },
  {
    "text": "available on Apple platforms. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=102"
  },
  {
    "text": "There are two standard protocols defined by the IETF ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=105"
  },
  {
    "text": "that these relays use: MASQUE and Oblivious HTTP. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=108"
  },
  {
    "text": "MASQUE relays are a great way to enhance the privacy of your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=114"
  },
  {
    "text": "or access private resources. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=119"
  },
  {
    "text": "You can send any TCP or UDP connection through a relay ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=121"
  },
  {
    "text": "without needing to modify the back-end server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=126"
  },
  {
    "text": "You can chain relay servers together so that no single entity can combine ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=129"
  },
  {
    "text": "an IP address and browsing activity into a detailed profile of a user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=134"
  },
  {
    "text": "This is the cornerstone technology behind iCloud Private Relay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=139"
  },
  {
    "text": "Relays are also a great way to access enterprise resources. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=144"
  },
  {
    "text": "A relay provides a better user experience, is more performant, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=149"
  },
  {
    "text": "and is easier to manage than a VPN. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=153"
  },
  {
    "text": "MASQUE relays use TLS 1.3 to secure all traffic to the proxy, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=156"
  },
  {
    "text": "unlike legacy proxy protocols. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=162"
  },
  {
    "text": "MASQUE uses QUIC, the latest transport protocol, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=164"
  },
  {
    "text": "and HTTP/3 to efficiently proxy and multiplex ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=168"
  },
  {
    "text": "many connections over a single tunnel. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=173"
  },
  {
    "text": "And for cases where QUIC is blocked by a network, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=175"
  },
  {
    "text": "they can fall back to using HTTP/2.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=178"
  },
  {
    "text": "If your app sends HTTP requests that you want to make sure are private ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=182"
  },
  {
    "text": "and not linked to any other requests, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=186"
  },
  {
    "text": "such as anonymous metrics reports, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=188"
  },
  {
    "text": "database lookups, or DNS queries, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=191"
  },
  {
    "text": "you can also use Oblivious HTTP. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=194"
  },
  {
    "text": "With Oblivious HTTP, you can get great performance and privacy ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=198"
  },
  {
    "text": "with only a single relay hop. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=202"
  },
  {
    "text": "Unlike MASQUE relays, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=205"
  },
  {
    "text": "Oblivious HTTP doesn't work with arbitrary servers; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=207"
  },
  {
    "text": "your server needs to explicitly support it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=211"
  },
  {
    "text": "To learn more about Oblivious HTTP, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=214"
  },
  {
    "text": "watch the session \"What’s new in Privacy.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=217"
  },
  {
    "text": "You can use both of these relay types to proxy connections made by your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=220"
  },
  {
    "text": "This allows you to use specific relay servers that you choose ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=226"
  },
  {
    "text": "in order to increase your app’s privacy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=230"
  },
  {
    "text": "The new ProxyConfiguration class allows you to define your relays ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=233"
  },
  {
    "text": "in Network framework, URLSession, and WebKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=238"
  },
  {
    "text": "All three APIs use this common class in a similar manner ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=243"
  },
  {
    "text": "and let you define relays for your entire app or just specific connections. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=247"
  },
  {
    "text": "Within the ProxyConfiguration object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=252"
  },
  {
    "text": "you can define proxies based on five different protocols. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=255"
  },
  {
    "text": "This is where you can specify the new relay types ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=259"
  },
  {
    "text": "for both MASQUE and Oblivious HTTP. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=262"
  },
  {
    "text": "The same object can also be used to configure legacy proxy types. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=266"
  },
  {
    "text": "If you were configuring proxies on URLSession ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=271"
  },
  {
    "text": "or WebKit with dictionaries before, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=274"
  },
  {
    "text": "now is a great time to switch to using this new object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=276"
  },
  {
    "text": "For legacy proxy types, you can configure HTTP CONNECT, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=281"
  },
  {
    "text": "with newly added support for TLS to the proxy, as well as SOCKSv5. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=285"
  },
  {
    "text": "Here is how you define a ProxyConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=291"
  },
  {
    "text": "that will be used to connect to a MASQUE relay over HTTP/3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=293"
  },
  {
    "text": "First, use an NWEndpoint to specify the server name or URL, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=298"
  },
  {
    "text": "and use it to define a relay hop. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=305"
  },
  {
    "text": "For these relay hops, you can specify support for ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=308"
  },
  {
    "text": "HTTP/3, HTTP/2, or both. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=311"
  },
  {
    "text": "The HTTP/2 server will be used as a backup ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=316"
  },
  {
    "text": "in case access to HTTP/3 using the QUIC protocol ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=319"
  },
  {
    "text": "is blocked by a network. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=323"
  },
  {
    "text": "Then, create a proxy configuration by passing your relay ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=325"
  },
  {
    "text": "to a \"relayHops\" array parameter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=329"
  },
  {
    "text": "If you want to define a multi-hop relay configuration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=332"
  },
  {
    "text": "you can pass two relays here. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=335"
  },
  {
    "text": "To use your ProxyConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=338"
  },
  {
    "text": "with an NWConnection from Network framework, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=340"
  },
  {
    "text": "create a PrivacyContext or use the default context ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=344"
  },
  {
    "text": "and add the proxy configuration to that context. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=348"
  },
  {
    "text": "Set the context on your NWParameters, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=352"
  },
  {
    "text": "and then pass these parameters when you create and start the connection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=356"
  },
  {
    "text": "Now this connection is sending all of its traffic through the proxy.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=360"
  },
  {
    "text": "You can also use this same proxy configuration we already defined ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=367"
  },
  {
    "text": "directly in URLSession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=371"
  },
  {
    "text": "To do this, add your configuration to the proxyConfigurations array ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=373"
  },
  {
    "text": "on your URLSessionConfiguration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=378"
  },
  {
    "text": "Then, run tasks in your URLSession as you would normally, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=381"
  },
  {
    "text": "and they will now also use the proxy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=385"
  },
  {
    "text": "The same proxy configuration object can also be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=390"
  },
  {
    "text": "to proxy connections made in a WebKit view! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=393"
  },
  {
    "text": "First, initialize a web view configuration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=397"
  },
  {
    "text": "add a data store, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=400"
  },
  {
    "text": "and add your proxy configuration to the data store. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=402"
  },
  {
    "text": "Then initialize a web view with your configuration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=406"
  },
  {
    "text": "Once that’s done, you can load the requested URL ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=410"
  },
  {
    "text": "and use the WebKit view as you normally would. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=413"
  },
  {
    "text": "Now, this Webkit view is also sending its traffic through the relay.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=416"
  },
  {
    "text": "Besides adding relays to your own apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=422"
  },
  {
    "text": "in iOS 17, you can configure them for the whole device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=425"
  },
  {
    "text": "In addition to letting you build privacy features, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=429"
  },
  {
    "text": "this is a great way to use relays to provide access ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=432"
  },
  {
    "text": "to private enterprise network resources.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=435"
  },
  {
    "text": "You may be using a VPN to provide access to your enterprise resources. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=438"
  },
  {
    "text": "Relays are an alternative to VPNs that can provide a better user experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=443"
  },
  {
    "text": "and are easier to manage. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=448"
  },
  {
    "text": "A network relay does not require complex session negotiation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=450"
  },
  {
    "text": "and often requires fewer round trips before actual user data is transferred. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=454"
  },
  {
    "text": "This ensures that a user’s first load of a private resource is ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=459"
  },
  {
    "text": "the most responsive interaction possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=463"
  },
  {
    "text": "A relay also avoids the usage of tunnels, virtual interfaces, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=467"
  },
  {
    "text": "and additional IP addresses that are associated with VPNs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=471"
  },
  {
    "text": "Since you can configure multiple relays simultaneously, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=476"
  },
  {
    "text": "it is easier to access different private domains located in different networks. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=479"
  },
  {
    "text": "Enterprise companies that want to use relay servers ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=485"
  },
  {
    "text": "as an alternative to VPNs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=488"
  },
  {
    "text": "now have options to use them with their own infrastructure. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=490"
  },
  {
    "text": "Cisco is providing an enterprise relay service ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=494"
  },
  {
    "text": "as part of the Cisco Secure Edge offering. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=497"
  },
  {
    "text": "We are excited to see enterprises adopt this option ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=500"
  },
  {
    "text": "for providing remote access for their users.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=503"
  },
  {
    "text": "There are two ways to install a MASQUE relay configuration on a device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=507"
  },
  {
    "text": "Enterprise organizations can push a configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=512"
  },
  {
    "text": "via Mobile Device Management, or MDM, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=515"
  },
  {
    "text": "to define relays using a new relay payload type. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=518"
  },
  {
    "text": "These payloads can apply to managed apps, domains, or the entire device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=522"
  },
  {
    "text": "Second, you can write an app that uses the NERelayManager API to define your relay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=528"
  },
  {
    "text": "These configurations can apply to specific domains or the entire device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=534"
  },
  {
    "text": "Both of these are available in macOS, iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=540"
  },
  {
    "text": "iPadOS, and tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=544"
  },
  {
    "text": "And now that Network Extension support is added to tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=547"
  },
  {
    "text": "VPNs are also newly supported in tvOS 17.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=550"
  },
  {
    "text": "Here's how you configure a relay using a configuration profile. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=555"
  },
  {
    "text": "Just like in the ProxyConfiguration API for your apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=559"
  },
  {
    "text": "you define the relay URL. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=563"
  },
  {
    "text": "Just like in VPN profiles, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=566"
  },
  {
    "text": "you can use a client certificate for authentication to your enterprise servers ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=568"
  },
  {
    "text": "by referring to a certificate payload in the same profile. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=571"
  },
  {
    "text": "You can have the relay apply to specific domains ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=576"
  },
  {
    "text": "by adding them in the MatchDomains portion of the payload.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=578"
  },
  {
    "text": "Next, we will see how an app can use the NERelayManager API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=582"
  },
  {
    "text": "to add relays to a device programmatically. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=587"
  },
  {
    "text": "To define a relay, you will need to initialize a NERelay object ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=590"
  },
  {
    "text": "and then configure the URLs of your relays. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=595"
  },
  {
    "text": "Here, I am using the same relay for both HTTP/2 and HTTP/3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=599"
  },
  {
    "text": "If your relay requires additional HTTP headers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=605"
  },
  {
    "text": "add them to the NERelay object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=609"
  },
  {
    "text": "You will also need to access to the shared NERelayManager object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=612"
  },
  {
    "text": "as this is where you will store the NERelay object you just created. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=615"
  },
  {
    "text": "If you want your relay to apply to only specific domains ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=620"
  },
  {
    "text": "instead of the whole device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=623"
  },
  {
    "text": "add those domains to the matchDomains array. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=625"
  },
  {
    "text": "The final step is to make sure your relay is enabled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=628"
  },
  {
    "text": "and install your NERelayManager object into the system preferences. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=631"
  },
  {
    "text": "Let’s look at relays in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=636"
  },
  {
    "text": "I really love mountain biking and I even opened my very own bike shop. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=638"
  },
  {
    "text": "My shop has an online store ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=642"
  },
  {
    "text": "and an internal website where I can track all of my orders. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=645"
  },
  {
    "text": "That website is on my internal network and only available to employees. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=649"
  },
  {
    "text": "If I open Safari and attempt to look at my open orders, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=653"
  },
  {
    "text": "I can’t see them because I’m not on my internal network. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=657"
  },
  {
    "text": "Once I install a relay configuration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=661"
  },
  {
    "text": "I’ll be able to access my internal network from anywhere. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=663"
  },
  {
    "text": "If I open my sample relay app with the code we just walked through, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=667"
  },
  {
    "text": "I can configure the entire device to use my shop’s relay ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=671"
  },
  {
    "text": "while accessing my internal domain. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=675"
  },
  {
    "text": "This configuration will now also be visible in Settings, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=677"
  },
  {
    "text": "and we can see that it will be using the relay when I access internal.example.com. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=682"
  },
  {
    "text": "Now, when I return back to Safari and again attempt to look at my open orders, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=688"
  },
  {
    "text": "now I can see them and just how many orders I need to get shipped out. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=693"
  },
  {
    "text": "It’s that simple, fast, and responsive on the first load.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=697"
  },
  {
    "text": "Relays are modern, standards-based proxies ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=702"
  },
  {
    "text": "that can improve the security and privacy of your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=705"
  },
  {
    "text": "without compromising performance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=708"
  },
  {
    "text": "Directly adopt MASQUE relays and Oblivious HTTP relays in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=710"
  },
  {
    "text": "to enhance privacy for your users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=716"
  },
  {
    "text": "And for enterprises, start replacing the use of VPNs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=718"
  },
  {
    "text": "with relays that are easier to manage and provide a more seamless user experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=722"
  },
  {
    "text": "Thank you taking the time to watch today. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=727"
  },
  {
    "text": "I can’t wait to see how you use relays.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10002/?time=729"
  }
]