[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=0"
  },
  {
    "text": "Michael: Hello and welcome. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=10"
  },
  {
    "text": "I'm Michael Ochs and in this video I'm going to talk about ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=11"
  },
  {
    "text": "how to build better document-centric apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=14"
  },
  {
    "text": "Document-centric apps are a big part of productivity tools, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=18"
  },
  {
    "text": "especially on the iPad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=21"
  },
  {
    "text": "There are three types of document-centric apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=23"
  },
  {
    "text": "Those that allow browsing documents, such as the Files app; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=26"
  },
  {
    "text": "those that allow viewing content, for example Quick Look; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=30"
  },
  {
    "text": "and those that also allow editing or creating content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=34"
  },
  {
    "text": "like Pages, Keynote, or Numbers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=38"
  },
  {
    "text": "This video focuses on improvements to viewer and editor apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=42"
  },
  {
    "text": "but some of the content discussed also applies to browser apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=45"
  },
  {
    "text": "iPadOS 17 introduces a new view controller that automatically enables ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=50"
  },
  {
    "text": "a large number of features in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=54"
  },
  {
    "text": "It works nicely together with the desktop-class iPad APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=58"
  },
  {
    "text": "introduced in iPadOS 16, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=61"
  },
  {
    "text": "and the existing document-centric APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=63"
  },
  {
    "text": "This new view controller is built in a modular way. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=67"
  },
  {
    "text": "You get great system defaults, but can customize any individual behavior.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=70"
  },
  {
    "text": "To catch up on desktop-class iPad APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=76"
  },
  {
    "text": "check out 'Meet desktop-class iPad' ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=79"
  },
  {
    "text": "and 'Build a desktop-class iPad app' from WWDC22.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=81"
  },
  {
    "text": "For SwiftUI development, DocumentGroup now has support ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=87"
  },
  {
    "text": "for all these features with no additional code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=90"
  },
  {
    "text": "To learn more about the SwiftUI side of this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=94"
  },
  {
    "text": "check out 'Build document-based apps in SwiftUI' from WWDC20 ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=96"
  },
  {
    "text": "and 'SwiftUI on iPad: Add toolbars, titles, and more' from WWDC22. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=101"
  },
  {
    "text": "In UIKit the functionality is opt-in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=108"
  },
  {
    "text": "UIDocumentViewController is a new base class for content view controllers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=111"
  },
  {
    "text": "It works together with UIDocument ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=116"
  },
  {
    "text": "to automatically configure the navigation bar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=118"
  },
  {
    "text": "This enables features like sharing, dragging the document, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=121"
  },
  {
    "text": "undo and redo support, and more. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=124"
  },
  {
    "text": "It also supports automatic renaming. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=127"
  },
  {
    "text": "In this video, you will learn how to use UIDocument ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=130"
  },
  {
    "text": "and how to present documents with UIDocumentViewController. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=133"
  },
  {
    "text": "I'll then explain which features are built-in, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=138"
  },
  {
    "text": "and how to customize them further. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=140"
  },
  {
    "text": "At the end I explore some best practices to migrate your existing apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=144"
  },
  {
    "text": "to take advantage of UIDocument. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=148"
  },
  {
    "text": "First up, creating a document.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=152"
  },
  {
    "text": "The core of every document based app is UIDocument. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=156"
  },
  {
    "text": "It's an abstract base class that is meant to be subclassed ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=160"
  },
  {
    "text": "for each file-type that your app supports. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=163"
  },
  {
    "text": "All UIDocuments are backed by a URL. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=166"
  },
  {
    "text": "Files on disk are the most common, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=169"
  },
  {
    "text": "but you can also save and load your documents using a database ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=171"
  },
  {
    "text": "and a custom URL scheme. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=174"
  },
  {
    "text": "UIDocument's load and save operations are asynchronous, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=177"
  },
  {
    "text": "which allows for lengthy read and write operations, if necessary. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=180"
  },
  {
    "text": "For this reason, UIDocument is thread safe ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=184"
  },
  {
    "text": "and takes care of coordinating access through locks and queues.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=186"
  },
  {
    "text": "When implementing a UIDocument subclass, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=192"
  },
  {
    "text": "there are two main responsibilities to take care of: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=194"
  },
  {
    "text": "loading and saving of the document, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=198"
  },
  {
    "text": "and providing access to the content of the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=200"
  },
  {
    "text": "Loading and saving is very similar across all documents. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=205"
  },
  {
    "text": "Accessing the content is more specific to the type of document ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=209"
  },
  {
    "text": "and how it is used in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=212"
  },
  {
    "text": "For example, a document model for a markdown editor ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=215"
  },
  {
    "text": "might only have a single text property; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=218"
  },
  {
    "text": "or it could expose a more complex interface ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=220"
  },
  {
    "text": "that allows updating individual parts of the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=223"
  },
  {
    "text": "Before we talk more about accessing the content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=227"
  },
  {
    "text": "let's talk about loading and saving. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=230"
  },
  {
    "text": "For simple, file based documents, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=233"
  },
  {
    "text": "there are two convenience methods you can override. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=235"
  },
  {
    "text": "When a document gets opened, 'loadFromContents:ofType:' ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=238"
  },
  {
    "text": "will be called with the contents of the file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=241"
  },
  {
    "text": "When the document is being saved, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=245"
  },
  {
    "text": "'contentsForType:' is called to get the current content of the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=247"
  },
  {
    "text": "The content of the document is a Data object for regular files, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=252"
  },
  {
    "text": "or a FileWrapper for everything else. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=255"
  },
  {
    "text": "To learn more about file types and how they work, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=259"
  },
  {
    "text": "check out the Tech Talk ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=261"
  },
  {
    "text": "'Uniform Type Identifiers -- a reintroduction'. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=262"
  },
  {
    "text": "For example here, the document deals with regular markdown files, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=266"
  },
  {
    "text": "so we expect a data object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=269"
  },
  {
    "text": "Now, if you want total control, overriding 'saveToURL:forSaveOperation:' ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=272"
  },
  {
    "text": "and 'readFromURL:' instead gives you full access to the URL ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=276"
  },
  {
    "text": "and leaves all reading and writing to you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=280"
  },
  {
    "text": "This is great if you want to store your documents in a database ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=283"
  },
  {
    "text": "or have special requirements for reading and writing your document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=286"
  },
  {
    "text": "Note that while the save operation is asynchronous, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=291"
  },
  {
    "text": "reading is expected to complete by the time the method returns. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=293"
  },
  {
    "text": "And this is all there is to loading and saving a document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=298"
  },
  {
    "text": "Now let's make sure we have a way to access the content of the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=302"
  },
  {
    "text": "An easy way to provide access to the document's content ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=306"
  },
  {
    "text": "is by adding properties for that content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=309"
  },
  {
    "text": "In this example, I add a single text property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=312"
  },
  {
    "text": "that contains the full markdown string. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=315"
  },
  {
    "text": "This property will be set when loading the document initially, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=318"
  },
  {
    "text": "as discussed on the previous slides. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=322"
  },
  {
    "text": "The app can then update this text ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=324"
  },
  {
    "text": "whenever the user edits the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=326"
  },
  {
    "text": "For UIDocument to know when it requires saving, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=329"
  },
  {
    "text": "call 'updateChangeCount:' every time a property updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=333"
  },
  {
    "text": "Calling 'updateChangeCount:' allows UIDocument to mark the document ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=337"
  },
  {
    "text": "as needs-saving and automatically save at appropriate times.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=341"
  },
  {
    "text": "Next, presenting a document with the new UIDocumentViewController.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=347"
  },
  {
    "text": "Similar to UIDocument, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=353"
  },
  {
    "text": "UIDocumentViewController also is an abstract base class ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=355"
  },
  {
    "text": "that is meant to be subclassed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=358"
  },
  {
    "text": "It manages opening, saving, and closing the document ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=361"
  },
  {
    "text": "and populates its navigation item with information from its associated document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=364"
  },
  {
    "text": "This includes the title, the navigation item's title menu, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=370"
  },
  {
    "text": "its UIDocumentProperties object, and the rename delegate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=373"
  },
  {
    "text": "UIDocumentViewController also provides key-commands for common actions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=378"
  },
  {
    "text": "like undo and redo. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=382"
  },
  {
    "text": "Let's check out how to implement a UIDocumentViewController subclass.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=384"
  },
  {
    "text": "There are two methods that are designed to be overridden by your subclass. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=390"
  },
  {
    "text": "When the document associated with the view controller gets opened, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=393"
  },
  {
    "text": "or when an already opened document gets assigned to the view controller, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=397"
  },
  {
    "text": "'documentDidOpen' is called. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=400"
  },
  {
    "text": "Populate the view controller's views to display the content of the document ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=403"
  },
  {
    "text": "in this method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=406"
  },
  {
    "text": "Note that there's no timing guarantee ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=409"
  },
  {
    "text": "between when 'documentDidOpen' is called ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=411"
  },
  {
    "text": "and when the view controller's view gets loaded. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=413"
  },
  {
    "text": "A good approach to write robust code is to move the view configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=416"
  },
  {
    "text": "in its own method and call it from both, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=420"
  },
  {
    "text": "'documentDidOpen' as well as 'viewDidLoad'. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=422"
  },
  {
    "text": "Check if the view is loaded and the document is opened, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=425"
  },
  {
    "text": "before configuring your views.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=428"
  },
  {
    "text": "The second method to override is 'navigationItemDidUpdate'. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=433"
  },
  {
    "text": "Whenever UIDocumentViewController makes changes to the navigation item, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=437"
  },
  {
    "text": "it will call this method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=441"
  },
  {
    "text": "Add your navigation item customization in there. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=444"
  },
  {
    "text": "'UIDocumentViewController' will make a best effort ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=447"
  },
  {
    "text": "to keep changes to a minimum to persist your changes as best as possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=450"
  },
  {
    "text": "UIDocumentViewController also offers a 'undoRedoItemGroup'. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=455"
  },
  {
    "text": "Put this group in the navigation bar if you want undo and redo buttons to appear, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=459"
  },
  {
    "text": "and make sure that your document has an undo manager assigned to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=463"
  },
  {
    "text": "UIDocumentViewController will change the 'hidden' property of this group ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=468"
  },
  {
    "text": "depending on the availability of an undo manager ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=471"
  },
  {
    "text": "and enable or disable the buttons inside the group as necessary.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=474"
  },
  {
    "text": "UIDocumentViewController automatically opens and closes the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=480"
  },
  {
    "text": "However if you need access to the document from outside the view controller, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=483"
  },
  {
    "text": "call 'openDocumentWithCompletionHandler'. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=487"
  },
  {
    "text": "UIDocumentViewController will make all the necessary callbacks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=491"
  },
  {
    "text": "such as calling 'documentDidOpen' ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=494"
  },
  {
    "text": "and call your completion handler when ready.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=496"
  },
  {
    "text": "Last but not least, UIDocumentViewController ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=501"
  },
  {
    "text": "provides a document property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=504"
  },
  {
    "text": "This property always refers to the document associated ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=506"
  },
  {
    "text": "with the view controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=509"
  },
  {
    "text": "While you can provide a document during initialization, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=512"
  },
  {
    "text": "it is entirely optional. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=514"
  },
  {
    "text": "When there is no document associated with the view controller, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=516"
  },
  {
    "text": "it will automatically show an empty state. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=519"
  },
  {
    "text": "To learn more about configuring empty states, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=522"
  },
  {
    "text": "check out \"What's new in UIKit\". ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=524"
  },
  {
    "text": "Furthermore, UIDocumentViewController can be used as your app’s root view controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=527"
  },
  {
    "text": "If there is no browser view controller in the hierarchy, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=533"
  },
  {
    "text": "UIDocumentViewController puts a document button in the navigation bar ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=535"
  },
  {
    "text": "that opens a document picker. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=539"
  },
  {
    "text": "This requires declaring the key 'UIDocumentClass' ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=543"
  },
  {
    "text": "for the relevant file type in your app's info.plist ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=546"
  },
  {
    "text": "and setting it to the UIDocument subclass matching that file type.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=549"
  },
  {
    "text": "In iPadOS 17, UIDocument conforms to 'UINavigationItemRenameDelegate' ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=555"
  },
  {
    "text": "and will handle the underlying file changes by itself ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=560"
  },
  {
    "text": "when the user invokes renaming from the title menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=563"
  },
  {
    "text": "If you are using UIDocumentViewController, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=567"
  },
  {
    "text": "it will automatically configure renaming for you, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=569"
  },
  {
    "text": "otherwise you can set the document ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=571"
  },
  {
    "text": "as the navigation item's rename delegate manually.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=573"
  },
  {
    "text": "These are all the pieces you need to create a great document-centric app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=578"
  },
  {
    "text": "in iPadOS 17. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=581"
  },
  {
    "text": "Next, how to migrate your existing apps.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=583"
  },
  {
    "text": "Migrating your app to make use of the new UIDocumentViewController is easy ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=588"
  },
  {
    "text": "and only requires three steps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=592"
  },
  {
    "text": "First, update the base class of your content view controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=595"
  },
  {
    "text": "Second, move existing code to the new callbacks. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=599"
  },
  {
    "text": "And third, delete code that is no longer necessary. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=604"
  },
  {
    "text": "Let's check out how to convert the markdown editor example ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=608"
  },
  {
    "text": "we use in the desktop-class iPad app videos. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=611"
  },
  {
    "text": "If you are not familiar with it, don't worry. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=615"
  },
  {
    "text": "I'll walk you through the relevant parts of the existing code first.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=617"
  },
  {
    "text": "So here we have the definition of the view controller at the top, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=622"
  },
  {
    "text": "the document property it defines, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=625"
  },
  {
    "text": "and an init method that sets the initial document ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=628"
  },
  {
    "text": "and then adds a callback to our document.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=631"
  },
  {
    "text": "First we change the base class to UIDocumentViewController.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=635"
  },
  {
    "text": "Now that this class inherits from UIDocumentViewController, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=641"
  },
  {
    "text": "we will get a compiler error because the property 'document' ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=644"
  },
  {
    "text": "already exists in the superclass with a different type. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=647"
  },
  {
    "text": "We change the name of that property to a more specific one, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=652"
  },
  {
    "text": "like 'markdownDocument'. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=654"
  },
  {
    "text": "Then we make it a computed property that casts the generic document property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=657"
  },
  {
    "text": "to the specific document class used in this view controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=661"
  },
  {
    "text": "The last bit in this code to take care of is the initializer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=666"
  },
  {
    "text": "The only code in there that we still need is assigning a callback to our document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=669"
  },
  {
    "text": "Since the document can change during the lifetime of this view controller, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=675"
  },
  {
    "text": "we move this to execute every time the document changes.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=678"
  },
  {
    "text": "An easy way to do this is to override the document property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=684"
  },
  {
    "text": "and add a didSet callback. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=687"
  },
  {
    "text": "Great, now that the base class is up to date, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=689"
  },
  {
    "text": "we need to take care of the new callbacks. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=692"
  },
  {
    "text": "In 'viewDidLoad' we add buttons to our navigation bar ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=696"
  },
  {
    "text": "and configure it to allow toolbar customization. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=699"
  },
  {
    "text": "For UIDocumentViewController ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=702"
  },
  {
    "text": "we move this to the new callback 'navigationItemDidUpdate'.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=704"
  },
  {
    "text": "Next, our class already has a method 'didOpenDocument'. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=709"
  },
  {
    "text": "This is almost what UIDocumentViewController has as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=715"
  },
  {
    "text": "We just need to rename the method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=718"
  },
  {
    "text": "and adjust for the fact that the document is now optional.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=719"
  },
  {
    "text": "All right, next the part that we all enjoy most: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=725"
  },
  {
    "text": "deleting code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=728"
  },
  {
    "text": "Editor view controller conforms to 'UINavigationItemRenameDelegate', ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=730"
  },
  {
    "text": "but we no longer need that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=735"
  },
  {
    "text": "UIDocument does all renaming for us automatically. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=737"
  },
  {
    "text": "So we remove the delegate definition, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=740"
  },
  {
    "text": "the delegate method with all its code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=742"
  },
  {
    "text": "and also the 'renameDelegate' assignment.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=745"
  },
  {
    "text": "Next we can remove a few more navigationItem customizations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=750"
  },
  {
    "text": "Both 'style' and 'backAction' are configured ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=755"
  },
  {
    "text": "by the document view controller automatically, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=757"
  },
  {
    "text": "so we can get rid of this completely.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=759"
  },
  {
    "text": "There is also a 'updateDocumentProperties' method ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=764"
  },
  {
    "text": "that is used to create a UIDocumentProperties object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=766"
  },
  {
    "text": "This method is called from various places. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=771"
  },
  {
    "text": "However, we don't need it anymore. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=773"
  },
  {
    "text": "UIDocumentViewController is doing all of this for us, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=775"
  },
  {
    "text": "so we can remove it and all its call sites. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=779"
  },
  {
    "text": "And that's all there is to do. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=783"
  },
  {
    "text": "The editor view controller is now only taking care of the features ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=785"
  },
  {
    "text": "that are unique to the app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=788"
  },
  {
    "text": "It no longer has to manage basic tasks of document management ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=789"
  },
  {
    "text": "or default configuration of the navigation bar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=793"
  },
  {
    "text": "Instead you can focus on the pieces that are unique, key elements of your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=796"
  },
  {
    "text": "This is all you need to know to take your document-centric apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=802"
  },
  {
    "text": "to the next level and provide your users with a great experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=805"
  },
  {
    "text": "Convert your data models to use UIDocument. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=810"
  },
  {
    "text": "Then convert your content view controller ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=813"
  },
  {
    "text": "to use the new UIDocumentViewController base class. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=815"
  },
  {
    "text": "After that, go through your view controller ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=819"
  },
  {
    "text": "and remove all the code that's no longer needed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=822"
  },
  {
    "text": "Thanks for watching. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=826"
  },
  {
    "text": "♪ ♪",
    "link": "https://developer.apple.com/videos/play/wwdc2023/10056/?time=827"
  }
]