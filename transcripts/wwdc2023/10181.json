[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=0"
  },
  {
    "text": "Hi! My name is Jackson. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=10"
  },
  {
    "text": "And I'm David. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=13"
  },
  {
    "text": "In this session, I will provide some background about HDR images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=14"
  },
  {
    "text": "and recently published standards in this area.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=17"
  },
  {
    "text": "Then I'll cover how to go about supporting these images in an app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=21"
  },
  {
    "text": "using new and existing APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=23"
  },
  {
    "text": "David will dive into the details of handling an HDR image pipeline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=27"
  },
  {
    "text": "and I will wrap up with some more advanced topics ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=31"
  },
  {
    "text": "around displaying high dynamic range content.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=33"
  },
  {
    "text": "Let's dive in with how HDR works.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=37"
  },
  {
    "text": "In the physical world, humans can perceive an enormous range of light levels, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=40"
  },
  {
    "text": "thanks to our eyes' ability to adapt.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=44"
  },
  {
    "text": "In contrast, a typical standard dynamic range, or SDR, display ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=47"
  },
  {
    "text": "can only produce a limited range of light. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=51"
  },
  {
    "text": "This means that when an image of a scene is captured, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=54"
  },
  {
    "text": "the wide range of light levels has to be somehow compressed ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=56"
  },
  {
    "text": "into the smaller SDR range.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=58"
  },
  {
    "text": "With a high dynamic range, or HDR, display, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=61"
  },
  {
    "text": "you can show a much greater range of light levels ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=64"
  },
  {
    "text": "without having to compress them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=66"
  },
  {
    "text": "This lets you display images that look more like the original scene ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=68"
  },
  {
    "text": "and are brighter and more vibrant.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=71"
  },
  {
    "text": "We've had the ability to capture high dynamic range for many years, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=74"
  },
  {
    "text": "but in the past, you would have had to take that captured range ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=77"
  },
  {
    "text": "and compress it into the SDR display range. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=80"
  },
  {
    "text": "Now, when displaying on an HDR display, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=83"
  },
  {
    "text": "you can render the scene more like it originally appeared.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=85"
  },
  {
    "text": "For example, in this image of a sunrise over a snow scene, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=89"
  },
  {
    "text": "there are areas that fall into a wide range ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=93"
  },
  {
    "text": "of real-world light levels. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=95"
  },
  {
    "text": "On an SDR display, you can only accurately represent ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=97"
  },
  {
    "text": "part of the scene. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=100"
  },
  {
    "text": "With an HDR display, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=101"
  },
  {
    "text": "you can represent much more of the scene without compromising contrast.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=103"
  },
  {
    "text": "So, having a display with an HDR range lets us render parts of a scene ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=108"
  },
  {
    "text": "brighter than the brightest SDR white.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=112"
  },
  {
    "text": "This is commonly referred to as headroom.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=114"
  },
  {
    "text": "In this paradigm, reference white is the brightest white ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=118"
  },
  {
    "text": "the SDR display would have produced. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=120"
  },
  {
    "text": "Anything above that point is headroom.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=122"
  },
  {
    "text": "In past talks, we introduced Extended Dynamic Range, or EDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=125"
  },
  {
    "text": "for interacting with content that can be rendered in the headroom ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=129"
  },
  {
    "text": "of an HDR-capable display.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=132"
  },
  {
    "text": "In the EDR paradigm, reference white is 1.0, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=135"
  },
  {
    "text": "and the peak is the maximum value the display can represent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=138"
  },
  {
    "text": "The HDR APIs I introduce today use EDR to implement a more complete pipeline ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=142"
  },
  {
    "text": "for high dynamic range content.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=147"
  },
  {
    "text": "If you want to learn more about EDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=149"
  },
  {
    "text": "check out the \"Explore HDR Rendering with EDR\" talk.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=151"
  },
  {
    "text": "Here is an example of HDR in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=155"
  },
  {
    "text": "This SDR image of a person sitting in front of a window looks good ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=157"
  },
  {
    "text": "when the white of the paper in the book is just under the reference white. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=161"
  },
  {
    "text": "Anything brighter, such as the window, gets rolled off or clipped.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=164"
  },
  {
    "text": "However, when you can display the image in HDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=169"
  },
  {
    "text": "you can show much more detail in the highlights ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=172"
  },
  {
    "text": "and retain contrast more reliably across the scene. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=174"
  },
  {
    "text": "This is the benefit you can get from supporting HDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=177"
  },
  {
    "text": "So why support HDR images? If you are building an app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=181"
  },
  {
    "text": "where user-created or provided content is important, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=184"
  },
  {
    "text": "supporting HDR will make that experience even better.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=186"
  },
  {
    "text": "HDR support is available on almost all Apple platforms, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=190"
  },
  {
    "text": "and we've introduced these APIs to ensure that you can take full advantage ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=193"
  },
  {
    "text": "of Apple's incredible display hardware.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=198"
  },
  {
    "text": "Another important reason to consider HDR support now ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=202"
  },
  {
    "text": "is that Apple has been working ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=205"
  },
  {
    "text": "with the International Standards Organization, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=206"
  },
  {
    "text": "through the Technical Committee for Photography, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=208"
  },
  {
    "text": "to publish a new technical specification for HDR images this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=211"
  },
  {
    "text": "This specification, TS22028-5, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=215"
  },
  {
    "text": "provides a structure for encoding HDR content ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=218"
  },
  {
    "text": "into existing still image formats without compromising quality.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=221"
  },
  {
    "text": "I will refer to HDR images that follow this ISO specification as \"ISO HDR\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=226"
  },
  {
    "text": "to avoid confusion with other forms of HDR such as HDR video, capture, or displays.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=231"
  },
  {
    "text": "Recalling our scale from earlier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=238"
  },
  {
    "text": "typical SDR images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=239"
  },
  {
    "text": "including sRGB and Display P3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=241"
  },
  {
    "text": "define black and white as 0.2 ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=243"
  },
  {
    "text": "and 80 candelas per meter squared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=246"
  },
  {
    "text": "ISO HDR, meanwhile, defines black ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=248"
  },
  {
    "text": "and a default reference white ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=251"
  },
  {
    "text": "as .0005 and 203 respectively. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=252"
  },
  {
    "text": "Everything above 203 is headroom.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=256"
  },
  {
    "text": "So what's in these new image files? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=260"
  },
  {
    "text": "The specification requires Hybrid Log-Gamma, HLG, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=263"
  },
  {
    "text": "or Perceptual Quantizer, PQ, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=266"
  },
  {
    "text": "as the encoding transfer function. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=269"
  },
  {
    "text": "These are functionally analogous to the gamma curves used in SDR images.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=271"
  },
  {
    "text": "The color primaries for ISO HDR files are the BT.2020 primaries. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=276"
  },
  {
    "text": "This a wide-gamut color space, until now only commonly used in video.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=280"
  },
  {
    "text": "To avoid issues with banding, HDR images are required to be 10 bits or more ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=285"
  },
  {
    "text": "per component. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=289"
  },
  {
    "text": "This means that some formats, like HEIF, can encode HDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=290"
  },
  {
    "text": "but some others, like traditional JPEG, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=294"
  },
  {
    "text": "are not able to be 22028-5 compliant, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=296"
  },
  {
    "text": "as they only support 8 bits per component. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=299"
  },
  {
    "text": "And for required metadata, both traditional ICC profiles ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=302"
  },
  {
    "text": "and CICP tags are valid. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=305"
  },
  {
    "text": "Together, these requirements define the new ISO HDR files.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=308"
  },
  {
    "text": "There are some additional optional metadata fields ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=312"
  },
  {
    "text": "associated with ISO HDR files that might be relevant to you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=314"
  },
  {
    "text": "The reference environment tag ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=318"
  },
  {
    "text": "defines the ambient conditions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=320"
  },
  {
    "text": "for the content reference condition.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=322"
  },
  {
    "text": "The diffuse white luminance defines ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=325"
  },
  {
    "text": "where the reference white falls for this content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=326"
  },
  {
    "text": "The default is the 203 I mentioned earlier.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=329"
  },
  {
    "text": "The scene-referred tag can be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=333"
  },
  {
    "text": "when HLG is the transfer curve. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=334"
  },
  {
    "text": "It defines whether the image content ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=336"
  },
  {
    "text": "is scene or display referred. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=338"
  },
  {
    "text": "The default value for this tag ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=340"
  },
  {
    "text": "is display referred.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=342"
  },
  {
    "text": "The mastering and content color volume tags ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=344"
  },
  {
    "text": "are common to existing HDR video ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=346"
  },
  {
    "text": "and define information ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=348"
  },
  {
    "text": "about the color ranges present in the image.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=349"
  },
  {
    "text": "Lastly, the content light level tag ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=352"
  },
  {
    "text": "provides information about the light level ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=354"
  },
  {
    "text": "of the scene in the image.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=356"
  },
  {
    "text": "For more information on ISO HDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=359"
  },
  {
    "text": "check out the specification on the ISO website.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=361"
  },
  {
    "text": "In addition to ISO HDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=364"
  },
  {
    "text": "I am very excited to tell you for the first time ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=366"
  },
  {
    "text": "how to access the best version of images captured on iPhone.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=369"
  },
  {
    "text": "Since 2020, trillions of iPhone images have been captured with additional data ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=373"
  },
  {
    "text": "that allows us to reconstruct an HDR representation from the SDR image. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=378"
  },
  {
    "text": "I call this type of HDR \"Gain Map HDR.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=382"
  },
  {
    "text": "Today, David and I will be showing you new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=387"
  },
  {
    "text": "for accessing this HDR representation in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=390"
  },
  {
    "text": "giving you the option of showing incredible HDR images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=393"
  },
  {
    "text": "from any generation of Gain Map HDR already in your Photos libraries.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=396"
  },
  {
    "text": "Now let's talk about how to use these new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=401"
  },
  {
    "text": "to incorporate HDR images into an app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=403"
  },
  {
    "text": "The APIs I'm going to show you are available in SwiftUI, UIKit, and AppKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=406"
  },
  {
    "text": "Let's take a look at the SwiftUI and the UIKit API.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=411"
  },
  {
    "text": "In this example, I have an ISO HDR image file accessible via URL, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=414"
  },
  {
    "text": "and I want to display it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=418"
  },
  {
    "text": "All I have to do is create a UIImage ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=420"
  },
  {
    "text": "and provide it to an Image View ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=423"
  },
  {
    "text": "along with the new allowedDynamicRange modifier to enable high dynamic range. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=424"
  },
  {
    "text": "It's that simple.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=429"
  },
  {
    "text": "Similarly, in a UIKit app, you can set the new UIImageView property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=432"
  },
  {
    "text": "\"preferredImageDynamicRange,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=436"
  },
  {
    "text": "and voila, an HDR result.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=437"
  },
  {
    "text": "The dynamic range properties include three options ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=441"
  },
  {
    "text": "for how to handle HDR content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=444"
  },
  {
    "text": "These properties work on SwiftUI Image, UIImage, and NSImage views.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=446"
  },
  {
    "text": "The high option lets the system know ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=451"
  },
  {
    "text": "that you want to display high dynamic range content ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=454"
  },
  {
    "text": "and lets us do the heavy lifting ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=456"
  },
  {
    "text": "of mapping that content onto the current display, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=458"
  },
  {
    "text": "including updating when the display state changes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=461"
  },
  {
    "text": "Note that if the image is not HDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=464"
  },
  {
    "text": "you will get the exact same experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=466"
  },
  {
    "text": "as without the dynamicRange flag. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=468"
  },
  {
    "text": "You can safely use these options with non-HDR content.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=470"
  },
  {
    "text": "The standard option disables high dynamic range rendering ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=474"
  },
  {
    "text": "and instead displays all content as SDR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=478"
  },
  {
    "text": "This means tone mapping content outside of the SDR range. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=481"
  },
  {
    "text": "This is also how images would be shown on displays that have no HDR capability.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=485"
  },
  {
    "text": "Last, the constrainedHigh option should be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=491"
  },
  {
    "text": "when you want to show some HDR ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=494"
  },
  {
    "text": "but not the full range of the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=496"
  },
  {
    "text": "Why would you want to show only some HDR, not all of it? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=498"
  },
  {
    "text": "Well, there are a few possible reasons.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=502"
  },
  {
    "text": "In this example, I have a Stack view containing thumbnails of many images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=505"
  },
  {
    "text": "Some of these images are HDR, and some are not.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=509"
  },
  {
    "text": "If I use the high DynamicRange option, this is what you'll get. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=512"
  },
  {
    "text": "Some images are very bright and HDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=516"
  },
  {
    "text": "but the SDR images are not and now look dull, maybe even inactive.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=519"
  },
  {
    "text": "Now let's use the constrainedHigh option. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=524"
  },
  {
    "text": "By limiting how much headroom the HDR content is allowed to use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=527"
  },
  {
    "text": "I make the film strip look much more consistent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=530"
  },
  {
    "text": "You can still tell HDR images apart from SDR ones, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=533"
  },
  {
    "text": "but I no longer have the problem that SDR images look gray or inactive.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=536"
  },
  {
    "text": "Another reason you might want to use constrainedHigh or standard ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=540"
  },
  {
    "text": "for a particular image view ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=543"
  },
  {
    "text": "is that HDR content can sometimes be very bright, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=545"
  },
  {
    "text": "and you might not want it to take attention away ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=548"
  },
  {
    "text": "from other aspects of your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=550"
  },
  {
    "text": "For example, here is a smaller image that, when displayed with full HDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=552"
  },
  {
    "text": "looks like the most important part of the app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=557"
  },
  {
    "text": "but is drawing attention away from important controls and information.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=559"
  },
  {
    "text": "Before I move on, you may have noticed ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=564"
  },
  {
    "text": "that there is no option here that does not involve tone mapping the image. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=566"
  },
  {
    "text": "If you are in a situation where you do not want to have the OS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=570"
  },
  {
    "text": "do the tone mapping for you, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=573"
  },
  {
    "text": "you will need to use a lower level API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=574"
  },
  {
    "text": "which I will discuss later in this session.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=577"
  },
  {
    "text": "An important aspect of HDR to keep in mind ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=580"
  },
  {
    "text": "is that it requires a pipeline ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=583"
  },
  {
    "text": "that does not clamp or otherwise degrade the HDR data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=584"
  },
  {
    "text": "The APIs we discuss today are all fully supported, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=588"
  },
  {
    "text": "but deprecated APIs may not have an HDR-safe pipeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=591"
  },
  {
    "text": "For example, if you are resizing images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=595"
  },
  {
    "text": "using the deprecated UIGraphicsBeginImageContextWithOptions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=598"
  },
  {
    "text": "you will lose HDR and wide-gamut color. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=602"
  },
  {
    "text": "This should be avoided when creating an HDR-capable app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=605"
  },
  {
    "text": "If you are trying to create a thumbnail, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=610"
  },
  {
    "text": "UIKit introduced a thumbnail API on UIImage in iOS 15. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=612"
  },
  {
    "text": "If you don't need precise sizing control, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=616"
  },
  {
    "text": "this is the recommended way to get an HDR thumbnail. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=618"
  },
  {
    "text": "If you need more control or need support prior to iOS 15, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=621"
  },
  {
    "text": "UIKit offers UIGraphicsImageRenderer.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=625"
  },
  {
    "text": "By using the imageRendererFormat, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=629"
  },
  {
    "text": "UIKit knows how to construct a renderer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=631"
  },
  {
    "text": "that won't cause the HDR information in the image to be lost when redrawing it.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=633"
  },
  {
    "text": "Let's take a look at one common way to get image data into an app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=637"
  },
  {
    "text": "PhotoKit provides interfaces for an app to access the Photos library. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=642"
  },
  {
    "text": "In my app, I've added a Photos Picker to my main view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=646"
  },
  {
    "text": "making it easy to access user-selected images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=649"
  },
  {
    "text": "Because the PhotosPicker may try to transcode images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=652"
  },
  {
    "text": "into a format that does not retain the HDR data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=655"
  },
  {
    "text": "I am going to use the \"current\" encoding policy ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=658"
  },
  {
    "text": "and the generic \"images\" matching type.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=661"
  },
  {
    "text": "For more information on how the Photos Picker works, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=664"
  },
  {
    "text": "check out the \"Embed the Photos picker in your app\" session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=666"
  },
  {
    "text": "With ISO HDR images, I can create a UIImage from the DataRepresentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=670"
  },
  {
    "text": "and use that directly with any of my image views with no extra code.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=675"
  },
  {
    "text": "If I'm supporting Gain Map HDR as well, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=680"
  },
  {
    "text": "I can use the new UIImageReader ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=683"
  },
  {
    "text": "to get the HDR representation when it's available. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=685"
  },
  {
    "text": "This API will return the HDR representation by default ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=688"
  },
  {
    "text": "when on an HDR display and the SDR version otherwise.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=691"
  },
  {
    "text": "The APIs we've discussed so far are not dependent on an image being HDR ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=696"
  },
  {
    "text": "or knowing that an image is HDR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=700"
  },
  {
    "text": "Recall that when you let an image view know ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=702"
  },
  {
    "text": "it should be showing high dynamic range, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=704"
  },
  {
    "text": "it doesn't matter if that image is HDR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=706"
  },
  {
    "text": "However, you may have a pipeline or app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=709"
  },
  {
    "text": "that wants to identify if an image is HDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=711"
  },
  {
    "text": "With UIKit, you can check the isHighDynamicRange property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=715"
  },
  {
    "text": "to determine if the contents are ISO HDR compatible.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=718"
  },
  {
    "text": "With AppKit, CoreGraphics, and CoreImage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=722"
  },
  {
    "text": "you will need to check the CGColorSpace of the image. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=725"
  },
  {
    "text": "The CGColorSpaceUsesITUR_2100TF function returns true for ISO HDR images.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=728"
  },
  {
    "text": "HDR images can use a wide range of headroom. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=737"
  },
  {
    "text": "For example, current iPhones produce images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=740"
  },
  {
    "text": "that use up to 8 times headroom. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=742"
  },
  {
    "text": "However, only some displays can show HDR, and not all HDR displays are the same.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=745"
  },
  {
    "text": "iPhone 14 can show HDR highlights ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=750"
  },
  {
    "text": "up to 8 times brighter than the reference white, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=753"
  },
  {
    "text": "while the 12.9\" iPad Pro and MacBook Pro can show up to 16 times, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=755"
  },
  {
    "text": "and the Pro XDR Display can show up to 400 times.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=760"
  },
  {
    "text": "Most other Apple displays can show up to 2 times headroom. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=765"
  },
  {
    "text": "However, this may not be enough for most HDR content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=767"
  },
  {
    "text": "There are also external displays ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=771"
  },
  {
    "text": "with HDR capability that are supported. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=773"
  },
  {
    "text": "There is not an exhaustive list of these displays available; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=776"
  },
  {
    "text": "however, there is an API for you to determine the capabilities ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=779"
  },
  {
    "text": "of the display your app is currently shown on.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=782"
  },
  {
    "text": "You can query the potentialEDRHeadroom on iOS and iPad OS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=786"
  },
  {
    "text": "and maximumPotentialExtendedDynamicRange- ColorComponentValue on macOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=790"
  },
  {
    "text": "to determine the capabilities of the display your app is appearing on.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=795"
  },
  {
    "text": "Before we move into more advanced topics, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=800"
  },
  {
    "text": "let's talk about when displaying HDR makes sense. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=802"
  },
  {
    "text": "As I've discussed, HDR looks great ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=806"
  },
  {
    "text": "and you should consider including support for it ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=808"
  },
  {
    "text": "when showing images is a major part of your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=810"
  },
  {
    "text": "But it can be distracting some times. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=813"
  },
  {
    "text": "So if you don't think you need the extra pop that HDR can give you, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=816"
  },
  {
    "text": "consider using constrainedHigh or standard options.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=819"
  },
  {
    "text": "Let's recap. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=823"
  },
  {
    "text": "You now know how to identify ISO HDR images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=824"
  },
  {
    "text": "display HDR images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=827"
  },
  {
    "text": "access ISO HDR and Gain Map HDR from the Photos Library, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=830"
  },
  {
    "text": "and how to determine whether your display is HDR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=834"
  },
  {
    "text": "Now David will walk you through reading, writing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=837"
  },
  {
    "text": "and manipulating HDR images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=840"
  },
  {
    "text": "Thank you, Jackson. When working with HDR images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=842"
  },
  {
    "text": "there are a few common operations that your app is likely to support: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=845"
  },
  {
    "text": "reading ISO HDR or Gain Map HDR images from a file or data into memory; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=850"
  },
  {
    "text": "modifying images in memory while retaining HDR content; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=856"
  },
  {
    "text": "converting from one image class to another without losing HDR; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=861"
  },
  {
    "text": "and finally, writing an HDR image to an ISO HDR file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=865"
  },
  {
    "text": "A critical property of a functional HDR image pipeline ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=869"
  },
  {
    "text": "is that image objects have an associated color space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=872"
  },
  {
    "text": "For example, both CGImage and CIImage objects ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=876"
  },
  {
    "text": "use the CGColorSpace API for this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=879"
  },
  {
    "text": "Images can have a variety of supported color spaces, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=882"
  },
  {
    "text": "but an ISO HDR image will have a CGColorSpace ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=885"
  },
  {
    "text": "that is either ITUR 2100 HLG or PQ.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=888"
  },
  {
    "text": "With that in mind, lets start with how to read ISO HDR images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=894"
  },
  {
    "text": "UIImage and NSImage now automatically support reading ISO HDR images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=898"
  },
  {
    "text": "ColorSync, Apple's color management infrastructure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=904"
  },
  {
    "text": "will handle the HDR ICC profiles ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=907"
  },
  {
    "text": "and provide image objects suitable for display.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=909"
  },
  {
    "text": "When reading Gain Map HDR images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=914"
  },
  {
    "text": "you can request an HDR representation ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=916"
  },
  {
    "text": "by creating a UIImageReader configuration that prefers High Dynamic Range. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=919"
  },
  {
    "text": "Note that this new behavior only impacts Gain Map HDR images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=925"
  },
  {
    "text": "Just like with NSImage and UIImage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=929"
  },
  {
    "text": "Core Image automatically supports reading ISO HDR files. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=932"
  },
  {
    "text": "All you need to do is use the CIImage contentsOfURL API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=937"
  },
  {
    "text": "The resulting CIImage object will automatically contain ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=941"
  },
  {
    "text": "the correct recipe to convert from the file's color space ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=944"
  },
  {
    "text": "to the Core Image extended-range working space.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=948"
  },
  {
    "text": "You can inspect the image object's recipe ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=952"
  },
  {
    "text": "by using Xcode's QuickLook feature when debugging your code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=954"
  },
  {
    "text": "In this example, the QuickLook popover shows that the image is converted ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=958"
  },
  {
    "text": "from the PQ ISO HDR color space.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=962"
  },
  {
    "text": "Your code can also get the .colorspace property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=967"
  },
  {
    "text": "to inspect the color space of the file.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=969"
  },
  {
    "text": "This may be an SDR color space, such as sRGB or Display P3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=972"
  },
  {
    "text": "or an HDR color space.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=976"
  },
  {
    "text": "If you prefer to use the CoreGraphics API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=979"
  },
  {
    "text": "then you can get the equivalent behavior ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=982"
  },
  {
    "text": "by using CGImageSourceCreateImageAtIndex ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=984"
  },
  {
    "text": "with the new decodeRequest key set to decodeToHDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=987"
  },
  {
    "text": "A few minutes ago, Jackson described why you might want to limit HDR images to SDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=993"
  },
  {
    "text": "Similarly, apps using Core Image may want to override its automatic HDR support ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=999"
  },
  {
    "text": "to ensure images are tone mapped to SDR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1004"
  },
  {
    "text": "This can be useful when you want to avoid using HDR for certain scenarios, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1008"
  },
  {
    "text": "such as feature detection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1013"
  },
  {
    "text": "To enable this, you simply need to provide the toneMapHDRtoSDR option ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1014"
  },
  {
    "text": "when creating the CIImage.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1020"
  },
  {
    "text": "In this case, the returned CIImage object will contain a recipe step ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1023"
  },
  {
    "text": "that tone maps the HDR source into SDR range ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1027"
  },
  {
    "text": "before any other operations are applied.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1030"
  },
  {
    "text": "Note that this option only has an effect if the image has an HDR color space.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1034"
  },
  {
    "text": "The resulting CIImage will look the same as specifying that an image view ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1040"
  },
  {
    "text": "should use the dynamicRange.standard option. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1044"
  },
  {
    "text": "Also, this has the equivalent behavior ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1048"
  },
  {
    "text": "to using CGImageSourceCreateImageAtIndex ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1050"
  },
  {
    "text": "with decodeRequest set to decodeToSDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1053"
  },
  {
    "text": "Traditionally, Gain Map HDR images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1058"
  },
  {
    "text": "would display the full dynamic range in the Photos app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1060"
  },
  {
    "text": "but only the SDR representation was available to APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1064"
  },
  {
    "text": "such as Core Image and ImageIO. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1068"
  },
  {
    "text": "I am really excited to describe new API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1070"
  },
  {
    "text": "that will allow your application to access the full range of Gain Map HDR images.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1073"
  },
  {
    "text": "The API is super simple to use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1080"
  },
  {
    "text": "Just provide the expandToHDR option when initializing the CIImage.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1082"
  },
  {
    "text": "In this case, the returned CIImage object ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1088"
  },
  {
    "text": "will contain a recipe that combines the primary image ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1090"
  },
  {
    "text": "with the gain map to produce an HDR image.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1094"
  },
  {
    "text": "The image's .colorspace property will be an HDR color space ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1099"
  },
  {
    "text": "when a photo library contains ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1102"
  },
  {
    "text": "the additional gain map data to support this.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1104"
  },
  {
    "text": "This behavior is equivalent to using CGImageSourceCreateImageAtIndex ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1107"
  },
  {
    "text": "with the decodeRequest key set to decodeToHDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1112"
  },
  {
    "text": "These options will also work with RAW files, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1117"
  },
  {
    "text": "which I will now talk about in more detail.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1120"
  },
  {
    "text": "ProRAW images from iPhones and RAW images from cameras ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1124"
  },
  {
    "text": "are a flexible image format ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1127"
  },
  {
    "text": "that gives significant creative control to a photographer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1129"
  },
  {
    "text": "This includes the ability to render parts of a scene into HDR headroom. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1132"
  },
  {
    "text": "Many RAW formats contain plenty of dynamic range ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1137"
  },
  {
    "text": "and simply need to be processed into an unconstrained form. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1140"
  },
  {
    "text": "Let me describe how this works.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1144"
  },
  {
    "text": "First, if your application just wants to show ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1146"
  },
  {
    "text": "the default SDR look for a RAW file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1149"
  },
  {
    "text": "create an image from a URL as usual.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1152"
  },
  {
    "text": "But if your application just wants to show the default HDR rendering look, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1155"
  },
  {
    "text": "all you need to do is add the new expandToHDR option.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1159"
  },
  {
    "text": "However, if your app wants to unlock the full functionality of RAWs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1164"
  },
  {
    "text": "then your code should create a CIRAWFilter from the URL.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1168"
  },
  {
    "text": "If you just ask that filter for its output image, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1173"
  },
  {
    "text": "you will get a CIImage with the default look. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1176"
  },
  {
    "text": "But the key advantage of this API is that a filter can be easily modified.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1179"
  },
  {
    "text": "Each CIRAWFilter instance has several properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1185"
  },
  {
    "text": "that your app can change to alter the output image. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1188"
  },
  {
    "text": "These properties are well described ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1192"
  },
  {
    "text": "in the \"Capture and process ProRAW images\" session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1194"
  },
  {
    "text": "but let's review one that is especially relevant ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1197"
  },
  {
    "text": "to this HDR discussion.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1199"
  },
  {
    "text": "The amount of dynamic range for a RAW image ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1203"
  },
  {
    "text": "can be adjusted to any value from 0 to 1. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1205"
  },
  {
    "text": "The extendedDynamicRangeAmount property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1209"
  },
  {
    "text": "is analogous to the viewDynamicRange controls that Jackson described earlier.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1211"
  },
  {
    "text": "The default value of this property is 0, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1217"
  },
  {
    "text": "which indicates that the output image should be SDR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1219"
  },
  {
    "text": "The maximum value of this property is 1, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1223"
  },
  {
    "text": "which indicates that the output image ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1225"
  },
  {
    "text": "should use the most of the headroom present in the file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1227"
  },
  {
    "text": "That wraps up the various ways to read ISO HDR images.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1231"
  },
  {
    "text": "Next, lets discuss some recommendations for how to modify HDR images.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1235"
  },
  {
    "text": "Core Image provides a powerful and flexible API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1241"
  },
  {
    "text": "for working with HDR images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1244"
  },
  {
    "text": "because it contains over 150 built-in filters ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1245"
  },
  {
    "text": "that support HDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1249"
  },
  {
    "text": "All of these filters can either generate or process images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1252"
  },
  {
    "text": "that contain HDR content.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1255"
  },
  {
    "text": "All of these filters just work because the Core Image working color space ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1258"
  },
  {
    "text": "is unclamped and linear, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1263"
  },
  {
    "text": "which allows RGB values outside the 0 to 1 range.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1264"
  },
  {
    "text": "As you develop your app, you can check if a given filter supports HDR.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1270"
  },
  {
    "text": "To do this, you create an instance of a filter, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1275"
  },
  {
    "text": "then ask the filter's attributes for its categories, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1278"
  },
  {
    "text": "and then check if the array contains the category high dynamic range.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1282"
  },
  {
    "text": "Please see the \"Display EDR content ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1287"
  },
  {
    "text": "with Core Image, Metal, and SwiftUI\" session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1289"
  },
  {
    "text": "for more information on built-in CI filters and custom CI kernels. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1291"
  },
  {
    "text": "Next, lets discuss writing an HDR image to an ISO HDR file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1297"
  },
  {
    "text": "Often, your app will want to write image objects in memory ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1301"
  },
  {
    "text": "to a new file representation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1305"
  },
  {
    "text": "Traditionally, using the UIImage, jpegData, and pngData API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1307"
  },
  {
    "text": "would save an 8-bit precision SDR image.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1311"
  },
  {
    "text": "New this year, UIImage can automatically write ISO HDR images ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1315"
  },
  {
    "text": "using either 16-bit PNG or 10-bit HEIF format ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1319"
  },
  {
    "text": "when an object contains HDR content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1323"
  },
  {
    "text": "It will also convert to ISO HDR ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1326"
  },
  {
    "text": "if the original image was a Gain Map HDR image.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1329"
  },
  {
    "text": "Similarly, Core Image can write an HDR PNG file ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1333"
  },
  {
    "text": "when you specify a HDR color space ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1337"
  },
  {
    "text": "and call writePNGRepresentationOfImage requesting the RGBA16 format.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1340"
  },
  {
    "text": "Or Core Image can write an HDR TIFF file when you specify an HDR color space ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1346"
  },
  {
    "text": "and call writeTIFFRepresentationOfImage requesting the RGBA16 format.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1352"
  },
  {
    "text": "Note that both PNG and TIFF use lossless compression ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1358"
  },
  {
    "text": "and will result in much larger file sizes.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1361"
  },
  {
    "text": "As a result, the best practice is to write a HEIF file ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1365"
  },
  {
    "text": "using writeHEIF10RepresentationOfImage and specify an HDR color space.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1368"
  },
  {
    "text": "There may be occasions where you need to convert from one framework class ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1374"
  },
  {
    "text": "to another or one color space to another.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1378"
  },
  {
    "text": "The process to convert between the image classes ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1382"
  },
  {
    "text": "UIImage, CIImage, CGImage, IOSurface, and CVPixelBuffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1384"
  },
  {
    "text": "remain largely the same. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1390"
  },
  {
    "text": "That said, here are a few things to look out for ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1392"
  },
  {
    "text": "when working with an HDR pipeline.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1394"
  },
  {
    "text": "Let's first discuss converting to IOSurface or CVPixelBuffer objects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1398"
  },
  {
    "text": "This image type is useful because, for example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1403"
  },
  {
    "text": "it can be used as the contents of a CALayer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1406"
  },
  {
    "text": "Also, it can hold bi-planar chroma subsampled images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1409"
  },
  {
    "text": "which is very memory efficient. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1412"
  },
  {
    "text": "Before you use a CVPixelBuffer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1414"
  },
  {
    "text": "be sure to declare that it has ISO HDR compatible content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1417"
  },
  {
    "text": "The first step is to create the pixel buffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1421"
  },
  {
    "text": "with an appropriate format such as 10-bit biplanar full range.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1423"
  },
  {
    "text": "While you are at it, for best performance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1428"
  },
  {
    "text": "be sure to specify that the buffer should be surface-backed ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1430"
  },
  {
    "text": "by providing the IOSurfacePropertiesKey.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1433"
  },
  {
    "text": "Next, be sure to add attachments to the CVPixelBuffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1437"
  },
  {
    "text": "so that the system knows that it contains ISO HDR compatible color space properties.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1440"
  },
  {
    "text": "Once you have a CVPixelBuffer, converting it to a CIImage is trivial. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1445"
  },
  {
    "text": "Just call the CIImage withCVPixelBuffer API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1449"
  },
  {
    "text": "And you can convert from a CIImage to a CVPixelBuffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1453"
  },
  {
    "text": "by using a CIContext to render to the buffer.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1456"
  },
  {
    "text": "Moving along, there are several situations ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1461"
  },
  {
    "text": "where your app may want to convert ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1463"
  },
  {
    "text": "between Core Image and the CGImageRef API.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1464"
  },
  {
    "text": "If you want this conversion to preserve HDR content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1469"
  },
  {
    "text": "you should choose an HDR color space ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1472"
  },
  {
    "text": "and request a deep pixel format such as RGBA16 or RGBAh format.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1475"
  },
  {
    "text": "And new this year, CoreImage added the RGB10 format, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1483"
  },
  {
    "text": "which is deep but uses half the memory.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1487"
  },
  {
    "text": "Converting a CIImage to a CGImage is very convenient, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1490"
  },
  {
    "text": "given that CGImages are supported in a wide variety of APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1493"
  },
  {
    "text": "But be aware that doing so is not recommended ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1498"
  },
  {
    "text": "for best performance of user-interactive rendering. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1500"
  },
  {
    "text": "For the fastest performance, it is best to have CoreImage ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1503"
  },
  {
    "text": "render directly to an MTKView or via a PixelBuffer to a CALayer.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1507"
  },
  {
    "text": "Speaking of CALayers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1513"
  },
  {
    "text": "let's return to Jackson to learn more about lower-level APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1514"
  },
  {
    "text": "you might need for more complex workflows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1518"
  },
  {
    "text": "Thanks, David! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1521"
  },
  {
    "text": "CALayers are a powerful tool when you need the best rendering performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1522"
  },
  {
    "text": "or more control over how your content is composited into your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1526"
  },
  {
    "text": "To enable HDR rendering on CALayers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1530"
  },
  {
    "text": "you can now set the wantsExtendedDynamicRangeContent property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1532"
  },
  {
    "text": "This is similar to the property used by CAMetalLayers ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1537"
  },
  {
    "text": "to enable displaying content in the headroom of your display.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1540"
  },
  {
    "text": "The key difference between these two methods ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1544"
  },
  {
    "text": "is that the CALayer property enables tone mapping of the layer contents, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1546"
  },
  {
    "text": "while the CAMetalLayer does not. What does this mean in practice? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1550"
  },
  {
    "text": "This image and plot show content with 10 times headroom. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1554"
  },
  {
    "text": "When it is rendered to a display with at least 10 times headroom available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1558"
  },
  {
    "text": "both layers behave identically. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1562"
  },
  {
    "text": "Lets assume now that the the display only has 5 times headroom available.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1564"
  },
  {
    "text": "In the CAMetalLayer case, the image data above 5 times ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1569"
  },
  {
    "text": "will be clamped to what the display can show, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1573"
  },
  {
    "text": "resulting in a sharp discontinuity in the image.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1575"
  },
  {
    "text": "In the CALayer case, the image will be tone mapped to avoid that discontinuity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1579"
  },
  {
    "text": "The exact tone mapping algorithm used ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1583"
  },
  {
    "text": "depends on the transfer curve used with that image. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1586"
  },
  {
    "text": "For more information about these algorithms, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1589"
  },
  {
    "text": "you can refer to the ITU standards for HLG and PQ.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1591"
  },
  {
    "text": "CALayers provide a fast and simple way to get HDR content onto the screen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1596"
  },
  {
    "text": "while CAMetalLayers give you the freedom to create your own tone mapping pipeline.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1600"
  },
  {
    "text": "To directly use CALayer to render HDR, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1606"
  },
  {
    "text": "you must use one of these available classes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1609"
  },
  {
    "text": "An object of type CGImage, CVPixelBuffer, or IOSurface ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1611"
  },
  {
    "text": "that is tagged appropriately as ISO HDR ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1615"
  },
  {
    "text": "will be rendered and tone mapped by the CALayer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1618"
  },
  {
    "text": "If you want to use the CALayer directly ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1621"
  },
  {
    "text": "and aren't using one of these classes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1623"
  },
  {
    "text": "you can use one of the methods David described to convert to them.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1625"
  },
  {
    "text": "When working with an HDR workflow, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1629"
  },
  {
    "text": "it's important to use the correct pixel formats. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1631"
  },
  {
    "text": "These pixel formats are safe to use when handling HDR data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1634"
  },
  {
    "text": "16 and 32-bit float formats always support high dynamic range. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1638"
  },
  {
    "text": "16-bit integer formats will also work for supporting HDR content ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1642"
  },
  {
    "text": "in appropriate file formats and contexts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1646"
  },
  {
    "text": "Finally, there are 10-bit pixel formats that you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1649"
  },
  {
    "text": "when memory and file size are important. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1652"
  },
  {
    "text": "This is the default bit depth for most compressed ISO HDR images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1654"
  },
  {
    "text": "There are also CoreGraphics flags ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1659"
  },
  {
    "text": "when creating a CGImage that can be used for HDR content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1660"
  },
  {
    "text": "Like the previous list, you can use float, half float, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1664"
  },
  {
    "text": "16-bit integer, and 10-bit RGB.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1667"
  },
  {
    "text": "One final important topic when introducing new functionality like this ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1670"
  },
  {
    "text": "is backwards compatibility. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1674"
  },
  {
    "text": "What can you do to support older versions of iOS and macOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1676"
  },
  {
    "text": "when dealing with HDR images? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1679"
  },
  {
    "text": "For ISO HDR images, CoreImage provides the toneMapHDRtoSDR option ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1681"
  },
  {
    "text": "to convert HDR to SDR. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1686"
  },
  {
    "text": "Similarly, when rendering using a CoreGraphics CGContext, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1689"
  },
  {
    "text": "you can target an SDR CGColorspace, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1692"
  },
  {
    "text": "and the image will be tone mapped to that space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1695"
  },
  {
    "text": "For Gain Map HDR, use version checks to gate ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1698"
  },
  {
    "text": "when the new expandToHDR options are used. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1701"
  },
  {
    "text": "When these options are omitted, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1704"
  },
  {
    "text": "the SDR version of the file will always be loaded instead of the HDR version.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1705"
  },
  {
    "text": "To wrap up, we've introduced new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1710"
  },
  {
    "text": "for reading, writing, and displaying HDR images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1712"
  },
  {
    "text": "showed you how to access Gain Map HDR representations, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1715"
  },
  {
    "text": "and given you APIs for working with a fully HDR-capable pipeline.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1718"
  },
  {
    "text": "We can't wait to see the amazing things you make with HDR! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1724"
  },
  {
    "text": "together: Thanks for watching! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1728"
  },
  {
    "text": "",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10181/?time=1730"
  }
]