[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=0"
  },
  {
    "text": "Hi there, I'm Kevin Tulod, a software engineer on the tvOS team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=10"
  },
  {
    "text": "And I'm Somesh Ganesh, an engineer on the Core Audio team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=15"
  },
  {
    "text": "In this session, we'll discuss bringing camera and microphone support ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=19"
  },
  {
    "text": "to your tvOS app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=23"
  },
  {
    "text": "tvOS 17 introduces Continuity Camera and Mic to Apple TV. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=25"
  },
  {
    "text": "Now you can stream camera and mic data from your iPhone or iPad ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=30"
  },
  {
    "text": "to use as inputs on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=33"
  },
  {
    "text": "This opens up whole new genres of apps and experiences for the big screen. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=36"
  },
  {
    "text": "Most apps on tvOS generally fall into two categories: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=40"
  },
  {
    "text": "content playback apps, like movie and TV show streaming, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=44"
  },
  {
    "text": "and games.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=48"
  },
  {
    "text": "Continuity Camera enables you to build completely new apps for tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=50"
  },
  {
    "text": "like content creation apps that record video and audio, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=55"
  },
  {
    "text": "or social apps like video conferencing and live streaming.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=58"
  },
  {
    "text": "You can even integrate the camera and mic to existing streaming apps and games ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=63"
  },
  {
    "text": "to create completely new features that weren't possible ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=67"
  },
  {
    "text": "in earlier versions of tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=70"
  },
  {
    "text": "This functionality enables a diverse set of apps for TV, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=72"
  },
  {
    "text": "and I'm going to show you how to bring Continuity Camera and Mic ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=76"
  },
  {
    "text": "to your tvOS app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=79"
  },
  {
    "text": "Last year, macOS Ventura introduced Continuity Camera ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=82"
  },
  {
    "text": "to use your iPhone as a webcam. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=85"
  },
  {
    "text": "You simply bring your phone close to your Mac, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=87"
  },
  {
    "text": "and the camera and mic become available as input devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=90"
  },
  {
    "text": "If you're not already familiar with Continuity Camera on macOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=93"
  },
  {
    "text": "check out the session on this topic from WWDC 2022.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=97"
  },
  {
    "text": "In this session, I'll first start with an overview of the APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=102"
  },
  {
    "text": "your app can now adopt on tvOS to access cameras and microphones. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=105"
  },
  {
    "text": "Next, I'll dive into how your app can adopt Continuity Camera in tvOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=110"
  },
  {
    "text": "to use iPhone or iPad as a camera and mic.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=114"
  },
  {
    "text": "I'll then briefly discuss how to build a great app experience on tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=118"
  },
  {
    "text": "highlighting the similarities and differences ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=122"
  },
  {
    "text": "when compared to developing for other platforms. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=124"
  },
  {
    "text": "Finally, Somesh will discuss ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=127"
  },
  {
    "text": "the microphone APIs you can use in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=129"
  },
  {
    "text": "for a wide range of complex audio needs.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=131"
  },
  {
    "text": "Let's start with an overview of capture device APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=135"
  },
  {
    "text": "AVFoundation, AVFAudio, and AudioToolbox ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=140"
  },
  {
    "text": "give you access to the camera and mic for capturing video and audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=143"
  },
  {
    "text": "Let's review how an app can use capture devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=147"
  },
  {
    "text": "specifically with AVFoundation's AVCapture family of classes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=149"
  },
  {
    "text": "First, apps use AVCaptureDevices and AVCaptureDeviceInputs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=154"
  },
  {
    "text": "which represent cameras and microphones. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=158"
  },
  {
    "text": "These plug into an AVCaptureSession, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=161"
  },
  {
    "text": "which is the main object for all things related to capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=163"
  },
  {
    "text": "AVCaptureOutputs render data from inputs in various ways. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=167"
  },
  {
    "text": "You can use these to record movies and snap photos, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=171"
  },
  {
    "text": "access the camera and mic buffers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=174"
  },
  {
    "text": "or get other metadata from the input devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=176"
  },
  {
    "text": "To display a live camera feed in UI, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=180"
  },
  {
    "text": "you can use AVCaptureVideoPreviewLayer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=182"
  },
  {
    "text": "This is a special type of output that subclasses CALayer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=185"
  },
  {
    "text": "And data flows from the capture inputs to compatible outputs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=189"
  },
  {
    "text": "through AVCaptureConnections. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=192"
  },
  {
    "text": "These capture APIs are available on iOS, macOS, and now tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=194"
  },
  {
    "text": "starting with tvOS 17.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=199"
  },
  {
    "text": "If you're new to developing using AVFoundation's capture capabilities, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=202"
  },
  {
    "text": "you can learn more at the Capture Setup start page on developer.apple.com. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=206"
  },
  {
    "text": "tvOS now also supports the same camera and microphone APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=210"
  },
  {
    "text": "that are offered on iOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=214"
  },
  {
    "text": "If you already have a camera or mic app built for iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=216"
  },
  {
    "text": "most of your code will just work on tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=219"
  },
  {
    "text": "but there are a few APIs and coding practices that differ.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=222"
  },
  {
    "text": "Since Apple TVs do not have built-in AV inputs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=226"
  },
  {
    "text": "your app will need to adopt Device Discovery ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=229"
  },
  {
    "text": "before you can use the camera and mic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=231"
  },
  {
    "text": "This is to ensure that your app can handle edge cases ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=234"
  },
  {
    "text": "like when Continuity devices appear and disappear.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=237"
  },
  {
    "text": "There are also a few nuances to app bringup on tvOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=241"
  },
  {
    "text": "that differ from iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=244"
  },
  {
    "text": "and we'll go over those considerations for the best tvOS app experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=245"
  },
  {
    "text": "Since the same camera and microphone APIs from iOS are now available on tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=250"
  },
  {
    "text": "I'm going to walk you through bringing tvOS support to an existing iOS app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=255"
  },
  {
    "text": "I have a simple camera and mic app that's already built for iOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=260"
  },
  {
    "text": "The app has a basic UI ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=264"
  },
  {
    "text": "that accesses the camera and mic to capture photos ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=265"
  },
  {
    "text": "or record video and audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=268"
  },
  {
    "text": "Throughout this session, I'll be bringing tvOS support to this app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=270"
  },
  {
    "text": "using the new Continuity Camera and Mic APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=273"
  },
  {
    "text": "Let's take a look at how it's built.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=276"
  },
  {
    "text": "In Xcode, I'll open up the ContentView, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=279"
  },
  {
    "text": "which is where the app's UI is defined. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=281"
  },
  {
    "text": "Here the app specifies the position of basic UI elements we see on the screen. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=284"
  },
  {
    "text": "Most important is the CameraPreview view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=289"
  },
  {
    "text": "which connects to an AVCaptureVideoPreviewLayer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=291"
  },
  {
    "text": "to display the live camera preview behind all of the other UI elements.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=294"
  },
  {
    "text": "Next is the CaptureSession class, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=300"
  },
  {
    "text": "which wraps several of the AVCaptureSession classes ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=302"
  },
  {
    "text": "from AVFoundation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=305"
  },
  {
    "text": "This class has a property for an AVCaptureSession, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=307"
  },
  {
    "text": "which is used to control which capture input is selected ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=310"
  },
  {
    "text": "and where the data is output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=313"
  },
  {
    "text": "In this case, the output is the AVCaptureVideoPreviewLayer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=315"
  },
  {
    "text": "that's displayed in the ContentView.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=319"
  },
  {
    "text": "The CaptureSession class also has a function to set the active video input. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=322"
  },
  {
    "text": "In this function, the app validates the selected input, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=327"
  },
  {
    "text": "configures the AVCaptureSession, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=332"
  },
  {
    "text": "and starts the session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=335"
  },
  {
    "text": "This begins the flow of data from the AVCaptureDevice ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=337"
  },
  {
    "text": "to the preview layer that's displayed in the ContentView.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=340"
  },
  {
    "text": "All of these AVCapture APIs are now also available on tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=343"
  },
  {
    "text": "so I'll go ahead and add tvOS as a supported OS for the app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=348"
  },
  {
    "text": "I'm now selecting the project in the Project Navigator, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=354"
  },
  {
    "text": "highlighting the app's target, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=357"
  },
  {
    "text": "and adding Apple TV as a supported destination.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=360"
  },
  {
    "text": "At this point, the app can build and run on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=366"
  },
  {
    "text": "However, since there are no input devices available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=369"
  },
  {
    "text": "the app wouldn't do very much. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=372"
  },
  {
    "text": "This brings us to Continuity Camera, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=374"
  },
  {
    "text": "starting with the process of finding a capture device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=376"
  },
  {
    "text": "and selecting it for use on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=378"
  },
  {
    "text": "Before doing anything related to AVCapture, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=382"
  },
  {
    "text": "your app should ensure that it has permissions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=384"
  },
  {
    "text": "to use the video and audio capture devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=386"
  },
  {
    "text": "This gives your app the opportunity ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=389"
  },
  {
    "text": "to explain why it needs access to these devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=391"
  },
  {
    "text": "and users can accept or deny access. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=394"
  },
  {
    "text": "Remember to set the camera and microphone usage keys in your Info.plist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=396"
  },
  {
    "text": "This description is displayed to the user when prompted for authorization.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=400"
  },
  {
    "text": "You may be used to building apps for a user's personal device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=405"
  },
  {
    "text": "like an iPhone or iPad, that has built-in cameras. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=408"
  },
  {
    "text": "Apple TV, however, is a communal device shared by multiple people ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=411"
  },
  {
    "text": "with their own iCloud account. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=415"
  },
  {
    "text": "To enable the best experience on a communal device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=417"
  },
  {
    "text": "anybody with a compatible device, including guests, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=419"
  },
  {
    "text": "can use their device as a Continuity Camera.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=422"
  },
  {
    "text": "This means users can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=426"
  },
  {
    "text": "the recording features of your app at home, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=427"
  },
  {
    "text": "at a friend's house, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=429"
  },
  {
    "text": "or even a shared space like a vacation rental. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=430"
  },
  {
    "text": "It also means that cameras may appear or disappear from the system at any time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=433"
  },
  {
    "text": "and your app should be able to handle these cases.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=438"
  },
  {
    "text": "AVKit now provides a new view controller ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=441"
  },
  {
    "text": "called AVContinuityDevicePickerViewController. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=444"
  },
  {
    "text": "You can use this controller to select an eligible continuity device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=447"
  },
  {
    "text": "to use as a camera and mic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=450"
  },
  {
    "text": "This view controller lists all users that are signed in to the Apple TV ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=452"
  },
  {
    "text": "and lets them connect their device for Continuity Camera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=456"
  },
  {
    "text": "There is also a way for guests to pair to Apple TV ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=460"
  },
  {
    "text": "to use their iOS devices for Continuity Camera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=462"
  },
  {
    "text": "When accessing capture devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=466"
  },
  {
    "text": "your app should first check if there are any available for use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=468"
  },
  {
    "text": "If one is available, you can start using the capture devices ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=471"
  },
  {
    "text": "to start a capture session and send data to any of the AVCaptureOutputs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=474"
  },
  {
    "text": "If there are none available, use the device picker ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=478"
  },
  {
    "text": "to present the relevant UI to the user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=481"
  },
  {
    "text": "This guides them through the process of sharing their device's camera and mic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=484"
  },
  {
    "text": "Once a device is selected, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=488"
  },
  {
    "text": "the view controller will call a delegate callback ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=489"
  },
  {
    "text": "to let you know a device has appeared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=492"
  },
  {
    "text": "You can then validate the availability of that device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=494"
  },
  {
    "text": "and continue with starting the capture session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=496"
  },
  {
    "text": "Behind the scenes, tvOS and iOS work together to establish this connection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=499"
  },
  {
    "text": "When a selection is made, tvOS will ping that user's eligible devices ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=504"
  },
  {
    "text": "within close proximity to the Apple TV and prompt for a confirmation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=508"
  },
  {
    "text": "The user can then accept the connection on any of the notified devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=513"
  },
  {
    "text": "At that point, the camera and microphone become available to use in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=517"
  },
  {
    "text": "and camera and mic data can start streaming.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=521"
  },
  {
    "text": "To present the device picker in your SwiftUI app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=525"
  },
  {
    "text": "AVKit provides the continuityDevicePicker modifier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=528"
  },
  {
    "text": "which is new to tvOS 17, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=531"
  },
  {
    "text": "to present the picker. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=533"
  },
  {
    "text": "Its presentation state is updated by a state variable, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=535"
  },
  {
    "text": "just like other content-presenting view modifiers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=538"
  },
  {
    "text": "When a device is selected and becomes available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=542"
  },
  {
    "text": "the picker dismisses and calls the callback with an AVContinuityDevice. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=544"
  },
  {
    "text": "This object has references to the AVCaptureDevices ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=548"
  },
  {
    "text": "that are associated with a given physical device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=551"
  },
  {
    "text": "like an iPhone or iPad.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=554"
  },
  {
    "text": "The device picker can also be presented in UIKit apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=558"
  },
  {
    "text": "using AVContinuityDevicePickerViewController. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=561"
  },
  {
    "text": "This view controller takes a delegate that provides optional lifecycle events ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=564"
  },
  {
    "text": "and a callback for when an AVContinuityDevice is selected ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=569"
  },
  {
    "text": "and becomes available. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=572"
  },
  {
    "text": "When such a device becomes available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=574"
  },
  {
    "text": "capture devices will also get published to other device listeners, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=576"
  },
  {
    "text": "such as AVCaptureDeviceDiscoverySession or any KVO observers on AVCaptureDevice. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=579"
  },
  {
    "text": "Remember that on tvOS, the only capture device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=586"
  },
  {
    "text": "is a Continuity Camera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=589"
  },
  {
    "text": "This means that your app will have to handle cases ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=590"
  },
  {
    "text": "where a camera and mic transition from unavailable to available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=592"
  },
  {
    "text": "and vice versa. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=596"
  },
  {
    "text": "Across all platforms, AVCaptureDevice.systemPreferredCamera ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=598"
  },
  {
    "text": "allows you to access the most suitable available camera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=602"
  },
  {
    "text": "This API is now available on tvOS and functions in exactly the same way.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=605"
  },
  {
    "text": "This property will update based on camera availability. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=611"
  },
  {
    "text": "Since only one Continuity Camera can be connected to Apple TV at a time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=614"
  },
  {
    "text": "a nil value means there are no cameras available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=618"
  },
  {
    "text": "and a non-nil value means there is a Continuity Camera available. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=620"
  },
  {
    "text": "You can use key-value observing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=625"
  },
  {
    "text": "to monitor changes to the systemPreferredCamera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=626"
  },
  {
    "text": "And on tvOS, connected capture devices will be of type continuityCamera.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=629"
  },
  {
    "text": "When key-value observing the systemPreferredCamera property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=636"
  },
  {
    "text": "your app can reevaluate the state it should be in based on camera availability. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=639"
  },
  {
    "text": "When cameras become available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=644"
  },
  {
    "text": "you can start an AVCaptureSession to start recording video or audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=645"
  },
  {
    "text": "When cameras become unavailable, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=650"
  },
  {
    "text": "you should perform any necessary teardown from a previous capture session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=651"
  },
  {
    "text": "indicate to the user that the device is no longer available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=655"
  },
  {
    "text": "and give them the option to connect a new one. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=658"
  },
  {
    "text": "Once a Continuity Camera is connected to Apple TV, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=661"
  },
  {
    "text": "your app can access many of the existing camera capture APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=664"
  },
  {
    "text": "For example, you can use AVCaptureMetadataOutput ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=668"
  },
  {
    "text": "to get per-frame video metadata, such as any detected faces or bodies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=672"
  },
  {
    "text": "You can capture high-resolution photos using AVCapturePhotoOutput, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=677"
  },
  {
    "text": "record movies with video and audio with AVCaptureMovieFileOutput, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=682"
  },
  {
    "text": "and monitor video effects or control the camera properties like zoomFactor. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=686"
  },
  {
    "text": "There are so many more camera APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=691"
  },
  {
    "text": "that are now available on tvOS with Continuity Camera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=693"
  },
  {
    "text": "You can refer to previous videos that dive deep ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=696"
  },
  {
    "text": "into advanced camera capture features and techniques. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=699"
  },
  {
    "text": "Those are the tvOS-specific APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=702"
  },
  {
    "text": "your app would need to adopt to discover and select Continuity Capture devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=705"
  },
  {
    "text": "Let's bring this functionality to the app we're working on.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=709"
  },
  {
    "text": "Back in Xcode, in the ContentView, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=714"
  },
  {
    "text": "we know we need a state variable on tvOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=716"
  },
  {
    "text": "to control the presentation state of the device picker. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=719"
  },
  {
    "text": "I'll go ahead and add the state variable, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=722"
  },
  {
    "text": "and make sure it's only used on tvOS using compiler guards.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=724"
  },
  {
    "text": "At the bottom of the ContentView, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=732"
  },
  {
    "text": "I'll create a tvOS-only extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=734"
  },
  {
    "text": "to handle Continuity-Camera- specific logic.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=736"
  },
  {
    "text": "I'll then add a computed variable ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=743"
  },
  {
    "text": "to create a button that shows the device picker ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=745"
  },
  {
    "text": "by toggling the state variable we added.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=747"
  },
  {
    "text": "Next, I'll add a callback handler ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=756"
  },
  {
    "text": "that will be called when a Continuity Camera is connected. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=758"
  },
  {
    "text": "Once connected, this sets the camera as the active video input, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=761"
  },
  {
    "text": "which, in turn, starts the capture session.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=765"
  },
  {
    "text": "Finally, I'll add a method that activates a Continuity Camera ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=772"
  },
  {
    "text": "in case one is already connected.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=776"
  },
  {
    "text": "Now let's start adding to the UI.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=783"
  },
  {
    "text": "In the view body, I'll add the device picker button into my view.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=790"
  },
  {
    "text": "I'll then add the continuityDevicePicker view modifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=798"
  },
  {
    "text": "and connect it to the state variable and the callback function added earlier.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=801"
  },
  {
    "text": "Finally, I'll add a task that attempts to activate a connected Continuity device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=812"
  },
  {
    "text": "if one is already connected.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=816"
  },
  {
    "text": "And those are all of the code changes needed to bring tvOS support ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=826"
  },
  {
    "text": "to an existing iOS camera app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=829"
  },
  {
    "text": "Now let's run it on the Apple TV to see what it looks like.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=832"
  },
  {
    "text": "The app launches to the basic UI, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=838"
  },
  {
    "text": "but without a camera feed, since I haven't yet connected a camera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=840"
  },
  {
    "text": "I'll go ahead and select the button I added to bring up the device picker.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=843"
  },
  {
    "text": "This gives me options for connecting a camera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=848"
  },
  {
    "text": "I'll go ahead and select Justin's user ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=850"
  },
  {
    "text": "and follow the instructions to pair.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=853"
  },
  {
    "text": "And Continuity Camera is connected! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=864"
  },
  {
    "text": "Here's what the tvOS version of this app looks like ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=866"
  },
  {
    "text": "using the same shared code as iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=869"
  },
  {
    "text": "with only a few minor changes to add device discovery on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=871"
  },
  {
    "text": "There were no changes to the existing usage of the camera APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=875"
  },
  {
    "text": "I can even go ahead and snap a photo, just like in the iOS app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=878"
  },
  {
    "text": "And that's Continuity Camera on tvOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=887"
  },
  {
    "text": "If you're adapting an existing app to tvOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=893"
  },
  {
    "text": "or just getting started with tvOS development, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=895"
  },
  {
    "text": "I want to quickly recap some nuances on the platform.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=897"
  },
  {
    "text": "The most prominent difference on tvOS is user interaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=902"
  },
  {
    "text": "tvOS has no direct touch events. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=905"
  },
  {
    "text": "Users interact with the system using the focus engine ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=908"
  },
  {
    "text": "by way of swipes, directional arrow presses, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=910"
  },
  {
    "text": "and other buttons on the remote.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=913"
  },
  {
    "text": "As a communal device, tvOS can be used by multiple people ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=915"
  },
  {
    "text": "and supports multiple users and guests. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=919"
  },
  {
    "text": "This means your app may need to handle personal information ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=921"
  },
  {
    "text": "differently than other platforms. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=924"
  },
  {
    "text": "Finally, tvOS has unique file storage policies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=927"
  },
  {
    "text": "This is especially important if you are writing a content creation app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=930"
  },
  {
    "text": "that records video or audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=934"
  },
  {
    "text": "Let's go into more detail.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=936"
  },
  {
    "text": "Remember that disk space is a shared resource. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=938"
  },
  {
    "text": "The main consumers of disk space are: ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=941"
  },
  {
    "text": "the operating system, which cannot be removed; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=943"
  },
  {
    "text": "frameworks and app binaries, some of which can be offloaded if the setting is on; ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=946"
  },
  {
    "text": "and the majority of the space is used as a cache for temporary data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=951"
  },
  {
    "text": "tvOS apps are mostly built for content consumption, like streaming, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=955"
  },
  {
    "text": "which requires a very large available cache. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=959"
  },
  {
    "text": "Keeping with this disk space model ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=962"
  },
  {
    "text": "helps ensure the best user experience across all tvOS apps.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=963"
  },
  {
    "text": "On iOS, you can store data persistently using FileManager ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=969"
  },
  {
    "text": "and writing to the .documentDirectory path. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=972"
  },
  {
    "text": "Use of this API this is not recommended on tvOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=975"
  },
  {
    "text": "The OS does not allow persistent storage of large files. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=981"
  },
  {
    "text": "While available in the headers, uses of .documentDirectory will fail ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=985"
  },
  {
    "text": "with a runtime error. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=988"
  },
  {
    "text": "Instead, when building for tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=990"
  },
  {
    "text": "your app should only use the .cachesDirectory.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=992"
  },
  {
    "text": "Data in this directory will be available while your app is running. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=997"
  },
  {
    "text": "However, it is possible that this data will be purged from disk ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1000"
  },
  {
    "text": "in between app launches. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1003"
  },
  {
    "text": "For that reason, it's a good idea to offload your data elsewhere ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1005"
  },
  {
    "text": "as soon as possible, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1009"
  },
  {
    "text": "like uploading it to the cloud, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1010"
  },
  {
    "text": "and deleting it when it's no longer needed on disk. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1011"
  },
  {
    "text": "There are other file storage options available on tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1014"
  },
  {
    "text": "which has some interesting multi-user use cases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1017"
  },
  {
    "text": "For example, you can store your app data in iCloud using CloudKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1020"
  },
  {
    "text": "even on a per-user basis. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1024"
  },
  {
    "text": "We've covered storage options for multiple users on tvOS in the past ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1026"
  },
  {
    "text": "and encourage you to refer to those videos for more information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1030"
  },
  {
    "text": "If you're new to tvOS development, check out the Planning your tvOS app page ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1034"
  },
  {
    "text": "on developer.apple.com, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1038"
  },
  {
    "text": "which goes through the different features and considerations to keep in mind ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1040"
  },
  {
    "text": "when developing for Apple TV. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1043"
  },
  {
    "text": "And that's how you can build a great tvOS app experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1046"
  },
  {
    "text": "with the new Continuity Camera and Device Discovery APIs in tvOS 17. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1049"
  },
  {
    "text": "Now let's talk about the various microphone capabilities ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1054"
  },
  {
    "text": "you can access in tvOS 17. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1057"
  },
  {
    "text": "Apps will have the ability to use a microphone on tvOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1060"
  },
  {
    "text": "for the first time ever! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1063"
  },
  {
    "text": "Let's dive right into what you'd need to do in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1065"
  },
  {
    "text": "to take advantage of this functionality. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1068"
  },
  {
    "text": "Here's an overview of the changes made this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1071"
  },
  {
    "text": "There are additions to Audio Session in the AVFAudio framework on tvOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1075"
  },
  {
    "text": "Like on iOS, Audio Session is the system level interface ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1080"
  },
  {
    "text": "where you communicate how you intend to use audio in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1084"
  },
  {
    "text": "For example, you sign up for and handle notifications like interruptions ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1088"
  },
  {
    "text": "or route changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1092"
  },
  {
    "text": "and set the category and mode of your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1094"
  },
  {
    "text": "The full suite of recording APIs has also been brought over from iOS to tvOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1097"
  },
  {
    "text": "These include recording APIs in the AVFAudio ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1103"
  },
  {
    "text": "as well as the AudioToolbox framework. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1105"
  },
  {
    "text": "Let's start with Audio Session.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1108"
  },
  {
    "text": "With tvOS 17, apps will be able to use a few different microphone devices ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1111"
  },
  {
    "text": "on the Apple TV. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1115"
  },
  {
    "text": "This could either be a Continuity Microphone ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1117"
  },
  {
    "text": "like an iPhone or iPad, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1119"
  },
  {
    "text": "or Bluetooth devices like AirPods or other headsets ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1121"
  },
  {
    "text": "which can be directly paired to the tvOS device.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1125"
  },
  {
    "text": "The way you can recognize the type of input device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1129"
  },
  {
    "text": "is via the AVAudioSessionPort type.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1131"
  },
  {
    "text": "After going through the Device Discovery flow, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1135"
  },
  {
    "text": "you can get access to an AVContinuityDevice ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1137"
  },
  {
    "text": "which has an audioSessionPorts property.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1140"
  },
  {
    "text": "Information about the audio device, including its port type, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1143"
  },
  {
    "text": "can be queried from this property.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1147"
  },
  {
    "text": "There's now a new port type for the Continuity Microphone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1151"
  },
  {
    "text": "and it is recommended to use this port as an identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1154"
  },
  {
    "text": "if you want to do anything specific in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1157"
  },
  {
    "text": "based on the type of input device.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1160"
  },
  {
    "text": "This flow, however, will only work for iPhones and iPads ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1163"
  },
  {
    "text": "which fall under an AVContinuityDevice.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1166"
  },
  {
    "text": "You can also continue using existing Audio Session API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1171"
  },
  {
    "text": "to query the available inputs on a system.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1175"
  },
  {
    "text": "The existing port type for an AirPods or Bluetooth mic ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1178"
  },
  {
    "text": "has been carried over from iOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1182"
  },
  {
    "text": "Building on top of capture device availability, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1184"
  },
  {
    "text": "now let's talk about microphone device availability ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1187"
  },
  {
    "text": "and how you need to monitor it on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1189"
  },
  {
    "text": "The Apple TV does not have a built-in mic, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1193"
  },
  {
    "text": "and your app is never guaranteed to always have access to a mic device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1195"
  },
  {
    "text": "To this end, the InputAvailable property in Audio Session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1200"
  },
  {
    "text": "now has key value observable support ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1204"
  },
  {
    "text": "for you to monitor when there is a mic device available to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1206"
  },
  {
    "text": "and when there are none.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1210"
  },
  {
    "text": "It is highly recommend to listen to this property ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1213"
  },
  {
    "text": "for any dynamic changes to mic availability. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1215"
  },
  {
    "text": "This could also help determine your timing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1219"
  },
  {
    "text": "to activate your Audio Session and start I/O, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1221"
  },
  {
    "text": "as well as handling your app's state ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1224"
  },
  {
    "text": "when a mic device shows up or vanishes from the system.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1226"
  },
  {
    "text": "Next, similar to iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1230"
  },
  {
    "text": "the recording permissions API are now available on tvOS 17 ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1233"
  },
  {
    "text": "for you to check whether a user has already granted your app access to the mic ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1237"
  },
  {
    "text": "and, if not, request recording permission.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1243"
  },
  {
    "text": "It is recommend for an app to ensure having permissions to record ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1246"
  },
  {
    "text": "to avoid failures while starting I/O.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1249"
  },
  {
    "text": "Last but not least in Audio Session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1254"
  },
  {
    "text": "categories and modes that support input ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1256"
  },
  {
    "text": "like the category for playAndRecord ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1258"
  },
  {
    "text": "and modes like voice chat and video chat, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1260"
  },
  {
    "text": "are now available on tvOS as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1263"
  },
  {
    "text": "You can refer to our header, AVAudioSessionTypes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1266"
  },
  {
    "text": "to help you determine which audio session category and mode suits your app best. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1269"
  },
  {
    "text": "And those are all the Audio Session changes new to tvOS 17. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1274"
  },
  {
    "text": "Now, let's talk about the diverse set of recording APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1279"
  },
  {
    "text": "and their recommended use cases.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1282"
  },
  {
    "text": "First up, AVAudioRecorder.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1285"
  },
  {
    "text": "This is the simplest way to record to an audio file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1288"
  },
  {
    "text": "and if all you need to do is record whatever comes into the microphone ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1291"
  },
  {
    "text": "for a non-real-time use case, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1295"
  },
  {
    "text": "AVAudioRecorder is your go-to option. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1297"
  },
  {
    "text": "It can be configured with a variety of encoding formats, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1300"
  },
  {
    "text": "a specific file format, sample rate, et cetera.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1303"
  },
  {
    "text": "Next, we have AVCapture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1307"
  },
  {
    "text": "As mentioned by Kevin, you can leverage the existing iOS AVCapture API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1310"
  },
  {
    "text": "to get access to the mic for basic recording use cases ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1314"
  },
  {
    "text": "if both the camera and mic are at play. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1318"
  },
  {
    "text": "Moving on to AVAudioEngine.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1321"
  },
  {
    "text": "AVAudioEngine supports both recording and playback ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1324"
  },
  {
    "text": "for simple as well as complex audio processing use cases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1327"
  },
  {
    "text": "An example of this could be a karaoke app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1332"
  },
  {
    "text": "where you can analyze your user's voice input from their mic ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1335"
  },
  {
    "text": "and mix this mic input with your playback track.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1338"
  },
  {
    "text": "Now, there are some cases where an app might want to directly interact ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1342"
  },
  {
    "text": "with the real-time audio I/O cycle. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1346"
  },
  {
    "text": "AVAudioEngine provides a real-time interface as well.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1348"
  },
  {
    "text": "Apps can provide real-time safe-render callbacks ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1353"
  },
  {
    "text": "via the AVAudioSinkNode and AVAudioSourceNode.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1355"
  },
  {
    "text": "You can also get access to voice processing capabilities ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1360"
  },
  {
    "text": "with AVAudioEngine. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1363"
  },
  {
    "text": "For apps dealing with low-level interfaces, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1365"
  },
  {
    "text": "the corresponding iOS mechanisms have also been brought over to tvOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1367"
  },
  {
    "text": "For non-real-time recording use cases, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1373"
  },
  {
    "text": "you can reach out for AudioQueue. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1375"
  },
  {
    "text": "To interact directly with the real-time audio I/O cycle, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1377"
  },
  {
    "text": "you can use the audio units AU RemoteIO and AU VoiceIO ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1381"
  },
  {
    "text": "via existing AudioUnit APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1385"
  },
  {
    "text": "If you'd like more detailed information about these APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1388"
  },
  {
    "text": "I'd recommend checking out the Developer website ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1391"
  },
  {
    "text": "for the AVFAudio and Audio Toolbox frameworks.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1393"
  },
  {
    "text": "Now, if you require a mic stream ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1398"
  },
  {
    "text": "where the playback from the Apple TV needs to be echo cancelled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1400"
  },
  {
    "text": "in a conferencing use case, for example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1404"
  },
  {
    "text": "it is highly recommend to opt in to our voice processing APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1406"
  },
  {
    "text": "Let's talk about why. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1410"
  },
  {
    "text": "Compared to a standard echo cancelation problem, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1412"
  },
  {
    "text": "let's say on an iPhone ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1415"
  },
  {
    "text": "where the recording and playback happens on the same device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1417"
  },
  {
    "text": "here's everything that's new in the tvOS setup. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1421"
  },
  {
    "text": "With a Continuity Microphone enabled route, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1424"
  },
  {
    "text": "the recording takes place on an iPhone or iPad. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1427"
  },
  {
    "text": "The playback however, is streamed on a tvOS device ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1430"
  },
  {
    "text": "and could be played out of any arbitrary set of TV speakers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1433"
  },
  {
    "text": "home theater setups, sound bars, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1437"
  },
  {
    "text": "or even a pair of stereo HomePods, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1440"
  },
  {
    "text": "most of which have the ability ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1442"
  },
  {
    "text": "to playback rich formats like 5.1 and 7.1 LPCM ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1444"
  },
  {
    "text": "and run their own flavors of audio processing ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1448"
  },
  {
    "text": "to enhance the user's experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1451"
  },
  {
    "text": "Along with this, in a general Apple TV setting, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1454"
  },
  {
    "text": "a user could be several feet away from the mic device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1457"
  },
  {
    "text": "and this mic device could be much closer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1460"
  },
  {
    "text": "to these loud playback devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1463"
  },
  {
    "text": "All these scenarios set up a very challenging echo control problem ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1466"
  },
  {
    "text": "where we'd want to cancel out ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1471"
  },
  {
    "text": "all the playback from the Apple TV ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1472"
  },
  {
    "text": "while capturing audio from the local environment ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1474"
  },
  {
    "text": "in high quality. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1476"
  },
  {
    "text": "To help you overcome all these challenges, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1478"
  },
  {
    "text": "tvOS 17 now has new voice processing and echo cancelation technology in place. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1481"
  },
  {
    "text": "You can take advantage of this by simply adopting existing iOS APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1486"
  },
  {
    "text": "now available on tvOS as well, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1491"
  },
  {
    "text": "in AVAudioEngine, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1494"
  },
  {
    "text": "where you'd only need to call setVoiceProcessingEnabled ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1495"
  },
  {
    "text": "on the inputNode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1498"
  },
  {
    "text": "You can also get access to this via the AU VoiceIO audio unit ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1500"
  },
  {
    "text": "using the VoiceProcessingIO subtype. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1504"
  },
  {
    "text": "For more details on our voice processing APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1507"
  },
  {
    "text": "and the capabilities they offer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1510"
  },
  {
    "text": "please refer to our session ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1512"
  },
  {
    "text": "What's new in Voice Processing? ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1513"
  },
  {
    "text": "And that's all the audio APIs that are new to tvOS 17 this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1515"
  },
  {
    "text": "Now, let's go back to our app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1520"
  },
  {
    "text": "and look at how to leverage some of this microphone functionality in it.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1522"
  },
  {
    "text": "Back in Xcode, I'll open up my AudioCapturer class.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1527"
  },
  {
    "text": "This class abstracts all the nuances of the underlying audio APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1534"
  },
  {
    "text": "from the rest of the app code.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1538"
  },
  {
    "text": "It has its own instance of AVAudioEngine, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1541"
  },
  {
    "text": "which is the recording API I'm going to use in this instance.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1544"
  },
  {
    "text": "It also has its own shared instance of Audio Session.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1551"
  },
  {
    "text": "And this is a quick insight into what this class does. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1557"
  },
  {
    "text": "On a high level, it sets up the Audio Session category and mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1560"
  },
  {
    "text": "before activation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1564"
  },
  {
    "text": "sets up the underlying AVAudioEngine with the correct formats...",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1567"
  },
  {
    "text": "And sets voice processing on the input node, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1574"
  },
  {
    "text": "with a user-controllable toggle to bypass it.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1576"
  },
  {
    "text": "I'm running the engine in a non-real-time context in this example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1582"
  },
  {
    "text": "Now, let's look at what I need to do to modify this for tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1586"
  },
  {
    "text": "This iOS app builds as is for tvOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1591"
  },
  {
    "text": "assuming a mic device is always available. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1594"
  },
  {
    "text": "What I'd need to do is add an observer ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1598"
  },
  {
    "text": "to listen to the inputAvailable KVO notification ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1600"
  },
  {
    "text": "to make sure I have an input mic device available ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1603"
  },
  {
    "text": "before starting my Audio Session and subsequently starting I/O. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1606"
  },
  {
    "text": "I'll go ahead and add that here.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1611"
  },
  {
    "text": "I also need to make sure that I handle the app's state ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1619"
  },
  {
    "text": "when the mic device shows up or vanishes from the system, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1621"
  },
  {
    "text": "which could be a user simply disconnecting their phone ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1625"
  },
  {
    "text": "from the Apple TV while in session.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1628"
  },
  {
    "text": "This should now work well on my Apple TV. Let's see it in action! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1635"
  },
  {
    "text": "Here, I'm in the audio mode of my app now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1642"
  },
  {
    "text": "I can press play to playback a song ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1645"
  },
  {
    "text": "and then go ahead and record myself talking.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1647"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1651"
  },
  {
    "text": "Wow, this song is so groovy! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1655"
  },
  {
    "text": "I always feel like dancing when I listen to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1657"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1659"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1667"
  },
  {
    "text": "That was fun! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1668"
  },
  {
    "text": "Now, in the voice processing mode which we've been in, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1670"
  },
  {
    "text": "this song played out of the Apple TV will get canceled, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1673"
  },
  {
    "text": "leaving us with audio only from the local environment ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1677"
  },
  {
    "text": "being sent to the app.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1680"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1683"
  },
  {
    "text": "Wow, this song is so groovy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1684"
  },
  {
    "text": "I always feel like dancing when I listen to it.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1686"
  },
  {
    "text": "And that's echo cancellation on tvOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1693"
  },
  {
    "text": "And that's a wrap! Let's recap what we've gone through. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1697"
  },
  {
    "text": "We introduced the feature on a high level ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1701"
  },
  {
    "text": "and talked about the new genre of apps it unlocks on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1703"
  },
  {
    "text": "We then discussed the new Device Discovery API ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1707"
  },
  {
    "text": "for presenting a device picker and selecting a continuity device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1710"
  },
  {
    "text": "We reviewed the camera and microphone APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1714"
  },
  {
    "text": "available now to use on tvOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1717"
  },
  {
    "text": "And finally, we adapted an existing camera and microphone app ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1719"
  },
  {
    "text": "to build for tvOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1723"
  },
  {
    "text": "sharing as much of the code as possible ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1724"
  },
  {
    "text": "and only adding Device Discovery. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1726"
  },
  {
    "text": "We also recapped on some tvOS-specific considerations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1729"
  },
  {
    "text": "We're so excited for you to bring camera and microphone support ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1733"
  },
  {
    "text": "to your tvOS app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1737"
  },
  {
    "text": "We can't wait to see the apps you'll develop on this platform ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1738"
  },
  {
    "text": "with this functionality! ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1741"
  },
  {
    "text": "Thank you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1743"
  },
  {
    "text": "",
    "link": "https://developer.apple.com/videos/play/wwdc2023-10256/?time=1744"
  }
]