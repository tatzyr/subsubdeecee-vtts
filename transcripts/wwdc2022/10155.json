[
  {
    "text": "♪ Mellow instrumental hip-hop music ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=0"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=3"
  },
  {
    "text": "Meng Yang: Hi, my name is Meng Yang, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=10"
  },
  {
    "text": "an engineer from GPU Software here at Apple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=12"
  },
  {
    "text": "Today I am going cover a few advanced topics ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=15"
  },
  {
    "text": "about ScreenCaptureKit and how it can take ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=19"
  },
  {
    "text": "your app's screen sharing experience to the next level. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=21"
  },
  {
    "text": "Later, my colleague Drew will demonstrate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=26"
  },
  {
    "text": "this exciting new API in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=28"
  },
  {
    "text": "Screen capture is at the heart of screen sharing applications ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=32"
  },
  {
    "text": "such as Zoom, Google Meet, SharePlay ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=37"
  },
  {
    "text": "and even popular game streaming services like Twitch, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=41"
  },
  {
    "text": "which have become the new norm of how we work, study, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=46"
  },
  {
    "text": "collaborate, and socialize over the past few years. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=50"
  },
  {
    "text": "ScreenCaptureKit is a brand-new, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=55"
  },
  {
    "text": "high-performance screen capture framework ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=58"
  },
  {
    "text": "built from ground up with a powerful feature set. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=60"
  },
  {
    "text": "The rich set of features includes highly customizable ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=65"
  },
  {
    "text": "content control that allows you to easily pick and then choose ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=70"
  },
  {
    "text": "any combination of windows, applications, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=74"
  },
  {
    "text": "and displays to capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=78"
  },
  {
    "text": "Ability to capture up to the screen content's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=81"
  },
  {
    "text": "native resolution and frame rate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=84"
  },
  {
    "text": "Dynamic stream property controls like resolution, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=88"
  },
  {
    "text": "frame rate, pixel format. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=92"
  },
  {
    "text": "And these controls can be modified on the fly ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=94"
  },
  {
    "text": "without recreating the stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=97"
  },
  {
    "text": "Capture buffers that are GPU memory-backed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=100"
  },
  {
    "text": "to reduce memory copies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=104"
  },
  {
    "text": "Hardware-accelerated content capture, scaling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=107"
  },
  {
    "text": "pixel and color format conversion ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=111"
  },
  {
    "text": "to achieve high-performance capture with reduced CPU usage. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=113"
  },
  {
    "text": "Last but not least, support for both video and audio capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=119"
  },
  {
    "text": "Before getting started, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=127"
  },
  {
    "text": "this talk assumes you are already familiar ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=128"
  },
  {
    "text": "with the basic concepts, building blocks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=131"
  },
  {
    "text": "and workflow of how the framework works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=134"
  },
  {
    "text": "Please visit the intro session \"Meet ScreenCaptureKit\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=137"
  },
  {
    "text": "to learn more. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=141"
  },
  {
    "text": "In this session, I am going to talk about ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=143"
  },
  {
    "text": "how to capture and display a single window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=146"
  },
  {
    "text": "Next, how to add screen content to full display capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=150"
  },
  {
    "text": "How to remove content from display capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=156"
  },
  {
    "text": "I will then show you a few ways to configure the stream ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=160"
  },
  {
    "text": "for different use cases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=165"
  },
  {
    "text": "And last, you will see a demo of how ScreenCaptureKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=168"
  },
  {
    "text": "transformed the screen and audio capture experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=172"
  },
  {
    "text": "of OBS Studio, a popular open source screen capture app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=176"
  },
  {
    "text": "Now, let's start with the first example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=183"
  },
  {
    "text": "and probably the most common use case: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=186"
  },
  {
    "text": "capture a single window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=190"
  },
  {
    "text": "This example is going to cover ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=194"
  },
  {
    "text": "how to set up a single window filter; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=196"
  },
  {
    "text": "what to expect from the stream output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=200"
  },
  {
    "text": "when the captured window is being resized, occluded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=202"
  },
  {
    "text": "moved off-screen, or minimized. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=207"
  },
  {
    "text": "You will also learn how to use per-frame metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=210"
  },
  {
    "text": "and how to properly display the captured window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=214"
  },
  {
    "text": "Let's dive in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=218"
  },
  {
    "text": "To capture a single window that's independent ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=220"
  },
  {
    "text": "of which display it's on, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=223"
  },
  {
    "text": "you can start by using a single window filter ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=225"
  },
  {
    "text": "and initialize the filter with just one window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=229"
  },
  {
    "text": "In the example here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=234"
  },
  {
    "text": "the filter is configured to include a single Safari window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=235"
  },
  {
    "text": "The video output includes just that window and nothing else. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=241"
  },
  {
    "text": "No child, pop-up, or other windows from Safari ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=246"
  },
  {
    "text": "will be included. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=250"
  },
  {
    "text": "ScreenCaptureKit's audio capture policy on the other hand ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=253"
  },
  {
    "text": "always works at the app level. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=257"
  },
  {
    "text": "When a single window filter is used, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=260"
  },
  {
    "text": "all the audio content from the application ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=263"
  },
  {
    "text": "that contains the window will be captured, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=266"
  },
  {
    "text": "even from those windows that are not present in the video output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=270"
  },
  {
    "text": "Now let's take a look at the code sample. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=276"
  },
  {
    "text": "To create a stream with a single window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=280"
  },
  {
    "text": "start by getting all available content to share ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=283"
  },
  {
    "text": "via SCShareableContent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=287"
  },
  {
    "text": "Next, get the window you want to share from SCShareableContent ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=290"
  },
  {
    "text": "by matching the windowID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=295"
  },
  {
    "text": "Then, create a SCContentFilter with the type ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=298"
  },
  {
    "text": "desktopIndependentWindow with the specified SCWindow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=303"
  },
  {
    "text": "You can further configure the stream to include audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=308"
  },
  {
    "text": "as part of the stream output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=312"
  },
  {
    "text": "Now you are ready to create a stream ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=315"
  },
  {
    "text": "with contentFilter and streamConfig. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=318"
  },
  {
    "text": "You can then add a StreamOutput and start the stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=321"
  },
  {
    "text": "Let's take a look at the stream output next. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=327"
  },
  {
    "text": "In the example here, the source display is on the left ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=331"
  },
  {
    "text": "and the stream output is on the right. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=336"
  },
  {
    "text": "The stream filter includes a single Safari window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=340"
  },
  {
    "text": "Now I am going to start to scroll the Safari window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=345"
  },
  {
    "text": "that's being captured. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=349"
  },
  {
    "text": "The stream output includes the live content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=352"
  },
  {
    "text": "from the single Safari window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=355"
  },
  {
    "text": "and is updating at the same cadence as the source window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=357"
  },
  {
    "text": "up to the source display's native frame rate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=362"
  },
  {
    "text": "For example, when the source window is constantly updating ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=366"
  },
  {
    "text": "on a 120Hz display, the stream output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=370"
  },
  {
    "text": "can also achieve up to 120 fps update. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=374"
  },
  {
    "text": "You might wonder what happens when the window resizes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=380"
  },
  {
    "text": "Please keep in mind that frequently changing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=384"
  },
  {
    "text": "the stream's output dimension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=387"
  },
  {
    "text": "can lead to additional memory allocation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=389"
  },
  {
    "text": "and therefore not recommended. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=392"
  },
  {
    "text": "The stream's output dimension is mostly fixed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=396"
  },
  {
    "text": "and it does not resize with the source window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=400"
  },
  {
    "text": "Now let me start to resize the source window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=404"
  },
  {
    "text": "and see what happens to the stream's output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=407"
  },
  {
    "text": "ScreenCaptureKit always performs hardware scaling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=411"
  },
  {
    "text": "on the captured window so it never exceeds the frame output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=415"
  },
  {
    "text": "as the source window resizes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=420"
  },
  {
    "text": "How about windows that are covered by other windows? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=423"
  },
  {
    "text": "When the source window is occluded or partially occluded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=427"
  },
  {
    "text": "the stream output always includes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=432"
  },
  {
    "text": "the window's full content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=435"
  },
  {
    "text": "And this also applies to the case ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=439"
  },
  {
    "text": "when the window is completely off-screen ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=441"
  },
  {
    "text": "or moved to other displays. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=444"
  },
  {
    "text": "And for minimized windows, when the source window is minimized, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=448"
  },
  {
    "text": "the stream output is paused, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=453"
  },
  {
    "text": "and it resumes when the source window is no longer minimized. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=456"
  },
  {
    "text": "Next, let's move to audio output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=461"
  },
  {
    "text": "In this example here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=465"
  },
  {
    "text": "there are two Safari windows with audio tracks, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=467"
  },
  {
    "text": "and the window on the left is being captured. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=470"
  },
  {
    "text": "The video output includes just the first window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=475"
  },
  {
    "text": "and the audio tracks from both Safari windows ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=479"
  },
  {
    "text": "will be included in the audio output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=481"
  },
  {
    "text": "Let's take a look and listen. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=485"
  },
  {
    "text": "♪ Electronic dance music ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=487"
  },
  {
    "text": "Chef: And I wrote down my favorite guacamole recipe. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=492"
  },
  {
    "text": "It calls for four avocados. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=496"
  },
  {
    "text": "Meng: With the stream up and running, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=499"
  },
  {
    "text": "your app receives a frame update ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=501"
  },
  {
    "text": "whenever there's a new frame available. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=503"
  },
  {
    "text": "The frame's output includes IOSurface ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=507"
  },
  {
    "text": "representing the captured frame and the per-frame metadata. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=510"
  },
  {
    "text": "I'd like to spend some time talking about metadata. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=516"
  },
  {
    "text": "I am going to show you examples of metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=522"
  },
  {
    "text": "that can be quite useful for your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=525"
  },
  {
    "text": "And these include dirty rects, content rect, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=528"
  },
  {
    "text": "content scale, and scale factor. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=534"
  },
  {
    "text": "Let's start with dirty rects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=538"
  },
  {
    "text": "Dirty rects indicate where the new content is ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=541"
  },
  {
    "text": "from the previous frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=544"
  },
  {
    "text": "In the example here, the dirty rects are being highlighted ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=546"
  },
  {
    "text": "to illustrate the regions of frame updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=551"
  },
  {
    "text": "Instead of always encoding the entire frame, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=555"
  },
  {
    "text": "or calculate the delta between two frames in the encoder, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=559"
  },
  {
    "text": "you can simply use dirty rects to only encode ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=563"
  },
  {
    "text": "and transmit the regions with new updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=567"
  },
  {
    "text": "and copy the updates onto the previous frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=570"
  },
  {
    "text": "on the receiver side to generate a new frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=573"
  },
  {
    "text": "Dirty rects can be retrieved from the output CMSampleBuffer's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=578"
  },
  {
    "text": "metadata dictionary using the matching key. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=583"
  },
  {
    "text": "Now let's move to content rect and the content scale. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=589"
  },
  {
    "text": "The source window to be captured is on the left ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=594"
  },
  {
    "text": "and the stream output is on the right. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=598"
  },
  {
    "text": "Since a window can be resized, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=602"
  },
  {
    "text": "the source window's native backing surface size ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=605"
  },
  {
    "text": "often doesn't match the stream output's dimension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=608"
  },
  {
    "text": "In the example here, the captured window has ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=613"
  },
  {
    "text": "different aspect ratio from the frame's output and is bigger. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=616"
  },
  {
    "text": "The captured window is scaled down to fit into the output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=622"
  },
  {
    "text": "A content rect, which is highlighted in green here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=629"
  },
  {
    "text": "indicates the region of interest of the captured content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=633"
  },
  {
    "text": "on the stream output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=637"
  },
  {
    "text": "And the content scale indicates how much the content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=640"
  },
  {
    "text": "is scaled to fit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=644"
  },
  {
    "text": "Here the captured Safari window is scaled down ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=646"
  },
  {
    "text": "by 0.77 to fit inside the frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=650"
  },
  {
    "text": "Now you can use the metadata just discussed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=655"
  },
  {
    "text": "to correctly display the captured window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=658"
  },
  {
    "text": "as close to its native appearance as possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=661"
  },
  {
    "text": "First, let's start by cropping the content from its output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=666"
  },
  {
    "text": "using the content rect. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=670"
  },
  {
    "text": "Next, scale the content back up by dividing the content scale. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=673"
  },
  {
    "text": "Now the captured content is scaled to match one-to-one ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=680"
  },
  {
    "text": "in pixel size as the source window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=684"
  },
  {
    "text": "But how is the captured window going to look ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=688"
  },
  {
    "text": "on the target display? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=690"
  },
  {
    "text": "To answer that question, I would like to start ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=693"
  },
  {
    "text": "by describing how scale factor works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=696"
  },
  {
    "text": "A display's scale factor indicates the scale ratio ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=700"
  },
  {
    "text": "between a display or window's logical point size ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=704"
  },
  {
    "text": "and its backing surface's pixel size. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=708"
  },
  {
    "text": "A scale factor 2, or a 2x mode, means every one point onscreen ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=713"
  },
  {
    "text": "equals four pixels on the backing surface. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=719"
  },
  {
    "text": "A window can be moved from a Retina display ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=723"
  },
  {
    "text": "with scale factor 2, such as in the example here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=726"
  },
  {
    "text": "to a non-Retina display with scale factor 1 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=731"
  },
  {
    "text": "while being captured. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=734"
  },
  {
    "text": "With scale factor 1, each one logical point onscreen ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=737"
  },
  {
    "text": "corresponds to one pixel on the backing surface. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=742"
  },
  {
    "text": "In addition, the source display might have ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=746"
  },
  {
    "text": "mismatched scale factor from the target display ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=749"
  },
  {
    "text": "where the captured content will be displayed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=753"
  },
  {
    "text": "In this example, a window is being captured ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=758"
  },
  {
    "text": "from a Retina display on the left with a scale factor 2 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=761"
  },
  {
    "text": "and to be displayed on a non-Retina display on the right. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=767"
  },
  {
    "text": "If the captured window is displayed as-is without scaling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=772"
  },
  {
    "text": "on the target non-Retina display ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=776"
  },
  {
    "text": "with one point to one pixel mapping, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=778"
  },
  {
    "text": "the window will look four times as big. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=781"
  },
  {
    "text": "To fix this, you should always check the scale factor ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=786"
  },
  {
    "text": "from the frame's metadata against the scale factor ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=789"
  },
  {
    "text": "of the target display. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=793"
  },
  {
    "text": "When there's a mismatch, scale the size of the captured content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=796"
  },
  {
    "text": "by the scale factor before displaying it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=801"
  },
  {
    "text": "After scaling, the captured window on the target display ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=804"
  },
  {
    "text": "now appears to be the same size as its source window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=809"
  },
  {
    "text": "Now let's take a look at the code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=814"
  },
  {
    "text": "and it's quite simple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=817"
  },
  {
    "text": "Content rect, content scale, and scale factor ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=819"
  },
  {
    "text": "can also be retrieved from the output CMSampleBuffer's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=824"
  },
  {
    "text": "metadata attachment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=828"
  },
  {
    "text": "You can then use these metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=831"
  },
  {
    "text": "to crop and scale the captured content to display it correctly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=833"
  },
  {
    "text": "To recap, a single window filter ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=840"
  },
  {
    "text": "always includes full window content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=843"
  },
  {
    "text": "even when the source window is off-screen or occluded. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=846"
  },
  {
    "text": "It's display and space independent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=851"
  },
  {
    "text": "The output is always offset at the top-left corner. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=854"
  },
  {
    "text": "Pop-up or child windows are not included. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=860"
  },
  {
    "text": "Consider using metadata to best display the content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=865"
  },
  {
    "text": "And the audio includes tracks from the entire containing app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=869"
  },
  {
    "text": "Now that you have just learned about how to capture ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=875"
  },
  {
    "text": "and display a single window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=878"
  },
  {
    "text": "let me move to the next class of display-based content filters. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=881"
  },
  {
    "text": "In this next example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=886"
  },
  {
    "text": "you will learn to create a display-based filter ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=888"
  },
  {
    "text": "with windows or apps, and I will demonstrate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=891"
  },
  {
    "text": "some differences between video- and audio-filtering rules. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=895"
  },
  {
    "text": "A display-based inclusion filter specifies which display ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=900"
  },
  {
    "text": "you want to capture content from. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=904"
  },
  {
    "text": "By default, no windows are captured. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=907"
  },
  {
    "text": "You can choose the content you want to capture by window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=911"
  },
  {
    "text": "In the example here, a Safari window and a Keynote window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=915"
  },
  {
    "text": "are added to the display filter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=920"
  },
  {
    "text": "The video output includes just these two windows ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=923"
  },
  {
    "text": "placed in a display space ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=927"
  },
  {
    "text": "and the audio output includes all the soundtracks ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=929"
  },
  {
    "text": "from Keynote and Safari apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=932"
  },
  {
    "text": "This code sample demonstrates how to create ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=937"
  },
  {
    "text": "display-based filters with included windows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=940"
  },
  {
    "text": "Start by creating a list of SCWindows ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=944"
  },
  {
    "text": "using SCShareableContent and windowIDs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=948"
  },
  {
    "text": "And then, create a display-based SCContentFilter ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=952"
  },
  {
    "text": "with a given display and a list of included windows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=956"
  },
  {
    "text": "You can then create a stream ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=961"
  },
  {
    "text": "using the filter and configuration in the same way ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=963"
  },
  {
    "text": "as a desktop independent window and start the stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=967"
  },
  {
    "text": "With the stream up and running, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=973"
  },
  {
    "text": "let's take a look at the stream's output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=975"
  },
  {
    "text": "The filter is configured to include two Safari windows, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=978"
  },
  {
    "text": "menu bar, and wallpaper windows.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=982"
  },
  {
    "text": "If a window is moved off-screen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=990"
  },
  {
    "text": "it will be removed from the stream output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=992"
  },
  {
    "text": "When a new Safari window is created, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=997"
  },
  {
    "text": "the new window doesn't show up in the stream output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1000"
  },
  {
    "text": "because the new window is not in the filter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1004"
  },
  {
    "text": "The same rule also applies to child or pop-up windows, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1008"
  },
  {
    "text": "which do not show up in the stream's output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1012"
  },
  {
    "text": "If you want to ensure that child windows ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1016"
  },
  {
    "text": "are included automatically in your stream output, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1019"
  },
  {
    "text": "you can use a display-based filter with included apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1022"
  },
  {
    "text": "In this example, adding the Safari and Keynote apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1027"
  },
  {
    "text": "to the filter ensures that the audio and video output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1032"
  },
  {
    "text": "from all the windows and soundtracks from these two apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1036"
  },
  {
    "text": "are included in the output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1040"
  },
  {
    "text": "Window exception filters are a powerful way ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1044"
  },
  {
    "text": "of excluding specific windows from your output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1047"
  },
  {
    "text": "when the filter is specified as a display with included apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1051"
  },
  {
    "text": "For example, a single Safari window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1056"
  },
  {
    "text": "is removed from the output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1059"
  },
  {
    "text": "ScreenCaptureKit enables audio capture at the app level, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1062"
  },
  {
    "text": "so excluding audio from a single Safari window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1067"
  },
  {
    "text": "is the equivalent to removing audio tracks ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1071"
  },
  {
    "text": "for all Safari apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1074"
  },
  {
    "text": "Although the stream's video output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1077"
  },
  {
    "text": "still includes a Safari window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1080"
  },
  {
    "text": "all the sound tracks from Safari apps are removed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1083"
  },
  {
    "text": "and the audio output includes just the soundtrack ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1087"
  },
  {
    "text": "from Keynote. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1091"
  },
  {
    "text": "In the code example here, we change the SCContentFilter ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1093"
  },
  {
    "text": "to include a list of SCRunningApplications ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1097"
  },
  {
    "text": "instead of SCWindows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1101"
  },
  {
    "text": "If there are individual windows you want to further exclude, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1103"
  },
  {
    "text": "build a list of SCWindows and then create an SCContentFilter ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1107"
  },
  {
    "text": "using the list of SCApplications ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1113"
  },
  {
    "text": "with the list of excepting windows to exclude. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1116"
  },
  {
    "text": "Let's take a look at what the stream output looks like now ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1121"
  },
  {
    "text": "when new or child windows are created ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1125"
  },
  {
    "text": "by specifying included apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1128"
  },
  {
    "text": "This time, Safari app and system windows are added to the filter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1131"
  },
  {
    "text": "A new Safari window is now automatically included ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1138"
  },
  {
    "text": "in the stream output and the same rule applies ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1142"
  },
  {
    "text": "to child and pop-up windows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1145"
  },
  {
    "text": "This can be quite useful when you are doing a tutorial ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1148"
  },
  {
    "text": "and want to demonstrate the full action ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1152"
  },
  {
    "text": "including invoking pop-up or new windows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1155"
  },
  {
    "text": "I have just demonstrated how to add content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1159"
  },
  {
    "text": "to the stream output through a few different ways. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1162"
  },
  {
    "text": "My next example will show you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1166"
  },
  {
    "text": "how to remove content from the stream output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1168"
  },
  {
    "text": "This example includes a test app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1172"
  },
  {
    "text": "that emulates a video conferencing app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1175"
  },
  {
    "text": "that contains a preview of the display being shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1178"
  },
  {
    "text": "Because the test app recursively shows itself in the preview, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1183"
  },
  {
    "text": "it's creating the so-called mirror hall effect. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1187"
  },
  {
    "text": "Even during full display share, it's common for screen sharing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1192"
  },
  {
    "text": "applications to remove its own windows, capture preview, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1196"
  },
  {
    "text": "participant camera view to avoid the mirror hall effect, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1201"
  },
  {
    "text": "or other system UIs such as notification windows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1205"
  },
  {
    "text": "ScreenCaptureKit provides you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1210"
  },
  {
    "text": "with a set of exclusion-based filters that allow you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1213"
  },
  {
    "text": "to quickly remove content from display capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1217"
  },
  {
    "text": "An exclusion-based display filter captures all the windows ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1221"
  },
  {
    "text": "from the given display by default. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1225"
  },
  {
    "text": "You can then start to remove individual windows or apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1228"
  },
  {
    "text": "by adding them to the exclusion filter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1232"
  },
  {
    "text": "For example, you can add the content capture test app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1235"
  },
  {
    "text": "and Notification Center to the list of excluded applications. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1240"
  },
  {
    "text": "To create a display-based filter ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1246"
  },
  {
    "text": "excluding a list of applications, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1249"
  },
  {
    "text": "start by retrieving SCApplications to exclude ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1252"
  },
  {
    "text": "by matching bundle ID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1256"
  },
  {
    "text": "If there are individual windows you'd like to cherry-pick ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1259"
  },
  {
    "text": "back to the stream output, you can also build ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1262"
  },
  {
    "text": "an optional list of excepting SCWindows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1265"
  },
  {
    "text": "And then use a given display, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1270"
  },
  {
    "text": "the list of applications to exclude, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1273"
  },
  {
    "text": "and a list of excepting windows to create the content filter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1276"
  },
  {
    "text": "Let's take a look at the result. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1282"
  },
  {
    "text": "The content capture test app that's causing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1286"
  },
  {
    "text": "the mirror hall problem and the notification windows ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1288"
  },
  {
    "text": "are both removed from the stream output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1292"
  },
  {
    "text": "New or child windows from these apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1296"
  },
  {
    "text": "will be automatically removed as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1298"
  },
  {
    "text": "If these removed apps include any audio, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1303"
  },
  {
    "text": "their audio will be removed from the audio output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1306"
  },
  {
    "text": "We've just seen how to capture a single window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1310"
  },
  {
    "text": "how to add and remove windows from a display filter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1314"
  },
  {
    "text": "Let's move to stream configuration next. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1318"
  },
  {
    "text": "In the next few examples, you will learn about ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1322"
  },
  {
    "text": "different stream properties you can configure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1325"
  },
  {
    "text": "how to set up the stream for screen capture and streaming, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1329"
  },
  {
    "text": "and how to build a window picker with live preview. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1333"
  },
  {
    "text": "Let's start with configuration properties. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1338"
  },
  {
    "text": "These are some of the common stream properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1342"
  },
  {
    "text": "you can configure, such as stream output dimensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1345"
  },
  {
    "text": "source and destination rects, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1350"
  },
  {
    "text": "color space, color matrix, and pixel format, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1353"
  },
  {
    "text": "whether to include cursor, and frame rate control. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1358"
  },
  {
    "text": "We will take a look at each property in details next. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1363"
  },
  {
    "text": "Let's start with output dimension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1368"
  },
  {
    "text": "which can be specified as width and height in pixels. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1371"
  },
  {
    "text": "The source display's dimension and aspect ratio ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1376"
  },
  {
    "text": "doesn't always match the output dimension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1379"
  },
  {
    "text": "And when this mismatch happens while capturing a full display, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1384"
  },
  {
    "text": "there will be pillar or letterbox in the stream output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1388"
  },
  {
    "text": "You can also specify a source rect that defines the region ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1393"
  },
  {
    "text": "to capture from and the result will be rendered and scaled ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1397"
  },
  {
    "text": "to the destination rect on the frame output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1402"
  },
  {
    "text": "ScreenCaptureKit supports hardware accelerated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1406"
  },
  {
    "text": "color space, color matrix, and pixel format conversion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1410"
  },
  {
    "text": "Common BGRA and YUV formats are supported. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1416"
  },
  {
    "text": "Please visit our developer page for the full list. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1421"
  },
  {
    "text": "When show cursor is enabled, the stream output includes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1426"
  },
  {
    "text": "a cursor prerendered into the frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1430"
  },
  {
    "text": "This applies to all system cursors, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1434"
  },
  {
    "text": "even custom cursor like the camera-shaped one here. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1437"
  },
  {
    "text": "You can use minimum frame interval ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1442"
  },
  {
    "text": "to control desired output frame rate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1444"
  },
  {
    "text": "For example, when requesting 60 fps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1448"
  },
  {
    "text": "set the minimal interval to 1/60. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1452"
  },
  {
    "text": "You will receive frame update no more than 60 fps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1456"
  },
  {
    "text": "and no more than the content's native frame rate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1461"
  },
  {
    "text": "Queue depth can be specified to determine ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1466"
  },
  {
    "text": "the number of surfaces in the server-side surface pool. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1469"
  },
  {
    "text": "More surfaces in the pool can lead to better frame rate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1474"
  },
  {
    "text": "and performance, but it results in higher system memory usage ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1478"
  },
  {
    "text": "and potentially a latency trade-off, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1483"
  },
  {
    "text": "which I will discuss in more details later. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1487"
  },
  {
    "text": "ScreenCaptureKit accepts queue depth range between ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1490"
  },
  {
    "text": "three to eight with a default queue depth of three. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1494"
  },
  {
    "text": "In this example here, the surface pool is configured ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1499"
  },
  {
    "text": "to include four surfaces available for ScreenCaptureKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1503"
  },
  {
    "text": "to render to. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1507"
  },
  {
    "text": "The current active surface is surface 1 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1509"
  },
  {
    "text": "and ScreenCaptureKit is rendering the next frame to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1513"
  },
  {
    "text": "Once surface 1 is complete, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1519"
  },
  {
    "text": "ScreenCaptureKit sends surface 1 to your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1522"
  },
  {
    "text": "Your app is processing and holding surface 1, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1526"
  },
  {
    "text": "while ScreenCaptureKit is rendering to surface 2. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1530"
  },
  {
    "text": "Surface 1 is now marked as unavailable in the pool ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1535"
  },
  {
    "text": "since your app is still using it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1539"
  },
  {
    "text": "When surface 2 is complete, it's sent to your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1543"
  },
  {
    "text": "and ScreenCaptureKit now renders to surface 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1547"
  },
  {
    "text": "But if your app is still processing surface 1, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1551"
  },
  {
    "text": "it will start to fall behind as frames are now provided ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1555"
  },
  {
    "text": "faster than they can be processed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1559"
  },
  {
    "text": "If the surface pool contains a large number of surfaces, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1563"
  },
  {
    "text": "new surfaces will start to pile up ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1567"
  },
  {
    "text": "and you might need to consider starting to drop frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1570"
  },
  {
    "text": "in order to keep up. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1573"
  },
  {
    "text": "In this case, more surfaces in the pool ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1575"
  },
  {
    "text": "can potentially lead to higher latency. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1578"
  },
  {
    "text": "The number of surfaces left in the pool ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1582"
  },
  {
    "text": "for ScreenCaptureKit to use, equals the queue depth ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1585"
  },
  {
    "text": "minus the number of surfaces held by your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1589"
  },
  {
    "text": "In the example here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1594"
  },
  {
    "text": "both surface 1 and 2 are still held by your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1596"
  },
  {
    "text": "There are 2 surfaces left in the surface pool. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1600"
  },
  {
    "text": "After surface 3 is complete and is sent to your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1605"
  },
  {
    "text": "the only available surface left in the pool is surface 4. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1609"
  },
  {
    "text": "If your app continues to hold on to surface 1, 2, and 3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1614"
  },
  {
    "text": "ScreenCaptureKit will soon run out of surfaces to render to ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1619"
  },
  {
    "text": "and you will start to see frame loss and glitch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1624"
  },
  {
    "text": "Your app needs to finish and release surface 1 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1627"
  },
  {
    "text": "before ScreenCaptureKit starts to render the next frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1631"
  },
  {
    "text": "after surface 4 in order to avoid frame loss. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1634"
  },
  {
    "text": "Now your app releases surface 1 and it's available ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1640"
  },
  {
    "text": "for ScreenCaptureKit to use again. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1644"
  },
  {
    "text": "To recap: there are two rules your app needs to follow ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1647"
  },
  {
    "text": "in order avoid frame latency and frame loss. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1651"
  },
  {
    "text": "To avoid delayed frame, you need to be able to process ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1655"
  },
  {
    "text": "a frame within the MinimumFrameInterval. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1658"
  },
  {
    "text": "To avoid frame loss, the time it takes your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1662"
  },
  {
    "text": "to release the surfaces back to the pool must be less than ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1665"
  },
  {
    "text": "MinimumFrameInterval times QueueDepth minus 1, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1670"
  },
  {
    "text": "after which ScreenCaptureKit runs out of surfaces to use, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1675"
  },
  {
    "text": "enters a stall, and will start to miss new frames. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1680"
  },
  {
    "text": "Now that you've seen the various properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1684"
  },
  {
    "text": "you can configure, let's dive into some examples ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1687"
  },
  {
    "text": "to configure the stream for screen capture and streaming. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1690"
  },
  {
    "text": "Some screen content includes videos, games, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1695"
  },
  {
    "text": "or animations that are constantly updating ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1699"
  },
  {
    "text": "and that requires higher frame rate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1702"
  },
  {
    "text": "While others include mostly static text ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1706"
  },
  {
    "text": "like the keynote window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1710"
  },
  {
    "text": "which prioritize higher resolution over frame rate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1712"
  },
  {
    "text": "you can live-adjust the stream's configuration based on ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1716"
  },
  {
    "text": "the content being shared and the networking condition. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1720"
  },
  {
    "text": "In this code example, you are going to see ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1725"
  },
  {
    "text": "how to configure the capture to stream 4K, 60-fps game. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1728"
  },
  {
    "text": "You can start by setting the stream output dimension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1735"
  },
  {
    "text": "to 4K in pixel size. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1738"
  },
  {
    "text": "And then, set the output frame rate to 60 fps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1741"
  },
  {
    "text": "by setting the minimum frame interval to 1/60. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1746"
  },
  {
    "text": "Next, use pixel format YUV420 for encoding and streaming. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1750"
  },
  {
    "text": "Set the optional source rect ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1758"
  },
  {
    "text": "to just capture a portion of the screen. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1760"
  },
  {
    "text": "Next, change the background fill color to black, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1765"
  },
  {
    "text": "and then include a cursor in the frame output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1769"
  },
  {
    "text": "Configure surface queue depth to five for optimal frame rate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1773"
  },
  {
    "text": "and performance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1777"
  },
  {
    "text": "Last, enable audio on the output stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1779"
  },
  {
    "text": "All the stream configurations you've just seen ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1785"
  },
  {
    "text": "in the previous example can be dynamically changed on the fly ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1788"
  },
  {
    "text": "without recreating the stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1792"
  },
  {
    "text": "For example, you can live adjust some properties such as ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1795"
  },
  {
    "text": "output dimension, dynamically change the frame rate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1799"
  },
  {
    "text": "and update stream filters. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1804"
  },
  {
    "text": "Here's an example to switch the output dimension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1807"
  },
  {
    "text": "from 4K down to 720p. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1810"
  },
  {
    "text": "And downgrade the frame rate from 60 fps to 15 fps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1814"
  },
  {
    "text": "You can then simply call updateConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1821"
  },
  {
    "text": "to apply the new settings on the fly ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1825"
  },
  {
    "text": "without interrupting the stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1828"
  },
  {
    "text": "In the last example, I'd like to walk you through ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1831"
  },
  {
    "text": "building a window picker with live preview. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1835"
  },
  {
    "text": "Here is an example ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1839"
  },
  {
    "text": "of what a typical window picker looks like. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1841"
  },
  {
    "text": "It's common for web conferencing screen sharing apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1845"
  },
  {
    "text": "to offer users an option ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1848"
  },
  {
    "text": "to choose the exact window to share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1850"
  },
  {
    "text": "ScreenCaptureKit provides an efficient ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1855"
  },
  {
    "text": "and high-performance solution to creating large number ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1858"
  },
  {
    "text": "of thumbnail-sized streams with live content update, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1862"
  },
  {
    "text": "and it's simple to implement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1866"
  },
  {
    "text": "Let's break it down to see what it takes to build ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1869"
  },
  {
    "text": "a window picker like this using ScreenCaptureKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1872"
  },
  {
    "text": "To set up the picker, you can start by creating ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1877"
  },
  {
    "text": "one single window filter for each eligible window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1880"
  },
  {
    "text": "that your app allows the user to pick ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1883"
  },
  {
    "text": "with desktop independent window as the filter type. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1886"
  },
  {
    "text": "Next, set up the stream configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1891"
  },
  {
    "text": "that's thumbnail-sized, 5 fps, with BGRA pixel format ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1895"
  },
  {
    "text": "for onscreen display, default queue depth, no cursor or audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1901"
  },
  {
    "text": "Use single window filter and the stream configuration here ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1908"
  },
  {
    "text": "to create one stream for each window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1912"
  },
  {
    "text": "To do this in code, you can start by getting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1917"
  },
  {
    "text": "the SCShareableContent by excluding desktop ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1920"
  },
  {
    "text": "and system windows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1924"
  },
  {
    "text": "Next, create a content filter ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1927"
  },
  {
    "text": "of type desktop independent window for each eligible window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1930"
  },
  {
    "text": "Then, move to the stream configuration part. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1936"
  },
  {
    "text": "Choose an appropriate thumbnail size -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1941"
  },
  {
    "text": "in this example, it's 284 by 182 -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1944"
  },
  {
    "text": "and then set the minimum frame interval to one over five. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1948"
  },
  {
    "text": "With a pixel format of BGRA for onscreen display, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1953"
  },
  {
    "text": "disable audio and cursor since we don't need them ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1959"
  },
  {
    "text": "in the preview. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1963"
  },
  {
    "text": "And set queue depth to three because we don't expect updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1965"
  },
  {
    "text": "that are too often. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1969"
  },
  {
    "text": "With the stream content filter and the configuration created, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1972"
  },
  {
    "text": "you are now ready to create the streams. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1976"
  },
  {
    "text": "Create one stream for each window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1979"
  },
  {
    "text": "add stream output for each stream, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1982"
  },
  {
    "text": "and then start the stream. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1986"
  },
  {
    "text": "Last, append it to the stream list. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1988"
  },
  {
    "text": "This is the window picker with live preview ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1993"
  },
  {
    "text": "created using the sample code we saw earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=1996"
  },
  {
    "text": "Each thumbnail is live updating and then backed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2000"
  },
  {
    "text": "by an individual stream with single-window filter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2004"
  },
  {
    "text": "With ScreenCaptureKit, you can easily build ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2009"
  },
  {
    "text": "a live preview picker like this, that allows you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2012"
  },
  {
    "text": "to concurrently capture so much live screen content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2016"
  },
  {
    "text": "simultaneously, without overburdening the system. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2019"
  },
  {
    "text": "Now let me hand it over to my colleague, Drew, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2024"
  },
  {
    "text": "who's going to give you an exciting demo about ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2027"
  },
  {
    "text": "OBS adoption of ScreenCaptureKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2031"
  },
  {
    "text": "Drew Mills: Thanks, Meng. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2034"
  },
  {
    "text": "Hi, my name is Drew, and I'm a Partner Engineer here at Apple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2036"
  },
  {
    "text": "OBS Studio is an open source application that allows users ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2039"
  },
  {
    "text": "to manage recording and streaming content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2042"
  },
  {
    "text": "from their computer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2044"
  },
  {
    "text": "It contains an implementation of ScreenCaptureKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2045"
  },
  {
    "text": "that we worked with the project on integrating this spring. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2048"
  },
  {
    "text": "ScreenCaptureKit was easy to implement thanks to utilizing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2051"
  },
  {
    "text": "similar code to OBS's existing CGDisplayStream-based capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2053"
  },
  {
    "text": "The ScreenCaptureKit implementation demonstrates ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2058"
  },
  {
    "text": "many of the features discussed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2060"
  },
  {
    "text": "in the \"Meet ScreenCaptureKit\" session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2062"
  },
  {
    "text": "This includes: capturing an entire desktop, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2064"
  },
  {
    "text": "all of the windows of an application, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2066"
  },
  {
    "text": "or just one specific window. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2068"
  },
  {
    "text": "ScreenCaptureKit has lower overhead than OBS's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2070"
  },
  {
    "text": "CGWindowListCreateImage-based capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2073"
  },
  {
    "text": "This means that when capturing a portion of your screen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2076"
  },
  {
    "text": "you are left with more resources that you can use ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2079"
  },
  {
    "text": "for producing your content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2081"
  },
  {
    "text": "Let's dive into a demo ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2083"
  },
  {
    "text": "to see what we've been discussing in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2084"
  },
  {
    "text": "On the left, there is a worst case example ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2086"
  },
  {
    "text": "of OBS's Window Capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2089"
  },
  {
    "text": "This capture uses the CGWindowListCreateImage API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2091"
  },
  {
    "text": "and has significant stuttering. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2095"
  },
  {
    "text": "In our testing, we saw frame rates dip as low as 7 fps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2096"
  },
  {
    "text": "Meanwhile, the ScreenCaptureKit implementation on the right ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2101"
  },
  {
    "text": "has a much smoother result, providing an output video ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2104"
  },
  {
    "text": "with significantly smoother motion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2106"
  },
  {
    "text": "In this case, delivering 60 fps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2109"
  },
  {
    "text": "All while OBS uses up to 15 percent less RAM ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2113"
  },
  {
    "text": "than Window Capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2116"
  },
  {
    "text": "And while OBS's CPU utilization is cut by up to half ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2119"
  },
  {
    "text": "when using ScreenCaptureKit instead of OBS's Window Capture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2123"
  },
  {
    "text": "Let's look at the other improvements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2128"
  },
  {
    "text": "that ScreenCaptureKit has to offer OBS users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2130"
  },
  {
    "text": "I'm still trying to track down all of the Gold Ranks ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2133"
  },
  {
    "text": "in Sayonara Wild Hearts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2135"
  },
  {
    "text": "I want to show off my best run, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2137"
  },
  {
    "text": "so I've been recording my gameplay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2139"
  },
  {
    "text": "Thanks to ScreenCaptureKit, I can now capture ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2140"
  },
  {
    "text": "direct audio stream from the game, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2143"
  },
  {
    "text": "so when I get a notification on my Mac, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2145"
  },
  {
    "text": "it won't ruin my recording's audio or video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2147"
  },
  {
    "text": "And this is possible without having to install ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2150"
  },
  {
    "text": "any additional audio routing software. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2151"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2154"
  },
  {
    "text": "Now, using all of the enhancements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2156"
  },
  {
    "text": "provided by ScreenCaptureKit on Apple silicon, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2158"
  },
  {
    "text": "I can stream games like Taiko no Tatsujin Pop Tap Beat ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2160"
  },
  {
    "text": "from my Mac to popular streaming services. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2163"
  },
  {
    "text": "A new constant bitrate option for Apple silicon's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2166"
  },
  {
    "text": "hardware encoder means that I can encode ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2168"
  },
  {
    "text": "my streaming content for services requiring constant ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2170"
  },
  {
    "text": "bitrate without significantly impacting my game's performance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2172"
  },
  {
    "text": "Now, thanks to ScreenCaptureKit's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2177"
  },
  {
    "text": "lower resource usage and encoding offloading, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2179"
  },
  {
    "text": "I have even more performance available ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2181"
  },
  {
    "text": "for the content that matters. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2183"
  },
  {
    "text": "Back to you, Meng. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2184"
  },
  {
    "text": "Meng: Thank you, Drew. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2185"
  },
  {
    "text": "Through the demos and examples, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2188"
  },
  {
    "text": "you learned about advanced screen content filters. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2190"
  },
  {
    "text": "Several ways to configure the stream for different use cases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2194"
  },
  {
    "text": "And how to use per-frame metadata and correctly display ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2198"
  },
  {
    "text": "the captured content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2202"
  },
  {
    "text": "Some best practices to help you achieve best performance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2204"
  },
  {
    "text": "And finally, Drew showcased the significant capability ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2209"
  },
  {
    "text": "and performance improvement ScreenCaptureKit brought to OBS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2214"
  },
  {
    "text": "I can't wait to see how you redefine your app's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2219"
  },
  {
    "text": "screen sharing, streaming, and collaboration experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2223"
  },
  {
    "text": "using ScreenCaptureKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2227"
  },
  {
    "text": "Thank you for watching! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2229"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10155/?time=2231"
  }
]