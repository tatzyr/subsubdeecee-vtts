[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=0"
  },
  {
    "text": "Hello and welcome. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=10"
  },
  {
    "text": "My name is Kelvin Chiu from the GPU Software team here at Apple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=11"
  },
  {
    "text": "Today, I'll talk about how to boost your Metal application performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=14"
  },
  {
    "text": "with MetalFX Upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=18"
  },
  {
    "text": "MetalFX is a new API that provides ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=20"
  },
  {
    "text": "platform optimized graphics effects for Metal applications.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=23"
  },
  {
    "text": "It enables high performance upscaling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=27"
  },
  {
    "text": "which will boost your application performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=29"
  },
  {
    "text": "while retaining its rendering quality. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=31"
  },
  {
    "text": "Rendering a frame at high resolution costs GPU time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=34"
  },
  {
    "text": "To reduce that time, rendering at a lower resolution will ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=38"
  },
  {
    "text": "usually do the trick. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=41"
  },
  {
    "text": "However, the tradeoff is a lower rendering quality. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=42"
  },
  {
    "text": "With MetalFX Upscaling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=45"
  },
  {
    "text": "your application can now render frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=47"
  },
  {
    "text": "at a lower resolution, reducing rendering time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=49"
  },
  {
    "text": "without compromising rendering quality. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=52"
  },
  {
    "text": "MetalFX Upscaling is optimized ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=55"
  },
  {
    "text": "to run best on Apple devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=58"
  },
  {
    "text": "and it is also easy to adopt in your game. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=60"
  },
  {
    "text": "MetalFX provides two upscaling effects, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=64"
  },
  {
    "text": "which I will describe in detail. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=67"
  },
  {
    "text": "Spatial upscaling is simple to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=69"
  },
  {
    "text": "and gives a great performance boost.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=71"
  },
  {
    "text": "Temporal anti-aliasing and upscaling integrates information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=74"
  },
  {
    "text": "from multiple frames to produce a higher quality output.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=77"
  },
  {
    "text": "I will then talk about best practices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=82"
  },
  {
    "text": "for using these effects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=84"
  },
  {
    "text": "Finally, I will end the session ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=87"
  },
  {
    "text": "with demos showing them in action.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=89"
  },
  {
    "text": "Let's start with Spatial upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=92"
  },
  {
    "text": "MetalFX Spatial upscaling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=96"
  },
  {
    "text": "analyzes the input’s spatial information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=97"
  },
  {
    "text": "to produce new, upscaled samples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=100"
  },
  {
    "text": "Integrating Spatial upscaling is simple. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=103"
  },
  {
    "text": "It only requires anti-aliased input color to produce ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=105"
  },
  {
    "text": "a spatially upscaled color output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=108"
  },
  {
    "text": "In a typical game rendering pipeline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=111"
  },
  {
    "text": "there are various rendering passes including anti-aliased render ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=114"
  },
  {
    "text": "and various post processing effects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=117"
  },
  {
    "text": "Add MetalFX spatial upscaling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=120"
  },
  {
    "text": "right after the game's tone-mapping process ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=122"
  },
  {
    "text": "is completed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=124"
  },
  {
    "text": "It will perform best if the input has been tone mapped and is ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=125"
  },
  {
    "text": "in a perceptual color space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=128"
  },
  {
    "text": "Let’s checkout MetalFX spatial upscaling in action.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=130"
  },
  {
    "text": "This chess scene is produced with a high quality reference renderer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=135"
  },
  {
    "text": "in 4K resolution. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=138"
  },
  {
    "text": "It is path traced, with complex graphics effects, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=140"
  },
  {
    "text": "like ray-traced reflections and shadows. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=143"
  },
  {
    "text": "Here is a side by side comparison, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=146"
  },
  {
    "text": "with 540p input on the left...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=148"
  },
  {
    "text": "…and 1080p output with MetalFX spatial upscaling on the right.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=152"
  },
  {
    "text": "If I zoom in on the queen, on the left, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=158"
  },
  {
    "text": "the image lacks details and is low resolution. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=161"
  },
  {
    "text": "On the right, the spatially upscaled output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=164"
  },
  {
    "text": "has sharper reflections and more refined edges.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=167"
  },
  {
    "text": "Next, I'll walk you through how to implement MetalFX spatial upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=172"
  },
  {
    "text": "In Metal, you would normally create a command encoder ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=177"
  },
  {
    "text": "to encode commands into a command buffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=180"
  },
  {
    "text": "and produce input for the effect. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=182"
  },
  {
    "text": "Similarly, you can create a MetalFX effect object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=184"
  },
  {
    "text": "to encode commands into a command buffer and perform the effect. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=188"
  },
  {
    "text": "Finally, create a third command encoder to encode commands ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=192"
  },
  {
    "text": "that make use of the MetalFX output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=195"
  },
  {
    "text": "You should only create a new spatial scaler object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=197"
  },
  {
    "text": "when your application first starts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=200"
  },
  {
    "text": "or when a display switches resolutions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=202"
  },
  {
    "text": "because they are expensive to create.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=204"
  },
  {
    "text": "First, create and configure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=207"
  },
  {
    "text": "a MTLFXSpatialScalerDescriptor. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=209"
  },
  {
    "text": "Then, create a scaler object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=212"
  },
  {
    "text": "by calling the makeSpatialScaler() method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=214"
  },
  {
    "text": "In the initialization code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=217"
  },
  {
    "text": "start with the descriptor. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=219"
  },
  {
    "text": "Fill both the width and height ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=221"
  },
  {
    "text": "of the input and output texture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=223"
  },
  {
    "text": "Then, set the texture format for the textures that will be set later ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=225"
  },
  {
    "text": "on the scaler object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=228"
  },
  {
    "text": "Set the color processing mode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=230"
  },
  {
    "text": "This tells the API which color space ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=233"
  },
  {
    "text": "the input and output is in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=235"
  },
  {
    "text": "You can set the value to be in either perceptual, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=237"
  },
  {
    "text": "linear, or HDR color space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=240"
  },
  {
    "text": "Once the descriptor is filled, create the scaler object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=243"
  },
  {
    "text": "Once the scaler object is created, you can modify the properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=248"
  },
  {
    "text": "of the object as frequently as you want ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=252"
  },
  {
    "text": "and call the encode() method to start the upscaling process.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=254"
  },
  {
    "text": "In your per frame draw code, make sure the correct input ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=258"
  },
  {
    "text": "and output textures are being set on the scaler object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=261"
  },
  {
    "text": "before encoding the scaling effect into the command buffer.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=264"
  },
  {
    "text": "Spatial upscaling offers a simple way to boost performance.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=268"
  },
  {
    "text": "And when you want even higher quality rendering, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=272"
  },
  {
    "text": "that's where MetalFX temporal anti-aliasing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=275"
  },
  {
    "text": "and upscaling comes in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=277"
  },
  {
    "text": "Temporal AA and upscaling is a technique that uses data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=279"
  },
  {
    "text": "from previous frames to produce high-quality upscaled output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=282"
  },
  {
    "text": "This means, the output of upscaling from the previous frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=286"
  },
  {
    "text": "will be used as one of the inputs for the current frame upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=289"
  },
  {
    "text": "To better understand why Temporal AA and upscaling requires data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=293"
  },
  {
    "text": "from the previous frames, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=297"
  },
  {
    "text": "I'll first review the concept of supersampling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=298"
  },
  {
    "text": "In supersampling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=302"
  },
  {
    "text": "multiple samples are calculated per pixel, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=303"
  },
  {
    "text": "which is then integrated into a single pixel value. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=306"
  },
  {
    "text": "The more samples that we integrate per pixel, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=309"
  },
  {
    "text": "the better the result will be. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=312"
  },
  {
    "text": "However, it comes at a great cost ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=314"
  },
  {
    "text": "to calculate multiple samples per pixel ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=316"
  },
  {
    "text": "within a single frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=318"
  },
  {
    "text": "Instead of sampling multiple locations ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=321"
  },
  {
    "text": "per pixel in a single frame, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=323"
  },
  {
    "text": "you can perform temporal sampling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=325"
  },
  {
    "text": "Temporal sampling is the concept of rendering ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=328"
  },
  {
    "text": "a different sample location ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=330"
  },
  {
    "text": "for all the pixels in a given frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=331"
  },
  {
    "text": "This enables you to achieve supersampling quality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=334"
  },
  {
    "text": "over multiple frames at a significantly lower cost.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=337"
  },
  {
    "text": "By accumulating samples from multiple frames and accounting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=341"
  },
  {
    "text": "for sample positions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=344"
  },
  {
    "text": "temporal AA & upscaling can ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=346"
  },
  {
    "text": "integrate samples appropriately ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=347"
  },
  {
    "text": "in target resolution pixels, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=349"
  },
  {
    "text": "resulting in a high quality anti-aliased upscaled output.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=352"
  },
  {
    "text": "However, since content often changes between frames, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=356"
  },
  {
    "text": "it will require more input data to detect these changes.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=359"
  },
  {
    "text": "Besides the previous frame output, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=363"
  },
  {
    "text": "Temporal AA and upscaling also requires ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=366"
  },
  {
    "text": "a color input that is jittered, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=368"
  },
  {
    "text": "as well as motion and depth data from the scene.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=370"
  },
  {
    "text": "I'll go through each of them to explain why they are required.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=374"
  },
  {
    "text": "Let's start with the jittered color input.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=379"
  },
  {
    "text": "Here is a red triangle rendered without jitter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=383"
  },
  {
    "text": "The bright white outline represents the triangle being rendered.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=386"
  },
  {
    "text": "Each one of the small squares represent a pixel. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=390"
  },
  {
    "text": "And the gray dot in the middle is where the pixel is sampled.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=393"
  },
  {
    "text": "This is the output of the same triangle ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=398"
  },
  {
    "text": "when rendered with a small jitter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=400"
  },
  {
    "text": "The gray dots show the sampling location for a given pixel.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=403"
  },
  {
    "text": "The jitter offset should be unique for a set number of frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=407"
  },
  {
    "text": "in order to fully gather the desired number of samples.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=410"
  },
  {
    "text": "I will cover the topic of jitter sequence in detail later.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=414"
  },
  {
    "text": "Next is the motion information from the scene. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=418"
  },
  {
    "text": "Motion data from the scene indicates ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=421"
  },
  {
    "text": "how much and which direction ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=423"
  },
  {
    "text": "the objects had moved from the previous frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=425"
  },
  {
    "text": "Temporal AA and upscaling uses the motion information to back track ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=429"
  },
  {
    "text": "and find corresponding locations in the previous frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=432"
  },
  {
    "text": "in order to correctly gather samples.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=435"
  },
  {
    "text": "Another input is the depth information from the scene.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=438"
  },
  {
    "text": "Depth data from the scene ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=442"
  },
  {
    "text": "indicates what's in the foreground and what's in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=443"
  },
  {
    "text": "This is important when prioritizing foreground edge anti-aliasing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=446"
  },
  {
    "text": "and provides clues on what other objects might be newly exposed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=450"
  },
  {
    "text": "when gathering samples from previous frames. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=453"
  },
  {
    "text": "The last piece of input data is the previous frame’s output.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=457"
  },
  {
    "text": "The previous frame’s output contains all ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=462"
  },
  {
    "text": "of the samples that have been integrated previously, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=465"
  },
  {
    "text": "and it will be blended with the current frame’s jittered color input ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=468"
  },
  {
    "text": "in order to increase the number of samples per pixel.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=472"
  },
  {
    "text": "By combining information from both the current and previous frame, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=476"
  },
  {
    "text": "the resulting image now has more details. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=479"
  },
  {
    "text": "MetalFX keeps track of the upscaled output, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=482"
  },
  {
    "text": "so you only need to pass the color, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=485"
  },
  {
    "text": "motion, and depth from the current rendered frame.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=487"
  },
  {
    "text": "Going back to a typical game’s rendering pipeline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=491"
  },
  {
    "text": "MetalFX temporal AA and upscaling should run ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=493"
  },
  {
    "text": "before any post processing effects, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=496"
  },
  {
    "text": "since these effects will interfere ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=498"
  },
  {
    "text": "with the result of the upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=500"
  },
  {
    "text": "Here's the chess rendering again, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=504"
  },
  {
    "text": "this time using MetalFX Temporal AA and upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=506"
  },
  {
    "text": "This is a side by side comparison of 1080p input on the left ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=509"
  },
  {
    "text": "and 4K upscaled output on the right.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=514"
  },
  {
    "text": "Zooming in closer to the queen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=521"
  },
  {
    "text": "the input is low resolution and aliased, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=524"
  },
  {
    "text": "while the temporally upscaled output on the right is high resolution ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=527"
  },
  {
    "text": "with a smooth outline and has more fine details in the reflections.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=530"
  },
  {
    "text": "Just as with spatial scaler, creating a new temporal scaler ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=535"
  },
  {
    "text": "is expensive and should only be done ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=538"
  },
  {
    "text": "when your application first starts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=540"
  },
  {
    "text": "or when a display switches resolutions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=542"
  },
  {
    "text": "First, you'll need to allocate and fill in ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=545"
  },
  {
    "text": "a MTLFXTemporalScalerDescriptor.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=547"
  },
  {
    "text": "Then call makeTemporalScaler() method to create the scaler object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=550"
  },
  {
    "text": "In your initialization code, start with the descriptor.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=555"
  },
  {
    "text": "Fill in both the width and height of the input and output textures.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=559"
  },
  {
    "text": "Then set the jittered color, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=563"
  },
  {
    "text": "depth, and motion texture formats ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=565"
  },
  {
    "text": "for the textures that will be bound later on the scaler object as inputs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=567"
  },
  {
    "text": "Finally, set the format for the output texture ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=572"
  },
  {
    "text": "where MetalFX will store the upscaled output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=575"
  },
  {
    "text": "Once the descriptor is filled, create the scaler object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=578"
  },
  {
    "text": "On the scaler object, set the motion scale properties. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=582"
  },
  {
    "text": "This helps you scale the app's motion data to what the API expects.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=585"
  },
  {
    "text": "MetalFX expects motion data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=590"
  },
  {
    "text": "in the render resolution pixel space ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=592"
  },
  {
    "text": "with direction that goes from the current frame’s position ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=594"
  },
  {
    "text": "to the previous frame’s position. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=597"
  },
  {
    "text": "As an example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=599"
  },
  {
    "text": "I'll use a render resolution of 1080p. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=601"
  },
  {
    "text": "Suppose you have an object that moves from clip space coordinate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=603"
  },
  {
    "text": "(-0.75, -0.75). ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=606"
  },
  {
    "text": "to clip space coordinate (0.25, 0.25). ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=609"
  },
  {
    "text": "The motion data is stored as (1, 1).",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=612"
  },
  {
    "text": "Set the motion vector scale property ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=617"
  },
  {
    "text": "to (-960, 540) ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=619"
  },
  {
    "text": "so that MetalFX can interpret your game's motion data correctly.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=621"
  },
  {
    "text": "You can modify the properties of the scaler object as frequently ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=626"
  },
  {
    "text": "as you want. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=629"
  },
  {
    "text": "And call the encode() method to start the upscaling process.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=630"
  },
  {
    "text": "For your per frame draw code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=635"
  },
  {
    "text": "first set the resetHistory property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=637"
  },
  {
    "text": "Set this to true when your application loads the first frame ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=639"
  },
  {
    "text": "or when there is a scene cut. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=642"
  },
  {
    "text": "Then set the textures that are inputs for the effect, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=644"
  },
  {
    "text": "followed by the output texture. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=648"
  },
  {
    "text": "Next, set the reversedDepth property ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=651"
  },
  {
    "text": "to indicate whether the depth values are in reversed-Z mapping.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=653"
  },
  {
    "text": "The last property to set ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=657"
  },
  {
    "text": "before encoding the scaling effect is the current jitter offset.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=658"
  },
  {
    "text": "Getting jitter offset correctly is essential ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=663"
  },
  {
    "text": "to the quality of the output. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=665"
  },
  {
    "text": "Let us take a quick look on how to set jitter offset.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=667"
  },
  {
    "text": "As an example, on the left is a triangle rendered with jitter.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=671"
  },
  {
    "text": "On the right is a zoomed in view of a pixel. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=676"
  },
  {
    "text": "The sample is located at (0.625, 0.78). ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=679"
  },
  {
    "text": "The pixel center is represented by the orange dot. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=683"
  },
  {
    "text": "It is located at (0.5, 0.5).",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=686"
  },
  {
    "text": "In this example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=690"
  },
  {
    "text": "the jitter offset is (-0.125, -0.28).",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=691"
  },
  {
    "text": "Note that jitter offsets are always ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=695"
  },
  {
    "text": "in the range of -0.5 to 0.5. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=697"
  },
  {
    "text": "To verify that you are providing the correct jitter offset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=700"
  },
  {
    "text": "render a scene without camera and object motion ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=703"
  },
  {
    "text": "using a sequence of different jitter offsets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=706"
  },
  {
    "text": "On the left is an example ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=709"
  },
  {
    "text": "when incorrect jitter offset is specified. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=711"
  },
  {
    "text": "Static objects could shift, and fine lines are fuzzy.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=713"
  },
  {
    "text": "On the right is the output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=717"
  },
  {
    "text": "when correct jitter offset is specified. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=719"
  },
  {
    "text": "Objects stay in place, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=721"
  },
  {
    "text": "and fine lines are resolved progressively. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=723"
  },
  {
    "text": "The MetalFX “temporal AA and upscaling” effect ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=725"
  },
  {
    "text": "boosts your application performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=728"
  },
  {
    "text": "and gives an upscaling quality that’s comparable to the quality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=729"
  },
  {
    "text": "of the native target resolution rendering. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=733"
  },
  {
    "text": "In order to get optimal quality and performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=736"
  },
  {
    "text": "when using both upscaling effects, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=738"
  },
  {
    "text": "l’ll now cover implementation best practices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=740"
  },
  {
    "text": "Starting with spatial upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=745"
  },
  {
    "text": "For the best spatial upscaling quality, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=748"
  },
  {
    "text": "the color input should be anti-aliased and noise free. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=750"
  },
  {
    "text": "This is because noise effects ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=753"
  },
  {
    "text": "and aliased images prevent good edge determination, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=755"
  },
  {
    "text": "which will worsen the spatial upscaling quality.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=758"
  },
  {
    "text": "For the best performance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=761"
  },
  {
    "text": "use the perceptual color processing mode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=763"
  },
  {
    "text": "This means, your input color should be tone mapped, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=766"
  },
  {
    "text": "with values from 0-1, in the sRGB color space.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=768"
  },
  {
    "text": "And finally, set the appropriate negative mip bias ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=773"
  },
  {
    "text": "for higher texture detail. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=776"
  },
  {
    "text": "The recommended mip bias calculation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=778"
  },
  {
    "text": "for spatial upscaling is to apply log2 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=780"
  },
  {
    "text": "of the render resolution width, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=783"
  },
  {
    "text": "divided by the target resolution width.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=785"
  },
  {
    "text": "For example, scaling each render resolution dimension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=788"
  },
  {
    "text": "by 2x will result in -1 mip bias, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=791"
  },
  {
    "text": "while scaling each dimension by 1.5x ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=795"
  },
  {
    "text": "will result in -0.58 mip bias.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=797"
  },
  {
    "text": "Note that lower mip levels might result in flickering for textures ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=801"
  },
  {
    "text": "with high frequency patterns. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=804"
  },
  {
    "text": "You should adjust the mip bias for certain textures ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=806"
  },
  {
    "text": "if you spot such artifacts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=808"
  },
  {
    "text": "I will talk next about TemporalAA ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=811"
  },
  {
    "text": "and upscaling best practices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=813"
  },
  {
    "text": "To get the best quality from Temporal AA and upscaling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=816"
  },
  {
    "text": "it's important to choose a good jitter sequence. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=819"
  },
  {
    "text": "Look for a jitter sequence ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=823"
  },
  {
    "text": "that will provide a good distribution of samples ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=824"
  },
  {
    "text": "across all the pixels ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=826"
  },
  {
    "text": "in an upscaled target resolution. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=827"
  },
  {
    "text": "Usually, eight jittered samples per output pixel ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=830"
  },
  {
    "text": "produces a high-quality anti-aliased upscaled output.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=833"
  },
  {
    "text": "In the case of 2x upscaling, the recommendation is to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=837"
  },
  {
    "text": "a Halton (2,3) sequence with 32 jitters ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=840"
  },
  {
    "text": "to produce your jittered color input. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=843"
  },
  {
    "text": "Here’s a plot of the first 32 sample locations ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=846"
  },
  {
    "text": "from Halton (2,3) sequence, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=849"
  },
  {
    "text": "producing approximately eight samples per output pixel.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=851"
  },
  {
    "text": "It's also important to set the appropriate negative mip bias ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=855"
  },
  {
    "text": "for higher texture detail. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=858"
  },
  {
    "text": "The recommended mip bias calculation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=860"
  },
  {
    "text": "for temporal AA and upscaling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=862"
  },
  {
    "text": "is to apply log2 of render resolution width, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=864"
  },
  {
    "text": "divided by target resolution width, subtracted by 1.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=867"
  },
  {
    "text": "For example, scaling each render resolution dimension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=871"
  },
  {
    "text": "by 2x will result in a -2 mip bias, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=874"
  },
  {
    "text": "while scaling each dimension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=878"
  },
  {
    "text": "by 1.5x will result in a -1.58 mip bias.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=880"
  },
  {
    "text": "Next, I will show you examples of how mip bias affects your output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=884"
  },
  {
    "text": "in different situations.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=887"
  },
  {
    "text": "Here are MetalFX temporal AA ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=890"
  },
  {
    "text": "and upscaling outputs of the same scene ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=892"
  },
  {
    "text": "using mip bias of 0, -1, and -2.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=894"
  },
  {
    "text": "Mip bias of -2 produces ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=900"
  },
  {
    "text": "the sharpest and clearest output, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=901"
  },
  {
    "text": "while mip bias of 0 produces ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=903"
  },
  {
    "text": "the softest and most blurry output.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=905"
  },
  {
    "text": "Here are three renderings of a circuit board ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=909"
  },
  {
    "text": "that use the temporal upscaling effect. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=911"
  },
  {
    "text": "From top to bottom, the mip bias values applied ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=914"
  },
  {
    "text": "when sampling textures are 0, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=917"
  },
  {
    "text": "-1, and -2. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=919"
  },
  {
    "text": "Because the circuit board’s textures have high-frequency patterns, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=921"
  },
  {
    "text": "such as its tiny trace wires, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=925"
  },
  {
    "text": "mip bias of -2 generates flickering ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=927"
  },
  {
    "text": "and moire effects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=930"
  },
  {
    "text": "However, mip bias of -1 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=931"
  },
  {
    "text": "greatly reduces these effects, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=934"
  },
  {
    "text": "and mip bias of 0 completely eliminates them.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=935"
  },
  {
    "text": "Lower mip levels generally result in more details. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=939"
  },
  {
    "text": "Use our mip bias suggestion as a starting point, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=943"
  },
  {
    "text": "but be mindful when choosing a mip bias ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=945"
  },
  {
    "text": "for textures with high-frequency patterns. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=947"
  },
  {
    "text": "Follow these practices to ensure an anti-aliased, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=950"
  },
  {
    "text": "high-quality upscaled output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=953"
  },
  {
    "text": "from MetalFX Temporal AA and upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=954"
  },
  {
    "text": "Finally, I will cover performance best practice ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=960"
  },
  {
    "text": "when using MetalFX Upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=962"
  },
  {
    "text": "To get the best performance with MetalFX Upscaling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=965"
  },
  {
    "text": "you should be careful to avoid binding the same resources ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=968"
  },
  {
    "text": "for reading and writing in two non-dependent render ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=971"
  },
  {
    "text": "or compute passes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=974"
  },
  {
    "text": "Doing so creates false dependencies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=976"
  },
  {
    "text": "In Metal, it's always a good idea ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=978"
  },
  {
    "text": "to avoid false dependencies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=981"
  },
  {
    "text": "But this is especially important for MetalFX Upscaling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=982"
  },
  {
    "text": "as I will describe next. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=985"
  },
  {
    "text": "In this example, there are two frames. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=987"
  },
  {
    "text": "The shadow and the post processing passes are completely unrelated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=990"
  },
  {
    "text": "and have no resource dependencies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=993"
  },
  {
    "text": "Metal will overlap the next frame’s shadow pass ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=997"
  },
  {
    "text": "with the current frame’s post processing pass.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=999"
  },
  {
    "text": "However, if the post processing pass writes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1003"
  },
  {
    "text": "to a Metal buffer while the shadow pass ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1005"
  },
  {
    "text": "also reads from the same buffer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1008"
  },
  {
    "text": "Metal will prevent the GPU from running these two passes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1010"
  },
  {
    "text": "in parallel in order to avoid the potential hazard of reading ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1013"
  },
  {
    "text": "and writing to the same resource at the same time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1016"
  },
  {
    "text": "False dependencies between frames ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1019"
  },
  {
    "text": "can negatively affect performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1021"
  },
  {
    "text": "of MetalFX Upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1023"
  },
  {
    "text": "Notice that if there is no ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1025"
  },
  {
    "text": "false dependency between frames, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1027"
  },
  {
    "text": "the next frame’s shadow pass could have overlapped ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1029"
  },
  {
    "text": "with the previous frame's MetalFX Upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1031"
  },
  {
    "text": "However, because of the false dependency ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1034"
  },
  {
    "text": "between frames, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1037"
  },
  {
    "text": "the performance loss now ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1038"
  },
  {
    "text": "also includes the time ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1039"
  },
  {
    "text": "it takes for MetalFX Upscaling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1040"
  },
  {
    "text": "to finish its process. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1042"
  },
  {
    "text": "Ideally, you should ensure that ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1043"
  },
  {
    "text": "there are no false dependencies ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1045"
  },
  {
    "text": "between frames to allow overlapping ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1046"
  },
  {
    "text": "of workloads between different frames, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1048"
  },
  {
    "text": "ensuring the most optimal performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1050"
  },
  {
    "text": "when using MetalFX Upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1052"
  },
  {
    "text": "In this example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1055"
  },
  {
    "text": "you can instead create a separate buffer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1056"
  },
  {
    "text": "for the post processing and shadow passes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1058"
  },
  {
    "text": "to prevent the false dependency, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1060"
  },
  {
    "text": "resulting in parallel execution ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1064"
  },
  {
    "text": "of independent passes.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1066"
  },
  {
    "text": "Avoiding false dependencies is something you always want ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1069"
  },
  {
    "text": "to keep in mind when adopting MetalFX Upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1072"
  },
  {
    "text": "When deciding which of these two effects to choose, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1075"
  },
  {
    "text": "there are some considerations you should also keep in mind.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1078"
  },
  {
    "text": "With ever-increasing shading costs and pixel counts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1081"
  },
  {
    "text": "temporal AA and upscaling is here to stay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1085"
  },
  {
    "text": "Amortizing pixels temporally increases visual fidelity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1087"
  },
  {
    "text": "and boosts performance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1091"
  },
  {
    "text": "If you don’t already have a great temporal AA solution ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1093"
  },
  {
    "text": "and can render jittered color, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1096"
  },
  {
    "text": "motion, and depth buffers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1097"
  },
  {
    "text": "MetalFX temporal AA and upscaling provides ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1099"
  },
  {
    "text": "a compelling platform-optimized solution ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1102"
  },
  {
    "text": "that you should consider. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1104"
  },
  {
    "text": "If you don’t have the necessary inputs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1106"
  },
  {
    "text": "or already have a well tuned AA solution, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1108"
  },
  {
    "text": "consider using MetalFX spatial upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1110"
  },
  {
    "text": "With that, hopefully you now have a better understanding ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1114"
  },
  {
    "text": "of which upscaling effect to choose. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1116"
  },
  {
    "text": "I will next show examples of both of these effects running live ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1119"
  },
  {
    "text": "in Metal applications. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1122"
  },
  {
    "text": "Here’s a side by side comparison of the “Bistro” scene ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1124"
  },
  {
    "text": "from our “Modern Rendering with Metal” sample code, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1127"
  },
  {
    "text": "which features real-time rendering algorithms, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1130"
  },
  {
    "text": "like ambient occlusion and volumetric fog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1132"
  },
  {
    "text": "Native rendering at 1080p on the left ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1136"
  },
  {
    "text": "versus 4K output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1138"
  },
  {
    "text": "with MetalFX Spatial upscaling on the right. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1140"
  },
  {
    "text": "Note that this sample has its own temporal anti-aliasing solution, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1142"
  },
  {
    "text": "which we use as input for MetalFX spatial upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1146"
  },
  {
    "text": "Zooming in more closely at the scooter...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1150"
  },
  {
    "text": "On the left, the image is a bit blurry, while on the right, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1155"
  },
  {
    "text": "the spatially upscaled output results ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1158"
  },
  {
    "text": "in a sharper image with cleaner edges. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1160"
  },
  {
    "text": "The straight line on the handle bar is nicely antialiased.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1163"
  },
  {
    "text": "The curve on the body is also much smoother.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1168"
  },
  {
    "text": "Let's do a performance comparison. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1172"
  },
  {
    "text": "On the left is a native rendering at 4K. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1175"
  },
  {
    "text": "On the right is the 4K output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1178"
  },
  {
    "text": "from MetalFX Spatial upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1180"
  },
  {
    "text": "As the camera moves, the native rendering on the left ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1184"
  },
  {
    "text": "is running at a choppy frame rate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1186"
  },
  {
    "text": "while the spatially upscaled output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1188"
  },
  {
    "text": "on the right is much smoother.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1190"
  },
  {
    "text": "Next is a side-by-side comparison ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1195"
  },
  {
    "text": "of a ray-traced scene with many reflections and shadows.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1197"
  },
  {
    "text": "On the left is a native rendering at 1080p. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1201"
  },
  {
    "text": "On the right is the 4K output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1204"
  },
  {
    "text": "with MetalFX Temporal AA and upscaling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1206"
  },
  {
    "text": "Zooming in more closely at the chandelier...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1210"
  },
  {
    "text": "The native output on the left has an aliased look, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1214"
  },
  {
    "text": "while the temporally upscaled output on the right ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1217"
  },
  {
    "text": "has sharp edges with more fine details. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1219"
  },
  {
    "text": "The shadow is nice and crisp rather than fuzzy looking. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1222"
  },
  {
    "text": "And fine details on the chandelier can now be recognized.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1226"
  },
  {
    "text": "Performance gains are also apparent ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1232"
  },
  {
    "text": "with MetalFX Temporal AA and upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1234"
  },
  {
    "text": "On the left is native rendering at 4K. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1237"
  },
  {
    "text": "On the right is the 4K output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1240"
  },
  {
    "text": "with MetalFX Temporal AA and upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1241"
  },
  {
    "text": "As the camera moves, the native rendering on the left ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1245"
  },
  {
    "text": "is running at a very low frame rate, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1247"
  },
  {
    "text": "while the temporally upscaled output ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1250"
  },
  {
    "text": "on the right is much smoother.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1251"
  },
  {
    "text": "Leading game developers are excited ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1266"
  },
  {
    "text": "by the capabilities of MetalFX Upscaling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1268"
  },
  {
    "text": "and will be bringing \"Grid: Legends,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1271"
  },
  {
    "text": "\"Resident Evil: Village,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1273"
  },
  {
    "text": "and \"No Man’s Sky\" to Mac later this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1275"
  },
  {
    "text": "Next, I’ll show you some early work using the framework. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1278"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1281"
  },
  {
    "text": "In this scene, we can see the incredible visuals ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1285"
  },
  {
    "text": "and fluid gameplay of \"No Man’s Sky\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1288"
  },
  {
    "text": "using MetalFX Temporal AA and Upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1290"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1293"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1294"
  },
  {
    "text": "To recap, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1301"
  },
  {
    "text": "MetalFX is a new API with a focus on upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1302"
  },
  {
    "text": "Spatial upscaling is easy to adopt ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1305"
  },
  {
    "text": "and delivers substantial performance gains, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1307"
  },
  {
    "text": "and you can use Temporal AA and upscaling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1310"
  },
  {
    "text": "to deliver higher quality rendering. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1312"
  },
  {
    "text": "Following the best practices I talked about earlier will ensure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1314"
  },
  {
    "text": "you get the most out of MetalFX Upscaling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1317"
  },
  {
    "text": "Thank you for watching. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1321"
  },
  {
    "text": "♪ ♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10103/?time=1322"
  }
]