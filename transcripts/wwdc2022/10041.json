[
  {
    "text": "♪ Mellow instrumental hip-hop music ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=0"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=3"
  },
  {
    "text": "Lais Minchillo: Hi, my name is Lais. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=9"
  },
  {
    "text": "David Silver: And I'm David. And we will be presenting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=11"
  },
  {
    "text": "this year's new features in Wallet and Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=13"
  },
  {
    "text": "We launched Apple Pay in 2014, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=17"
  },
  {
    "text": "setting a new benchmark for making fast, secure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=20"
  },
  {
    "text": "and private payments in store, online and in-app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=23"
  },
  {
    "text": "Since then, we've expanded Apple Pay across the globe. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=27"
  },
  {
    "text": "Apple Pay is now available in 72 countries and territories ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=31"
  },
  {
    "text": "and handles more than a million transactions every day. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=35"
  },
  {
    "text": "Today we're introducing exciting new features and APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=38"
  },
  {
    "text": "into Wallet and Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=42"
  },
  {
    "text": "Lais will tell you more. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=43"
  },
  {
    "text": "Lais: Thank you, David! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=45"
  },
  {
    "text": "Let's take a look at the main agenda for today. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=47"
  },
  {
    "text": "First, we'll talk about some quick updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=50"
  },
  {
    "text": "We are adding support for payments to multiple merchants ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=53"
  },
  {
    "text": "in a single transaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=56"
  },
  {
    "text": "We are also greatly improving support for automatic payments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=59"
  },
  {
    "text": "including subscriptions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=62"
  },
  {
    "text": "With order tracking, you can enhance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=65"
  },
  {
    "text": "the postpurchase experience for your customers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=67"
  },
  {
    "text": "And finally, David will talk about identity verification ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=70"
  },
  {
    "text": "with IDs in Wallet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=74"
  },
  {
    "text": "We have a few exciting updates to share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=77"
  },
  {
    "text": "Tap to Pay on iPhone was announced earlier this year ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=80"
  },
  {
    "text": "and launched in iOS 15.4 in the US. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=83"
  },
  {
    "text": "Tap to Pay on iPhone provides a secure, private, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=87"
  },
  {
    "text": "and easy way to accept contactless payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=89"
  },
  {
    "text": "You can easily integrate this into your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=93"
  },
  {
    "text": "to seamlessly and securely accept contactless payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=95"
  },
  {
    "text": "This includes Apple Pay, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=99"
  },
  {
    "text": "contactless credit and debit cards, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=101"
  },
  {
    "text": "and other digital wallets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=103"
  },
  {
    "text": "The transaction is completed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=105"
  },
  {
    "text": "through a simple tap to the iPhone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=106"
  },
  {
    "text": "removing the need for additional hardware ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=109"
  },
  {
    "text": "or payment terminals. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=111"
  },
  {
    "text": "Meanwhile, in macOS 13, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=113"
  },
  {
    "text": "we redesigned the Apple Pay experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=115"
  },
  {
    "text": "The iOS payment sheet redesign last year ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=118"
  },
  {
    "text": "was a great success ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=121"
  },
  {
    "text": "and this year we're bringing a similar experience to macOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=122"
  },
  {
    "text": "We used SwiftUI to implement this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=126"
  },
  {
    "text": "which helped us bring new features to macOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=129"
  },
  {
    "text": "at the same time as iOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=131"
  },
  {
    "text": "All of the Apple Pay features we are introducing today ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=133"
  },
  {
    "text": "are also supported on Mac. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=136"
  },
  {
    "text": "We're introducing new SwiftUI APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=139"
  },
  {
    "text": "Integrating Add to Apple Wallet or Apple Pay buttons ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=143"
  },
  {
    "text": "in your SwiftUI app will be much easier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=146"
  },
  {
    "text": "These new APIs will significantly reduce ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=149"
  },
  {
    "text": "the amount of code you need to write. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=151"
  },
  {
    "text": "Let's take a look at how you can add a button ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=153"
  },
  {
    "text": "to prompt the user to add an airline pass. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=156"
  },
  {
    "text": "First, create the pass. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=159"
  },
  {
    "text": "You should handle the case where it wasn't successfully loaded. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=161"
  },
  {
    "text": "This could happen if the pass data is malformed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=165"
  },
  {
    "text": "or if it was not properly signed, for example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=167"
  },
  {
    "text": "Next, call AddPassToWalletButton with an array of passes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=171"
  },
  {
    "text": "In this example, we have an array with only one element, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=176"
  },
  {
    "text": "but you can have multiple passes on the same button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=179"
  },
  {
    "text": "The result is passed in as a Bool, and you can save, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=182"
  },
  {
    "text": "log, or trigger other actions in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=185"
  },
  {
    "text": "based on whether the user has added a pass or not. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=188"
  },
  {
    "text": "In this example, I'm saving that to a state var. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=192"
  },
  {
    "text": "And that's it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=195"
  },
  {
    "text": "You can also customize the button's size and style ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=196"
  },
  {
    "text": "within a set of minimum values. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=199"
  },
  {
    "text": "This is the default size: width 250 and height 50. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=201"
  },
  {
    "text": "You could also make it wider...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=208"
  },
  {
    "text": "...or taller.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=212"
  },
  {
    "text": "This wraps up how you can add ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=215"
  },
  {
    "text": "an Add to Apple Wallet button in SwiftUI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=217"
  },
  {
    "text": "Now, let's see how you can add a Pay with Apple Pay button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=220"
  },
  {
    "text": "First, create a payment request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=225"
  },
  {
    "text": "using the PKPaymentRequest class, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=227"
  },
  {
    "text": "setting your usual configuration on it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=229"
  },
  {
    "text": "Then, create an authorizationChange method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=232"
  },
  {
    "text": "Now that we have these two pieces ready, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=237"
  },
  {
    "text": "let's add code to show the button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=239"
  },
  {
    "text": "Add a call to PayWithApplePayButton, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=241"
  },
  {
    "text": "passing in the label, the paymentRequest object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=244"
  },
  {
    "text": "and the authorizationChange method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=247"
  },
  {
    "text": "To handle cases where Apple Pay isn't supported ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=250"
  },
  {
    "text": "by the current device, you can pass in a fallback view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=253"
  },
  {
    "text": "Just like the Add Pass button, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=256"
  },
  {
    "text": "you can also customize its size and style. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=258"
  },
  {
    "text": "In total, there are 17 different labels, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=263"
  },
  {
    "text": "so you are able to customize the pay button ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=266"
  },
  {
    "text": "to align with your use case. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=268"
  },
  {
    "text": "These are available on iOS, iPadOS, macOS, and watchOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=271"
  },
  {
    "text": "Now, let's take a look at multimerchant payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=278"
  },
  {
    "text": "In iOS 16, we're introducing the ability to request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=282"
  },
  {
    "text": "multiple payment tokens for different merchants ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=286"
  },
  {
    "text": "in the same transaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=288"
  },
  {
    "text": "This is useful for things like online marketplaces, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=290"
  },
  {
    "text": "travel bookings, and ticketing services. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=293"
  },
  {
    "text": "Let's take a closer look at an example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=296"
  },
  {
    "text": "Imagine Allison is planning a trip. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=299"
  },
  {
    "text": "She goes to a travel agency's website ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=301"
  },
  {
    "text": "and they conveniently offer her ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=304"
  },
  {
    "text": "all of the things she needs to book -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=306"
  },
  {
    "text": "flight tickets, a hotel stay, and a car rental. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=308"
  },
  {
    "text": "Allison just needs to pay a total of $500 dollars. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=312"
  },
  {
    "text": "Allison provides the travel agency ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=316"
  },
  {
    "text": "her full credit card information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=318"
  },
  {
    "text": "Now, you might imagine that the travel agency ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=320"
  },
  {
    "text": "will charge Allison's credit card $500 dollars, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=323"
  },
  {
    "text": "and then pay the other companies involved. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=326"
  },
  {
    "text": "But what typically happens is the travel agency ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=329"
  },
  {
    "text": "simply passes along the credit card information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=331"
  },
  {
    "text": "to each company to make their individual charges. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=334"
  },
  {
    "text": "This works, but it's not great ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=338"
  },
  {
    "text": "for Allison's privacy and security ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=340"
  },
  {
    "text": "to have her credit card information shared around. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=342"
  },
  {
    "text": "Now, with the new multimerchant payment API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=346"
  },
  {
    "text": "it's possible to request a payment token ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=349"
  },
  {
    "text": "for each merchant involved in a transaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=352"
  },
  {
    "text": "Using these payment tokens, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=355"
  },
  {
    "text": "the multiple companies involved can each charge Allison ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=357"
  },
  {
    "text": "for the relevant amount she authorized. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=360"
  },
  {
    "text": "Allison can now book and pay for her trip ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=363"
  },
  {
    "text": "while taking advantage of the privacy and security benefits ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=365"
  },
  {
    "text": "that Apple Pay offers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=369"
  },
  {
    "text": "The payment sheet has been updated to show customers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=372"
  },
  {
    "text": "a breakdown of the submerchants involved in a transaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=374"
  },
  {
    "text": "Customers can tap on the total field ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=378"
  },
  {
    "text": "to navigate to the payment summary. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=380"
  },
  {
    "text": "Here, the customer can see a breakdown ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=382"
  },
  {
    "text": "of all the merchants involved in the transaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=385"
  },
  {
    "text": "along with the amount authorized for each one. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=387"
  },
  {
    "text": "Now, let's look at how you can add ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=390"
  },
  {
    "text": "multimerchant payments to your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=392"
  },
  {
    "text": "First, create a payment request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=395"
  },
  {
    "text": "using the PKPaymentRequest class, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=397"
  },
  {
    "text": "setting your usual configuration on it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=400"
  },
  {
    "text": "Then add summary items for your payment, including the total. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=403"
  },
  {
    "text": "Next, create a payment token context ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=408"
  },
  {
    "text": "for each additional merchant involved in the transaction, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=410"
  },
  {
    "text": "using the new PKPaymentTokenContext class. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=414"
  },
  {
    "text": "Provide details for each merchant, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=418"
  },
  {
    "text": "as well as the amount to authorize for each. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=421"
  },
  {
    "text": "Finally, set the payment token contexts on the payment request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=424"
  },
  {
    "text": "Keep in mind that the sum of the amounts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=429"
  },
  {
    "text": "for all of your payment token contexts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=431"
  },
  {
    "text": "must be less than or equal to the total amount ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=434"
  },
  {
    "text": "of the payment request itself. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=437"
  },
  {
    "text": "Also, you should always use the same external identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=439"
  },
  {
    "text": "for the same merchant any time you request a payment token ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=443"
  },
  {
    "text": "for that merchant in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=446"
  },
  {
    "text": "For adopting multi-merchant payments ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=448"
  },
  {
    "text": "with Apple Pay on the web, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=450"
  },
  {
    "text": "check out the Apple Pay JS API documentation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=452"
  },
  {
    "text": "Now, let's take a look at our improvements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=456"
  },
  {
    "text": "to automatic payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=459"
  },
  {
    "text": "In iOS 16, we're introducing the ability for people to view ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=461"
  },
  {
    "text": "and manage automatic payments they've set up with merchants, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=465"
  },
  {
    "text": "right from the Wallet app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=468"
  },
  {
    "text": "In this release, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=470"
  },
  {
    "text": "we're supporting two types of automatic payments: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=471"
  },
  {
    "text": "recurring payments, which includes things like ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=474"
  },
  {
    "text": "subscriptions, installments, or recurring billing; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=477"
  },
  {
    "text": "and automatic reload payments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=480"
  },
  {
    "text": "such as store card balance top-ups. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=482"
  },
  {
    "text": "We're introducing new APIs to allow you to request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=485"
  },
  {
    "text": "to set up an automatic payment when you make a payment request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=488"
  },
  {
    "text": "We're also introducing Apple Pay merchant tokens, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=492"
  },
  {
    "text": "a new kind of payment token tied to a customer's Apple ID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=495"
  },
  {
    "text": "which can help you more reliably charge your customers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=499"
  },
  {
    "text": "on an ongoing basis. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=502"
  },
  {
    "text": "Let's take a closer look at Apple Pay merchant tokens ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=504"
  },
  {
    "text": "to see how they can be useful. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=507"
  },
  {
    "text": "Imagine Julie is paying for a book club membership ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=509"
  },
  {
    "text": "using Apple Pay on her iPhone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=512"
  },
  {
    "text": "The book club makes a payment request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=514"
  },
  {
    "text": "and when Julie authorizes the payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=517"
  },
  {
    "text": "the book club receives a payment token, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=519"
  },
  {
    "text": "and every month they can use that to charge Julie ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=521"
  },
  {
    "text": "her membership fee. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=524"
  },
  {
    "text": "This payment token is linked to the device Julie used ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=526"
  },
  {
    "text": "to authorize the payment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=529"
  },
  {
    "text": "But what happens if Julie gets a new iPhone? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=531"
  },
  {
    "text": "With the new automatic payments feature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=535"
  },
  {
    "text": "the book club will instead receive ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=537"
  },
  {
    "text": "an Apple Pay merchant token, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=539"
  },
  {
    "text": "if Julie's payment network supports it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=541"
  },
  {
    "text": "This payment token is tied to Julie's Apple ID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=544"
  },
  {
    "text": "rather than to her iPhone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=547"
  },
  {
    "text": "which provides better assurances for ongoing authorizations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=549"
  },
  {
    "text": "This means that if Julie upgrades her iPhone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=554"
  },
  {
    "text": "or resets her current phone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=556"
  },
  {
    "text": "the book club can continue to reliably charge Julie ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=558"
  },
  {
    "text": "her monthly membership fee. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=561"
  },
  {
    "text": "If you accept Apple Pay for these types of payments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=563"
  },
  {
    "text": "it's a great idea to adopt automatic payments to ensure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=566"
  },
  {
    "text": "you can continue reliably charging your customers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=570"
  },
  {
    "text": "as well as avoid any interruption to their services. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=572"
  },
  {
    "text": "The first type of automatic payment we're supporting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=576"
  },
  {
    "text": "in this release is recurring payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=578"
  },
  {
    "text": "Recurring payments have a fixed or variable amount ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=581"
  },
  {
    "text": "that is charged on a regular schedule, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=585"
  },
  {
    "text": "such as weekly, monthly, or annually. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=587"
  },
  {
    "text": "These payments can end on a certain date ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=591"
  },
  {
    "text": "or they can be ongoing until canceled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=593"
  },
  {
    "text": "A trial or introductory period is also supported. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=597"
  },
  {
    "text": "Subscriptions, installment plans, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=601"
  },
  {
    "text": "and regular billing are perfect uses ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=603"
  },
  {
    "text": "for this type of payment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=606"
  },
  {
    "text": "Let's take a look at how you can set up a recurring payment ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=608"
  },
  {
    "text": "in your app using automatic payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=611"
  },
  {
    "text": "Start by specifying the amount and duration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=614"
  },
  {
    "text": "of the recurring payment, using the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=617"
  },
  {
    "text": "PKRecurringPaymentSummaryItem class. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=619"
  },
  {
    "text": "For recurring payments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=622"
  },
  {
    "text": "you can specify both a regular billing period ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=624"
  },
  {
    "text": "as well as an introductory or trial period. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=627"
  },
  {
    "text": "You can use the startDate and endDate properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=630"
  },
  {
    "text": "to indicate when the trial period ends ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=634"
  },
  {
    "text": "and the regular billing period starts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=636"
  },
  {
    "text": "Next, create a recurringPaymentRequest ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=640"
  },
  {
    "text": "using the new PKRecurringPaymentRequest class. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=643"
  },
  {
    "text": "Provide a description of the payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=647"
  },
  {
    "text": "the regular billing period, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=649"
  },
  {
    "text": "as well as a managementURL to a web page ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=651"
  },
  {
    "text": "where the customer can update or delete the payment method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=654"
  },
  {
    "text": "for the recurring payment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=657"
  },
  {
    "text": "You can also optionally provide a trial billing period ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=659"
  },
  {
    "text": "as well as billingAgreement text ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=663"
  },
  {
    "text": "to help explain the terms of the payment to the customer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=665"
  },
  {
    "text": "Finally, you can optionally provide a tokenNotificationURL ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=669"
  },
  {
    "text": "where your server can receive life cycle notifications ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=673"
  },
  {
    "text": "about the Apple Pay merchant token for the payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=676"
  },
  {
    "text": "if one was issued. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=679"
  },
  {
    "text": "For example, you can receive notifications ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=681"
  },
  {
    "text": "if the card issuer or the user deletes the token. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=683"
  },
  {
    "text": "For more information about merchant token ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=687"
  },
  {
    "text": "life cycle notifications, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=690"
  },
  {
    "text": "see the Apple Pay Merchant Token Management API documentation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=692"
  },
  {
    "text": "Finally, set the recurringPaymentRequest ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=696"
  },
  {
    "text": "on the paymentRequest object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=700"
  },
  {
    "text": "A quick note on summary items, your recurring payment ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=702"
  },
  {
    "text": "will not be added to the payment request's summary items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=705"
  },
  {
    "text": "automatically. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=708"
  },
  {
    "text": "So be sure to add items for it to the summary items array. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=709"
  },
  {
    "text": "The total for the payment request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=714"
  },
  {
    "text": "should be the first amount ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=716"
  },
  {
    "text": "that the customer will be charged. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=717"
  },
  {
    "text": "So in this example, the total is set to display ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=719"
  },
  {
    "text": "the trial period amount, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=722"
  },
  {
    "text": "as that's the first amount the customer will be charged. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=723"
  },
  {
    "text": "The payment sheet will show details ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=727"
  },
  {
    "text": "of your recurring payment to customers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=729"
  },
  {
    "text": "and they can tap on the Billing Details section ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=731"
  },
  {
    "text": "to read further. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=734"
  },
  {
    "text": "Now, let's take a look at the second type of automatic payment ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=737"
  },
  {
    "text": "we're supporting in this release: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=740"
  },
  {
    "text": "automatic reload payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=742"
  },
  {
    "text": "With this type of payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=744"
  },
  {
    "text": "a balance is automatically topped up ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=745"
  },
  {
    "text": "with a fixed amount whenever the balance drops below ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=747"
  },
  {
    "text": "a certain threshold amount. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=750"
  },
  {
    "text": "Automatic reload payments are perfect for things like ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=752"
  },
  {
    "text": "store card top-ups and prepaid balances. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=755"
  },
  {
    "text": "To request to set up an automatic reload payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=759"
  },
  {
    "text": "start by specifying the reload and threshold amounts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=762"
  },
  {
    "text": "using the new PKAutomatic ReloadPaymentSummaryItem class. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=766"
  },
  {
    "text": "Next, create an automaticReloadPaymentRequest ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=771"
  },
  {
    "text": "using the new PKAutomatic ReloadPaymentRequest class, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=775"
  },
  {
    "text": "passing in a description of the payment, the billing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=779"
  },
  {
    "text": "and a management URL, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=782"
  },
  {
    "text": "just like for recurring payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=784"
  },
  {
    "text": "You can also optionally provide billing agreement text ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=786"
  },
  {
    "text": "and a token notification URL. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=790"
  },
  {
    "text": "Finally, set the automatic reload payment request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=793"
  },
  {
    "text": "on the payment request object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=796"
  },
  {
    "text": "Again, be sure to include your automatic reload payment ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=799"
  },
  {
    "text": "in the summary items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=802"
  },
  {
    "text": "and set the total of the paymentRequest appropriately. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=804"
  },
  {
    "text": "For adopting automatic payments with Apple Pay on the web, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=807"
  },
  {
    "text": "check out the Apple Pay JS API documentation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=811"
  },
  {
    "text": "Here's how the automatic reload payment appears ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=815"
  },
  {
    "text": "in the payment sheet for your customers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=817"
  },
  {
    "text": "Finally, here's a few things to remember ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=821"
  },
  {
    "text": "to help give your customers the best possible experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=824"
  },
  {
    "text": "when you adopt automatic payments in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=827"
  },
  {
    "text": "Remember to include summary items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=830"
  },
  {
    "text": "for your automatic payment as these are not added for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=832"
  },
  {
    "text": "The total amount of your payment request should be ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=836"
  },
  {
    "text": "the first amount the customer will be charged. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=839"
  },
  {
    "text": "You should keep the billing agreement text short. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=842"
  },
  {
    "text": "The payment sheet will only show the first 500 characters. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=845"
  },
  {
    "text": "The billing agreement text is not intended to replace ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=849"
  },
  {
    "text": "your normal billing and legal agreements. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=852"
  },
  {
    "text": "It's up to you to be compliant ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=854"
  },
  {
    "text": "with your local recurring billing laws. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=856"
  },
  {
    "text": "If you have a legal agreement to show the customer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=859"
  },
  {
    "text": "that might mean displaying it to the customer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=862"
  },
  {
    "text": "before you present the payment sheet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=864"
  },
  {
    "text": "You can only request one type of automatic payment ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=867"
  },
  {
    "text": "in a single transaction. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=870"
  },
  {
    "text": "Also, automatic payments cannot be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=872"
  },
  {
    "text": "with multi-merchant payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=874"
  },
  {
    "text": "Finally, if you want to receive life cycle notifications ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=877"
  },
  {
    "text": "for the Apple Pay merchant token issued for the payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=880"
  },
  {
    "text": "be sure to provide a token notification URL ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=884"
  },
  {
    "text": "and adopt the Apple Pay Merchant Token Management API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=887"
  },
  {
    "text": "on your server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=890"
  },
  {
    "text": "We think you'll love these new APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=892"
  },
  {
    "text": "and the benefits of Apple Pay merchant tokens. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=894"
  },
  {
    "text": "Here are just a few of our partners ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=897"
  },
  {
    "text": "that will also be adopting support for automatic payments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=898"
  },
  {
    "text": "Apple Pay merchant tokens will be supported by ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=903"
  },
  {
    "text": "American Express, Discover, Mastercard, and Visa, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=906"
  },
  {
    "text": "with support for other payment networks in the future. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=910"
  },
  {
    "text": "We are excited to introduce Order Tracking ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=914"
  },
  {
    "text": "to enhance the postpurchase experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=916"
  },
  {
    "text": "New in iOS 16, order tracking allows users to track orders ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=920"
  },
  {
    "text": "placed with participating merchants. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=924"
  },
  {
    "text": "Wallet now provides an intuitive overview ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=926"
  },
  {
    "text": "of active orders, recently completed orders, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=929"
  },
  {
    "text": "and past orders. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=932"
  },
  {
    "text": "I currently have a single active order for some bakery goods. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=934"
  },
  {
    "text": "My order is still in processing; I'll get back to that later. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=938"
  },
  {
    "text": "For now, I want to buy some toys and accessories for my cat ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=942"
  },
  {
    "text": "from Pet Avenue. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=946"
  },
  {
    "text": "I choose to check out with Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=947"
  },
  {
    "text": "Shortly after I authorize the payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=950"
  },
  {
    "text": "I receive a notification to track my order in Wallet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=952"
  },
  {
    "text": "Interacting with that notification ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=955"
  },
  {
    "text": "takes me to the details of my order ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=958"
  },
  {
    "text": "where I can check the current status. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=960"
  },
  {
    "text": "I can see the order status, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=962"
  },
  {
    "text": "including shipping and tracking information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=964"
  },
  {
    "text": "and the list of line items I have ordered. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=966"
  },
  {
    "text": "Further below, I have multiple options to contact Pet Avenue, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=969"
  },
  {
    "text": "check the payment information, and go back to Pet Avenue's app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=973"
  },
  {
    "text": "Now, imagine Pet Avenue is really fast ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=978"
  },
  {
    "text": "in processing incoming orders and they just shipped my items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=981"
  },
  {
    "text": "As soon as Pet Avenue shipped my order, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=985"
  },
  {
    "text": "they have updated the available information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=987"
  },
  {
    "text": "I can see the status changed to \"On the Way,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=990"
  },
  {
    "text": "with an estimated delivery date of June 10th. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=993"
  },
  {
    "text": "They also included a custom message ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=996"
  },
  {
    "text": "and tracking information for the shipment. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=998"
  },
  {
    "text": "Oh, remember my baking goods? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1001"
  },
  {
    "text": "I just got a notification that they are ready for pickup. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1003"
  },
  {
    "text": "Let's check it out. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1006"
  },
  {
    "text": "I have ordered my bakery goods for pick up. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1008"
  },
  {
    "text": "They are ready for pick up, that's great! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1010"
  },
  {
    "text": "Bake My Breath Away has provided my pickup window, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1012"
  },
  {
    "text": "pickup instructions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1015"
  },
  {
    "text": "and a barcode to present upon arrival. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1017"
  },
  {
    "text": "We've seen that order tracking works seamlessly with Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1019"
  },
  {
    "text": "Let's have a look at how you can integrate order tracking ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1023"
  },
  {
    "text": "into your customer experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1026"
  },
  {
    "text": "To get started with order tracking, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1028"
  },
  {
    "text": "first, you must create an Order Type ID ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1030"
  },
  {
    "text": "in your developer account. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1033"
  },
  {
    "text": "An Order Type ID identifies your organization as an entity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1035"
  },
  {
    "text": "that provides order information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1039"
  },
  {
    "text": "You can register multiple Order Type IDs -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1042"
  },
  {
    "text": "for example, to provide order information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1044"
  },
  {
    "text": "on behalf of multiple merchants. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1046"
  },
  {
    "text": "Also create an Order Type ID Certificate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1049"
  },
  {
    "text": "You will use the certificate to build order packages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1052"
  },
  {
    "text": "and update orders. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1055"
  },
  {
    "text": "Orders are distributed as order packages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1058"
  },
  {
    "text": "An order package includes all the metadata and information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1061"
  },
  {
    "text": "for an order. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1064"
  },
  {
    "text": "It can represent a wide range of scenarios, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1066"
  },
  {
    "text": "including shipping, pickup, and multifulfillment orders. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1068"
  },
  {
    "text": "An order package also includes images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1073"
  },
  {
    "text": "like your logo and line item images. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1075"
  },
  {
    "text": "You can also add localizations ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1078"
  },
  {
    "text": "to support your diverse range of customers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1080"
  },
  {
    "text": "Every order package must be cryptographically signed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1083"
  },
  {
    "text": "to verify its origin. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1086"
  },
  {
    "text": "Once everything is in place, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1088"
  },
  {
    "text": "order packages are compressed for distribution. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1090"
  },
  {
    "text": "Check out the sample order packages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1094"
  },
  {
    "text": "attached to this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1095"
  },
  {
    "text": "And for more information on order packages, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1097"
  },
  {
    "text": "see the developer documentation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1099"
  },
  {
    "text": "Adding an order to Wallet works seamlessly with Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1102"
  },
  {
    "text": "When your customer authorized a payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1105"
  },
  {
    "text": "your app or web page receives payment information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1108"
  },
  {
    "text": "then sends it to your server for processing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1111"
  },
  {
    "text": "If processing the payment information succeeds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1114"
  },
  {
    "text": "your server creates an order and some metadata. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1117"
  },
  {
    "text": "Your server then returns details about that order ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1121"
  },
  {
    "text": "to your app or web page to include in the result. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1123"
  },
  {
    "text": "The order details enable the device to asynchronously request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1127"
  },
  {
    "text": "the order from your server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1130"
  },
  {
    "text": "Your server then returns the order package to the device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1133"
  },
  {
    "text": "When your server creates an order, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1137"
  },
  {
    "text": "assign an Order ID that is unique ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1139"
  },
  {
    "text": "within the namespace of your Order Type ID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1141"
  },
  {
    "text": "Your server must also generate a secure authentication token. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1144"
  },
  {
    "text": "This is a shared secret that is part of the order details. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1148"
  },
  {
    "text": "The device will use the token to authenticate itself ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1152"
  },
  {
    "text": "when it requests the order. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1155"
  },
  {
    "text": "Let's take a look at an example ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1157"
  },
  {
    "text": "for returning a payment authorization result. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1159"
  },
  {
    "text": "When your customer authorized a payment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1162"
  },
  {
    "text": "your app sends the payment information to your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1164"
  },
  {
    "text": "and asks it to create an order. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1167"
  },
  {
    "text": "Check whether the server result indicates success ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1169"
  },
  {
    "text": "and handle any error returned by your server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1172"
  },
  {
    "text": "If the server result does indicate success, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1176"
  },
  {
    "text": "complete the payment with an appropriate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1179"
  },
  {
    "text": "authorization result. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1181"
  },
  {
    "text": "To return a payment authorization result ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1184"
  },
  {
    "text": "with order details, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1186"
  },
  {
    "text": "first, extract them from the server result. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1187"
  },
  {
    "text": "Then create a PKPaymentOrderDetails object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1191"
  },
  {
    "text": "with the Order Ttype ID, Order ID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1195"
  },
  {
    "text": "the URL to your server, and the authenticationToken. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1199"
  },
  {
    "text": "Assign the PKPaymentOrderDetails object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1203"
  },
  {
    "text": "to the new orderDetails property on PKPaymentAuthorizationResult. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1206"
  },
  {
    "text": "That's it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1212"
  },
  {
    "text": "You can complete a payment with order details on the web too. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1213"
  },
  {
    "text": "As before, extract the order details from the server result. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1217"
  },
  {
    "text": "Then include the order details ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1222"
  },
  {
    "text": "in the data you complete the payment with. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1224"
  },
  {
    "text": "To be able to update an order, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1227"
  },
  {
    "text": "create an order package that indicates support ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1229"
  },
  {
    "text": "for automatic updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1231"
  },
  {
    "text": "When the order is added, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1234"
  },
  {
    "text": "the device will register for updates to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1236"
  },
  {
    "text": "Your server must store information about registrations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1238"
  },
  {
    "text": "Later on, when your server updates the order, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1242"
  },
  {
    "text": "use the registration information to notify devices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1245"
  },
  {
    "text": "that registered for updates to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1249"
  },
  {
    "text": "When the device receives the push notification, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1252"
  },
  {
    "text": "it will again request the order from your server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1255"
  },
  {
    "text": "Your server then returns the updated order package ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1258"
  },
  {
    "text": "to the device. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1261"
  },
  {
    "text": "Only your customers and you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1263"
  },
  {
    "text": "should know what they have ordered. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1265"
  },
  {
    "text": "We designed order tracking with privacy in mind. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1267"
  },
  {
    "text": "Order information is exchanged directly ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1270"
  },
  {
    "text": "between devices and your server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1272"
  },
  {
    "text": "When orders are synchronized via iCloud, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1275"
  },
  {
    "text": "they are end-to-end encrypted. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1278"
  },
  {
    "text": "Follow these practices to provide ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1280"
  },
  {
    "text": "the best customer experience possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1281"
  },
  {
    "text": "Associate your app with orders that you provide. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1284"
  },
  {
    "text": "If your app delivers notifications and is installed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1287"
  },
  {
    "text": "you can disable order tracking notifications. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1290"
  },
  {
    "text": "This helps to prevent duplicate notifications. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1294"
  },
  {
    "text": "Use the knowledge you have about your customer preferences ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1297"
  },
  {
    "text": "to provide relevant localizations only. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1300"
  },
  {
    "text": "Be mindful of the order package size. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1304"
  },
  {
    "text": "Try to keep the size small ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1306"
  },
  {
    "text": "to reduce expensive networking cost. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1308"
  },
  {
    "text": "When you update an order, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1311"
  },
  {
    "text": "promptly notify devices that registered for updates to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1312"
  },
  {
    "text": "Orders in Wallet should match the actual state of the order. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1316"
  },
  {
    "text": "Make sure to also check out the HIG for order tracking. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1320"
  },
  {
    "text": "Platforms can make your integration of order tracking ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1325"
  },
  {
    "text": "much simpler. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1327"
  },
  {
    "text": "We are happy to announce Shopify, Narvar, and Route ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1329"
  },
  {
    "text": "will support order tracking by fall. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1332"
  },
  {
    "text": "Look out for more platforms supporting order tracking ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1335"
  },
  {
    "text": "in the coming months. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1338"
  },
  {
    "text": "Order tracking is a great way to enhance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1339"
  },
  {
    "text": "the postpurchase experience for your customers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1341"
  },
  {
    "text": "With automatic updates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1344"
  },
  {
    "text": "your customers will always be up to date ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1346"
  },
  {
    "text": "about the status of their orders. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1348"
  },
  {
    "text": "We believe your customers will love this experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1351"
  },
  {
    "text": "and we look forward to ordering with you soon! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1353"
  },
  {
    "text": "Now, I'll pass over to David. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1356"
  },
  {
    "text": "David: Thanks, Lais! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1359"
  },
  {
    "text": "I'm super excited to talk about the new functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1361"
  },
  {
    "text": "we've added to IDs in Wallet in iOS 16. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1364"
  },
  {
    "text": "We launched IDs in Wallet earlier this year in iOS 15.4. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1368"
  },
  {
    "text": "It allows users in supported US states ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1372"
  },
  {
    "text": "to add their driver's license or State ID to Wallet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1375"
  },
  {
    "text": "IDs in Wallet are issued by the same issuing authorities ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1378"
  },
  {
    "text": "as users' physical IDs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1381"
  },
  {
    "text": "in the US, that's their State's Department of Motor Vehicles ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1384"
  },
  {
    "text": "or equivalent organization. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1387"
  },
  {
    "text": "In iOS 16, we've added a new API that allows apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1390"
  },
  {
    "text": "and App Clips to request information from IDs in Wallet ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1394"
  },
  {
    "text": "in order to verify a user's age or identity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1397"
  },
  {
    "text": "Your app will request the information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1401"
  },
  {
    "text": "the user will review and approve the request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1404"
  },
  {
    "text": "Then your app will send the response to your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1406"
  },
  {
    "text": "for decryption and verification. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1409"
  },
  {
    "text": "You can request a number of data elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1412"
  },
  {
    "text": "from the user's ID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1414"
  },
  {
    "text": "These include their name, their address, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1415"
  },
  {
    "text": "their date of birth, their photo -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1419"
  },
  {
    "text": "known as the portrait -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1422"
  },
  {
    "text": "the issuing authority that issued their ID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1423"
  },
  {
    "text": "the number and expiration date of their physical ID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1426"
  },
  {
    "text": "and the driving privileges granted by their ID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1429"
  },
  {
    "text": "if there are any. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1432"
  },
  {
    "text": "A very common use case for IDs is to verify someone's age. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1434"
  },
  {
    "text": "With a physical ID, that means looking at their date of birth. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1438"
  },
  {
    "text": "But the date of birth reveals far more information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1442"
  },
  {
    "text": "than is necessary just to verify age. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1444"
  },
  {
    "text": "If you're checking my age, you don't actually need to know ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1448"
  },
  {
    "text": "the exact day or year I was born, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1450"
  },
  {
    "text": "or even how old I am. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1452"
  },
  {
    "text": "You just need to know if I'm old enough. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1454"
  },
  {
    "text": "With IDs in Wallet, you can ask that question directly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1457"
  },
  {
    "text": "Your app can request a Boolean data element ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1461"
  },
  {
    "text": "indicating whether the user is above a certain age, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1463"
  },
  {
    "text": "providing a more privacy-preserving way ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1467"
  },
  {
    "text": "to do age verification than checking the full date of birth. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1469"
  },
  {
    "text": "When your app invokes the API, a sheet will show the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1473"
  },
  {
    "text": "what information you're requesting. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1476"
  },
  {
    "text": "It will also show whether you intend ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1479"
  },
  {
    "text": "to store that information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1481"
  },
  {
    "text": "and for how long you intend to store it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1482"
  },
  {
    "text": "This lets the user make an informed decision ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1484"
  },
  {
    "text": "about whether to share the information with your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1487"
  },
  {
    "text": "No information is shared until they give ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1489"
  },
  {
    "text": "their explicit approval using Face ID or Touch ID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1492"
  },
  {
    "text": "The response you receive contains just the elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1496"
  },
  {
    "text": "you requested. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1498"
  },
  {
    "text": "Other identity verification mechanisms, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1500"
  },
  {
    "text": "such as scanning a physical ID card, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1502"
  },
  {
    "text": "share everything that's on the ID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1504"
  },
  {
    "text": "By limiting the sharing to just what you need, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1507"
  },
  {
    "text": "IDs in Wallet is more privacy-preserving for the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1509"
  },
  {
    "text": "and reduces the amount of sensitive information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1512"
  },
  {
    "text": "you need to keep secure on your server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1515"
  },
  {
    "text": "The response is signed by the ID's issuing authority, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1518"
  },
  {
    "text": "making it straightforward to verify ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1521"
  },
  {
    "text": "that the information in the response is authentic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1523"
  },
  {
    "text": "Note that the issuing authority creates the ID ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1526"
  },
  {
    "text": "but is not involved at the time you invoke the API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1529"
  },
  {
    "text": "They do not learn when users share their information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1532"
  },
  {
    "text": "or to whom they share it with. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1534"
  },
  {
    "text": "To use the API, you need to request an entitlement ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1539"
  },
  {
    "text": "through your developer account. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1542"
  },
  {
    "text": "You'll then need to set up a merchant ID ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1544"
  },
  {
    "text": "and encryption certificate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1546"
  },
  {
    "text": "This process is very similar to setting up in-app payment ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1548"
  },
  {
    "text": "with Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1551"
  },
  {
    "text": "We'll talk more about how to use the ID and certificate in a little bit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1553"
  },
  {
    "text": "For now, let's talk about the verification flow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1558"
  },
  {
    "text": "At a high level, it consists of four steps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1561"
  },
  {
    "text": "First, your app will invoke the API in the PassKit framework ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1564"
  },
  {
    "text": "and specify the information you're requesting. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1567"
  },
  {
    "text": "The system will then display a sheet ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1571"
  },
  {
    "text": "prompting the user to approve the request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1573"
  },
  {
    "text": "Once they do, your app will receive ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1576"
  },
  {
    "text": "an encrypted response. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1578"
  },
  {
    "text": "Your app will then pass that response to your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1581"
  },
  {
    "text": "for decryption and verification. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1583"
  },
  {
    "text": "First, let's talk about how to use the API in PassKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1587"
  },
  {
    "text": "If your app uses SwiftUI, you should use the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1592"
  },
  {
    "text": "VerifyIdentityWithWalletButton SwiftUI view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1594"
  },
  {
    "text": "This displays a button that triggers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1597"
  },
  {
    "text": "the identity verification flow when pressed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1599"
  },
  {
    "text": "Just like the Pay with Apple Pay and Add Pass to Wallet buttons, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1603"
  },
  {
    "text": "the Verify Identity with Wallet button provides a familiar, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1606"
  },
  {
    "text": "consistent experience across apps using the API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1610"
  },
  {
    "text": "You can choose between four different labels ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1614"
  },
  {
    "text": "to display a button that fits your use case. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1616"
  },
  {
    "text": "It automatically switches between single ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1618"
  },
  {
    "text": "and multiline versions depending on the space available to it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1620"
  },
  {
    "text": "When creating the button, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1625"
  },
  {
    "text": "you need to specify a PKIdentityRequest object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1627"
  },
  {
    "text": "which describes the information you want to request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1630"
  },
  {
    "text": "and how it should be returned. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1633"
  },
  {
    "text": "Let's take a look at how to create it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1635"
  },
  {
    "text": "You begin by creating a ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1638"
  },
  {
    "text": "PKIdentityDrivers LicenseDescriptor, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1639"
  },
  {
    "text": "which describes the data elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1642"
  },
  {
    "text": "that you're looking for. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1644"
  },
  {
    "text": "Use the addElements method to specify elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1646"
  },
  {
    "text": "you want to request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1648"
  },
  {
    "text": "along with whether you intend to store them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1649"
  },
  {
    "text": "You can invoke the addElements method multiple times ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1652"
  },
  {
    "text": "to specify different sets of elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1655"
  },
  {
    "text": "with different intents to store. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1657"
  },
  {
    "text": "In this example, I'm calling it twice. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1659"
  },
  {
    "text": "First, I add an age(atLeast: element, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1662"
  },
  {
    "text": "which is not going to be stored. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1665"
  },
  {
    "text": "Then, I call the addElements method again to request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1668"
  },
  {
    "text": "the user's givenName, familyName, and portrait, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1671"
  },
  {
    "text": "all of which may be stored for up to 30 days. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1674"
  },
  {
    "text": "The descriptor then goes into a PKIdentityRequest. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1678"
  },
  {
    "text": "The next step is to specify a merchantIdentifier to use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1683"
  },
  {
    "text": "The merchantIdentifier indicates ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1687"
  },
  {
    "text": "the encryption certificate to which the API response ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1688"
  },
  {
    "text": "will be encrypted. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1691"
  },
  {
    "text": "You'll configure both the merchantIdentifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1693"
  },
  {
    "text": "and its encryption certificate through your developer account. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1695"
  },
  {
    "text": "Finally, you'll need to specify a nonce, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1699"
  },
  {
    "text": "which will be tied to the response you receive ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1702"
  },
  {
    "text": "from the API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1703"
  },
  {
    "text": "Its an important security feature ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1705"
  },
  {
    "text": "used to prevent replays of a response ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1707"
  },
  {
    "text": "and to bind it to a specific user session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1709"
  },
  {
    "text": "Exactly how you manage the nonce is up to you, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1712"
  },
  {
    "text": "based on your own security requirements. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1715"
  },
  {
    "text": "Often, it comes from your server, because later on, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1717"
  },
  {
    "text": "your server will be responsible for enforcing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1720"
  },
  {
    "text": "that the nonce is valid. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1722"
  },
  {
    "text": "With all of those properties set, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1725"
  },
  {
    "text": "you have your PKIdentityRequest. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1727"
  },
  {
    "text": "Now, let's get back to the button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1730"
  },
  {
    "text": "If identity verification is available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1732"
  },
  {
    "text": "the button will be displayed in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1734"
  },
  {
    "text": "and tapping it will start the identity verification flow ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1737"
  },
  {
    "text": "with your request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1739"
  },
  {
    "text": "If identity verification is not available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1742"
  },
  {
    "text": "a fallback view you specify will be displayed instead. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1744"
  },
  {
    "text": "For example, this will happen if there isn't an ID in Wallet ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1748"
  },
  {
    "text": "on this iPhone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1751"
  },
  {
    "text": "You can use the fallback view ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1752"
  },
  {
    "text": "to offer other ways to verify identity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1754"
  },
  {
    "text": "Let's assume identity verification is available, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1758"
  },
  {
    "text": "and the user taps the button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1760"
  },
  {
    "text": "The system will then show a sheet with your request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1762"
  },
  {
    "text": "including the elements you requested ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1765"
  },
  {
    "text": "and your intent to store them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1767"
  },
  {
    "text": "The user can approve the request with Face ID or Touch ID, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1770"
  },
  {
    "text": "or close the sheet without approving. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1773"
  },
  {
    "text": "Your code will then receive a result object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1777"
  },
  {
    "text": "containing the outcome of the request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1779"
  },
  {
    "text": "If the request was approved, you'll receive a success result. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1782"
  },
  {
    "text": "This comes with a PKIdentityDocument object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1786"
  },
  {
    "text": "containing the encrypted response, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1789"
  },
  {
    "text": "which your app will send to your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1791"
  },
  {
    "text": "for decryption and verification. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1793"
  },
  {
    "text": "If the request was not successful, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1796"
  },
  {
    "text": "you'll receive a failure result. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1798"
  },
  {
    "text": "The most common cause of failure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1800"
  },
  {
    "text": "is that the request was not approved, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1802"
  },
  {
    "text": "in which case you'll receive a cancelled error. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1804"
  },
  {
    "text": "That was VerifyIdentityWithWalletButton, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1807"
  },
  {
    "text": "the SwiftUI version of the API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1810"
  },
  {
    "text": "Use it to display a button ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1812"
  },
  {
    "text": "that launches the identity verification flow ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1814"
  },
  {
    "text": "and requests information from IDs in Wallet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1816"
  },
  {
    "text": "If you're not using SwiftUI in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1819"
  },
  {
    "text": "you can also use the PKIdentityButton ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1822"
  },
  {
    "text": "and PKIdentityAuthorization Controller classes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1824"
  },
  {
    "text": "to accomplish the same thing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1827"
  },
  {
    "text": "OK, so, now you've requested the information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1831"
  },
  {
    "text": "the user's approved the request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1834"
  },
  {
    "text": "and your app has sent the encrypted response ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1836"
  },
  {
    "text": "to your server. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1838"
  },
  {
    "text": "Now, let's talk about what your server needs to do ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1840"
  },
  {
    "text": "to decrypt and verify that response. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1842"
  },
  {
    "text": "I'm only going to skim the surface on this topic, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1846"
  },
  {
    "text": "so please check the developer documentation for more details. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1849"
  },
  {
    "text": "The response format uses several international standards, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1853"
  },
  {
    "text": "so I strongly recommend familiarizing yourself ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1856"
  },
  {
    "text": "with those as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1858"
  },
  {
    "text": "The response data you'll receive ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1861"
  },
  {
    "text": "is in a CBOR-encoded encryption envelope. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1863"
  },
  {
    "text": "CBOR is a data format defined in RFC 8949. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1866"
  },
  {
    "text": "It's similar to JSON ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1870"
  },
  {
    "text": "but uses binary data to encode objects. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1871"
  },
  {
    "text": "The encryption envelope contains metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1874"
  },
  {
    "text": "needed for the decryption process, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1876"
  },
  {
    "text": "along with the encrypted data itself. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1878"
  },
  {
    "text": "The data is encrypted using HPKE, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1881"
  },
  {
    "text": "an encryption scheme defined in RFC 9180. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1884"
  },
  {
    "text": "Your server will decrypt this data using its private key. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1888"
  },
  {
    "text": "Once decrypted, you'll get an mdoc response object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1892"
  },
  {
    "text": "The mdoc response is defined in ISO 18013 part five, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1895"
  },
  {
    "text": "the ISO standard for mobile Driver's Licenses and State IDs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1899"
  },
  {
    "text": "The mdoc response object contains the data elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1904"
  },
  {
    "text": "that you requested. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1906"
  },
  {
    "text": "It also includes a number of security features ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1908"
  },
  {
    "text": "that your server needs to validate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1911"
  },
  {
    "text": "to ensure that the response is authentic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1912"
  },
  {
    "text": "Note that your server will perform the decryption ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1915"
  },
  {
    "text": "and validation itself. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1917"
  },
  {
    "text": "Neither Apple servers nor the issuing authority's servers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1919"
  },
  {
    "text": "are involved. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1922"
  },
  {
    "text": "Before we can talk about decryption ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1924"
  },
  {
    "text": "and response validation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1926"
  },
  {
    "text": "we need to talk about the session transcript. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1927"
  },
  {
    "text": "This is a CBOR structure that binds a response payload ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1929"
  },
  {
    "text": "to a specific request from a specific app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1933"
  },
  {
    "text": "Your server will need to build this structure and use it ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1936"
  },
  {
    "text": "during both decryption and validation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1938"
  },
  {
    "text": "The session transcript contains the same nonce and merchant ID ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1943"
  },
  {
    "text": "you used earlier in your PKIdentityRequest, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1946"
  },
  {
    "text": "as well as the team ID of your developer team ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1949"
  },
  {
    "text": "and the SHA256 hash of your encryption certificate's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1952"
  },
  {
    "text": "public key. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1955"
  },
  {
    "text": "When building the session transcript, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1957"
  },
  {
    "text": "your server should check that the inputs you're using ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1959"
  },
  {
    "text": "are all valid. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1961"
  },
  {
    "text": "That means the nonce shouldn't have been used already, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1963"
  },
  {
    "text": "and should be tied to the current user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1965"
  },
  {
    "text": "The other values should match what's expected ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1967"
  },
  {
    "text": "on your developer account. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1970"
  },
  {
    "text": "Now let's talk about decrypting the encrypted data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1972"
  },
  {
    "text": "You'll need the session transcript you just created, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1975"
  },
  {
    "text": "along with the metadata from the encryption envelope. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1977"
  },
  {
    "text": "You'll also need your private key. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1981"
  },
  {
    "text": "This is the private key ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1983"
  },
  {
    "text": "corresponding to the certificate you setup earlier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1984"
  },
  {
    "text": "in your developer account. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1987"
  },
  {
    "text": "To protect the confidentiality of user information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1989"
  },
  {
    "text": "you need to make sure your private key stays private. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1992"
  },
  {
    "text": "Store it securely on your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1995"
  },
  {
    "text": "and never include it in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1997"
  },
  {
    "text": "If your private key is ever compromised, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=1999"
  },
  {
    "text": "revoke the certificate in your developer account immediately. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2001"
  },
  {
    "text": "After decrypting the encrypted data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2005"
  },
  {
    "text": "you'll receive an mdoc response object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2007"
  },
  {
    "text": "containing two cryptographic signatures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2010"
  },
  {
    "text": "plus the data elements you requested. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2012"
  },
  {
    "text": "You need to check both signatures in the mdoc response ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2014"
  },
  {
    "text": "before you can use its data elements. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2017"
  },
  {
    "text": "First, you need to check the issuer signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2019"
  },
  {
    "text": "This is a signature from the issuing authority ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2022"
  },
  {
    "text": "of the user's ID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2025"
  },
  {
    "text": "By checking this signature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2026"
  },
  {
    "text": "you're verifying that the data in the response ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2028"
  },
  {
    "text": "came from the real issuing authority ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2030"
  },
  {
    "text": "and wasn't tampered with. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2032"
  },
  {
    "text": "You should check that not only is the signature valid, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2034"
  },
  {
    "text": "but also that it is signed by an issuer certificate you trust. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2037"
  },
  {
    "text": "Take a look at the documentation for more details ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2041"
  },
  {
    "text": "about the issuer certificates used by IDs in Wallet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2043"
  },
  {
    "text": "Next, you need to verify the device signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2047"
  },
  {
    "text": "This is a signature created by a key ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2051"
  },
  {
    "text": "in the Secure Element of the user's iPhone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2053"
  },
  {
    "text": "It proves that the response you received ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2055"
  },
  {
    "text": "came from the same iPhone that the issuing authority ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2058"
  },
  {
    "text": "originally issued the ID to. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2060"
  },
  {
    "text": "Here, you'll need to use your session transcript again, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2062"
  },
  {
    "text": "along with some information covered by the issuer signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2065"
  },
  {
    "text": "Finally, you're ready to use the data elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2069"
  },
  {
    "text": "that you requested. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2072"
  },
  {
    "text": "You should never use these elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2073"
  },
  {
    "text": "without first verifying the issuer and device signatures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2075"
  },
  {
    "text": "because otherwise you don't know whether the data you received ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2078"
  },
  {
    "text": "is authentic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2081"
  },
  {
    "text": "And with all those steps completed, you're done! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2084"
  },
  {
    "text": "Your app has requested the information, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2086"
  },
  {
    "text": "and your server has decrypted and verified the response. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2088"
  },
  {
    "text": "You might be wondering how to test your implementation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2092"
  },
  {
    "text": "if you don't have an ID in Wallet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2095"
  },
  {
    "text": "We've provided a few mechanisms to help you do that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2097"
  },
  {
    "text": "First, you can test in the iOS Simulator, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2101"
  },
  {
    "text": "where the API will return a mock response. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2104"
  },
  {
    "text": "This response is similar to a real one, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2107"
  },
  {
    "text": "but lacks real signatures. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2109"
  },
  {
    "text": "Similarly, you can use a test profile ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2112"
  },
  {
    "text": "to receive a mock response on a real iPhone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2115"
  },
  {
    "text": "even If you don't have an ID in Wallet on that iPhone. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2118"
  },
  {
    "text": "See the documentation for more details about how to do this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2121"
  },
  {
    "text": "Note that your server should never treat ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2124"
  },
  {
    "text": "either of these mock responses like a real one. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2126"
  },
  {
    "text": "To help you with your server implementation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2130"
  },
  {
    "text": "the documentation also includes an example response, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2132"
  },
  {
    "text": "along with everything you need to decrypt and validate it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2136"
  },
  {
    "text": "And that's how you can perform identity verification ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2141"
  },
  {
    "text": "with IDs in Wallet in iOS 16. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2144"
  },
  {
    "text": "We discussed how to use the API in your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2147"
  },
  {
    "text": "how to process the response on your server, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2149"
  },
  {
    "text": "and how to test your implementation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2152"
  },
  {
    "text": "Lais: This year, we introduced many great new features ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2154"
  },
  {
    "text": "to Wallet and Apple Pay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2157"
  },
  {
    "text": "These include multi-merchant payments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2159"
  },
  {
    "text": "improved support for automatic payments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2161"
  },
  {
    "text": "order tracking, and identity verification. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2164"
  },
  {
    "text": "Please check out the developer documentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2167"
  },
  {
    "text": "for more information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2169"
  },
  {
    "text": "David: Thank you for watching, and have a great WWDC! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2170"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10041/?time=2174"
  }
]