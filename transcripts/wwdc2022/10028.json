[
  {
    "text": "♪ instrumental hip hop music ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=0"
  },
  {
    "text": "Hello, I'm Neil Foley, an engineer on the ShazamKit team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=9"
  },
  {
    "text": "In 2021, we introduced ShazamKit, allowing you to match audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=14"
  },
  {
    "text": "against Shazam's vast catalog of recorded music. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=19"
  },
  {
    "text": "We also introduced custom catalog matching, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=22"
  },
  {
    "text": "giving developers the ability to match their own audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=25"
  },
  {
    "text": "and provide synced experiences. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=28"
  },
  {
    "text": "Now we have some important updates that streamline ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=31"
  },
  {
    "text": "working with custom catalogs at scale. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=34"
  },
  {
    "text": "In this session, I'm going to use some of the existing ShazamKit concepts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=37"
  },
  {
    "text": "such as signatures, catalogs, and media items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=42"
  },
  {
    "text": "If you're not already familiar with those, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=46"
  },
  {
    "text": "check out the \"Explore ShazamKit” ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=48"
  },
  {
    "text": "and \"Create custom audio experiences with ShazamKit\" talks ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=50"
  },
  {
    "text": "from WWDC21. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=54"
  },
  {
    "text": "But as quick overview, ShazamKit lets you convert audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=57"
  },
  {
    "text": "into a special format that can be matched. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=61"
  },
  {
    "text": "We call these signatures. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=64"
  },
  {
    "text": "Signatures can be combined with media items containing metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=67"
  },
  {
    "text": "to form a reference signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=71"
  },
  {
    "text": "And reference signatures can be stored together in a file ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=73"
  },
  {
    "text": "that we call a custom catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=76"
  },
  {
    "text": "Now that we are all caught up, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=79"
  },
  {
    "text": "I'll take you through building custom catalogs at scale, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=81"
  },
  {
    "text": "and then I'll talk about some tips and tricks to make great catalogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=84"
  },
  {
    "text": "In today's custom catalog workflow, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=89"
  },
  {
    "text": "if you have a small amount of content you want to be matched, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=92"
  },
  {
    "text": "working with custom catalogs can be a simple task. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=95"
  },
  {
    "text": "You just need to follow these steps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=99"
  },
  {
    "text": "Record your audio in a format that ShazamKit accepts.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=102"
  },
  {
    "text": "Use the signature generator to transform it into a signature.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=107"
  },
  {
    "text": "Annotate it with your metadata, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=112"
  },
  {
    "text": "and then store it in a custom catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=114"
  },
  {
    "text": "And that's it, you can provide a Shazam experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=117"
  },
  {
    "text": "But some of those steps can be daunting, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=120"
  },
  {
    "text": "especially if you're not familiar with audio programming. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=122"
  },
  {
    "text": "Dealing with sample rates and buffers can be tricky ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=126"
  },
  {
    "text": "even for the most experienced developer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=130"
  },
  {
    "text": "And what happens when you have a vast amount of content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=132"
  },
  {
    "text": "you'd like to make Shazamable, like 10 seasons of a TV show? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=135"
  },
  {
    "text": "This workflow can become painful.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=141"
  },
  {
    "text": "And if you have large amounts of content, it can quickly become unmanageable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=145"
  },
  {
    "text": "If you're thinking of improving this workflow for yourself, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=150"
  },
  {
    "text": "you'll probably need to write code to transform audio into signatures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=153"
  },
  {
    "text": "more code to load and associate media items, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=157"
  },
  {
    "text": "and each time you change your content, you'll have to repeat the work. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=160"
  },
  {
    "text": "This is a big investment when you just want to match some audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=164"
  },
  {
    "text": "And then if you want to sync content with ShazamKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=168"
  },
  {
    "text": "you need complicated logic to figure out what should be shown and when. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=172"
  },
  {
    "text": "I'll introduce some great enhancements to ShazamKit that streamline this workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=176"
  },
  {
    "text": "But first a quick demo. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=181"
  },
  {
    "text": "Here I have the FoodMath app that Alex demonstrated in 2021 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=183"
  },
  {
    "text": "that syncs a maths quiz with an on screen lesson. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=188"
  },
  {
    "text": "I've updated it with the latest ShazamKit features, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=191"
  },
  {
    "text": "and I'm going play back the FoodMath video to see how it syncs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=194"
  },
  {
    "text": "Skip to 26 seconds.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=201"
  },
  {
    "text": "2, 3 green apples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=204"
  },
  {
    "text": "How many apples do I have in total? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=209"
  },
  {
    "text": "Your timer starts…now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=211"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=214"
  },
  {
    "text": "Okay, time's up. Let's see how you did. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=218"
  },
  {
    "text": "Skip to 56 seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=221"
  },
  {
    "text": "Today, to spice it up a bit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=225"
  },
  {
    "text": "when I went to the shop, started with 2 red apples... ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=227"
  },
  {
    "text": "and I bought 2 green apples. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=231"
  },
  {
    "text": "How many apples did I have in total this time? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=235"
  },
  {
    "text": "Your timer starts…now.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=238"
  },
  {
    "text": "Okay, time's up. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=247"
  },
  {
    "text": "Seems to be working great.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=249"
  },
  {
    "text": "There's rich content synced with the video and when I said \"now,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=251"
  },
  {
    "text": "the menu appeared at exactly the right time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=254"
  },
  {
    "text": "Also, when content was no longer relevant, it disappeared right on cue. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=257"
  },
  {
    "text": "But how does it work? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=262"
  },
  {
    "text": "Let's have a look at the code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=263"
  },
  {
    "text": "There's just a simple loop. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=266"
  },
  {
    "text": "It uses an AsyncSequence on the session instead of the delegate callbacks ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=267"
  },
  {
    "text": "that we used before. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=271"
  },
  {
    "text": "The sequence returns an enum representing match, no match, or error. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=273"
  },
  {
    "text": "I'm only interested in matches, so I've restricted the loop to just that case. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=278"
  },
  {
    "text": "And to build the result for display, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=284"
  },
  {
    "text": "I reduce the media items to the content that I need.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=286"
  },
  {
    "text": "There's actually not much more to see in the app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=292"
  },
  {
    "text": "just SwiftUI views that are driven by the matchResult that we create. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=294"
  },
  {
    "text": "There's no complicated logic or timing code and it syncs perfectly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=298"
  },
  {
    "text": "So the question remains, how does it sync so well? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=303"
  },
  {
    "text": "FoodMaths' secret is the rich custom catalog that drives the experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=308"
  },
  {
    "text": "I created the catalog with a simple tool that we've built to complement ShazamKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=313"
  },
  {
    "text": "and you can use it too to create rich experiences in your own apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=319"
  },
  {
    "text": "The Shazam CLI ships as part of macOS 13 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=324"
  },
  {
    "text": "and provides an easy way to sync content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=328"
  },
  {
    "text": "It can help to automate some of the repetitive tasks ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=332"
  },
  {
    "text": "associated with creating custom catalogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=334"
  },
  {
    "text": "Let's update the custom catalog that I just showed you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=337"
  },
  {
    "text": "Time for another demo.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=341"
  },
  {
    "text": "Here's a folder containing the FoodMath video file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=345"
  },
  {
    "text": "and here's my terminal in the same folder. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=350"
  },
  {
    "text": "I'll use the CLI to convert the video into a signature ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=352"
  },
  {
    "text": "using the signature command.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=356"
  },
  {
    "text": "I just pass the video file as input and specify our signature output.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=362"
  },
  {
    "text": "Okay. There's our signature.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=371"
  },
  {
    "text": "Now I want combine this signature with media items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=373"
  },
  {
    "text": "to make a custom catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=376"
  },
  {
    "text": "The CLI accepts a simple comma separated file ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=378"
  },
  {
    "text": "for describing media items that I'll copy here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=381"
  },
  {
    "text": "It describes everything that I need to sync my content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=393"
  },
  {
    "text": "Here's where I've specified my titles, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=398"
  },
  {
    "text": "and here's a custom JSON field I've defined for the equation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=403"
  },
  {
    "text": "The headers map to media item properties. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=407"
  },
  {
    "text": "For details on the mapping, run the custom catalog create command ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=410"
  },
  {
    "text": "with the help flag.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=415"
  },
  {
    "text": "It describes the relationship between the csv headers and media item properties. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=422"
  },
  {
    "text": "Now I want to combine them together into a custom catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=427"
  },
  {
    "text": "So I'll run the create command.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=432"
  },
  {
    "text": "I pass in the signature file and the csv file and it outputs a catalog.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=439"
  },
  {
    "text": "Okay, now we have our catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=448"
  },
  {
    "text": "Excitingly, I have early access to the latest FoodMath episode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=450"
  },
  {
    "text": "so I want to add that to our catalog file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=454"
  },
  {
    "text": "Let me copy the files here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=457"
  },
  {
    "text": "Here's our media items for our new episode.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=464"
  },
  {
    "text": "I'll run the update command passing in the video, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=471"
  },
  {
    "text": "the new media, and the catalog to update.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=474"
  },
  {
    "text": "Okay, we've updated our catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=482"
  },
  {
    "text": "That's a quick overview of how to create catalogs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=485"
  },
  {
    "text": "but if you're like me, you'll really you'll want to script this.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=488"
  },
  {
    "text": "The FoodMath app actually has quite a few new episodes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=500"
  },
  {
    "text": "and I want to add them all to this catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=504"
  },
  {
    "text": "I've written a really simple script that loops through all the episode folders ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=507"
  },
  {
    "text": "and combines them into a custom catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=511"
  },
  {
    "text": "I'll run it now.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=513"
  },
  {
    "text": "There we go. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=529"
  },
  {
    "text": "We now have one catalog representing every FoodMath episode ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=530"
  },
  {
    "text": "and the script used the display command to detail what's inside the catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=534"
  },
  {
    "text": "I think we have everything. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=540"
  },
  {
    "text": "The foodmath project is already referencing our new catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=542"
  },
  {
    "text": "So let's build and run so that we can enjoy doing some maths.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=545"
  },
  {
    "text": "Skip to 30 seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=551"
  },
  {
    "text": "How many apples do I have in total? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=554"
  },
  {
    "text": "Your timer starts…now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=556"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=559"
  },
  {
    "text": "Okay, time's up. Let's see how you did. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=564"
  },
  {
    "text": "I like that guy. That's a great episode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=568"
  },
  {
    "text": "What about a new episode? Let's try that.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=570"
  },
  {
    "text": "Skip to 15 seconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=577"
  },
  {
    "text": "Over the years, I explored what makes a guacamole truly delicious, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=581"
  },
  {
    "text": "and I wrote down my favorite guacamole recipe. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=585"
  },
  {
    "text": "It calls for 4 avocados. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=589"
  },
  {
    "text": "Tomorrow my friend is visiting. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=591"
  },
  {
    "text": "So for the two of us, I only need to make half of the portion. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=593"
  },
  {
    "text": "How many avocados do I need? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=597"
  },
  {
    "text": "The timer starts…now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=599"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=602"
  },
  {
    "text": "That's correct. You need two avocados. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=610"
  },
  {
    "text": "Let's make this guacamole together. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=612"
  },
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=616"
  },
  {
    "text": "Let's give this a try.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=624"
  },
  {
    "text": "Mmm. That turned out to be great. I hope you had some fun ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=630"
  },
  {
    "text": "and see you next time.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=633"
  },
  {
    "text": "Oh! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=640"
  },
  {
    "text": "They have a new host. Interesting. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=641"
  },
  {
    "text": "Anyway, I've created a rich synced experience in no time at all. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=643"
  },
  {
    "text": "The Shazam CLI supports a rich set of commands. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=648"
  },
  {
    "text": "Let's go over them.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=651"
  },
  {
    "text": "You can create a signature from any media file ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=654"
  },
  {
    "text": "that has an audio track. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=656"
  },
  {
    "text": "You can create custom catalogs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=658"
  },
  {
    "text": "by combining signatures and media items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=660"
  },
  {
    "text": "You can display a catalog's content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=663"
  },
  {
    "text": "Add, remove, and export both signatures ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=666"
  },
  {
    "text": "and media items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=669"
  },
  {
    "text": "Next, on to how the CLI created ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=671"
  },
  {
    "text": "the signatures from the FoodMath videos.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=674"
  },
  {
    "text": "SHSignatureGenerator now has a method signatureFromAsset ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=678"
  },
  {
    "text": "that's available on all platforms. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=684"
  },
  {
    "text": "With this method, there's no more manually pulling audio buffers from media. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=686"
  },
  {
    "text": "Simply pass an AVAsset with an audio track to turn it into a signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=691"
  },
  {
    "text": "If you have multiple tracks in your asset, they'll be mixed together ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=697"
  },
  {
    "text": "ensuring the signature captures everything. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=700"
  },
  {
    "text": "Okay, now that I have a signature that represents the media, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=704"
  },
  {
    "text": "how did I accurately sync content? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=708"
  },
  {
    "text": "I used the Timed MediaItem API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=711"
  },
  {
    "text": "Attaching a time range to the media item makes it easy to specify ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=714"
  },
  {
    "text": "when it starts and when it ends. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=718"
  },
  {
    "text": "Media items can also have multiple time ranges ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=721"
  },
  {
    "text": "to target more than one portion of a signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=724"
  },
  {
    "text": "Imagine that you have a media item that targets the chorus of a song. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=728"
  },
  {
    "text": "You can add a time range for each place it's sung.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=733"
  },
  {
    "text": "Specifying the time ranges is only useful ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=736"
  },
  {
    "text": "if you're notified when they start and when they end. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=739"
  },
  {
    "text": "ShazamKit will deliver a match callback synced with the time range, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=743"
  },
  {
    "text": "one when it starts and one when it ends. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=747"
  },
  {
    "text": "Signatures can contain many media items, so this callback will contain only ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=750"
  },
  {
    "text": "the media items that are in range at that specific point in time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=755"
  },
  {
    "text": "There's a few simple rules for which media items will be returned ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=760"
  },
  {
    "text": "in a callback and their order, so let's go over them.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=764"
  },
  {
    "text": "Media items outside of their time range will not be returned. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=769"
  },
  {
    "text": "Media items within their time range will be returned, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=774"
  },
  {
    "text": "with the most recent events coming first.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=777"
  },
  {
    "text": "And finally, media items with no time ranges will always be returned last, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=781"
  },
  {
    "text": "but they will be unordered. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=786"
  },
  {
    "text": "Media items that have no time range can be a great place ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=789"
  },
  {
    "text": "to store global information that applies to the whole reference signature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=791"
  },
  {
    "text": "In my FoodMath example, I used it to store the name of the episode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=795"
  },
  {
    "text": "It appears when no other media items are in range.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=800"
  },
  {
    "text": "One final point, if all your media items have time ranges ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=805"
  },
  {
    "text": "and none of them are in scope, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=810"
  },
  {
    "text": "ShazamKit will always return a media item with basic match information. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=812"
  },
  {
    "text": "This way, you will always get important properties, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=817"
  },
  {
    "text": "such as the predictedCurrentMatch offset and the frequencySkew.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=820"
  },
  {
    "text": "And in code, it's easy too. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=826"
  },
  {
    "text": "Timed media items are created by specifying ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=829"
  },
  {
    "text": "the timeRanges media item property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=832"
  },
  {
    "text": "It's an array of Swift ranges. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=835"
  },
  {
    "text": "It can also be read back using the timeRanges property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=838"
  },
  {
    "text": "And for Objective-C programmers, there's a new SHRange class ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=842"
  },
  {
    "text": "as a drop in replacement. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=845"
  },
  {
    "text": "Now that you've seen how to build them, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=848"
  },
  {
    "text": "let's explore some tips and tricks to make great custom catalogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=850"
  },
  {
    "text": "Avoid creating many small signatures for one piece of media. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=856"
  },
  {
    "text": "A signature is a one to one mapping to the media that it represents, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=861"
  },
  {
    "text": "so for each piece of audio you have, be it from a song or video, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=865"
  },
  {
    "text": "create one signature for the entire duration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=870"
  },
  {
    "text": "A longer signature provides more opportunities for ShazamKit to match ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=874"
  },
  {
    "text": "audio peaks, resulting in better accuracy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=878"
  },
  {
    "text": "It also avoids issues with query signatures ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=882"
  },
  {
    "text": "overlapping multiple reference signatures.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=885"
  },
  {
    "text": "Using the new Timed MediaItem API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=890"
  },
  {
    "text": "you can target synced content to individual areas. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=892"
  },
  {
    "text": "There's no need to divide a piece of audio into multiple signatures. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=895"
  },
  {
    "text": "I showed an example where we had one piece of media, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=901"
  },
  {
    "text": "but with multiple media items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=904"
  },
  {
    "text": "But what should we do if we have a huge amount of content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=906"
  },
  {
    "text": "that we want to make Shazamable? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=909"
  },
  {
    "text": "How should we split it up? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=912"
  },
  {
    "text": "There's a trade-off you need to make when splitting your content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=914"
  },
  {
    "text": "across custom catalogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=918"
  },
  {
    "text": "If you create individual catalogs for each media asset, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=920"
  },
  {
    "text": "you'll need to know which piece of audio is being played ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=923"
  },
  {
    "text": "so that you can load the correct catalog. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=927"
  },
  {
    "text": "And if you put them all together in one catalog, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=930"
  },
  {
    "text": "you'll have a larger download and use more memory, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=932"
  },
  {
    "text": "but you can match many more pieces of audio. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=935"
  },
  {
    "text": "Our advice is to keep the catalog files you create tightly focused. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=939"
  },
  {
    "text": "For example, a catalog per music track or the whole album, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=944"
  },
  {
    "text": "but not the artist's whole discography. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=948"
  },
  {
    "text": "Keeping things separate means that you can decide what to load at runtime. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=951"
  },
  {
    "text": "You can do that with the custom catalog add API.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=956"
  },
  {
    "text": "Try it out and see if helps with your use case. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=962"
  },
  {
    "text": "If you have multiple audio assets that sound the same, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=966"
  },
  {
    "text": "maybe a show that always starts with the same intro music, and you want to ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=971"
  },
  {
    "text": "provide a custom experience for each episode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=975"
  },
  {
    "text": "or a song that's sampled in another track, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=978"
  },
  {
    "text": "maybe consider using frequency skew as a differentiator. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=981"
  },
  {
    "text": "Skewing audio is raising or lowing the frequencies in the recording. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=985"
  },
  {
    "text": "When you do this, you affect how the audio sounds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=990"
  },
  {
    "text": "but if you do it by a small enough amount, it can be noticed by ShazamKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=993"
  },
  {
    "text": "but not by the average human ear.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=997"
  },
  {
    "text": "So if we take an audio recording, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1000"
  },
  {
    "text": "make a custom catalog from it, and then play it back ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1002"
  },
  {
    "text": "with the frequencies slightly shifted: ShazamKit will still match the audio, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1005"
  },
  {
    "text": "and it will also report the skew amount through the frequencySkew property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1010"
  },
  {
    "text": "Here's how to do that in code.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1014"
  },
  {
    "text": "There are limits to how much you can skew audio ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1018"
  },
  {
    "text": "without the change becoming either noticeable to the human ear ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1021"
  },
  {
    "text": "or unrecognizable to ShazamKit.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1025"
  },
  {
    "text": "Keeping the skew to less than 5 percent should be safe ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1028"
  },
  {
    "text": "and provide enough room to differentiate multiple skewed recordings. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1031"
  },
  {
    "text": "To really take advantage of this, use the frequencySkew ranges. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1037"
  },
  {
    "text": "Media items will only be returned if they fall inside ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1041"
  },
  {
    "text": "the specified skew ranges.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1045"
  },
  {
    "text": "The range specifies as a percentage ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1047"
  },
  {
    "text": "how much the audio differs from the original. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1049"
  },
  {
    "text": "A value of 0 indicates the audio is unskewed and a value of .01 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1053"
  },
  {
    "text": "indicates a 1 percent skew. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1058"
  },
  {
    "text": "You can access the property on media items using the frequencySkewRanges property.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1061"
  },
  {
    "text": "I'll go over the steps to get this working in your app: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1068"
  },
  {
    "text": "First create a reference signature of your original audio recording. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1071"
  },
  {
    "text": "Then take a media item and restrict it by frequency skew to 3 to 4 percent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1076"
  },
  {
    "text": "Place this inside your custom catalog.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1083"
  },
  {
    "text": "Now play back the audio skewed by 3 to 4 percent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1085"
  },
  {
    "text": "and your media item will be returned. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1090"
  },
  {
    "text": "Playing back the audio unskewed or skewed outside of the range ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1093"
  },
  {
    "text": "will not return your media item. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1096"
  },
  {
    "text": "That's frequency skewing.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1098"
  },
  {
    "text": "Now that you've seen the exciting updates to ShazamKit this year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1102"
  },
  {
    "text": "you're ready to make some amazing synced experiences. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1105"
  },
  {
    "text": "So remember these best practices: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1109"
  },
  {
    "text": "First, create one signature per media asset. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1111"
  },
  {
    "text": "You'll get better accuracy from ShazamKit and simpler creation pipeline. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1115"
  },
  {
    "text": "Create your signatures with SHSignatureGenerators ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1121"
  },
  {
    "text": "signatureFromAsset. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1124"
  },
  {
    "text": "It accepts a wide variety of media, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1126"
  },
  {
    "text": "meaning you no longer have to deal with low level audio details.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1128"
  },
  {
    "text": "Target synced content to areas of interest with the new Timed MediaItem API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1134"
  },
  {
    "text": "It combines a simple API with excellent accuracy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1140"
  },
  {
    "text": "And finally let the Shazam CLI streamline the way you create custom catalogs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1145"
  },
  {
    "text": "It's been designed take away the hassle of dealing with vast amounts of media ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1150"
  },
  {
    "text": "and let you focus on the great experiences you want to make instead. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1155"
  },
  {
    "text": "I hope you enjoyed the latest updates to ShazamKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1160"
  },
  {
    "text": "and I'm excited to see you make everything Shazamable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1163"
  },
  {
    "text": "All of the information we discussed and links to documentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1167"
  },
  {
    "text": "are attached to this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1170"
  },
  {
    "text": "Thanks for joining. Enjoy the rest of WWDC22.  ♪ ♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10028/?time=1172"
  }
]