[
  {
    "text": "♪ Mellow instrumental hip-hop music ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=0"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=3"
  },
  {
    "text": "Hi, everyone! My name is Ankur Soni.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=9"
  },
  {
    "text": "I'm an engineering manager on the Maps Services team ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=12"
  },
  {
    "text": "here at Apple.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=14"
  },
  {
    "text": "Today, we're going to look at some exciting new capabilities ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=16"
  },
  {
    "text": "coming to the Maps developer ecosystem.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=19"
  },
  {
    "text": "So let's get started.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=21"
  },
  {
    "text": "Our Maps app offers various end-user experiences ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=23"
  },
  {
    "text": "to Apple customers around the globe.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=26"
  },
  {
    "text": "We empower developers to create ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=28"
  },
  {
    "text": "beautiful geolocation experiences for their apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=30"
  },
  {
    "text": "and websites through our MapKit and MapKit JS offerings.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=33"
  },
  {
    "text": "However, our Apple Maps developer offering ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=38"
  },
  {
    "text": "has always been very client-centric.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=41"
  },
  {
    "text": "We have listened carefully to all your great feedback.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=43"
  },
  {
    "text": "You wanted a way to augment your own data on MapKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=47"
  },
  {
    "text": "without compromising on performance or power.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=50"
  },
  {
    "text": "So to round out our ecosystem, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=54"
  },
  {
    "text": "we are excited to introduce the Apple Maps Server APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=56"
  },
  {
    "text": "We are introducing four new server APIs: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=61"
  },
  {
    "text": "Geocoding, Reverse Geocoding, Search, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=64"
  },
  {
    "text": "Estimated Time of Arrival -- or ETA.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=68"
  },
  {
    "text": "These APIs will help you tackle a variety of use cases ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=72"
  },
  {
    "text": "while integrating Maps into your applications.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=75"
  },
  {
    "text": "With Geocoding APIs, you can convert an address ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=80"
  },
  {
    "text": "to geographic coordinates latitude and longitude.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=83"
  },
  {
    "text": "Similarly, with Reverse Geocoding, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=86"
  },
  {
    "text": "you can do the opposite -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=88"
  },
  {
    "text": "go from geographic coordinates to an address.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=90"
  },
  {
    "text": "With Search API, you can give your users the capability ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=93"
  },
  {
    "text": "to enter a search string to discover places ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=97"
  },
  {
    "text": "like businesses, points of interest, and more.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=100"
  },
  {
    "text": "Maybe you want to overlay some of your own data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=103"
  },
  {
    "text": "and present it to the user.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=105"
  },
  {
    "text": "With ETA API, you can help your customers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=107"
  },
  {
    "text": "get a sense of how far your business is from them ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=111"
  },
  {
    "text": "or do some computations to find the closest store.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=113"
  },
  {
    "text": "The possibilities are endless! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=116"
  },
  {
    "text": "We think you'll love server APIs for three important reasons.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=120"
  },
  {
    "text": "You can now deliver a seamless experience by leveraging ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=125"
  },
  {
    "text": "MapKit, MapKit JS, and the new Apple Maps Server APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=128"
  },
  {
    "text": "This will simplify your application architecture ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=133"
  },
  {
    "text": "giving you a full Apple Maps stack.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=135"
  },
  {
    "text": "This will make your life much easier.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=138"
  },
  {
    "text": "For sure, it helped me.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=140"
  },
  {
    "text": "But hey, I'm biased! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=141"
  },
  {
    "text": "The next benefit is the reduction in network calls.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=144"
  },
  {
    "text": "Many times, we find ourselves in a situation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=147"
  },
  {
    "text": "where we are making repetitive and redundant requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=150"
  },
  {
    "text": "from our users' devices like an iPhone, iPad, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=153"
  },
  {
    "text": "websites, etcetera.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=156"
  },
  {
    "text": "Maybe you are looking up the same address over and over again ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=158"
  },
  {
    "text": "from your app running on different user devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=161"
  },
  {
    "text": "This causes a lot of network calls and wasted bandwidth.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=164"
  },
  {
    "text": "Delegating this common operation to your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=168"
  },
  {
    "text": "and doing it only once in the back end using server APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=171"
  },
  {
    "text": "will help your application consume less bandwidth.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=175"
  },
  {
    "text": "A nice side effect of this is that now your application ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=178"
  },
  {
    "text": "is power efficient too, since some processing is now delegated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=182"
  },
  {
    "text": "to your server using Apple Maps Server APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=185"
  },
  {
    "text": "Now let's take some of these APIs for a spin.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=189"
  },
  {
    "text": "Let's say we are building these contact cards ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=192"
  },
  {
    "text": "for your store locator application.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=194"
  },
  {
    "text": "Here we see three stores with their addresses ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=197"
  },
  {
    "text": "and distance from the customer location.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=200"
  },
  {
    "text": "In this example, we'll assume that the customer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=202"
  },
  {
    "text": "has provided their location.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=205"
  },
  {
    "text": "For now, let's focus on building one of these contact cards.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=209"
  },
  {
    "text": "We'll assume that these addresses are on a server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=212"
  },
  {
    "text": "which stores and serves the locations of comic bookstores.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=215"
  },
  {
    "text": "There are many ways to build this, but for a second, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=221"
  },
  {
    "text": "let's assume we don't have these new server APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=224"
  },
  {
    "text": "What would a basic architecture look like? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=227"
  },
  {
    "text": "How would your client application get this data? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=229"
  },
  {
    "text": "In this diagram, our application is making a call to the server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=232"
  },
  {
    "text": "to get the list of store addresses.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=236"
  },
  {
    "text": "The back-end server returns a list of store addresses ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=238"
  },
  {
    "text": "to your client device.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=241"
  },
  {
    "text": "Since we don't have the server APIs in this example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=244"
  },
  {
    "text": "now our client application has to perform various actions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=247"
  },
  {
    "text": "on the address to build the contact card.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=250"
  },
  {
    "text": "To perform a single task, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=253"
  },
  {
    "text": "a client may have to make multiple calls ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=255"
  },
  {
    "text": "to various back-end services.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=257"
  },
  {
    "text": "Here you can see that the client app is making a call ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=260"
  },
  {
    "text": "directly to the Apple Maps Server, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=263"
  },
  {
    "text": "either by using MapKit or MapKit JS.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=265"
  },
  {
    "text": "This chattiness between a client and a back end ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=269"
  },
  {
    "text": "can adversely impact the performance and scale ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=272"
  },
  {
    "text": "of the application.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=275"
  },
  {
    "text": "Over a cellular network with typically high latency, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=276"
  },
  {
    "text": "using individual requests in this manner is inefficient ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=279"
  },
  {
    "text": "and could result in broken connectivity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=283"
  },
  {
    "text": "or incomplete requests.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=285"
  },
  {
    "text": "While each request may be done in parallel, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=287"
  },
  {
    "text": "the application must send, wait, and process data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=290"
  },
  {
    "text": "for each request all on separate connections ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=293"
  },
  {
    "text": "increasing the chance of failure.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=295"
  },
  {
    "text": "Finally, you'll have to merge all the responses on the client.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=298"
  },
  {
    "text": "And while all these calls happen, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=302"
  },
  {
    "text": "you are showing a spinner to the user.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=304"
  },
  {
    "text": "Plus, the client device is using more bandwidth ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=307"
  },
  {
    "text": "and power for these extra calls.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=310"
  },
  {
    "text": "That is not a good user experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=312"
  },
  {
    "text": "Now, let's look at a model architecture ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=314"
  },
  {
    "text": "with access to Apple Maps Server APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=317"
  },
  {
    "text": "You can start using your back-end server as a gateway ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=320"
  },
  {
    "text": "to reduce chattiness between the client and the services.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=323"
  },
  {
    "text": "Just like before, here we request a list of stores ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=327"
  },
  {
    "text": "to be displayed from your client.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=331"
  },
  {
    "text": "Next, we make a request from the server to do geocoding.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=334"
  },
  {
    "text": "We then receive responses for each API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=339"
  },
  {
    "text": "from the Apple Maps Server.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=342"
  },
  {
    "text": "The comic book server combines the responses from each service ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=345"
  },
  {
    "text": "and sends the response to the application.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=350"
  },
  {
    "text": "This pattern can reduce the number of requests ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=352"
  },
  {
    "text": "that the application makes to back-end services, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=355"
  },
  {
    "text": "and improve application performance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=358"
  },
  {
    "text": "over high-latency networks.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=360"
  },
  {
    "text": "In summary, your client makes one call to your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=362"
  },
  {
    "text": "to get the list of stores.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=365"
  },
  {
    "text": "Your server then does the heavy lifting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=367"
  },
  {
    "text": "to make appropriate API calls to compose a response ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=370"
  },
  {
    "text": "most suited for your user.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=373"
  },
  {
    "text": "So let's go back to our case study example here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=376"
  },
  {
    "text": "We'll use Geocoding and ETA API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=379"
  },
  {
    "text": "to get the distance to the store.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=382"
  },
  {
    "text": "We can use the Geocode API to find the latitude and longitude ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=384"
  },
  {
    "text": "for the store addresses, which we'll later use ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=389"
  },
  {
    "text": "for ETA calculations.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=391"
  },
  {
    "text": "In this example, first, we are going to take ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=393"
  },
  {
    "text": "the address for the comic book store and URL encode it.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=396"
  },
  {
    "text": "Next, we'll use the Geocode API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=402"
  },
  {
    "text": "and pass this URL-encoded address as a query parameter.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=405"
  },
  {
    "text": "We'll skip over the authentication details for now ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=410"
  },
  {
    "text": "and come back to it in a few slides.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=412"
  },
  {
    "text": "In the response, you can see the latitude and longitude ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=415"
  },
  {
    "text": "for the address returned.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=418"
  },
  {
    "text": "We'll repeat the same process to find ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=421"
  },
  {
    "text": "the latitude and longitude for the customer's address.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=423"
  },
  {
    "text": "This will be later used for ETA calculations.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=426"
  },
  {
    "text": "As you can see, there are more fields in the response.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=430"
  },
  {
    "text": "I'll link the detailed documentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=433"
  },
  {
    "text": "in the Resources section below.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=435"
  },
  {
    "text": "Now, we can set the origin and destination on the ETA API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=438"
  },
  {
    "text": "with the data we got from the Geocode API.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=443"
  },
  {
    "text": "As I mentioned before, we have the origin latitude, longitude ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=446"
  },
  {
    "text": "and the destination latitude, longitude.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=451"
  },
  {
    "text": "We can specify up to 10 destinations here if needed.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=454"
  },
  {
    "text": "We'll feed that in the ETA API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=458"
  },
  {
    "text": "as origin and as destination query parameters ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=461"
  },
  {
    "text": "which are URL encoded.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=465"
  },
  {
    "text": "The response to the API is a list of ETAs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=467"
  },
  {
    "text": "one for each destination provided.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=470"
  },
  {
    "text": "In this case, we only have one ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=473"
  },
  {
    "text": "since we provided one destination.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=475"
  },
  {
    "text": "Here for our example, we are interested in distanceMeters ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=478"
  },
  {
    "text": "to calculate the distance to the store.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=482"
  },
  {
    "text": "With this, we have all the pieces we need: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=484"
  },
  {
    "text": "the store address and the distance for the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=487"
  },
  {
    "text": "to reach your store.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=490"
  },
  {
    "text": "You can also choose to augment or overlay this data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=492"
  },
  {
    "text": "with your own store information, like store hours.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=495"
  },
  {
    "text": "In this way, you can leverage different server APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=499"
  },
  {
    "text": "to build your applications.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=503"
  },
  {
    "text": "For other APIs, please refer to documentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=505"
  },
  {
    "text": "linked below this talk.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=508"
  },
  {
    "text": "One critical piece we haven't talked about is authentication.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=509"
  },
  {
    "text": "All the Apple Maps Server APIs are authenticated.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=513"
  },
  {
    "text": "If you are using MapKit JS, you are already halfway there.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=517"
  },
  {
    "text": "Apple Maps Server APIs use the same mechanism as MapKit JS ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=521"
  },
  {
    "text": "to authenticate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=525"
  },
  {
    "text": "First, you'll download your private key ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=527"
  },
  {
    "text": "from your developer account.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=529"
  },
  {
    "text": "You'll then use this private key ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=531"
  },
  {
    "text": "to generate a Maps auth token in JWT format.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=533"
  },
  {
    "text": "There is a detailed doc about how to generate one ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=536"
  },
  {
    "text": "linked below.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=539"
  },
  {
    "text": "You can then exchange this Maps auth token ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=540"
  },
  {
    "text": "using the token API to get Maps access token.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=543"
  },
  {
    "text": "We'll authenticate the Maps auth token on the back end ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=546"
  },
  {
    "text": "and send back Maps access token.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=550"
  },
  {
    "text": "This is in JWT format and will be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=553"
  },
  {
    "text": "for all API interactions.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=555"
  },
  {
    "text": "This access token needs to be refreshed every 30 minutes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=558"
  },
  {
    "text": "by repeating the highlighted process here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=562"
  },
  {
    "text": "Now that we saw how the authentication flow looks like, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=565"
  },
  {
    "text": "here is a simple example of how to use the token API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=569"
  },
  {
    "text": "to fetch the access token.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=573"
  },
  {
    "text": "We are using the token API here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=575"
  },
  {
    "text": "We are passing the Maps auth token as a header.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=579"
  },
  {
    "text": "You'll get back a Maps access token ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=583"
  },
  {
    "text": "that can be used to access the API.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=586"
  },
  {
    "text": "This will be in JWT format and will have standard fields ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=588"
  },
  {
    "text": "like expiry, issuedAt, etcetera.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=592"
  },
  {
    "text": "As a convenience, the expiresInSeconds field ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=595"
  },
  {
    "text": "shows for how long the token is valid for.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=598"
  },
  {
    "text": "In this case, it's 30 minutes.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=601"
  },
  {
    "text": "Keep in mind Maps auth token ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=604"
  },
  {
    "text": "is not the same as Maps access token.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=607"
  },
  {
    "text": "You exchange the Maps auth token ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=610"
  },
  {
    "text": "to get a 30-minute long Maps access token ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=612"
  },
  {
    "text": "to access the server APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=615"
  },
  {
    "text": "Let's take a quick look at how the API interaction ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=618"
  },
  {
    "text": "with Maps access token looks like.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=621"
  },
  {
    "text": "We'll pass the Maps access token along with server API call.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=624"
  },
  {
    "text": "It is added as a header to the API call, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=629"
  },
  {
    "text": "just like we saw a few slides ago.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=631"
  },
  {
    "text": "The Apple Maps Server will validate the Maps access token.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=634"
  },
  {
    "text": "Once the validation is successful, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=637"
  },
  {
    "text": "the Apple Maps Server will respond with an API response.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=640"
  },
  {
    "text": "Now that I have covered APIs and authentication, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=644"
  },
  {
    "text": "let me talk about usage limits.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=647"
  },
  {
    "text": "With great power comes great responsibility, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=650"
  },
  {
    "text": "so use your quota wisely.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=653"
  },
  {
    "text": "There is a daily cap on how many API calls you can make, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=655"
  },
  {
    "text": "and it's big! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=659"
  },
  {
    "text": "You'll get a quota of 25,000 service calls per day in total.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=661"
  },
  {
    "text": "Keep in mind, calling services via MapKit JS and server APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=665"
  },
  {
    "text": "use the same quota.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=669"
  },
  {
    "text": "If you need more, please reach out to us.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=671"
  },
  {
    "text": "So, how do you keep track of all this? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=674"
  },
  {
    "text": "You can view your usage stats at the Maps developer dashboard.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=678"
  },
  {
    "text": "Anybody using MapKit JS? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=683"
  },
  {
    "text": "This will look very familiar to you.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=684"
  },
  {
    "text": "The server API usage is categorized as Services, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=687"
  },
  {
    "text": "which you can see highlighted here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=691"
  },
  {
    "text": "When the daily quota is exceeded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=694"
  },
  {
    "text": "which means more than 25,000 server API calls, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=697"
  },
  {
    "text": "we'll start rejecting new service calls ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=701"
  },
  {
    "text": "and respond with HTTP status 429, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=704"
  },
  {
    "text": "which means too many requests.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=707"
  },
  {
    "text": "You should make sure that the app experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=710"
  },
  {
    "text": "degrades gracefully in such scenarios.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=712"
  },
  {
    "text": "In rare scenarios, when your service ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=715"
  },
  {
    "text": "makes an unusual amount of requests -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=717"
  },
  {
    "text": "maybe it's due to some bug in your code or infrastructure -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=720"
  },
  {
    "text": "it's possible to get HTTP status 429 as well.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=723"
  },
  {
    "text": "When you receive HTTP 429, it is important ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=727"
  },
  {
    "text": "not to simply loop repeatedly in making requests.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=730"
  },
  {
    "text": "A better approach is to retry with increasing delays ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=733"
  },
  {
    "text": "in between attempts.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=736"
  },
  {
    "text": "This approach is known as exponential backoff.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=738"
  },
  {
    "text": "So, what did we learn today? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=741"
  },
  {
    "text": "We are releasing four new server APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=744"
  },
  {
    "text": "These APIs are Geocoding, Reverse Geocoding, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=747"
  },
  {
    "text": "Search, and ETA.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=750"
  },
  {
    "text": "Using these APIs in conjunction with MapKit and MapKit JS ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=753"
  },
  {
    "text": "will help you better architect your apps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=758"
  },
  {
    "text": "using the Apple Maps stack.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=760"
  },
  {
    "text": "You can optimize redundant and repetitive calls ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=762"
  },
  {
    "text": "by delegating those tasks to your back-end server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=765"
  },
  {
    "text": "using Apple Maps Server APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=768"
  },
  {
    "text": "Daily quota for these APIs is 25,000 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=771"
  },
  {
    "text": "and is shared with your MapKit JS service usage.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=775"
  },
  {
    "text": "And that's the new Apple Maps Server APIs for you.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=778"
  },
  {
    "text": "Be sure to check out the other sessions mentioned here ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=781"
  },
  {
    "text": "and detailed documentation linked below.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=784"
  },
  {
    "text": "We look forward to seeing how you take advantage of them.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=787"
  },
  {
    "text": "Thank you! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=790"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10006/?time=791"
  }
]