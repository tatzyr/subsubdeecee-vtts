[
  {
    "text": "♪ Mellow instrumental hip-hip music ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=0"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=3"
  },
  {
    "text": "Hello and welcome to WWDC.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=9"
  },
  {
    "text": "My name's Karim, and I'm a HealthKit engineer.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=13"
  },
  {
    "text": "The HealthKit framework provides the foundation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=16"
  },
  {
    "text": "for building great health experiences, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=19"
  },
  {
    "text": "and Apple Watch comes packed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=22"
  },
  {
    "text": "with many health and safety features, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=24"
  },
  {
    "text": "that keep an eye on things for you.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=26"
  },
  {
    "text": "One of the most popular is sleep tracking, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=29"
  },
  {
    "text": "and we are making updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=33"
  },
  {
    "text": "to capture more detailed sleep data.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=35"
  },
  {
    "text": "We also have other great new additions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=38"
  },
  {
    "text": "to HealthKit this year.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=41"
  },
  {
    "text": "We enhanced our APIs to make it easier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=44"
  },
  {
    "text": "to query for data with Swift async.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=47"
  },
  {
    "text": "We're improving workouts with a richer workout representation.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=51"
  },
  {
    "text": "And we're adding support for saving vision prescriptions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=57"
  },
  {
    "text": "including a digital copy of the physical prescription.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=62"
  },
  {
    "text": "I'm excited to tell you more about all these updates ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=67"
  },
  {
    "text": "and how your apps can leverage them.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=70"
  },
  {
    "text": "Let's get started! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=74"
  },
  {
    "text": "Sleep is such an essential function ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=77"
  },
  {
    "text": "that allows our bodies and minds to recharge, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=80"
  },
  {
    "text": "and I love using my Apple Watch to manage my sleep schedule ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=83"
  },
  {
    "text": "and get insights that help me understand ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=87"
  },
  {
    "text": "and improve my sleep.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=90"
  },
  {
    "text": "This year we are making sleep tracking even better ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=93"
  },
  {
    "text": "by introducing sleep stages.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=97"
  },
  {
    "text": "Apple Watch will automatically track ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=101"
  },
  {
    "text": "all the different sleep stages you go through ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=103"
  },
  {
    "text": "when you're asleep, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=106"
  },
  {
    "text": "and this data will be accessible from the Health app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=107"
  },
  {
    "text": "and saved in HealthKit.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=111"
  },
  {
    "text": "Of course, your app will be able to read ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=113"
  },
  {
    "text": "and save sleep stages data.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=117"
  },
  {
    "text": "Sleep data saved by Apple Watch or your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=121"
  },
  {
    "text": "is represented in HealthKit by category samples ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=124"
  },
  {
    "text": "with the identifier sleepAnalysis.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=128"
  },
  {
    "text": "We will support three sleep stages: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=132"
  },
  {
    "text": "REM, core, and deep.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=135"
  },
  {
    "text": "When saving sleep data to HealthKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=140"
  },
  {
    "text": "you should make sure to create one sample ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=142"
  },
  {
    "text": "for each continuous period of time in a given sleep stage.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=145"
  },
  {
    "text": "This is what the sleep sample value enum looks like.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=151"
  },
  {
    "text": "We're adding three cases to represent sleep stages, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=155"
  },
  {
    "text": "starting with asleepCore, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=161"
  },
  {
    "text": "which corresponds to stages one and two of the scoring model ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=163"
  },
  {
    "text": "from the American Academy of Sleep Medicine or AASM; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=168"
  },
  {
    "text": "asleepDeep, which corresponds to stage three ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=174"
  },
  {
    "text": "of the AASM scoring model; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=178"
  },
  {
    "text": "and finally, asleepREM, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=182"
  },
  {
    "text": "which corresponds to the rapid eye movement stage.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=184"
  },
  {
    "text": "Now that we added sleep stages, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=189"
  },
  {
    "text": "we are deprecating the asleep case ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=191"
  },
  {
    "text": "in favor of asleepUnspecified, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=194"
  },
  {
    "text": "which indicates that the user is asleep ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=198"
  },
  {
    "text": "but no sleep stage was specified.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=201"
  },
  {
    "text": "With the updated sleep samples enum, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=204"
  },
  {
    "text": "it is now possible to save and read sleep stages data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=206"
  },
  {
    "text": "from HealthKit.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=210"
  },
  {
    "text": "We added a new predicate to make it easy to read sleep samples ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=212"
  },
  {
    "text": "for a given stage.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=216"
  },
  {
    "text": "Let's say I want to read sleep samples ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=218"
  },
  {
    "text": "in the REM stage.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=222"
  },
  {
    "text": "First, I create a predicate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=224"
  },
  {
    "text": "using the new predicateForSamples method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=226"
  },
  {
    "text": "with asleepREM as value.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=229"
  },
  {
    "text": "Now, I can start building my query.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=232"
  },
  {
    "text": "I create a predicate for my query ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=235"
  },
  {
    "text": "with the sleepAnalysis sample type ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=237"
  },
  {
    "text": "and the sleep stage predicate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=240"
  },
  {
    "text": "And with this query predicate, I can now create my query.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=242"
  },
  {
    "text": "Running the query will give me back ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=247"
  },
  {
    "text": "an array of sleep samples in the REM stage.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=249"
  },
  {
    "text": "However, if you're interested in reading samples ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=253"
  },
  {
    "text": "for all sleep stages, including unspecified, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=256"
  },
  {
    "text": "it's important that you update your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=260"
  },
  {
    "text": "to use the new .allAsleepValues when building your predicate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=263"
  },
  {
    "text": "If you haven't looked at HealthKit since last year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=268"
  },
  {
    "text": "this shorter syntax for querying may look unfamiliar to you.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=271"
  },
  {
    "text": "Since iOS 15.4, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=276"
  },
  {
    "text": "we have updated our query API to support Swift async.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=279"
  },
  {
    "text": "Queries are an essential piece of HealthKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=284"
  },
  {
    "text": "and with Swift async support, they're easier to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=287"
  },
  {
    "text": "with a more concise syntax.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=291"
  },
  {
    "text": "Queries allow you to read various data from HealthKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=294"
  },
  {
    "text": "using predicates to filter the results, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=297"
  },
  {
    "text": "and also watch for new data as it comes in.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=299"
  },
  {
    "text": "All queries are subclasses of HKQuery.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=303"
  },
  {
    "text": "If I'm interested in knowing the total calories burned ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=308"
  },
  {
    "text": "over a certain period of time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=312"
  },
  {
    "text": "a great query to get these computed statistics ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=314"
  },
  {
    "text": "is HKStatisticsCollectionQuery.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=317"
  },
  {
    "text": "To get the initial results, you would set ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=320"
  },
  {
    "text": "the initialResultsHandler closure of the query.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=323"
  },
  {
    "text": "And if you're interested in watching for any updates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=327"
  },
  {
    "text": "you would additionally set ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=331"
  },
  {
    "text": "the statisticsUpdateHandler closure.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=333"
  },
  {
    "text": "Once the query is started, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=336"
  },
  {
    "text": "these closures will be called with the results.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=338"
  },
  {
    "text": "Thanks to Swift async, we are making this even simpler.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=341"
  },
  {
    "text": "Each query now has a matching query descriptor, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=346"
  },
  {
    "text": "so HKStatisticsCollectionQuery becomes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=349"
  },
  {
    "text": "HKStatisticsCollectionQuery Descriptor.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=353"
  },
  {
    "text": "You get the initial result ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=356"
  },
  {
    "text": "by simply calling the async result(for:) method.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=358"
  },
  {
    "text": "If, on the other hand, you want to get the initial result ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=362"
  },
  {
    "text": "and also watch for updates, you call results(for:), ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=366"
  },
  {
    "text": "which returns an AsyncSequence that you can loop through ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=370"
  },
  {
    "text": "to read the results.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=374"
  },
  {
    "text": "HealthKit is great for tracking workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=376"
  },
  {
    "text": "and relevant metrics such as burned calories.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=380"
  },
  {
    "text": "To find out how many calories I burned this week, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=384"
  },
  {
    "text": "I can use the statistics collection query descriptor.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=388"
  },
  {
    "text": "First, I create the query descriptor ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=392"
  },
  {
    "text": "with a predicate to match calorie samples.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=395"
  },
  {
    "text": "I use the cumulativeSum option because I want the total sum.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=398"
  },
  {
    "text": "I'm interested in this week's data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=404"
  },
  {
    "text": "so I use thisSunday as my anchorDate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=406"
  },
  {
    "text": "And finally, I want my calorie totals ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=410"
  },
  {
    "text": "to be computed for a time interval of one week.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=414"
  },
  {
    "text": "Once I created my query descriptor, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=418"
  },
  {
    "text": "all I need to do is call result(for:) ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=420"
  },
  {
    "text": "with a healthStore object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=424"
  },
  {
    "text": "The returned statisticsCollection object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=427"
  },
  {
    "text": "gives me a snapshot of my current data.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=429"
  },
  {
    "text": "But if I want live updates as my calories change, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=433"
  },
  {
    "text": "it's as simple as calling results(for:) ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=436"
  },
  {
    "text": "and looping through the returned async sequence ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=440"
  },
  {
    "text": "to read the results.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=443"
  },
  {
    "text": "When I'm done watching for updates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=445"
  },
  {
    "text": "I just break out of the loop and that will stop the query.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=448"
  },
  {
    "text": "Now, let's talk about workouts.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=452"
  },
  {
    "text": "HealthKit is a great place for saving workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=456"
  },
  {
    "text": "and all their related metrics ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=460"
  },
  {
    "text": "whether you're going on a casual bike ride ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=462"
  },
  {
    "text": "or pushing yourself to the limit at a race.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=465"
  },
  {
    "text": "And oftentimes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=468"
  },
  {
    "text": "workouts may contain more than one distinct activity.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=469"
  },
  {
    "text": "You may be repeating the same exercise with interval training ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=473"
  },
  {
    "text": "or participating in a triathlon race ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=478"
  },
  {
    "text": "which comprises swimming, cycling, and running.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=481"
  },
  {
    "text": "We are updating our workouts API in iOS 16 and watchOS 9 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=485"
  },
  {
    "text": "to make it possible to capture these types of workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=490"
  },
  {
    "text": "and the relevant statistics for each activity.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=494"
  },
  {
    "text": "This is the timeline of a swim-bike-run workout ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=499"
  },
  {
    "text": "I did recently.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=502"
  },
  {
    "text": "I started with swimming, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=504"
  },
  {
    "text": "after which I took a little bit of time ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=506"
  },
  {
    "text": "to get ready for the cycling portion of the workout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=508"
  },
  {
    "text": "and finally running.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=512"
  },
  {
    "text": "Each activity is represented by an HKWorkoutActivity object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=514"
  },
  {
    "text": "Each workout activity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=521"
  },
  {
    "text": "is created with its own workout configuration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=522"
  },
  {
    "text": "which includes the activity type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=525"
  },
  {
    "text": "A workout activity holds a list of events ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=529"
  },
  {
    "text": "that occurred during the activity.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=532"
  },
  {
    "text": "And you will be able to read statistics for each activity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=536"
  },
  {
    "text": "which is great for when you're only interested ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=541"
  },
  {
    "text": "in analyzing what happened during a particular activity.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=543"
  },
  {
    "text": "Going back to my timeline, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=548"
  },
  {
    "text": "my three activities are configured ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=550"
  },
  {
    "text": "with their appropriate activity type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=552"
  },
  {
    "text": "Activities cannot overlap in time.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=556"
  },
  {
    "text": "And because there may be a transition period ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=559"
  },
  {
    "text": "between each activity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=562"
  },
  {
    "text": "they are not required to be contiguous.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=564"
  },
  {
    "text": "If I'm interested in analyzing what happened ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=567"
  },
  {
    "text": "during transition periods, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=570"
  },
  {
    "text": "I can create an HKWorkoutActivity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=572"
  },
  {
    "text": "for each transition with the type transition.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=575"
  },
  {
    "text": "All of these activities will be saved with the HKWorkout object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=579"
  },
  {
    "text": "under the workoutActivities property.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=584"
  },
  {
    "text": "If you're using HKWorkoutBuilder to add workouts to HealthKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=587"
  },
  {
    "text": "adding an activity is as easy as creating ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=592"
  },
  {
    "text": "an HKWorkoutActivity object with a workoutConfiguration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=595"
  },
  {
    "text": "start and end date, and an optional metadata.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=600"
  },
  {
    "text": "And then, you simply call addWorkoutActivity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=604"
  },
  {
    "text": "on the workout builder.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=608"
  },
  {
    "text": "On Apple Watch, you can use a workout session ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=610"
  },
  {
    "text": "to track a swim-bike-run workout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=614"
  },
  {
    "text": "and the associated workout builder ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=616"
  },
  {
    "text": "to save the workout in HealthKit.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=618"
  },
  {
    "text": "Let's go back to my workout timeline.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=621"
  },
  {
    "text": "To track this workout on Apple Watch, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=623"
  },
  {
    "text": "I need to set up a workout session and builder.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=626"
  },
  {
    "text": "I start by creating a workout configuration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=631"
  },
  {
    "text": "with the type swimBikeRun.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=635"
  },
  {
    "text": "Then I create an HKWorkoutSession ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=638"
  },
  {
    "text": "using my configuration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=641"
  },
  {
    "text": "At the beginning of the workout ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=643"
  },
  {
    "text": "I simply call startActivity on the session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=645"
  },
  {
    "text": "and beginCollection on the associated workout builder.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=648"
  },
  {
    "text": "Now that my session and builder are ready, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=653"
  },
  {
    "text": "I can add my first activity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=655"
  },
  {
    "text": "using the beginNewActivity method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=658"
  },
  {
    "text": "with a swimming workout configuration and a start date.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=661"
  },
  {
    "text": "At the beginning of each activity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=665"
  },
  {
    "text": "you should make sure to update the workout builder data source ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=668"
  },
  {
    "text": "to only collect the data types you're interested in.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=671"
  },
  {
    "text": "Because this is a swimming activity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=675"
  },
  {
    "text": "I want swimming distance to be collected.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=677"
  },
  {
    "text": "At the end of the activity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=681"
  },
  {
    "text": "I call endCurrentActivity with the end date.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=682"
  },
  {
    "text": "Because I'm interested in analyzing the transition period ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=688"
  },
  {
    "text": "from swimming to cycling, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=692"
  },
  {
    "text": "I will start a new transition activity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=694"
  },
  {
    "text": "immediately after swimming has ended.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=697"
  },
  {
    "text": "Again, because this is the beginning of an activity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=700"
  },
  {
    "text": "I update the builder data source ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=704"
  },
  {
    "text": "to disable the collection of swimming distance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=706"
  },
  {
    "text": "since it's no longer relevant.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=709"
  },
  {
    "text": "I end the transition activity right before cycling begins.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=713"
  },
  {
    "text": "I can track the remaining activities of my workout ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=718"
  },
  {
    "text": "the same way.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=721"
  },
  {
    "text": "At the end of the workout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=723"
  },
  {
    "text": "ending the session will also end any running activity.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=725"
  },
  {
    "text": "Then I can finish the workout builder, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=730"
  },
  {
    "text": "which will save and return an HKWorkout object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=732"
  },
  {
    "text": "I can use the returned workout ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=736"
  },
  {
    "text": "to read some of the associated metrics ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=739"
  },
  {
    "text": "such as totalEnergyBurned and totalDistance, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=741"
  },
  {
    "text": "and display a summary of the workout in my app.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=745"
  },
  {
    "text": "However, this small set of properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=749"
  },
  {
    "text": "is no longer sufficient.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=752"
  },
  {
    "text": "totalSwimmingStrokeCount is not relevant to all workouts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=755"
  },
  {
    "text": "and some workouts may collect more metrics.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=759"
  },
  {
    "text": "In order to make it easier to read metrics ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=763"
  },
  {
    "text": "for all kinds of workouts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=765"
  },
  {
    "text": "we are deprecating these properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=767"
  },
  {
    "text": "in favor of a new method which returns statistics ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=769"
  },
  {
    "text": "for a given quantity type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=773"
  },
  {
    "text": "As a reminder, this method is also available ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=776"
  },
  {
    "text": "on HKWorkoutActivity, allowing you to focus ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=779"
  },
  {
    "text": "on just what happened during an activity.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=783"
  },
  {
    "text": "These statistics will be automatically computed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=788"
  },
  {
    "text": "from any samples collected with the workout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=791"
  },
  {
    "text": "only when using HKWorkoutBuilder or HKLiveWorkoutBuilder.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=794"
  },
  {
    "text": "Along with this richer workout representation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=800"
  },
  {
    "text": "we also have a new set of predicates to help you query ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=803"
  },
  {
    "text": "for only the workouts you're interested in ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=806"
  },
  {
    "text": "when driving your analysis or visualization.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=808"
  },
  {
    "text": "To give you an example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=812"
  },
  {
    "text": "here's a list of my recent workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=814"
  },
  {
    "text": "with the average heart rate for each activity.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=818"
  },
  {
    "text": "I would like to find my workouts with high-intensity activities ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=822"
  },
  {
    "text": "where my average heart rate was above 150.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=827"
  },
  {
    "text": "First, I start by creating a predicate using the new ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=830"
  },
  {
    "text": "predicateForWorkoutActivities method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=834"
  },
  {
    "text": "which will act on workout activities.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=837"
  },
  {
    "text": "I want the average heart rate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=840"
  },
  {
    "text": "to be greater than 150 beats per minute.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=842"
  },
  {
    "text": "Next, because I want to query for workouts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=845"
  },
  {
    "text": "I wrap my heart rate predicate inside a workout predicate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=848"
  },
  {
    "text": "Then, I create a query using that predicate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=853"
  },
  {
    "text": "And I call the result(for: healthStore) method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=857"
  },
  {
    "text": "of my query descriptor to get the list of workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=860"
  },
  {
    "text": "that match my predicate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=863"
  },
  {
    "text": "And that's how I'm able to query ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=866"
  },
  {
    "text": "for just the workouts I'm interested in.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=867"
  },
  {
    "text": "One of my recent workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=871"
  },
  {
    "text": "consisted of four running intervals.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=873"
  },
  {
    "text": "Using HKWorkoutActivity is a great way ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=876"
  },
  {
    "text": "to capture these intervals.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=880"
  },
  {
    "text": "You just need to make sure that all activities ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=882"
  },
  {
    "text": "of an interval workout have the same activity type ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=885"
  },
  {
    "text": "as the workout.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=889"
  },
  {
    "text": "So for a running workout, all activities are configured ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=890"
  },
  {
    "text": "with the .running type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=894"
  },
  {
    "text": "One benefit of using workout activities to track intervals ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=897"
  },
  {
    "text": "is you can get statistics for each interval.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=901"
  },
  {
    "text": "With these updates, workouts now include ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=904"
  },
  {
    "text": "a more comprehensive picture of their activities ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=907"
  },
  {
    "text": "and the context surrounding them.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=911"
  },
  {
    "text": "In order to provide an even richer picture, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=914"
  },
  {
    "text": "we're introducing new running metrics ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=918"
  },
  {
    "text": "that will be automatically collected ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=921"
  },
  {
    "text": "on Apple Watch Series 6, SE, and newer -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=923"
  },
  {
    "text": "metrics such as running stride length, or power in watts.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=928"
  },
  {
    "text": "For swimming workouts, we're adding the SWOLF score.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=933"
  },
  {
    "text": "It's defined as the number of strokes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=937"
  },
  {
    "text": "taken in a given length, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=940"
  },
  {
    "text": "and the time it took to swim that length.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=942"
  },
  {
    "text": "This score will be calculated for each lap event ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=945"
  },
  {
    "text": "and segment event for swimming workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=949"
  },
  {
    "text": "recorded on Apple Watch.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=952"
  },
  {
    "text": "While these metrics enrich your workouts and allow you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=955"
  },
  {
    "text": "to get a better understanding of how you performed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=958"
  },
  {
    "text": "another important metric that is recorded ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=962"
  },
  {
    "text": "after a workout has ended is heart rate recovery.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=965"
  },
  {
    "text": "It's an estimate of how quickly your heart rate lowers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=969"
  },
  {
    "text": "after exercise, and it can be used to understand ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=973"
  },
  {
    "text": "how the heart recovers after stress, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=977"
  },
  {
    "text": "and reveal potential health problems.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=980"
  },
  {
    "text": "With iOS 16, we are introducing a new Cardio Recovery data type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=983"
  },
  {
    "text": "It will be accessible from the Health app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=988"
  },
  {
    "text": "and your apps will be able to read and save this data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=991"
  },
  {
    "text": "in HealthKit.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=994"
  },
  {
    "text": "Heart rate recovery is a quantity type ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=997"
  },
  {
    "text": "with the identifier .heartRateRecoveryOneMinute.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1001"
  },
  {
    "text": "Additional context information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1006"
  },
  {
    "text": "about each heart rate recovery sample ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1008"
  },
  {
    "text": "can be added as metadata.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1010"
  },
  {
    "text": "In my recent swim-bike-run workout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1014"
  },
  {
    "text": "I pushed myself to my limits, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1016"
  },
  {
    "text": "and then observed my heart rate's recovery rate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1019"
  },
  {
    "text": "It took me about three and a half hours ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1023"
  },
  {
    "text": "to complete the workout.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1025"
  },
  {
    "text": "I reached a maximum heart rate of 184 beats per minute ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1028"
  },
  {
    "text": "when I was running.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1032"
  },
  {
    "text": "And the minute following the workout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1034"
  },
  {
    "text": "my heart rate dropped by 50 beats.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1036"
  },
  {
    "text": "When using HKLiveWorkoutBuilder on Apple Watch, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1040"
  },
  {
    "text": "a heart rate recovery sample, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1044"
  },
  {
    "text": "along with its surrounding context, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1046"
  },
  {
    "text": "is automatically saved in HealthKit after a workout.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1048"
  },
  {
    "text": "Otherwise, to save a heart rate recovery sample, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1053"
  },
  {
    "text": "I create a quantity sample with the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1057"
  },
  {
    "text": ".heartRateRecoveryOneMinute type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1059"
  },
  {
    "text": "My heart rate dropped by 50 beats ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1062"
  },
  {
    "text": "the minute following the workout, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1064"
  },
  {
    "text": "so I set that as the quantity of my sample.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1066"
  },
  {
    "text": "I also set a start and end date for the sample.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1070"
  },
  {
    "text": "Then, I put the additional context information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1074"
  },
  {
    "text": "in the metadata dictionary, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1077"
  },
  {
    "text": "starting with the recovery test type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1080"
  },
  {
    "text": "Because my workout was an all-out effort, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1083"
  },
  {
    "text": "the test type is .maxExercise.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1086"
  },
  {
    "text": "My workout was a swimBikeRun, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1089"
  },
  {
    "text": "so I set that as the activity type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1092"
  },
  {
    "text": "I can also add the workout duration using the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1095"
  },
  {
    "text": "HeartRateRecoveryActivity Duration key.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1099"
  },
  {
    "text": "Finally, I add the maximum heart rate observed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1103"
  },
  {
    "text": "during the workout, which was 184 beats per minute.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1107"
  },
  {
    "text": "With these updates, it is now easier than ever ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1112"
  },
  {
    "text": "to track swim-bike-run, and interval workouts.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1115"
  },
  {
    "text": "In addition, the introduction of new metrics ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1119"
  },
  {
    "text": "provides a more comprehensive picture for your workouts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1123"
  },
  {
    "text": "and newer ways to evaluate progress over time.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1127"
  },
  {
    "text": "While activity and fitness is something that impacts everyone ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1132"
  },
  {
    "text": "there are other aspects of health ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1137"
  },
  {
    "text": "that touch on many of us, such as vision.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1139"
  },
  {
    "text": "In fact, according to the Vision Council of America, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1143"
  },
  {
    "text": "approximately 75 percent of adults in the United States ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1147"
  },
  {
    "text": "rely on vision correction with prescription glasses ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1151"
  },
  {
    "text": "or contact lenses.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1155"
  },
  {
    "text": "These prescriptions, however, are easy to lose, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1157"
  },
  {
    "text": "and it's one more thing you need to have with you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1160"
  },
  {
    "text": "when ordering prescription glasses or contact lenses.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1163"
  },
  {
    "text": "So let's put them in our phones.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1167"
  },
  {
    "text": "Starting with iOS 16, your apps can now save ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1171"
  },
  {
    "text": "glasses and contacts prescriptions in HealthKit.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1174"
  },
  {
    "text": "A vision prescription is a sample ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1179"
  },
  {
    "text": "with the visionPrescriptionType.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1182"
  },
  {
    "text": "The sample's start date corresponds ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1185"
  },
  {
    "text": "to the prescription's issue date, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1187"
  },
  {
    "text": "while the end date corresponds to the expiration date.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1190"
  },
  {
    "text": "Optionally, a digital copy of the physical prescription ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1194"
  },
  {
    "text": "can be attached to the sample.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1199"
  },
  {
    "text": "A glasses or contacts prescription sample ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1202"
  },
  {
    "text": "is a subclass of HKVisionPrescription.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1206"
  },
  {
    "text": "For glasses, you use the HKGlassesPrescription subclass, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1210"
  },
  {
    "text": "and for contacts, the HKContactsPrescription subclass.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1215"
  },
  {
    "text": "Each glasses prescription is created ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1220"
  },
  {
    "text": "using two glasses lens specification objects; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1222"
  },
  {
    "text": "one for each eye.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1226"
  },
  {
    "text": "And similarly, contacts prescriptions are created ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1229"
  },
  {
    "text": "with two contacts lens specification objects.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1232"
  },
  {
    "text": "Now, let's save my reading glasses prescription ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1236"
  },
  {
    "text": "to HealthKit.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1240"
  },
  {
    "text": "The first step is to create an HKGlassesLensSpecification ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1242"
  },
  {
    "text": "for each eye.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1246"
  },
  {
    "text": "Some parameters, such as vertex distance and prism, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1248"
  },
  {
    "text": "are optional.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1252"
  },
  {
    "text": "I can create the right eye lens specification the same way.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1254"
  },
  {
    "text": "Next, I create a glasses prescription sample ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1260"
  },
  {
    "text": "with my right eye and left eye lens specifications.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1264"
  },
  {
    "text": "This prescription is for my reading glasses, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1269"
  },
  {
    "text": "so I'm adding that in the description.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1272"
  },
  {
    "text": "Then, I just call save on the healthStore ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1276"
  },
  {
    "text": "with my prescription.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1278"
  },
  {
    "text": "And with that, my prescription is now saved in HealthKit.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1280"
  },
  {
    "text": "I also took a picture of it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1285"
  },
  {
    "text": "which I'd like to attach to the sample I just saved.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1287"
  },
  {
    "text": "A file attachment is represented by an HKAttachment object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1291"
  },
  {
    "text": "You use HKAttachmentStore to save and read file attachments.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1297"
  },
  {
    "text": "Only static images or PDF files ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1303"
  },
  {
    "text": "can be attached to prescriptions.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1307"
  },
  {
    "text": "To attach the picture I took to my prescription sample, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1310"
  },
  {
    "text": "I start by creating an HKAttachmentStore object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1315"
  },
  {
    "text": "using a healthStore.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1319"
  },
  {
    "text": "Then I call addAttachment(to:) with my prescription sample.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1321"
  },
  {
    "text": "I set a name for the attachment.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1327"
  },
  {
    "text": "Here, I'm attaching a PNG file.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1329"
  },
  {
    "text": "And finally, pass the URL of the file.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1333"
  },
  {
    "text": "The prescription I just attached contains a lot more information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1337"
  },
  {
    "text": "than just the lens specification -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1342"
  },
  {
    "text": "sensitive information, like my full name and date of birth.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1345"
  },
  {
    "text": "One of HealthKit's core principles ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1350"
  },
  {
    "text": "is to protect your privacy and make sure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1353"
  },
  {
    "text": "that you are always in control of the data you share.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1356"
  },
  {
    "text": "Because it can be easy to share more data than intended ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1360"
  },
  {
    "text": "with prescriptions that include an attachment, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1364"
  },
  {
    "text": "we are introducing a new authorization model ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1367"
  },
  {
    "text": "for prescriptions.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1370"
  },
  {
    "text": "Read authorization is granted ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1372"
  },
  {
    "text": "for each prescription object separately.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1374"
  },
  {
    "text": "Users can select exactly which prescriptions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1377"
  },
  {
    "text": "they grant your app access to, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1380"
  },
  {
    "text": "and update their selection at any time.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1383"
  },
  {
    "text": "We have a new API for requesting authorization ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1387"
  },
  {
    "text": "for vision prescription objects.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1390"
  },
  {
    "text": "Just like other data types, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1394"
  },
  {
    "text": "you can use queries to read prescriptions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1396"
  },
  {
    "text": "that your app has access to.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1399"
  },
  {
    "text": "If you're only interested in certain prescriptions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1402"
  },
  {
    "text": "you can use a predicate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1405"
  },
  {
    "text": "To request authorization, simply call the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1407"
  },
  {
    "text": "requestPerObjectRead Authorization method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1411"
  },
  {
    "text": "of the healthStore with the visionType.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1414"
  },
  {
    "text": "Doing so will always display an authorization prompt in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1417"
  },
  {
    "text": "with a list of all the prescriptions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1422"
  },
  {
    "text": "that match your predicate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1425"
  },
  {
    "text": "Make sure you're asking for authorization ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1428"
  },
  {
    "text": "in the appropriate context to ensure the best user experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1431"
  },
  {
    "text": "These are just some of the new things we added to HealthKit ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1436"
  },
  {
    "text": "to empower your apps to provide better health ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1440"
  },
  {
    "text": "and fitness experiences.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1443"
  },
  {
    "text": "We can't wait to see what you will build next.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1445"
  },
  {
    "text": "Have a great WWDC, and if you have any questions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1449"
  },
  {
    "text": "we'll be happy to help you in the Developer Forums.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1453"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10005/?time=1457"
  }
]