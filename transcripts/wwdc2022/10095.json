[
  {
    "text": "♪ Mellow instrumental hip-hop music ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=0"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=2"
  },
  {
    "text": "Miranda Zhou: Hi, my name is Miranda ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=9"
  },
  {
    "text": "and I'm an engineer on the Sharing team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=11"
  },
  {
    "text": "Elana Stettin: I'm Elana and I'm an engineer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=14"
  },
  {
    "text": "on the Messages team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=16"
  },
  {
    "text": "Miranda: In this video, Elana and I will be diving into ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=18"
  },
  {
    "text": "how to enhance collaboration with Messages in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=21"
  },
  {
    "text": "I'll start with an introduction of what the feature is. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=26"
  },
  {
    "text": "You'll learn how to prepare to adopt this feature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=31"
  },
  {
    "text": "and how to tie Messages into the process ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=35"
  },
  {
    "text": "to start a collaboration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=38"
  },
  {
    "text": "Elana will explain how to add collaboration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=42"
  },
  {
    "text": "with Messages UI to your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=45"
  },
  {
    "text": "and finally she will discuss how to keep up to date ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=49"
  },
  {
    "text": "when the collaboration is updated. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=52"
  },
  {
    "text": "First, let me introduce collaboration with Messages! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=56"
  },
  {
    "text": "In iOS 16 and macOS Ventura, we've added a new and easy way ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=62"
  },
  {
    "text": "to improve communication between people who are collaborating. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=67"
  },
  {
    "text": "Collaborators are able to tie a document to conversations ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=73"
  },
  {
    "text": "by sharing via Messages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=77"
  },
  {
    "text": "Collaboration activity is surfaced in Messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=81"
  },
  {
    "text": "conversations and in ongoing FaceTime calls. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=85"
  },
  {
    "text": "A customizable Collaboration popover ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=91"
  },
  {
    "text": "is also provided to your app to manage details ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=94"
  },
  {
    "text": "of the collaboration and connect to the Messages conversation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=98"
  },
  {
    "text": "This builds on technologies that you are already using, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=104"
  },
  {
    "text": "such as the share sheet and drag and drop. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=107"
  },
  {
    "text": "Next, I'll go over the types of collaboration infrastructures ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=112"
  },
  {
    "text": "we support, and how to tie each of those ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=116"
  },
  {
    "text": "to Messages collaboration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=119"
  },
  {
    "text": "We support three types of collaboration infrastructures: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=122"
  },
  {
    "text": "CloudKit, iCloud Drive, and whatever custom ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=127"
  },
  {
    "text": "collaboration infrastructure you may be using today! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=131"
  },
  {
    "text": "In this video, I'll mainly focus ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=135"
  },
  {
    "text": "on the CloudKit and iCloud Drive cases. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=138"
  },
  {
    "text": "If you are using a custom infrastructure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=142"
  },
  {
    "text": "watch the \"Integrate your custom collaboration app with Messages\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=145"
  },
  {
    "text": "video for more details. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=149"
  },
  {
    "text": "If you use CloudKit-based collaboration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=153"
  },
  {
    "text": "we've provided a new API to create an object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=156"
  },
  {
    "text": "that the system can recognize for collaboration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=159"
  },
  {
    "text": "This is based off the macOS Sierra API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=164"
  },
  {
    "text": "to start or manage a share with NSSharingService. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=167"
  },
  {
    "text": "Once you have the collaboration object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=172"
  },
  {
    "text": "identify where in the app you are showing UI ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=175"
  },
  {
    "text": "to start or manage the share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=178"
  },
  {
    "text": "You need to update to the new API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=182"
  },
  {
    "text": "to enhance your collaboration with Messages, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=184"
  },
  {
    "text": "as we will deprecate the existing AppKit API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=187"
  },
  {
    "text": "The new collaboration object API uses NSItemProvider. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=193"
  },
  {
    "text": "NSItemProvider is used by system services ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=199"
  },
  {
    "text": "to transport your app's data to other processes on the system. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=203"
  },
  {
    "text": "The provider requires either the CKShare ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=208"
  },
  {
    "text": "for the collaboration item, or a preparation handler ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=211"
  },
  {
    "text": "to create a CKShare when collaboration starts. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=215"
  },
  {
    "text": "Your app's CKContainer is also required. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=219"
  },
  {
    "text": "And finally, provide a CKAllowedSharingOptions object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=223"
  },
  {
    "text": "representing the access and permissions options ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=228"
  },
  {
    "text": "for the collaboration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=231"
  },
  {
    "text": "The values of the options are the same as the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=234"
  },
  {
    "text": "NSCloudKitSharingServiceOptions which were previously requested ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=237"
  },
  {
    "text": "from NSCloudSharingServiceDelegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=242"
  },
  {
    "text": "methods. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=245"
  },
  {
    "text": "Here's a brief overview of what it looks like to create ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=248"
  },
  {
    "text": "a CloudKit collaboration object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=251"
  },
  {
    "text": "If the collaboration is being started and you pass in ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=255"
  },
  {
    "text": "a preparation handler, you need to both ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=259"
  },
  {
    "text": "create the share and save it to the server in the handler. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=261"
  },
  {
    "text": "If it's already started, just pass in the associated share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=268"
  },
  {
    "text": "The CKAllowedSharingOptions instance being registered ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=275"
  },
  {
    "text": "is using a static standard property ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=279"
  },
  {
    "text": "which returns the default set of allowed options. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=282"
  },
  {
    "text": "CloudKit adopters can use that or create a custom instance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=286"
  },
  {
    "text": "of the class for a restricted set of allowed options.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=291"
  },
  {
    "text": "For those of you who might be interested in adopting CloudKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=297"
  },
  {
    "text": "CloudKit lets you use iCloud as your app's database ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=302"
  },
  {
    "text": "without writing your own server code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=305"
  },
  {
    "text": "You will also get a built-in method of sharing parts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=309"
  },
  {
    "text": "of that data with other iCloud users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=312"
  },
  {
    "text": "For more details, watch the \"What's new in CloudKit\" video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=315"
  },
  {
    "text": "If you're using iCloud Drive, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=322"
  },
  {
    "text": "your object for collaboration is simply your file URL -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=324"
  },
  {
    "text": "we'll do all the work to recognize it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=329"
  },
  {
    "text": "Once you have that, identify the entry points ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=333"
  },
  {
    "text": "to start or manage collaboration in your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=336"
  },
  {
    "text": "and prepare to replace them with the new and improved versions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=340"
  },
  {
    "text": "For custom collaboration infrastructures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=346"
  },
  {
    "text": "your collaboration object is called SWCollaborationMetadata, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=349"
  },
  {
    "text": "wrapped in new NSItemProvider API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=354"
  },
  {
    "text": "Watch the \"Integrate your custom collaboration app with Messages\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=359"
  },
  {
    "text": "video for details on how to use this API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=362"
  },
  {
    "text": "to update your collaboration UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=366"
  },
  {
    "text": "Now you're ready to go. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=370"
  },
  {
    "text": "Next, initiating a collaboration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=373"
  },
  {
    "text": "There are two different ways: through the share sheet ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=376"
  },
  {
    "text": "in its new collaboration mode, and through drag and drop ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=379"
  },
  {
    "text": "to Messages, either from your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=383"
  },
  {
    "text": "or from the Files app on iOS and Finder on macOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=385"
  },
  {
    "text": "The new share sheet collaboration mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=391"
  },
  {
    "text": "can be identified by an indicator in the header, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=394"
  },
  {
    "text": "which also provides a choice between collaboration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=398"
  },
  {
    "text": "and sending a copy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=401"
  },
  {
    "text": "In order to have collaboration in the share sheet, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=404"
  },
  {
    "text": "give the share sheet the collaboration object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=407"
  },
  {
    "text": "you prepared earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=410"
  },
  {
    "text": "On macOS, this collaboration indicator ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=414"
  },
  {
    "text": "is shown in a beautiful new share popover! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=417"
  },
  {
    "text": "The share popover also includes a title and image ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=421"
  },
  {
    "text": "in the header, plus a row of conversation suggestions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=425"
  },
  {
    "text": "and all the transports we offered already. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=429"
  },
  {
    "text": "For more details about this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=433"
  },
  {
    "text": "watch the WWDC22 \"What's new in AppKit\" video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=435"
  },
  {
    "text": "On iOS and Mac Catalyst, show the share sheet using ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=440"
  },
  {
    "text": "the UIActivityViewController class. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=444"
  },
  {
    "text": "On macOS, show the share popover using NSSharingServicePicker. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=448"
  },
  {
    "text": "Pass the collaboration object to UIActivityViewController ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=456"
  },
  {
    "text": "as an activity item to present it with collaboration enabled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=460"
  },
  {
    "text": "And similarly, initialize NSSharingServicePicker ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=467"
  },
  {
    "text": "with the collaboration object to show it ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=471"
  },
  {
    "text": "with collaboration enabled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=474"
  },
  {
    "text": "CloudKit adopters will need to take an extra step ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=477"
  },
  {
    "text": "to provide a title and image for the headers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=481"
  },
  {
    "text": "On iOS, use existing API such as UIActivityItemsConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=486"
  },
  {
    "text": "or UIActivityItemSource to provide ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=492"
  },
  {
    "text": "an LPLinkMetadata object with a title and imageProvider. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=496"
  },
  {
    "text": "Create your configuration with your collaboration object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=503"
  },
  {
    "text": "then set the metadata provider to return ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=508"
  },
  {
    "text": "your LPLinkMetadata object for the item being shared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=511"
  },
  {
    "text": "Finally, initialize UIActivityViewController ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=518"
  },
  {
    "text": "with that configuration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=522"
  },
  {
    "text": "On macOS, we have a new API called ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=525"
  },
  {
    "text": "NSPreviewRepresenting ActivityItem ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=528"
  },
  {
    "text": "for providing the header metadata. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=532"
  },
  {
    "text": "Refer to the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=535"
  },
  {
    "text": "NSPreviewRepresenting ActivityItem documentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=536"
  },
  {
    "text": "for more details. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=540"
  },
  {
    "text": "To use NSPreviewRepresenting ActivityItem, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=544"
  },
  {
    "text": "first choose your title, image, and icon. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=547"
  },
  {
    "text": "The image represents the item being shared, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=552"
  },
  {
    "text": "while the icon represents the source of the item ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=555"
  },
  {
    "text": "being shared -- for example, an app icon. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=558"
  },
  {
    "text": "Create an NSPreviewRepresenting ActivityItem ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=564"
  },
  {
    "text": "with your collaboration object, title, image, and icon, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=568"
  },
  {
    "text": "and initialize NSSharingServicePicker ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=574"
  },
  {
    "text": "with that preview item. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=577"
  },
  {
    "text": "On an exciting note, the new SwiftUI ShareLink API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=581"
  },
  {
    "text": "for the share sheet will also support collaboration mode! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=585"
  },
  {
    "text": "To adopt, the item you are sharing must be represented ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=590"
  },
  {
    "text": "by Transferable, a new protocol for sharing and data transfer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=593"
  },
  {
    "text": "CloudKit adopters provide the share, container, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=600"
  },
  {
    "text": "and options through a CKShareTransferRepresentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=603"
  },
  {
    "text": "returned by your Transferable item. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=608"
  },
  {
    "text": "For more details, watch the \"Meet Transferable\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=611"
  },
  {
    "text": "and WWDC22 \"What's new in SwiftUI\" videos. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=615"
  },
  {
    "text": "Here's an example of how a CloudKit adopter like Notes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=622"
  },
  {
    "text": "would create a transferable object to share with ShareLink. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=625"
  },
  {
    "text": "The note provides a CKShareTransferRepresentation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=632"
  },
  {
    "text": "which is constructed either as its existing value ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=638"
  },
  {
    "text": "with an existing CKShare, CKContainer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=641"
  },
  {
    "text": "and CKAllowedSharingOptions value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=645"
  },
  {
    "text": "or as its prepareShare value with a CKContainer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=649"
  },
  {
    "text": "CKAllowedSharingOptions value, and a preparation handler ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=654"
  },
  {
    "text": "to create and save a CKShare for the collaboration object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=659"
  },
  {
    "text": "For iCloud Drive adopters, your file URL ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=666"
  },
  {
    "text": "is the Transferable object which you share through ShareLink. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=670"
  },
  {
    "text": "If you have a custom collaboration infrastructure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=675"
  },
  {
    "text": "watch the \"Integrate your custom collaboration app with Messages\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=679"
  },
  {
    "text": "video for how to return an SWCollaborationMetadata object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=683"
  },
  {
    "text": "from your transferable object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=689"
  },
  {
    "text": "Once you have your Transferable object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=693"
  },
  {
    "text": "pass it to the ShareLink initializer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=696"
  },
  {
    "text": "as the item to share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=698"
  },
  {
    "text": "At the same time, pass in a preview ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=701"
  },
  {
    "text": "with a title and image to fill in the share sheet header. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=704"
  },
  {
    "text": "One notable feature ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=710"
  },
  {
    "text": "of the share sheet collaboration mode header ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=712"
  },
  {
    "text": "is the summary of the access and permissions options. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=715"
  },
  {
    "text": "Tapping this summary brings up a view where collaborators ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=719"
  },
  {
    "text": "choose what access and permissions options ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=723"
  },
  {
    "text": "to use when collaborating. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=726"
  },
  {
    "text": "For CloudKit adopters, this view shows ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=731"
  },
  {
    "text": "the set of options registered in the collaboration object. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=734"
  },
  {
    "text": "iCloud Drive adopters ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=739"
  },
  {
    "text": "show the standard set of iCloud Drive options. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=741"
  },
  {
    "text": "If you have a custom infrastructure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=745"
  },
  {
    "text": "watch the \"Integrate your custom collaboration app with Messages\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=747"
  },
  {
    "text": "video for how to specify your custom options ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=752"
  },
  {
    "text": "and have them show up in this view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=756"
  },
  {
    "text": "There's one more way to start a collaboration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=761"
  },
  {
    "text": "and that's through drag and drop. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=764"
  },
  {
    "text": "A collaborator can simply drag your document into Messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=766"
  },
  {
    "text": "and get the new collaboration-enabled rich link ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=771"
  },
  {
    "text": "for the document in Messages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=774"
  },
  {
    "text": "This rich link provides functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=777"
  },
  {
    "text": "both for collaboration and sending a copy, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=780"
  },
  {
    "text": "and for selecting collaboration options. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=783"
  },
  {
    "text": "To adopt, provide your collaboration object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=788"
  },
  {
    "text": "through ShareLink on iOS 16 and macOS Ventura. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=791"
  },
  {
    "text": "And that's how you prepare for and initiate collaborations ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=798"
  },
  {
    "text": "with Messages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=802"
  },
  {
    "text": "Next, I'll hand it over to Elana, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=804"
  },
  {
    "text": "who will talk about taking your app's collaboration experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=807"
  },
  {
    "text": "to the next level. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=810"
  },
  {
    "text": "Elana: Thanks, Miranda! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=812"
  },
  {
    "text": "Now that you know how to get started, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=814"
  },
  {
    "text": "I'll talk about how to further integrate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=816"
  },
  {
    "text": "our collaboration UI into your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=818"
  },
  {
    "text": "We've added these new features ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=822"
  },
  {
    "text": "to amplify the collaboration experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=823"
  },
  {
    "text": "The collaboration button is placed in your app's navigation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=827"
  },
  {
    "text": "and will show the group photo ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=830"
  },
  {
    "text": "of the associated messages group. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=832"
  },
  {
    "text": "There is also an active participant count ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=834"
  },
  {
    "text": "to the right of the button that will show when others ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=836"
  },
  {
    "text": "are present in the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=839"
  },
  {
    "text": "When you tap the collaboration button, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=842"
  },
  {
    "text": "the new collaboration popover appears. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=845"
  },
  {
    "text": "The customizable popover ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=848"
  },
  {
    "text": "shows the overview of the collaboration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=849"
  },
  {
    "text": "It also allows users to initiate communication ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=852"
  },
  {
    "text": "with other participants with just one tap. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=855"
  },
  {
    "text": "This provides them the ability to work together in real time ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=858"
  },
  {
    "text": "via Messages and FaceTime.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=861"
  },
  {
    "text": "These UI elements are all powered by a single class ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=866"
  },
  {
    "text": "in the SharedWithYou framework: SWCollaborationView. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=870"
  },
  {
    "text": "This view represents the button view in the navigation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=874"
  },
  {
    "text": "All you need to do is initialize ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=878"
  },
  {
    "text": "the SWCollaborationView and we will take care ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=879"
  },
  {
    "text": "of the popover layout and presentation for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=882"
  },
  {
    "text": "To show custom content, you'll provide a view ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=886"
  },
  {
    "text": "which will be added to the popover. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=889"
  },
  {
    "text": "Now, I'll go over the code to create the SWCollaborationView. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=892"
  },
  {
    "text": "Initialize the SWCollaborationView ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=898"
  },
  {
    "text": "with an itemProvider. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=901"
  },
  {
    "text": "The itemProvider contains ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=903"
  },
  {
    "text": "the CKShare for CloudKit-based apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=904"
  },
  {
    "text": "the fileURL for iCloud Drive-based apps, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=907"
  },
  {
    "text": "or the SW Collaboration metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=910"
  },
  {
    "text": "for custom collaboration infrastructures.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=912"
  },
  {
    "text": "Set the activeParticipantCount property ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=918"
  },
  {
    "text": "on the collaboration view to show the number ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=920"
  },
  {
    "text": "of active participants on the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=923"
  },
  {
    "text": "Then set the contentView property ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=927"
  },
  {
    "text": "on the collaborationView to provide the popover ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=930"
  },
  {
    "text": "with custom content. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=932"
  },
  {
    "text": "The ContentView is what makes the popover ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=935"
  },
  {
    "text": "completely customizable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=937"
  },
  {
    "text": "This is where you'll add your own content to give users ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=939"
  },
  {
    "text": "a unique view of what is going on in the collaboration. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=942"
  },
  {
    "text": "For example, in Pages, the ContentView contains ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=947"
  },
  {
    "text": "the Current Participants list ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=949"
  },
  {
    "text": "and the Participant Cursors toggle. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=951"
  },
  {
    "text": "Now, let's look at the \"manage\" button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=955"
  },
  {
    "text": "For CloudKit and iCloud Drive adopters, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=958"
  },
  {
    "text": "this manage button will bring up the manage UI, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=960"
  },
  {
    "text": "where you can add and remove participants ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=964"
  },
  {
    "text": "or change the share settings. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=965"
  },
  {
    "text": "I'll talk more about this shortly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=968"
  },
  {
    "text": "Customize the provided button title by setting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=972"
  },
  {
    "text": "the manageButtonTitle property on the collaboration view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=975"
  },
  {
    "text": "If you do not set this property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=979"
  },
  {
    "text": "the title will default to \"Manage Share.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=981"
  },
  {
    "text": "If your app uses a custom collaboration infrastructure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=984"
  },
  {
    "text": "include your own manage button in the contentView. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=987"
  },
  {
    "text": "One will not be provided for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=991"
  },
  {
    "text": "On Mac, make sure the button has a transparent background ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=994"
  },
  {
    "text": "to adhere to Apple design recommendations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=998"
  },
  {
    "text": "Finally, create a UIBarButtonItem on iOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1003"
  },
  {
    "text": "as shown here, using the collaborationView ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1007"
  },
  {
    "text": "as the custom view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1009"
  },
  {
    "text": "On Mac, initialize an NSToolbarItem ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1011"
  },
  {
    "text": "using a UIBarButtonItem. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1014"
  },
  {
    "text": "Then, add the bar button item or toolbar item ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1017"
  },
  {
    "text": "to the ViewController's navigationItem. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1020"
  },
  {
    "text": "As I mentioned earlier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1024"
  },
  {
    "text": "CloudKit and iCloud Drive adopters are provided ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1026"
  },
  {
    "text": "with a button in the collaboration popover. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1029"
  },
  {
    "text": "This enables you to manage the share in the same way ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1032"
  },
  {
    "text": "you've always been able to. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1034"
  },
  {
    "text": "Changes in the provided manage UI are observable ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1037"
  },
  {
    "text": "by adhering to the same delegate protocols ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1039"
  },
  {
    "text": "already used to observe changes: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1042"
  },
  {
    "text": "UICloudSharing ControllerDelegate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1044"
  },
  {
    "text": "and NSCloudSharing ServiceDelegate. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1047"
  },
  {
    "text": "Now you have an understanding of how to integrate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1050"
  },
  {
    "text": "the new collaboration UI into your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1053"
  },
  {
    "text": "Next, I'll go over how to observe and handle ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1058"
  },
  {
    "text": "updates to collaborations. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1061"
  },
  {
    "text": "It is critical to know when a share starts or stops. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1064"
  },
  {
    "text": "For CloudKit adopters, we've added a new protocol ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1068"
  },
  {
    "text": "called CKSystemSharing UIObserver ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1072"
  },
  {
    "text": "to notify you of just that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1075"
  },
  {
    "text": "With this protocol, you get callbacks corresponding ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1078"
  },
  {
    "text": "to when your CKShare is saved or removed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1081"
  },
  {
    "text": "without needing the CloudKit Sharing UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1084"
  },
  {
    "text": "I'll take you through some code now. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1087"
  },
  {
    "text": "Initialize an observer using the CKContainer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1091"
  },
  {
    "text": "On the observer, define a closure to be executed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1097"
  },
  {
    "text": "when the CKShare is saved and assign it ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1099"
  },
  {
    "text": "to the systemSharingUI DidSaveShareBlock. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1102"
  },
  {
    "text": "In the closure, if the Share was saved correctly, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1108"
  },
  {
    "text": "you'll get a success result -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1111"
  },
  {
    "text": "indicating the share was started -- ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1113"
  },
  {
    "text": "and an associated CKShare to work with. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1115"
  },
  {
    "text": "If the save was unsuccessful, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1119"
  },
  {
    "text": "you receive a failure result and the associated error. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1122"
  },
  {
    "text": "Here is the implementation of the closure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1127"
  },
  {
    "text": "for when the document owner stops sharing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1129"
  },
  {
    "text": "In the success case, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1133"
  },
  {
    "text": "the CKShare has successfully been deleted. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1135"
  },
  {
    "text": "In the failure case, you will also get the associated error. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1139"
  },
  {
    "text": "Starting and stopping shares ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1145"
  },
  {
    "text": "are not the only changes you may care about. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1146"
  },
  {
    "text": "Some changes, you might even want to bubble up to users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1149"
  },
  {
    "text": "We've added API to enable you to post notices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1154"
  },
  {
    "text": "summarizing updates to a collaboration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1157"
  },
  {
    "text": "right at the top of the relevant Messages thread. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1159"
  },
  {
    "text": "Collaborators are shown what the update was ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1163"
  },
  {
    "text": "and who made the change. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1166"
  },
  {
    "text": "To post a notice, retrieve the SWCollaborationHighlight, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1170"
  },
  {
    "text": "which is a collaboration-specific ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1174"
  },
  {
    "text": "type of highlight in Shared with You. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1176"
  },
  {
    "text": "Use it to create an SWCollaborationHighlight event. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1179"
  },
  {
    "text": "Learn more about SWHighlights and other SharedWithYou APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1183"
  },
  {
    "text": "in the \"Add Shared with You to your app\" video. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1187"
  },
  {
    "text": "Watch this video before beginning your work ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1191"
  },
  {
    "text": "to adopt notices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1193"
  },
  {
    "text": "I'll talk through posting different notices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1197"
  },
  {
    "text": "using a CloudKit app as an example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1199"
  },
  {
    "text": "If your app uses a custom collaboration infrastructure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1202"
  },
  {
    "text": "view the \"Integrate your custom collaboration app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1206"
  },
  {
    "text": "with Messages\" video for detailed instructions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1208"
  },
  {
    "text": "To represent a notice, we've introduced a protocol ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1212"
  },
  {
    "text": "called SWHighlightEvent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1215"
  },
  {
    "text": "Highlight events are initialized with SWHighlights ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1218"
  },
  {
    "text": "retrieved from the SWHighlightCenter API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1221"
  },
  {
    "text": "The supported event types include a change event ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1224"
  },
  {
    "text": "for content updates or comments; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1228"
  },
  {
    "text": "a mention event when a user is mentioned in a collaboration; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1230"
  },
  {
    "text": "a persistence event when content is moved, renamed, or deleted; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1234"
  },
  {
    "text": "and a membership event ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1239"
  },
  {
    "text": "when a participant is added or removed from a document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1240"
  },
  {
    "text": "Here's an example showing how to post a change event ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1245"
  },
  {
    "text": "when a collaboration has been edited. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1248"
  },
  {
    "text": "Using the highlight center API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1252"
  },
  {
    "text": "retrieve a collaboration highlight using the CKShare URL. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1254"
  },
  {
    "text": "Remember, this CKShare is one you defined during ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1258"
  },
  {
    "text": "the collaboration initiation, so your app should have ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1261"
  },
  {
    "text": "this available when a content change is made. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1264"
  },
  {
    "text": "Next, create a HighlightChangeEvent instance. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1269"
  },
  {
    "text": "The initializer takes a highlight, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1272"
  },
  {
    "text": "and a trigger enum value. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1274"
  },
  {
    "text": "In this case, we set the trigger type to edit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1277"
  },
  {
    "text": "Lastly, post the notice for that event ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1282"
  },
  {
    "text": "to the highlightCenter. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1284"
  },
  {
    "text": "The rest of the events follow a similar format ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1287"
  },
  {
    "text": "with the sole exception being the mentionEvent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1290"
  },
  {
    "text": "as it requires more information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1293"
  },
  {
    "text": "to indicate which user was mentioned. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1294"
  },
  {
    "text": "You are able to post this type of event ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1298"
  },
  {
    "text": "only if your app supports user mentions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1300"
  },
  {
    "text": "Create the mentionEvent by passing in the retrieved ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1304"
  },
  {
    "text": "highlight and the handle of the mentioned CKShare participant. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1307"
  },
  {
    "text": "This notice will only be shown to the mentioned user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1312"
  },
  {
    "text": "Use the persistence event type when content is moved, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1317"
  },
  {
    "text": "renamed, or deleted. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1320"
  },
  {
    "text": "Here, the renamed trigger type is used to signify ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1322"
  },
  {
    "text": "the document name has been changed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1325"
  },
  {
    "text": "Finally, here is a membershipEvent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1330"
  },
  {
    "text": "For a membershipEvent, use the addedCollaborator ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1332"
  },
  {
    "text": "or removedCollaborator trigger type instead. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1335"
  },
  {
    "text": "With mentionevents, notices are posted to show ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1340"
  },
  {
    "text": "how the document membership has changed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1343"
  },
  {
    "text": "However, we've also made it possible to keep collaborators ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1346"
  },
  {
    "text": "on your shared documents in sync ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1349"
  },
  {
    "text": "when the Messages group membership changes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1351"
  },
  {
    "text": "For CloudKit and iCloud Drive, this is simple: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1355"
  },
  {
    "text": "we do the work for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1358"
  },
  {
    "text": "When someone new is added to the Messages group ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1362"
  },
  {
    "text": "with a collaboration, the document owner ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1365"
  },
  {
    "text": "is prompted via a notice to add them to the share. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1367"
  },
  {
    "text": "The same goes for when someone is removed.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1371"
  },
  {
    "text": "For apps with custom collaboration infrastructures, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1377"
  },
  {
    "text": "there's a little more work to be done. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1380"
  },
  {
    "text": "You will need to adopt the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1382"
  },
  {
    "text": "SWCollaborationActionHandler API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1383"
  },
  {
    "text": "which you can learn more about in \"Integrate your custom ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1387"
  },
  {
    "text": "collaboration app with Messages.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1389"
  },
  {
    "text": "Now you know how to get started with collaboration in Messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1394"
  },
  {
    "text": "and integrate it into your app, whether you're using CloudKit, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1398"
  },
  {
    "text": "iCloud Drive, or your own collaboration infrastructure. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1402"
  },
  {
    "text": "Prepare your app to initiate collaborations by adopting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1406"
  },
  {
    "text": "the new share sheet and drag and drop APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1409"
  },
  {
    "text": "Integrate the new collaboration UI ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1413"
  },
  {
    "text": "to provide a customized overview ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1416"
  },
  {
    "text": "of what is happening in the shared document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1418"
  },
  {
    "text": "Once you have that set up, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1421"
  },
  {
    "text": "go even further and adopt notices to display changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1423"
  },
  {
    "text": "to the collaboration from within the Messages thread. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1427"
  },
  {
    "text": "Miranda and I can't wait to see how your app takes advantage ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1431"
  },
  {
    "text": "of these new collaboration features in Messages! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1434"
  },
  {
    "text": "Both: Thank you for watching! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1437"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10095/?time=1439"
  }
]