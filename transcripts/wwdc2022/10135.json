[
  {
    "text": " ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=1"
  },
  {
    "text": "Yann Ly-Gagnon: Hi. my name is Yann. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=9"
  },
  {
    "text": "I'm a core Bluetooth engineer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=11"
  },
  {
    "text": "Today, I want to talk to you about timely alerts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=13"
  },
  {
    "text": "for your Bluetooth devices on Apple Watch.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=15"
  },
  {
    "text": "First, we will review how to update a complication ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=18"
  },
  {
    "text": "while your watchOS App is in the background.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=22"
  },
  {
    "text": "Then, we will dive into how to listen for timely alerts on your watchOS App.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=26"
  },
  {
    "text": "We will also see new ways you can discover peripherals ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=32"
  },
  {
    "text": "on watchOS 9.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=36"
  },
  {
    "text": "Finally, we will provide best practices and recommendations ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=39"
  },
  {
    "text": "to help you design your Bluetooth accessory.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=43"
  },
  {
    "text": "Let's jump into our first topic: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=47"
  },
  {
    "text": "how to update a complication in the background for your watchOS App. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=49"
  },
  {
    "text": "Last year, in watchOS 8, we introduced a way ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=54"
  },
  {
    "text": "to update complications with your Bluetooth accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=57"
  },
  {
    "text": "during Background app refresh.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=60"
  },
  {
    "text": "This is great for data that can be updated periodically, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=63"
  },
  {
    "text": "like in this example showing me the current air temperature.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=66"
  },
  {
    "text": "As a quick refresher, last year watchOS allows you to update your complication ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=72"
  },
  {
    "text": "and use Background app refresh, which runs periodically in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=77"
  },
  {
    "text": "Whenever Background app refresh happens, it allows your app to reconnect ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=81"
  },
  {
    "text": "to your Bluetooth peripheral, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=85"
  },
  {
    "text": "retrieves data, and then disconnects from your peripheral. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=86"
  },
  {
    "text": "For more details about this, watch the video called ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=90"
  },
  {
    "text": "\"Connect Bluetooth devices to Apple Watch.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=93"
  },
  {
    "text": "But what if a time-sensitive event happens on your Bluetooth peripheral ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=97"
  },
  {
    "text": "that the user wants to know about? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=100"
  },
  {
    "text": "In watchOS 9, we are introducing a way to listen ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=103"
  },
  {
    "text": "for alerts from your Bluetooth accessories in the background.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=107"
  },
  {
    "text": "Here's how it works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=112"
  },
  {
    "text": "You will connect your device when your app is running, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=114"
  },
  {
    "text": "and start monitoring a characteristic.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=116"
  },
  {
    "text": "When your app stops running, Core Bluetooth maintains the connection ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=120"
  },
  {
    "text": "to your device on your behalf, and continues ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=123"
  },
  {
    "text": "listening for changes to your characteristic.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=126"
  },
  {
    "text": "When your device changes the value of that characteristic, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=129"
  },
  {
    "text": "your app will get runtime to process that event. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=132"
  },
  {
    "text": "You could post a local notification or send a network request, for example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=135"
  },
  {
    "text": "This is intended to provide users with time-sensitive information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=140"
  },
  {
    "text": "they care about.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=143"
  },
  {
    "text": "Let's say I have a food thermometer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=146"
  },
  {
    "text": "I can set a desired cook temperature to get alerted ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=149"
  },
  {
    "text": "when I should remove my food from the oven. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=152"
  },
  {
    "text": "As the temperature approaches the desired temperature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=155"
  },
  {
    "text": "the thermometer changes a characteristic's value, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=158"
  },
  {
    "text": "and the app posts a local notification that the food is almost ready.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=161"
  },
  {
    "text": "When the food is done, I receive the desired notification.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=166"
  },
  {
    "text": "And if the temperature keeps rising, I get one final notification.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=171"
  },
  {
    "text": "First, let's review how to configure the Background modes.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=178"
  },
  {
    "text": "Add Bluetooth-central to UIBackgroundModes in your Watch app's Info.plist.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=183"
  },
  {
    "text": "In Xcode it's called \"Required background modes,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=190"
  },
  {
    "text": "and you should add \"App communicates using CoreBluetooth.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=194"
  },
  {
    "text": "Note that those Info.plist entries are the same as your app has for iOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=199"
  },
  {
    "text": "if you want to use background execution as a central.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=205"
  },
  {
    "text": "You will need to edit your watchApp info.plist manually ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=209"
  },
  {
    "text": "and not rely on the iOS \"Signing capabilities.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=213"
  },
  {
    "text": "Let's look at the code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=218"
  },
  {
    "text": "Assuming you're already connected, you found a GATT service ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=220"
  },
  {
    "text": "and just discovered a GATT characteristic. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=223"
  },
  {
    "text": "You will get the didDiscoverCharacteristicFor callback.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=226"
  },
  {
    "text": "Inside the callback, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=233"
  },
  {
    "text": "you can decide to get notifications every time the value changes.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=234"
  },
  {
    "text": "This is the same API as in watchOS 8, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=238"
  },
  {
    "text": "with the difference that it will also work while your app is in the background.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=242"
  },
  {
    "text": "Then implement the delegate method to handle changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=248"
  },
  {
    "text": "to the characteristic's value with didUpdateValueFor.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=251"
  },
  {
    "text": "Once the characteristic changes, you can post a local notification here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=257"
  },
  {
    "text": "send a network request, or whatever makes sense for your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=262"
  },
  {
    "text": "This method will be called both in the foreground and in the background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=267"
  },
  {
    "text": "so make sure you perform the correct action in both cases.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=271"
  },
  {
    "text": "Now, let's talk about some situations you need to consider.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=277"
  },
  {
    "text": "First, on the topic of Bluetooth reconnections. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=282"
  },
  {
    "text": "If your device goes out of range, the Bluetooth connection ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=285"
  },
  {
    "text": "will disconnect after a timeout.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=288"
  },
  {
    "text": "If this happens, your app will briefly get background runtime ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=291"
  },
  {
    "text": "to call \"connectPeripheral\" in order to attempt reconnection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=295"
  },
  {
    "text": "This is the same as what happens on iOS. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=300"
  },
  {
    "text": "As soon as the device is in range again, Core Bluetooth will reconnect to it.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=303"
  },
  {
    "text": "Now, let's talk about some limits. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=309"
  },
  {
    "text": "These limits are important to maintain optimal battery life ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=312"
  },
  {
    "text": "for Apple Watch users.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=315"
  },
  {
    "text": "If your device is on the edge of Bluetooth range ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=319"
  },
  {
    "text": "and repeatedly disconnects while in Background BLE connection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=323"
  },
  {
    "text": "the reconnection range will be reduced. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=327"
  },
  {
    "text": "This means only devices close to the Apple Watch will reconnect.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=330"
  },
  {
    "text": "Those limits are counted on a rolling window of 24 hours ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=335"
  },
  {
    "text": "and are reset whenever the user interacts on your App. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=339"
  },
  {
    "text": "Another limitation is regarding the number of background runtime opportunities ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=343"
  },
  {
    "text": "for timely alerts.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=347"
  },
  {
    "text": "Only monitor characteristics that will change ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=350"
  },
  {
    "text": "when something critical to the user happens. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=353"
  },
  {
    "text": "If you need to gather periodical data from your device, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=356"
  },
  {
    "text": "this should be done with Background app refresh.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=359"
  },
  {
    "text": "When your app is about to exceed the limit, the notification ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=363"
  },
  {
    "text": "LeGattNearBackgroundNotificationLimit will be posted. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=367"
  },
  {
    "text": "It is a good practice for your app to monitor that error ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=372"
  },
  {
    "text": "and realize that the user isn't interacting with the watchOS app.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=376"
  },
  {
    "text": "If this alert is important, it might be the right time ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=380"
  },
  {
    "text": "to find another way to communicate with your user, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=383"
  },
  {
    "text": "such as through a network request ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=386"
  },
  {
    "text": "or UI changes on your Bluetooth peripheral.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=388"
  },
  {
    "text": "After the limit is exceeded, the notification called ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=394"
  },
  {
    "text": "LeGattExceededBackgroundNotificationLimit will be posted.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=398"
  },
  {
    "text": "After this point, your app will no longer receive background runtime ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=405"
  },
  {
    "text": "and will revert back to watchOS 8 behavior, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=409"
  },
  {
    "text": "where there will be no background connection ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=412"
  },
  {
    "text": "and only background app refresh.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=414"
  },
  {
    "text": "You can retrieve those two notifications ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=417"
  },
  {
    "text": "in the error field of the GATT Notification Update. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=420"
  },
  {
    "text": "For background BLE connection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=423"
  },
  {
    "text": "we recommend using the error ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=426"
  },
  {
    "text": "to know when the limit is reached ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=427"
  },
  {
    "text": "instead of counting down. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=429"
  },
  {
    "text": "For watchOS 9, the background runtime limit is set to 5. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=431"
  },
  {
    "text": "Both of these limits are reset whenever the user interacts with your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=436"
  },
  {
    "text": "They also reset 24 hours after the limit was reached ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=441"
  },
  {
    "text": "in case there has been no user interaction with your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=444"
  },
  {
    "text": "Note: These limits only apply to Bluetooth Background LE connections. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=448"
  },
  {
    "text": "Background app refresh will continue to happen if your complication ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=453"
  },
  {
    "text": "is on the active watch face, regardless of these limits.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=457"
  },
  {
    "text": "The amount of time you get to process each event is very short. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=461"
  },
  {
    "text": "There may not be enough time to do extremely complex processing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=465"
  },
  {
    "text": "but enough to alert the user something important is happening. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=469"
  },
  {
    "text": "Finally, listening for timely alerts in the background ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=472"
  },
  {
    "text": "requires Apple Watch Series 6 or later. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=475"
  },
  {
    "text": "Listening for alerts isn't the only thing you can do in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=479"
  },
  {
    "text": "In watchOS 9, you can discover peripherals while your app is in the background.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=483"
  },
  {
    "text": "Let's say I have a Bluetooth medical device ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=489"
  },
  {
    "text": "and a watchOS app that detects any timely alerts from it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=493"
  },
  {
    "text": "To conserve power, the peripheral doesn't advertise ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=497"
  },
  {
    "text": "until it detects a serious condition.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=501"
  },
  {
    "text": "Therefore, there's no connection between the device and Apple Watch yet. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=504"
  },
  {
    "text": "Here, the watchOS App will scan for a unique Service UUID ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=510"
  },
  {
    "text": "from the medical device.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=514"
  },
  {
    "text": "Now, when the medical device detects something is serious, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=517"
  },
  {
    "text": "it starts advertising. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=521"
  },
  {
    "text": "The Apple Watch discovers this peripheral and launches the app in the background.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=523"
  },
  {
    "text": "The app can then alert the user of the condition detected.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=529"
  },
  {
    "text": "Here's how it works: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=534"
  },
  {
    "text": "The Watch app will initiate a scan for peripherals, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=536"
  },
  {
    "text": "and Core Bluetooth will continue scanning in the background.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=540"
  },
  {
    "text": "Once the peripheral's advertisement is detected, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=545"
  },
  {
    "text": "the app is given background runtime and can initiate a connection.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=548"
  },
  {
    "text": "Let's dive into the code to make this happen. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=555"
  },
  {
    "text": "The API hasn't changed from watchOS 8, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=558"
  },
  {
    "text": "but the scan will be honored even the app is in the background.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=561"
  },
  {
    "text": "Call \"scanForPeripherals\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=566"
  },
  {
    "text": "with the service UUID you want to watch for. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=569"
  },
  {
    "text": "You can do this while your app is in foreground, and it will continue ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=572"
  },
  {
    "text": "while the app is in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=576"
  },
  {
    "text": "Note that if you ask for the option \"allowDuplicatesKey,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=578"
  },
  {
    "text": "it will only be available when the app is in foreground. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=582"
  },
  {
    "text": "Now, let's talk about some limits. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=586"
  },
  {
    "text": "There is a limit on the number of times your app will be given ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=588"
  },
  {
    "text": "background runtime between app launches. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=591"
  },
  {
    "text": "This limit is combined ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=594"
  },
  {
    "text": "with the background runtime we saw previously ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=595"
  },
  {
    "text": "when a GATT characteristic changes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=597"
  },
  {
    "text": "Also, scanning for peripherals in the background ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=600"
  },
  {
    "text": "requires Apple Watch Series 6 or later.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=603"
  },
  {
    "text": "In summary, we can now scan for a limited number ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=606"
  },
  {
    "text": "of Bluetooth service UUID while the watch is scanning in the background. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=610"
  },
  {
    "text": "Now let's talk about how to design your accessory ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=615"
  },
  {
    "text": "to make the most of these features.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=619"
  },
  {
    "text": "There is a power tradeoff you need to consider ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=623"
  },
  {
    "text": "when designing your Bluetooth accessory.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=625"
  },
  {
    "text": "If power consumption is a concern, you should opt for a topology ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=630"
  },
  {
    "text": "where your device can go into deep sleep ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=633"
  },
  {
    "text": "and only advertise relevant information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=636"
  },
  {
    "text": "when an alert happens. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=638"
  },
  {
    "text": "The tradeoff is, you will have extra latency with the Bluetooth discovery time ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=639"
  },
  {
    "text": "at every timely alerts, but you will be able to save more power.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=644"
  },
  {
    "text": "This is the topology provided in the example with the medical device.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=649"
  },
  {
    "text": "On the other hand, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=654"
  },
  {
    "text": "if you need low latency ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=656"
  },
  {
    "text": "for your timely alerts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=658"
  },
  {
    "text": "but the power is not so much a concern, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=659"
  },
  {
    "text": "you can consider using ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=661"
  },
  {
    "text": "Background LE connection ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=663"
  },
  {
    "text": "and send your alerts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=664"
  },
  {
    "text": "with GATT indications. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=666"
  },
  {
    "text": "Note that there is a limit of two Bluetooth connections for each app.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=667"
  },
  {
    "text": "This is the topology we saw in the example for temperature sensor.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=672"
  },
  {
    "text": "In order for your users to have the best experience with timely alerts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=677"
  },
  {
    "text": "consider adding as much processing and intelligence on your peripheral ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=682"
  },
  {
    "text": "to filter the data that is time critical versus non-time critical.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=687"
  },
  {
    "text": "Coming back to our temperature example, instead of transmitting every temperature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=692"
  },
  {
    "text": "you can send only the relevant events or when the temperature changes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=696"
  },
  {
    "text": "The benefit of this approach is, if you properly separate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=701"
  },
  {
    "text": "the time-critical events from periodic data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=704"
  },
  {
    "text": "both your peripheral and the Apple Watch user ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=707"
  },
  {
    "text": "will save on power, thus an overall better experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=709"
  },
  {
    "text": "When your device disconnects, we recommend advertising ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=716"
  },
  {
    "text": "to re-establish the connection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=719"
  },
  {
    "text": "The advertisement interval depends on the requirement ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=721"
  },
  {
    "text": "of your Bluetooth peripheral, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=724"
  },
  {
    "text": "such as how fast it needs to reconnect, battery life, et cetera. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=726"
  },
  {
    "text": "In the accessory guidelines, we offer a few different values you can use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=732"
  },
  {
    "text": "For example, if your device is battery constrained, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=737"
  },
  {
    "text": "you can use a value of 1022.5 milliseconds.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=741"
  },
  {
    "text": "Another example: if you advertise at a rate of 20 milliseconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=747"
  },
  {
    "text": "it should allow for a detection within a second in ideal conditions.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=750"
  },
  {
    "text": "You could design such that this high advertisement rate can be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=756"
  },
  {
    "text": "only while a critical event happens.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=760"
  },
  {
    "text": "Now let's talk about connection interval. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=764"
  },
  {
    "text": "If you opt for a topology where your device remains connected in the background, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=768"
  },
  {
    "text": "we highly recommend using a long connection interval, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=773"
  },
  {
    "text": "such as at least 150 milliseconds. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=775"
  },
  {
    "text": "This will allow to save battery on your peripheral ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=778"
  },
  {
    "text": "and provides best user experience on Apple Watch. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=781"
  },
  {
    "text": "Bluetooth 5.3 is coming to Apple Watch, along with connection sub-rating. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=784"
  },
  {
    "text": "This would allow to increase the connection interval ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=789"
  },
  {
    "text": "while the Bluetooth peripheral is idle ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=792"
  },
  {
    "text": "and quickly change to smaller connection interval ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=794"
  },
  {
    "text": "when you need lower latency.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=797"
  },
  {
    "text": "Here is a table showing the differences between platforms. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=799"
  },
  {
    "text": "These are the currently supported configurations for Bluetooth Low Energy. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=804"
  },
  {
    "text": "Last year we introduced Background app refresh for watchOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=808"
  },
  {
    "text": "as a new background execution mode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=812"
  },
  {
    "text": "This year, if you own a Series 6 and above, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=815"
  },
  {
    "text": "we improved the background execution with timely alerts as we described today.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=818"
  },
  {
    "text": "Thanks for watching! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=824"
  },
  {
    "text": "",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10135/?time=826"
  }
]