[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=0"
  },
  {
    "text": "Kiara Rose: Hi, my name is Kiara Rose, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=9"
  },
  {
    "text": "and I work as a Safari Extensions Engineer. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=11"
  },
  {
    "text": "Today I'm very excited to be speaking to you all about what's new ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=15"
  },
  {
    "text": "in Safari Web Extensions this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=19"
  },
  {
    "text": "Before we dive into today's presentation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=22"
  },
  {
    "text": "I'd like to take a moment to thank all of you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=25"
  },
  {
    "text": "for submitting your iOS, iPadOS, and macOS extensions to the App Store. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=27"
  },
  {
    "text": "Moving forward, our goal is to continue to implement new features and APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=33"
  },
  {
    "text": "so that you can deliver even better experiences for your users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=38"
  },
  {
    "text": "And today, I'm going to highlight some of the exciting new features ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=42"
  },
  {
    "text": "that we've implemented over the past year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=45"
  },
  {
    "text": "such as a new Manifest version for extensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=48"
  },
  {
    "text": "updated APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=52"
  },
  {
    "text": "and syncing extensions across multiple devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=54"
  },
  {
    "text": "Let's get started with Manifest version 3.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=58"
  },
  {
    "text": "Manifest version 3 is the next iteration of the web extension platform. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=62"
  },
  {
    "text": "It introduces performance and security improvements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=66"
  },
  {
    "text": "and consolidates popular extension APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=69"
  },
  {
    "text": "For those of who have already updated your extension to use version 3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=73"
  },
  {
    "text": "your extension will now work in Safari 15.4 and onwards. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=78"
  },
  {
    "text": "For those of you who haven't, there's no need to worry, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=83"
  },
  {
    "text": "because we will continue to support extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=86"
  },
  {
    "text": "using Manifest version 2 in Safari. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=89"
  },
  {
    "text": "One of the key new features in Manifest version 3 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=92"
  },
  {
    "text": "is that your extension can use a service worker instead of a background page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=95"
  },
  {
    "text": "If you're a web developer, you're likely familiar with service workers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=99"
  },
  {
    "text": "These are event driven pages where you can register listeners ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=103"
  },
  {
    "text": "using the addEventListener API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=106"
  },
  {
    "text": "These pages are also compatible with other browsers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=110"
  },
  {
    "text": "that support Manifest version 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=112"
  },
  {
    "text": "If you prefer to keep using background pages for your extension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=115"
  },
  {
    "text": "you're more than welcome to do so, but they must be non-persistent. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=119"
  },
  {
    "text": "Another improvement in version 3 is that the APIs for executing JavaScript ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=123"
  },
  {
    "text": "and styling on a web page have moved from the tabs API to the new scripting API.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=128"
  },
  {
    "text": "Most of the functionality of these methods remain the same, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=135"
  },
  {
    "text": "but there are some new, additional features that scripting provides, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=138"
  },
  {
    "text": "such as new ways to inject code on a webpage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=142"
  },
  {
    "text": "more options for which frames on the page the code should be executed in, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=146"
  },
  {
    "text": "and the ability to decide which execution environment the code should run in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=151"
  },
  {
    "text": "Let's take a look at how the code for the new scripting API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=156"
  },
  {
    "text": "differs from the tabs API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=159"
  },
  {
    "text": "In this code snippet, I'm using the tabs.executeScript API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=162"
  },
  {
    "text": "to change the background color of a webpage to blue. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=166"
  },
  {
    "text": "And with this API, I can only inject code that's contained in a string, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=171"
  },
  {
    "text": "by passing along the \"code\" property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=175"
  },
  {
    "text": "But now, with the new scripting API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=178"
  },
  {
    "text": "I can pass along a function object containing this code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=181"
  },
  {
    "text": "And like any other function, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=185"
  },
  {
    "text": "it can contain arguments that can be passed in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=187"
  },
  {
    "text": "This is a much more improved way of executing a script ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=190"
  },
  {
    "text": "because you're not confined to writing code in a string. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=193"
  },
  {
    "text": "And note that with scripting, there's a new property called target. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=197"
  },
  {
    "text": "This property is used to specify where the script should run. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=202"
  },
  {
    "text": "In order to execute a script, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=206"
  },
  {
    "text": "you have to specify the ID of the tab you want to script to execute in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=208"
  },
  {
    "text": "This API will return an error if the tab ID isn't specified. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=213"
  },
  {
    "text": "Then, if you'd like to select which frames of the webpage ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=217"
  },
  {
    "text": "to inject the code, you can specify the frame IDs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=221"
  },
  {
    "text": "Note that with the tabs API, you can only specify one ID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=225"
  },
  {
    "text": "But with scripting, you can specify multiple IDs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=230"
  },
  {
    "text": "But let's say I have a lot more code ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=235"
  },
  {
    "text": "and it would look much cleaner if I could contain it in multiple files. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=237"
  },
  {
    "text": "In the tabs.executeScript API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=242"
  },
  {
    "text": "I can only specify one file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=245"
  },
  {
    "text": "but in scripting.executeScript, I can specify multiple files. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=248"
  },
  {
    "text": "Similarly, the same can be done for insertCSS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=253"
  },
  {
    "text": "where you can inject styling on a webpage, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=257"
  },
  {
    "text": "and the same for removeCSS where you can remove injected styling ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=260"
  },
  {
    "text": "from a webpage. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=264"
  },
  {
    "text": "These APIs are available to use in both Manifest versions 2 and 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=266"
  },
  {
    "text": "However, the tabs.executeScript APIs are not available in version 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=271"
  },
  {
    "text": "In addition to the new scripting API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=277"
  },
  {
    "text": "there have been some slight modifications to a few other APIs as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=279"
  },
  {
    "text": "One of these modifications is for web_accessible_resources.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=283"
  },
  {
    "text": "In Manifest version 2, if you want to include resources, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=288"
  },
  {
    "text": "you'd do so by passing along an array of files ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=292"
  },
  {
    "text": "you'd like a webpage to have access to. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=296"
  },
  {
    "text": "But this can be problematic since it'd give any webpage access ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=298"
  },
  {
    "text": "to all the resources you specify in the Manifest.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=302"
  },
  {
    "text": "With the new format in version 3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=307"
  },
  {
    "text": "you're in control of which resources are available on any given site. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=310"
  },
  {
    "text": "Let's take a look at an example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=314"
  },
  {
    "text": "Previously, the cookie and pie images were available ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=317"
  },
  {
    "text": "on every site the extension had access to. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=320"
  },
  {
    "text": "But now, with version 3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=323"
  },
  {
    "text": "I can make the pie image available only on apple.com URLs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=326"
  },
  {
    "text": "and the cookie image just on webkit.org pages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=330"
  },
  {
    "text": "Now let's take a look at the modifications ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=334"
  },
  {
    "text": "to the browser_action and page_action APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=337"
  },
  {
    "text": "In Manifest version 2, the actions were specified distinctly like this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=341"
  },
  {
    "text": "But since these APIs fulfill similar roles, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=346"
  },
  {
    "text": "they've been consolidated to use just one API in version 3, which is action.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=349"
  },
  {
    "text": "We've also made updates to how you declare content security policies ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=356"
  },
  {
    "text": "for your extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=359"
  },
  {
    "text": "In version 2, an extension's policy was defined using a string. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=361"
  },
  {
    "text": "However, in version 3, the policy is defined ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=366"
  },
  {
    "text": "using an object with the key \"extension_pages\". ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=370"
  },
  {
    "text": "It's important to note that remote sources for scripts ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=375"
  },
  {
    "text": "are no longer allowed for version 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=378"
  },
  {
    "text": "The final API change has been to the deprecated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=381"
  },
  {
    "text": "browser.extension.getURL API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=384"
  },
  {
    "text": "This API is no longer supported in version 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=388"
  },
  {
    "text": "Instead, use the equivalent API in browser.runtime. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=391"
  },
  {
    "text": "So I've talked about the new features introduced in Manifest version 3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=395"
  },
  {
    "text": "now let's step through the process of updating your extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=400"
  },
  {
    "text": "so that you can use these new features.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=403"
  },
  {
    "text": "I'll update the Sea Creator extension from last year's presentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=407"
  },
  {
    "text": "to use Manifest version 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=411"
  },
  {
    "text": "This extension replaces all occurrences of the word fish with an emoji. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=414"
  },
  {
    "text": "The first thing I'll do is change the version number from 2 to 3.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=420"
  },
  {
    "text": "And even though I can still use a non-persistent background page ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=426"
  },
  {
    "text": "for version 3, I'll update this to use a service worker ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=430"
  },
  {
    "text": "so that my extension will be compatible with Chrome.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=434"
  },
  {
    "text": "Lastly, I'll change browser_action to action.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=439"
  },
  {
    "text": "And in terms of the structure of the Manifest, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=445"
  },
  {
    "text": "these are the key changes I'll need to make to have this extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=448"
  },
  {
    "text": "be compatible with the new specifications in version 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=451"
  },
  {
    "text": "So to test this out, I'll build the extension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=454"
  },
  {
    "text": "and enable it in Safari.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=460"
  },
  {
    "text": "Then I'll navigate to a webkit.org blog page ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=467"
  },
  {
    "text": "where I'll use this extension to replace every instance of the word fish ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=471"
  },
  {
    "text": "with a fish emoji.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=475"
  },
  {
    "text": "But it looks like something went wrong. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=479"
  },
  {
    "text": "As you can see, none of the words on this page have been replaced with an emoji. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=481"
  },
  {
    "text": "Let's inspect the popover to see if there are any error messages.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=485"
  },
  {
    "text": "In the console tab, I see that there is an error message ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=495"
  },
  {
    "text": "stating that browser.tabs.executeScript is undefined. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=498"
  },
  {
    "text": "That's because this API is no longer available in version 3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=502"
  },
  {
    "text": "so I should update my extension to use the new scripting API instead. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=506"
  },
  {
    "text": "In Xcode, I'll go back to the popup.js file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=511"
  },
  {
    "text": "and then I'll change this line to use scripting instead.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=516"
  },
  {
    "text": "I'll add the target property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=522"
  },
  {
    "text": "which is used to specify where the script should be injected into.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=524"
  },
  {
    "text": "And with the new scripting API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=530"
  },
  {
    "text": "I'll have to specify the ID of the tab. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=532"
  },
  {
    "text": "I can do this by using the tabs.getCurrent API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=534"
  },
  {
    "text": "to get an object containing the information of the current tab.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=537"
  },
  {
    "text": "Then I can use that object to retrieve the tab ID.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=548"
  },
  {
    "text": "Next, I'll add the file containing the script to run.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=555"
  },
  {
    "text": "Finally, the last change I'll make is to add the scripting permission ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=561"
  },
  {
    "text": "in the Manifest.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=564"
  },
  {
    "text": "I'll go ahead and build the extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=569"
  },
  {
    "text": "and use these changes in Safari. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=574"
  },
  {
    "text": "And as you can see, this extension now works in Safari, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=578"
  },
  {
    "text": "using the new features in Manifest version 3. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=581"
  },
  {
    "text": "So that's how simple it is to upgrade your extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=584"
  },
  {
    "text": "But if you're not yet comfortable with these new changes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=587"
  },
  {
    "text": "a lot of the features such as scripting and services workers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=590"
  },
  {
    "text": "are also available to use in version 2. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=593"
  },
  {
    "text": "Now let's take a look at some of the APIs we've updated this year, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=596"
  },
  {
    "text": "starting with declarative net request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=600"
  },
  {
    "text": "Declarative net request is a content blocking API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=603"
  },
  {
    "text": "that provides web extensions with a fast and privacy preserving way ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=606"
  },
  {
    "text": "to block or modify network requests using rulesets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=610"
  },
  {
    "text": "This API allows you to delegate all the work of intercepting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=615"
  },
  {
    "text": "and modifying requests off to Safari and all you have to do ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=618"
  },
  {
    "text": "is specify the content blocking rules that should be applied. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=622"
  },
  {
    "text": "You can specify a ruleset in the Manifest.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=626"
  },
  {
    "text": "Here I've added the declarative net request permission, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=630"
  },
  {
    "text": "and I've used the declarative_net_request key ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=634"
  },
  {
    "text": "to add one ruleset that should applied to all pages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=637"
  },
  {
    "text": "Previously, I could only declare up to 10 rulesets in the Manifest. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=640"
  },
  {
    "text": "But now with the new updates to this feature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=645"
  },
  {
    "text": "you can declare up to 50 rulesets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=648"
  },
  {
    "text": "which means your extension can be more customizable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=650"
  },
  {
    "text": "But keep in mind that only 10 of these rulesets can be enabled at once. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=654"
  },
  {
    "text": "For more information on how to create rulesets, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=659"
  },
  {
    "text": "check out last year's presentation on Safari Web Extensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=663"
  },
  {
    "text": "where we go into more depth on this API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=666"
  },
  {
    "text": "Let's move on to some of the new features for declarative net request. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=669"
  },
  {
    "text": "Previously, you could only declare rulesets in the Manifest, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=673"
  },
  {
    "text": "but now we've implemented the following two APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=677"
  },
  {
    "text": "that will allow you to update your rules dynamically. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=681"
  },
  {
    "text": "The first API is updateSessionRules, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=685"
  },
  {
    "text": "which will allow you to add or remove rules for your extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=688"
  },
  {
    "text": "But it's important to note that these rules will not persist ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=691"
  },
  {
    "text": "across browser sessions or extension updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=695"
  },
  {
    "text": "If you would like to update rules that will persist, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=699"
  },
  {
    "text": "use the updateDynamicRules API instead. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=701"
  },
  {
    "text": "This will allow you to update your blocking rules ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=705"
  },
  {
    "text": "without updating your entire extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=708"
  },
  {
    "text": "Let's take a look at how we can use one of these APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=710"
  },
  {
    "text": "to make modifications to our rulesets. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=713"
  },
  {
    "text": "I'm going to block some content on webpages using the sea creator extension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=717"
  },
  {
    "text": "and then, I'll use the new APIs to unblock content on select pages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=721"
  },
  {
    "text": "In the extensions Manifest, the first thing I'll do ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=726"
  },
  {
    "text": "is add the declarative net request permission.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=729"
  },
  {
    "text": "Then, I'll use the declarative net request key to add a ruleset.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=735"
  },
  {
    "text": "The rule that's being applied is located in the rules.json file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=744"
  },
  {
    "text": "In this file, I've declared one rule which blocks all images on all URLs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=750"
  },
  {
    "text": "Let's build the extension and see how this rule is applied in Safari.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=756"
  },
  {
    "text": "As you can see, the image on this page has disappeared. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=763"
  },
  {
    "text": "Which is exactly what we expected. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=767"
  },
  {
    "text": "This shows that Safari has successfully applied our content blocking rule. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=769"
  },
  {
    "text": "And if I navigate to this Wikipedia page on fish, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=774"
  },
  {
    "text": "I'll see that the image on this site has been blocked as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=778"
  },
  {
    "text": "But let's say we want to update our rules to block images on all pages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=781"
  },
  {
    "text": "expect webkit.org blog pages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=785"
  },
  {
    "text": "Using one of the updated APIs for declarative net request, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=789"
  },
  {
    "text": "we can do just that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=793"
  },
  {
    "text": "Let's go back to Xcode and make some changes. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=796"
  },
  {
    "text": "In the popup.js file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=800"
  },
  {
    "text": "I'll declare a function to update our content blocking rules.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=802"
  },
  {
    "text": "I'll set the rule to allow images on webkit.org/blog-files pages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=808"
  },
  {
    "text": "Then, I'll use the updateSessionRules API to add this rule to our ruleset. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=813"
  },
  {
    "text": "Lastly, I'll build the extension and test our changes in Safari.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=820"
  },
  {
    "text": "As you can see, the image on this blog post has loaded, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=828"
  },
  {
    "text": "showing that our new rule to allow images on this site has worked. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=832"
  },
  {
    "text": "And if I go to the Wikipedia site, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=836"
  },
  {
    "text": "we'll see that the images on this page are still blocked, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=838"
  },
  {
    "text": "showing that the new rule wasn't applied to this page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=841"
  },
  {
    "text": "So that's how you can use the new declarative net request APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=845"
  },
  {
    "text": "to update your content blocking rules.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=848"
  },
  {
    "text": "Now, let's take a look at how your extension can communicate with a webpage. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=852"
  },
  {
    "text": "This awesome feature allows websites to create custom behavior ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=857"
  },
  {
    "text": "if the user has your extension enabled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=861"
  },
  {
    "text": "The API is called externally_connectable. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=864"
  },
  {
    "text": "To use it, you declare match patterns in the Manifest. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=868"
  },
  {
    "text": "These match patterns determine which pages can communicate with your extension.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=872"
  },
  {
    "text": "And an important thing to note is that this feature only works ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=879"
  },
  {
    "text": "using the browser namespace. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=883"
  },
  {
    "text": "And lastly, the user has to grant your extension access to the page ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=886"
  },
  {
    "text": "before it can send or receive messages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=890"
  },
  {
    "text": "Let's take a look at the code you'd add in the web page to use this feature. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=894"
  },
  {
    "text": "First, you'll need to get the extensionID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=899"
  },
  {
    "text": "It's the bundle identifier of the extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=902"
  },
  {
    "text": "and the team identifier in this format. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=904"
  },
  {
    "text": "You can find your team identifier on developer.apple.com, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=908"
  },
  {
    "text": "in the membership tab in your account settings. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=912"
  },
  {
    "text": "Then you'll use the send message API to post a message to the extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=915"
  },
  {
    "text": "You can handle the response you'll receive from the extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=921"
  },
  {
    "text": "by passing along a function. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=924"
  },
  {
    "text": "Now let's take a look at the code your extension will have ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=927"
  },
  {
    "text": "to receive messages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=930"
  },
  {
    "text": "Your extension can receive messages from the webpage ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=932"
  },
  {
    "text": "by listening to the event called onMessageExternal. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=934"
  },
  {
    "text": "The extension can send a message back to the web page ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=938"
  },
  {
    "text": "using the method passed to the event listener. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=941"
  },
  {
    "text": "Because there are different extension web stores for different browsers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=945"
  },
  {
    "text": "extensions can have many different identifiers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=949"
  },
  {
    "text": "So you'll need to determine the correct one to use ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=952"
  },
  {
    "text": "to make sure you're messaging a Safari web extension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=955"
  },
  {
    "text": "and not a Chrome or Edge extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=958"
  },
  {
    "text": "To do this, you can use the browser.runtime.sendMessage API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=961"
  },
  {
    "text": "with a call to Promise.all. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=967"
  },
  {
    "text": "Next, let's look at some example code that will help you do this. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=970"
  },
  {
    "text": "From the webpage, you can broadcast multiple messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=976"
  },
  {
    "text": "using multiple extension IDs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=979"
  },
  {
    "text": "You'll get exactly one response from an extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=981"
  },
  {
    "text": "and that'll let you know which extension ID to use for further communication. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=984"
  },
  {
    "text": "Here, I have a function called determineExtensionID. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=990"
  },
  {
    "text": "This function sends a message to the extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=996"
  },
  {
    "text": "using the browser.runtime.sendMessage API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=999"
  },
  {
    "text": "If you have multiple IDs and you want to determine ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1003"
  },
  {
    "text": "the correct one to use, then you can use Promise.all ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1006"
  },
  {
    "text": "to make multiple calls using the determineExtensionID function. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1010"
  },
  {
    "text": "Promise.all takes an array of promises and then returns a single promise ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1015"
  },
  {
    "text": "with an array of all of the resolved values. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1019"
  },
  {
    "text": "You can use this array to find the extension that the user has installed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1023"
  },
  {
    "text": "In the extension's background page, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1028"
  },
  {
    "text": "you'll need to listen for a message from the web page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1030"
  },
  {
    "text": "When you receive the message, you'll need to send one back ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1034"
  },
  {
    "text": "to tell the web page that your extension is installed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1037"
  },
  {
    "text": "So that's how you can use the new externally_connectable API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1040"
  },
  {
    "text": "to allow your extension to communicate with a web page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1044"
  },
  {
    "text": "The next feature we've updated is a personal favorite of mine, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1048"
  },
  {
    "text": "and that is unlimitedStorage. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1051"
  },
  {
    "text": "And I'm so happy to announce that unlimitedStorage is actually unlimited! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1053"
  },
  {
    "text": "Given that this feature was so highly requested by you, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1057"
  },
  {
    "text": "we're excited to share that your extension will no longer have a 10 MB quota. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1061"
  },
  {
    "text": "You are free to use as much data as you see fit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1066"
  },
  {
    "text": "Although, it's important to note ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1070"
  },
  {
    "text": "that users have the ability to clear the data being used ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1072"
  },
  {
    "text": "by your extension at any given time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1076"
  },
  {
    "text": "So be sure to only store data that's strictly necessary ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1079"
  },
  {
    "text": "so users don't feel inclined to clear your data. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1082"
  },
  {
    "text": "To use this feature, simply claim the storage and unlimitedStorage permission ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1086"
  },
  {
    "text": "in the Manifest, and you're good to go. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1090"
  },
  {
    "text": "So those were all of the APIs we've updated for web extensions this past year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1094"
  },
  {
    "text": "Lastly, let's talk about a new feature that will easily allow your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1099"
  },
  {
    "text": "to get your extension on all of their devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1103"
  },
  {
    "text": "In Safari 16, we've made the experience of using extensions more seamless. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1107"
  },
  {
    "text": "If a user turns on your extension on one of their devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1113"
  },
  {
    "text": "it'll be turned on on all of their devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1117"
  },
  {
    "text": "On top of this, we've made the process of downloading your extension much simpler. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1120"
  },
  {
    "text": "Let's take a look at how this works. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1126"
  },
  {
    "text": "Let's say a user has one of your extensions enabled on their Mac. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1129"
  },
  {
    "text": "In Extension Settings on any of their other devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1133"
  },
  {
    "text": "they'll be given the option to download your extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1137"
  },
  {
    "text": "Once it's downloaded, it'll automatically be enabled ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1140"
  },
  {
    "text": "on their device, improving their user experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1143"
  },
  {
    "text": "Now, let's dive into how you can set this up ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1147"
  },
  {
    "text": "for web extensions and content blockers. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1150"
  },
  {
    "text": "First, we recommend that you list your extension for iOS, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1153"
  },
  {
    "text": "iPadOS, and macOS when submitting to the App Store. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1157"
  },
  {
    "text": "This way, your extension will be available across all of your users' devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1162"
  },
  {
    "text": "Then, to allow your extension to sync across their devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1168"
  },
  {
    "text": "you'll need to use one of the following two methods. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1171"
  },
  {
    "text": "The simplest and recommended way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1175"
  },
  {
    "text": "is to adopt universal purchase. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1177"
  },
  {
    "text": "Universal purchase allows your users to enjoy your extension across all platforms, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1181"
  },
  {
    "text": "by only purchasing it once. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1186"
  },
  {
    "text": "If you use this method, you're all set. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1189"
  },
  {
    "text": "Your users will get all of the features I've shown ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1192"
  },
  {
    "text": "after they download your extension once. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1195"
  },
  {
    "text": "To set up universal purchase, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1199"
  },
  {
    "text": "you'll need to use a single bundle identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1200"
  },
  {
    "text": "across your extensions so that it can be associated with the same app record ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1203"
  },
  {
    "text": "in App Store Connect. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1208"
  },
  {
    "text": "For more information on how to do this, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1211"
  },
  {
    "text": "check out our documentation on how to set up universal purchase ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1214"
  },
  {
    "text": "for your extensions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1217"
  },
  {
    "text": "But if you choose not to set up universal purchase, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1219"
  },
  {
    "text": "you can manually link your apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1222"
  },
  {
    "text": "To do this, you'll use Xcode to add bundle identifiers in the info plist ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1224"
  },
  {
    "text": "for the apps and extensions you'd like to sync. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1229"
  },
  {
    "text": "To sync your iOS app and extension with the macOS ones, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1232"
  },
  {
    "text": "you'll need to use specific keys in the info plist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1236"
  },
  {
    "text": "You'll put this key in your macOS app plist, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1240"
  },
  {
    "text": "and this key in the macOS extension plist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1244"
  },
  {
    "text": "Similarly, you'll follow the same process for syncing your macOS app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1248"
  },
  {
    "text": "By adding this key to the iOS app plist ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1253"
  },
  {
    "text": "and this key to the iOS extension plist. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1258"
  },
  {
    "text": "Let's see how this works in Xcode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1261"
  },
  {
    "text": "In Xcode, the first thing we'll need to do is update the settings for each target ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1264"
  },
  {
    "text": "to include the bundle identifiers of the extensions and apps we want to sync. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1269"
  },
  {
    "text": "I'll start by adding the bundle identifier for the corresponding macOS app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1274"
  },
  {
    "text": "in the info plist for the iOS app.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1278"
  },
  {
    "text": "And as you can see, I've done the same process for the macOS app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1284"
  },
  {
    "text": "by adding the iOS app bundle identifier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1288"
  },
  {
    "text": "And similarly for iOS extension by adding the macOS extension bundle identifier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1291"
  },
  {
    "text": "And lastly, for the macOS extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1297"
  },
  {
    "text": "by adding the iOS extension bundle identifier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1300"
  },
  {
    "text": "And that's how simple it is to link your apps and extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1303"
  },
  {
    "text": "so that your users can use them everywhere. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1306"
  },
  {
    "text": "To recap, you can make this feature available for your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1310"
  },
  {
    "text": "by either setting up universal purchase ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1314"
  },
  {
    "text": "or by adding bundle identifiers for each iOS and macOS app and extension in Xcode. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1317"
  },
  {
    "text": "Today we discussed Manifest version 3, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1324"
  },
  {
    "text": "the APIs we've updated, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1328"
  },
  {
    "text": "and syncing extensions across multiple devices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1330"
  },
  {
    "text": "I hope you're as excited as I am about these all these new features ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1334"
  },
  {
    "text": "for Safari Web Extensions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1337"
  },
  {
    "text": "Feel free to download the sample project containing the code from today's session ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1340"
  },
  {
    "text": "and to play around with some of the APIs we featured. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1344"
  },
  {
    "text": "Next, we'd love to know what you think. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1348"
  },
  {
    "text": "Use Feedback Assistant to file bugs or chat with us ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1350"
  },
  {
    "text": "on the Safari Developer Forums to provide feedback ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1354"
  },
  {
    "text": "on how we can make developing extensions better for you. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1357"
  },
  {
    "text": "No, really. We want to know what you think! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1360"
  },
  {
    "text": "Consider joining the WebExtensions community group ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1363"
  },
  {
    "text": "to shape the future of web extensions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1366"
  },
  {
    "text": "Finally, check out our WWDC presentation on creating web inspector extensions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1369"
  },
  {
    "text": "Thanks for tuning in to this session, and have a great rest of your WWDC.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10099/?time=1375"
  }
]