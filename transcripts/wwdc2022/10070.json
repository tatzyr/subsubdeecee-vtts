[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=0"
  },
  {
    "text": "Mohammed: Hi, I'm Mohammed from UIKit. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=9"
  },
  {
    "text": "Thank you for joining me for this deep dive ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=12"
  },
  {
    "text": "into building a Desktop Class iPad app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=14"
  },
  {
    "text": "In this video, we'll use iPadOS 16 APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=17"
  },
  {
    "text": "to update an existing iPad app to a desktop class experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=20"
  },
  {
    "text": "We'll start by using new navigation bar API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=25"
  },
  {
    "text": "to surface powerful functionality, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=28"
  },
  {
    "text": "increase UI density, and provide customizability.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=30"
  },
  {
    "text": "Then, we'll adopt new UICollectionView and menu API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=35"
  },
  {
    "text": "to enable complex workflows and quick actions on multiple selections. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=39"
  },
  {
    "text": "And we'll round things out by enabling the new Find and Replace experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=45"
  },
  {
    "text": "and enhancing text editing with the new Edit Menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=49"
  },
  {
    "text": "The app we'll be updating is a Markdown editor built for iPadOS 15. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=52"
  },
  {
    "text": "As we walk through each step of the modernization process, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=57"
  },
  {
    "text": "I'll discuss best practices and motivations behind our choices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=61"
  },
  {
    "text": "giving you an idea of the factors you should consider ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=65"
  },
  {
    "text": "while taking your own app through a similar process.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=68"
  },
  {
    "text": "If you'd like a bit of a primer before getting started, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=73"
  },
  {
    "text": "check out “Meet Desktop Class iPad” ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=75"
  },
  {
    "text": "for a breakdown of all of UIKit's new iPadOS APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=78"
  },
  {
    "text": "and check out “What's new in iPad app design” ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=82"
  },
  {
    "text": "for tips on how to design the best Desktop Class iPad app possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=85"
  },
  {
    "text": "All right, let's dive right in! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=90"
  },
  {
    "text": "To start things off, let's consider the organization of our app's controls. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=92"
  },
  {
    "text": "Since the app is designed for iPadOS 15, it already exposes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=97"
  },
  {
    "text": "its most important controls in the navigation bar ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=101"
  },
  {
    "text": "and places secondary controls in various menus and popovers.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=104"
  },
  {
    "text": "In iPadOS 16, UIKit formalizes the existing navigation style ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=110"
  },
  {
    "text": "and introduces two new ones with a denser and more customizable layout. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=115"
  },
  {
    "text": "This allows apps to express the layout that's most appropriate to their content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=121"
  },
  {
    "text": "while bringing more functionality to the forefront of the UI.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=125"
  },
  {
    "text": "Navigator apps have a familiar push / pop navigation model. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=131"
  },
  {
    "text": "This is generally appropriate for apps that display hierarchical data, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=136"
  },
  {
    "text": "like Settings.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=140"
  },
  {
    "text": "Browsers, like Safari or Files are ideal for looking through ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=143"
  },
  {
    "text": "and navigating back and forth between multiple documents or folder structures.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=147"
  },
  {
    "text": "And Editors are great for focused viewing or editing of individual documents.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=154"
  },
  {
    "text": "Being a Markdown editor, this style is the perfect choice for our app.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=162"
  },
  {
    "text": "The editor style aligns the title towards the leading edge of the bar, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=168"
  },
  {
    "text": "opening up its center for a new set of items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=172"
  },
  {
    "text": "This'll allow us to expose additional functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=175"
  },
  {
    "text": "that might've been hidden away in other views or menus. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=178"
  },
  {
    "text": "We're going to do a few things to make as much use of this design as possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=182"
  },
  {
    "text": "We'll start by customizing the built-in back action to fit our needs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=187"
  },
  {
    "text": "Then we'll add a title menu with some document info ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=192"
  },
  {
    "text": "and common document actions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=195"
  },
  {
    "text": "We'll also add support for renaming via the new built-in rename UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=198"
  },
  {
    "text": "And finally, we'll make previously buried functionality more easily accessible ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=203"
  },
  {
    "text": "by bringing it to the center of the bar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=208"
  },
  {
    "text": "Let's start by opting into the editor style by setting ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=210"
  },
  {
    "text": "our view controller's navigationItem's style property to .editor.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=214"
  },
  {
    "text": "This immediately gives us the leading aligned title ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=219"
  },
  {
    "text": "and opens up the center area.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=222"
  },
  {
    "text": "After that, let's remove our trailing done button ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=227"
  },
  {
    "text": "and replace it using the new backAction API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=231"
  },
  {
    "text": "This way we get a more standard look for the action ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=235"
  },
  {
    "text": "that dismisses this view and returns to the document picker.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=238"
  },
  {
    "text": "Next let's figure out whether our app would benefit from a title menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=245"
  },
  {
    "text": "As the name implies, the title menu is presented ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=249"
  },
  {
    "text": "from the navigation bar's title view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=252"
  },
  {
    "text": "It's a great place to show document metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=255"
  },
  {
    "text": "and surface actions that apply to the whole document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=258"
  },
  {
    "text": "If your app isn't document based, it may be a good place to surface actions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=262"
  },
  {
    "text": "that apply to the entire view.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=266"
  },
  {
    "text": "For our app, it makes sense to use the document menu's header ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=269"
  },
  {
    "text": "to surface some useful information about the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=273"
  },
  {
    "text": "We'll also be able to provide a draggable representation of the document ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=277"
  },
  {
    "text": "and easy access to sharing functionality. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=281"
  },
  {
    "text": "And now it's time to write some code! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=285"
  },
  {
    "text": "Our app is UIDocument backed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=289"
  },
  {
    "text": "so we can use the UIDocument's fileURL ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=291"
  },
  {
    "text": "to instantiate a UIDocumentProperties object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=294"
  },
  {
    "text": "Next, we'll use that same URL to create an NSItemProvider.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=300"
  },
  {
    "text": "Then we'll use the item provider to create a UIDragItem ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=307"
  },
  {
    "text": "which we'll return from the properties object's dragItemsProvider.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=311"
  },
  {
    "text": "We'll also use it to construct a UIActivityViewController ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=318"
  },
  {
    "text": "which we'll return from the properties object's activityViewControllerProvider. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=322"
  },
  {
    "text": "And finally, we'll set the properties object as the editor view controller's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=327"
  },
  {
    "text": "navigationItem's documentProperties. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=331"
  },
  {
    "text": "The code we just wrote results in this document header, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=334"
  },
  {
    "text": "which provides a quick overview of the document ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=337"
  },
  {
    "text": "including its name, size, and an icon representation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=340"
  },
  {
    "text": "Since we specified drag item and activity view controller providers, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=344"
  },
  {
    "text": "I can drag the icon to copy the document outside the app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=348"
  },
  {
    "text": "or tap the share button to bring up an activity view controller.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=351"
  },
  {
    "text": "In addition to displaying the document header, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=357"
  },
  {
    "text": "the title menu is a good place to provide functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=359"
  },
  {
    "text": "that applies to the entire document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=362"
  },
  {
    "text": "There are two kinds of actions that can be displayed in this menu: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=365"
  },
  {
    "text": "system-provided ones with pre-defined localized titles and symbol images, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=369"
  },
  {
    "text": "and entirely custom ones that the app provides.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=374"
  },
  {
    "text": "Since it comes with some additional behavior, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=379"
  },
  {
    "text": "let's start with the rename action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=381"
  },
  {
    "text": "We can add this action to our menu by conforming ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=384"
  },
  {
    "text": "to the rename delegate protocol. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=386"
  },
  {
    "text": "When triggered, the action presents the bar's built-in rename UI.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=390"
  },
  {
    "text": "First we'll assign our view controller as its navigation item's renameDelegate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=395"
  },
  {
    "text": "Then, we'll implement navigationItemDidEndRenamingWithTitle ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=403"
  },
  {
    "text": "to handle the actual renaming of the displayed document.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=408"
  },
  {
    "text": "This function is called when the rename action is committed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=412"
  },
  {
    "text": "It's the app's responsibility to handle this by actually renaming the document. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=416"
  },
  {
    "text": "The API is intentionally open ended ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=422"
  },
  {
    "text": "to support any kind of data model your app may have. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=424"
  },
  {
    "text": "Moving on to other system provided actions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=428"
  },
  {
    "text": "we'll first need to override their functions on our editor view controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=430"
  },
  {
    "text": "Here we've implemented the duplicate and move functions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=435"
  },
  {
    "text": "UIKit automatically surfaces system-provided actions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=440"
  },
  {
    "text": "including the rename action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=443"
  },
  {
    "text": "in the navigationItem's titleMenuProvider ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=445"
  },
  {
    "text": "as an array of suggested UIMenuElements. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=448"
  },
  {
    "text": "To include them in our title menu, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=452"
  },
  {
    "text": "we'll just add them to the returned menu's children.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=454"
  },
  {
    "text": "In addition to the system-vended actions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=459"
  },
  {
    "text": "we can add entirely custom actions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=461"
  },
  {
    "text": "or even whole menu hierarchies. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=463"
  },
  {
    "text": "Here I've added an Export submenu with export as HTML and PDF sub-actions.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=467"
  },
  {
    "text": "And with that, tapping the title view now brings up a menu ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=474"
  },
  {
    "text": "with the document header and all the actions we just added. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=477"
  },
  {
    "text": "And when I select rename, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=481"
  },
  {
    "text": "the built-in rename UI is activated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=483"
  },
  {
    "text": "and I'm able to rename the document.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=485"
  },
  {
    "text": "Now that we've started establishing the base structure of our app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=488"
  },
  {
    "text": "it's a good time to check in on how things look ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=491"
  },
  {
    "text": "when we build our app with Mac catalyst. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=494"
  },
  {
    "text": "When we run the app on a Mac, we'll find that the editor style ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=497"
  },
  {
    "text": "with its leading aligned title has been translated nicely.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=500"
  },
  {
    "text": "Our back action has also been carried over, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=504"
  },
  {
    "text": "and when clicked, brings up a file browser.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=507"
  },
  {
    "text": "The system provided actions and rename functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=511"
  },
  {
    "text": "are automatically surfaced in the app's File menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=514"
  },
  {
    "text": "Note that the titleMenuProvider is not called on Mac Catalyst, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=517"
  },
  {
    "text": "so our custom actions are not included in the File menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=521"
  },
  {
    "text": "To expose these actions, we would need to manually add them ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=526"
  },
  {
    "text": "to the app's main menu using the main UIMenuSystem.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=528"
  },
  {
    "text": "All right, let's continue our modernization process. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=535"
  },
  {
    "text": "We'll keep checking in on the Mac as we make progress towards our goal. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=537"
  },
  {
    "text": "Let's consider the opportunities made available by the bar's center area. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=541"
  },
  {
    "text": "The iOS 15 version of the app has a menu that holds ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=546"
  },
  {
    "text": "a number of secondary controls and tools. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=550"
  },
  {
    "text": "With center items, we're able to make these tools more discoverable.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=553"
  },
  {
    "text": "Since the center area is customizable, we can include a large set of controls ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=559"
  },
  {
    "text": "without worrying about filling the UI with less commonly used ones. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=563"
  },
  {
    "text": "Each person can tailor the bar's contents to fit their workflow. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=568"
  },
  {
    "text": "The first step in enabling customization is specifying a customizationIdentifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=573"
  },
  {
    "text": "on the navigation item.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=577"
  },
  {
    "text": "Next, we'll define the center items as UIBarButtonItemGroups. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=581"
  },
  {
    "text": "Groups are an existing concept that's been extended to UINavigationBar ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=586"
  },
  {
    "text": "and enhanced to support customization in iOS 16. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=590"
  },
  {
    "text": "This screenshot shows the set of center items we'd like to show by default. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=594"
  },
  {
    "text": "The synchronize scrolling button all the way on the left ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=599"
  },
  {
    "text": "provides an important function that can't be reached ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=601"
  },
  {
    "text": "by any other means, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=604"
  },
  {
    "text": "so it makes sense to place it in a fixed group ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=607"
  },
  {
    "text": "using UIBarButtonItem's new creatingFixedGroup() function. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=610"
  },
  {
    "text": "Fixed groups are not customizable and cannot be moved by the user.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=615"
  },
  {
    "text": "The add link button, on the other hand, doesn't provide critical functionality, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=622"
  },
  {
    "text": "and the same task can be achieved by typing link tags in the editor, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=626"
  },
  {
    "text": "so we'll use creatingOptionalGroup to create a completely customizable item. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=630"
  },
  {
    "text": "And we'll give it a unique customizationIdentifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=636"
  },
  {
    "text": "so the customization is persisted across app launches.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=639"
  },
  {
    "text": "We'll follow a similar process to define the remaining items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=645"
  },
  {
    "text": "in the default set, then move on to lower priority items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=647"
  },
  {
    "text": "that don't need to be available by default. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=651"
  },
  {
    "text": "One such item is the text format group, which includes the bold, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=654"
  },
  {
    "text": "italics, and underline items.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=658"
  },
  {
    "text": "It's not important enough to show by default, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=661"
  },
  {
    "text": "but we want it in the customization popover so it can be dragged into the bar.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=664"
  },
  {
    "text": "To achieve this, we'll use UIBarButtonItemGroup's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=670"
  },
  {
    "text": "optionalGroup initializer with isInDefaultCustomization set to false.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=673"
  },
  {
    "text": "We'll also be sure to give the group a representative item ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=681"
  },
  {
    "text": "so it has a title in the popover, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=684"
  },
  {
    "text": "and has a compact representation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=686"
  },
  {
    "text": "that it can be collapsed to when the bar runs out of space.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=688"
  },
  {
    "text": "Back on the iPad, the center items we defined ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=693"
  },
  {
    "text": "show up in the center of the bar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=695"
  },
  {
    "text": "If I click the newly added More button, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=698"
  },
  {
    "text": "a menu shows up with a Customize Toolbar action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=700"
  },
  {
    "text": "And if I click that, the customization mode is activated.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=704"
  },
  {
    "text": "The sync scrolling button that we marked as fixed is de-emphasized and static, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=709"
  },
  {
    "text": "while all the other items lift and shake to show that they're customizable.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=713"
  },
  {
    "text": "Optional items like the Format group show up in the popover ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=720"
  },
  {
    "text": "and can be dragged into the bar.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=724"
  },
  {
    "text": "When we run the app on a Mac, we find that the center items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=729"
  },
  {
    "text": "have been converted to fully customizable macOS toolbar buttons.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=732"
  },
  {
    "text": "Before we move on, let's go back to the iPad for a minute and resize the app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=739"
  },
  {
    "text": "Now that we have less space available in the toolbar, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=744"
  },
  {
    "text": "the center items are no longer visible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=747"
  },
  {
    "text": "UIKit automatically handles showing and hiding center items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=750"
  },
  {
    "text": "in response to the available space. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=754"
  },
  {
    "text": "Any items that don't fit are displayed in the overflow menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=757"
  },
  {
    "text": "Standard bar button items are automatically converted ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=762"
  },
  {
    "text": "to their menu representation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=765"
  },
  {
    "text": "but we're also able to provide a custom menu representation if we like. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=767"
  },
  {
    "text": "Since UIKit has no insight into the purpose of a custom view item, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=772"
  },
  {
    "text": "our slider item isn't automatically translated. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=776"
  },
  {
    "text": "We'll need to manually specify a menu representation.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=780"
  },
  {
    "text": "Here's our slider item. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=784"
  },
  {
    "text": "It's a single bar button item with a custom view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=786"
  },
  {
    "text": "wrapped in an optional bar button group. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=788"
  },
  {
    "text": "To provide the core functionality of the slider, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=792"
  },
  {
    "text": "we'll define the menu representation as a UIMenu with Decrease, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=795"
  },
  {
    "text": "Reset, and Increase actions.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=799"
  },
  {
    "text": "Using UIMenu's new preferredElementSize property, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=805"
  },
  {
    "text": "we can give the menu a more compact side by side appearance.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=808"
  },
  {
    "text": "And using the new keepsMenuPresented attribute, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=815"
  },
  {
    "text": "we can keep the menu presented after each action is performed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=818"
  },
  {
    "text": "allowing the font size to be changed multiple times ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=822"
  },
  {
    "text": "without dismissing and re-presenting the menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=825"
  },
  {
    "text": "Let's run this on the iPad again. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=828"
  },
  {
    "text": "Now when we bring up the overflow menu, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=831"
  },
  {
    "text": "the slider appears as an inline menu with three side-by-side actions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=834"
  },
  {
    "text": "covering the full functionality of the slider.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=838"
  },
  {
    "text": "Since the small element size doesn't exist on the Mac, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=842"
  },
  {
    "text": "the actions will appear as standard macOS menu items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=845"
  },
  {
    "text": "And that's it for UI organization and customization. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=849"
  },
  {
    "text": "Next, let's look into speeding up some workflows in the app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=853"
  },
  {
    "text": "using new collection view and menu API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=856"
  },
  {
    "text": "Our app has a table of contents sidebar that can be used ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=859"
  },
  {
    "text": "to quickly navigate the document or take action on top level tags. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=862"
  },
  {
    "text": "Prior to iOS 16, adding the ability to edit multiple items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=867"
  },
  {
    "text": "would've likely meant implementing a distinct edit mode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=871"
  },
  {
    "text": "with bulk actions relegated to buttons in a toolbar.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=874"
  },
  {
    "text": "iOS 16 introduces a new design for multi-item menus ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=880"
  },
  {
    "text": "with a flock of items that clearly communicates which items the menu affects ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=884"
  },
  {
    "text": "and provides a direct transition to a multi-item drag. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=889"
  },
  {
    "text": "In a desktop class iPad app, this new menu design is best paired ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=893"
  },
  {
    "text": "with a lighter weight selection style. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=897"
  },
  {
    "text": "\"Lightweight\" here means selecting multiple items ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=900"
  },
  {
    "text": "without kicking the collection view into an edit mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=903"
  },
  {
    "text": "or making significant changes to the app's UI. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=906"
  },
  {
    "text": "We can achieve this and enable keyboard focus using existing API. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=909"
  },
  {
    "text": "First, we'll set allowsMultipleSelection to true.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=915"
  },
  {
    "text": "Then we'll enable keyboard focus by setting allowsFocus to true.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=921"
  },
  {
    "text": "And we'll allow focus to drive selection by setting selectionFollowsFocus to true.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=928"
  },
  {
    "text": "If we run this on our iPad, we immediately notice ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=936"
  },
  {
    "text": "that as each item is added to the selection, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=939"
  },
  {
    "text": "it still fires its selection action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=941"
  },
  {
    "text": "causing the editor view to scroll. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=944"
  },
  {
    "text": "Let's head back to our code and figure out what's going on.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=946"
  },
  {
    "text": "There it is! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=951"
  },
  {
    "text": "The code in didSelectItemAtIndexPath ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=952"
  },
  {
    "text": "tries to disallow scrolling while in edit mode ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=954"
  },
  {
    "text": "by checking the collectionView's isEditing property. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=957"
  },
  {
    "text": "Now that we allow multiple selection outside of edit mode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=961"
  },
  {
    "text": "this code runs for every selection. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=965"
  },
  {
    "text": "We can fix this using a new UICollectionViewDelegate method. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=968"
  },
  {
    "text": "We'll implement performPrimaryActionForItemAtIndexPath ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=972"
  },
  {
    "text": "and just move our scrolling code to this new function. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=976"
  },
  {
    "text": "Since this function is only called when a single item is tapped ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=981"
  },
  {
    "text": "and the collection view is not editing, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=984"
  },
  {
    "text": "we no longer need the check for edit mode.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=986"
  },
  {
    "text": "And since we don't have any selection related behavior, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=991"
  },
  {
    "text": "we can remove our implementation of did select item at indexPath.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=994"
  },
  {
    "text": "Back on the iPad, selecting multiple items no longer scrolls ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1003"
  },
  {
    "text": "to the corresponding text in the editor view. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1006"
  },
  {
    "text": "With that done, let's actually add support for the menu.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1010"
  },
  {
    "text": "In iPadOS 16, UICollectionViewDelegate's existing single item menu method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1015"
  },
  {
    "text": "is deprecated. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1020"
  },
  {
    "text": "Its replacement supports displaying menus for anywhere from zero to many items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1022"
  },
  {
    "text": "The number of items in the given indexPaths array ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1028"
  },
  {
    "text": "depends on how many items are selected, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1031"
  },
  {
    "text": "and where the menu is invoked.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1033"
  },
  {
    "text": "If the array is empty, then the menu was invoked in the blank space between cells.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1037"
  },
  {
    "text": "If it has a single indexPath, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1045"
  },
  {
    "text": "then it was invoked on an item that is either deselected ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1046"
  },
  {
    "text": "or is the sole selected one.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1050"
  },
  {
    "text": "If it has more than one item, then the menu was invoked ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1055"
  },
  {
    "text": "on an item that is part of a multiple selection.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1057"
  },
  {
    "text": "If I head back to the iPad, select the top four items again, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1064"
  },
  {
    "text": "and two-finger click one of the selected items, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1067"
  },
  {
    "text": "a new multi-item menu comes up.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1070"
  },
  {
    "text": "When I do the same thing on a Mac, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1076"
  },
  {
    "text": "a ring is drawn around the selected cells to highlight them.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1078"
  },
  {
    "text": "With multi-item menus done, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1082"
  },
  {
    "text": "let's look into enhancing the text editing experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1084"
  },
  {
    "text": "using the new Find and Replace and edit menu features. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1087"
  },
  {
    "text": "Our app uses a UITextView for its editor ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1090"
  },
  {
    "text": "and doesn't require any custom Find and Replace behavior, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1093"
  },
  {
    "text": "so all we need to do to enable the default system functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1097"
  },
  {
    "text": "is set the text view's isFindInteractionEnabled property to true. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1101"
  },
  {
    "text": "With that set, hitting Command+F while editing text ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1106"
  },
  {
    "text": "brings up the Find and Replace UI.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1109"
  },
  {
    "text": "Adding custom actions to the text view's edit menu doesn't take much, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1113"
  },
  {
    "text": "and can enable some great quick editing features. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1117"
  },
  {
    "text": "We'll just implement the new UITextViewDelegate method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1121"
  },
  {
    "text": "edit menu for text in range suggested actions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1124"
  },
  {
    "text": "In the implementation, we can construct and return a UIMenu ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1128"
  },
  {
    "text": "that combines custom actions, like this Hide action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1132"
  },
  {
    "text": "with the system menu.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1135"
  },
  {
    "text": "And this is the result. W ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1139"
  },
  {
    "text": "hen I select some text and bring up the edit menu, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1141"
  },
  {
    "text": "both our custom actions and the system-provided ones are displayed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1144"
  },
  {
    "text": "For more information about Find and Replace and the edit menu, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1148"
  },
  {
    "text": "check out “Adopt desktop class editing interactions.” ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1151"
  },
  {
    "text": "And that's it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1156"
  },
  {
    "text": "With these few changes, we've taken some great basic steps ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1157"
  },
  {
    "text": "towards making our app desktop class ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1160"
  },
  {
    "text": "and translating it seamlessly to the Mac. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1162"
  },
  {
    "text": "Use the APIs offered in iPadOS 16 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1165"
  },
  {
    "text": "to take your own app through a similar process. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1168"
  },
  {
    "text": "Start by choosing a navigation style that fits your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1171"
  },
  {
    "text": "Enhance document workflows with document properties and the title menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1175"
  },
  {
    "text": "And surface important functionality and provide customizability with center items. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1179"
  },
  {
    "text": "Enable quickly acting on multiple items with multi-item menus. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1185"
  },
  {
    "text": "And enhance your app's text editing experience using Find and Replace ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1189"
  },
  {
    "text": "and the new edit menu. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1193"
  },
  {
    "text": "Whether you're building a new app or updating an existing one, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1194"
  },
  {
    "text": "I can't wait to use the apps you build with these new tools. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1198"
  },
  {
    "text": "Thanks for watching.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10070/?time=1201"
  }
]