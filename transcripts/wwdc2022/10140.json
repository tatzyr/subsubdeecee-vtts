[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=0"
  },
  {
    "text": "Adam: Hi, my name's Adam and I'm an engineer on the SharePlay team. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=9"
  },
  {
    "text": "I'm excited to talk to you about what's new in SharePlay ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=13"
  },
  {
    "text": "and how you can adopt it in your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=16"
  },
  {
    "text": "To start, we'll talk about some new APIs for starting SharePlay from your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=18"
  },
  {
    "text": "Next, we'll get into some exciting GroupSessionMessenger updates. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=24"
  },
  {
    "text": "Finally, some best practices around implementing a SharePlay experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=28"
  },
  {
    "text": "Starting SharePlay from your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=34"
  },
  {
    "text": "We heard your feedback and we delivered, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=36"
  },
  {
    "text": "As of iOS 15.4 you can now leverage new API to allow your app to start SharePlay ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=38"
  },
  {
    "text": "without an existing FaceTime call. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=44"
  },
  {
    "text": "So let's see what that looks like. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=46"
  },
  {
    "text": "So now all we have to do is find our favorite SharePlay app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=48"
  },
  {
    "text": "Let's say the Music app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=52"
  },
  {
    "text": "And we'll find a song that we want to SharePlay, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=54"
  },
  {
    "text": "like Viral Hits, and press and hold it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=56"
  },
  {
    "text": "Now in the contextual menu, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=60"
  },
  {
    "text": "you'll see that we now have a new SharePlay button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=61"
  },
  {
    "text": "So I'll go ahead and press that, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=63"
  },
  {
    "text": "and it brings up the people picker. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=65"
  },
  {
    "text": "So we can select Sue and start a FaceTime call.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=67"
  },
  {
    "text": "And, as you can see, we now have a pill here ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=73"
  },
  {
    "text": "with the staged activity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=76"
  },
  {
    "text": "So if Sue joins, we can go ahead and start, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=77"
  },
  {
    "text": "and we'll have group session.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=80"
  },
  {
    "text": "Well, I thought that was all pretty cool, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=84"
  },
  {
    "text": "but let's break that down into some more detail.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=86"
  },
  {
    "text": "Here we have the ability for users to start SharePlay from share sheet, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=90"
  },
  {
    "text": "and you may be wondering what you need to do for this to work. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=94"
  },
  {
    "text": "Well, the answer is that if your app is entitled for SharePlay ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=97"
  },
  {
    "text": "then you get this button for free with our zero adoption flow, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=101"
  },
  {
    "text": "but this isn't the optimal user experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=105"
  },
  {
    "text": "since the user won't be able to start the GroupActivity through system UI ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=107"
  },
  {
    "text": "and will, instead, need to re-interact with your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=112"
  },
  {
    "text": "to pick the content to SharePlay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=115"
  },
  {
    "text": "So let's see how you'd adopt our new APIs for your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=118"
  },
  {
    "text": "The answer is, it's as simple as registering your GroupActivity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=123"
  },
  {
    "text": "on NSItemProvider ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=126"
  },
  {
    "text": "and then providing the ItemProvider to the share sheet.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=128"
  },
  {
    "text": "Want to still offer the SharePlay button ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=133"
  },
  {
    "text": "but not display it as prominently? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=135"
  },
  {
    "text": "No problem. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=137"
  },
  {
    "text": "You can tune the behavior with allowsProminentActivity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=138"
  },
  {
    "text": "on the UIActivityViewController. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=141"
  },
  {
    "text": "Just set allowsProminentActivity to false.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=143"
  },
  {
    "text": "Or what if you have a piece of content in your app that doesn't support SharePlay? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=147"
  },
  {
    "text": "Well, while we'd love for everything to support SharePlay, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=151"
  },
  {
    "text": "you can make SharePlay not show up in the share sheet ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=155"
  },
  {
    "text": "by telling UIActivityViewController to exclude the SharePlay activity type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=157"
  },
  {
    "text": "And if you want to place a button directly within your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=164"
  },
  {
    "text": "then you can use our new API GroupActivitySharingController ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=166"
  },
  {
    "text": "to create our UIViewController and then, just present it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=170"
  },
  {
    "text": "Once someone presses your in-app experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=175"
  },
  {
    "text": "and starts a FaceTime or SharePlay session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=178"
  },
  {
    "text": "they'll then be presented with the ability to activate the staged GroupActivity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=180"
  },
  {
    "text": "Once activated, your app will receive the GroupSession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=185"
  },
  {
    "text": "And don't worry if you're saying to yourself \"Wait, Adam, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=188"
  },
  {
    "text": "did you just say 'Staged GroupActivity'?\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=190"
  },
  {
    "text": "Why, yes. Yes, I did! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=192"
  },
  {
    "text": "But let's hold onto that thought and dive deeper into that later ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=194"
  },
  {
    "text": "when we're talking about best practices. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=197"
  },
  {
    "text": "For now, let's see how we can adopt this in our DrawTogether app.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=200"
  },
  {
    "text": "This is our DrawTogether app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=205"
  },
  {
    "text": "It's the same app from our previous WWDC talk from 2021 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=207"
  },
  {
    "text": "\"Build custom experiences with Group Activities,\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=211"
  },
  {
    "text": "so if you haven't seen it already, I highly recommend checking it out. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=214"
  },
  {
    "text": "Now that you've gone ahead and seen that, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=219"
  },
  {
    "text": "you'll remember there weren't any share buttons in our app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=221"
  },
  {
    "text": "but we did have a SharePlay button ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=224"
  },
  {
    "text": "when you were eligible for a GroupSession. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=226"
  },
  {
    "text": "Let's go ahead and modify that behavior ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=228"
  },
  {
    "text": "so that even when isEligibleForGroupSession is false, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=231"
  },
  {
    "text": "we show the button and, now, allow the user to start a SharePlay session.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=234"
  },
  {
    "text": "And now we can go ahead and see it in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=240"
  },
  {
    "text": "Let's go ahead and go to our ControlBar code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=242"
  },
  {
    "text": "Now, as you can see here, we have an ‘if’ statement ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=245"
  },
  {
    "text": "that makes sure that we don't have a group session ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=247"
  },
  {
    "text": "and that we're eligible for a group session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=250"
  },
  {
    "text": "So let's go ahead and remove the latter statement, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=253"
  },
  {
    "text": "and move it down here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=257"
  },
  {
    "text": "And now what we have to do is register a new variable ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=264"
  },
  {
    "text": "so that we know when to present our GroupActivity sharing controller. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=267"
  },
  {
    "text": "So we'll have a new variable up here, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=270"
  },
  {
    "text": "and now let's handle when that variable changes to true.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=274"
  },
  {
    "text": "And we have to have a wrapper now ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=283"
  },
  {
    "text": "so we can present the GroupActivity sharing controller in SwiftUI.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=285"
  },
  {
    "text": "And now, finally, all we have to do is have an 'else' statement ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=295"
  },
  {
    "text": "to set isSharingControllerPresented to true ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=299"
  },
  {
    "text": "if we're not eligible for a GroupSession.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=302"
  },
  {
    "text": "And now we can see our code in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=308"
  },
  {
    "text": "So we'll go ahead and go to the DrawTogether app., ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=310"
  },
  {
    "text": "and you can see, we have our SharePlay button. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=312"
  },
  {
    "text": "So we can now press it, and we're given the people picker.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=314"
  },
  {
    "text": "And now we've got a great experience for starting SharePlay from your app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=319"
  },
  {
    "text": "But that's not the only update we made. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=324"
  },
  {
    "text": "So now let's talk about some of the GroupSessionMessenger updates we've made. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=326"
  },
  {
    "text": "We've got two exciting new updates in our GroupSessionMessenger. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=330"
  },
  {
    "text": "For the first update, you may have run into this magical number. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=334"
  },
  {
    "text": "It's the payload size you're able to send over the GroupSessionMessenger. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=338"
  },
  {
    "text": "Well, not anymore. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=343"
  },
  {
    "text": "We've now made it so that the payload size is four times larger at 256KB. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=345"
  },
  {
    "text": "With this change, your app doesn't need to worry ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=351"
  },
  {
    "text": "about breaking up your message into smaller messages. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=353"
  },
  {
    "text": "You can simply send your message and focus on building a great experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=357"
  },
  {
    "text": "And if that didn't excite you enough, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=361"
  },
  {
    "text": "then I'm sure our next update will. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=363"
  },
  {
    "text": "Unreliable messaging. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=366"
  },
  {
    "text": "As part of the GroupSessionMessenger, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=368"
  },
  {
    "text": "you can now choose your messages' reliability. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=370"
  },
  {
    "text": "This allows you to choose between reliable or unreliable messaging ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=373"
  },
  {
    "text": "depending on your desired experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=376"
  },
  {
    "text": "All we have to do is leverage the new initializer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=380"
  },
  {
    "text": "on GroupSessionMessenger ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=383"
  },
  {
    "text": "that allows us to specify the MessageReliability.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=385"
  },
  {
    "text": "Now that we understand how to use the API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=390"
  },
  {
    "text": "what about the experience? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=392"
  },
  {
    "text": "When would we want to use unreliable messaging? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=395"
  },
  {
    "text": "Well, that's a great question ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=398"
  },
  {
    "text": "People are performing real-time actions on FaceTime and SharePlay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=401"
  },
  {
    "text": "So let's imagine that we have three people in a session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=406"
  },
  {
    "text": "Amy, Brian, and Chris. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=408"
  },
  {
    "text": "They're all joined into a session and synced ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=411"
  },
  {
    "text": "so as time progresses so does our movie. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=414"
  },
  {
    "text": "But what happens if Amy wants to do something ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=418"
  },
  {
    "text": "relevant to the specific time that they're at in that moment? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=420"
  },
  {
    "text": "Well, if you use reliable messaging, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=424"
  },
  {
    "text": "then we guarantee that messages will be received on all the devices, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=427"
  },
  {
    "text": "but that doesn't mean that they'll be received ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=431"
  },
  {
    "text": "at the time that they're expecting it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=433"
  },
  {
    "text": "For example, Chris received the message, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=436"
  },
  {
    "text": "but Brian has the message dropped the first time ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=438"
  },
  {
    "text": "and receives it properly after that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=441"
  },
  {
    "text": "But remember, the movie is still playing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=443"
  },
  {
    "text": "So now we get to where Amy intended the message to be reflected ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=446"
  },
  {
    "text": "and Brian doesn't have it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=450"
  },
  {
    "text": "He receives it later, but at that point, it's too late. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=452"
  },
  {
    "text": "Well, this is a perfect case for unreliable networking. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=455"
  },
  {
    "text": "It allows you, the developer, to know what information ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=459"
  },
  {
    "text": "needs to be reliably received on the other side ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=462"
  },
  {
    "text": "and what information doesn't. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=464"
  },
  {
    "text": "This is an important concept to understand when designing protocols ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=466"
  },
  {
    "text": "that have the user experience deeply affected by latency. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=470"
  },
  {
    "text": "Unreliable messages are using UDP ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=473"
  },
  {
    "text": "and have less latency and overhead with each message involved ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=476"
  },
  {
    "text": "and, as a result of that, you'll have a more real-time experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=479"
  },
  {
    "text": "when sending messages through them. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=482"
  },
  {
    "text": "So now let's talk about how we're going to use this for our DrawTogether app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=485"
  },
  {
    "text": "You may remember this screen from WWDC '21, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=488"
  },
  {
    "text": "especially with my beautifully drawn smiley face. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=492"
  },
  {
    "text": "Let's dive a bit into what happens when you're drawing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=495"
  },
  {
    "text": "your smiley face on the screen.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=498"
  },
  {
    "text": "In our app we have some code that listens to a GestureRecognizer ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=502"
  },
  {
    "text": "and then we sent messages each time we noticed a change. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=506"
  },
  {
    "text": "This meant that as we were drawing our smiley face, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=510"
  },
  {
    "text": "we were constantly sending new messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=513"
  },
  {
    "text": "for each point our GestureRecognizer gives us. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=515"
  },
  {
    "text": "That's a lot of messages! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=518"
  },
  {
    "text": "Well, we can now change our protocol to use unreliable messaging ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=520"
  },
  {
    "text": "to make a more seamless drawing experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=524"
  },
  {
    "text": "What we'll do here is make it so that each time we receive an update ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=528"
  },
  {
    "text": "from our GestureRecognizer, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=531"
  },
  {
    "text": "we'll send our newly added point using unreliable messaging. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=533"
  },
  {
    "text": "Once the gesture is complete, we'll then use reliable messaging ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=537"
  },
  {
    "text": "and give all of the points so a client can catch up with any points that they missed. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=540"
  },
  {
    "text": "This allows us to take advantage of the lower latency ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=545"
  },
  {
    "text": "provided by unreliable messaging to have a more immediate drawing experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=548"
  },
  {
    "text": "So let's see how we would do this in code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=553"
  },
  {
    "text": "So first let's go to our messages file.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=556"
  },
  {
    "text": "And we'll go ahead and define our new message type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=560"
  },
  {
    "text": "As you can see, this new message type is pretty much the same as our old one, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=565"
  },
  {
    "text": "but this time, will contain all of the points for our stroke. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=568"
  },
  {
    "text": "Now we'll go over to our canvas file.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=572"
  },
  {
    "text": "And we need to set up a handler function ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=580"
  },
  {
    "text": "to handle the new message that we're gonna get.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=582"
  },
  {
    "text": "And let's go ahead and create our unreliable messenger. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=590"
  },
  {
    "text": "First, we'll create a variable.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=594"
  },
  {
    "text": "And now, let's just initialize it.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=599"
  },
  {
    "text": "Now we'll listen for the finished stroke message.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=606"
  },
  {
    "text": "And mark the previous message as unreliable messenger as well.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=612"
  },
  {
    "text": "But we need a way to send the message. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=619"
  },
  {
    "text": "So we'll go up to finishedStroke.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=621"
  },
  {
    "text": "And we'll go ahead and send our new message type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=626"
  },
  {
    "text": "And let's change our old function for sending all of the points ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=631"
  },
  {
    "text": "to use the unreliable messenger.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=634"
  },
  {
    "text": "And now we can see our code in action. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=639"
  },
  {
    "text": "So we go over to the DrawTogether app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=641"
  },
  {
    "text": "and we can see how seamless it is. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=643"
  },
  {
    "text": "And that's it! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=647"
  },
  {
    "text": "And now, as promised, let's talk about some best practices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=649"
  },
  {
    "text": "for your SharePlay implementation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=653"
  },
  {
    "text": "You may remember this term from earlier: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=655"
  },
  {
    "text": "Staged GroupActivity. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=658"
  },
  {
    "text": "What does that term mean for your app? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=660"
  },
  {
    "text": "Well, let's talk through a scenario.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=662"
  },
  {
    "text": "Let's say that the device on our left, \"Adam\", ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=667"
  },
  {
    "text": "starts SharePlay with the device on our right, \"Brian\". ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=669"
  },
  {
    "text": "But Adam is trying to resume the show they were watching. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=672"
  },
  {
    "text": "So when someone activates the staged GroupActivity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=675"
  },
  {
    "text": "we want to jump into that resumed show at a specific time, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=678"
  },
  {
    "text": "rather than starting over. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=682"
  },
  {
    "text": "This poses a problem because \"Adam\" knew we had 11 minutes remaining ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=684"
  },
  {
    "text": "in the show, but Brian's device didn't. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=687"
  },
  {
    "text": "This means that if Brian's device activated the staged GroupActivity, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=691"
  },
  {
    "text": "the show may start over. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=695"
  },
  {
    "text": "So what can we do here? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=697"
  },
  {
    "text": "It really depends on your app and experience.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=699"
  },
  {
    "text": "So let's walk through some ideas. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=703"
  },
  {
    "text": "For the playback case, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=705"
  },
  {
    "text": "we'll want to have each device contribute its initial playback state ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=706"
  },
  {
    "text": "to the others in catch-up. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=710"
  },
  {
    "text": "This means that since Adam's device knew the playback state was 23 seconds, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=712"
  },
  {
    "text": "when he joins the session, he'll tell all the other devices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=717"
  },
  {
    "text": "his intended playback state, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=720"
  },
  {
    "text": "and they'll use that as the source of truth. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=722"
  },
  {
    "text": "This same principle applies to any experience you create using SharePlay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=725"
  },
  {
    "text": "Each person that joins a session should contribute ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=729"
  },
  {
    "text": "their understanding of the session to the others. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=732"
  },
  {
    "text": "This is because sessions are peer-to-peer and ownerless. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=735"
  },
  {
    "text": "So let's talk a bit more about that. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=738"
  },
  {
    "text": "Ownerless sessions are a hard concept to grasp, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=741"
  },
  {
    "text": "but they're important when designing a proper SharePlay experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=744"
  },
  {
    "text": "In this case, Adam, on the left, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=749"
  },
  {
    "text": "wants to hand off his session to his Apple TV. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=751"
  },
  {
    "text": "This results in his phone dropping off the GroupSession and his TV joining. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=754"
  },
  {
    "text": "But what happens if we had ownership implemented? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=759"
  },
  {
    "text": "Well, the owner dropped off, so... ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=762"
  },
  {
    "text": "And remember, this isn't just for TVs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=766"
  },
  {
    "text": "In iOS 16 we now have FaceTime handoff. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=770"
  },
  {
    "text": "So Adam goes ahead and hands off his iPad, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=773"
  },
  {
    "text": "and well, same thing. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=776"
  },
  {
    "text": "Boom ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=779"
  },
  {
    "text": "And that isn't all. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=780"
  },
  {
    "text": "We just talked about some examples of a user flow ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=781"
  },
  {
    "text": "where someone tries to move the session from one device to another, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=784"
  },
  {
    "text": "but there's other cases to think about. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=788"
  },
  {
    "text": "Okay, don't worry, we'll keep it short with just one more example. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=790"
  },
  {
    "text": "This screen may seem a little familiar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=794"
  },
  {
    "text": "It's the FaceTime HUD. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=797"
  },
  {
    "text": "But what happens if we click the SharePlay button? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=799"
  },
  {
    "text": "We're now presented with a button, End SharePlay, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=803"
  },
  {
    "text": "that allows you, you guessed it, end SharePlay. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=806"
  },
  {
    "text": "This allows you to end SharePlay for everyone, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=810"
  },
  {
    "text": "essentially the system calling .end() on the GroupSession ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=812"
  },
  {
    "text": "on your application's behalf. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=815"
  },
  {
    "text": "This means that no matter how careful you are about not calling .end() ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=818"
  },
  {
    "text": "unless that device is the owner, the system is still able to call .end() ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=821"
  },
  {
    "text": "on the GroupSession on your behalf. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=824"
  },
  {
    "text": "So remember, while it may be a hard concept to grasp, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=827"
  },
  {
    "text": "making sure that your application doesn't have a sense of ownership ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=830"
  },
  {
    "text": "means that it'll, overall, result in a much better experience. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=834"
  },
  {
    "text": "Now that you've listened to the whole session, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=838"
  },
  {
    "text": "go and adopt our new APIs for starting SharePlay from within your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=840"
  },
  {
    "text": "and explore ways for your app to communicate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=844"
  },
  {
    "text": "in new, low latency, ways using unreliable messaging.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=846"
  },
  {
    "text": "We love hearing from you all, so please continue to file feedback ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=851"
  },
  {
    "text": "using the Feedback Assistant. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=854"
  },
  {
    "text": "I hope you enjoyed all the changes that we've made ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=856"
  },
  {
    "text": "and we look forward to seeing all the amazing experiences that you build. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=859"
  },
  {
    "text": "If you haven't already, check out our other WWDC talk, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=862"
  },
  {
    "text": "\"Make a great SharePlay experience\". ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=866"
  },
  {
    "text": "Or, if you're looking for some amazing enhancements we've made ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=868"
  },
  {
    "text": "around media playback, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=871"
  },
  {
    "text": "check out \"Display ads and other interstitials in SharePlay\". ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=872"
  },
  {
    "text": "If you have any questions, please find us at the GroupActivities labs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=876"
  },
  {
    "text": "and challenges. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=880"
  },
  {
    "text": "As always, thank you all for tuning in, and have a great WWDC. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=881"
  },
  {
    "text": "We can't wait to see what you build.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10140/?time=885"
  }
]