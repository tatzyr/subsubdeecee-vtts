[
  {
    "text": "♪ ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=0"
  },
  {
    "text": "Hello, I'm Devin Rousso, an engineer on the WebKit team, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=9"
  },
  {
    "text": "and I'm here today to share with you the exciting new opportunity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=13"
  },
  {
    "text": "to create extensions for Safari's Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=16"
  },
  {
    "text": "Web Inspector is the primary developer tool for debugging web content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=19"
  },
  {
    "text": "on all of Apple's platforms. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=22"
  },
  {
    "text": "It already has a ton of built-in functionality for debugging websites, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=24"
  },
  {
    "text": "but there are often areas of web development ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=29"
  },
  {
    "text": "that are difficult to build into a generalized developer tool. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=31"
  },
  {
    "text": "Maybe you're debugging a popular JavaScript library, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=35"
  },
  {
    "text": "or you just need something more specific to what you're working on. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=38"
  },
  {
    "text": "Web Inspector extensions are a fantastic solution ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=41"
  },
  {
    "text": "for these personal workflow scenarios.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=44"
  },
  {
    "text": "By utilizing cross-browser web extensions and the DevTools APIs, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=47"
  },
  {
    "text": "you can now add your own tabs in Web Inspector in Safari 16. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=51"
  },
  {
    "text": "Let's take a quick look at a Web Inspector extension in action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=56"
  },
  {
    "text": "and then I'll show you how you can build your own. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=59"
  },
  {
    "text": "First I'll open Safari's extension preferences.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=62"
  },
  {
    "text": "And enable a Web Inspector extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=67"
  },
  {
    "text": "Then I'll close Safari's extension preferences and inspect the page.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=70"
  },
  {
    "text": "I'll do that from the Develop menu, Show Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=75"
  },
  {
    "text": "In Web Inspector, not only can I see the many built-in tabs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=79"
  },
  {
    "text": "like the Elements Tab, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=82"
  },
  {
    "text": "but also the tab for the Web Inspector extension I just enabled. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=83"
  },
  {
    "text": "Because we've just enabled this extension, however, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=88"
  },
  {
    "text": "we first have to give it permission to work with the currently inspected page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=90"
  },
  {
    "text": "I have the same permission duration options as other extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=94"
  },
  {
    "text": "outside of Web Inspector, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=97"
  },
  {
    "text": "so for now let's give it access for one day. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=99"
  },
  {
    "text": "This Open Graph extension is what I'll be building in this session. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=102"
  },
  {
    "text": "It displays the common social media metadata that most websites put ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=105"
  },
  {
    "text": "on their pages for use by link previews ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=109"
  },
  {
    "text": "in Messages and other social media sites. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=112"
  },
  {
    "text": "Now that we've gotten a quick look at what a Web Inspector extension can do, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=114"
  },
  {
    "text": "let's talk about how they're built. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=118"
  },
  {
    "text": "Like other Safari Web Extensions, Web Inspector extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=120"
  },
  {
    "text": "are distributed via an app in the App Store.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=123"
  },
  {
    "text": "To build your own Web Inspector extension, you will need to have Xcode, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=127"
  },
  {
    "text": "Apple's app creation tool for building Mac and iOS apps. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=131"
  },
  {
    "text": "Xcode also comes with project templates to help jumpstart ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=135"
  },
  {
    "text": "making a new Safari extension app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=139"
  },
  {
    "text": "If you already have an existing web extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=141"
  },
  {
    "text": "you've created for another browser, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=143"
  },
  {
    "text": "you can also use Xcode's bundled conversion tool. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=145"
  },
  {
    "text": "Simply run safari-web-extension-converter from the Terminal, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=148"
  },
  {
    "text": "passing a path to your extension's directory ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=152"
  },
  {
    "text": "that contains the manifest.json file. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=154"
  },
  {
    "text": "A full app project will then be created for your extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=157"
  },
  {
    "text": "that is ready to build and run.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=160"
  },
  {
    "text": "For more information on this tool, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=163"
  },
  {
    "text": "check out Meet Safari Web Extensions from WWDC 2020, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=164"
  },
  {
    "text": "as well as the online documentation. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=168"
  },
  {
    "text": "So today I'm going to go over the basic structure of a Web Inspector extension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=171"
  },
  {
    "text": "cover how to best evaluate code in that extension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=176"
  },
  {
    "text": "and discuss some good best practices for your users. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=180"
  },
  {
    "text": "Let's get started.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=183"
  },
  {
    "text": "Web Inspector extensions are structured just like other Safari Web Extensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=186"
  },
  {
    "text": "with a toolbar icon, background page, content scripts, and more, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=191"
  },
  {
    "text": "but they also have a dedicated devtools background page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=194"
  },
  {
    "text": "Let's take a look at how that works in practice. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=198"
  },
  {
    "text": "The structure of a typical Safari Web Extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=201"
  },
  {
    "text": "begins with a manifest file that declares the basic details ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=203"
  },
  {
    "text": "about the extension, like the name, icons, descriptions, and more. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=206"
  },
  {
    "text": "It can declare a background page to handle all the behind-the-scenes logic ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=210"
  },
  {
    "text": "of your extension, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=214"
  },
  {
    "text": "and can also declare any content scripts used to inject functionality ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=216"
  },
  {
    "text": "into web pages visited by the user. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=220"
  },
  {
    "text": "For Web Inspector extensions, a couple other pages enter the mix. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=223"
  },
  {
    "text": "First there is a required devtools background page ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=227"
  },
  {
    "text": "for the behind-the-scenes logic of your Web Inspector extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=230"
  },
  {
    "text": "This page has access to the unique devtools APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=234"
  },
  {
    "text": "and only a limited set of content script APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=238"
  },
  {
    "text": "From this devtools background page you can create devtools tab pages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=241"
  },
  {
    "text": "that will be shown in Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=246"
  },
  {
    "text": "But all of that is just for a single Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=248"
  },
  {
    "text": "If there are multiple Web Inspectors, each has its own instance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=251"
  },
  {
    "text": "of this same devtools background page, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=255"
  },
  {
    "text": "staying alive for the duration that the related Web Inspector is open. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=257"
  },
  {
    "text": "As such, you might also have multiple instances ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=261"
  },
  {
    "text": "of each devtools tab page as well. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=264"
  },
  {
    "text": "Let's take a look at how this structure looks in practice, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=267"
  },
  {
    "text": "and start building my Open Graph Web Inspector extension.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=270"
  },
  {
    "text": "I'll start by creating a new project in Xcode.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=274"
  },
  {
    "text": "The project type I'm going to create is a Safari Extension App. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=281"
  },
  {
    "text": "I only really need macOS, but I'm going to leave it as is, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=285"
  },
  {
    "text": "in multiplatform, in case I want to add iOS functionality in the future. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=288"
  },
  {
    "text": "I'm going to name this \"Open Graph\", and keep the rest of the defaults. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=292"
  },
  {
    "text": "Note that you need to pick a team and bundle identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=296"
  },
  {
    "text": "based on the Apple developer account you're using. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=300"
  },
  {
    "text": "And finally, I'm going to save this on the Desktop.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=303"
  },
  {
    "text": "Now I have a generic Safari Web Extension project, ready for me to modify. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=307"
  },
  {
    "text": "I am first taken to the manifest.json file, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=312"
  },
  {
    "text": "which is the root configuration file for every web extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=314"
  },
  {
    "text": "The manifest file references the other resources that make up your extension– ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=318"
  },
  {
    "text": "localizations, images, pages, scripts, styles, and more. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=322"
  },
  {
    "text": "For my Web Inspector extension, I won't need some of these files, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=326"
  },
  {
    "text": "like the background page, content scripts, or popup, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=330"
  },
  {
    "text": "so I'm going to delete them from the manifest ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=333"
  },
  {
    "text": "and from the entire project.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=336"
  },
  {
    "text": "Okay, let's start making this a Web Inspector extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=342"
  },
  {
    "text": "To do that I need to add a devtools background page to the manifest ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=346"
  },
  {
    "text": "and create a corresponding file for it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=350"
  },
  {
    "text": "as well as a JavaScript file I'm going to use inside it. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=352"
  },
  {
    "text": "I'm going to go to File - New - File...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=355"
  },
  {
    "text": "And scroll down to find the Empty file template.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=361"
  },
  {
    "text": "I'm going to call this file \"devtools_background.html\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=372"
  },
  {
    "text": "to match the name I used in the manifest.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=376"
  },
  {
    "text": "The location is already set to be right next to my other resources ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=380"
  },
  {
    "text": "and part of the correct targets, so I don't need to change anything here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=384"
  },
  {
    "text": "I'll repeat the same steps again with the JavaScript file...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=391"
  },
  {
    "text": "…which I'll call \"devtools_background.js\".",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=400"
  },
  {
    "text": "Finally, I need to include the JavaScript file in my devtools background page.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=408"
  },
  {
    "text": "Remember, this page gets created when Web Inspector opens, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=414"
  },
  {
    "text": "and is responsible for creating the custom tabs that appear in Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=418"
  },
  {
    "text": "I almost always want to create a tab ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=422"
  },
  {
    "text": "so that, if needed, the permissions I saw earlier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=424"
  },
  {
    "text": "will be displayed to my users right there in-line, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=427"
  },
  {
    "text": "instead of in some other place. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=430"
  },
  {
    "text": "This devtools panels create API takes three simple arguments. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=431"
  },
  {
    "text": "The first is the name of the tab. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=435"
  },
  {
    "text": "For that, I am using the localization method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=438"
  },
  {
    "text": "to look up the localized name of my extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=441"
  },
  {
    "text": "The next argument is the icon path to use. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=444"
  },
  {
    "text": "Note that this should be a vector image to smoothly scale to any size ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=446"
  },
  {
    "text": "if the user chooses to zoom their user interface. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=451"
  },
  {
    "text": "But in order to use this icon, I need to make sure it's part of my project, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=453"
  },
  {
    "text": "along with all of the other icons I need for my extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=457"
  },
  {
    "text": "The icons in the \"images\" folder are still the defaults from the project template. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=460"
  },
  {
    "text": "So let's delete these from the project.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=464"
  },
  {
    "text": "And replace them with some icons I created earlier...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=470"
  },
  {
    "text": "…including the \"logo.svg\" I am trying to use when creating the devtools tab.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=477"
  },
  {
    "text": "Now that this is here, I'll go back to the devtools background script.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=484"
  },
  {
    "text": "The third argument is the HTML used by the tab in Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=490"
  },
  {
    "text": "And just like with the images a moment ago, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=494"
  },
  {
    "text": "I need to create this page before I can use it.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=496"
  },
  {
    "text": "I'll name this \"devtools_tab.html\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=506"
  },
  {
    "text": "to match the name I gave the API.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=509"
  },
  {
    "text": "Unlike the devtools background page, however, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=516"
  },
  {
    "text": "this devtools tab page will actually be shown to the user, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=519"
  },
  {
    "text": "so this time I'll create both a JavaScript and CSS file.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=522"
  },
  {
    "text": "I'll name the JavaScript file \"devtools_tab.js\"...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=535"
  },
  {
    "text": "…and the CSS file \"devtools_tab.css\".",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=543"
  },
  {
    "text": "It's great that I've already set up this structure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=548"
  },
  {
    "text": "but for now I'll just add the usual \"Hello World\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=550"
  },
  {
    "text": "to make sure that things are working correctly. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=553"
  },
  {
    "text": "But don't worry, we'll dive deeper into this a little bit later, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=555"
  },
  {
    "text": "because first, we still have a few more icons to replace ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=558"
  },
  {
    "text": "to make sure this extension has a consistent look. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=562"
  },
  {
    "text": "First we need to replace the default large icon...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=565"
  },
  {
    "text": "…by deleting it...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=571"
  },
  {
    "text": "…and dragging my large icon in its place.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=575"
  },
  {
    "text": "Since this large icon is part of the app, however, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=581"
  },
  {
    "text": "I need to add it to the right target.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=584"
  },
  {
    "text": "The remaining icons are all part of the Assets catalog, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=590"
  },
  {
    "text": "specifically the AppIcon set.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=593"
  },
  {
    "text": "I've already prepared these icons, so I'll just paste them in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=599"
  },
  {
    "text": "And with that, I think we've replaced all of the default icons, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=603"
  },
  {
    "text": "so I'm now going to run my extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=607"
  },
  {
    "text": "Note that this may take a few seconds the first time the project is built.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=609"
  },
  {
    "text": "And there it is! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=620"
  },
  {
    "text": "Most of this UI is from the Xcode template, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=621"
  },
  {
    "text": "but I do correctly see my icon instead of the default one. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=624"
  },
  {
    "text": "Once we've launched the Safari extension app at least once, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=627"
  },
  {
    "text": "we can close it, as the app doesn't need to be running ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=630"
  },
  {
    "text": "anymore for Safari to pick it up.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=633"
  },
  {
    "text": "But before I can see it in Safari, however, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=639"
  },
  {
    "text": "I have to Allow Unsigned Extensions in the Develop menu ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=641"
  },
  {
    "text": "as this is a locally built unsigned app. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=644"
  },
  {
    "text": "Now, in Safari's Extensions preferences, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=647"
  },
  {
    "text": "I can see Open Graph. I'll turn it on. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=649"
  },
  {
    "text": "I'm going to open a Safari tab and browse to apple.com ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=653"
  },
  {
    "text": "so that I can try my extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=656"
  },
  {
    "text": "And already we can see that my icon is in the toolbar.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=659"
  },
  {
    "text": "And my extension tab is now in the tab bar. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=664"
  },
  {
    "text": "Switching to it, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=666"
  },
  {
    "text": "we can see the same permission prompt we saw earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=669"
  },
  {
    "text": "This permission prompt is automatically shown ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=672"
  },
  {
    "text": "if permissions are needed by the extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=674"
  },
  {
    "text": "Just like earlier, I'll allow it for one day.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=676"
  },
  {
    "text": "And there's the \"Hello World\" I added to the devtools tab page earlier. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=681"
  },
  {
    "text": "Those are the basics of how to create a Web Inspector extension for Safari 16. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=685"
  },
  {
    "text": "Let's recap. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=690"
  },
  {
    "text": "I declared the devtools background page and added it to my Xcode project. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=691"
  },
  {
    "text": "From there, I was able to create a new tab in Web Inspector ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=696"
  },
  {
    "text": "to show my custom tooling. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=699"
  },
  {
    "text": "And finally, I've started considering the permissions my extension needs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=701"
  },
  {
    "text": "For a Web Inspector extension, this often boils down to evaluating code ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=705"
  },
  {
    "text": "in the inspected page, usually to extract some data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=709"
  },
  {
    "text": "for display inside of Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=712"
  },
  {
    "text": "Web Extensions already have a number of ways to evaluate code. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=714"
  },
  {
    "text": "For Web Inspector extensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=718"
  },
  {
    "text": "there is another API that is the preferred method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=720"
  },
  {
    "text": "of evaluating scripts inside the inspected page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=722"
  },
  {
    "text": "Let's take a look at this API and see how I can use it for my OpenGraph extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=725"
  },
  {
    "text": "This devtools extension API to evaluate JavaScript in the inspected window ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=730"
  },
  {
    "text": "is the best way to get quick results. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=734"
  },
  {
    "text": "It will automatically target the page associated with the Web Inspector ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=737"
  },
  {
    "text": "your extension is running in. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=740"
  },
  {
    "text": "Remember, the user could be inspecting multiple pages at the same time. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=742"
  },
  {
    "text": "There are also some useful options for this API ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=747"
  },
  {
    "text": "that can help you get the right results. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=750"
  },
  {
    "text": "By default the expression given to this API is evaluated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=752"
  },
  {
    "text": "in the context of the main frame of the inspected page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=755"
  },
  {
    "text": "But you can use the frameURL option ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=759"
  },
  {
    "text": "to specify evaluation inside a different frame. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=762"
  },
  {
    "text": "This is needed when your extension needs to extract data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=765"
  },
  {
    "text": "from one of many possible sub-frames in the page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=768"
  },
  {
    "text": "For my OpenGraph extension, I only need to worry about the main frame, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=771"
  },
  {
    "text": "but I recommend you keep this in mind ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=774"
  },
  {
    "text": "when evaluating scripts for your Web Inspector extensions. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=776"
  },
  {
    "text": "Let's take a look at how I can use this function in my extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=779"
  },
  {
    "text": "to get and display data from the inspected page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=783"
  },
  {
    "text": "I'll start by replacing the placeholder \"Hello World\" I added earlier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=785"
  },
  {
    "text": "with HTML that actually loads my CSS and JavaScript files.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=789"
  },
  {
    "text": "Then I'll add some basic CSS to give my devtools tab a nice style.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=798"
  },
  {
    "text": "I want to make sure that my devtools tab fits in with the rest of Web Inspector, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=804"
  },
  {
    "text": "so I've declared a root `color-scheme` property ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=807"
  },
  {
    "text": "that will make my devtools tab match the appearance of the rest of Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=811"
  },
  {
    "text": "I am using a system font family and inheriting the font size, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=816"
  },
  {
    "text": "and matching the colors of more important text. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=821"
  },
  {
    "text": "As far as functionality, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=824"
  },
  {
    "text": "I'll start by adding some text ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=828"
  },
  {
    "text": "in case the page doesn't have any opengraph metadata. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=830"
  },
  {
    "text": "Note that I can use web extension localized strings in Web Inspector ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=833"
  },
  {
    "text": "just like I can anywhere else in a web extension. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=838"
  },
  {
    "text": "But in order to do so, I need to add that same localized string identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=840"
  },
  {
    "text": "to the localized strings file.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=844"
  },
  {
    "text": "Next, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=847"
  },
  {
    "text": "I'll create the JavaScript I'll provide to the powerful devtools ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=849"
  },
  {
    "text": "inspectedWindow eval API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=853"
  },
  {
    "text": "which lets me evaluate it in the inspected page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=855"
  },
  {
    "text": "In this case, I want to query the inspected page's DOM ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=858"
  },
  {
    "text": "for some common opengraph metadata, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=861"
  },
  {
    "text": "specifically the title, description...",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=864"
  },
  {
    "text": "…and image, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=870"
  },
  {
    "text": "as well as the current ready state of the inspected page's document, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=873"
  },
  {
    "text": "bundling it all together to send back to the devtools page via the return value. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=877"
  },
  {
    "text": "Once that's done, I can grab the HTML element ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=881"
  },
  {
    "text": "that corresponds to each of these properties ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=885"
  },
  {
    "text": "and configure them so that they show the data that was gathered.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=888"
  },
  {
    "text": "And if the document isn't quite ready yet, I can try again after a short delay.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=894"
  },
  {
    "text": "I also want to redo all of this every time the inspected page navigates, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=900"
  },
  {
    "text": "so I'll add a listener for devtools network onNavigated.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=903"
  },
  {
    "text": "This all looks great, so I'll build again to test it.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=915"
  },
  {
    "text": "Now, whenever I open Web Inspector or navigate with Web Inspector already open, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=926"
  },
  {
    "text": "I can see the opengraph title, description, and image of every page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=930"
  },
  {
    "text": "And that's a simple example of how to use some of the many new ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=935"
  },
  {
    "text": "and powerful Web Inspector extension APIs. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=938"
  },
  {
    "text": "My OpenGraph extension is coming along very nicely. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=941"
  },
  {
    "text": "My Web Inspector extension's devtools tab page ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=944"
  },
  {
    "text": "is now able to evaluate in the inspected page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=947"
  },
  {
    "text": "I'm able to take the result data and process it ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=950"
  },
  {
    "text": "to display it in a user friendly format for quick access. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=954"
  },
  {
    "text": "So what are some great ways to make great user experiences ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=957"
  },
  {
    "text": "when creating a Web Inspector extension? ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=960"
  },
  {
    "text": "Always create devtools tab pages from the devtools background page. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=962"
  },
  {
    "text": "This way, the user can see where these tabs will appear in Web Inspector, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=967"
  },
  {
    "text": "and any appropriate permission prompting will be shown in-line. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=971"
  },
  {
    "text": "Instead of asking for specific host permissions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=975"
  },
  {
    "text": "try to use the activeTab permission ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=977"
  },
  {
    "text": "to keep Web Inspector extensions as targeted as possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=979"
  },
  {
    "text": "And make sure to use the CSS color-scheme property ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=982"
  },
  {
    "text": "or the web extension devtools theme APIs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=985"
  },
  {
    "text": "to match the overall theme of Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=988"
  },
  {
    "text": "So today I showed you at how to create entirely new debugging tools ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=990"
  },
  {
    "text": "with Web Inspector extensions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=994"
  },
  {
    "text": "and covered some great best practices to keep in mind while doing so. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=996"
  },
  {
    "text": "You're welcome to download the OpenGraph Web Inspector extension ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=999"
  },
  {
    "text": "in this session's related resources ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1002"
  },
  {
    "text": "if you want to take a closer look for yourself.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1004"
  },
  {
    "text": "We're super interested in hearing your thoughts, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1008"
  },
  {
    "text": "so please file bugs and feature requests using the Feedback Assistant, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1010"
  },
  {
    "text": "or come chat with us on the Safari developer forums. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1014"
  },
  {
    "text": "And even consider joining the WebExtensions community group ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1018"
  },
  {
    "text": "to help shape the future of web extensions.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1021"
  },
  {
    "text": "And also, make sure to check out What's new in Safari Web Extensions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1025"
  },
  {
    "text": "and the documentation online, to learn more about what's new this year. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1029"
  },
  {
    "text": "I really hope you've enjoyed learning about the amazing new ability ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1033"
  },
  {
    "text": "to create custom tooling within Web Inspector. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1036"
  },
  {
    "text": "We can't wait to see what awesome Web Inspector extensions you'll create, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1039"
  },
  {
    "text": "and look forward to all the ways you'll push the bounds of what's possible. ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1042"
  },
  {
    "text": "Thank you so much for listening, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1046"
  },
  {
    "text": "and I hope you have a fantastic rest of your WWDC.  ♪ ♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10100/?time=1047"
  }
]