[
  {
    "text": "♪ Mellow instrumental hip-hop music ♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=0"
  },
  {
    "text": "♪ ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=3"
  },
  {
    "text": "Devin Clary: Hi. I'm Devin, an engineer on the Messages team.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=9"
  },
  {
    "text": "Lance Parker: And I'm Lance, also a Messages engineer.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=14"
  },
  {
    "text": "Devin: Welcome to \"Integrate your custom collaboration app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=17"
  },
  {
    "text": "with Messages.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=20"
  },
  {
    "text": "Collaboration starts with a conversation, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=22"
  },
  {
    "text": "and in iOS 16 and macOS Ventura, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=24"
  },
  {
    "text": "you can bring your app's custom collaboration experience ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=27"
  },
  {
    "text": "right into the fabric of the conversation.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=29"
  },
  {
    "text": "In this video, we'll go over the life cycle of a collaboration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=32"
  },
  {
    "text": "Then, we'll show you how to prepare ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=36"
  },
  {
    "text": "your app's collaborative content to be shared through Messages.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=38"
  },
  {
    "text": "Next, we'll give you everything you need to instantly verify ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=42"
  },
  {
    "text": "recipient access, and respond to participant changes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=45"
  },
  {
    "text": "all without compromising privacy.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=49"
  },
  {
    "text": "Finally, we'll show you how your app can post notices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=52"
  },
  {
    "text": "about the content right to the Messages conversation.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=55"
  },
  {
    "text": "This video assumes your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=59"
  },
  {
    "text": "has existing collaboration infrastructure, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=60"
  },
  {
    "text": "and has already adopted universal links.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=63"
  },
  {
    "text": "We'll also build on some concepts introduced in ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=66"
  },
  {
    "text": "\"Add Shared with You to your app\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=68"
  },
  {
    "text": "and \"Enhance collaboration experiences with Messages.\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=69"
  },
  {
    "text": "First up, I'll go over the life cycle ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=74"
  },
  {
    "text": "of a custom collaboration message ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=76"
  },
  {
    "text": "to illustrate how this API allows your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=78"
  },
  {
    "text": "to start collaborating faster than ever.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=81"
  },
  {
    "text": "When a user decides to share a collaboration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=84"
  },
  {
    "text": "from your app through Messages, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=86"
  },
  {
    "text": "you first create metadata to represent the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=89"
  },
  {
    "text": "The metadata includes share options the user can configure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=93"
  },
  {
    "text": "prior to sending the message, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=96"
  },
  {
    "text": "and a number of other properties you can customize.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=97"
  },
  {
    "text": "Next, you provide that metadata to the share sheet, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=101"
  },
  {
    "text": "or to drag and drop.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=103"
  },
  {
    "text": "This allows a draft of the content to be staged ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=106"
  },
  {
    "text": "in the Messages compose field.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=108"
  },
  {
    "text": "The collaboration needs to be represented by a universal link.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=111"
  },
  {
    "text": "That can be created immediately, but it's best deferred ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=115"
  },
  {
    "text": "until right before the message is sent.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=117"
  },
  {
    "text": "This is useful if your app's link creation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=120"
  },
  {
    "text": "depends on the selected share options, or recipients, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=122"
  },
  {
    "text": "as configured in the Messages compose field.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=125"
  },
  {
    "text": "The user chooses the recipients and share options ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=128"
  },
  {
    "text": "and taps the send button.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=131"
  },
  {
    "text": "Before the message is sent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=134"
  },
  {
    "text": "Messages asks your app for the universal link ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=135"
  },
  {
    "text": "and a device independent identifier for the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=137"
  },
  {
    "text": "Using that identifier, Messages provides a set of ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=141"
  },
  {
    "text": "cryptographic identities representing the recipients ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=143"
  },
  {
    "text": "of that specific collaboration message.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=146"
  },
  {
    "text": "Your app will use these identities later ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=149"
  },
  {
    "text": "to allow the recipients to immediately open the link ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=151"
  },
  {
    "text": "on any of their devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=154"
  },
  {
    "text": "Your app stores those identities on its servers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=158"
  },
  {
    "text": "and associates them with the shared content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=161"
  },
  {
    "text": "Once your app finishes this step, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=164"
  },
  {
    "text": "the message is sent to the recipients.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=166"
  },
  {
    "text": "Now, here's what happens on the receiving device.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=170"
  },
  {
    "text": "The goal is to instantly verify access, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=173"
  },
  {
    "text": "pairing a recipient identity with an account on your server.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=176"
  },
  {
    "text": "When the recipient opens the link, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=179"
  },
  {
    "text": "your app receives a call to open the URL, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=181"
  },
  {
    "text": "just like it does for any other link.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=184"
  },
  {
    "text": "When your app detects that a user account ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=188"
  },
  {
    "text": "doesn't yet have access to the document, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=190"
  },
  {
    "text": "it queries the system for a proof of user identity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=192"
  },
  {
    "text": "cryptographically signed by the recipient device.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=195"
  },
  {
    "text": "Your app sends that signed identity proof ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=198"
  },
  {
    "text": "to your server for validation.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=200"
  },
  {
    "text": "If the signature is valid, the server compares the proof ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=203"
  },
  {
    "text": "against the identities previously provided ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=206"
  },
  {
    "text": "by the sending device.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=208"
  },
  {
    "text": "If there's a match, your server grants access ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=210"
  },
  {
    "text": "to the user's account.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=213"
  },
  {
    "text": "And with that, the recipient has gained ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=215"
  },
  {
    "text": "instant and secure access to the content, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=216"
  },
  {
    "text": "all without exchanging account information! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=219"
  },
  {
    "text": "And that's the life cycle of a collaboration message! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=222"
  },
  {
    "text": "Next, let's look more closely ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=225"
  },
  {
    "text": "at the API for starting a collaboration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=227"
  },
  {
    "text": "The system needs some metadata about the collaboration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=231"
  },
  {
    "text": "And for that, you use a new class ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=235"
  },
  {
    "text": "in the Shared with You framework called SWCollaborationMetadata.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=236"
  },
  {
    "text": "This class has a few properties for you to configure: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=241"
  },
  {
    "text": "the content's title, a local identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=245"
  },
  {
    "text": "to reference the content before its been shared; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=248"
  },
  {
    "text": "the initiator name and account handle, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=250"
  },
  {
    "text": "to provide transparency to the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=253"
  },
  {
    "text": "about the account they're sharing from; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=254"
  },
  {
    "text": "and the default share options, for the user to configure.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=256"
  },
  {
    "text": "Here's how to create a metadata object ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=261"
  },
  {
    "text": "and configure its properties.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=263"
  },
  {
    "text": "Create a local identifier using SWLocalCollaborationIdentifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=267"
  },
  {
    "text": "initialized with a string.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=271"
  },
  {
    "text": "The string only needs to be sufficient for your app ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=273"
  },
  {
    "text": "to identify the content locally, not across devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=276"
  },
  {
    "text": "Initialize a new metadata instance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=281"
  },
  {
    "text": "using the local identifier.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=283"
  },
  {
    "text": "Set the content title, the initiator's account handle, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=287"
  },
  {
    "text": "and their name using PersonNameComponents ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=292"
  },
  {
    "text": "from the foundation framework.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=294"
  },
  {
    "text": "The handle and name are only displayed locally ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=297"
  },
  {
    "text": "so the user can confirm the account they're sharing from.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=299"
  },
  {
    "text": "Next, set the defaultShareOptions.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=304"
  },
  {
    "text": "Before I show you how to do that, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=307"
  },
  {
    "text": "I'll first describe how options work.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=308"
  },
  {
    "text": "Share options are the settings a user configures ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=312"
  },
  {
    "text": "on the collaboration in Messages or the share sheet.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=314"
  },
  {
    "text": "The options selected by the user are provided to you ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=318"
  },
  {
    "text": "before the message is sent.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=320"
  },
  {
    "text": "Share options might include settings like ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=323"
  },
  {
    "text": "who can make edits to a collaboration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=325"
  },
  {
    "text": "or who should have access to the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=327"
  },
  {
    "text": "You use a few classes to define options, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=332"
  },
  {
    "text": "starting with SWCollaborationOption.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=334"
  },
  {
    "text": "Depending on how they're grouped, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=338"
  },
  {
    "text": "options represent individual switches, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=339"
  },
  {
    "text": "or mutually exclusive values for a setting.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=342"
  },
  {
    "text": "Options have a title and an identifier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=346"
  },
  {
    "text": "and they are either selected or unselected.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=348"
  },
  {
    "text": "There are two classes to represent a group of options: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=353"
  },
  {
    "text": "SWCollaborationOptionsGroup ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=358"
  },
  {
    "text": "and SWCollaborationOptions PickerGroup.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=360"
  },
  {
    "text": "You use SWCollaborationOptionsGroup ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=364"
  },
  {
    "text": "to represent a collection of switches, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=366"
  },
  {
    "text": "while SWCollaborationOptions PickerGroup ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=369"
  },
  {
    "text": "represents mutually exclusive values for a setting.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=371"
  },
  {
    "text": "Finally, SWCollaborationShareOptions ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=376"
  },
  {
    "text": "defines the full set of option groups, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=379"
  },
  {
    "text": "to be set on the metadata's defaultShareOptions property.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=381"
  },
  {
    "text": "You can also provide a summary string to describe the options.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=385"
  },
  {
    "text": "Now that I've described the option classes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=389"
  },
  {
    "text": "here's an example showing how to use them.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=391"
  },
  {
    "text": "This code defines two option groups.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=394"
  },
  {
    "text": "The first group is initialized with an identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=398"
  },
  {
    "text": "and two possible options.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=401"
  },
  {
    "text": "The identifier is an arbitrary string ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=403"
  },
  {
    "text": "you later use to identify which option was selected by the user.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=405"
  },
  {
    "text": "Since this is a picker group, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=410"
  },
  {
    "text": "the options are mutually exclusive.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=412"
  },
  {
    "text": "This group represents the permission settings ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=414"
  },
  {
    "text": "for the content: readwrite or readonly.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=416"
  },
  {
    "text": "Then, the first option in that group is selected by default.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=420"
  },
  {
    "text": "And the title is set to a string describing this group.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=426"
  },
  {
    "text": "The second option group is initialized the same way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=431"
  },
  {
    "text": "and also contains two options.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=433"
  },
  {
    "text": "But since this is a generic option group, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=436"
  },
  {
    "text": "the user will be able to configure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=438"
  },
  {
    "text": "whether to allow mentions and comments independently.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=439"
  },
  {
    "text": "Finally, the two option groups are used to initialize ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=443"
  },
  {
    "text": "an instance of SWCollaborationShareOptions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=446"
  },
  {
    "text": "which is then set on the metadata.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=450"
  },
  {
    "text": "Next, the metadata is provided to the share sheet ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=454"
  },
  {
    "text": "or drag and drop, depending on how the user ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=457"
  },
  {
    "text": "decides to share the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=459"
  },
  {
    "text": "If your app uses SwiftUI, SWCollaborationMetadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=462"
  },
  {
    "text": "is compatible with the new ShareLink API.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=466"
  },
  {
    "text": "Watch \"Meet Transferable\" and \"What's new in SwiftUI\" ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=469"
  },
  {
    "text": "to learn more about Transferable and ShareLink.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=472"
  },
  {
    "text": "Here's how easy it is to support collaboration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=478"
  },
  {
    "text": "on a proxy representation in SwiftUI! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=480"
  },
  {
    "text": "From within a Transferable model object, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=485"
  },
  {
    "text": "set up a ProxyRepresentation ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=488"
  },
  {
    "text": "to return a collaboration metadata instance.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=490"
  },
  {
    "text": "Then, from a view, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=495"
  },
  {
    "text": "initialize ShareLink with that model object.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=496"
  },
  {
    "text": "For UIKit and AppKit apps, you use NSItemProvider ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=502"
  },
  {
    "text": "to support sharing.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=506"
  },
  {
    "text": "And SWCollaborationMetadata conforms to ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=508"
  },
  {
    "text": "NSItemProviderReading and writing.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=511"
  },
  {
    "text": "So you simply register a metadata instance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=513"
  },
  {
    "text": "with an item provider, to support collaboration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=516"
  },
  {
    "text": "It's also good practice ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=519"
  },
  {
    "text": "to register multiple representations of the content ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=521"
  },
  {
    "text": "to support sharing through as many channels as possible.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=523"
  },
  {
    "text": "For example, Messages automatically ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=527"
  },
  {
    "text": "offers an option to send the content as a copy ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=529"
  },
  {
    "text": "if you provide a file representation.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=532"
  },
  {
    "text": "You'll use the NSItemProvider API with ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=535"
  },
  {
    "text": "UIActivityViewController and UIDragItem on iOS and iPadOS ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=538"
  },
  {
    "text": "and NSSharingServicePicker on macOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=543"
  },
  {
    "text": "Here's how to set that up with the share sheet on iOS.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=548"
  },
  {
    "text": "Create an NSItemProvider instance.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=552"
  },
  {
    "text": "Register the collaboration metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=556"
  },
  {
    "text": "created in the previous example, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=558"
  },
  {
    "text": "with visibility set to all processes on the system.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=559"
  },
  {
    "text": "Initialize UIActivityItemsConfiguration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=565"
  },
  {
    "text": "with the item provider, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=567"
  },
  {
    "text": "then initialize UIActivityViewController ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=570"
  },
  {
    "text": "with that configuration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=572"
  },
  {
    "text": "And finally, present the view controller.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=576"
  },
  {
    "text": "It's just as easy to support drag and drop.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=580"
  },
  {
    "text": "Initialize NSItemProvider ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=584"
  },
  {
    "text": "and register the metadata the same way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=586"
  },
  {
    "text": "then create a UIDragItem with the item provider ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=590"
  },
  {
    "text": "to use with the drag and drop APIs.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=593"
  },
  {
    "text": "The API is similar on macOS for the sharing popover.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=598"
  },
  {
    "text": "Again, set up the item provider.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=603"
  },
  {
    "text": "And this time, use it to initialize ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=606"
  },
  {
    "text": "NSSharingServicePicker.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=608"
  },
  {
    "text": "And then show the picker relative to a target view.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=611"
  },
  {
    "text": "Drag and drop on macOS utilizes NSPasteboardItem ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=617"
  },
  {
    "text": "rather than NSItemProvider.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=620"
  },
  {
    "text": "To support this, SharedWithYou exports ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=622"
  },
  {
    "text": "an NSPasteboardItem extension.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=624"
  },
  {
    "text": "Using that extension, set the collaboration metadata ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=629"
  },
  {
    "text": "directly on a new NSPasteboardItem instance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=631"
  },
  {
    "text": "in order to support drag and drop.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=634"
  },
  {
    "text": "And that's all you need for a draft ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=639"
  },
  {
    "text": "of your collaborative content to be staged in Messages! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=640"
  },
  {
    "text": "Next, when the user taps the send button, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=645"
  },
  {
    "text": "the system coordinates with your app to set up the share.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=647"
  },
  {
    "text": "It does this through a new class called ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=652"
  },
  {
    "text": "SWCollaborationCoordinator.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=654"
  },
  {
    "text": "SWCollaborationCoordinator is a singleton, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=657"
  },
  {
    "text": "meaning there is a global shared instance.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=660"
  },
  {
    "text": "That shared instance coordinates the collaboration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=663"
  },
  {
    "text": "through a delegate you define called an actionHandler.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=665"
  },
  {
    "text": "To ensure your app is always available ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=669"
  },
  {
    "text": "to coordinate collaborations, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=671"
  },
  {
    "text": "it will be launched in the background when needed.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=672"
  },
  {
    "text": "So you should register the delegate soon after launch ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=675"
  },
  {
    "text": "and handle actions immediately to avoid timeouts.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=677"
  },
  {
    "text": "Here's how to set up the collaboration coordinator ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=682"
  },
  {
    "text": "after your app finishes launching.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=684"
  },
  {
    "text": "Access the singleton coordinator instance ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=688"
  },
  {
    "text": "through the shared property.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=690"
  },
  {
    "text": "Then, in the app delegate's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=693"
  },
  {
    "text": "didFinishLaunchingWithOptions method, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=694"
  },
  {
    "text": "set the actionHandler property ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=696"
  },
  {
    "text": "to an object that conforms to the ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=698"
  },
  {
    "text": "SWCollaborationActionHandler protocol.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=699"
  },
  {
    "text": "The action handler protocol uses a new class ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=704"
  },
  {
    "text": "called SWAction.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=706"
  },
  {
    "text": "SWActions represent work your app is expected to perform.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=709"
  },
  {
    "text": "You fulfill actions to mark them as complete, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=713"
  },
  {
    "text": "and fail them otherwise.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=716"
  },
  {
    "text": "The first action your app needs to handle ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=719"
  },
  {
    "text": "is the start collaboration action.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=721"
  },
  {
    "text": "SWStartCollaborationAction ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=723"
  },
  {
    "text": "contains the collaboration metadata you set up earlier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=725"
  },
  {
    "text": "updated with the user's selected share options.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=728"
  },
  {
    "text": "Once you've performed the necessary setup, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=732"
  },
  {
    "text": "you fulfill the start action with the universal link ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=734"
  },
  {
    "text": "and a device-independent identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=737"
  },
  {
    "text": "for the collaboration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=738"
  },
  {
    "text": "If you explicitly fail the start action, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=740"
  },
  {
    "text": "the message is canceled.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=743"
  },
  {
    "text": "Here's an implementation to handle the start action ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=746"
  },
  {
    "text": "using an example server request.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=748"
  },
  {
    "text": "First, retrieve the local identifier, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=752"
  },
  {
    "text": "and user-selected share options ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=754"
  },
  {
    "text": "from the action's metadata property.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=756"
  },
  {
    "text": "Set up a server request to prepare the collaboration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=760"
  },
  {
    "text": "using the identifier and options.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=762"
  },
  {
    "text": "Then, send the request to the server.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=767"
  },
  {
    "text": "This example uses async await.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=770"
  },
  {
    "text": "Finally, fulfill the action with the universal link ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=774"
  },
  {
    "text": "and the device independent identifier from the response.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=776"
  },
  {
    "text": "Or, if there was an error, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=781"
  },
  {
    "text": "fail the action to cancel the message.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=783"
  },
  {
    "text": "If the start action was successful, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=785"
  },
  {
    "text": "the system sends your app a second action ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=787"
  },
  {
    "text": "to update the collaboration participants.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=790"
  },
  {
    "text": "The SWUpdateCollaboration ParticipantsAction ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=793"
  },
  {
    "text": "contains the cryptographic identities ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=795"
  },
  {
    "text": "for the participants.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=797"
  },
  {
    "text": "The identities are derived from the collaboration identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=799"
  },
  {
    "text": "fulfilled by the start action in the previous step.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=802"
  },
  {
    "text": "Store the identities on your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=806"
  },
  {
    "text": "associated with the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=808"
  },
  {
    "text": "You'll use this data for verifying access ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=810"
  },
  {
    "text": "on the recipient devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=812"
  },
  {
    "text": "Finally, fulfilling this action ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=815"
  },
  {
    "text": "will send the universal link in Messages.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=816"
  },
  {
    "text": "This example shows how to handle ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=820"
  },
  {
    "text": "the update participants action.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=822"
  },
  {
    "text": "Retrieve the collaboration identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=825"
  },
  {
    "text": "from the action's metadata.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=826"
  },
  {
    "text": "This is the identifier you fulfilled ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=829"
  },
  {
    "text": "while handling the start action.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=830"
  },
  {
    "text": "Next, retrieve the participant data to store on your servers ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=833"
  },
  {
    "text": "using the action's addedIdentities property.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=837"
  },
  {
    "text": "Each identity has a Data property called a root hash.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=841"
  },
  {
    "text": "This is the data you should store on your server ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=845"
  },
  {
    "text": "for later use.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=846"
  },
  {
    "text": "Lance will go over more of the details ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=849"
  },
  {
    "text": "about this property in the Verifying Access section.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=850"
  },
  {
    "text": "Set up another server request, this time to add ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=856"
  },
  {
    "text": "the participants to the collaboration ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=858"
  },
  {
    "text": "with the target identifier.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=860"
  },
  {
    "text": "And just like before, send the request to your server, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=863"
  },
  {
    "text": "and fulfill or fail the action.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=866"
  },
  {
    "text": "This time, the fulfill method does not take any parameters.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=869"
  },
  {
    "text": "Now that you've set up the collaboration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=874"
  },
  {
    "text": "your app has everything it needs to grant immediate access ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=876"
  },
  {
    "text": "to the recipients of the message.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=879"
  },
  {
    "text": "I'll hand it over to Lance to show you how to do that! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=882"
  },
  {
    "text": "Lance: Thanks, Devin. In this section, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=884"
  },
  {
    "text": "I'll show how to provide immediate access ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=887"
  },
  {
    "text": "to the recipients using the identity data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=889"
  },
  {
    "text": "you stored on your server in the previous step.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=892"
  },
  {
    "text": "The rootHash property on SWPersonIdentity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=896"
  },
  {
    "text": "is used to do this verification.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=898"
  },
  {
    "text": "A rootHash is a secure value used to uniquely identify ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=902"
  },
  {
    "text": "a participant on their devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=905"
  },
  {
    "text": "In order to perform verification, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=908"
  },
  {
    "text": "you'll need to understand how to compute a root hash.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=911"
  },
  {
    "text": "I'll take you through that now.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=914"
  },
  {
    "text": "When a collaboration message is sent, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=916"
  },
  {
    "text": "it's actually sent individually to each of a person's devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=918"
  },
  {
    "text": "Messages identifies each device ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=924"
  },
  {
    "text": "using a cryptographic public key.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=926"
  },
  {
    "text": "Since the goal is to allow access ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=929"
  },
  {
    "text": "only on this set of devices, the root hash is derived ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=931"
  },
  {
    "text": "from the set of public keys registered to each recipient.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=935"
  },
  {
    "text": "The root hash is the root node of a data structure ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=939"
  },
  {
    "text": "called a Merkle tree.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=942"
  },
  {
    "text": "A Merkle tree is a binary tree that is built ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=945"
  },
  {
    "text": "by performing a sequence of hashing operations.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=947"
  },
  {
    "text": "In order to derive an identity for the user based on their ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=951"
  },
  {
    "text": "public keys, the keys are used as the leaves of this tree.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=954"
  },
  {
    "text": "The hashing algorithm used in the Merkle tree ensures ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=959"
  },
  {
    "text": "that the root node can only be computed from that set of keys.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=962"
  },
  {
    "text": "In this example, this user has three devices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=967"
  },
  {
    "text": "and three public keys.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=971"
  },
  {
    "text": "The keys will be unique for each collaboration identifier ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=975"
  },
  {
    "text": "provided by your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=978"
  },
  {
    "text": "using a process called key diversification.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=979"
  },
  {
    "text": "To prevent tracking the number of devices registered to a user, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=984"
  },
  {
    "text": "the set is padded with random keys up to a fixed size.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=988"
  },
  {
    "text": "The leaf nodes of the tree are created by hashing ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=991"
  },
  {
    "text": "the padded set of diversified keys.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=994"
  },
  {
    "text": "The SHA256 algorithm is used for the hashing operations ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=998"
  },
  {
    "text": "in this tree.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1001"
  },
  {
    "text": "Then, each pair of leaf nodes are concatenated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1004"
  },
  {
    "text": "and then hashed to derive their parent nodes.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1007"
  },
  {
    "text": "This process is repeated with the parent nodes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1011"
  },
  {
    "text": "and repeated again until a single root node remains.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1016"
  },
  {
    "text": "This is the root hash used to uniquely represent ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1020"
  },
  {
    "text": "this recipient's identity across their devices.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1023"
  },
  {
    "text": "Notice that it's possible to generate a root hash ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1029"
  },
  {
    "text": "using a subset of the nodes from a complete Merkle tree.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1032"
  },
  {
    "text": "The root hash in this tree can be reproduced using just ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1037"
  },
  {
    "text": "the hashes H4, 7, and 11, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1040"
  },
  {
    "text": "along with the diversified public key P3.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1045"
  },
  {
    "text": "First, hash the public key to get the missing leaf node H3.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1049"
  },
  {
    "text": "Use H3 and H4 to generate H8.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1055"
  },
  {
    "text": "Use the given H7 node with H8 to generate H10.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1059"
  },
  {
    "text": "And finally, H10 and H11 produce the root hash.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1064"
  },
  {
    "text": "It's important to note that you can prove the public key P3 ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1069"
  },
  {
    "text": "was used to generate a given root hash, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1073"
  },
  {
    "text": "without needing to reconstruct the entire tree.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1075"
  },
  {
    "text": "The subset of nodes needed to do this is called ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1079"
  },
  {
    "text": "a proof of inclusion.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1081"
  },
  {
    "text": "Verification begins when a universal link ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1085"
  },
  {
    "text": "is opened in your app.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1088"
  },
  {
    "text": "To do this, you first need to check ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1090"
  },
  {
    "text": "that the link is collaborative.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1092"
  },
  {
    "text": "SWCollaborationHighlight represents a collaborative link ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1095"
  },
  {
    "text": "and is retrieved from SWHighlightCenter.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1098"
  },
  {
    "text": "Use that collaboration highlight ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1102"
  },
  {
    "text": "to generate the proof of inclusion.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1104"
  },
  {
    "text": "To represent a proof of inclusion, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1108"
  },
  {
    "text": "use a class called SWPersonIdentityProof.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1111"
  },
  {
    "text": "To perform verification, you'll first generate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1115"
  },
  {
    "text": "this object along with a cryptographic signature ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1117"
  },
  {
    "text": "to send to your server.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1120"
  },
  {
    "text": "Retrieve the proof using the getSignedIdentityProof method ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1123"
  },
  {
    "text": "on SWHighlightCenter.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1126"
  },
  {
    "text": "It takes an SWCollaborationHighlight ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1128"
  },
  {
    "text": "and some arbitrary data to be signed by the device.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1131"
  },
  {
    "text": "Use the signature to ensure the request cannot be replayed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1137"
  },
  {
    "text": "by a bad actor to gain access to your collaboration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1140"
  },
  {
    "text": "The data could be a challenge you request from your server, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1145"
  },
  {
    "text": "or a nonce generated on the device.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1149"
  },
  {
    "text": "This example uses the challenge approach.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1153"
  },
  {
    "text": "The URL is passed to this method on your app's ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1156"
  },
  {
    "text": "UIApplicationDelegate.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1159"
  },
  {
    "text": "This URL is the universal link ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1162"
  },
  {
    "text": "associated with the collaboration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1164"
  },
  {
    "text": "The URL is used to fetch the associated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1168"
  },
  {
    "text": "SWCollaborationHighlight from the SWHighlightCenter.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1171"
  },
  {
    "text": "Next, I'll request the challenge from my server, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1176"
  },
  {
    "text": "and pass the data I get back ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1179"
  },
  {
    "text": "to the getSignedIdentityProof method on SWHighlightCenter, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1181"
  },
  {
    "text": "along with the highlight.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1186"
  },
  {
    "text": "This method returns a signed identity proof.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1190"
  },
  {
    "text": "I'll discuss what your server should do ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1193"
  },
  {
    "text": "to validate this data later on.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1195"
  },
  {
    "text": "Now I can send the signed proof to my server for verification.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1198"
  },
  {
    "text": "Finally, I update my user interface with the result.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1203"
  },
  {
    "text": "The app sends the proof to the server, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1209"
  },
  {
    "text": "along with the public key and the signed data.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1211"
  },
  {
    "text": "The data is signed using the elliptic curve ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1216"
  },
  {
    "text": "digital signature algorithm over the P-256 elliptic curve, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1218"
  },
  {
    "text": "using SHA256 as a hash function.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1223"
  },
  {
    "text": "Verify the signature on the data ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1227"
  },
  {
    "text": "using the public key in the identity proof.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1229"
  },
  {
    "text": "You can do this with most commonly used ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1232"
  },
  {
    "text": "encryption libraries.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1235"
  },
  {
    "text": "Once you have verified the signature, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1238"
  },
  {
    "text": "you can trust that the identity proof was sent ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1240"
  },
  {
    "text": "from the device associated with that public key.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1243"
  },
  {
    "text": "Next, you use the identity proof to recompute the root hash.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1246"
  },
  {
    "text": "Here is an example of what an SWPersonIdentityProof ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1252"
  },
  {
    "text": "would contain using the example tree we looked at before.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1255"
  },
  {
    "text": "Use it to reconstruct the root hash of a Merkle tree.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1259"
  },
  {
    "text": "The public key is P3.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1264"
  },
  {
    "text": "The inclusion hashes are H4, 7, and 11.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1266"
  },
  {
    "text": "A local key index of 2 indicates the position ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1272"
  },
  {
    "text": "of the public key in the tree.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1275"
  },
  {
    "text": "Here is an example implementation that reconstructs ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1279"
  },
  {
    "text": "a root hash from the properties on the proof.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1281"
  },
  {
    "text": "A recursive algorithm works nicely when working ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1286"
  },
  {
    "text": "with tree data structures, so that's what I've done here.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1288"
  },
  {
    "text": "On the initial invocation, pass in the hash of the public key, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1292"
  },
  {
    "text": "the set of inclusion hashes, and the public key index.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1297"
  },
  {
    "text": "Next, the first inclusion hash is pulled out.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1304"
  },
  {
    "text": "The public key index is checked to see if the key ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1309"
  },
  {
    "text": "is on the left or the right of its sibling.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1311"
  },
  {
    "text": "The selected hashes are concatenated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1316"
  },
  {
    "text": "in the correct order, and then hashed.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1318"
  },
  {
    "text": "Next, the consumed node in the inclusionHashes array ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1323"
  },
  {
    "text": "is removed, and the rest are passed ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1326"
  },
  {
    "text": "to a recursive call to this same function.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1329"
  },
  {
    "text": "The public key index is also updated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1334"
  },
  {
    "text": "so that it's ready for the next node in the tree.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1336"
  },
  {
    "text": "With this simple function, you can quickly compute ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1340"
  },
  {
    "text": "a root hash given an identity proof.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1343"
  },
  {
    "text": "The server can now check that this generated root hash ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1348"
  },
  {
    "text": "is in the list of root hashes the owner of the document ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1351"
  },
  {
    "text": "uploaded during sending.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1353"
  },
  {
    "text": "The hash is present in the list of known hashes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1356"
  },
  {
    "text": "so the server can grant access to the document.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1358"
  },
  {
    "text": "Now you can grant access to the document with confidence! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1362"
  },
  {
    "text": "To recap the steps you'll follow to verify an identity: ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1366"
  },
  {
    "text": "first, look up the collaboration highlight ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1369"
  },
  {
    "text": "for your content while handling its universal link.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1371"
  },
  {
    "text": "Next, sign some data and retrieve the proof of inclusion.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1375"
  },
  {
    "text": "Send the signed data and proof to your server.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1379"
  },
  {
    "text": "Verify the signature on the data.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1384"
  },
  {
    "text": "Using the proof of inclusion, generate the root hash.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1387"
  },
  {
    "text": "Finally, compare the root hash to the list of known identities ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1391"
  },
  {
    "text": "associated with that content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1394"
  },
  {
    "text": "Now that you know all about verifying access ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1399"
  },
  {
    "text": "to your collaboration links, I'll talk about ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1402"
  },
  {
    "text": "how to coordinate participant changes with Messages.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1404"
  },
  {
    "text": "When the participants in a Messages group change, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1408"
  },
  {
    "text": "and that group is collaborating together, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1411"
  },
  {
    "text": "a user can choose to propagate those changes to your app, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1413"
  },
  {
    "text": "right from a banner in the Messages thread.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1417"
  },
  {
    "text": "In this scenario, your app receives another ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1420"
  },
  {
    "text": "SWUpdateCollaboration ParticipantsAction ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1422"
  },
  {
    "text": "containing the added and removed identities.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1426"
  },
  {
    "text": "You'll use the same code you wrote to handle this action ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1430"
  },
  {
    "text": "when setting up a collaboration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1433"
  },
  {
    "text": "but you'll also need to handle removed participants.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1435"
  },
  {
    "text": "For removal, simply look up any account associated ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1440"
  },
  {
    "text": "with a removed identity and revoke their access.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1442"
  },
  {
    "text": "If no account is yet associated, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1446"
  },
  {
    "text": "simply delete the root hash from your database.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1449"
  },
  {
    "text": "Here's the implementation for ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1452"
  },
  {
    "text": "the update participants action that Devin went over earlier.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1454"
  },
  {
    "text": "This example uses ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1459"
  },
  {
    "text": "the removed identities property on the action ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1460"
  },
  {
    "text": "and passes them to a similar removal API request.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1464"
  },
  {
    "text": "Note that this code only shows handling removed identities, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1468"
  },
  {
    "text": "but a complete implementation should handle ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1473"
  },
  {
    "text": "both added and removed identities.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1474"
  },
  {
    "text": "And that's all you need to handle participant changes! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1478"
  },
  {
    "text": "Lastly, when changes are made to a collaboration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1482"
  },
  {
    "text": "your app posts notices about those changes ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1485"
  },
  {
    "text": "to be shown directly in Messages.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1488"
  },
  {
    "text": "There are a few types of supported notices ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1490"
  },
  {
    "text": "I'll go over in this section.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1493"
  },
  {
    "text": "Notices are displayed as a banner ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1495"
  },
  {
    "text": "right in the conversation where the link was shared.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1497"
  },
  {
    "text": "The banner includes a description of what changed, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1501"
  },
  {
    "text": "as well as who made the change.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1503"
  },
  {
    "text": "In this conversation, Charlie made edits ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1507"
  },
  {
    "text": "to the Baking Recipes document.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1509"
  },
  {
    "text": "Tapping the show button connects them ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1512"
  },
  {
    "text": "right back to the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1514"
  },
  {
    "text": "To represent a notice, the SharedWithYou framework ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1517"
  },
  {
    "text": "has a protocol named SWHighlightEvent.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1519"
  },
  {
    "text": "Highlight events are initialized with SWHighlights ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1524"
  },
  {
    "text": "retrieved from the SWHighlightCenter API.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1527"
  },
  {
    "text": "Messages supports several categories of events.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1531"
  },
  {
    "text": "A change event for content updates or comments, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1536"
  },
  {
    "text": "a membership event when a participant joins or leaves, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1540"
  },
  {
    "text": "a mention event when a user is mentioned in a collaboration, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1544"
  },
  {
    "text": "and a persistence event when content is moved or deleted.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1549"
  },
  {
    "text": "Here's an example showing how to post a change event ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1554"
  },
  {
    "text": "for an edit to a collaboration.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1556"
  },
  {
    "text": "Using the highlight center API, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1559"
  },
  {
    "text": "retrieve a collaboration highlight ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1562"
  },
  {
    "text": "for the target identifier.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1563"
  },
  {
    "text": "Remember, this identifier is one you defined during ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1566"
  },
  {
    "text": "the collaboration initiation, so your app should have this ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1569"
  },
  {
    "text": "available for use when a content change is made.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1573"
  },
  {
    "text": "Next, create a highlight change event instance.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1577"
  },
  {
    "text": "The initializer takes a highlight, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1581"
  },
  {
    "text": "and a trigger enum value; ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1583"
  },
  {
    "text": "in this case, set it to the edit type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1585"
  },
  {
    "text": "Finally, again using the highlight center, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1590"
  },
  {
    "text": "post the notice for that event.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1592"
  },
  {
    "text": "Similarly, for membership changes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1596"
  },
  {
    "text": "post a membership event, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1599"
  },
  {
    "text": "this time passing the addedCollaborator ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1601"
  },
  {
    "text": "or removedCollaborator trigger type.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1604"
  },
  {
    "text": "Next, if your app supports user mentions, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1609"
  },
  {
    "text": "you can post a mention event.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1612"
  },
  {
    "text": "Initialize a person identity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1615"
  },
  {
    "text": "with the root hash of the mentioned user.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1616"
  },
  {
    "text": "Recall that you associated a person identity ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1620"
  },
  {
    "text": "with a user account in your app while verifying access.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1622"
  },
  {
    "text": "Then, post the mention event in the same way, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1627"
  },
  {
    "text": "this time passing the mentioned identity as a parameter.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1631"
  },
  {
    "text": "This notice will only be shown in Messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1635"
  },
  {
    "text": "to the mentioned user.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1637"
  },
  {
    "text": "Finally, use the persistence event type ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1641"
  },
  {
    "text": "when content is moved, renamed, or deleted.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1644"
  },
  {
    "text": "Here, the renamed trigger type is used, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1649"
  },
  {
    "text": "to signify that the user changed the name of the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1652"
  },
  {
    "text": "And that is how your app can notify collaborators, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1657"
  },
  {
    "text": "and they will get those updates right in Messages.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1661"
  },
  {
    "text": "Devin: And with that, you're ready to integrate ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1666"
  },
  {
    "text": "your app's collaboration experience with messages ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1668"
  },
  {
    "text": "by following a few steps.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1670"
  },
  {
    "text": "Set up your content to be shared collaboratively, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1672"
  },
  {
    "text": "cryptographically verify participant access, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1675"
  },
  {
    "text": "keep track of participant changes, ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1678"
  },
  {
    "text": "and post notices in Messages to connect your users ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1680"
  },
  {
    "text": "right back to the content.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1683"
  },
  {
    "text": "Be sure to check out ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1686"
  },
  {
    "text": "the \"Enhance collaboration experiences with Messages\" video ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1687"
  },
  {
    "text": "to learn more about the new UI elements ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1691"
  },
  {
    "text": "you can display for collaborations.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1693"
  },
  {
    "text": "Lance: We can't wait to get collaborating with your apps! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1695"
  },
  {
    "text": "Devin and Lance, cryptographically signing off.",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1698"
  },
  {
    "text": "Devin: Thanks for watching! ",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1700"
  },
  {
    "text": "♪",
    "link": "https://developer.apple.com/videos/play/wwdc2022-10093/?time=1702"
  }
]