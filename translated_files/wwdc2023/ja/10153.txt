10153

♪ ♪

アラ：こんにちは、私の名前はアラ・シャシュキナで、国際化チームのエンジニアです。

私はあなたの言語を手伝うためにここにいます。

今日、私たちは文法的合意の力を解き放ちます。

ソフトウェアの言語は、それとの日常的な相互作用に影響を与えます。

アプリの単語は重要です。

ソフトウェアで言語を扱うことは、特にその言語を話さない場合、難しい場合があります。

2021年には、アプリの文法的合意に役立つ新しいAPIをFoundationに導入しました。

今日は、文法的により正しく、より良い響き、より包括的な自然言語を通じて、アプリの異なるレベルのユーザーエクスペリエンスのロックを解除するFoundationの新機能を紹介したいと思います。

では、飛び込みましょう。

文法的な合意を扱うことが重要であると考える理由の非常に短い要約から始めます。

2021年以降にサポートを追加した言語で、さまざまな例を紹介します。

文法的な合意空間で新しいAPIについて話し、依存関係合意を導入します。

私たちはさらに一歩進んで、アプリの言語をより文法的に正しいだけでなく、より包括的にするにはどうすればよいかと自問しました。

文法は、アプリを構築するときに心配すべきものではありません。

私たちは、うまく設計されたAPIが言語の複雑さを緩和し、拡張に役立つと信じています。

UIの豊かで文法的に正しい単語は、ユーザーエクスペリエンスを完璧で楽しいものにします。

異なる言語は、独自の課題を提示します。

この言語の複雑さはすべて、新しいAPIを設計する際に考慮するものです。

私たちの目標は、そのすべてをシンプルで使いやすいインターフェースに詰め込むことです。

文法的合意がさまざまな言語でシステム全体のユーザーエクスペリエンスをどのように向上させるかを簡単に見てみましょう。

2021年に導入された新しいAPIでは、ユーザーの優先アドレス用語と、屈折可能な範囲内の他の単語に基づいて変更する必要がある単語の範囲を指定できます。

ユーザーが女性的な住所用語を選択した場合、iPhoneは彼女が初めて電話を設定するときにスペイン語で女性的な設定で彼女に挨拶します。

昨年、さらに3つの言語がスペイン語に加わりました。

フランス語を話すユーザーは、住所の用語を選択すると、よりパーソナライズされた体験を楽しむことができます。

システム全体のソフトウェアは、Notesアプリのこの例のように、それを反映するように単語を変更します。

パーソナライズされた文字列は、システムエクスペリエンス全体に浸透しています。

電話の設定、共有メモの操作、またはカレンダーの管理、言語は、イタリア語またはブラジルポルトガル語で、ここと同じように、あなたの設定に合わせて適応しています。

今年は、ヨーロッパのポルトガル語とドイツ語の2つの新しいロケールに文法合意のサポートを追加しました。

さて、今年の財団の文法合意の新機能について話しましょう。

言語は複雑ですが、優れたAPIはそうではありません。

多くの場合、UI内の単語は別の単語に基づいて形式を変更する必要があります。

あなたがそれを視覚化するのを助けるために、私たちの食品注文アプリの例をご案内しましょう。

これはスペイン語です。

スペイン語では、形容詞は彼らが説明する名詞と一致する必要があります。

ここでは、食品サイズ「pequeño」は、それが「ensalada」と説明する食品と一致する必要があります。

これは、スピーチの特定の部分間で単語の一致が起こる他の言語でも非常に一般的なユースケースです。

そして、これらの単語はUIで分離されているため、この種の契約を処理するのは簡単ではありません。

このタイプの依存関係契約を簡単に修正する新しいAPIを作成しました。

修正は非常に簡単で、コードの変更はほとんど必要ありません。

ここでは、食品名「ensalada」と一致するために、食品サイズ「pequeño」を含む文字列が欲しい。

今年は、LocalizationOptionsの概念に新しいプロパティを導入します。これにより、文法的合意に影響を与えるオブジェクトを指定できますが、引数のように文字列にフォーマットされていません。

同意したい文字列値、この場合は「ensalada」にlocalizedPhraseの概念を使用します。

最後に、conceptWithConceptで抑揚が必要な単語に注釈を付ける必要があります。

ここでの値1は、概念配列の最初のオブジェクトとの文法的な合意を求めていることを意味します。

1ベースのインデックス作成を使用することに注意してください。

agreeWithConcept属性は今年も新しいですが、アプリが古いデバイスで実行されていても使用できます。

その場合は、単に属性を無視します。

これらの変更を導入したので、UIを見てみましょう。 では、UIを見てみましょう。

「Pequeño」という言葉が「pequeña」に変わったことを観察してください。

これは、スペイン語で「ensalada」を記述するときに使用する正しい形式です。

それでは、言語の強化が必要な他の場所を見てみましょう。

「私たちのサラダにはレタス、チーズ、トマト、ハムが含まれています」という文では、スペイン語の「nuestro」と「hecho」はどちらも名詞「ensalada」と一致する必要があります。

幸いなことに、文字列内で文法的な合意を促進するだけでよいので、コードの変更は必要ありません。

まず、inflect属性で注釈を付けて、「ニュエストロ」を食べ物に同意させましょう。

引数を持つブロックでinflect属性を使用すると、すべての単語が文法的に引数と一致するようにします。

しかし、「ヘチョ」という、私たちが屈折する必要があるもう1つの単語があります。

曖昧さを助けるために、屈折ブロックをできるだけ短く保つようにしているので、屈折で「hecho」に注釈を付けることはできません: true。

今年は、agreeWithArgumentという別の新しい属性を導入します。

食品名の値を渡すことによってコードベースを変更する必要があるagreeWithConceptとは異なり、agreeWithArgument属性はコードの変更を必要とせず、inflect属性との合意を容易にする簡単な方法です。

agreeWithArgumentを使用して、「hecho」が文字列内の他の場所にある引数に同意する必要があることを示すことができます。

ここで、値1は、単語が文字列の最初の引数と一致するようにしたいことを意味します。

これらの変更を加えたら、UIをもう一度見てみましょう。

現在、両方の単語は「ensalada」と文法的に一致するようにフォーマットされており、ローカリゼーションで完全に正しいスペイン語を使用しています。

次に、似ているが、まだ異なる例を見てみましょう。

これはフランス語です。

フランス語では、指示形容詞は、彼らが説明する名詞と一致する必要があります。

agreeWithConceptとinflect属性を適用したため、サイズと数量のボタンはすでにスペイン語で固定されていることに注意してください。

この実証的なケースをフランス語で修正しましょう。

修正は本当に簡単です。

形容詞と引数の両方を屈折：真のブロックでラップし、エンジンに魔法をかけさせます。

出来上がり、文法的に正しい食べ物はちょうどより良い味がします。

要約すると、依存関係契約は、彼らが依存する他の単語に基づいて単語を変更することを可能にします。

単語が同じ文内に存在しない別の単語やフレーズに同意したい場合は、agreeWithConcept属性を使用します。

単語が別の単語やフレーズに同意し、両方が同じ文字列にある場合は、adincreeWithArgument属性を使用します。

それでは、インクルーシブ言語の新しいAPIについて話しましょう。

カフェアプリをもう一度見てみましょう。 

昼食に小さなサンドイッチと小さなジュースを選んで注文したとしましょう。

私たちは本当にお腹が空いているので、配達状況を確認したいです。

トニーはすぐに私たちの注文を配達するようです。

ユーザーインターフェイスをローカライズするときは、ジェンダーニュートラルな言語を使用することをお勧めします。

同時に、UIでジェンダー言語を使用することは、より個人的に感じられ、より自然に聞こえます。

彼と彼の代名詞を使うトニーのために、この文字列をパーソナライズしてみましょう。

まず、配達人のモデルを変更して、希望する住所期間を含める必要があります。

それを表すために、今年新しいTermOfAddressタイプの新しいプロパティを追加します。

次に、住所の用語を男性的、女性的、または中立のいずれかに設定できます。

私たちはトニーに彼と彼の代名詞を使いたいので、男性を選びます。

次に、代名詞を変更する必要がある文字列に注釈を付ける必要があります。

これを行うには、新しい referentConcept 属性を使用します。

値1は、代名詞の参照がLocalizationOptionsの最初の概念であるべきであることを示します。

任意の三人称人称代名詞にreferentConceptを適用することができ、エンジンはそれを何に置き換えるかを把握します。

それでは、文字列を反転させるときに、termsOfAddressの抑揚概念を渡しましょう。

文法的な合意のために以前に行ったように、これをLocalizationOptionsの概念プロパティに割り当てます。

これで英語のUIがどのように変わるか見てみましょう。

「彼ら」と「彼ら」がどのように「彼」と「彼」に置き換えられたかに注目してください。

同じローカライズされた文字列を使用して、他の人を参照することもできます。

彼女と彼女の代名詞を使う人を参照したい場合は、女性用語のアドレスを使用してください。

そして、彼らとそれらの代名詞を使用して誰かを参照したい場合は、中立的なアドレス用語を使用してください。

ローカライズされた住所用語を使用して、代名詞をさらにパーソナライズすることもできます。

ローカライズされた住所用語では、適用される言語、この場合は英語を指定する必要があります。

そして、新しいMorphology.Pronounタイプを使用して使用したいすべての代名詞形式をリストします。

英語では、5つの代名詞をリストアップする必要があります。

各代名詞は、ターゲット言語の代名詞形式と、いつ使用すべきかを記述する形態で構成されています。

代名詞の構築に関する詳細な手順については、ドキュメントを参照してください。

このAPIを使用することは、アプリのパーソナライゼーションを強化する素晴らしい方法です。

このテクニックを使用して、iOSのローカライズされた文字列で使用される言語を調整します。

それでは、これらすべての新機能がデモでライブでどのように機能しているかをお見せしましょう。

みんなが今、私たちのカフェアプリからおいしい食べ物に飢えていることを願っています。

スペイン語で起動させてください。

メニューに何があるか見てみましょう。

今回はピザを注文しましょう。

これは先ほど説明したのと同じ文法の問題です。

スペイン語では、決定語と形容詞は名詞と一致する必要があります。

2つの単語を互いに一致させるために、inflect:真の属性を使用できます。

では、この簡単な修正を「ヌエストロ」と「ピザ」という言葉に適用しましょう。

まず、この文字列を文字列カタログで見つけましょう。

「Nuestro」を「ピザ」という議論に一致させるために、両方を屈折:真のブロックで囲みます。

次に、同じ文で「ピザ」に同意する必要がある形容詞「hecho」も修正しましょう。

ここでは、agreeWithArgument属性を使用したいと考えています。

私たちは一般的に、曖昧さを助けるために、屈折:真のブロックをできるだけ短く保つようにしています。

「hecho」は屈折ブロックから離れているため、今回は「agreeWithArgument」属性を使用する必要があります。

ここでの1の値は、「hecho」が文字列の最初の引数、この場合は「pizza」に同意したいことを示しています。

アプリをもう一度実行しましょう。

さて、これはスペイン語での素晴らしいローカリゼーション体験のように見えます。

それでは、新しいagreeWithConcept属性を使用して、ここで食品のサイズを修正する方法を見てみましょう。

ピザは女性的なので、それを説明する形容詞は「pequeña」であるべきです。

私たちはすでに食品サイズのローカライズされた名前を定義しました。

契約を修正するために、localizedNamesを特定の食品と一致する方法に変換したいと考えています。

次に、SIZE_BUTTONをフォーマットするときに食品名を渡します。

ここでは、LocalizationOptions、コンセプトに新しいプロパティを定義します。

概念は、文法的抑揚に影響を与えるオブジェクトですが、引数のように文字列に補間されません。

ここでは、localizedPhraseの概念を使用して、文法的に同意したい文字列を挿入します。

そして、文字列を初期化するときに定義されるオプションを使用することを忘れないでください。

次に、スペイン語の文字列カタログを変更したいと思います。

新しい属性agreeWithConceptでこれに注釈を付けたい。

ここで1の値は、この引数がLocalizationOptionsに渡した最初の概念に同意したいことを示しています。

最後に、ユーザーが必要なピザのサイズを選択するFoodSizeViewを新しい方法で更新しましょう。

では、アプリをもう一度実行して、最後にピザを注文しましょう。

驚くべきことに、私たちの食べ物のサイズはここのピザと正しく一致しています。

スペイン語で男性的なサンドイッチを試してみましょう。

これは素晴らしく見えます。

では、英語でアプリを起動して、最後にピザを注文しましょう。

今回は巨大なものを選びます。 

そして、それを2つにしましょう。なぜですか？

トニーはすぐに私たちの注文を配達するようです。

ここでのジェンダーニュートラルな言語は素晴らしいですが、私たちはたまたまトニーが彼の代名詞を彼/彼/彼に設定したことを知っています。

これは私たちが簡単に修正できるものです。

そのために、配達人のモデルを拡張して、preferredTermsofAddressを含めましょう。

そして、トニーのインスタンスを拡張し、彼が男性代名詞を使用することを好むことを示しましょう。

次に、文字列自体を変更します。

ここでは、配達人の用語に応じて「彼ら」を代名詞に置き換えたいと思います。

これを行うには、新しい referentConcept 属性を使用します。

ここで1の値は、代名詞「they」の参照元がLocalizationOptionsで渡された最初の概念でなければならないことを意味します。

これは、この文の任意の三人称人称代名詞に適用できます。

次に、LocalizationOptionsの概念としてtermsOfAddressを渡したいと思います。

deliveryMessageのローカリゼーションオプションを初期化しましょう。

ここでは、termsOfAddressの概念を使用して、文法的な合意に使用できるtermsOfAddressを提供することもできます。

そして最後に、文字列を初期化するときに新しいLocalizationOptionsを使用しましょう。

では、もう一度アプリを実行してみましょう。

オーケー、巨大なピザ、2つ。

3つにしましょう。

契約を適用したので、これははるかに個人的に見えます。

今年はFoundationに多くの素晴らしい新機能があり、今日あなたのアプリで試す準備ができています。

Inflect: trueは今年さらに多くの言語をサポートしています。

私たちの新しい依存関係契約APIは、同じ文字列内、または完全に文脈外の単語に同意するのに役立ちます。

最後に、Markdownの新しいtermsOfAddress抑揚コンセプトとrefentConcept属性は、言語をよりパーソナライズするのに役立ちます。

言語レベルのサポートについては、ドキュメントを参照してください。

これらの新機能を気に入っていただければ幸いです。

私たちは、彼らがすぐにあなたのアプリの言語を美しくするのを見るのを楽しみにしています。

ありがとうございます。

ああ、私のピザが届きました。ありがとう、トニー。

♪ ♪