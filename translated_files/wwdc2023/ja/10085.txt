10085

♪まろやかなインストゥルメンタルヒップホップ♪

♪

こんにちは、「空間コンピューティングのクイックルックを発見」へようこそ。

私の名前はユセフで、ARクイックルックチームのエンジニアです。

今日は、xrOSのクイックルックのすべての機能と、それを使用してプラットフォーム上のアプリやウェブサイトの新しいエクスペリエンスのロックを解除する方法について説明します。

そのすべてに入る前に、まずクイックルックとは何かを見てみましょう。

クイックルックは、iOS、macOS、そして現在はxrOSでファイルを簡単にプレビューおよび編集できるシステムフレームワークです。

クイックルックには、ビデオのトリミングやPDFや画像のマークアップなどの強力な編集機能が付属しています。

また、ファイルの安全で安全なアクセスを処理するので、アプリで信頼できないファイルを開くことを心配する必要はありません。

クイックルックは、Appleのプラットフォーム全体の多くの場所に表示されます。

iOSでは、メッセージスレッドから添付ファイルを開くたびに表示されます。

macOSでは、Finderまたはデスクトップから選択したファイルのスペースバーを押すたびにクイックルックに入ります。

クイックルックは、xrOS上のファイルバックアップコンテンツのシステムビューアです。

そして、iOSやmacOSと同様に、xrOSアプリはクイックルックを活用して、機能豊富なファイルの表示と編集を簡単に得ることができます。

それがどのように見えるか見てみましょう。

最近、アパートのリフォームに取り組んでおり、アプリを使ってそのプロジェクトの進捗状況を追跡し、チームと協力しています。

私が一緒に働いているインテリアデザイナーの一人が、彼が家のために持っているいくつかのアイデアが入ったフォルダを送ってくれました。

そのフォルダをここで開いたので、彼が何を思いついたか見てみましょう。

提案されたリビングルームのUSDZモデルがあるようです。

それを開けましょう。

これを行うには、ファイルをピンチしてドラッグして、任意のアプリケーションの外にドロップします。

USDZファイルをドロップすると、ドロップした場所に3Dクイックルックプレビューが表示されます。

そして、私はすぐにそれと対話し始めることができます。

ピンチとドラッグのジェスチャーを使用して、モデルを回転させて、美しい露出したレンガのファサードをよりよく見ることができます。

リビングルームを詳しく見るために、モデルを拡大してスケールアップします。

私のデザイナーも家の周りの近所の写真を送ったようです。

最後に、ここに家のために計画されている機能のリストを含む文書があるようです。

これらの多くは素晴らしく見えますが、この最後のものについてはよくわからないので、後でそれに戻るためにメモを残しておきます。

ウィンドウの上部にあるメニューを開き、マークアップを選択すると、マークアップパレットが表示されます。

戻りたいアイテムをすばやく丸で囲みます。

アプリケーションからファイルをドラッグして、そのアプリの外でプレビューすることができました。

私たちは複数のファイルでこれを行い、ソースアプリケーションと一緒にそれらをすべて見ました。

クイックルックでファイルを表示するこの新しい方法は、ウィンドウクイックルックと呼ばれます。

このセッションでは、このプレゼンテーションスタイルと、アプリやウェブサイトがそれを採用する方法について詳しく学びます。

次に、アプリケーション内で直接クイックルックプレビューを表示する方法について説明します。

しかし、まず、Windowed Quick Lookを深く掘り下げてみましょう。

ウィンドウ付きクイックルックを使用すると、アプリケーションの外部にクイックルックプレビューを表示できます。

これは、アプリと一緒にファイルコンテンツを表示できるようにしたいノンブロッキング体験に最適です。

ウィンドウのクイックルックプレビューは別のアプリでホストされているため、それらのプレビューを持続させながらアプリケーションを閉じることができます。

Windowed Quick Lookは、USDZとRealityファイルに裏打ちされた3Dモデルのより豊かな視聴体験も提供します。

アプリケーションとは無関係に3Dコンテンツをスケーリングして配置できます。

また、環境を暗くし、他のすべてのシーンを非表示にする3Dモデルをスケーリングして、3Dコンテンツだけに集中することもできます。

クイックルックウィンドウに表示される特定のファイルタイプは、SharePlayエクスペリエンスを提供するため、ファイルを共有してFaceTimeで表示できます。

SharePlayで3Dコンテンツを共有する場合、Quick Lookは3Dモデルの向き、スケール、アニメーションを同期します。

SharePlayで画像を共有すると、その画像を他の人と一緒にマークアップすることができます。

クイックルックでSharePlayingファイルは、グループとファイルを共同作業する簡単で簡単な方法を提供します。

アプリケーションとウェブサイトの両方が、クイックルックウィンドウにコンテンツを表示し、それが提供しなければならない多くの利点を利用することができます。

まず、アプリがWindowed Quick Lookをどのように提示できるかを見てみましょう。

アプリは、URLを含むドラッグソースを提供することで、クイックルックウィンドウにファイルを表示できます。

ドラッグアンドドロップインタラクション中、ドロップターゲットがアプリの外にある場合、システムは提供されたURLをコピーしてクイックルックウィンドウに表示します。

提供されたURLがiCloudなどのリモートデスティネーションでホストされているファイルを指している場合、システムは最初にそれをダウンロードします。

提供されたファイルのコピーが提示されるため、提示されたファイルに作成された画像のマークアップなどの編集は、提供したURLに書き戻されないことに注意してください。

これを実際に見るには、Xcodeに行きましょう。

アプリにドラッグサポートを追加する前に、アプリの概要を簡単に説明しましょう。

このアプリでは、プロジェクトの進捗状況を確認し、他のチームメンバーが共有したファイルのリストを表示できます。

ここには、FileViewsを表示するリストビューがあります。

各ファイルをドラッグできるようにしたいので、各FileViewをドラッグソースに変換する必要があります。

これを行うには、onDrag修飾子をFileViewに追加します。

onDrag修飾子はNSItemProviderを期待しているので、そのFileViewに表示されているファイルのURLを含むアイテムプロバイダを返します。

シミュレータでアプリを構築して実行すると、ファイルビューからドラッグアウトして、そのファイルを新しいクイックルックウィンドウに表示できるようになりました。

アプリを閉じても、そのファイルのプレビューを表示することもできます。

ほんの数行のコードを追加することで、アプリ内でドラッグアンドドロップを有効にし、コンテンツを別のウィンドウで表示できるようにし、アプリを自由に使用できるようにしました。

では、ウェブサイトでこれを行う方法を見てみましょう。

iOS 12以降、ウェブサイトはAR属性でリンクをマークアップすることで、iPhoneとiPadのARクイックルックで3Dコンテンツにリンクして表示することができました。

xrOSでマークアップされた3Dコンテンツへのリンクを開くと、Safariは新しいクイックルックウィンドウに3Dコンテンツが表示されます。

iOSとiPadOSでARコンテンツのリンクをすでにサポートしているウェブサイトでは、この動作はxrOSに引き継がれますが、追加の作業は必要ありません。

xrOSは、コンテンツのスケーリングを無効にするなどのカスタマイズオプションも尊重します。

これらのカスタマイズオプションの詳細については、WWDC19の「ARクイックルックのアドバンス」セッションを参照してください。

Safariから3Dコンテンツを表示するようにウェブサイトを設定していない場合は、このようにリンクをマークアップするだけです。

リンクまたはアンカー要素にrel="ar"を追加すると、Safariはタップでナビゲートしません。

代わりに、その3Dファイルはウェブサイトと一緒にクイックルックウィンドウに表示されます。

サファリに行って、これをチェックしてみましょう。

ここでSafariでARクイックルックギャラリーページを開いています。

このページからたくさんの3Dモデルがリンクされているので、それらのいくつかを開きましょう。

このティーポットへのリンクをタップすると、その3Dモデルをクイックルックウィンドウでダウンロードして表示します。

ダウンロードすると、モデルが表示されます。

このマグカップへのリンクをタップすると、ティーポットとサファリの近くに表示されます。

これは、それがあなたに合っているかどうかの感覚を得るために、共有スペースに製品を表示して配置したいかもしれない電子商取引サイトにとって本当に素晴らしいです。

クイックルックウィンドウでファイルを表示して、アプリの外でプレビューしました。

アプリ内で直接ファイルをプレビューしたいユースケースがいくつかあります。

アプリ内のクイックルックコンテンツの表示は、一部のURLをSwiftUIのquickLookPreview機能に渡すのと同じくらい簡単です。

quickLookPreviewを使用して表示すると、プレビューはビューのコンテンツの上にシートとして表示されます。

提示されたプレビューよりもカスタマイズオプションを増やしたい場合は、代わりにここでQLPreviewControllerを使用できます。

iOSアプリをxrOSに持ち込む場合、quickLookPreviewまたはQLPreviewController APIの既存の使用は無料で引き継がれます。

シミュレーターに飛び乗って、プロジェクトトラッカーアプリでこれをどこで活用できるか見てみましょう。

私は、承認のために住宅所有者に送る前に、私のチームが持っているいくつかの新しいデザインをレビューできる見解を持っています。

現在、ファイルのリストを見ることができますが、実際にはどのファイルもプレビューできません。

Xcodeに行って、これを修正できるかどうか見てみましょう。

これが今の私の見解です。

アプリケーションでファイルを直接プレビューするには、まずQuickLookをインポートします。

次に、プレビューしたいすべてのファイルと最初に選択したい特定のファイルを渡すSwiftUI quickLookPreview機能を追加します。

これを実行して、何が得られるか見てみましょう。

アプリに戻ると、このビューを選択すると、プレビュー付きのシートがアプリ内に直接表示されます。

ツールバーのナビゲーションコントロールを使用してファイルを循環させ、住宅所有者に送信する前にすべてが問題ないことを確認することができます。

アプリ内で直接ファイルプレビューを表示することは、いくつかのURLをquickLookPreview機能に渡すのと同じくらい簡単でした。

プラットフォームでクイックルックの両方のフレーバーをカバーしたので、サポートされているプレビューでファイルタイプに触れてみましょう。

クイックルックは、画像、ビデオ、PDF、USDZファイルなど、最も一般的なファイルタイプをサポートしています。

クイックルックに表示されている空間画像やビデオは、写真と同じように美しく見えます。

そして、それはxrOSのクイックルックの簡単な外観です。

さて、今日行ったすべてのことをまとめましょう。

クイックルックがアプリを提供できる豊富なプレビューと編集機能について話しました。

次に、Windowed Quick Look、アプリがクイックルックを使用してコンテンツをプレビューする新しい方法、およびアプリケーションと一緒にコンテンツを表示するためのマルチプレビューサポート、体積没入型3Dコンテンツ表示、SharePlayサポートなど、Windowed Quick Lookが提供する機能について議論しました。

次に、アプリケーションがワークフローを合理化し、ドラッグアンドドロップのサポートを追加してクイックルックウィンドウを活用する方法と、Webサイトがクイックルックウィンドウを活用してSafariと一緒に3Dコンテンツを表示する方法について説明しました。

また、アプリがSwiftUIで独自のシーン内でクイックルックコンテンツを表示するのがいかに簡単かを見ました。

すでにクイックルックを使用しているアプリを持参する場合は、このプラットフォームで素晴らしいクイックルック体験を得るために、ほとんど仕事をする必要はありません。

同様に、すでにARコンテンツにリンクしているウェブサイトでは、その動作も無料で引き継がれます。

クイックルックは、シンプルで強力で安全なファイル表示体験をアプリに提供することができ、xrOSでクイックルックを使用して構築したものを見るのが待ちきれません。

♪