10037

♪ ♪

リチャード:こんにちは、私はリチャードです。

今日は、円グラフ、選択、スクロールなど、スウィフトチャートのエキサイティングな新機能についてお話しできることを嬉しく思います。

円グラフから始めましょう。

Swift Chartsは、あらゆる種類のデータビジュアライゼーションを作成するための構成可能でカスタマイズ可能なビルディングブロックを提供します。

今日、スウィフトチャートのファミリーに新しいのは、美味しくて美しい円グラフです。

円グラフは、シンプルで使い慣れた形状を介して、さまざまなカテゴリによって合計値がどのように作られているかを示しています。

例えば、これは私の友人のフードトラックのパンケーキ販売データを視覚化したチャートです。

円グラフには軸がなく、精度が重要ではないカジュアルな設定に最適です。

ウェッジがどのように完全な円を構成するかを広く理解することで、部分から全体への関係を視覚化するために直感的です。

人々が円グラフが好きな重要な理由の1つは、丸くて親しみやすい形だからです。

すでに慣れ親しんでいるマークベースの構成構文を使用して、円グラフを作成できます。

新しいマークタイプ、SectorMarkを導入します。

セクターマークは、パイのスライスを表します。

それは極地空間に位置しています。

この極ではなく、極座標系です。

セクターのサイズは、それが表す値に比例します。

半径に沿って、セクターの外観をカスタマイズできます。

内側の半径を増やすと、円グラフはドーナツチャートになります。

SectorMarkを使用すると、あらゆる種類の円グラフやドーナツグラフを簡単に作成できます。

例をお見せしましょう。

私たちの友人の国際的なパンケーキフードトラック事業は、昨年を通じて毎日の売上を大きく活性化させ、6つのスタイルのパンケーキを販売しました。

今年の夏、私は彼らが販売アプリを改善するのを助けるために別の挑戦をしました。

パンケーキのベストセラースタイルを視覚化するチャートから始めます。

そのために、アプリは現在、単純な積み重ねられた棒グラフを持っています。

それはBarMarkを持っていて、販売はX次元に沿って積み重ねられています。

カテゴリデータであるため、カテゴリは各スタックバーのフォアグラウンドスタイルとして反映されます。

このチャートは仕事を成し遂げますが、それを円グラフに変えて、画面上の利用可能なスペースを活用し、データを目立たせましょう。

私がする必要があるのは、BarMarkと引数xをSectorMarkと角度に切り替えることだけです。

それはとても簡単です!

SectorMarkでは、販売数量を表すために角度を使用します。

円グラフに指定する角度値は、自動的に完全な円に正規化されます。

スタイルのカスタマイズを適用することもできます。

angularInsetは、セクター間にギャップを作成するためにセクターに設定できます。

ここでは、セクターの角度インセットを1.5ポイントに設定したので、2つのセクター間のギャップはインセットの2倍、3ポイント幅です。

私はまた、私にきれいに丸みを帯びたパイ生地を与えるコーナー半径を設定しました。

それはほんの数行のコードですでに見事に見えます。

別の外観を試すには、このチャートをドーナツチャートに変えましょう。

内側の半径をパイの全半径の比率に設定しました。

私にとって、黄金比はちょうどよく見えますが、ドーナツの厚さが違うかもしれません。

販売されたすべてのパンケーキの中で、現在チャートの上に表示されている明確な勝者、カチャパがいます。

しかし、ドーナツチャートは中央が空洞なので、テキストをチャートの中央に移動したいです。

テキストをチャートの背景に入れました。

私はいくつかの位置計算を使用して、テキストがドーナツの穴の中央にあることを確認します。

今、それは見栄えの良いドーナツチャートです。

だから、それは円グラフとドーナツチャートです。

彼らはあなたのデータで印象を与える素晴らしい方法であり、大画面では絶対に素晴らしいです。

次に、選択から始めて、いくつかのチャートのインタラクティブ機能を深く掘り下げたいと思います。

チャートでインタラクティブ性を有効にすることで、追加の詳細を徐々に開示することができます。

インタラクティブ性は、人々がタッチなどのさまざまな形式の入力を使用して自然にデータを探索することを奨励します。

選択はチャートと通信するための直接的な方法であり、心拍数チャートのようなAppleが設計したチャートは、その完璧な例です。

軸に沿った点を選択すると、チャートには追加情報が表示されます。

このアイデアをパンケーキ販売アプリに持ち込もう。

アプリの1つのチャートは、2つの都市での各曜日の平均売上を視覚化します。

このチャートで値選択を有効にして、選択した日に販売されたパンケーキの数を示すポップオーバーを介して詳細な販売数を表示します。

これがチャートの定義方法です。各都市にはデータシリーズがあります。

シリーズの各要素には、曜日と売上数があります。

その後、線は都市名でスタイル設定されます。

すでにchartOverlay修飾子に精通しているかもしれません。これにより、SwiftUIビューをオーバーレイしてジェスチャーをキャプチャできます。

しかし、iOS 17では、新しいchartXSelection修飾子を使用できます。

それは私のためにすべてのジェスチャー認識を処理し、選択した値をバインディングに保存します。

選択修飾子は、X軸に沿った生の日付値を与えるので、折れ線グラフのデータポイントに一致するように計算されたプロパティを定義します。

値が選択されたときにポップオーバーを表示するようにチャートを拡張しましょう。

値が選択されると、選択インジケーターとして垂直ルールマークを追加します。

ルールマークがラインマークの後ろにとどまるように、Zインデックスをデフォルトの0値よりも低く設定しました。

では、選択インジケーターの上にポップオーバーを作りましょう。

カスタムSwiftUIビューを使用して注釈としてこれを行うことができます。

注釈は通常、チャート内に配置されますが、この場合、ポップオーバーはチャートの境界を越えて広がっています。

ここで、注釈のオーバーフロー解像度が必要です。

X軸では、ポップオーバーがチャートの水平境界を超えないようにチャートにフィットするようにします。

Y軸では、注釈がチャートのすぐ上にできるように、オーバーフロー解像度を無効にします。

選択バインディングと注釈付きのルールマークで、私は今、インタラクティブな折れ線グラフを持っています。

Swift Chartsは、ホバージェスチャーが値選択のデフォルトであるmacOSでの選択もサポートしています。

単一の値選択に加えて、このチャート選択修飾子のバリアントを使用すると、範囲を選択できます。

iOSでは、デフォルトは2本指のタップジェスチャーで、macOSではドラッグジェスチャーです。

Swift Chartsでは、選択用のカスタムジェスチャーを提供することもできます。ChartProxyは、ジェスチャーの場所に基づいて値を選択するのに役立ちます。

X座標とY座標のチャートを超えて、チャート値の選択は円グラフやドーナツチャートでシームレスに機能します。

セクターをタップしてハイライトするのはとても楽しいです。

したがって、選択はチャートの追加情報を明らかにすることでした。

インタラクティブ性のもう1つの重要な部分は、データをナビゲートすることです。

スクロールについて話しましょう。

1年間の毎日のパンケーキの売り上げを視覚化するチャートを作りたいです。

365日すべてを画面に収めるのは非現実的なので、スクロール可能でなければなりません。

スクロールを有効にするには、chartScrollableAxes修飾子を呼び出すだけです。

chartXVisibleDomainでは、時間間隔として30日間の表示ウィンドウを設定しました。

現在の可視ドメインでパンケーキの総売上を表示できるように、chartScrollPositionを使用して現在の日付をバインディングに保存します。

今、私は指を取ってスクロールすることができます。

プロットをスクロールできるだけでなく、軸の内容もスクロールし、バターのように滑らかです。

スクロールは、いくつかの異なる方法でカスタマイズできます。

例えば、スクロールして常に日付単位にスナップしたい。

これは私たちをスクロール行動に導きます。

ScrollTargetBehaviorは、SwiftUIとSwift Chartsに新しい追加で、スクロールビューのコンテンツを値に合わせることができます。

私が望んでいたスナップ動作のために、私は1日の最初の1時間と一致するように設定しました。

majorAlignmentは、スワイプ動作を定義することで、さらに一歩カスタマイズします。

ここでは、月の最初の日に設定して、スワイプしてチャートをページスルーすると、常に毎月1日に着陸します。

スクロール可能なチャートは、SwiftUIでビューをスクロールするための最新の機能強化のいくつかの上に構築されています。

詳細については、Beyond Scroll Viewsを必ずチェックしてください。

スウィフトチャートは、データを視覚化するための無限の可能性を提供します。

チャートとX座標とY座標を超えて、円グラフは現在、Appleが設計したチャートを作成するためのAPIファミリーの一部です。

円グラフはシンプルでありながら強力な視覚化です。

一部対全体のデータ関係を表すときに最もよく機能します。

選択やスクロールなどのインタラクティブ機能は、データの視覚化にまったく新しい次元を可能にし、データを探索する際にユーザーを運転席に置きます。

パイとドーナツチャートを焼いて楽しんでください。

♪ ♪