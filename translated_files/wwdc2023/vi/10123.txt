10123

♪ ♪

Aiswariya: Xin chào và chào mừng. Tên tôi là Aiswariya, và tôi rất vui được nói chuyện với bạn về việc đưa trò chơi của bạn lên Mac.

Phiên này là phiên đầu tiên trong loạt ba phần về cách đưa trò chơi cao cấp của bạn lên Mac.

Trong phiên thứ hai và thứ ba, các đồng nghiệp của tôi sẽ tập trung vào các công cụ và kỹ thuật để biên dịch đổ bóng của bạn và các phương pháp hay nhất khi kết xuất nguyên bản với Metal.

Bạn có mọi thứ bạn cần để mang đến trải nghiệm chơi game tuyệt vời với đồ họa tiên tiến của Apple Silicon Mac, hiệu suất tuyệt vời, âm thanh sống động, màn hình tuyệt đẹp và phần mềm giàu tính năng.

Với máy Mac phổ biến hơn bao giờ hết, chưa bao giờ có thời điểm tốt hơn để mang trò chơi của bạn đến với hàng triệu người chơi mới.

Chuyển trò chơi Windows của bạn sang Mac giờ đây nhanh hơn bao giờ hết.

Năm nay, Bộ công cụ chuyển đổi trò chơi mới cung cấp một môi trường mô phỏng để chạy trò chơi Windows hiện có, chưa được sửa đổi của bạn và bạn có thể sử dụng nó để nhanh chóng hiểu cách sử dụng tính năng đồ họa và tiềm năng hiệu suất của trò chơi khi chạy trên máy Mac.

Không mất vài tháng để hiểu được trò chơi của bạn trông như thế nào, âm thanh và cách chơi.

Bạn thấy tiềm năng trò chơi của mình ngay lập tức.

Chuyển trò chơi Windows của bạn sang một nền tảng hoàn toàn mới thường bao gồm nhiều bước trước khi bạn thấy cảnh đầu tiên của mình đang chạy, bao gồm biên dịch lại mã nguồn của bạn; chuyển đổi hàng nghìn trình đổ bóng tùy chỉnh từ HLSL; triển khai lại hệ thống con đồ họa của bạn; và chuyển đổi việc sử dụng âm thanh, đầu vào, hiển thị và

Với sự trợ giúp của Bộ công cụ chuyển đổi trò chơi, giờ đây bạn có thể thấy cảnh đầu tiên của trò chơi của mình chạy trên nền tảng sớm hơn nhiều.

Bộ công cụ chuyển đổi trò chơi bao gồm Bộ chuyển đổi bóng kim loại mới, bạn có thể sử dụng để tự động chuyển đổi tất cả các bộ đổ bóng GPU HLSL hiện có của mình sang Kim loại.

Với Metal Shader Converter, việc đưa shader và đồ họa của bạn lên Mac cũng mất ít thời gian hơn rất nhiều.

Bạn có thể giao hàng sớm hơn và vẫn có nhiều thời gian hơn để tận dụng các tính năng độc đáo của Mac và Apple Silicon.

Nhìn thấy trò chơi của bạn chạy ngay lập tức thậm chí có thể giúp bạn khi bạn sử dụng công cụ đa nền tảng để xử lý hầu hết các chuyển đổi của bạn.

Bạn có thể thấy tiềm năng của trò chơi của mình trước khi chuyển bất kỳ mã hoặc trình cắm nền tảng cụ thể nào mà trò chơi Windows của bạn đã thêm vào qua công cụ đa nền tảng.

Chuyển trò chơi của bạn sang Mac bắt đầu bằng việc đánh giá trò chơi của bạn, tiếp theo là biên dịch các bộ đổ bóng của bạn, kết xuất bằng Metal, chuyển đổi việc sử dụng đầu vào, âm thanh và hiển thị trò chơi của bạn và kết xuất HDR.

Bước đầu tiên là sử dụng Bộ công cụ chuyển đổi trò chơi để đánh giá trò chơi của bạn.

Môi trường của Bộ công cụ chuyển đổi trò chơi dịch các hướng dẫn Intel của trò chơi của bạn và việc sử dụng Windows API cho đầu vào bàn phím, chuột và bộ điều khiển; để phát lại âm thanh; để sử dụng mạng và hệ thống tệp; và tất nhiên, cho đồ họa.

Tất cả các tính năng đồ họa hiện đại, chẳng hạn như đường ống điều khiển GPU và hoạt động SIMD, và thậm chí các tính năng cũ hơn, chẳng hạn như tessellation và bộ đổ bóng hình học, đều được dịch.

Hãy nhìn vào điều này trong hành động.

Đây là cách một nhà phát triển như Bloober có thể sử dụng Bộ công cụ chuyển đổi trò chơi để kiểm tra bản dựng Windows DirectX 12 của "The Medium" của họ.

"The Medium" là một trò chơi gần đây được phát triển và phát hành bởi Bloober.

Bản phát hành Apple Silicon and Metal bản địa của họ là một trò chơi tuyệt vời, đẹp mắt, siêu thú vị để chơi.

Nó cũng hơi đáng sợ một chút, mang lại trải nghiệm âm thanh và đồ họa nhập vai cao cho người chơi.

Sau khi cài đặt bộ công cụ, họ sao chép bản dựng Windows của "The Medium" vào máy Mac của họ và khởi chạy nó từ một thiết bị đầu cuối.

Khi nó khởi chạy trong môi trường dịch của Game Porting Toolkit, thông tin ghi nhật ký và gỡ lỗi sẽ xuất hiện trong thiết bị đầu cuối.

Khi bạn khởi chạy trò chơi của mình, việc ghi nhật ký này có thể bao gồm các vấn đề tiềm ẩn để bạn giải quyết, nhưng mọi thứ có vẻ rõ ràng ở đây đối với các nhà phát triển của Bloober.

Hãy xem trong tài liệu Bộ công cụ chuyển đổi trò chơi để tìm chi tiết về những gì bạn có thể tìm thấy trong việc ghi nhật ký cho trò chơi của mình.

Ở đây nhà phát triển thấy rằng trò chơi đang chạy tốt với tất cả các tính năng đồ họa của nó được bật và nó hoạt động như mong đợi.

Họ sẽ nhận thấy rằng các tính năng như độ trong suốt, phản xạ, đổ bóng hình học, tessellation và cách tiếp cận chiếu sáng toàn cầu độc đáo và ủ rũ của chúng đối với ánh sáng đều đã được dịch sang Metal 3 và trông sắc nét và hoàn hảo về điểm ảnh.

Bước tiếp theo là chơi một chút để có được cảm giác về hiệu suất cơ bản.

Điều đáng chú ý là hiệu suất cơ bản mà bạn sẽ quan sát được khi chạy trò chơi Windows của mình bao gồm tất cả chi phí của Bộ công cụ chuyển trò chơi cũng như API và bản dịch tập lệnh.

Trong trường hợp của Bloober, phiên bản Windows tất nhiên không sử dụng các tính năng nâng cao hiệu suất như nâng cấp MetalFX.

Khi một trò chơi không phải bản địa chạy qua các lớp dịch này, hiệu suất và hiệu suất năng lượng của nó có thể bị ảnh hưởng.

Đưa trò chơi của bạn tự nhiên lên Mac sẽ tăng hiệu suất của nó và cho phép bạn tận dụng nhiều tính năng nâng cao của Apple Silicon và phần cứng Mac, bao gồm các tính năng như MetalFX và các tính năng dải động mở rộng của màn hình tích hợp của Apple.

Một quy trình làm việc tuyệt vời để đánh giá một trò chơi là chơi nó với Metal Performance HUD được bật và tìm kiếm các điểm cụ thể có thể đảm bảo một cái nhìn sâu hơn.

Các nhà phát triển đã tìm thấy một vị trí mà HUD thỉnh thoảng hiển thị các khung hình bị rơi cũng như tốc độ khung hình trung bình thấp hơn nhiều.

Sau đó, họ có thể sử dụng Dụng cụ để chụp Dấu vết Hệ thống Kim loại.

Đây là một cách tuyệt vời để điều tra các vấn đề về hiệu suất.

Metal Performance HUD đã được cải thiện khi bạn đang chạy trong Bộ công cụ chuyển đổi trò chơi.

Phần tiêu chuẩn của HUD vẫn ở trên cùng.

Nó hiển thị thông tin về GPU và độ phân giải được hiển thị, tốc độ khung hình tức thời, khoảng thời gian hiện tại đến hiện tại và xấp xỉ lượng thời gian GPU được sử dụng.

Nó làm nổi bật các giá trị cao và thấp của các số liệu thống kê này, hiển thị mức sử dụng bộ nhớ và cung cấp biểu đồ của vài giây dữ liệu cuối cùng.

Dưới đây, HUD hiện hiển thị chi tiết sâu hơn về bản dịch tập lệnh và phiên bản Direct3D API nào đang được sử dụng, có bao nhiêu bộ mã hóa kết xuất đang được sử dụng, có bao nhiêu bộ đệm lệnh và công văn đang xảy ra và bao nhiêu loại tính năng, chẳng hạn như bộ đổ bóng hình học và bộ đổ bóng tessellation, đang được

Ngoài ra, các bản sao và xóa tài nguyên được ghi lại.

Tại đây họ mở tệp theo dõi trong Instruments và sau đó duyệt để nhanh chóng tìm thấy nơi chúng ta thấy các giọt khung hình.

Đây rồi, một lĩnh vực mà dòng thời gian GPU có những khoảng trống lớn và ít sử dụng và có một số khung hình mà không có công việc nào được lên lịch cả.

Sau khi nghiên cứu điều này, có vẻ như rất có thể được gây ra bởi chi phí dịch thuật hướng dẫn hoặc sự khác biệt do dịch API gây ra.

Đây chỉ là những loại vấn đề sẽ biến mất khi bạn đưa trò chơi của mình lên Mac một cách tự nhiên.

Bạn có thể chắc chắn rằng trò chơi của bạn sẽ có hiệu suất tốt hơn và chạy hiệu quả hơn.

Ngoài ra, sử dụng các phương pháp hay nhất để kết xuất trong Metal và áp dụng nâng cấp MetalFX sẽ tăng hiệu suất trò chơi của bạn hơn nữa.

Đây là phiên bản gốc của "The Medium" chạy song song với phiên bản đã dịch, sử dụng tối ưu hơn Metal 3 và Apple Silicon để cải thiện đáng kể tốc độ khung hình trong cảnh này.

Để bắt đầu sử dụng Bộ công cụ chuyển đổi trò chơi, chỉ cần truy cập developer.apple.com.

Bạn sẽ tìm thấy một gói chứa các hướng dẫn để xây dựng và cấu hình bộ công cụ để bạn có thể bắt đầu đánh giá trò chơi của mình.

Bạn có thể cung cấp phản hồi, câu hỏi và đề xuất của mình về Bộ công cụ chuyển trò chơi và đưa trò chơi của bạn lên Mac bằng Trợ lý phản hồi.

Bây giờ bạn đã đánh giá các tính năng và hiệu suất đồ họa của mình bằng cách chạy trò chơi Windows hiện tại của mình, hãy lấy kiến thức đó để chuyển đường ống đổ bóng của bạn.

Bạn có thể sử dụng công cụ Metal Shader Converter để chuyển đổi tất cả các đường ống tạo bóng nâng cao của trò chơi, bao gồm các giai đoạn hình học, tessellation, lưới và dò tia.

Biên soạn đổ bóng của bạn là một chủ đề sâu sắc, vì vậy khi bạn đã sẵn sàng, hãy xem bài nói chuyện thứ hai trong loạt bài này, "Biên soạn đổ bóng của bạn." Đã đến lúc xem kết xuất với Metal.

Metal 3 cung cấp tất cả các tính năng đồ họa và tính toán nâng cao, bao gồm MetalFX, tải tài nguyên nhanh, biên dịch ngoại tuyến, đổ bóng lưới và dò tia, được sử dụng bởi các trò chơi cao cấp hiện đại, giúp việc chuyển đổi mã đồ họa của bạn trở nên cực kỳ đơn giản.

Phiên thứ ba trong loạt bài, "Render with Metal", là về cách chuyển trình kết xuất của bạn sang Metal và đạt được hiệu suất tuyệt vời từ Apple Silicon.

Bạn đã đánh giá các tính năng đầu vào cơ bản của trò chơi thông qua Bộ công cụ chuyển đổi trò chơi.

Bây giờ là lúc để chuyển nó một cách tự nhiên và tận dụng các tính năng nâng cao như tiếng ầm ầm và xúc giác.

Trò chơi Windows của bạn đã được xây dựng trên công cụ trò chơi đa nền tảng và sử dụng các trình cắm đầu vào phổ biến hoặc nó sử dụng trực tiếp các API Windows cấp thấp như XInput và GameInput, hoặc nó có thể đi kèm SDK tùy chỉnh cho các thiết bị ngoại vi trò chơi.

Trên nền tảng Apple, khung Bộ điều khiển trò chơi cung cấp cho trò chơi của bạn hỗ trợ độ trễ thấp và an toàn cho đầu vào trò chơi trên nhiều loại thiết bị ngoại vi, chẳng hạn như miếng đệm trò chơi, bàn phím, chuột, bánh xe đua và gậy trò chơi điện tử.

Bạn cũng có quyền truy cập vào các khả năng bổ sung của bộ điều khiển trò chơi, bao gồm xúc giác và chuyển động.

Các nền tảng của Apple cung cấp hỗ trợ tùy chọn người dùng cấp hệ thống để ánh xạ lại đầu vào cho mỗi ứng dụng, cũng như hỗ trợ tự động cho ảnh chụp màn hình, quay video và các điểm nổi bật 15 giây của trò chơi ngay từ bộ điều khiển trong bất kỳ trò chơi nào.

Thật dễ dàng để chuyển logic đầu vào trò chơi của bạn.

Khi bạn đã sẵn sàng tìm hiểu thêm, hai cuộc nói chuyện trước đây, "Nhấn vào Bộ điều khiển trò chơi ảo và vật lý" và "Nâng cao trong bộ điều khiển trò chơi", là những nơi tuyệt vời để tìm thông tin chi tiết và mã mẫu.

Âm thanh là một phần quan trọng khác của trải nghiệm trò chơi hấp dẫn.

Đưa quy trình âm thanh và các tính năng của trò chơi hiện tại của bạn có nguồn gốc từ Mac khá đơn giản.

Các thiết bị của Apple có loa tích hợp hiện đại mà người chơi của bạn có thể nghe to và rõ ràng vì không có quạt lớn nào nhấn chìm chúng.

Ngoài ra còn có nhiều thiết bị ngoại vi âm thanh có dây và không dây tuyệt vời tương thích với các thiết bị Apple hỗ trợ âm thanh không gian có độ trễ thấp.

Trò chơi hiện tại của bạn có thể đã sử dụng các giải pháp phần mềm trung gian âm thanh đa nền tảng như Wwise, Unity và FMOD.

Các sản phẩm phần mềm trung gian này nói chung là các API và khuôn khổ âm thanh hệ thống trừu tượng.

Trên Windows, bạn có thể đang sử dụng các lớp phần mềm trung gian trên các API cấp thấp hơn như DirectSound, XAudio2 và WASAPI.

Những sản phẩm phần mềm trung gian tương tự tồn tại trên nền tảng của Apple.

Những thứ này sử dụng một bộ khung âm thanh cấp cao và cấp thấp của Apple phong phú bao gồm Bộ trộn âm thanh không gian, PHASE và AVAudioEngine.

Tin tuyệt vời: bạn sẽ thấy rằng tất cả các sản phẩm phần mềm trung gian này đều được hỗ trợ tốt với Apple Silicon SDK gốc.

Có rất ít hoặc không có gì bạn sẽ cần phải làm.

Nhưng nếu bạn không sử dụng phần mềm trung gian, tất nhiên bạn có thể sử dụng trực tiếp các khung âm thanh và API do nền tảng cung cấp, giống như phần mềm trung gian.

Đặc biệt, để đạt được âm thanh không gian tuyệt vời ở cấp độ này, hãy xem tài liệu PHASE cũng như mã mẫu thể hiện việc tạo âm thanh không gian từ dữ liệu PCM 12 kênh, 7.1.4 bằng AUSpatialMixer.

Những cuộc nói chuyện trước đây về CoreAudio, AudioUnits và PHASE cũng là những phiên tuyệt vời để tìm hiểu về cách sử dụng các khung hệ thống cấp thấp nếu trò chơi của bạn không dựa trên phần mềm trung gian âm thanh.

Màn hình của Apple là một phần không thể thiếu trong việc cung cấp cho người chơi của bạn trải nghiệm chơi game tuyệt đẹp và nhập vai.

Với Bộ công cụ chuyển đổi trò chơi, bạn có thể thấy mã kết xuất trò chơi của mình chạy trên dải động tiêu chuẩn cơ bản và API nhịp độ khung của môi trường đã dịch.

Trên Windows, trò chơi của bạn có thể sử dụng quản lý màu sắc và API ánh xạ tông màu để đạt được dải động cao, chẳng hạn như API không gian màu AdvancedColorInfo.

Và bạn có thể đang sử dụng thời gian và phản hồi có sẵn trong IDXGISwapChain để tăng tốc nội dung SDR và HDR của mình.

Hỗ trợ dải động mở rộng của CAMetalLayer cho phép bạn truy cập vào các tính năng hiển thị nâng cao hơn nữa.

Bạn có thể dễ dàng di chuyển logic ánh xạ HDR và tông màu của mình, cho dù nó dựa trên dải số nguyên dấu phẩy động hay 10 bit, hoặc bộ đổ bóng HDR10 hoặc PQ10.

API CAMetalDisplayLink cung cấp cho bạn khả năng kiểm soát chi tiết để đạt được độ trễ đầu vào và hiển thị thấp nhất cho trò chơi của bạn.

Kiểm tra những cuộc nói chuyện này về việc thêm hỗ trợ EDR vào kết xuất Kim loại của bạn.

"Khám phá EDR trên iOS" là một bài nói chuyện tuyệt vời tóm tắt các định dạng pixel và API kim loại để sử dụng nhất quán giữa macOS và iOS.

Bài thuyết trình "Khám phá kết xuất HDR với EDR" cung cấp một nền tảng tuyệt vời để hiểu cách tận dụng tối đa các API và khả năng của EDR.

Nền tảng Apple Silicon Mac có tất cả các tính năng phần mềm và phần cứng bạn cần để đưa trò chơi của mình lên Mac.

Với Bộ công cụ chuyển đổi trò chơi và Bộ chuyển đổi bóng râm kim loại, việc đưa trò chơi của bạn lên Mac trở nên dễ dàng hơn bao giờ hết.

Hãy chắc chắn tiếp tục với phần hai, "Compile Your Shaders," và phần ba, "Render with Metal." Tôi nóng lòng muốn chơi trò chơi của bạn trên máy Mac.

♪ ♪