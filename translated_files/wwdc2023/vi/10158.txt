10158

♪ ♪

Jacob: Xin chào, tôi là Jacob.

Giao diện người dùng mà chúng tôi xây dựng tiếp tục phát triển năng động hơn, với sự thay đổi và chuyển động ở mọi nơi.

Mọi người thích điều này.

Nó làm cho một giao diện cảm thấy sống động hơn, giúp dễ dàng hiểu những gì đang xảy ra và nó chỉ mang lại cảm giác thích thú khi tương tác với giao diện người dùng.

Và có rất nhiều thứ kết hợp với nhau để tạo ra những tương tác năng động này.

Có những sự chuyển tiếp, nơi chúng ta di chuyển từ cảnh này sang cảnh khác.

Và có những cử chỉ, nơi chúng ta đang tương tác trực tiếp với thiết bị.

Và cuối cùng, có những hình ảnh động, trong đó một đối tượng trên màn hình di chuyển, phát triển hoặc thay đổi các thuộc tính hình ảnh.

Tất cả những thứ này hoạt động cùng nhau và giúp tạo ra một giao diện người dùng tương tác, linh hoạt.

Hôm nay, chúng ta sẽ đi sâu vào việc xây dựng những hình ảnh động tuyệt vời.

Sự khác biệt giữa các hình ảnh động có thể tinh tế, nhưng khi một hình ảnh động vừa phải, người dùng của bạn có thể cảm nhận được nó.

Vì vậy, tôi muốn chia sẻ với bạn cách làm cho hình ảnh động trong ứng dụng của bạn cảm thấy thanh lịch và tự nhiên.

Và chúng tôi sẽ làm điều đó chỉ tập trung vào một công cụ mạnh mẽ, linh hoạt và thậm chí thú vị: lò xo!

Chúng ta sẽ bắt đầu bằng cách thảo luận về lý do tại sao lò xo phù hợp với hoạt hình.

Sau đó, chúng ta sẽ đi sâu vào một số chi tiết về cách hoạt động của lò xo.

Và cuối cùng, chúng ta sẽ nói về cách sử dụng lò xo trong các ứng dụng của chúng ta.

Vậy tại sao lò xo lại hữu ích cho hoạt hình?

Để trả lời điều đó, chúng ta cần lùi lại và thảo luận về những gì tạo nên một hình ảnh động tuyệt vời.

Hãy xem xét một ngữ cảnh mà chúng ta có một vài hình ảnh động: một chuyển đổi đơn giản.

Hãy tập trung vào nút chuyển đổi này.

Chúng tôi sử dụng hoạt ảnh vì nhiều lý do, nhưng một trong những lý do quan trọng nhất là chúng mang lại cho chúng tôi cảm giác liên tục tốt hơn.

Nếu một đối tượng bắt đầu ở một nơi, và sau đó đột nhiên xuất hiện ở một nơi khác, nó cảm thấy chói tai và đôi khi có thể gây nhầm lẫn.

Cảm giác tự nhiên hơn nhiều nếu chúng ta thấy vật thể di chuyển từ nơi này sang nơi khác.

Nhưng nó không chỉ là về vị trí.

Nếu vận tốc của một vật thể đột nhiên thay đổi, điều đó cũng cảm thấy không tự nhiên.

Ví dụ ở đây, núm vặn trong nút chuyển đổi đang bắt đầu và kết thúc bằng một bước nhảy về vận tốc, và nó cảm thấy không ổn.

Vì vậy, một mục tiêu mà chúng tôi có là làm cho hình ảnh động của chúng tôi có vị trí và vận tốc liên tục.

Hãy xem xét một vài loại hoạt hình và xem chúng hoạt động như thế nào với yêu cầu đó.

Và trong khi chuyển đổi của chúng tôi là một ví dụ hữu ích về một hình ảnh động hoàn chỉnh, tôi muốn chỉ tập trung vào chuyển động của núm, vì vậy sẽ dễ dàng hơn để xem những gì đang xảy ra chỉ trong một hình ảnh động duy nhất.

Hãy bắt đầu bằng cách xem xét Ease vào và ra.

Đây là một loại hoạt hình đường cong Bezier, có nghĩa là chuyển động của nó được xác định bởi sự kết hợp của đường cong và thời lượng.

Nhìn vào chuyển động của vật thể này, không có cảm giác như có bất kỳ cú nhảy đột ngột nào.

Để đảm bảo đây là trường hợp, chúng ta cũng có thể kiểm tra biểu đồ chuyển động trong hình ảnh động này.

Chúng ta sẽ xem xét một số biểu đồ này, vì vậy hãy thảo luận về những gì nó đang hiển thị.

Trục ngang đại diện cho thời gian, đường dưới cùng hiển thị vị trí ban đầu của hình ảnh động và đường trên cùng hiển thị vị trí mục tiêu.

Và khi chúng tôi phát hoạt hình lặp đi lặp lại, chúng tôi sẽ liên tục tiến bộ qua đường cong này.

Bây giờ hãy bắt đầu lại hoạt hình.

Lưu ý cách đường cong trong biểu đồ không có bất kỳ bước nhảy nào, điều đó có nghĩa là vị trí của nó liên tục.

Và nếu chúng tôi cập nhật biểu đồ của mình để hiển thị vận tốc, chúng tôi có thể xác nhận rằng vận tốc cũng không có bất kỳ bước nhảy nào - vì vậy vận tốc cũng liên tục.

Thay vào đó, nếu chúng ta nhìn vào chuyển động của một hình ảnh động tuyến tính, sẽ có một góc nhọn và một bước nhảy về vận tốc khi hoạt hình bắt đầu và kết thúc.

Hoạt ảnh tuyến tính có thể hữu ích như một công cụ chuyên dụng ở một số nơi, như chỉ báo quay lặp lại, nhưng nếu không, bạn nên thận trọng khi sử dụng chúng, đặc biệt là đối với chuyển động, nơi nó có hành vi phi vật lý này thường cảm thấy lạc lõng.

Tiếp theo, hãy kiểm tra tính liên tục của hoạt hình mùa xuân.

Giống như chúng ta muốn, cái này cũng có vị trí và vận tốc liên tục.

Cho đến nay, dễ dàng vào và ra và hoạt ảnh mùa xuân là những lựa chọn tốt nhất của chúng tôi, nhưng chúng tôi chỉ xem xét các trường hợp hoạt ảnh bắt đầu từ vị trí nghỉ ngơi.

Hãy kiểm tra xem điều gì sẽ xảy ra nếu chúng ta sử dụng một cử chỉ cùng với một hình ảnh động.

Hãy mang núm di động của chúng ta sang iPad, nơi chúng ta sẽ kéo nó bằng ngón tay của mình.

Chúng ta có thể thả nó vào một trong hai vị trí này.

Nhưng chúng ta cũng có thể kết thúc cử chỉ ở đâu đó ở giữa và ném núm của chúng ta sang một bên.

Với một hình ảnh động vào và ra dễ dàng, nó hoạt hình đến cùng, nhưng chuyển động của nó dừng lại khi cử chỉ kết thúc.

Kiểu hoạt hình này chỉ là một đường cong được chỉ định trước, vì vậy không có cách nào để biểu diễn vận tốc ban đầu.

Điều này thậm chí còn tồi tệ hơn nếu chúng ta cũng cho phép núm của mình được kéo đến bất kỳ vị trí nào trong 2 chiều.

Hãy thử lại lần nữa, nhưng với một hình ảnh động mùa xuân.

Một lò xo có thể bắt đầu với bất kỳ vận tốc ban đầu nào, vì vậy chúng ta có cảm giác tự nhiên khi hình ảnh động của chúng ta bắt đầu ngay tại nơi cử chỉ kết thúc.

Và điều này cũng hoạt động tốt cho việc kéo hai chiều.

SwiftUI giờ đây sẽ tự động theo dõi vận tốc bất cứ khi nào một cử chỉ thay đổi thuộc tính, vì vậy bạn có thể có được hành vi này mà không cần phải làm thêm bất kỳ công việc nào.

Vì vậy, lò xo là loại hoạt ảnh duy nhất duy trì tính liên tục cho cả trường hợp tĩnh và trường hợp có vận tốc ban đầu.

Lợi ích tiếp theo của lò xo mà chúng ta có thể kiểm tra là hình dạng chuyển động của chúng.

Khi bạn nghe thấy chuyển động của một lò xo, bạn có thể đang nghĩ về một cái gì đó như thế này.

Nhưng một hình ảnh động mùa xuân không chỉ có nghĩa là một hình ảnh động nảy.

Đúng là lò xo có thể nảy, và đó có thể là một công cụ tuyệt vời, nhưng đó không phải là lý do chính khiến chúng tôi sử dụng lò xo.

Sau này, chúng ta sẽ xem xét khi nào có ý nghĩa khi sử dụng lò xo có độ nảy, nhưng lò xo không có độ nảy cũng rất tuyệt!

Những loại lò xo không bồng bềnh này được sử dụng trong hoạt ảnh trên khắp iOS.

Vì vậy, nếu nó không chỉ là về sự nảy, thì chuyển động của lò xo có gì tốt?

Hãy xem lại hoạt hình mùa xuân đơn giản của chúng ta và chú ý đến cách hoạt hình kết thúc.

Nó rất chậm và dần dần được nghỉ ngơi.

Không có điểm nào khi đối tượng được hoàn thành đột ngột.

Điều này cảm thấy giống như những gì chúng ta mong đợi để xem liệu đây có phải là một vật thể đang di chuyển và dừng lại hay không.

Và có một lý do khiến phiên bản này cảm thấy tự nhiên hơn đối với chúng tôi.

Hoạt hình mùa xuân dựa trên hành vi của một vật thể gắn liền với lò xo trong thế giới vật chất, vì vậy mắt chúng ta cảm thấy tự nhiên và đáng tin cậy hơn khi chúng ta nhìn thấy nó di chuyển.

Bây giờ bạn có thể đã nghe nói rằng các thuộc tính khác nhau hoạt hình với lò xo có thể kết thúc vào những thời điểm khác nhau, đó là sự thật.

Nếu bạn đã quen với hoạt ảnh đường cong thời gian, điều này có thể cảm thấy kỳ lạ.

Chúng ta không muốn tất cả các hình ảnh động bắt đầu và dừng cùng một lúc sao?

Câu trả lời là không!

Chúng tôi muốn hình ảnh động của mình giống như chuyển động của các vật thể trong thế giới vật chất mà chúng ta đã quen.

Và nói chung, những thứ này bắt đầu và dừng lại vào thời điểm riêng của chúng khi chúng bị chậm lại do ma sát, vì vậy những thời điểm này thường không thẳng hàng hoàn hảo.

Trên thực tế, đôi khi rất hữu ích khi đi xa hơn nữa đối với hoạt ảnh đa tài sản.

Đây là hình ảnh động của một ứng dụng đang khởi chạy trên iOS.

Thoạt nhìn, nó có vẻ giống như chỉ là một hình ảnh động thống nhất duy nhất, nhưng nếu chúng ta làm chậm hoạt hình, bạn có thể thấy các lò xo khác nhau, thời gian bắt đầu khác nhau và thời gian kết thúc khác nhau kết hợp với nhau như thế nào để tạo thành một hình ảnh động đáng kinh ngạc và cảm giác tự nhiên.

Vì vậy, bây giờ chúng ta đã biết tại sao lò xo là một công cụ tuyệt vời cho hoạt ảnh, hãy kiểm tra lò xo kỹ hơn để hiểu cách chúng hoạt động và cách sử dụng chúng tốt nhất.

Khi chúng ta sử dụng hình ảnh động lò xo, chúng ta đang mô hình hóa nó với chuyển động của một vật thể được gắn vào lò xo.

Nếu chúng ta quay trở lại vật lý, chuyển động này được xác định bởi 3 tính chất: khối lượng của vật thể, độ cứng của lò xo và độ giảm xóc của hệ thống, đây là thước đo mức độ ma sát được áp dụng cho vật thể bởi môi trường xung quanh.

Sau đó, chúng tôi sử dụng vị trí ban đầu của hình ảnh động làm vị trí ban đầu của đối tượng và vị trí mục tiêu của hình ảnh động để xác định vị trí nghỉ của lò xo, nơi đối tượng sẽ bị kéo về phía.

Sau đó chúng ta có thể giải phóng đối tượng để bắt đầu hoạt ảnh.

Các thuộc tính chúng tôi sử dụng để xác định hệ thống lò xo xác định loại chuyển động xảy ra và việc thay đổi chúng sẽ thay đổi hoạt ảnh kết quả.

Vì vậy, khi tạo hoạt ảnh lò xo, bạn có thể sử dụng các thuộc tính tương tự về khối lượng, độ cứng và giảm xóc để định cấu hình loại lò xo nào sẽ sử dụng.

Nhưng trong khi đây là một cách tự nhiên để mô hình hóa một hệ thống vật lý, chúng không trực quan lắm để xác định hoạt hình mùa xuân.

Không có một vật thể thực có khối lượng hoặc lò xo có độ cứng ở đây, và việc tạo ra các giá trị này để thay đổi đường cong không dễ thực hiện.

Vì vậy, chúng tôi đã tinh chỉnh một cách mới để cấu hình lò xo dễ hiểu và dễ làm việc hơn.

Nó chỉ sử dụng 2 thông số: thời lượng và độ nảy.

Những thứ này làm những gì bạn mong đợi, tăng thời lượng làm cho hoạt ảnh mất nhiều thời gian hơn.

Và tăng độ nảy làm tăng độ nảy cho hình ảnh động.

Và chúng tôi đang áp dụng những điều này trên toàn cầu thông qua các nỗ lực thiết kế và kỹ thuật của Apple.

Vì vậy, tất cả các khuôn khổ của chúng tôi hỗ trợ lò xo sẽ sử dụng chúng.

Khi bạn chơi với các thông số lò xo này, bạn có thể thấy các loại hình dạng khác nhau trong các đường cong.

Khi độ nảy lớn hơn 0, chúng ta sẽ nhận được một lò xo nảy vượt quá mục tiêu của nó.

Khi độ nảy bằng 0, chúng ta có được đường cong trơn tru này với một cái đuôi dài dần dần đi về phía mục tiêu của nó.

Và cũng có một loại lò xo khác.

Cái này không phổ biến lắm, nhưng với giá trị nảy âm, bạn có thể có được một lò xo cũng có đuôi dài dần dần tiếp cận mục tiêu của nó, nhưng điều đó phẳng hơn một chút so với những gì bạn nhận được với độ nảy bằng 0.

Trong vật lý của lò xo, chúng được gọi là lò xo bị giảm xóc, giảm xóc nghiêm trọng và lò xo bị giảm xóc.

Nhưng tôi thích nghĩ về chúng như bồng bềnh, mịn màng và dẹt.

Và như bạn có thể nhận thấy, các giá trị nảy này là phần trăm, vì vậy lò xo nảy có giá trị nảy lên đến 100% và lò xo dẹt có giá trị nảy từ 0 đến -100% Bây giờ tôi muốn đào sâu hơn một chút về các lò xo này.

Lò xo đôi khi có vẻ hơi đáng sợ, và chuyển động của chúng có vẻ khó hiểu.

Nhưng nếu chúng ta chia nhỏ những gì đang xảy ra, nó thực sự chỉ là một vài điều đơn giản kết hợp với nhau.

Đối với tôi, có thể hiểu toán học đằng sau những đường cong này giúp làm cho lò xo cảm thấy dễ tiếp cận hơn, vì vậy tôi cũng muốn chia sẻ điều đó với bạn.

Nhưng nếu toán học chỉ khiến đầu bạn quay cuồng, đừng lo lắng, nó hoàn toàn là tùy chọn.

Chúng tôi thực hiện tất cả các phép toán này cho bạn.

Vậy hãy bắt đầu với một đường cong bồng bềnh.

Bạn có thể nhận thấy rằng sự vượt quá của lò xo này dao động như một loại sóng sin hoặc sóng cosin phức tạp hơn.

Và nếu chúng ta đưa độ nảy của lò xo này lên đến giá trị tối đa 100%, bạn có thể thấy rằng bây giờ nó chính xác là hành vi của sóng cosin, chỉ dao động qua lại.

Cách giải thích vật lý của điều này là nó là một lò xo không có ma sát tác động lên nó, vì vậy nó dao động mãi mãi mà không chậm lại và không bao giờ thực sự đạt đến vị trí mục tiêu của nó.

Như bạn mong đợi, phép toán cho điều này khá đơn giản: nó chỉ là một đường cong cosin và thời gian được chia cho thời lượng.

Vì vậy, đối với giá trị trả lại này, thời lượng tương ứng chính xác với chu kỳ của đường cong.

Khi chúng ta giảm độ nảy, điều đó tương đương về mặt vật lý với việc thêm ma sát hoặc giảm xóc cho lò xo, điều này làm chậm nó khi nó đi.

Và chúng ta vẫn có những dao động đó.

Trên thực tế, đường cong cosin từ trước vẫn còn đó, điều này rõ ràng hơn nếu chúng ta vẽ nó được phủ lên trên.

Đây là phương trình giống như trước đây, chỉ với các hằng số khác nhau và dịch chuyển theo chiều ngang một chút.

Vì vậy, điều này giải thích sự thay thế trong đường cong, nhưng rõ ràng chúng ta cũng cần một cái gì đó khác.

Trong đường cong ban đầu, kích thước của các dao động ngày càng nhỏ hơn, hoặc phân rã, theo thời gian.

Và đó là mảnh còn thiếu.

Đường cong bổ sung này là một đường cong phân rã theo cấp số nhân.

Và đó là phần cuối cùng trong chuyển động của chúng tôi, phần mang lại cho chúng tôi cảm giác dần dần được nghỉ ngơi.

Vì vậy, những gì có vẻ như là một đường cong phức tạp chỉ là sản phẩm của hai thành phần này, được gọi là cosin giảm xóc hoặc sóng sin.

Điều đó khá thỏa mãn, nhưng nếu bạn nhìn kỹ vào biểu đồ, có một điều có vẻ hơi lạ: tại sao đường cong cosin của chúng ta bây giờ lại giảm giá này ngay từ đầu?

Điều này liên quan đến điều mà chúng ta đã thảo luận trước đó: bảo toàn vận tốc.

Hãy nhớ rằng đối với trường hợp cơ bản này, chúng ta cần duy trì vận tốc bằng 0 ngay từ đầu.

Vì vậy vận tốc của tích của hai đường cong thành phần của chúng ta phải bằng phẳng khoảng 0.

Nhưng lưu ý rằng đường cong phân rã của chúng ta bắt đầu với độ dốc hướng lên trên.

Nếu chúng ta bắt đầu đường cong cosin phẳng, thì vận tốc ban đầu của chúng ta cũng sẽ hướng lên trên.

Vì vậy, đường cong cosin của chúng ta phải bắt đầu hướng xuống dưới để triệt phá với sự phân rã và cho chúng ta sự khởi đầu bằng phẳng.

Và đây là cách lò xo có thể khớp với bất kỳ vận tốc ban đầu nào bằng cách sử dụng các dịch chuyển và thang đo khác nhau trong đường cong cosin của chúng ta để cho chúng ta sự khởi đầu phù hợp.

Vận tốc ban đầu này có thể đến từ vận tốc của một cử chỉ khi nó kết thúc và chuyển sang một hình ảnh động, như chúng ta đã thảo luận trước đó.

Và có một nơi khác mà vận tốc ban đầu này có thể đến từ đó.

Hãy kiểm tra nó trên iPad.

Ở đây, chúng ta có thể nhấn để di chuyển núm của mình và hiển thị hình ảnh mờ hơn của núm ở vị trí mục tiêu của nó.

Chúng tôi cũng sẽ sử dụng lò xo chậm hơn để dễ dàng theo dõi những gì đang xảy ra hơn.

Đôi khi, trong khi một hình ảnh động chưa kết thúc, một hình ảnh động mới bắt đầu thay đổi thành một giá trị mục tiêu mới.

Khi điều đó xảy ra, một hình ảnh động lò xo sử dụng vận tốc mà nó có khi nó được nhắm mục tiêu lại làm vận tốc ban đầu hướng tới điểm đến mới của nó và việc bảo tồn vận tốc tương tự này làm cho những loại gián đoạn này cảm thấy trơn tru và tự nhiên.

Vì vậy, đó là cách bảo quản vận tốc và lò xo nảy hoạt động.

Bây giờ nếu chúng ta giảm độ nảy của mình, các dao động ngày càng xa nhau hơn, cho đến khi độ nảy đến 0, các dao động hoàn toàn biến mất và chúng ta chỉ có một đường thẳng đi xuống và đi được nhân với sự phân rã của chúng ta.

Vì vậy, những phương trình này thậm chí còn đơn giản hơn.

Chúng ta chỉ cần phương trình cơ bản của một đường thẳng, và sau đó chúng ta nhân nó với cùng một hàm mũ, cho chúng ta đường cong kết quả của chúng ta.

Các đường cong dẹt, là các lò xo có độ nảy âm, hoạt động rất giống nhau, nhưng sử dụng hai hàm mũ được thêm vào với nhau thay vì một đường thẳng.

Loại lò xo này ít phổ biến hơn, nhưng thực tế là nó được biểu thị bằng phân rã theo cấp số nhân khiến nó hữu ích cho việc mô hình hóa vận tốc phân rã, giống như những gì xảy ra trong chế độ xem cuộn.

Một điều bạn có thể thắc mắc khi sử dụng lò xo cho hoạt hình là: Mất bao lâu cho đến khi hoạt hình lò xo thực sự kết thúc?

Như chúng ta đã thấy, câu hỏi đó hơi tinh tế.

Sự phân rã theo cấp số nhân của lò xo có nghĩa là về mặt kỹ thuật, nó tiếp tục di chuyển mãi mãi, chỉ với chuyển động ngày càng nhỏ hơn.

Tất nhiên, chúng tôi không muốn hoạt ảnh mùa xuân của mình tiếp tục mãi mãi, vì vậy chúng tôi cần chọn thời điểm để xóa nó, khi nó không còn đóng góp bất kỳ thay đổi đáng chú ý nào cho giao diện người dùng.

Khoảng thời gian đó cho đến khi một hình ảnh động mùa xuân được hoàn thành đủ để loại bỏ được gọi là thời gian giải quyết.

Thời lượng thanh toán này khác với tham số thời lượng để định cấu hình lò xo.

Thời gian giải quyết phụ thuộc vào nhiều yếu tố khác nhau, vì vậy có thể hơi khó đoán, nhưng tham số thời lượng là thời lượng nhận thức được chọn để có thể dự đoán được và không di chuyển xung quanh, ngay cả khi các thông số khác của mùa xuân thay đổi.

Do tính chất không thể đoán trước của nó, bạn không nên đợi thời gian giải quyết cho những thay đổi mà người dùng phải đối mặt.

Nếu bạn muốn thực hiện thay đổi giao diện người dùng khi mùa xuân gần như đã hoàn thành, bạn có thể sử dụng hỗ trợ trình xử lý hoàn thành mới trong SwiftUI, sử dụng thời lượng nhận thức thay vì thời lượng thanh lý.

Bây giờ chúng ta đã biết tất cả về cách hoạt động của lò xo, hãy thảo luận về việc sử dụng chúng trong mã của chúng ta.

Bởi vì lò xo là một công cụ tuyệt vời cho hoạt ảnh, bây giờ chúng tôi sử dụng chúng làm hoạt ảnh mặc định trong SwiftUI, vì vậy tất cả những gì bạn cần làm là gọi với Hoạt hình để bắt đầu với lò xo.

Chúng tôi cũng đã giúp việc sử dụng lò xo cho hoạt ảnh một cách rõ ràng trở nên dễ dàng hơn.

Chúng tôi đã xây dựng một vài cài đặt trước lò xo dựa trên các giá trị lò xo được sử dụng trong iOS.

Nếu bạn không chắc chắn nên sử dụng thông số lò xo nào, đây là một cách tuyệt vời để có được thứ gì đó cảm thấy tốt.

Bạn có thể sử dụng những thứ này trong mã bằng cách trực tiếp sử dụng cài đặt trước khi bạn cần một hình ảnh động.

Nhưng một phần quan trọng của việc sử dụng hoạt ảnh mùa xuân là điều chỉnh nó theo ngữ cảnh chính xác mà bạn cần, vì vậy các cài đặt trước này cũng có thể được sử dụng làm điểm khởi đầu có thể điều chỉnh được.

Bạn có thể đặt trước và chỉ định rằng thời lượng của nó sẽ khác nhau, Hoặc cho nó nhiều hơn hoặc ít hơn một chút độ nảy bằng cách chỉ định một lượng tương đối của độ nảy bổ sung để thêm.

Những cài đặt trước này là một cách tuyệt vời để bắt đầu giới thiệu lò xo vào ứng dụng của bạn.

Nhưng nếu bạn muốn đi xa hơn, bạn cũng có thể tạo ra một lò xo hoàn toàn tùy chỉnh với hình ảnh động .spring.

Điều này cho phép bạn xác định đầy đủ thời lượng và độ nảy của mùa xuân.

Và những giá trị trả lại này có phạm vi từ -1.0 đến 1.0.

Bạn cũng có thể sử dụng các thông số tương tự này để tạo hoạt ảnh mùa xuân trong UIKit và Core Animation.

Có một công cụ lò xo mới khác mà bạn có thể sử dụng nếu bạn muốn tiến xa hơn nữa.

Chúng tôi đã thêm một loại mô hình Spring vào SwiftUI cho phép bạn tạo biểu diễn của một lò xo, bao gồm các tham số của nó.

Điều này cho phép bạn chuyển đổi các tham số theo chương trình giữa các cách khác nhau để chỉ định chúng.

Bạn cũng có thể tạo một mô hình lò xo với một tập hợp các thông số, như khối lượng, độ cứng và giảm xóc, sau đó sử dụng nó như một hình ảnh động lò xo trực tiếp.

Nhưng nếu bạn thực sự muốn tự mình thực hiện chuyển đổi, đây là ba phương trình để chuyển đổi từ giá trị độ nảy và thời lượng sang khối lượng, độ cứng và giảm xóc.

Ngoài việc chuyển đổi các thông số, bạn có thể sử dụng các mô hình lò xo để xây dựng các hành vi lò xo nâng cao của riêng mình.

Bạn có thể gọi các phương thức vào mùa xuân để có được phép toán đánh giá mùa xuân được xây dựng cho chính mình.

Ví dụ, bạn có thể gọi giá trị để lấy vị trí của lò xo.

Bạn chỉ cần vượt qua một mục tiêu, đó là những gì mùa xuân đang hướng tới và thời gian bạn muốn đánh giá nó.

Bạn cũng có thể sử dụng các đầu vào tương tự trên phương pháp vận tốc để đánh giá vận tốc của lò xo theo thời gian.

Điều này cho phép bạn dễ dàng sử dụng lò xo trong mã của riêng mình, điều này có thể hữu ích cho việc mô phỏng hoặc để lấy các giá trị cho biểu đồ, giống như các giá trị trong phiên này.

Bạn thậm chí có thể sử dụng cái này để xây dựng các hình ảnh động tùy chỉnh của riêng mình.

Chỉ cần gọi vào mô hình lò xo và bạn có thể sửa đổi đầu vào hoặc đầu ra để áp dụng tùy chỉnh cho hoạt ảnh lò xo.

Kiểm tra Khám phá hoạt hình SwiftUI để tìm hiểu chi tiết về việc tạo hoạt ảnh tùy chỉnh.

Một điều cuối cùng tôi muốn thảo luận là cách chọn các thông số để sử dụng cho lò xo của bạn.

Để chọn một giá trị phù hợp với hoạt hình của bạn, tốt nhất bạn nên bắt đầu bằng cách tìm một giá trị thời lượng mang lại nhịp độ mà bạn thích.

Khi bạn đã quyết định điều đó, bạn có thể bắt đầu điều chỉnh mức độ nảy để chọn loại nhân vật và cảm giác bạn muốn hình ảnh động này có.

Bạn sẽ thấy rằng các giá trị trả lại khác nhau cảm thấy khác nhau về chất lượng.

Một cú nảy 0 cảm thấy như một sự thay đổi mượt mà, dần dần.

Một cú nảy nhỏ, khoảng 15%, chưa cảm thấy bồng bềnh lắm, nhưng cái đuôi dài cảm thấy nhanh hơn một chút.

Và đối với các giá trị trả lại lớn hơn như 30%, bạn bắt đầu cảm thấy một số bounciness đáng chú ý.

Nếu bạn đi xa hơn nữa, bạn có thể nhận được một lượng bounciness khá lớn.

Nhưng bạn nên thận trọng khi sử dụng các giá trị cao hơn khoảng 0.4, vì chúng có thể cảm thấy quá phóng đại đối với một phần tử giao diện người dùng.

Vậy bạn thực sự nên sử dụng giá trị thoát nào?

Khi bạn không chắc chắn, hãy sử dụng lò xo có độ nảy 0, đó cũng là những gì bạn nhận được nếu bạn không chỉ định độ nảy.

Điều này mang lại cho bạn một lò xo đa năng tuyệt vời linh hoạt nhất.

Sau đó, nếu bạn muốn hình ảnh động của mình cảm thấy vui tươi hơn một chút, bạn có thể bắt đầu thêm một số điểm nảy.

Bounce cũng có thể có ý nghĩa khi bạn muốn một hình ảnh động cảm thấy vật lý hơn, giống như nếu nó sẽ được sử dụng ở cuối cử chỉ.

Và một điều bạn nên ghi nhớ là tính nhất quán.

Hãy suy nghĩ về loại nhân vật mà ứng dụng của bạn có.

Nó nghiêm túc hay vui tươi?

Nó nên cảm thấy thư giãn hay nhịp độ nhanh?

Điều đó có thể giúp bạn chọn các giá trị mùa xuân phù hợp với cảm giác của giao diện người dùng xung quanh chúng.

Vì vậy, đó là một chuyến tham quan nhanh về việc sử dụng lò xo cho hoạt hình.

Hãy nhớ rằng một lò xo không cần phải nảy lên để tạo ra một hình ảnh động tuyệt vời.

Ngoài ra còn có một bộ cài đặt trước lò xo mới là điểm khởi đầu tuyệt vời, nhưng bạn có thể sử dụng thời lượng và độ nảy để tùy chỉnh khi bạn cần đi xa hơn.

Và quan trọng nhất, sau khi nhìn thấy tất cả những ưu điểm độc đáo mà lò xo có, tôi hy vọng bạn hào hứng sử dụng hình ảnh động lò xo để làm cho ứng dụng của bạn cảm thấy trôi chảy và niềm vui khi sử dụng.

Cảm ơn bạn.

♪ ♪