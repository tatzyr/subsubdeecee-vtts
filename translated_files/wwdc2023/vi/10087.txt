10087

♪ Hip-hop nhạc cụ êm dịu ♪

♪

Willem Mattelaer: Xin chào, tên tôi là Willem, và tôi là một kỹ sư làm việc trong các hoạt động nhóm.

Tôi sẽ được Mia tham gia để nói về cách bạn có thể xây dựng các ứng dụng SharePlay không gian tuyệt vời.

SharePlay luôn có mặt với những người khác và làm điều gì đó cùng nhau, dù ở gần hay xa nhau.

Trên nền tảng này, chúng ta có thể tăng cảm giác hiện diện khi ở trong FaceTime.

Trong FaceTime trên nền tảng này, tất cả các Nhân vật Không gian sẽ chiếm một không gian vật lý trong phòng của bạn thay vì bị giới hạn trong một cửa sổ duy nhất.

Điều này làm tăng cảm giác được ở bên nhau với những người khác.

Trên hết, chúng tôi giới thiệu bối cảnh được chia sẻ.

Bối cảnh được chia sẻ có nghĩa là mọi người sẽ thấy mọi người khác ở cùng một vị trí tương đối.

Để minh họa điều này, hãy xem xét hai quan điểm khác nhau.

Phía bên trái hiển thị góc nhìn của Connor, và phía bên phải hiển thị góc nhìn của Mia.

Nếu Connor chỉ vào Persona của Mia, Mia sẽ thấy Persona của Connor chỉ vào cô ấy.

Chúng tôi mở rộng điều này cho các trải nghiệm được chia sẻ, bao gồm SharePlay, nơi hệ thống sẽ đặt cửa sổ ở cùng một vị trí tương đối cho mọi người.

Nó sử dụng các mẫu cho việc này.

Các mẫu được sử dụng để xác định cách người tham gia và một ứng dụng được chia sẻ sẽ được sắp xếp tương đối với nhau.

Điều này sẽ dẫn đến sự nhất quán về không gian.

Các ứng dụng không cần phải tự xử lý sự dịch chuyển và có thể dựa vào hệ thống cho việc này.

Một điều mà các ứng dụng nên lo lắng là có tính nhất quán trực quan.

Tính nhất quán trực quan có nghĩa là mọi người đều nhìn thấy cùng một nội dung bên trong ứng dụng.

Hãy tưởng tượng bạn đang đứng trước bảng trắng với những người khác.

Mọi người sẽ có cùng một cái nhìn về bảng trắng.

Và bất cứ khi nào ai đó chỉ vào thứ gì đó, những người khác có thể thấy những gì họ đang chỉ vào.

Chúng tôi muốn tái tạo điều này trong trải nghiệm không gian với SharePlay.

Đưa nó trở lại ví dụ trước đây của chúng tôi, ở đây ứng dụng không có tính nhất quán trực quan.

Nếu Connor chỉ vào hình vuông trong ứng dụng, Mia sẽ thấy Persona của Connor chỉ vào vòng tròn.

Điều này phá vỡ ảo tưởng được ở bên nhau.

Tuy nhiên, nếu ứng dụng có tính nhất quán về hình ảnh, Mia sẽ thấy rõ rằng Connor đang chỉ vào hình vuông.

Trách nhiệm của ứng dụng là giữ cho nội dung và vị trí của nó đồng bộ cho tất cả những người tham gia.

Bằng cách này, có cảm giác như mọi người đang xem cùng một ứng dụng như thể họ thực sự ở bên nhau.

Trong phiên "Thiết kế trải nghiệm SharePlay không gian", chúng tôi đi vào chi tiết hơn rất nhiều về các khái niệm này.

Tôi đặc biệt khuyến khích bạn xem phiên đó để tìm hiểu thêm.

Bây giờ chúng ta đã xem xét một số khái niệm mới được giới thiệu với FaceTime trên nền tảng này, hãy đi sâu vào những gì một ứng dụng có cửa sổ nên xem xét khi áp dụng SharePlay và những bước bổ sung mà ứng dụng SharePlay iOS hiện tại nên thực hiện để nâng cao trải nghiệm của họ khi được sử dụng trong môi trường không gian.

Sau đó, Mia sẽ chỉ cho bạn các API mới để tạo ra trải nghiệm SharePlay nhập vai đáng kinh ngạc.

Để hỗ trợ SharePlay trong các ứng dụng có cửa sổ, chúng tôi đã thêm điều phối viên hệ thống mới cho các phiên nhóm.

Điều phối viên hệ thống chịu trách nhiệm về hai điều: nhận trạng thái hệ thống cho phiên SharePlay đang hoạt động và cho phép bạn cung cấp các cấu hình bổ sung trong SharePlay.

Tôi sẽ đề cập đến hai trong số này có liên quan đến cả ứng dụng có cửa sổ và ứng dụng nhập vai: cờ isSpatial và tùy chọn mẫu.

Biết liệu một người tham gia có không gian hay không là điều quan trọng khi xác định mức độ nhất quán thị giác cần thiết.

Ví dụ, ở đây chúng ta có góc nhìn thứ nhất của Connor.

Anh ấy đang trong một cuộc gọi với Mia màu đỏ, nhìn vào một tài liệu mà tôi đã chia sẻ với SharePlay.

Quan điểm của Mia về kịch bản này ở bên phải, nơi cô ấy nhìn thấy Connor trong màu xanh lam.

Khi Connor cuộn, chúng tôi muốn đồng bộ hóa vị trí cuộn.

Bằng cách đó, Mia sẽ thấy Connor cuộn và chúng tôi vẫn có sự nhất quán trực quan.

Chúng tôi thực sự làm điều này khi xoay trong tài liệu Freeform khi ở SharePlay.

Nhưng nếu bạn không phải là không gian, bạn không có bối cảnh của người khác tương tác với tài liệu.

Vì vậy, nếu Connor cuộn, chúng ta không nên đồng bộ hóa điều đó và Mia sẽ tiếp tục xem tài liệu ở cùng một vị trí.

Để quan sát xem người tham gia địa phương có không gian hay không và điều chỉnh những gì bạn đang đồng bộ hóa giữa những người tham gia, trước tiên bạn cần nhờ điều phối viên hệ thống cho phiên nhóm.

Bạn có thể biết liệu người tham gia địa phương có không gian hay không bằng cách kiểm tra xem isSpatial có đúng ở trạng thái người tham gia địa phương hay không.

Để quan sát trạng thái, bạn có thể sử dụng thuộc tính localParticipantState, trả về một chuỗi không đồng bộ sẽ lặp lại thông qua các bản cập nhật của trạng thái người tham gia cục bộ.

Điều phối viên hệ thống cũng cung cấp các ứng dụng một cách để cung cấp tùy chọn mẫu.

Các mẫu được sử dụng để xác định cách tất cả những người tham gia được đặt bởi hệ thống so với ứng dụng để thiết lập tính nhất quán không gian.

Chúng tôi hỗ trợ ba mẫu khác nhau.

Side-by-Side, chúng tôi sẽ đặt tất cả những người tham gia vào một vòng cung hướng về phía ứng dụng được chia sẻ.

Đây là mẫu mặc định sẽ được áp dụng khi ứng dụng đang sử dụng cảnh cửa sổ thông thường.

Trong mẫu Đàm thoại, tất cả những người tham gia được đặt trong một nửa vòng tròn, với ứng dụng được đặt trước nửa vòng tròn đó.

Điều này rất tốt cho những trải nghiệm mà trọng tâm không phải là nội dung trong ứng dụng.

Ví dụ, khi phát nhạc trong SharePlay.

Cuối cùng, chúng tôi có mẫu Surround.

Điều này đặt những người tham gia vào một vòng tròn và ứng dụng được đặt ở giữa vòng tròn.

Mẫu này chỉ khả dụng khi ứng dụng đang sử dụng một cảnh thể tích.

Khoảng cách giữa những người tham gia và ứng dụng dựa trên kích thước của ứng dụng.

Nếu ứng dụng lớn hơn, nó sẽ được đặt xa mọi người hơn.

Và nếu ứng dụng nhỏ hơn, nó sẽ được đặt gần hơn.

Ứng dụng SharePlay có thể cung cấp tùy chọn mẫu thông qua điều phối viên hệ thống.

FaceTime sẽ cố gắng áp dụng mẫu này trong khi phiên nhóm đang hoạt động.

Có ba tùy chọn có sẵn cho các ứng dụng SharePlay.

.None, sẽ tuân theo hành vi mặc định của hệ thống, nơi nó sẽ ở Side-by-Side cho các ứng dụng dọc và Surround cho các ứng dụng thể tích.

Đây là tùy chọn mặc định sẽ được sử dụng.

Ngoài ra còn có .sideBySide sẽ cố gắng áp dụng mẫu Side-by-Side, bất kể đó là loại ứng dụng nào.

Và cuối cùng, có .conversational, sẽ cố gắng áp dụng mẫu tương ứng.

Để định cấu hình tùy chọn mẫu, bạn chỉ cần đặt nó trên cấu hình của điều phối viên hệ thống trước khi gọi tham gia phiên nhóm.

Các mẫu được sử dụng để đặt ứng dụng và người tham gia ở vị trí tối ưu cho trải nghiệm.

Nhưng điều gì sẽ xảy ra nếu ứng dụng của bạn có nhiều cảnh cửa sổ và hiện có nhiều hơn một cảnh ở phía trước?

Trong ví dụ này, chúng tôi có một ứng dụng với ba cảnh.

Nhìn bên trái là chế độ xem duyệt.

Cảnh nhỏ ở giữa cung cấp một cách dễ dàng để điều hướng qua nội dung.

Và cảnh cuối cùng cung cấp thông tin chi tiết về một phần nội dung.

Tất cả những cảnh này có thể được mở cùng một lúc, vì vậy bạn có thể dễ dàng điều hướng nội dung trong khi đọc về nó.

Khi ở SharePlay, chúng tôi muốn cảnh chi tiết là cảnh được chia sẻ.

Nhưng nếu tất cả chúng đều mở, cảnh sai có thể được sử dụng trong mẫu.

Để giải quyết điều đó, chúng tôi đã thêm liên kết cảnh.

Đây là một cách để hệ thống biết cảnh nào của ứng dụng đang tổ chức hoạt động SharePlay.

Có hai lý do chúng ta cần biết điều này.

Đầu tiên, nó cho phép menu Chia sẻ phía trên cửa sổ hiển thị cho người đó cảnh nào được chia sẻ.

Đây là một chỉ báo hữu ích khi có nhiều cửa sổ đang mở và sẽ giúp ngăn chặn các tình huống xấu hổ có thể xảy ra khi ai đó vô tình tương tác với một cửa sổ dùng chung mà không nhận ra điều đó.

Tuy nhiên, quan trọng hơn, nó xác định cảnh cửa sổ nào sẽ được sử dụng với mẫu.

Nếu ứng dụng của bạn là một ứng dụng một cảnh, bạn không cần phải lo lắng về điều này.

Vì chỉ có một cảnh có thể xảy ra, chúng tôi sẽ tự động liên kết cảnh đó với phiên nhóm.

Tuy nhiên, các ứng dụng đa cảnh sẽ cần xem xét điều này khi áp dụng SharePlay.

Nếu không được thông qua, một cảnh mở ngẫu nhiên sẽ được chọn và nó có thể không đúng.

Hãy xem xét cách bạn có thể áp dụng hiệp hội cảnh.

Chúng ta sẽ bắt đầu bằng cách xem xét điều gì sẽ xảy ra với người đã bắt đầu hoạt động SharePlay.

Khi hoạt động nhóm được kích hoạt, chúng ta sẽ xem qua từng cảnh và kiểm tra xem cảnh nào có thể xử lý việc này.

Chúng tôi làm điều đó bằng cách đánh giá các điều kiện kích hoạt cảnh dựa trên số nhận dạng hoạt động của hoạt động nhóm.

Điều kiện kích hoạt cảnh bao gồm hai kiểm tra, có thể và thích.

Có thể chỉ ra rằng cảnh có khả năng xử lý nó, trong khi thích sẽ giúp hướng nó đến một cảnh phù hợp lý tưởng hơn với nó.

Vì vậy, chúng tôi sẽ bắt đầu bằng cách kiểm tra cảnh bên trái để xem liệu nó có thể hoặc muốn xử lý mã định danh hoạt động hay không.

Nó có thể nhưng không thích.

Tiếp theo, chúng ta sẽ kiểm tra cảnh giữa, điều này không thể.

Cuối cùng, chúng ta sẽ kiểm tra cảnh cuối cùng, cả hai đều có thể và thích.

Vì cảnh cuối cùng có thể và là cảnh ưa thích, chúng tôi sẽ liên kết nó với phiên nhóm.

Nếu không có cảnh nào có thể xử lý mã định danh, chúng tôi sẽ khởi chạy một cảnh cửa sổ mới.

Điều này thật tuyệt nếu trải nghiệm SharePlay của bạn yêu cầu cảnh riêng để hoạt động.

Nếu nhiều cảnh có thể xử lý và không cảnh nào thích, thì một trong những cảnh đó sẽ được chọn ngẫu nhiên.

Đối với những người tham gia không kích hoạt hoạt động nhóm và đang nhận nó, logic tương tự sẽ thực thi nếu ứng dụng đang chạy.

Nếu ứng dụng của bạn không chạy, nó sẽ được khởi chạy và cảnh đầu tiên sẽ được liên kết.

Để chỉ định các điều kiện kích hoạt cảnh cho một ứng dụng sử dụng vòng đời ứng dụng SwiftUI, bạn có thể sử dụng handlesExternalEvents.

Chỉ cần bao gồm mã định danh hoạt động của hoạt động nhóm trong bộ chuỗi ưu tiên hoặc cho phép.

Nếu ứng dụng của bạn sử dụng vòng đời ứng dụng UIKit, bạn có thể đặt các điều kiện kích hoạt trên cảnh giao diện người dùng bằng cách chỉ định các vị ngữ.

Để tìm hiểu thêm về các điều kiện kích hoạt cảnh, hãy xem phiên này từ năm 2019.

Hãy xem xét thêm một ví dụ nữa.

Trong trường hợp này, đó là một ứng dụng dựa trên tài liệu trong đó mỗi cảnh đại diện cho một tài liệu khác nhau.

Bây giờ chúng tôi muốn sử dụng SharePlay để cộng tác trên tài liệu đầu tiên.

Chúng tôi sẽ sử dụng lại mã định danh hoạt động nhóm để đánh giá từng điều kiện kích hoạt của cảnh.

Thật không may, không có gì khác biệt về những cảnh này, vì vậy tất cả chúng đều kết hợp và cảnh sai được liên kết.

Trong trường hợp này, chúng tôi muốn thay đổi mã định danh được sử dụng để khớp các cảnh.

Để thực hiện điều này, chúng tôi đã thêm hành vi liên kết cảnh.

Điều này cho phép một ứng dụng cung cấp một mã định danh sẽ được sử dụng để tìm đúng cảnh.

Quay trở lại ví dụ của chúng tôi, chúng tôi có thể sử dụng một mã định danh duy nhất của mỗi tài liệu mà tất cả những người tham gia đều đồng ý.

Sau đó chúng tôi sẽ sử dụng mã định danh đó để tìm đúng cảnh.

Nếu chúng ta đánh giá các cảnh ngay bây giờ, chúng ta có thể dễ dàng định cấu hình các điều kiện kích hoạt cảnh để chỉ cảnh đầu tiên được khớp và chúng ta sẽ kết thúc với sự liên kết cảnh phù hợp.

Bạn có thể chỉ định mã định danh sẽ được sử dụng bằng cách đặt hành vi liên kết cảnh trên siêu dữ liệu của hoạt động nhóm của bạn.

Hãy nhớ rằng cùng một mã định danh sẽ được sử dụng cho tất cả những người tham gia khác tham gia phiên SharePlay.

Vì vậy, bạn muốn sử dụng thứ gì đó mà mọi người sẽ đồng ý.

Chúng tôi hỗ trợ ba loại hành vi liên kết cảnh.

Mặc định là hành vi mà chúng tôi đã xem xét đầu tiên, trong đó mã định danh được sử dụng để liên kết cảnh sẽ là mã định danh hoạt động nhóm.

Như tên đã chỉ ra, đây là một hành vi mặc định nếu bạn không chỉ định rõ ràng.

Hành vi nội dung cho phép bạn chỉ định một mã định danh tùy chỉnh.

Điều này có nghĩa là cho các ứng dụng mà mỗi cảnh sẽ hiển thị nội dung khác nhau và hoạt động nhóm được gắn với nội dung đó.

Cuối cùng, chúng tôi đưa ra hành vi không có.

Hành vi không có sẽ vô hiệu hóa sự liên kết cảnh.

Điều này có nghĩa là sẽ không có cảnh nào được liên kết, vì vậy người đó sẽ không nhìn thấy biểu ngữ được chia sẻ phía trên bất kỳ cảnh nào trong ứng dụng của bạn.

Nó cũng có nghĩa là tính nhất quán không gian bị phá vỡ.

Điều này chỉ nên được sử dụng trong các trường hợp cụ thể, chẳng hạn như các ứng dụng nhập vai không cần cảnh bổ sung hoặc trong trường hợp nội dung được hiển thị trong cảnh khác nhau đối với mỗi người tham gia phiên SharePlay.

Đôi khi bạn có thể cần biết một phiên họp nhóm được liên kết với cảnh nào.

Điều này có thể xảy ra nếu nhiều cảnh có khả năng được chọn để liên kết cảnh.

Để có được thông tin này, chúng tôi đã hiển thị một thuộc tính mới trong phiên nhóm được gọi là sceneSessionIdentifier.

Thuộc tính này sẽ bao gồm mã định danh của phiên cảnh được liên kết với phiên nhóm.

Liên kết cảnh là rất quan trọng để xây dựng trải nghiệm SharePlay tuyệt vời, vì vậy hãy chắc chắn áp dụng nó nếu bạn có một ứng dụng hỗ trợ nhiều cảnh.

Cuối cùng, hãy nói về SharePlay từ menu Chia sẻ.

Khi ở trong FaceTime, mỗi cửa sổ đều có một biểu ngữ chia sẻ phía trên nó.

Như chúng ta vừa thấy, nó sẽ cho biết cảnh nào được chia sẻ khi ở SharePlay.

Nhưng nó cũng hữu ích khi không có trong SharePlay.

Khi một cảnh không được chia sẻ, nó sẽ chỉ ra những cách khác nhau mà cảnh đó có thể được chia sẻ.

Một lựa chọn là chỉ cần chia sẻ cửa sổ.

Mọi người khác sẽ thấy nguồn cấp dữ liệu video không tương tác của cửa sổ.

Điều này hoạt động ngay lập tức cho tất cả các ứng dụng.

Tuy nhiên, một ứng dụng SharePlay có thể đưa điều này đi xa hơn.

Bằng cách hiển thị một hoạt động nhóm có liên quan đến nội dung hiện tại của cửa sổ, nó sẽ xuất hiện trong menu đó.

Đây là một cách tuyệt vời để cải thiện khả năng khám phá hoạt động SharePlay của bạn và cũng có thể loại bỏ nhu cầu có nút SharePlay chuyên dụng trong giao diện người dùng ứng dụng của bạn.

Cách một ứng dụng hiển thị hoạt động nhóm được thực hiện giống như cách bắt đầu SharePlay qua AirDrop.

Trong iOS 17, bạn có thể bắt đầu SharePlay thông qua AirDrop bằng cách mở ứng dụng SharePlay.

Để tìm nạp hoạt động nhóm, hệ thống đi qua chuỗi phản hồi giao diện người dùng của cảnh đang được hiển thị và cố gắng tìm hoạt động nhóm được chỉ định trong cấu hình mục hoạt động của một trong những người phản hồi.

Bằng cách đó, bạn chỉ có thể đặt hoạt động nhóm trên cấu hình các mục hoạt động của bộ điều khiển chế độ xem đang hiển thị nội dung SharePlayable và nó sẽ được chọn tự động.

Để định cấu hình cấu hình Mục Hoạt động, bạn bắt đầu bằng cách tạo hoạt động có thể được kích hoạt.

Tiếp theo, bạn sẽ tạo một nhà cung cấp mặt hàng và đăng ký hoạt động nhóm trên đó.

Sau đó, bạn khởi tạo UIActivityItemsConfiguration với nhà cung cấp mặt hàng.

Cuối cùng, bạn sẽ cần đảm bảo rằng cấu hình hiển thị siêu dữ liệu phù hợp, vì đó là những gì sẽ được trình bày trong menu Chia sẻ.

Để làm điều đó, bạn có thể sử dụng metadataProvider trên UIActivityItemsConfiguration và cung cấp một đối tượng LPLinkMetadata cho khóa LinkPresentationMetadata.

Nhà cung cấp tiêu đề và hình ảnh sẽ được sử dụng trong menu Chia sẻ.

Tất cả những điều này cũng sẽ hoạt động nếu bạn sử dụng lớp của riêng mình phù hợp với UIActivityItemsConfigurationReading.

Tôi vừa đề cập đến những gì bạn sẽ cần cân nhắc khi xây dựng trải nghiệm SharePlay có cửa sổ cho nền tảng này.

Mia, bạn có thể hướng dẫn chúng tôi cách xây dựng trải nghiệm được chia sẻ cho các ứng dụng nhập vai không?

Mia Ren: Không vấn đề gì, Willem.

Bây giờ hãy kiểm tra cách SharePlay hoạt động cho các ứng dụng nhập vai.

Trên nền tảng này, chúng ta có thể dễ dàng tạo ra những trải nghiệm nhập vai bằng cách sử dụng Immersive Space.

Immersive Space là một cảnh đặc biệt cho phép một ứng dụng làm cho nội dung của nó vượt ra ngoài ranh giới với các phong cách đắm chìm khác nhau.

Khi ứng dụng mở ra một Không gian Nhập vai, hệ thống sẽ nền tảng cho tất cả các ứng dụng khác và mọi người có thể hoàn toàn tập trung vào thế giới không giới hạn của ứng dụng này.

Bạn có thể xem phiên này để tìm hiểu thêm về Không gian nhập vai và Phong cách đắm chìm.

Trong FaceTime, bạn có thể khởi chạy Immersive Space bất cứ lúc nào.

Khi bạn ở trong một không gian nhập vai riêng tư, bạn đang ở trong thế giới riêng tư của mình và bạn phá vỡ bối cảnh chung với những người khác.

Bởi vì điều này, hệ thống sẽ che giấu những người khác cho bạn.

Và họ sẽ xem bạn là ảnh liên lạc của bạn, điều này cho thấy bạn không ở bên họ ngay bây giờ.

Mọi người vẫn có thể giao tiếp bằng âm thanh.

Nhưng thôi nào, chúng tôi không muốn ở một mình trong FaceTime.

Hãy chia sẻ những khoảnh khắc kỳ diệu trong thế giới nhập vai.

Tôi có nhiều ý tưởng tuyệt vời về những trải nghiệm nhập vai mà tôi rất muốn chia sẻ với bạn tôi.

Ví dụ, nó có thể là một hoạt động nhóm như thế này, đi chơi ngoài không gian và cùng nhau khám phá hành tinh xinh đẹp của chúng ta.

Để thực hiện điều này, ứng dụng được chia sẻ của chúng tôi cần định cấu hình một không gian nhập vai nhóm có thể được chia sẻ với mọi người.

Trong cấu hình của điều phối viên hệ thống, bạn có thể tìm thấy cờ supportsGroupImmersiveSpace.

Bằng cách kích hoạt nó, ứng dụng cho hệ thống biết rằng Immersive Space trong ứng dụng này có nghĩa là được chia sẻ và muốn hỗ trợ các hoạt động nhóm nhập vai.

Khi mọi người tham gia một phiên nhóm có bật cờ này, không gian nhập vai của họ sẽ trở thành không gian nhập vai nhóm.

Hệ thống sẽ di chuyển nguồn gốc không gian đến một vị trí được chia sẻ được xác định bởi mẫu để thiết lập một hệ tọa độ được chia sẻ cho sự nhất quán về không gian.

Mọi người trong không gian nhập vai của nhóm sẽ xem nhau như Personas.

Bây giờ chúng ta đã có một không gian nhập vai nhóm với một hệ tọa độ được chia sẻ và mọi người trong đó, chúng ta có thể đặt các đối tượng ở cùng một vị trí trong đó để có được sự nhất quán về không gian.

Trong ví dụ hoạt động khám phá toàn cầu, chúng ta có thể đặt một quả địa cầu ở trung tâm phía trên nguồn gốc và đảm bảo rằng chúng ta áp dụng cùng một độ lệch so với nguồn gốc cho mọi người.

Mọi người sau đó sẽ nhìn thấy quả địa cầu ở cùng một vị trí.

Tiếp theo, chúng ta sẽ tìm ra cách duy trì tính nhất quán của hình ảnh.

Ví dụ, nếu chúng ta muốn xoay địa cầu, chúng ta sẽ cần đảm bảo rằng hướng của nó được đồng bộ hóa giữa mọi người.

Để tìm hiểu thêm về cách sử dụng GroupSession và GroupSessionMessenger để đồng bộ hóa trạng thái, hãy xem phiên SharePlay này.

Chúng tôi cũng có thể thêm một số yếu tố giao diện người dùng liên quan đến mỗi người trong một không gian nhập vai nhóm.

Ví dụ, chúng tôi có thể cung cấp cho mọi người tham gia một menu điều khiển riêng tư như thế này.

Nó ở ngay trước mặt họ.

Họ có thể sử dụng nó để thao tác quả địa cầu được chia sẻ một cách dễ dàng.

Để đặt điều khiển này đúng cách, chúng ta phải biết người dùng cục bộ đang ở đâu trong không gian nhập vai của nhóm.

Chúng ta có thể sử dụng phương pháp systemExperienceDisplacement trong GeometryReader3D.

Phương pháp này cho bạn biết cách hệ thống đã đặt nguồn gốc không gian cách xa người dùng cục bộ.

Nó trả về một cấu trúc Pose3D, có cả tịnh tiến và xoay.

Để có được vị trí của người dùng cục bộ liên quan đến nguồn gốc không gian, chúng ta có thể đảo ngược tư thế này.

Sau đó, chúng ta có thể sử dụng nó để bù đắp và xoay điều khiển, vì vậy nó sẽ xuất hiện liên quan đến người dùng cục bộ.

Một điều cần lưu ý là dịch chuyển không cập nhật nếu người dùng di chuyển.

Nó chỉ cung cấp sự dịch chuyển của không gian khi nó được đặt ban đầu.

Điều này cung cấp một cách dễ dàng để đặt nội dung liên quan đến người đó mà không cần phải theo dõi đầy đủ vị trí của họ.

Mẫu vòm rất phù hợp cho hoạt động khám phá toàn cầu, nơi ứng dụng chỉ có một không gian nhập vai nhóm với nội dung được chia sẻ ở trung tâm.

Nhưng điều gì sẽ xảy ra nếu hoạt động nhóm của bạn có cả cửa sổ chung và không gian nhập vai nhóm?

Ví dụ, tôi muốn xây dựng một hoạt động nhóm để nghiên cứu hệ mặt trời như thế này, nơi mọi người có thể bắt đầu bằng cách đọc về một hành tinh trên một cửa sổ chung.

Và họ có thể nhấn một nút để xem xét kỹ hơn mô hình hành tinh trong một không gian nhập vai nhóm.

Tôi muốn mọi người luôn ở bên cạnh nhau trong cả hai trường hợp.

Hãy kiểm tra xem chúng ta có thể làm gì với mẫu.

Theo mặc định, khi ứng dụng của bạn chỉ có không gian nhập vai nhóm, mẫu Surround sẽ được áp dụng và nguồn gốc không gian sẽ được đặt ở trung tâm.

Bố cục tương tự được áp dụng khi ứng dụng của bạn cũng có một cảnh thể tích được chia sẻ.

Nhưng nếu ứng dụng của bạn có cửa sổ dọc được chia sẻ, mẫu Side-by-Side sẽ được chọn theo mặc định và nguồn gốc không gian nằm ngay bên dưới cửa sổ được chia sẻ.

Nhưng hãy nhớ rằng, bạn luôn có thể thay đổi tùy chọn mẫu thành tùy chọn phù hợp nhất với hoạt động nhóm của bạn.

Bạn có thể chọn mẫu .conversational hoặc mẫu .sideBySide, mà tôi nghĩ sẽ là một mẫu tuyệt vời cho hoạt động khám phá năng lượng mặt trời của chúng tôi.

Như chúng ta đã biết trước đây, khoảng cách trong mẫu được điều chỉnh động dựa trên kích thước của cửa sổ được chia sẻ.

Bạn có thể tự hỏi làm thế nào chúng tôi có thể đảm bảo rằng khoảng cách là tốt khi chỉ có một không gian nhập vai nhóm.

Để giải quyết vấn đề này, chúng tôi có một núm hữu ích để tinh chỉnh các mẫu được gọi là phạm vi nội dung.

Đó là một công cụ sửa đổi tùy chọn mẫu, hoạt động cho cả hoạt động nhóm nhập vai và dựa trên cửa sổ.

Các ứng dụng có thể đặt giá trị này làm khoảng cách từ trung tâm của nội dung đến cạnh xa nhất của nó tính theo điểm.

Khi phạm vi nội dung được thiết lập, mẫu đang hoạt động sẽ tính đến giá trị này để đặt mọi người liên quan đến ứng dụng.

Được rồi, hãy áp dụng những gì chúng ta đã học về mẫu và định cấu hình phiên nhóm cho hoạt động khám phá năng lượng mặt trời mà chúng ta đã trình bày trước đây.

Đầu tiên, chúng ta nên bật supportGroupImmersiveSpace để mọi người có thể xem đối tượng cùng nhau trong khi nhập vai.

Tiếp theo, hãy đặt tùy chọn mẫu thành .sideBySide và cũng thêm công cụ sửa đổi cho contentExtent để mọi người luôn có thể ở cạnh nhau và có khoảng cách lớn với nội dung được chia sẻ.

Tuyệt. Hãy xem hoạt động nhóm này sẽ như thế nào với mọi người.

Ở đây, tôi đang ở với bạn tôi Connor, và chúng tôi đang duyệt qua các hành tinh trên một cửa sổ chung cạnh nhau.

Sau đó, tôi nhấn một nút, cho phép tôi đi vào một không gian nhập vai nhóm để khám phá Sao Thổ.

Mặc dù tôi ngạc nhiên bởi người mẫu này đẹp như thế nào, tôi cũng thấy Connor không còn ở bên tôi nữa, và tất cả những gì tôi thấy là ảnh liên lạc của anh ấy.

Nhưng thực ra, Connor bị bỏ lại phía sau, vẫn đang quan sát cửa sổ.

Anh ấy cần tự nhấn nút để vào không gian nhập vai của nhóm.

Như chúng ta đã biết trước đây, khi mọi người không ở trong không gian nhập vai nhóm cùng nhau, họ sẽ không có bối cảnh chung.

Vì vậy, hệ thống sẽ ẩn các tính cách không gian và hiển thị ảnh liên hệ.

Nếu chúng ta vẫn có thể nhìn thấy Persona của nhau, Connor có thể cảm thấy thực sự bối rối khi tôi trông ngạc nhiên về điều gì đó mà anh ấy không nhìn thấy.

Tình huống tương tự có thể xảy ra nếu không gian nhập vai của nhóm chúng tôi được trình bày theo các phong cách đắm chìm khác nhau.

Ví dụ, tôi đang nhìn xung quanh trong một môi trường hoàn toàn nhập vai, nhưng Connor vẫn đi qua.

Nhưng sẽ thật tuyệt nếu Connor có thể tự động theo tôi vào cùng một không gian nhập vai của nhóm.

Và khi anh ấy không ở với tôi ở đó, anh ấy có thể biết tôi đang ở đâu và tham gia cùng tôi một cách dễ dàng.

Để giảm thiểu các liên hệ phân chia trong hoạt động nhóm nhập vai của bạn, chúng tôi có một công cụ tuyệt vời mà bạn có thể sử dụng trong điều phối viên hệ thống được gọi là groupImmersionStyle.

Nó cung cấp một chuỗi không đồng bộ của phong cách ngâm tùy chọn, cho ứng dụng của bạn biết một phong cách ngâm cụ thể của không gian nhập vai nhóm mà người khác tham gia hoặc không khi họ rời khỏi không gian nhập vai nhóm.

Ví dụ, khi tôi mở một không gian nhập vai nhóm, ứng dụng của Connor sẽ nhận được phong cách ngâm của nó và ứng dụng của anh ấy có thể mở một không gian nhập vai nhóm với phong cách phù hợp.

Sau đó, chúng ta sẽ ở bên nhau trong không gian nhập vai của nhóm và đã chia sẻ bối cảnh một lần nữa.

Tương tự như vậy, khi Connor nhấn nút và rời khỏi không gian nhập vai của nhóm, ứng dụng của tôi sẽ nhận được không và có thể loại bỏ không gian nhập vai.

Giờ đây với sự trợ giúp của phong cách hòa nhập nhóm, mọi người luôn có thể ở bên nhau.

Đôi khi bạn có thể muốn tạm thời bước ra khỏi trải nghiệm nhập vai vì điều gì đó khẩn cấp.

Bạn có thể làm điều đó chỉ với một lần nhấn vào Digital Crown.

Trong trường hợp này, hệ thống sẽ không làm phiền người khác và thay đổi phong cách hòa nhập nhóm của họ.

Khi bạn bước ra ngoài, bạn sẽ thấy một thông báo biểu ngữ SharePlay, cho bạn biết phần còn lại của nhóm ở đâu và cũng cung cấp cho bạn một nút để tham gia trở lại không gian nhập vai của nhóm một cách dễ dàng.

Khi bạn nhấn vào nút Tham gia, một kiểu ngâm nhóm sẽ được gửi đến ứng dụng của bạn để thiết lập không gian nhập vai nhóm.

Được rồi, chúng ta đã thấy rất nhiều trong phiên này.

Hãy tóm tắt lại!

Chúng tôi đã tìm hiểu về bối cảnh được chia sẻ và cách sử dụng điều phối viên hệ thống và liên kết cảnh để quản lý tính nhất quán về không gian và hình ảnh trong cả ứng dụng chia sẻ có cửa sổ và nhập vai.

Chúng tôi đã giới thiệu các tùy chọn mẫu cho ứng dụng của bạn để đặt mọi người đúng cách.

Và cuối cùng, chúng tôi cũng đã chỉ cho bạn một cách mới để bắt đầu SharePlay bằng cách sử dụng menu Chia sẻ.

Cảm ơn vì đã điều chỉnh.

Chúng tôi nóng lòng muốn xem bạn sẽ xây dựng những trải nghiệm đáng kinh ngạc nào với SharePlay.

♪