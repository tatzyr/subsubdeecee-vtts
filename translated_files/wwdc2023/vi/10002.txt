10002

♪ ♪

Keith Holleman: Xin chào, tên tôi là Keith Holleman, và tôi là thành viên của nhóm Công nghệ Internet tại Apple.

Hôm nay tôi sẽ nói về cách bạn có thể sử dụng chuyển tiếp mạng để tăng cường quyền riêng tư và bảo mật cho các ứng dụng của mình.

Chúng tôi sẽ bắt đầu phiên này bằng cách khám phá công nghệ được sử dụng cho chuyển tiếp mạng.

Rơ le được sử dụng trên nhiều tính năng bảo mật tại Apple.

Chúng tôi thích cách công nghệ này vừa hiệu quả vừa dễ sử dụng, và bây giờ bạn cũng sẽ có hai cách để sử dụng rơ le trong các ứng dụng của mình.

Đầu tiên, bạn có thể định cấu hình chuyển tiếp trong một ứng dụng để bảo vệ lưu lượng mạng cho ứng dụng của mình.

Thứ hai, bạn có thể mở rộng chuyển tiếp đến thiết bị để truy cập tài nguyên riêng tư trong doanh nghiệp, như một giải pháp thay thế cho VPN.

Hãy đi sâu vào và bắt đầu.

Relays tạo thành cơ sở của các tính năng tuyệt vời, chẳng hạn như iCloud Private Relay, bảo vệ quyền riêng tư của Mail và ẩn địa chỉ IP khỏi trình theo dõi trong Safari.

Ứng dụng của bạn cũng có thể xử lý thông tin nhạy cảm về người dùng mà họ muốn giữ riêng tư và bạn có thể muốn đảm bảo rằng máy chủ của riêng bạn không thể liên kết thông tin đó với địa chỉ IP của khách hàng.

Giờ đây, ứng dụng của bạn có thể sử dụng chuyển tiếp mà bạn chọn để cung cấp các biện pháp bảo vệ quyền riêng tư mạnh mẽ cho tất cả người dùng của bạn.

Chuyển tiếp là một loại proxy đặc biệt được tối ưu hóa cho hiệu suất, sử dụng các giao thức vận chuyển và bảo mật mới nhất và được tích hợp nguyên bản vào ngăn xếp mạng hiện đại có sẵn trên nền tảng Apple.

Có hai giao thức tiêu chuẩn được xác định bởi IETF mà các rơle này sử dụng: MASQUE và Oblivious HTTP.

Rơ le MASQUE là một cách tuyệt vời để tăng cường quyền riêng tư cho ứng dụng của bạn hoặc truy cập các tài nguyên riêng tư.

Bạn có thể gửi bất kỳ kết nối TCP hoặc UDP nào thông qua chuyển tiếp mà không cần sửa đổi máy chủ phụ trợ.

Bạn có thể nối các máy chủ chuyển tiếp lại với nhau để không một thực thể nào có thể kết hợp địa chỉ IP và hoạt động duyệt web thành hồ sơ chi tiết của người dùng.

Đây là công nghệ nền tảng đằng sau iCloud Private Relay.

Chuyển tiếp cũng là một cách tuyệt vời để truy cập tài nguyên doanh nghiệp.

Chuyển tiếp cung cấp trải nghiệm người dùng tốt hơn, hiệu suất cao hơn và dễ quản lý hơn VPN.

Chuyển tiếp MASQUE sử dụng TLS 1.3 để bảo mật tất cả lưu lượng truy cập đến proxy, không giống như các giao thức proxy kế thừa.

MASQUE sử dụng QUIC, giao thức vận chuyển mới nhất và HTTP/3 để ủy quyền và ghép kênh hiệu quả nhiều kết nối trên một đường hầm duy nhất.

Và đối với các trường hợp QUIC bị chặn bởi mạng, họ có thể quay lại sử dụng HTTP/2.

Nếu ứng dụng của bạn gửi các yêu cầu HTTP mà bạn muốn đảm bảo là riêng tư và không được liên kết với bất kỳ yêu cầu nào khác, chẳng hạn như báo cáo số liệu ẩn danh, tra cứu cơ sở dữ liệu hoặc truy vấn DNS, bạn cũng có thể sử dụng Oblivious HTTP.

Với Oblivious HTTP, bạn có thể có được hiệu suất và sự riêng tư tuyệt vời chỉ với một bước nhảy chuyển tiếp duy nhất.

Không giống như rơle MASQUE, Oblivious HTTP không hoạt động với các máy chủ tùy ý; máy chủ của bạn cần hỗ trợ rõ ràng nó.

Để tìm hiểu thêm về Oblivious HTTP, hãy xem phiên "Có gì mới trong Quyền riêng tư."

Bạn có thể sử dụng cả hai loại chuyển tiếp này cho các kết nối proxy được thực hiện bởi ứng dụng của bạn.

Điều này cho phép bạn sử dụng các máy chủ chuyển tiếp cụ thể mà bạn chọn để tăng quyền riêng tư cho ứng dụng của mình.

Lớp ProxyConfiguration mới cho phép bạn xác định các chuyển tiếp của mình trong khung Mạng, URLSession và WebKit.

Cả ba API đều sử dụng lớp chung này theo cách tương tự và cho phép bạn xác định chuyển tiếp cho toàn bộ ứng dụng của mình hoặc chỉ các kết nối cụ thể.

Trong đối tượng ProxyConfiguration, bạn có thể xác định proxy dựa trên năm giao thức khác nhau.

Đây là nơi bạn có thể chỉ định các loại chuyển tiếp mới cho cả MASQUE và Oblivious HTTP.

Đối tượng tương tự cũng có thể được sử dụng để định cấu hình các loại proxy kế thừa.

Nếu bạn đã định cấu hình proxy trên URLSession hoặc WebKit với từ điển trước đây, bây giờ là thời điểm tuyệt vời để chuyển sang sử dụng đối tượng mới này.

Đối với các loại proxy kế thừa, bạn có thể định cấu hình HTTP CONNECT, với sự hỗ trợ mới được thêm vào cho TLS vào proxy, cũng như SOCKSv5.

Đây là cách bạn xác định Cấu hình Proxy sẽ được sử dụng để kết nối với chuyển tiếp MASQUE qua HTTP/3.

Đầu tiên, sử dụng NWEndpoint để chỉ định tên máy chủ hoặc URL và sử dụng nó để xác định bước nhảy chuyển tiếp.

Đối với các bước nhảy chuyển tiếp này, bạn có thể chỉ định hỗ trợ cho HTTP/3, HTTP/2 hoặc cả hai.

Máy chủ HTTP/2 sẽ được sử dụng làm bản sao lưu trong trường hợp quyền truy cập vào HTTP/3 bằng giao thức QUIC bị chặn bởi mạng.

Sau đó, tạo một cấu hình proxy bằng cách chuyển rơle của bạn đến tham số mảng "relayHops".

Nếu bạn muốn xác định cấu hình rơle đa bước nhảy, bạn có thể chuyển hai rơ le ở đây.

Để sử dụng Cấu hình Proxy của bạn với NWConnection từ khung Mạng, hãy tạo PrivacyContext hoặc sử dụng ngữ cảnh mặc định và thêm cấu hình proxy vào ngữ cảnh đó.

Đặt ngữ cảnh trên NWParameters của bạn, và sau đó chuyển các tham số này khi bạn tạo và bắt đầu kết nối.

Bây giờ kết nối này đang gửi tất cả lưu lượng truy cập của nó thông qua proxy.

Bạn cũng có thể sử dụng cùng một cấu hình proxy mà chúng tôi đã xác định trực tiếp trong URLSession.

Để làm điều này, hãy thêm cấu hình của bạn vào mảng Cấu hình proxy trên URLSessionConfiguration của bạn.

Sau đó, chạy các tác vụ trong URLSession của bạn như bình thường và bây giờ chúng cũng sẽ sử dụng proxy.

Đối tượng cấu hình proxy tương tự cũng có thể được sử dụng để ủy quyền các kết nối được thực hiện trong chế độ xem WebKit!

Đầu tiên, khởi tạo cấu hình chế độ xem web, thêm kho dữ liệu và thêm cấu hình proxy của bạn vào kho dữ liệu.

Sau đó khởi tạo chế độ xem web với cấu hình của bạn.

Sau khi hoàn tất, bạn có thể tải URL được yêu cầu và sử dụng chế độ xem WebKit như bình thường.

Bây giờ, chế độ xem Webkit này cũng đang gửi lưu lượng truy cập của nó qua chuyển tiếp.

Bên cạnh việc thêm chuyển tiếp vào ứng dụng của riêng bạn, trong iOS 17, bạn có thể định cấu hình chúng cho toàn bộ thiết bị.

Ngoài việc cho phép bạn xây dựng các tính năng bảo mật, đây là một cách tuyệt vời để sử dụng chuyển tiếp để cung cấp quyền truy cập vào tài nguyên mạng doanh nghiệp tư nhân.

Bạn có thể đang sử dụng VPN để cung cấp quyền truy cập vào tài nguyên doanh nghiệp của mình.

Rơle là một giải pháp thay thế cho VPN có thể cung cấp trải nghiệm người dùng tốt hơn và dễ quản lý hơn.

Chuyển tiếp mạng không yêu cầu đàm phán phiên phức tạp và thường yêu cầu ít chuyến đi khứ hồi hơn trước khi dữ liệu người dùng thực tế được chuyển.

Điều này đảm bảo rằng tải tài nguyên riêng tư đầu tiên của người dùng là tương tác phản hồi nhanh nhất có thể.

Chuyển tiếp cũng tránh sử dụng các đường hầm, giao diện ảo và địa chỉ IP bổ sung được liên kết với VPN.

Vì bạn có thể định cấu hình nhiều rơle cùng một lúc, nên việc truy cập các miền riêng tư khác nhau nằm trong các mạng khác nhau sẽ dễ dàng hơn.

Các công ty doanh nghiệp muốn sử dụng máy chủ chuyển tiếp thay thế cho VPN giờ đây có các tùy chọn để sử dụng chúng với cơ sở hạ tầng của riêng họ.

Cisco đang cung cấp dịch vụ chuyển tiếp doanh nghiệp như một phần của dịch vụ Cisco Secure Edge.

Chúng tôi rất vui khi thấy các doanh nghiệp áp dụng tùy chọn này để cung cấp quyền truy cập từ xa cho người dùng của họ.

Có hai cách để cài đặt cấu hình rơle MASQUE trên một thiết bị.

Các tổ chức doanh nghiệp có thể đẩy một cấu hình thông qua Quản lý thiết bị di động, hoặc MDM, để xác định các rơ le bằng cách sử dụng loại tải trọng chuyển tiếp mới.

Các tải trọng này có thể áp dụng cho các ứng dụng, miền được quản lý hoặc toàn bộ thiết bị.

Thứ hai, bạn có thể viết một ứng dụng sử dụng NERelayManager API để xác định chuyển tiếp của bạn.

Các cấu hình này có thể áp dụng cho các miền cụ thể hoặc toàn bộ thiết bị.

Cả hai đều có sẵn trong macOS, iOS, iPadOS và tvOS.

Và bây giờ hỗ trợ Mở rộng Mạng được thêm vào tvOS, VPN cũng mới được hỗ trợ trong tvOS 17.

Đây là cách bạn định cấu hình chuyển tiếp bằng cách sử dụng cấu hình hồ sơ.

Giống như trong ProxyConfiguration API cho các ứng dụng của bạn, bạn xác định URL chuyển tiếp.

Cũng giống như trong hồ sơ VPN, bạn có thể sử dụng chứng chỉ máy khách để xác thực các máy chủ doanh nghiệp của mình bằng cách tham khảo tải trọng chứng chỉ trong cùng một hồ sơ.

Bạn có thể áp dụng chuyển tiếp cho các miền cụ thể bằng cách thêm chúng vào phần MatchDomains của tải trọng.

Tiếp theo, chúng ta sẽ xem cách một ứng dụng có thể sử dụng NERelayManager API để thêm chuyển tiếp vào thiết bị theo chương trình.

Để xác định một chuyển tiếp, bạn sẽ cần khởi tạo một đối tượng NERelay và sau đó định cấu hình các URL của các chuyển tiếp của bạn.

Ở đây, tôi đang sử dụng cùng một chuyển tiếp cho cả HTTP/2 và HTTP/3.

Nếu chuyển tiếp của bạn yêu cầu các tiêu đề HTTP bổ sung, hãy thêm chúng vào đối tượng NERelay.

Bạn cũng sẽ cần truy cập vào đối tượng NERelayManager được chia sẻ, vì đây là nơi bạn sẽ lưu trữ đối tượng NERelay mà bạn vừa tạo.

Nếu bạn muốn chuyển tiếp của mình chỉ áp dụng cho các miền cụ thể thay vì toàn bộ thiết bị, hãy thêm các miền đó vào mảng matchDomains.

Bước cuối cùng là đảm bảo chuyển tiếp của bạn được bật và cài đặt đối tượng NERelayManager của bạn vào tùy chọn hệ thống.

Hãy xem xét các rơ le đang hoạt động.

Tôi thực sự thích đi xe đạp leo núi và tôi thậm chí còn mở cửa hàng xe đạp của riêng mình.

Cửa hàng của tôi có một cửa hàng trực tuyến và một trang web nội bộ nơi tôi có thể theo dõi tất cả các đơn đặt hàng của mình.

Trang web đó nằm trên mạng nội bộ của tôi và chỉ dành cho nhân viên.

Nếu tôi mở Safari và cố gắng xem các đơn đặt hàng đang mở của mình, tôi không thể nhìn thấy chúng vì tôi không sử dụng mạng nội bộ của mình.

Khi tôi cài đặt cấu hình chuyển tiếp, tôi sẽ có thể truy cập mạng nội bộ của mình từ bất cứ đâu.

Nếu tôi mở ứng dụng chuyển tiếp mẫu của mình bằng mã mà chúng tôi vừa xem qua, tôi có thể định cấu hình toàn bộ thiết bị để sử dụng chuyển tiếp của cửa hàng trong khi truy cập miền nội bộ của mình.

Cấu hình này bây giờ cũng sẽ hiển thị trong Cài đặt và chúng ta có thể thấy rằng nó sẽ sử dụng chuyển tiếp khi tôi truy cập internal.example.com.

Bây giờ, khi tôi quay lại Safari và một lần nữa cố gắng xem xét các đơn đặt hàng đang mở của mình, bây giờ tôi có thể thấy chúng và tôi cần bao nhiêu đơn đặt hàng để được vận chuyển.

Nó đơn giản, nhanh chóng và đáp ứng trong lần tải đầu tiên.

Relays là proxy hiện đại, dựa trên tiêu chuẩn có thể cải thiện tính bảo mật và quyền riêng tư của ứng dụng của bạn mà không ảnh hưởng đến hiệu suất.

Trực tiếp áp dụng chuyển tiếp MASQUE và chuyển tiếp HTTP lãng quên trong ứng dụng của bạn để tăng cường quyền riêng tư cho người dùng của bạn.

Và đối với các doanh nghiệp, hãy bắt đầu thay thế việc sử dụng VPN bằng các rơ le dễ quản lý hơn và cung cấp trải nghiệm người dùng liền mạch hơn.

Cảm ơn bạn đã dành thời gian để xem hôm nay.

Tôi nóng lòng muốn xem bạn sử dụng rơ le như thế nào.