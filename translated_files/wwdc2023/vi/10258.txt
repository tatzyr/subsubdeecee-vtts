10258

♪ ♪

Anant: Xin chào. Chào mừng đến với "Biểu tượng hoạt hình trong ứng dụng của bạn."

Tên tôi là Anant, và tôi là một kỹ sư trên UIKit.

Biểu tượng SF là một phần mang tính biểu tượng của giao diện Apple.

Chúng trông tuyệt đẹp trong các menu, thanh công cụ, thanh bên và hơn thế nữa.

Và bởi vì mọi người quen thuộc với các biểu tượng, chúng làm cho ứng dụng của bạn trực quan hơn để sử dụng.

Trong iOS 17 và macOS Sonoma, chúng tôi đang tăng cường các biểu tượng bằng hoạt ảnh, mang lại sức sống cho các ứng dụng của bạn hơn bao giờ hết.

Tôi sẽ bắt đầu với một chuyến tham quan các hình ảnh động biểu tượng mới, còn được gọi là "hiệu ứng biểu tượng".

Sau đó, tôi sẽ hướng dẫn bạn thông qua các API mới trong SwiftUI, UIKit và AppKit để thêm hiệu ứng biểu tượng vào ứng dụng của bạn.

Và cuối cùng, tôi sẽ cung cấp cho bạn một số mẹo để làm cho hiệu ứng biểu tượng thực sự tỏa sáng.

Vậy hãy nhảy vào.

iOS 17 và macOS Sonoma giới thiệu một bộ sưu tập các hình ảnh động phổ quát có thể được áp dụng cho bất kỳ hình ảnh biểu tượng nào, ngay cả các biểu tượng tùy chỉnh.

Những hình ảnh động này được gọi là Bounce, Pulse, Variable Color, Scale, Appear, Disappear, và Replace.

Tôi khuyên bạn nên xem phiên "Có gì mới trong SF Symbols 5" để đi sâu hơn vào bản thân các hình ảnh động, bao gồm các phương pháp hay nhất để thiết kế giao diện với chúng.

Trong API, những hình ảnh động này được gọi là "hiệu ứng biểu tượng" và khung Biểu tượng mới là nơi có tất cả chúng.

Nó được bao gồm miễn phí khi bạn sử dụng SwiftUI, AppKit hoặc UIKit để xây dựng ứng dụng của mình.

Một tính năng thực sự thú vị của khung Biểu tượng là mỗi hiệu ứng có một tên được phân tách bằng dấu chấm đơn giản.

Vì vậy, để tạo hiệu ứng trả lại, bạn có thể chỉ cần viết ".bounce" trong mã của mình.

Những tên được phân tách bằng dấu chấm này cũng mở rộng đến cách bạn định cấu hình hiệu ứng.

Ví dụ, bạn có thể chỉ định rằng biểu tượng sẽ nảy lên hoặc xuống, nhưng hầu hết thời gian, bạn sẽ không cần chỉ định bất cứ điều gì.

Các khuôn khổ sẽ tự động sử dụng hướng thích hợp nhất.

Một số hiệu ứng có nhiều tùy chọn cấu hình.

Ví dụ, Variable Color có ba cài đặt khác nhau.

Bằng cách xâu chuỗi các tùy chọn lại với nhau, bạn có thể định cấu hình các hiệu ứng rất cụ thể một cách dễ dàng.

Tên hiệu ứng là mã Swift thật.

Không có ràng buộc nào được đính kèm.

Xcode sẽ tự động hoàn thành từng phần của tên và nếu một hiệu ứng được định cấu hình không chính xác, bạn sẽ gặp lỗi tại thời điểm biên dịch.

Cách tốt nhất để khám phá tất cả các hình ảnh động mới là ứng dụng Biểu tượng SF.

Trong tab hoạt hình mới, bạn có thể tìm hiểu về tất cả các tùy chọn cấu hình có sẵn cho từng hiệu ứng.

Bạn thậm chí có thể sao chép tên hiệu ứng được phân tách bằng dấu chấm để được sử dụng trực tiếp trong mã của mình.

Với tất cả các loại hiệu ứng và tùy chọn cấu hình, có rất nhiều hình ảnh động có sẵn.

Nhưng tất cả những hiệu ứng này thực sự bao gồm một tập hợp nhỏ các hành vi.

Ví dụ, Bounce phát hoạt ảnh một lần trên biểu tượng.

Đây được coi là hành vi rời rạc.

Mặt khác, việc thêm hiệu ứng Tỷ lệ sẽ thay đổi mức tỷ lệ của biểu tượng và giữ nó ở đó vô thời hạn.

Quy mô được cho là hỗ trợ hành vi vô thời hạn.

Không giống như các hiệu ứng rời rạc, các hiệu ứng không xác định chỉ kết thúc khi bị xóa rõ ràng.

Xuất hiện và Biến mất hỗ trợ hành vi chuyển tiếp.

Họ có thể chuyển đổi biểu tượng vào và ra khỏi tầm nhìn.

Và cuối cùng, Thay thế là một quá trình chuyển đổi nội dung.

Nó làm sinh động từ biểu tượng này sang biểu tượng khác.

Vì vậy, đó là bốn hành vi khác nhau: rời rạc, không xác định, chuyển đổi và chuyển đổi nội dung.

Trong khuôn khổ Biểu tượng, mỗi hành vi tương ứng với một giao thức.

Các hiệu ứng tuyên bố các hành vi được hỗ trợ của chúng bằng cách tuân thủ các giao thức này.

Đây là bảng phân tích tất cả các hiệu ứng có sẵn, cũng như các hành vi được hỗ trợ của chúng.

Tôi sẽ đề cập đến điều này chi tiết hơn trong phiên này.

Chỉ cần biết rằng hành vi của một hiệu ứng xác định API khung giao diện người dùng nào có thể hoạt động với chúng.

Và nói về API khung giao diện người dùng, hãy nói về cách thêm tất cả các hiệu ứng thú vị này vào các ứng dụng SwiftUI, UIKit và AppKit của bạn.

Trong SwiftUI, có một công cụ sửa đổi chế độ xem mới, symbolEffect.

Chỉ cần thêm công cụ sửa đổi và chuyển hiệu ứng mong muốn.

Ở đây, tôi vượt qua variableColor, và bây giờ biểu tượng đang phát hoạt ảnh màu biến đổi mặc định.

Thật dễ dàng để làm điều này trong AppKit và UIKit.

Chỉ cần sử dụng phương pháp addSymbolEffect mới trên chế độ xem hình ảnh để thêm hiệu ứng màu thay đổi.

Tôi có thể cấu hình hiệu ứng màu biến đổi bằng cách sử dụng cú pháp dấu chấm.

Ở đây, tôi thay đổi hiệu ứng thành variableColor.iterative.reversing, dẫn đến một hình ảnh động màu biến đổi khác.

Đó là một cách tuyệt vời để cho thấy rằng ứng dụng của tôi đang kết nối với mạng.

Thậm chí có thể kết hợp các hiệu ứng khác nhau.

Ở đây, tôi thêm một hiệu ứng scale.up.

Bây giờ biểu tượng đang tạo hiệu ứng động cho màu sắc thay đổi trong khi cũng được thu nhỏ.

Các API này cung cấp một cách đơn giản để thêm các hiệu ứng không xác định vào hình ảnh biểu tượng.

Nhớ lại rằng các hiệu ứng không xác định thay đổi một số khía cạnh của biểu tượng vô thời hạn, cho đến khi hiệu ứng bị xóa.

Vì vậy, sử dụng công cụ sửa đổi hiệu ứng biểu tượng, tôi có thể áp dụng hiệu ứng màu thay đổi, liên tục phát hoạt ảnh.

Nhưng tôi cũng cần một cách để kiểm soát khi hiệu ứng đang hoạt động.

Tôi không muốn hình ảnh động này tiếp tục phát sau khi ứng dụng của tôi kết nối thành công với mạng.

Điều này có thể được thực hiện bằng cách thêm tham số boolean isActive.

Ở đây, tôi chỉ áp dụng hiệu ứng này khi kết nối với internet.

Khi ứng dụng kết thúc kết nối, hoạt ảnh biểu tượng sẽ kết thúc liền mạch.

Trong AppKit và UIKit, sử dụng phương thức removeSymbolEffect để kết thúc các hiệu ứng không xác định.

Còn các hiệu ứng rời rạc, thực hiện hoạt ảnh một lần thì sao?

Tôi đã đề cập đến Bounce như một ví dụ về điều này trước đó.

Ứng dụng của bạn có thể kích hoạt hiệu ứng Bounce để phản hồi một số sự kiện nhất định.

Trong SwiftUI, tôi có thể sử dụng cùng một công cụ sửa đổi symbolEffect để thêm các hiệu ứng rời rạc.

Tuy nhiên, tôi cũng phải cung cấp cho SwiftUI một giá trị.

Bất cứ khi nào giá trị thay đổi, SwiftUI sẽ kích hoạt hiệu ứng rời rạc.

Hãy thêm một nút, khi được nhấn, sẽ bật biểu tượng.

Trình xử lý của nút chỉ cần tăng bounceValue.

SwiftUI sẽ thấy sự thay đổi trong bounceValue và kích hoạt bounce.

Tôi có thể làm điều này trong AppKit và UIKit bằng cách thêm hiệu ứng Bounce vào chế độ xem hình ảnh.

Bởi vì Bounce chỉ hỗ trợ hành vi rời rạc, sau đó thêm hiệu ứng thực hiện một lần nảy duy nhất.

Không cần phải loại bỏ hiệu ứng sau đó.

Bây giờ, giả sử tôi không muốn biểu tượng bị trả lại chỉ một lần.

Làm thế nào về việc nảy hai lần?

SwiftUI, AppKit và UIKit hỗ trợ tham số tùy chọn, nơi tôi có thể chỉ định số lần lặp lại ưa thích.

Bây giờ, biểu tượng bật lên hai lần khi hiệu ứng được kích hoạt.

Bounce không phải là hiệu ứng duy nhất có thể có hành vi rời rạc.

Hai trong số các hiệu ứng mà tôi đã đề cập trước đó, Xung và Màu biến đổi, không chỉ hỗ trợ hành vi không xác định mà còn cả hành vi rời rạc.

Nói cách khác, họ có thể chơi hoạt hình một lần, giống như Bounce.

Điều đó có nghĩa là tôi có thể lấy ví dụ Bounce trước đó và thay đổi nó thành variableColor.

Biến đổi màu chuyển sang sử dụng hành vi rời rạc của nó, vì nó được áp dụng theo cách không lặp lại.

Bây giờ, nhấn nút thực hiện hai chu kỳ Màu Thay đổi.

Tiếp theo, hãy nói về các hiệu ứng chuyển đổi nội dung.

Hiệu ứng Thay thế, làm sinh động giữa hai hình ảnh biểu tượng khác nhau, là ví dụ chính về điều này.

Ở đây, tôi có một hình ảnh chuyển đổi giữa biểu tượng tạm dừng và biểu tượng chơi.

SwiftUI có một loại chuyển đổi nội dung mới được gọi là symbolEffect, có thể được sử dụng với Thay thế.

Vì vậy, nếu tôi đặt Hình ảnh vào một Nút chuyển đổi biểu tượng nào được hiển thị, thay đổi hiện đang hoạt hình.

Trong AppKit và UIKit, bạn có thể sử dụng phương thức setSymbolImage mới để thay đổi hình ảnh bằng cách sử dụng chuyển đổi nội dung biểu tượng.

Cuối cùng, chúng ta có Xuất hiện và Biến mất, có thể hiển thị và ẩn các biểu tượng bằng các hình ảnh động độc đáo.

Những hiệu ứng này được phân loại duy nhất là hiệu ứng chuyển tiếp.

Nhưng trước khi chúng ta đi sâu vào điều đó, chúng ta cần nói về các vũ trụ song song.

Tuy nhiên, đừng lo lắng. Nó không phức tạp như vẻ ngoài của nó.

Trong một vũ trụ, hình ảnh biến mất, nhưng chế độ xem hình ảnh vẫn nằm trong hệ thống phân cấp.

Nói cách khác, không có thay đổi nào đối với bố cục.

Hình vuông và hình tròn vẫn giữ nguyên khoảng cách với nhau.

Trong vũ trụ song song, chế độ xem hình ảnh thực sự được thêm vào và xóa khỏi hệ thống phân cấp.

Kết quả là, bố cục của các chế độ xem xung quanh có thể thay đổi.

Tin tuyệt vời là Xuất hiện và Biến mất hỗ trợ cả hai hành vi.

Hành vi đầu tiên là có thể bởi vì Xuất hiện và Biến mất là những hiệu ứng vô thời hạn.

Bạn đã biết cách sử dụng các hiệu ứng vô thời hạn rồi.

Trong SwiftUI, sử dụng công cụ sửa đổi .symbolEffect và chuyển vào .disappear.

Vì giá trị của các bản cập nhật isMoonHidden, hiệu ứng Disappear được áp dụng.

Trong AppKit và UIKit, sử dụng addSymbolEffect và chuyển vào .disappear hoặc .appear.

Điều rút ra ở đây là các hiệu ứng không xác định hoàn toàn không thay đổi bố cục.

Họ chỉ thay đổi kết xuất của biểu tượng trong chế độ xem hình ảnh.

Vì vậy, điều đó bao gồm hành vi đầu tiên.

Làm cách nào để nhảy đến vũ trụ song song, nơi bố cục xung quanh thay đổi?

Đây là nơi hành vi chuyển đổi xuất hiện.

Các hiệu ứng chuyển tiếp có thể được sử dụng với công cụ sửa đổi chuyển tiếp tích hợp sẵn của SwiftUI, làm sinh động việc chèn hoặc xóa chế độ xem khỏi hệ thống phân cấp chế độ xem.

Hãy chuyển đổi mã trước đó để sử dụng hành vi chuyển đổi.

Thay vì áp dụng có điều kiện hiệu ứng Biến mất, thay vào đó tôi sẽ thêm biểu tượng có điều kiện vào hệ thống phân cấp chế độ xem.

Sau đó, tôi sẽ thêm một công cụ sửa đổi chuyển tiếp.

SwiftUI có một kiểu chuyển tiếp mới được gọi là - bạn đoán nó - hiệu ứng biểu tượng.

Bằng cách chuyển vào .disappear, biểu tượng hiện được thêm vào và xóa bằng hình ảnh động.

Bạn cũng có thể sử dụng một hiệu ứng chuyển tiếp độc đáo được gọi là Tự động.

Hiệu ứng này sẽ tự động thực hiện hoạt ảnh chuyển tiếp thích hợp nhất cho biểu tượng này.

Nếu bạn không sử dụng SwiftUI, thì bạn sẽ cần thêm và xóa chế độ xem hình ảnh khỏi hệ thống phân cấp theo cách thủ công.

UIKit có tính năng xử lý hoàn thành cho các hiệu ứng có thể trợ giúp.

Chỉ cần thêm hiệu ứng Biến mất và khi hiệu ứng kết thúc, hãy xóa chế độ xem hình ảnh khỏi hệ thống phân cấp.

Vậy là bạn đã có nó.

Đó là hiệu ứng biểu tượng trong SwiftUI, AppKit và UIKit.

Bây giờ bạn đã biết những điều cơ bản, đây là một số mẹo để đưa hiệu ứng biểu tượng lên một tầm cao mới trong ứng dụng của bạn.

Trước hết, các phương thức UIKit mới trên UIImageView cũng có sẵn trên UIBarButtonItem.

Điều này giúp bạn dễ dàng đưa thanh công cụ của mình vào cuộc sống bằng cách sử dụng hoạt ảnh biểu tượng.

Một số điều khiển UIKit cũng có hoạt ảnh biểu tượng tích hợp trên iOS 17.

Ví dụ, UISlider bây giờ bật hình ảnh của nó khi ngón tay cái chạm đến cuối bản nhạc.

Bạn có thể kiểm soát xem những hình ảnh động này có chơi với thuộc tính isSymbolAnimationEnabled mới trên UIControl và UIBarButtonItem hay không.

Trong SwiftUI, cũng có một số cân nhắc đặc biệt để vô hiệu hóa các hiệu ứng biểu tượng.

Giống như các công cụ sửa đổi khác trong SwiftUI, công cụ sửa đổi symbolEffect lan truyền thông qua hệ thống phân cấp chế độ xem.

Điều này có nghĩa là các hiệu ứng có thể được áp dụng cho nhiều hình ảnh bằng cách thêm công cụ sửa đổi vào chế độ xem cha mẹ.

Sử dụng công cụ sửa đổi symbolEffectsRemoved để ngăn chế độ xem kế thừa các hiệu ứng biểu tượng.

Bây giờ, một số hiệu ứng biểu tượng, như Xuất hiện, Biến mất và Chia tỷ lệ, thay đổi giao diện của biểu tượng bằng hình ảnh động.

Bạn có thể quan tâm đến việc một biểu tượng ban đầu được mở rộng, hoặc ban đầu biến mất, mà không có hình ảnh động.

Trong SwiftUI, bạn có thể làm điều này bằng cách sử dụng giao dịch với hình ảnh động bị vô hiệu hóa.

Ở đây, tôi sử dụng nó để áp dụng hiệu ứng scale.up mà không có hình ảnh động.

Trong AppKit và UIKit, sử dụng tham số hoạt hình trên addSymbolEffect để áp dụng hiệu ứng mà không có hoạt ảnh.

Cuối cùng, hãy nói về giá trị biến đổi.

iOS 16 và macOS Ventura đã giới thiệu giá trị biến đổi như một chiều khác cho các biểu tượng, đại diện cho các khái niệm như mức âm lượng và cường độ tín hiệu.

Trong iOS 17 và macOS Sonoma, chúng tôi đang làm cho việc làm mờ dần giữa các giá trị biến tùy ý trở nên cực kỳ dễ dàng.

Trong SwiftUI, bạn không cần phải làm gì cả.

Ở đây, tôi có một biểu tượng Wi-Fi có giá trị biến đổi dựa trên một số trạng thái - trong trường hợp này là cường độ tín hiệu hiện tại.

Khi cường độ tín hiệu thay đổi, biểu tượng Wi-Fi sẽ tự động cập nhật, đồng thời tạo hiệu ứng động trên các giá trị biến đổi.

Trong AppKit và UIKit, sử dụng chuyển đổi nội dung biểu tượng tự động.

Nó phát hiện nếu hình ảnh biểu tượng mới chỉ có một giá trị biến khác, và, nếu vậy, sẽ chuyển sang giá trị mới.

Cảm ơn rất nhiều vì đã tham gia cùng tôi hôm nay.

Có rất nhiều cách để tạo hiệu ứng động cho các biểu tượng, vì vậy hãy sử dụng ứng dụng SF Symbols để khám phá những gì có thể.

Khám phá khung Biểu tượng và thử các API hiệu ứng biểu tượng mới trong SwiftUI, AppKit và UIKit.

Và cuối cùng, áp dụng các hình ảnh động để làm cho giao diện ứng dụng của bạn thú vị hơn bao giờ hết.

Kiểm tra các phiên biểu tượng khác, để biết các hướng dẫn Giao diện Con người về hoạt hình biểu tượng, cũng như cập nhật các biểu tượng tùy chỉnh để hỗ trợ tất cả các hiệu ứng.

Cảm ơn, và mã hóa vui vẻ.