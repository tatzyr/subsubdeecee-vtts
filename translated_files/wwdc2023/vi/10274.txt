10274

♪ Hip-hop nhạc cụ êm dịu ♪

♪

Xin chào, tên tôi là Shuai Song, và tôi là kỹ sư của nhóm AR Quick Look.

Hôm nay, tôi sẽ hướng dẫn bạn cách tạo các mô hình 3D cho trải nghiệm không gian Quick Look.

Trước khi chúng ta đi sâu vào vấn đề đó, trước tiên chúng ta hãy xem qua Quick Look là gì và cách bạn có thể sử dụng nó để trình bày nội dung 3D trên nền tảng mới của chúng tôi.

Trong một phiên khác, "Khám phá Tìm kiếm Nhanh cho điện toán không gian", chúng tôi đã cho bạn thấy mô hình 3D đáng yêu này của một căn phòng mà chúng tôi đã tạo bằng API Kế hoạch Phòng mới của mình.

Chúng tôi đã đưa mô hình này vào Quick Look bằng cách chỉ cần kéo tệp USDZ ra khỏi cửa sổ ứng dụng của chúng tôi, mở ra bản xem trước Quick Look ngay tại nơi chúng tôi đã thả nó.

Từ đây, bạn có thể bắt đầu tương tác với Quick Look và nội dung của tôi bằng cách sử dụng các cử chỉ quen thuộc.

Trước khi chúng ta đi sâu hơn vào câu chuyện đằng sau mô hình này, hãy nói thêm một chút về cách hệ thống trình bày nội dung 3D trong Quick Look.

Trên nền tảng này, Quick Look hiển thị mô hình 3D trong cửa sổ âm lượng.

Cửa sổ âm lượng đã xác định giới hạn để cho phép chia sẻ chúng cùng với các ứng dụng khác.

Mọi người có thể định vị lại khối lượng trong không gian và họ có thể xem nó từ các góc độ khác nhau.

Các mô hình 3D luôn được đặt ở trung tâm của âm lượng.

Khi mô hình xuất hiện lần đầu tiên, Quick Look sẽ định hướng cửa sổ âm lượng sao cho nội dung đối diện trực tiếp với bạn.

Từ đây, bạn có thể sử dụng thanh cửa sổ âm lượng bên dưới mô hình 3D để định vị lại nội dung một cách tự do trong không gian của bạn.

Quick Look sẽ tự động điều chỉnh kích thước của âm lượng dựa trên cách mọi người chia tỷ lệ mô hình khi họ đang ở trong phiên xem trước.

Điều quan trọng cần lưu ý là nếu nội dung của bạn đang sử dụng hoạt ảnh, chúng tôi khuyên bạn nên giữ tất cả hoạt ảnh nằm trong giới hạn xác định của âm lượng Quick Look.

Chúng tôi vừa đề cập đến những điều cơ bản về cách Quick Look trình bày nội dung 3D của bạn.

Có những cân nhắc bổ sung khi nói đến cách Quick Look đang sử dụng kích thước và tỷ lệ mô hình.

Hãy cùng xem nào.

Khi tải mô hình 3D, Quick Look sẽ tôn trọng metersPerUnit được xác định trong siêu dữ liệu của USDZ để xác định đơn vị tỷ lệ đối với thế giới thực.

Để giúp mọi người hình dung quy mô của tài sản, Quick Look sẽ cố gắng trình bày mô hình ban đầu ở quy mô 100 phần trăm nếu nó được cho phép nằm trong một phạm vi kích thước nhất định.

Hãy xem một ví dụ.

Quick Look áp đặt quy mô tối thiểu để đảm bảo rằng bạn có thể thưởng thức tất cả nội dung, ngay cả khi nó ở quy mô nhỏ, chẳng hạn như chiếc xe thiếc này.

Quick Look cũng đang sử dụng giới hạn giới hạn trên trong trường hợp bạn đang xem các đối tượng rất lớn để đảm bảo chúng không chiếm quá nhiều dung lượng cùng với các ứng dụng khác của bạn.

Đối với bất kỳ đồ vật nào có kích thước ở giữa, chẳng hạn như ấm trà này, Quick Look sẽ sử dụng kích thước trong thế giới thực của mô hình khi ban đầu được phóng lên trong không gian.

Hãy nhớ rằng, bạn luôn có thể xem các mô hình ở kích thước thế giới thực của chúng bằng cách nhấn vào nút bên dưới cửa sổ âm lượng của bạn.

Bây giờ chúng ta đã biết Quick Look xử lý kích thước mô hình của bạn như thế nào, hãy xem xét hai điều nữa mà Quick Look thêm vào khi nó trình bày nội dung của bạn: mặt phẳng mặt đất và bóng tối.

Quick Look sẽ tự động hiển thị mặt phẳng mặt đất và bóng bên dưới mô hình của bạn để giúp bạn hiểu rõ hơn về kích thước của mô hình và vị trí của nó so với mặt đất.

Bởi vì Quick Look đang thực hiện công việc này cho bạn, chúng tôi khuyên bạn không nên thêm mặt phẳng mặt đất và bóng tối của riêng mình cho mô hình của mình.

Cho đến nay, chúng tôi đã đề cập đến những điều cơ bản về cách Quick Look sẽ hiển thị nội dung 3D của bạn.

Hãy hướng dẫn bạn qua chương trình nghị sự trong phần còn lại của phiên họp này.

Đầu tiên, chúng ta sẽ xem xét một vài cách để tạo ra các mô hình 3D.

Tiếp theo, chúng ta sẽ nói về cách bạn có thể kiểm tra chất lượng hình ảnh của nội dung của mình và thực hiện các điều chỉnh khi cần thiết.

Cuối cùng, chúng tôi sẽ đề cập đến cách đảm bảo nội dung 3D của bạn có thể hiển thị và chạy với hiệu suất tuyệt vời.

Hãy bắt đầu với việc chuẩn bị nội dung 3D của bạn.

Quick Look chấp nhận USDZ làm định dạng chính để xử lý các mô hình 3D.

USDZ là trung tâm của nội dung 3D cho các nền tảng của Apple và được thiết kế nhẹ và tối ưu hóa cho bóng râm.

Hãy xem cách bạn có thể tạo các tệp USDZ.

Có nhiều cách để tạo tệp USDZ.

Đầu tiên, nếu trước đây bạn đã tạo tệp USDZ cho iOS, bạn có thể sử dụng cùng một tệp cho Quick Look trên nền tảng mới này.

Trong trường hợp bạn muốn tạo một tệp USDZ mới từ đầu, bạn có thể sử dụng các công cụ tạo nội dung kỹ thuật số chuyên nghiệp để tạo nội dung 3D và sau đó xuất ra dưới dạng tệp USDZ.

Bạn cũng có thể quét các mô hình 3D và tạo tệp USDZ của các đối tượng trong thế giới thực bằng cách sử dụng API RealityKit Object Capture của chúng tôi.

Object Capture cung cấp cho bạn giải pháp trắc quang đầu cuối cùng với các ứng dụng mẫu để giúp bạn tạo các mô hình 3D ở các cấp độ chi tiết khác nhau.

Object Capture được hỗ trợ trên cả thiết bị iOS và macOS.

Cuối cùng, nếu bạn đang tìm kiếm một cách để tạo sơ đồ tầng 2D hoặc 3D cho ngôi nhà của mình, chúng tôi sẽ cung cấp cho bạn API RoomPlan của chúng tôi.

Hãy nhớ cách tôi đề cập đến việc có một cốt truyện về mô hình phòng 3D mà tôi đã chỉ cho bạn trước đó?

Hãy đi sâu vào quy trình làm việc mà nhà thiết kế 3D của chúng tôi, Jerry, đã sử dụng để tạo ra mô hình 3D này.

Đầu tiên, Jerry bắt đầu quét phòng của mình bằng cách sử dụng ứng dụng mẫu RoomPlan.

Chỉ sau một thời gian ngắn, anh ấy có thể xem trước bố cục 3D trong phòng của mình hoặc xuất và thả tệp USDZ ngay vào máy Mac của mình.

Tiếp theo, Jerry nhập mô hình 3D vào một công cụ tạo nội dung 3D để đưa các khái niệm thiết kế của mình vào cuộc sống.

Đây là kết quả của công việc đó.

Mô hình này trông rất tuyệt.

Bạn có thể thấy một số vật liệu và kết cấu đã được thêm vào tường, sàn nhà và một số yếu tố phòng khác.

Bây giờ, mô hình phòng mà Jerry tạo ra gần như đã sẵn sàng để xem trước trong Quick Look.

May mắn thay, có một công cụ mới được gọi là Reality Composer Pro giúp bước tiếp theo này thực sự dễ dàng.

Xem trước các mô hình 3D của bạn cho Quick Look là một bước thực sự quan trọng trong quy trình tạo nội dung của bạn để kiểm tra chất lượng thực tế của mô hình của bạn và thực hiện các điều chỉnh khi cần thiết.

Chúng ta hãy xem xét kỹ hơn.

Đây là Reality Composer Pro với mô hình 3D của chúng tôi được tải ở chế độ xem chính.

Chỉ cần nhấp vào nút này nằm ở góc trên cùng bên phải trong Reality Composer Pro, bạn có thể dễ dàng xem trước mô hình 3D của mình trong Quick Look ngay trên thiết bị của mình.

Và đây là cùng một mô hình 3D đang chạy trong Quick Look.

Một điều chúng ta có thể nhận thấy bây giờ là định hướng mô hình ban đầu trông không đúng.

Như đã thảo luận trước đây, điều quan trọng là phải đảm bảo rằng phần thú vị nhất của mô hình 3D được trình bày hướng về phía bạn để tạo ra trải nghiệm hấp dẫn.

Hãy xem chúng ta có thể khắc phục điều này như thế nào.

Quick Look đang sử dụng một hệ tọa độ bên phải.

Biết được điều này, chúng tôi có thể dễ dàng sửa hướng của mô hình 3D trong công cụ tạo nội dung của mình hoặc ngay tại đây trong Reality Composer Pro.

Trong trường hợp của chúng tôi, chúng tôi cần xoay mô hình trên trục dọc để phòng khách trong mô hình của chúng tôi xuất hiện.

Bạn có thể khắc phục điều này bằng cách đặt 90 độ xung quanh trục y ở đây, giống như thế này.

Hãy sử dụng lại bản xem trước thiết bị từ Reality Composer Pro để kiểm tra các thay đổi đối với mô hình của chúng tôi.

Bây giờ định hướng đã được cố định và chúng tôi có cái nhìn tốt hơn nhiều về mô hình tuyệt vời này.

Được rồi, hãy khám phá tài sản này hơn nữa, và có một góc nhìn khác và xem thêm một vài chi tiết tại đây.

Để làm như vậy, bạn có thể sử dụng cử chỉ chụm và kéo để xoay mô hình 3D và xem nó từ các phía khác nhau.

Điều này cho tôi một cái nhìn thực sự tốt về các phần khác nhau trong phòng của chúng tôi.

Bạn cũng có thể sử dụng cử chỉ kẹp hai tay để chia tỷ lệ mô hình và xem thêm chi tiết.

Bây giờ chúng ta đã thấy cách kiểm tra mô hình 3D của bạn trong Quick Look trên thiết bị, hãy nói về một vài cân nhắc để nâng cao chất lượng hình ảnh của nội dung của bạn.

Khi nhiều đối tượng được hiển thị ở cùng một vị trí, chúng có thể chồng chéo lên nhau và xuất hiện dưới dạng một đối tượng nhấp nháy duy nhất.

Để giảm bớt vấn đề này, bạn có thể sử dụng các công cụ tạo 3D để tối ưu hóa hình dạng lưới bằng cách loại bỏ sự chồng chéo hoặc tăng khoảng cách giữa các vật thể nhấp nháy.

Cố gắng tránh sử dụng các bản đồ thông thường tần số cao, vì chúng vẫn dẫn đến các vấn đề răng cưa có thể tạo ra các hiện vật thị giác không mong muốn, đặc biệt là trong các tình huống bạn đang chuyển động hoặc gần mô hình 3D.

Khi hiển thị một vật thể nhỏ hoặc mỏng như lá, hệ thống có thể không được lấy mẫu nhất quán theo thời gian theo tốc độ rasterization thay đổi, điều này có thể gây nhấp nháy ở ngoại vi.

Để giảm thiểu vấn đề này, bạn có thể thử lưu trữ các chi tiết hình học tốt thành kết cấu độ mờ và sau đó kết xuất nó bằng cách sử dụng hình học với lưới tam giác lớn hơn thay thế.

Để tìm hiểu thêm về tỷ lệ rasterization thay đổi, hãy xem phiên của chúng tôi, "Khám phá kết xuất cho điện toán không gian."

Tiếp theo, hãy chuyển sự chú ý của chúng ta sang hiệu suất.

Ở đây, chúng ta sẽ xem xét giải phẫu của nội dung Quick Look 3D và những gì bạn có thể làm để đảm bảo trải nghiệm không gian QuickLook mượt mà và liền mạch.

Hãy bắt đầu nào.

Có nhiều yếu tố quyết định hiệu suất 3D của nội dung của bạn được hiển thị trong Quick Look.

Những thứ như kích thước tệp của mô hình 3D của bạn là bao nhiêu, hoặc số lượng và độ phân giải của kết cấu, hoặc thậm chí độ phức tạp của vật liệu mà bạn đang sử dụng cho mô hình của mình.

Để biết nơi bắt đầu tối ưu hóa mô hình 3D của bạn cho hiệu suất, trước tiên bạn cần xác định những hạn chế tiềm ẩn có thể tồn tại với tài sản của mình.

Để giúp đơn giản hóa nhiệm vụ này, chúng tôi đã giới thiệu một số công cụ mới hữu ích trong năm nay, có thể cải thiện đáng kể quy trình làm việc của bạn.

Hãy cùng xem nào.

Ở đây, chúng tôi đã trở lại Reality Composer Pro để hiển thị cho bạn bảng Thống kê.

Bảng điều khiển này cung cấp cho bạn rất nhiều thông tin hữu ích về các đặc điểm mô hình 3D của bạn, chẳng hạn như số lượng hình tam giác và dung lượng bộ nhớ kết cấu đang được sử dụng với nội dung của bạn.

Một công cụ tuyệt vời khác theo ý của bạn là RealityKit Trace.

Công cụ này cho phép lập hồ sơ thời gian chạy nâng cao hơn nữa.

RealityKit Trace cung cấp thông tin chi tiết về quy trình kết xuất cụ thể.

Nó cho phép bạn có thêm thông tin vào các khung kết xuất riêng lẻ với nội dung 3D của bạn.

Bằng cách phân tích một số khung hình đã chụp, RealityKit Trace có thể được sử dụng để xác định và chẩn đoán các vấn đề hoặc hạn chế hiệu suất tiềm ẩn và đưa ra các đề xuất cho bạn.

RealityKit Trace tiếp tục xây dựng với Xcode.

Để sử dụng nó để lập hồ sơ nội dung của bạn trong Quick Look, bạn cần đính kèm nó vào quy trình Quick Look.

Để biết thêm chi tiết về Reality Composer Pro và RealityKit Trace, vui lòng xem các phiên bên dưới.

Bây giờ chúng tôi đã xem xét một số công cụ để giúp bạn lập hồ sơ về các hạn chế hiệu suất tiềm ẩn, hãy xem qua một số phương pháp hay nhất để giúp bạn tối ưu hóa nội dung 3D cho hiệu suất.

Trước đó, tôi đã đề cập đến các yếu tố khác nhau quyết định hiệu suất của nội dung 3D của Quick Look.

Bây giờ, hãy xem xét từng cái một từ góc độ những gì bạn có thể làm để tối ưu hóa nội dung cho phù hợp.

Đầu tiên là tối ưu hóa mô hình của bạn cho kích thước tệp.

Kích thước tệp nhỏ hơn thường dẫn đến tải xuống nhanh hơn và thời gian tải nhanh hơn, vì bạn không muốn người dùng đợi lâu trước khi tương tác với nội dung của bạn.

Bí quyết ở đây là cố gắng tìm sự cân bằng được tối ưu hóa giữa chất lượng tài sản và kích thước tệp.

Ví dụ, bạn có thể sử dụng kết cấu ít chi tiết hơn hoặc nguồn âm thanh chất lượng thấp hơn.

Đôi khi, tài sản được phát triển qua nhiều chu kỳ lặp lại.

Thông thường, điều này bao gồm các thay đổi đối với âm thanh cơ bản, hoạt ảnh và kết cấu được liên kết với tài sản của bạn.

Để giữ kích thước tệp ở mức tối thiểu, hãy đảm bảo chỉ bao gồm những gì thực sự được sử dụng trong gói cuối cùng được phân phối.

Ví dụ, các phiên bản cũ hơn của tệp âm thanh không còn được sử dụng cho cảnh của bạn nên được xóa khỏi tài sản cuối cùng trước khi phân phối.

Cuối cùng, để đảm bảo trải nghiệm chia sẻ tốt hơn, chúng tôi khuyên bạn nên giữ kích thước tệp của mình dưới 25 megabyte.

Tiếp theo, hãy xem xét cách tối ưu hóa hình học nội dung 3D của bạn cho hiệu suất.

Một lần nữa, mẹo là tìm ra sự cân bằng phù hợp giữa việc hiển thị mức độ chi tiết tuyệt vời và đạt được hiệu suất tuyệt vời.

Trong trường hợp mô hình của bạn đang sử dụng các bộ phận bị ẩn hoặc được bao phủ hoàn toàn bởi một hình học khác, có nghĩa là chúng không bao giờ được hiển thị trên màn hình, bạn có thể xóa chúng để tiết kiệm ngân sách hiệu suất của mình.

Ngoài ra, hãy cân nhắc hợp nhất các mắt lưới nhỏ thành một mắt lưới lớn hơn để giảm tải hệ thống.

Đối với một mô hình duy nhất, chúng tôi khuyên bạn nên giữ nó dưới 200 phần lưới và ít hơn 100k đỉnh.

Luôn ghi nhớ cân bằng chi tiết lưới của bạn với một tài sản khác trong cảnh.

Tiếp theo, hãy nhìn vào kết cấu.

Kết cấu có thể góp phần vào việc sử dụng nhiều bộ nhớ.

Kết cấu tự động hóa tiêu tốn ít bộ nhớ hơn, cho phép tải nhiều nội dung hơn cùng một lúc và giúp các cảnh phức tạp chạy trơn tru.

Một cách để tiết kiệm ngân sách kết cấu là sử dụng thang độ xám cho các đầu vào không màu của bạn.

Trong một số trường hợp, bạn thậm chí có thể đóng gói hình ảnh thang độ xám của mình vào các kênh riêng lẻ trên kết cấu màu, cho phép bạn lưu trữ nhiều bản đồ thang độ xám thành một kết cấu duy nhất.

Khi có thể, hãy sử dụng các giá trị không đổi trong vật liệu của bạn thay vì tải chúng từ kết cấu.

Nếu mô hình của bạn chỉ sử dụng một vật liệu PBR duy nhất, chúng tôi đề xuất kích thước kết cấu tối đa là 2K x 2K và sử dụng kết cấu 8 bit thay vì 16 bit trên mỗi kênh.

Cuối cùng, hãy đảm bảo luôn chi tiêu ngân sách kết cấu của bạn trong các lĩnh vực tăng thêm giá trị và tính chân thực nhất cho mô hình 3D của bạn.

Tiếp theo là tài liệu.

Vật liệu xác định các thuộc tính bề mặt của mô hình 3D.

Họ chỉ định cách hệ thống hiển thị mô hình, bao gồm màu sắc của nó và liệu đối tượng của bạn xuất hiện với vẻ ngoài sáng bóng hay phản chiếu.

Khi nói đến việc tối ưu hóa vật liệu của bạn cho các mô hình 3D, bạn có thể giảm thời gian tải của mình bằng cách kết hợp các bộ phận lưới để chia sẻ với cùng một vật liệu.

Lý do điều này hữu ích là vì khi mô hình 3D của bạn có tài liệu tùy chỉnh, hệ thống phải biên dịch chúng khi tải lần đầu tiên.

Đảm bảo cân bằng độ phức tạp của vật liệu của bạn với kích thước màn hình.

Ví dụ, nếu bạn chỉ cần một phần nhỏ của màn hình trong suốt hoặc có lớp phủ trong, sẽ hiệu quả hơn nếu sử dụng một vật liệu riêng biệt chỉ cho khu vực nhỏ đó.

Bạn luôn cần lưu ý đến sự minh bạch chồng chéo.

Việc hiển thị các đối tượng trong suốt trong thời gian thực thường yêu cầu nhiều phép tính hơn so với các đối tượng mờ đục, vì vậy chỉ có độ trong suốt chồng chéo khi bạn thực sự cần nó.

Ngoài ra, nếu bạn có ánh sáng nướng hoặc một số phần của lưới của bạn thậm chí không cần ánh sáng, chúng tôi khuyên bạn nên sử dụng bề mặt MaterialX Unlit để tiết kiệm tính toán ánh sáng theo thời gian thực.

Tiếp theo, hãy xem xét vật lý.

Mô phỏng vật lý đôi khi có thể tốn kém về mặt tính toán, đặc biệt là trong trường hợp hệ thống vật lý thực hiện phát hiện va chạm và mô phỏng các hiệu ứng thực tế, như trọng lực và lò xo.

Để tối đa hóa hiệu suất nội dung của bạn bằng cách sử dụng vật lý, bạn có thể cố gắng giảm tổng số máy va chạm đang được sử dụng.

Đôi khi bạn muốn nội dung của mình tham gia vào mô phỏng vật lý, nhưng sau đó nội dung của bạn bao gồm các thực thể không được phép di chuyển hoặc bị ảnh hưởng bởi một đối tượng khác - ví dụ: một bức tường sẽ làm cho một quả bóng ảo bật ra.

Trong trường hợp này, chúng tôi khuyên bạn nên sử dụng máy va chạm tĩnh để giảm tính toán vật lý.

Tiếp theo, hãy nói về hoạt hình.

Thêm hình ảnh động vào mô hình 3D của bạn là một cách tuyệt vời để làm cho nội dung của bạn trở nên sống động.

Đôi khi, tất cả những gì bạn cần chỉ là một hình ảnh động nhàn rỗi.

Trong trường hợp này, hãy giới hạn số lượng trọng lượng trên mỗi đỉnh cho hoạt ảnh của bạn để giúp tạo ra các hình ảnh động hiệu quả và chân thực.

Khi bạn đang cố gắng tối ưu hóa hình học của các biến dạng hoặc hình ảnh động lột da của mình, hãy nhớ tuân theo các hướng dẫn hình học tương tự mà tôi đã cung cấp trước đây.

Tiếp theo là sử dụng các hệ thống hạt với nội dung của bạn.

Đây là một trong những công cụ mạnh mẽ nhất để xây dựng các hiệu ứng hình ảnh tinh vi như lửa thực tế với khói hoặc khí thải từ tên lửa.

Nếu được sử dụng không đúng cách, các hạt có thể là nút thắt cổ chai trong trải nghiệm Quick Look 3D của bạn.

Vì lý do này, chúng tôi khuyên bạn nên hạn chế sử dụng bộ phát hạt và giữ số lượng hạt trên màn hình ở mức tối thiểu.

Thông thường, bạn có thể tạo ra các hiệu ứng hình ảnh tương tự với ít hạt hơn.

Thử nghiệm với các hình dạng và kiểu dáng đơn giản hơn hoặc nhỏ hơn để đạt được hiệu quả tương tự, điều này sẽ giúp giảm sự thấu chi trên hệ thống.

Đó là khá nhiều điều chúng tôi vừa trải qua.

Hãy tóm tắt những đề xuất đó cho bạn.

Có nhiều yếu tố ảnh hưởng đến hiệu suất của nội dung Quicklook 3D của bạn.

Nền tảng mới này đã được thiết kế để cho phép mọi người tương tác với nhiều ứng dụng và phần nội dung đang chạy cùng nhau.

Điều này có nghĩa là hiệu suất nội dung của bạn thậm chí có thể bị ảnh hưởng bởi các ứng dụng hoặc cảnh khác mà mọi người đang làm.

Vì lý do này, bạn nên kiểm tra mô hình 3D của mình trên các tình huống khác nhau.

Như tôi đã chia sẻ trong phiên này, có một số công cụ có sẵn theo ý của bạn, cho dù bạn muốn kiểm tra chất lượng hình ảnh của nội dung hay tìm ra những hạn chế có thể ảnh hưởng đến hiệu suất 3D của bạn.

Điểm ngọt ngào ở đây là tìm sự cân bằng phù hợp giữa việc có hình ảnh lớn hơn và đảm bảo trải nghiệm xem Quick Look mượt mà cùng một lúc.

Để tìm hiểu thêm về Quick Look và cách cung cấp nội dung 3D của bạn để xem từ các ứng dụng và trang web, vui lòng xem bài nói chuyện khác của chúng tôi, "Khám phá Quick Look cho điện toán không gian."

Cảm ơn vì đã xem!

♪