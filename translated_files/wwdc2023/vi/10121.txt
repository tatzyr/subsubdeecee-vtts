10121

♪ ♪

Jen: Xin chào, tôi là Jen Simmons, một nhà truyền giáo Safari và WebKit ở đây tại Apple.

Đó là một năm tuyệt vời cho WebKit.

Chúng tôi đã vận chuyển hơn 140 công nghệ web mới trong nhiều bản phát hành của Safari trong suốt năm nay và chúng tôi có thêm vài chục công nghệ web mới vào mùa thu này.

Có quá nhiều, không có cách nào chúng tôi có thể bao quát tất cả, vì vậy chúng tôi quyết định tập trung vào CSS.

Trong phiên này, chúng ta sẽ xem xét một số tính năng mới thú vị nhất trong CSS, bao gồm các khả năng hoàn toàn mới với bố cục, cả thế hệ công cụ màu sắc tận dụng tối đa các màn hình tuyệt vời ngày nay, những cách hiệu quả để giải quyết các vấn đề khó khăn với các lớp giả mới và CSS cho phép bạn đưa kiểu chữ của mình lên một

Tôi sẽ chia sẻ những thứ đã được vận chuyển, những thứ sẽ được vận chuyển trong Safari 17 và những thứ chúng tôi đang làm cho tương lai.

Để thấy tương lai hôm nay, hãy tải xuống Bản xem trước Công nghệ Safari.

Ở đó bạn sẽ tìm thấy Bố cục Masonry.

Trong nhiều năm, đây là một mẫu bố cục phổ biến trên web.

Đó là một cách tuyệt vời để đóng gói nội dung có kích cỡ khác nhau.

Bạn có thể hoàn thành bố cục với hình dạng này bằng cách sử dụng CSS Multicolumn, nếu không sao thì thứ tự nội dung bắt đầu ở cột đầu tiên, chảy xuống bên dưới khung nhìn, quay trở lại đầu cột thứ hai, chảy xuống nó, sau đó chuyển sang cột thứ ba, v.v.

Nếu điều này phù hợp với dự án của bạn, thật tuyệt.

CSS Multicolumn là một cơ chế bố cục đã có trong các trình duyệt trong nhiều thập kỷ.

Nhưng thường thì điều này không hiệu quả.

Thay vào đó, các nhà thiết kế muốn nội dung của họ chảy qua trang, đặt từng mục vào bất kỳ cột nào đặt nó càng gần đầu càng tốt.

Điều này đặc biệt cần thiết khi nhiều nội dung được tải ở phía dưới khi người dùng cuộn.

Vì vậy, các trang web đã phải sử dụng JavaScript để thực hiện điều này.

Nhưng JavaScript ở bố cục chậm hơn CSS, và nó dễ vỡ hơn.

Viết mã khó hơn.

Bố cục thực sự thuộc về CSS.

Một đề xuất tạo Masonry như một phần của CSS Grid đã được bắt đầu vài năm trước và được triển khai trong Firefox như một thử nghiệm đằng sau một lá cờ.

Chúng tôi tin tưởng vào ý tưởng này và chúng tôi muốn thấy nó xuất hiện trên web, vì vậy bây giờ nó có trong Bản xem trước công nghệ Safari - theo mặc định - nơi bạn có thể dùng thử, cho chúng tôi biết suy nghĩ của bạn và giúp chúng tôi tiến lên phía trước.

Đây là một ví dụ.

Tôi đã tạo bố cục Masonry điển hình này với rất ít CSS.

Hiển thị: lưới giúp chúng ta bắt đầu và các cột mẫu lưới cung cấp cho chúng ta các cột linh hoạt tự động tăng số lượng khi có nhiều không gian hơn.

Sau đó, grid-template-rows: masonry đóng gói các mục thành một mẫu Masonry theo hướng hàng chỉ với một dòng mã.

Làm cho phần này của CSS Grid mang lại cho chúng ta sự linh hoạt to lớn.

Bạn có thể định nghĩa Masonry trong một chiều và sử dụng sức mạnh của Grid để làm bất cứ điều gì bạn muốn ở chiều khác, như làm cho các cột có kích thước khác nhau với các đơn vị fr hoặc làm cho cột đầu tiên có chiều rộng cố định, trong khi phần giữa linh hoạt bằng cách sử dụng đơn vị fr và cột thứ ba được làm linh hoạt với giá trị

Kết hợp Masonry với Grid tạo ra một cơ chế mạnh hơn nhiều so với thư viện JavaScript phổ biến.

Đây vẫn là một công việc đang được tiến hành.

Cần thảo luận thêm trong Nhóm làm việc CSS, nơi các nhà sản xuất trình duyệt và những người khác cùng nhau đồng ý về con đường phía trước, bao gồm cả công việc để đảm bảo rằng nó hoàn toàn có thể truy cập được.

Chúng tôi mong muốn được vận chuyển Masonry trong Safari khi nó đã sẵn sàng.

Cái gì đã sẵn sàng để được vận chuyển trong các trình duyệt ngày hôm nay?

Cắt lề.

Thuộc tính margin-trim mới giúp dễ dàng loại bỏ lề khỏi các phần tử đẩy lên chống lại vùng chứa của chúng.

Để tôi giải thích.

Hãy tưởng tượng chúng ta có một tiêu đề và ba đoạn văn.

Tất cả chúng đều có lề trên và lề dưới, cung cấp không gian giữa chúng, cũng như không gian bên trên và dưới toàn bộ nhóm.

Ngoài ra còn có phần đệm được áp dụng cho vùng chứa, phần tử bài viết với một lớp thẻ.

Lề phía trên tiêu đề và phần đệm trên cùng trên vùng chứa được cộng lại với nhau để xác định có bao nhiêu khoảng trống giữa cạnh trên của hộp và dòng văn bản đầu tiên đó.

Tương tự ở phía dưới.

Lề bên dưới đoạn cuối cùng được thêm vào phần đệm dưới cùng trên vùng chứa, có thể thêm nhiều khoảng trắng hơn dự định.

Thay vào đó, những gì chúng tôi muốn là chỉ có phần đệm ở trên và dưới và không có bất kỳ lề nào liên quan.

Điều này sẽ cho chúng ta nhiều không gian đồng đều hơn xung quanh chiếc hộp.

Những gì chúng ta cần là một cách để loại bỏ bất kỳ lợi nhuận nào đẩy lên thùng chứa.

Có lẽ bạn đã cố gắng xử lý điều này bằng cách loại bỏ thủ công lề trên cùng khỏi tiêu đề và lề dưới cùng khỏi đoạn cuối và, tốt, hy vọng điều tốt nhất.

Nhưng sau đó nội dung bất ngờ xuất hiện.

Có thể một ví dụ khác bắt đầu bằng h3 và không ai viết mã đó, hoặc ai đó dán h2 ở giữa và nó thiếu lề trên cùng của nó.

Cắt lề cho chúng ta một giải pháp tốt hơn.

Thay vào đó, bạn có thể yêu cầu chính xác những gì bạn muốn bằng cách áp dụng margin-trim: block cho vùng chứa.

Chúng tôi đã thêm hỗ trợ cho margin-trim trong Safari 16.4.

Bạn cũng có thể sử dụng margin-trim: inline để cắt lề theo hướng nội tuyến.

Đó là cắt lề.

Nó chỉ đơn giản là giải quyết một nhu cầu chung một cách mạnh mẽ hơn.

CSS cho bố cục đã thực sự trưởng thành trong sáu năm qua kể từ khi CSS Grid ra đời vào tháng 3 năm 2017.

Bố cục ngày nay là một cải tiến triệt để so với những gì chúng tôi đã làm một thập kỷ trước.

Trong cùng một khoảng thời gian, đã có một bước nhảy vọt triệt để khác mà các nhà thiết kế và phát triển web không được chú ý một chút: một bước nhảy vọt về màu sắc.

Thế giới đầy màu sắc, đặc biệt là bên ngoài.

Dải động, độ bão hòa, tất cả các sắc thái và khả năng.

Hãy tưởng tượng sơ đồ này đại diện cho mọi màu sắc mà mắt người có thể nhìn thấy.

Một dòng xung quanh một tập hợp con của các màu này cho thấy những gì có thể được thể hiện trong sRGB, gam màu mặc định trên web, đã phục vụ tốt cho chúng ta.

Nó chắc chắn tốt hơn những gì chúng tôi đã sử dụng vào những năm 90, nhưng sẽ thật tuyệt nếu vượt qua những hạn chế của sRGB và truyền tải nhiều phổ hình ảnh hơn.

Màu P3 làm được điều đó.

Apple bắt đầu hỗ trợ màn hình P3 gam rộng trên phần cứng và phần mềm của chúng tôi hơn bảy năm trước, đầu tiên trên iMac vào cuối năm 2015, sau đó là iPad và iPhone, bắt đầu với iPhone 7.

Gam màu P3 có khả năng hiển thị nhiều màu hơn 50% so với sRGB.

Màn hình hiển thị trên các thiết bị hiện đại thật tuyệt vời.

Tất cả những thứ này đều hỗ trợ gam màu rộng P3 với màu sáng hơn và độ bão hòa sâu hơn.

Và đã quá lâu rồi để thiết kế web tận dụng tối đa.

Có một truy vấn phương tiện trong CSS để kiểm tra hỗ trợ gam màu, khi bạn cần một cách để chỉ định CSS có điều kiện, tùy thuộc vào những gì phần cứng và phần mềm của người dùng có thể làm.

Chúng tôi đã vận chuyển hỗ trợ cho Color Gamut Media Query vào năm 2016, trong Safari 10.0.

Khi nói đến việc chọn một màu, tất nhiên, có nhiều cách để làm điều đó; màu được đặt tên, giá trị thập lục phân, hàm RGB, có màu đỏ, xanh lá cây và xanh dương.

HSL, cho màu sắc, độ bão hòa và độ sáng, và HWB, với màu sắc, độ trắng và độ đen của nó.

Tất cả những cách mô hình hóa màu sắc này đều có khả năng tạo ra cùng một kết quả.

Tất cả các mô hình này đều bị giới hạn trong gam màu sRGB.

Không thể đại diện cho các màu chỉ tồn tại trong P3 nếu bạn sử dụng các mô hình màu này.

Do đó, có bốn cái mới hiện được xác định trong CSS.

LCH, OKLCH, LAB, và OKLAB.

Các mô hình này có thể đại diện cho màu sắc trong bất kỳ gam màu nào, bao gồm Display P3 hoặc bất kỳ gam màu nào khác có thể xuất hiện trên web trong tương lai.

Chúng được định nghĩa với ba giá trị mỗi giá trị.

Trong cả bốn, "L" đại diện cho Lightness LCH và OKLCH cũng lấy các giá trị cho Chroma, hoặc mức độ mãnh liệt của màu đó, và đối với Hue, hoặc vị trí của nó trên quang phổ màu.

LAB và OKLAB khai báo một giá trị dọc theo trục A --- hoặc trong đó màu dọc theo trục chạy từ xanh lá cây đến đỏ --- và trục B - hoặc nó có màu xanh lam đến vàng như thế nào.

Bạn có thể tạo màu với LCH, OKLCH, LAB và OKLAB bằng cách sử dụng các chức năng mới cho mỗi chức năng.

Nếu một trình duyệt đã thêm hỗ trợ cho P3, thì các chức năng này có thể đại diện cho các màu chỉ tồn tại trong P3 cũng như các màu trong sRGB.

Chúng tôi đã vận chuyển hỗ trợ cho các chức năng này trong Safari 15.0 và 15.4.

Chrome, Edge và Firefox đang bổ sung hỗ trợ trong năm nay, nhờ vào dự án Interop 2023.

Bạn cũng có thể xác định một màu với hàm color() và chỉ định gam màu nào sẽ sử dụng.

Hàm màu nhận các giá trị bằng đỏ, xanh lá cây và xanh dương, cộng với alpha, sau một dấu gạch chéo.

Nhưng màu nào 100% màu xanh lá cây tạo ra, ví dụ, phụ thuộc vào gam màu.

Lần đầu tiên chúng tôi vận chuyển khả năng tạo màu P3 trong CSS thông qua việc sử dụng chức năng màu này trong Safari 10.1, hơn sáu năm trước.

Với sự ra đời của các gam màu và mô hình màu này, Nhóm làm việc CSS đã xác định các công cụ bổ sung tận dụng sức mạnh của chúng.

Các tiêu chuẩn web của họ cuối cùng đã đủ trưởng thành để chúng tôi vận chuyển các công cụ này trong năm nay.

Bạn đã bao giờ muốn xác định một màu trong CSS, trong khi đề cập đến một màu khác chưa?

Có thể làm những việc tương tự trong bộ tiền xử lý trong một thời gian.

Bây giờ, cú pháp màu tương đối cho phép bạn làm điều đó.

Cũng giống như nhiều cách để xác định màu sắc, bạn bắt đầu với một trong các hàm màu.

Điều này xác định mô hình màu nào được sử dụng để thực hiện các phép tính toán học liên quan đến việc tạo ra màu mới.

Tiếp theo, nêu rõ màu hiện có mà bạn muốn bắt đầu.

Sau đó lấy các kênh từ chức năng và thao tác chúng.

Trong ví dụ đầu tiên, các kênh R, G và B được để yên, trong khi / 0.7 yêu cầu trình duyệt cung cấp cho màu này độ mờ là 70%.

Trong ví dụ thứ hai trong LAB, tôi đã yêu cầu trình duyệt tính L chia cho 2, điều này cắt giảm độ sáng làm đôi và làm cho màu tối hơn, trong khi chỉ để các kênh A và B.

Và trong ví dụ thứ ba, trong OKLCH, tôi sẽ để các kênh L và H một mình, trong khi cắt C, sắc độ, một phần ba, làm cạn kiệt cường độ ra khỏi màu sắc.

Cú pháp màu tương đối giúp xác định toàn bộ bảng màu nhanh chóng, tiện dụng khi tạo hệ thống thiết kế.

Các mô hình màu mới cũng cải thiện cách chúng ta có thể xác định độ dốc.

Đây là một gradient tuyến tính đơn giản chuyển từ trắng sang xanh lam.

Trong nhiều năm, các loại gradient này luôn được tính toán bằng cách sử dụng không gian màu sRGB.

Bây giờ, bắt đầu từ Safari 16.2, chúng ta có thể nói rõ ràng rằng chúng ta muốn gradient được tính toán trong sRGB, nếu đó là những gì chúng ta muốn.

Hoặc chúng ta có thể thay đổi không gian màu sắc.

sRGB-linear tương tự như sRGB, nhưng làm mịn quá trình chuyển đổi giữa các màu theo kiểu tuyến tính hơn.

Nhưng bạn có thể nhận thấy rằng cả hai điều này đều chuyển đổi qua tông màu tím.

Nếu chúng ta chuyển sang OKLAB, các màu được tính toán ở giữa sẽ có nhiều màu xanh lam hơn và có lẽ đó là những gì chúng ta muốn.

LCH tình cờ tạo ra kết quả tương tự, mặc dù không giống nhau.

OKLCH chuyển đổi qua quang phổ màu vàng, xanh lá cây và xanh mòng két.

LAB tình cờ có màu tím hơn nhiều.

Hoặc chúng ta có thể sử dụng HSL hoặc HWB nếu chúng ta thích những kết quả này.

Nó thực sự phụ thuộc vào dự án và hiệu ứng thiết kế mà chúng tôi muốn.

Không ai trong số này là đúng hay sai. Không ai trong số họ là tốt nhất.

Nó phụ thuộc.

Có rất nhiều lựa chọn mới để xác định độ dốc.

Chuyển đổi không gian màu có tác động rất lớn.

Điều này cũng áp dụng cho những thay đổi về màu sắc.

Không gian màu ảnh hưởng đến phép nội suy của những gì xảy ra ở giữa.

Tác động tương tự cũng được áp dụng khi trộn các màu với nhau.

Vâng, bây giờ bạn có thể trộn màu sắc trong CSS.

Bắt đầu từ Safari 16.2, có một chức năng trộn màu mới.

Bạn liệt kê hai màu để trộn và chỉ định không gian màu nào sẽ sử dụng, và trình duyệt kết hợp chúng lại với nhau.

Bạn có thể nhận ra màu xanh tía này từ giữa gradient.

Thay vào đó, chúng ta có thể chuyển sang bất kỳ không gian màu nào khác mà chúng ta đã xem xét để sử dụng với gradient.

Tất cả những điều này tạo ra những kết quả khác nhau.

Theo mặc định, sự pha trộn màu sắc tạo ra màu mới từ 50% màu này và 50% màu kia.

Nhưng bạn có thể thay đổi nó thành bất kỳ tỷ lệ nào bạn muốn, 80/20 hoặc 30/70.

Bạn cũng có thể đặt hai số thành tổng cộng nhỏ hơn 100%, điều này làm cho màu sắc trong mờ.

Ở đây, tôi đã đặt màu trắng thành 30% và màu xanh lam thành 30%, tạo cho màu kết quả độ mờ đục là 60%.

Bạn thậm chí có thể sử dụng từ khóa currentcolor để trộn màu văn bản hiện tại với bất cứ thứ gì bạn muốn.

Trong trường hợp này, tôi đang trộn màu liên kết xanh đậm với 40% màu trắng để tạo ra màu xanh lục nhạt hơn để sử dụng với màu di chuột.

Có rất nhiều thứ ở đây.

Gam màu P3, các mô hình và chức năng màu mới, khả năng thay đổi không gian màu cho độ dốc và hoạt ảnh, những cách mới để xác định màu sắc bằng cách thay đổi các kênh của màu hiện có hoặc thông qua pha trộn - có rất nhiều tiềm năng ở đây khi nói đến việc tận dụng màu sắc trong các thiết kế của chúng tôi cho web.

Một điều cuối cùng cần biết về hỗ trợ cho màu P3.

Trình duyệt không chỉ cần hỗ trợ một số tính năng nhất định trong CSS hoặc JavaScript sử dụng màu P3, và tất nhiên, hệ điều hành và màn hình của người dùng cần hỗ trợ nó, mà trình duyệt cũng cần hỗ trợ kết xuất trong P3 cho từng phần cụ thể của trang web, trong các phần khác nhau của DOM.

Bạn sẽ muốn kiểm tra chi tiết cho từng trình duyệt trước khi cho rằng nó hoạt động phổ biến.

Hãy để tôi cung cấp cho bạn thông tin cập nhật về P3 trong Safari.

Chúng tôi đã vận chuyển hỗ trợ cho hình ảnh trong P3 bảy năm trước trong Safari 10.0.

Trong Safari 10.1, chúng tôi đã thêm hỗ trợ tổng thể cho P3 cho hầu hết các trang web.

Trong Safari 15.2, chúng tôi đã thêm hỗ trợ bên trong phần tử Canvas.

Và trong Safari 16.4, chúng tôi đã thêm hỗ trợ cho P3 trong WebGL Canvas thông qua việc sử dụng drawingBufferColorSpace.

Đối với các công cụ dành cho nhà phát triển, trong Safari 13.1, chúng tôi đã vận chuyển một bộ chọn màu trong Trình kiểm tra web giúp dễ dàng tìm thấy các màu chỉ có sẵn trong P3 hoặc chuyển đổi màu từ mô hình màu này sang mô hình màu khác.

Và trong Safari 15.2, chúng tôi đã thêm hỗ trợ cho P3 vào tab đồ họa Trình kiểm tra web.

Chúng tôi vẫn còn một chút việc phải làm.

Đầu tiên, để mở rộng hỗ trợ bên trong WebGL Canvas để bao gồm việc sử dụng unpackColorSpace.

Và để thêm hỗ trợ cho P3 trong các bộ lọc SVG, điều mà chúng tôi vẫn chưa thực hiện, bởi vì vẫn còn cuộc tranh luận đang diễn ra về tiêu chuẩn web.

Hiện tại, nếu bạn áp dụng Bộ lọc SVG, màu sắc sẽ được làm phẳng thành sRGB trong mọi trình duyệt.

Đây thực sự là một thời điểm thú vị để suy nghĩ lại về màu sắc trên web, đặc biệt là vì rất nhiều tính năng này cuối cùng sẽ có sẵn trên các trình duyệt.

Những tiến bộ trong CSS không chỉ thay đổi những gì có thể thiết kế mà còn giúp việc mã hóa các thiết kế đó dễ dàng hơn.

Các lớp giả :user-valid và :user-invalid cung cấp một cách để tạo kiểu biểu mẫu tùy thuộc vào việc người dùng có điền chính xác vào trường hay không.

Trong nhiều năm, các lớp giả :hợp lệ và :không hợp lệ có vẻ như chúng thực sự hữu ích.

Tôi muốn tạo kiểu cho trường biểu mẫu này để cảnh báo người dùng khi họ mắc lỗi.

Vì vậy, tôi sẽ thử :lớp giả không hợp lệ để chọn một đầu vào không hợp lệ.

Với :có đầu vào:không hợp lệ, tôi sẽ nhắm mục tiêu nhãn.

Và với ::trước phần tử giả, tôi sẽ chèn "x", vì vậy giao tiếp không chỉ phụ thuộc vào màu sắc.

Hãy nhìn vào kết quả.

Khi ai đó bắt đầu-- vâng, điều đó không tuyệt vời.

Ngay khi người dùng bắt đầu nhập, trình duyệt sẽ đánh dấu nó không hợp lệ vì nó chưa phải là địa chỉ email hợp lệ.

Bởi vì: dấu hiệu không hợp lệ nhập sai trước khi người dùng có cơ hội làm đúng, các nhà phát triển đã sử dụng JavaScript cho việc này thay thế.

Người dùng hợp lệ và người dùng không hợp lệ khắc phục sự cố này.

Họ sử dụng một thuật toán phức tạp hơn để xác định khi nào một trường biểu mẫu được coi là hợp lệ hoặc không hợp lệ.

Chúng tôi đã vận chuyển nó trong Safari 16.5.

Bây giờ chúng ta có thể thấy kết quả được cải thiện.

Không có cảnh báo màu đỏ nếu họ có nếu họ đã làm đúng.

Và nếu ai đó điền vào trường không chính xác, các cảnh báo màu đỏ sẽ xuất hiện sau khi họ rời khỏi trường, khi chúng tôi muốn cảnh báo họ quay lại và sửa nó.

Như bạn có thể thấy, :user-invalid đặc biệt mạnh mẽ khi nó được kết hợp với :has().

Trên thực tế, năm nay chúng tôi đã tăng sức mạnh của :has() bằng cách làm cho nó hoạt động với nhiều lớp giả hơn nữa.

:Has(:lang()) cho phép tạo kiểu cho bất cứ thứ gì trên trang tùy thuộc vào sự hiện diện của một ngôn ngữ cụ thể.

Và :has() hỗ trợ cho các lớp giả phương tiện cung cấp kiểu dáng có điều kiện tùy thuộc vào trạng thái phát lại âm thanh và video.

Lớp giả :dir lấp đầy một khoảng trống khi nói đến hướng ngôn ngữ hỗ trợ.

Tùy thuộc vào ngôn ngữ đang được sắp chữ, văn bản có thể chảy từ trái sang phải hoặc từ phải sang trái.

Cái này thường được viết tắt là LTR và RTL.

Ngày nay, CSS ngày càng có nhiều thuộc tính logic, cho phép bạn tham khảo phần bắt đầu và kết thúc của luồng văn bản, thay vì trái hoặc phải.

Ví dụ, sử dụng margin-inline-start và margin-inline-end, thay vì margin-left và margin-right, để dễ dàng viết CSS hoạt động cho mọi ngôn ngữ.

Nhưng không phải mọi thứ trong thiết kế của bạn đều có thể được xử lý bằng cách sử dụng các thuộc tính logic.

Đây là nơi mà lớp giả hướng đi mới có thể hữu ích.

Ở đây, tôi có một biểu tượng mà tôi muốn chuyển đổi tùy thuộc vào hướng của văn bản.

Khi tiêu đề có hướng LTR, tôi sẽ xoay SVG theo một chiều và khi tiêu đề là RTL, tôi sẽ xoay nó theo cách khác.

Đây là một kỹ thuật đơn giản hơn nhiều so với những gì đã được sử dụng trong quá khứ để hỗ trợ nhiều hướng ngôn ngữ.

:User-valid và không hợp lệ, bổ sung vào :has(), và lớp giả :dir đều giúp việc viết mã mạnh mẽ và ngắn gọn dễ dàng hơn.

Năm nay cũng mang đến một số tính năng giúp bạn có thể tinh chỉnh các chi tiết trong kiểu chữ của mình đến độ hoàn hảo tuyệt đối.

Hãy bắt đầu với một cái nhìn vào các đơn vị chiều cao dòng mới.

Trong CSS, chúng ta có nhiều loại đơn vị khác nhau mà chúng ta có thể sử dụng để xác định độ dài.

Một số đơn vị có liên quan đến kích thước khung nhìn, như svh và lvh, hoặc liên quan đến kích thước của thùng chứa, như cqb và cqi.

Các đơn vị khác có liên quan đến kích thước trong kiểu chữ.

Một ex bằng x-chiều cao của phông chữ.

Một ch, đối với ký tự, khớp với kích thước nội tuyến của ký tự 0 trong phông chữ.

Và một ic là kích thước nội tuyến của một ký tự ý thức hệ trong các tập lệnh CJK - kích thước nội tuyến là chiều rộng ở chế độ viết ngang hoặc chiều cao ở chế độ viết dọc.

Các đơn vị này đã được hỗ trợ trong các trình duyệt trong một thời gian.

Chà, có một đơn vị mới cũng liên quan đến kích thước trong kiểu chữ của bạn: đơn vị lh, cho chiều cao dòng và rlh cho chiều cao dòng gốc.

Các đơn vị này cho phép chúng tôi kết nối bất cứ thứ gì trong bố cục của mình với lượng không gian giữa các dòng.

Ví dụ, tôi đặt chiều cao dòng thành 1.4 trên phần tử HTML gốc.

Sau đó, tôi đặt một phần đệm 2rlh trên phần tử phần, thẻ trắng này.

Sau đó, tôi đặt tiêu đề và lề đoạn văn theo hướng khối thành 1rlh.

Bây giờ có chính xác nhiều khoảng trống giữa các dòng văn bản như thể có văn bản ở đó thay vì khoảng trắng.

Điều đó thiết lập những gì được biết đến trong kiểu chữ là nhịp điệu dọc.

Các đơn vị chiều cao dòng không ngăn chặn các tình huống có thể phá vỡ nhịp điệu dọc, nhưng chúng mang đến một công cụ cực kỳ đơn giản trên web giúp chúng ta tiến gần hơn đến việc mở khóa truyền thống đánh máy lâu đời này, cho phép chúng ta tạo ra một kết nối mật thiết giữa kiểu và khoảng trắng xung quanh loại.

Có rất nhiều thách thức trong việc đánh bóng kiểu chữ kỹ thuật số trên web theo tiêu chuẩn cao của kiểu chữ truyền thống.

Một trong số này liên quan đến kích thước phông chữ.

Nếu bạn là một nhà thiết kế web, có khả năng bạn đang cẩn thận lựa chọn họ phông chữ và kích thước phông chữ của mình.

Nhưng phông chữ bạn muốn có thể không tải xuống hoặc nó có thể không có sẵn trên hệ điều hành của người dùng.

Đó là lý do tại sao cách tốt nhất là khai báo một chồng phông chữ trong họ phông chữ để cung cấp kế hoạch dự phòng cho trình duyệt.

Phông chữ đầu tiên được tìm thấy là phông chữ được sử dụng.

Tương tự, phông chữ lớn như thế nào xuất hiện trực quan ở một kích thước cụ thể không phải là thứ mà nhà phát triển web có thể kiểm soát.

Đây là SF Hello ở bên trái, và Baskerville ở bên phải.

Chúng được sắp chữ để có cùng kích thước, nhưng SF Hello trông lớn hơn nhiều vì nó lấp đầy nhiều không gian hơn bên trong hộp dòng của nó.

Nó có chiều cao x lớn hơn.

Sự khác biệt này được gây ra bởi các lựa chọn được thực hiện khi các tệp phông chữ được tạo.

Ở đây, tôi có một ví dụ trong đó tôi đang sắp chữ một bài viết với kích thước phông chữ: 1.4rem và tôi đang xác định một ngăn xếp phông chữ đơn giản cho bất kỳ mã nào bên trong bài viết đó.

Bạn có thể thấy mã trông nhỏ hơn văn bản đoạn văn như thế nào.

Nó đặc biệt đáng chú ý nếu bạn so sánh Fs.

Nếu mã rơi trở lại không gian đơn, thì nó trông lớn hơn văn bản đoạn văn.

Chúng tôi có thể cố gắng bù đắp bằng cách điều chỉnh kích thước phông chữ để mã bằng 120% kích thước phông chữ bài viết, thậm chí có thể vượt quá kích thước khi Courier được sử dụng, nhưng nếu trình duyệt rơi trở lại không gian đơn, thì mã thậm chí còn lớn hơn văn bản đoạn văn.

Những gì chúng ta cần là một cách để nói với trình duyệt, "Vui lòng chỉ làm cho hai phông chữ này trông giống như chúng có cùng kích thước" và để nó tìm ra cách thực hiện.

Đó chính xác là những gì điều chỉnh kích thước phông chữ.

Nó điều chỉnh kích thước phông chữ trông như thế nào để tạo ra sự nhất quán trực quan.

Tôi đã thêm một dòng CSS-- font-size-adjust: 0.47-- và bây giờ mã sắp chữ của tôi phù hợp trực quan với văn bản đoạn văn, ngay cả đối với cả hai phông chữ trong ngăn xếp.

Nhưng tại sao lại là 0.47? Con số này có nghĩa là gì?

Đối với bất kỳ phông chữ Latin nào bạn có thể sử dụng trên web, có một tỷ lệ giữa kích thước phông chữ và chiều cao x của nó.

Tỷ lệ đó hơi tùy ý, nhưng thường thì nó khoảng 50%.

Bằng cách áp dụng font-size-adjust: 0.47 cho phần tử bài viết, tôi thực sự yêu cầu trình duyệt thay đổi kích thước mọi phông chữ bên trong bài viết-- phông chữ đoạn văn, phông chữ mã, bất kể phông chữ nào được sử dụng từ một trong hai ngăn xếp - vì vậy chiều cao x của mỗi phông chữ luôn bằng 47% kích thước phông chữ

Tôi đã chọn 0.47 vì đó là điều khiến Iowan Old Style trông giống như khi không cần điều chỉnh kích thước phông chữ được áp dụng.

Chúng tôi đã vận chuyển hỗ trợ cho các khả năng cơ bản này của việc điều chỉnh kích thước phông chữ trong Safari 16.4.

Trong Safari 17, chúng tôi đang bổ sung hỗ trợ cho các khả năng nâng cao hơn.

Sẽ không tốt hơn nếu bạn không phải theo dõi một con số kỳ diệu như 0.47 để thử và làm cho mọi phông chữ phù hợp với phông chữ chính của bạn?

Giá trị từ phông chữ cho phép bạn yêu cầu trình duyệt chỉ cần tìm ra tất cả.

Cũng trong Safari 17, chúng tôi đang thêm hỗ trợ cho cú pháp hai giá trị, cho phép bạn chỉ định số liệu nào nên được sử dụng khi tạo tính nhất quán về kích thước.

Theo mặc định, đó là chiều cao cũ, nhưng thay vào đó bạn có thể sử dụng chiều cao giới hạn, chiều rộng ch, chiều rộng ic hoặc chiều cao ic.

Safari 17 cũng bổ sung hỗ trợ cho bộ mô tả điều chỉnh kích thước, cho phép bạn thực hiện một loại điều chỉnh tương tự khi bạn thiết lập phông chữ với quy tắc @font-face.

Đó là điều chỉnh kích thước phông chữ.

Nó cho phép bạn kiểm soát nhiều hơn một chút đối với thứ gì đó không thể dễ dàng kiểm soát chỉ với kích thước phông chữ.

Nhưng ngay cả với các đơn vị chiều cao dòng mới và khả năng điều chỉnh kích thước hình ảnh của loại của bạn, vẫn có những thứ có thể tạo ra sự không đồng đều khó chịu trong kích thước hộp dòng của bạn.

Chúng tôi đang nghiên cứu một vài giải pháp cho vấn đề này.

Cắt hộp văn bản là một trong số đó.

Theo một số cách, text-box-trim tương tự như margin-trim.

Cả hai đều cho phép bạn cắt bỏ khoảng trắng không mong muốn, nhưng trong trường hợp này, trên một hộp văn bản.

Bạn đã bao giờ vật lộn để có được thứ gì đó xếp hàng theo chiều dọc trên web chưa?

Tên này không được căn giữa theo chiều dọc.

Có lẽ sẽ rõ ràng hơn nếu tôi vẽ một đường thẳng qua giữa.

Văn bản trực quan thấp hơn trung tâm.

Điều này xảy ra mọi lúc trên web.

Nhưng tại sao?

Chà, thực ra hộp văn bản được căn giữa theo chiều dọc.

Nhưng các glyphs đang nằm thấp hơn bên trong chiếc hộp này.

Có thêm khoảng trống bên trên và bên dưới các chữ cái được dành riêng bởi phông chữ.

Lượng không gian thừa ở trên và bên dưới không giống nhau vì phông chữ không cần nhiều bên dưới như ở trên và điều đó làm mất tâm theo chiều dọc.

Không gian thừa này cực kỳ quan trọng.

Nó dành riêng cho dấu trọng âm, dấu nguyên âm, và nhiều hơn nữa.

Nhưng nó có thể loại bỏ bố cục đánh máy trên web.

Text-box-trim cung cấp cho chúng ta một cách để cắt bỏ không gian bổ sung này cho mục đích bố trí trong khi vẫn hiển thị toàn bộ tất cả các glyphs.

Điều này không chỉ giúp ích cho việc căn giữa theo chiều dọc.

Đây là một ví dụ trong đó không gian bổ sung dành riêng cho phông chữ trên chiều cao nắp khiến không thể dễ dàng có được phần trên cùng của tiêu đề thẳng hàng với phần trên cùng của hình ảnh.

Bằng cách cắt giảm không gian thừa, việc sắp xếp mọi thứ trở nên dễ dàng.

Đây là tất cả một công việc đang được tiến hành.

Tên thuộc tính đã thay đổi từ leading-trim thành text-box-trim.

Kể từ Bản xem trước Công nghệ Safari 171, mã bạn thấy trên màn hình là cách nó hoạt động, nhưng đừng quá gắn bó với những chi tiết này.

Chúng tôi hy vọng nó sẽ tiếp tục thay đổi.

Có lẽ nó sẽ trở nên như thế này.

Hãy dùng thử nó trong Safari Technology Preview và cho chúng tôi biết suy nghĩ của bạn.

Phản hồi ban đầu từ các nhà thiết kế và phát triển web như bạn là cách CSS trở nên tốt nhất có thể.

Trong khi đó, đây là thứ có hỗ trợ tuyệt vời trên các trình duyệt và sẽ sớm đến với Safari 17, Phong cách Counter.

Có lẽ bạn đã rất quen thuộc với các danh sách có thứ tự trong HTML, trong đó việc sử dụng CSS cung cấp một cơ chế dễ dàng để thay đổi hệ thống đánh số nào được sử dụng.

Ở đây tôi đang áp dụng kiểu danh sách: devanagari.

Có hàng tá hệ thống đánh số được xác định trước khác nhau có thể được áp dụng với một dòng CSS, bao gồm nhiều ngôn ngữ trên khắp thế giới.

Nhưng không phải tất cả.

Còn Serbo-croatian thì sao?

Nếu tôi chỉ định kiểu danh sách: upper-serbo-croatian, tôi chỉ nhận được các số Ả Rập phương Tây mặc định.

Đây là nơi Counter Styles xuất hiện.

Tôi có thể xác định một hệ thống đánh số, tương tự như cách trình duyệt thực hiện nó.

@Counter-style, sau đó là cái tên tôi muốn đặt cho nó, sau đó tôi xác định phẩm chất của phong cách.

Trong trường hợp này, cài đặt hệ thống thành chữ cái và liệt kê các ký hiệu.

Nhóm công tác quốc tế hóa W3C đã xuất bản một tài liệu về Phong cách truy cập làm sẵn bao gồm hàng trăm nền văn hóa trên khắp thế giới.

Chúng tôi đã tăng số lượng ngôn ngữ được WebKit hỗ trợ và mở một cuộc thảo luận tại Nhóm làm việc CSS về việc tất cả các trình duyệt cung cấp hỗ trợ cho tất cả những điều này.

Nhưng cho đến khi điều đó xảy ra, bạn có thể sao chép các đoạn mã từ tài liệu này và dán chúng vào mã của bạn.

Bạn cũng có thể tạo kiểu cho các bộ đếm danh sách trở thành một cái gì đó hoàn toàn tùy chỉnh.

Tôi đã tạo kiểu cho danh sách này để đếm các mục ở dạng nhị phân, với tối thiểu bốn chữ số.

Và cái này để quay vòng một bộ biểu tượng cảm xúc lặp đi lặp lại.

Bộ đếm CSS cũng có thể được sử dụng để đánh số nội dung khác trên trang, bên cạnh danh sách.

Giống như các tiêu đề bắt đầu mỗi phần trong một tài liệu dài.

Đây là một ví dụ.

Tôi có ba tiêu đề H2, chỉ với các từ cho mỗi tiêu đề.

Trong CSS, tôi tạo một bộ đếm bằng cách khai báo đặt lại bộ đếm.

Tôi đã đặt tên nó là "đánh số" và tôi đã đặt nó để bắt đầu đếm sau số không.

Sau đó, sử dụng :trước phần tử giả, tôi bảo trình duyệt tăng bộ đếm và hiển thị nó trong nội dung.

Theo mặc định, bộ đếm sử dụng các số Ả Rập phương Tây--1, 2, 3-- nhưng chúng ta có thể thay đổi điều đó.

Cũng giống như trước đây, tôi có thể tạo kiểu cho quầy thành bất cứ thứ gì tôi muốn.

Đó là cách tạo và tạo kiểu cho bộ đếm.

Nhưng đó không phải là tất cả những gì chúng tôi đang làm trong năm nay để giúp bạn đưa kiểu chữ của mình lên một tầm cao mới.

Trên thực tế, sẽ có rất nhiều CSS sắp ra mắt trong năm nay.

Trong Safari 16.2, chúng tôi cũng đã vận chuyển hỗ trợ căn chỉnh đường cơ sở cuối cùng cho Grid và Flexbox, cộng với một số chức năng bên trong font-variant-alternates và @font-feature-values để hỗ trợ thêm các tính năng Open Type.

Safari 16.4 cũng đã thêm hỗ trợ cho cú pháp phạm vi Truy vấn Phương tiện và logic boolean, @property và hơn thế nữa.

Safari 16.5 cũng đã thêm hỗ trợ cho CSS Nesting.

Và trong Safari 17, chúng tôi cũng đang thêm tính năng phát hiện công nghệ phông chữ và định dạng phông chữ, chứa kích thước nội tại, chuyển đổi văn bản: kana có chiều rộng đầy đủ và kích thước đầy đủ và hơn thế nữa.

Chúng tôi muốn gửi lời cảm ơn sâu sắc đến tất cả những người đã lưu trữ các vấn đề, ping chúng tôi trên phương tiện truyền thông xã hội hoặc viết các bài đăng trên blog để cho chúng tôi biết công nghệ web nào bạn cần triển khai hoặc cải thiện nhất.

Chúng tôi đang lắng nghe, và đầu vào của bạn có tác động.

Vui lòng cho chúng tôi biết bạn cần gì nữa.

Bạn có thể gửi báo cáo lỗi và yêu cầu tính năng cho công nghệ web tại bugs.webkit.org‚ trình theo dõi sự cố cho WebKit.

Các vấn đề về giao diện của Safari hoặc bất cứ điều gì về iOS, iPadOS và macOS, hãy gửi chúng tại feedbackassistant.apple.com.

Đảm bảo rằng bạn có thông tin mới nhất về những gì được hỗ trợ trong Safari.

Chúng tôi thường nghe từ các nhà phát triển yêu cầu chúng tôi triển khai thứ gì đó đã thực sự được vận chuyển.

Caniuse là một nguồn tài nguyên tuyệt vời cho việc này.

Bạn cũng có thể cập nhật tin tức mới nhất trên webkit.org, nơi bạn sẽ tìm thấy các bài viết chuyên sâu về từng bản phát hành của Safari, ghi chú phát hành cho Bản xem trước công nghệ Safari, tài liệu mở rộng về Trình kiểm tra web và hơn thế nữa.

Tải xuống Bản xem trước Công nghệ Safari để cập nhật những gì sắp tới trong tương lai.

Nó được cập nhật khoảng hai tuần một lần, vì vậy nó có những bổ sung mới nhất cho WebKit.

Safari Technology Preview cũng có tất cả các tính năng mới đã sẵn sàng để được xem trước theo mặc định.

Hoặc bạn có thể bật và tắt các tính năng trong ngăn Cờ tính năng mới trong Cài đặt Safari, bắt đầu từ Safari 17, bạn có thể truy cập từ Menu Phát triển được thiết kế lại hoàn toàn, với quyền truy cập nhanh để kết nối Trình kiểm tra web trên máy Mac của bạn với các trang web và ứng dụng web trên iPhone, iPad hoặc các thiết bị khác, bao gồm không

Xem "Khám phá lại các tính năng của nhà phát triển Safari" tại WWDC23 để tìm hiểu về tất cả.

Các ứng dụng web đang đến với Mac.

Thêm vào đó, chúng tôi đã đóng gói một năm đầy đủ các cải tiến cho các ứng dụng web trên iPhone và iPad.

"Có gì mới trong các ứng dụng web" bao gồm tất cả.

Và tìm hiểu về các định dạng hình ảnh mới đến với Safari và WebKit, bao gồm JPEG XL, và tất cả về API Nguồn Phương tiện được Quản lý mới trong "Khám phá các định dạng phương tiện cho web."

Chúng tôi rất vui mừng về việc có bao nhiêu công nghệ web mới đang được vận chuyển trong WebKit và Safari trong năm nay và chúng tôi hy vọng bạn cũng vậy.

Và chúng tôi nóng lòng muốn xem bạn làm gì với tất cả.

Cảm ơn vì đã xem.