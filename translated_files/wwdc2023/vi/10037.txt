10037

♪ ♪

Richard: Xin chào, tôi là Richard.

Hôm nay, tôi rất vui được nói chuyện với bạn về một số tính năng mới thú vị trong Biểu đồ Swift: Biểu đồ hình tròn, lựa chọn và cuộn.

Hãy bắt đầu với biểu đồ hình tròn.

Swift Charts cung cấp các khối xây dựng có thể kết hợp và tùy chỉnh để bạn tạo tất cả các loại trực quan hóa dữ liệu.

Ngày nay, điểm mới của gia đình Swift Charts là những biểu đồ hình tròn ngon, đẹp mắt.

Biểu đồ hình tròn cho thấy tổng giá trị được tạo thành như thế nào bởi các danh mục khác nhau, thông qua các hình dạng đơn giản, quen thuộc.

Ví dụ, đây là biểu đồ trực quan hóa dữ liệu bán bánh kếp cho xe bán đồ ăn của bạn bè tôi.

Biểu đồ hình tròn không có trục và chúng rất phù hợp cho các cài đặt thông thường, nơi độ chính xác không quan trọng.

Với sự hiểu biết rộng rãi về cách nêm tạo nên một vòng tròn đầy đủ, chúng trực quan để hình dung các mối quan hệ một phần với toàn bộ.

Một lý do quan trọng khiến mọi người thích biểu đồ hình tròn là vì hình dạng tròn, dễ tiếp cận của chúng.

Bạn có thể tạo biểu đồ hình tròn bằng cách sử dụng cú pháp thành phần dựa trên dấu mà bạn đã quen thuộc.

Giới thiệu một loại nhãn hiệu mới, SectorMark.

Một SectorMark đại diện cho một lát trong chiếc bánh.

Nó được đặt trong không gian cực.

Không phải cực này, mà là hệ tọa độ cực.

Kích thước của một lĩnh vực tỷ lệ thuận với giá trị mà nó đại diện.

Dọc theo bán kính, bạn có thể tùy chỉnh giao diện của một khu vực.

Nếu tôi tăng bán kính bên trong, biểu đồ hình tròn sẽ trở thành biểu đồ bánh rán.

Với SectorMark, bạn có thể dễ dàng xây dựng tất cả các loại biểu đồ hình tròn và biểu đồ bánh rán.

Để tôi chỉ cho bạn một ví dụ.

Hoạt động kinh doanh xe tải thực phẩm bánh kếp quốc tế của bạn bè chúng tôi đã chứng kiến sự tăng trưởng lớn, hồi sinh trong doanh số bán hàng ngày của họ trong suốt năm qua, bán sáu kiểu bánh kếp.

Mùa hè này, tôi đã thực hiện một thử thách khác để giúp họ cải thiện ứng dụng bán hàng của mình.

Tôi bắt đầu với một biểu đồ hình dung các kiểu bánh kếp bán chạy nhất.

Đối với điều đó, ứng dụng hiện có một biểu đồ thanh xếp chồng đơn giản.

Nó có một BarMark, với doanh số bán hàng được xếp chồng lên nhau dọc theo kích thước X.

Vì đó là dữ liệu phân loại, danh mục được phản ánh dưới dạng kiểu tiền cảnh của mỗi thanh xếp chồng lên nhau.

Biểu đồ này hoàn thành công việc, nhưng hãy biến nó thành biểu đồ hình tròn để tận dụng không gian có sẵn trên màn hình và làm cho dữ liệu nổi bật.

Tất cả những gì tôi cần làm là chuyển BarMark và đối số x cho SectorMark và góc.

Thật đơn giản!

Với SectorMark, tôi sử dụng góc để thể hiện số lượng bán hàng.

Các giá trị góc bạn cung cấp cho biểu đồ hình tròn được tự động chuẩn hóa thành một vòng tròn đầy đủ.

Tôi cũng có thể áp dụng một số tùy chỉnh phong cách.

angularInset có thể được đặt trên một khu vực để tạo khoảng cách giữa các khu vực.

Ở đây, tôi đặt phần chèn góc cho các khu vực thành 1,5 điểm, vì vậy khoảng cách giữa hai khu vực là gấp đôi phần bên trong, rộng 3 điểm.

Tôi cũng đặt bán kính góc mang lại cho tôi một lớp vỏ bánh tròn độc đáo.

Điều đó trông thật tuyệt vời chỉ với một vài dòng mã.

Để thử một diện mạo khác, hãy biến biểu đồ này thành biểu đồ bánh rán.

Tôi đặt bán kính bên trong là một tỷ lệ của bán kính đầy đủ của chiếc bánh.

Đối với tôi, tỷ lệ vàng trông gần như vừa phải, nhưng bạn có thể muốn một độ dày khác cho chiếc bánh rán của mình.

Trong tất cả các loại bánh kếp đã bán, chúng tôi có một người chiến thắng rõ ràng, cachapa, hiện đang được hiển thị phía trên biểu đồ.

Nhưng vì biểu đồ bánh rán rỗng ở trung tâm, tôi muốn di chuyển văn bản đến trung tâm của biểu đồ.

Tôi đặt văn bản vào một biểu đồ Bối cảnh.

Tôi sử dụng một số phép tính vị trí để đảm bảo văn bản được căn giữa trong lỗ bánh rán.

Bây giờ đó là một biểu đồ bánh rán trông tiện lợi.

Vậy đó là biểu đồ hình tròn và biểu đồ bánh rán.

Chúng là một cách tuyệt vời để tạo ấn tượng với dữ liệu của bạn và chúng hoàn toàn tuyệt đẹp trên màn hình lớn.

Tiếp theo, tôi muốn đi sâu vào một số tính năng tương tác của biểu đồ, bắt đầu với lựa chọn.

Bằng cách cho phép tính tương tác trong biểu đồ của bạn, bạn đang dần dần tiết lộ các chi tiết bổ sung.

Tính tương tác khuyến khích mọi người khám phá dữ liệu một cách tự nhiên bằng cách sử dụng các hình thức đầu vào khác nhau, chẳng hạn như cảm ứng.

Lựa chọn là một cách trực tiếp để bạn giao tiếp với biểu đồ và các biểu đồ do Apple thiết kế, giống như biểu đồ nhịp tim, là những ví dụ hoàn hảo về điều đó.

Bằng cách chọn một điểm dọc theo một trục, biểu đồ sẽ tiết lộ thông tin bổ sung.

Hãy đưa ý tưởng này lên ứng dụng bán bánh kếp.

Một biểu đồ trong ứng dụng trực quan hóa doanh số trung bình của mỗi ngày trong tuần ở hai thành phố.

Tôi sẽ cho phép lựa chọn giá trị trên biểu đồ này để hiển thị các con số bán hàng chi tiết thông qua cửa sổ bật lên hiển thị số lượng bánh kếp được bán vào ngày đã chọn.

Đây là cách biểu đồ được xác định. Mỗi thành phố có một chuỗi dữ liệu.

Mỗi yếu tố trong sê-ri có một ngày trong tuần và số lượng bán hàng.

Các dòng sau đó được tạo kiểu theo tên thành phố.

Bạn có thể đã quen thuộc với công cụ sửa đổi chartOverlay, cho phép bạn phủ lên chế độ xem SwiftUI để ghi lại các cử chỉ.

Nhưng trong iOS 17, tôi có thể sử dụng công cụ sửa đổi chartXSelection mới.

Nó xử lý tất cả các nhận dạng cử chỉ cho tôi và lưu trữ giá trị đã chọn vào một ràng buộc.

Công cụ sửa đổi lựa chọn cung cấp cho tôi giá trị ngày thô dọc theo trục X, vì vậy tôi xác định một thuộc tính được tính toán để khớp nó với một điểm dữ liệu trong biểu đồ đường của mình.

Hãy mở rộng biểu đồ để hiển thị cửa sổ bật lên khi một giá trị được chọn.

Khi một giá trị được chọn, tôi thêm một dấu quy tắc dọc làm chỉ báo lựa chọn.

Tôi đặt chỉ số Z của nó thấp hơn giá trị 0 mặc định để đảm bảo dấu quy tắc ở phía sau dấu dòng.

Bây giờ hãy tạo một cửa sổ bật lên trên đầu chỉ báo lựa chọn.

Tôi có thể làm điều này dưới dạng chú thích bằng cách sử dụng chế độ xem SwiftUI tùy chỉnh.

Chú thích thường được định vị trong biểu đồ, nhưng trong trường hợp này, cửa sổ bật lên vượt ra ngoài giới hạn của biểu đồ.

Đây là nơi tôi cần một giải pháp tràn cho các chú thích.

Trên trục X, tôi làm cho nó phù hợp với biểu đồ sao cho cửa sổ bật lên không bao giờ di chuyển qua giới hạn ngang của biểu đồ.

Trên trục Y, tôi vô hiệu hóa độ phân giải tràn để chú thích có thể ở ngay phía trên biểu đồ.

Với một ràng buộc lựa chọn và một dấu quy tắc với chú thích, bây giờ tôi có một biểu đồ đường tương tác.

Biểu đồ Swift cũng hỗ trợ lựa chọn trên macOS, trong đó cử chỉ di chuột là mặc định cho lựa chọn giá trị.

Bên cạnh lựa chọn giá trị đơn lẻ, một biến thể của công cụ sửa đổi lựa chọn biểu đồ này cho phép bạn chọn một phạm vi.

Trên iOS, mặc định là cử chỉ chạm hai ngón tay và trên macOS, đó là cử chỉ kéo.

Swift Charts cũng cho phép bạn cung cấp một cử chỉ tùy chỉnh để lựa chọn, với ChartProxy giúp bạn chọn một giá trị dựa trên các vị trí cử chỉ.

Ngoài các biểu đồ trong tọa độ X và Y, việc lựa chọn giá trị biểu đồ hoạt động liền mạch với biểu đồ hình tròn và biểu đồ bánh rán.

Khai thác và làm nổi bật các lĩnh vực rất thú vị.

Vì vậy, lựa chọn là tất cả về việc tiết lộ thông tin bổ sung trong biểu đồ của bạn.

Một phần quan trọng khác của tính tương tác là điều hướng dữ liệu.

Hãy nói về việc cuộn.

Tôi muốn tạo một biểu đồ trực quan hóa doanh số bán bánh kếp hàng ngày trong cả năm.

Lắp tất cả 365 ngày trên màn hình sẽ không thực tế, vì vậy nó phải có thể cuộn được.

Để cho phép cuộn, tôi chỉ cần gọi công cụ sửa đổi chartScrollableAxes.

Với chartXVisibleDomain, tôi đặt một khoảng thời gian hiển thị là 30 ngày.

Để có thể hiển thị tổng doanh số bán bánh kếp trong miền hiển thị hiện tại, tôi sử dụng chartScrollPosition để lưu trữ ngày hiện tại thành một ràng buộc.

Bây giờ tôi chỉ có thể lấy ngón tay của mình và cuộn.

Tôi không chỉ có thể cuộn cốt truyện, nội dung trục cuộn với nó và nó mịn như bơ.

Cuộn có thể được tùy chỉnh theo một vài cách khác nhau.

Ví dụ, tôi muốn cuộn để luôn chụp vào một đơn vị ngày.

Điều này đưa chúng ta đến các hành vi cuộn.

ScrollTargetBehavior là một bổ sung mới cho SwiftUI và Swift Charts cho phép bạn căn chỉnh nội dung chế độ xem cuộn với các giá trị.

Đối với hành vi chụp nhanh mà tôi muốn, tôi đặt nó để phù hợp với giờ đầu tiên của một ngày.

majorAlignment tùy chỉnh nó thêm một bước nữa bằng cách xác định hành vi vuốt.

Ở đây, tôi đặt nó vào ngày đầu tiên của tháng, để khi tôi lướt qua biểu đồ bằng cách vuốt, tôi sẽ luôn truy cập vào ngày đầu tiên của mỗi tháng.

Các biểu đồ có thể cuộn được xây dựng dựa trên một số cải tiến mới nhất đối với chế độ xem cuộn trong SwiftUI.

Để biết thêm thông tin, hãy chắc chắn kiểm tra Beyond Scroll Views.

Biểu đồ Swift cung cấp cho bạn vô số khả năng trực quan hóa dữ liệu.

Ngoài các biểu đồ trong và tọa độ X và Y, các biểu đồ hình tròn hiện là một phần của họ API để tạo các biểu đồ do Apple thiết kế.

Biểu đồ hình tròn là những hình ảnh trực quan đơn giản nhưng mạnh mẽ.

Chúng hoạt động tốt nhất khi đại diện cho các mối quan hệ dữ liệu một phần toàn bộ.

Các tính năng tương tác như lựa chọn và cuộn cho phép một chiều hướng hoàn toàn mới trong trực quan hóa dữ liệu của bạn, đặt người dùng của bạn ở ghế lái khi họ khám phá dữ liệu.

Thưởng thức các biểu đồ bánh nướng và bánh rán.

♪ ♪