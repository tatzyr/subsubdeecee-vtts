10031

♪ ♪

Nina: Xin chào.

Tên tôi là Nina Paripovic, và tôi là một kỹ sư phần mềm watchOS.

Trong phiên mã này, chúng tôi sẽ lấy một ứng dụng hiện có được xây dựng với watchOS 9 SDK và cập nhật nó cho watchOS 10.

Chúng ta sẽ nói về các mô hình thiết kế mới và API SwiftUI mà bạn có thể sử dụng để làm cho ứng dụng của mình trông đẹp mắt cùng với thiết kế lại trên toàn hệ thống.

Dự án mẫu được liên kết trong danh sách Tài nguyên được liên kết với phiên này.

Tôi khuyến khích bạn bắt đầu tải xuống ngay bây giờ để chúng ta sẵn sàng xây dựng cho watchOS 10 cùng nhau.

Trước khi chúng ta nhảy vào, chúng ta hãy xem xét dự án hiện tại của chúng ta.

Ứng dụng chúng tôi sẽ cập nhật là Backyard Birds, một ứng dụng cho phép bạn tạo và quản lý những khu vườn sân sau tuyệt đẹp và những vị khách tò mò của họ.

Trong ứng dụng hôm nay, có một danh sách các sân sau.

Mỗi sân sau có một cái nhìn chi tiết cho chúng ta thấy hoạt động và tình trạng của nó.

Nếu thức ăn hoặc nước uống sắp hết, chúng có thể được nạp lại.

Chúng tôi cũng có thể nhìn thấy tất cả những vị khách chim của chúng tôi ở mỗi sân sau.

watchOS 10 mang đến một giao diện mới thú vị, mới mẻ để xem các ứng dụng.

Nếu bạn chưa có, hãy xem "Gặp gỡ watchOS 10" cũng như "Thiết kế và xây dựng ứng dụng cho watchOS 10" để biết thêm thông tin về các nguyên tắc thiết kế mà chúng tôi sẽ áp dụng trong phiên này.

Bây giờ, hãy mở Xcode để bắt đầu cập nhật ứng dụng của chúng tôi.

Đây là ứng dụng Backyard Birds hiện tại của chúng tôi được xây dựng và chạy trên watchOS 9.

Chúng tôi thấy danh sách các sân sau, chuyển sang chi tiết sân sau.

Đầu tiên, hãy xây dựng dựa trên watchOS10 SDK.

Ứng dụng trông rất tuyệt.

Chúng tôi thấy các tính năng hệ thống mới, như tiêu đề lớn chuyển tiếp khi chúng tôi cuộn và tài liệu mới làm mờ nội dung bên dưới thanh điều hướng.

Nhấn vào sân sau làm sinh động ô và chúng tôi đã tự động áp dụng kiểu nút thanh công cụ trên toàn hệ thống mà chúng tôi thấy ở trên cùng bên trái.

Nếu chúng ta cuộn và sau đó nhấn vào Nạp tiền, nó sẽ trình bày một phương thức với tài liệu nền mờ mới của chúng ta.

Những người sử dụng Backyard Birds quan tâm nhất đến những gì đang xảy ra ở sân sau của chính họ.

Hiện tại, khi họ khởi chạy ứng dụng, điều đầu tiên họ làm là nhấn vào sân sau trong danh sách để xem điều gì đang xảy ra trong chế độ xem chi tiết.

Trong watchOS 10, chúng ta có thể làm mọi thứ dễ dàng hơn bằng cách sửa đổi cấu trúc của ứng dụng với NavigationSplitView.

Điều này sẽ cho phép mọi người phóng trực tiếp vào chế độ xem chi tiết sân sau của họ và sau đó quay lại danh sách khi họ muốn đến thăm sân của bạn bè.

Vì chế độ xem chi tiết là phần quan trọng nhất trong ứng dụng của chúng tôi, chúng tôi có thể nhấn mạnh vào nó bằng cách triển khai NavigationSplitView.

NavigationSplitView thật tuyệt vời khi chúng ta có danh sách nguồn mạnh mẽ và mối quan hệ chi tiết này.

Nó cho phép mọi người tập trung vào chi tiết bằng cách khởi chạy trực tiếp vào nó, trong khi vẫn có thể dễ dàng chuyển sang sân khác từ danh sách nguồn.

Chúng tôi đã sử dụng nó cho Backyard Birds trên iOS và iPadOS.

Có vẻ như NavigationSplitView sẽ rất phù hợp với ứng dụng của chúng tôi.

Trong ContentView, chúng ta sẽ hoán đổi NavigationStack lấy NavigationSplitView.

Sau đó, chúng tôi sẽ di chuyển nội dung của navigationDestination của chúng tôi vào chi tiết của NavigationSplitView.

Cuối cùng, chúng tôi sẽ áp dụng các API lựa chọn danh sách mới, có sẵn trong watchOS 10, điều khiển chế độ xem chi tiết nào được trình bày bởi NavigationSplitView.

Để bắt đầu, hãy hoán đổi NavigationStack lấy NavigationSplitView.

Chúng ta có thể để lại Danh sách Sân sau nơi nó nằm ở thư mục gốc của NavigationSplitView.

Hãy xóa công cụ sửa đổi navigationDestination và di chuyển BackyardView vào trình tạo chế độ xem chi tiết.

Vì selectedBackyard là một tùy chọn, hãy đảm bảo mở gói nó và cung cấp chế độ xem dự phòng.

Cuối cùng, hãy sử dụng trình khởi tạo danh sách nhận ràng buộc lựa chọn.

Khi bạn cung cấp giá trị cho tham số lựa chọn của danh sách, liên kết lựa chọn sẽ điều khiển chế độ xem chi tiết mà chúng tôi trình bày trong NavigationSplitView của mình.

Tốt.

Bây giờ chúng ta thấy chế độ xem chi tiết cho sân đã chọn của chúng ta theo mặc định.

Vì chúng tôi khởi chạy trực tiếp đến từng chi tiết, chúng tôi có thể xóa Tiêu đề điều hướng.

Chúng ta có thể điều hướng trở lại để xem phần còn lại của sân sau bằng cách sử dụng nút danh sách nguồn.

Và nhấn trở lại chế độ xem chi tiết cho chúng ta một hình ảnh động toàn màn hình tuyệt đẹp.

Ngay bây giờ, chế độ xem sân sau là một danh sách dài các nội dung có thể cuộn.

Danh sách của chúng tôi đã được chia thành ba phần khác nhau với các bộ chức năng riêng biệt, chế độ xem hôm nay, chế độ xem môi trường sống và chế độ xem của khách truy cập.

Chúng tôi sẽ có thể cải thiện sự rõ ràng trực quan của ứng dụng của mình bằng cách thay vào đó sử dụng TabView và tạo tab cho từng phần.

TabView cung cấp cho chúng tôi một cách để chia nhỏ nội dung thành các chế độ xem toàn màn hình, với mỗi tab có một mục đích rõ ràng và riêng biệt.

Tôi muốn giữ chức năng Digital Crown để cuộn nhanh qua các chế độ xem.

Kiểu trang dọc mới cho phép tôi làm điều này với TabView.

Mọi người có thể nhanh chóng điều hướng giữa các tab và thậm chí cuộn trong một tab duy nhất.

Hãy quay trở lại Xcode và cập nhật chế độ xem chi tiết để sử dụng TabView.

Trong BackyardView, hãy di chuyển từng phần vào chế độ xem tương ứng của riêng nó và thay thế Danh sách bằng TabView.

Vì mỗi trang của TabView chiếm kích thước đầy đủ của màn hình, chúng tôi không cần các phần và dải phân cách.

Hãy đảm bảo thêm các tiêu đề phần trở lại dưới dạng Tiêu đề điều hướng.

Cuối cùng, hãy sử dụng công cụ sửa đổi tabViewStyle và chỉ định rằng chúng tôi muốn verticalPage.

Chúng tôi sắp đến nơi rồi.

Khi chúng tôi phân trang, chúng tôi thấy các chế độ xem ổn định trong mỗi tab.

Để giúp mọi người nhanh chóng xem nhanh tất cả khách truy cập hơn, chúng tôi có thể gói Chế độ xem khách truy cập của mình trong Danh sách.

Bây giờ, TabView sẽ chỉ định một tab cho chế độ xem Danh sách con của nó.

Nếu danh sách vượt quá chiều cao của màn hình, chế độ xem sẽ có thể cuộn được.

Nếu bạn có nội dung có thể cuộn trong TabView dọc, hãy đặt nó vào tab cuối cùng bất cứ khi nào có thể.

Tôi cũng sẽ chia chế độ xem môi trường sống thành hai tab riêng biệt, để mọi người có thể dễ dàng phân biệt giữa mực nước và thức ăn.

Đối với điều này, tôi đã tạo ra thước đo của riêng mình phù hợp hơn trong TabView.

Trong TabView của chúng tôi, hãy thay thế HabitatView bằng GaugeView mới của chúng tôi bằng cách tạo một ví dụ cho thực phẩm và một ví dụ cho nước.

Trông thật tuyệt.

Bây giờ tất cả những gì chúng ta cần làm là thêm lại chức năng nạp lại.

Đối với điều này, tôi sẽ sử dụng một thanh công cụ.

Thanh công cụ đã được nâng cấp trong watchOS 10 với các tùy chọn vị trí hoàn toàn mới, nhất quán trên tất cả các kích thước màn hình.

Vị trí thanh dưới cùng mới là một nơi tuyệt vời để đặt các điều khiển.

Tôi sẽ sử dụng tùy chọn vị trí này bằng cách thêm nút Nạp tiền vào thanh dưới cùng.

Quay trở lại HabitatGaugeView mới, chúng tôi sẽ thêm một thanh công cụ và sau đó sử dụng ToolbarGroup để chỉ định chúng tôi muốn đặt thanh dưới cùng.

Tôi sẽ sử dụng một miếng đệm để thêm nút vào góc cuối của thanh công cụ.

Bây giờ chúng ta có nhiều không gian hơn và việc tập trung vào bản tóm tắt Môi trường sống sẽ dễ dàng hơn.

Tôi muốn làm nhiều hơn để giúp định hướng mọi người khi họ điều hướng qua TabView.

Ngoài ra, nếu thức ăn và nước uống của sân sau thấp, tôi muốn chú ý đến điều này.

Chúng ta có thể đạt được điều này bằng cách áp dụng độ dốc nền.

Tiêu đề cho mỗi tab rất hữu ích, nhưng màu sắc sẽ là một cách tuyệt vời để tăng khả năng xem và củng cố vị trí của chúng ta trong chế độ xem chi tiết.

Chúng ta cũng có thể sử dụng nó để làm nổi bật trạng thái sân sau của chúng ta nếu thức ăn hoặc nước uống sắp cạn kiệt.

Độ dốc hệ thống là một cách hay để chuyển tiếp điều này trong khi vẫn duy trì độ tương phản với các phần tử tiền cảnh.

Hãy sử dụng công cụ sửa đổi nền vùng chứa với độ dốc màu để đạt được điều này.

Trước tiên hãy xóa nền gốc của chúng ta.

Chúng ta có thể thêm một chức năng vào BackyardView để xác định màu nền dựa trên mực nước và thức ăn hiện tại.

Nếu mức độ thấp, nền sẽ có màu đỏ để chỉ ra rằng đã đến lúc nạp lại.

Tôi cũng sẽ thêm một số biến tính toán hữu ích.

Bây giờ chúng ta có thể chuyển thuộc tính được tính toán này cho công cụ sửa đổi containerBackground.

Công cụ sửa đổi lấy ShapeStyle, nơi chúng ta sẽ chuyển sang gradient màu cũng như ContainerBackgroundPlacement.

Ở đây, chúng tôi sẽ chỉ định nó cho TabView.

Tôi cũng muốn thay đổi màu đo khi nền thay đổi.

Hãy chuyển cùng một biến màu được tính toán.

Hãy áp dụng công cụ sửa đổi containerBackground cho các chế độ xem khác trong TabView, sử dụng màu nhấn của ứng dụng.

Khi chúng tôi cuộn, bạn có thể thấy rằng gradient tương phản độc đáo với các yếu tố tiền cảnh.

Và khi chúng ta nhấn vào nút thanh công cụ, chúng ta có thể thấy độ dốc nền thay đổi như thế nào.

Như một điểm nhấn cuối cùng, tôi muốn sử dụng các tài liệu để làm nổi bật thông tin quan trọng.

Tài liệu đã có sẵn trên các nền tảng và là những ứng dụng mới để xem trong watchOS10.

Chúng là một cách hay để phân biệt giữa các yếu tố tiền cảnh và hậu cảnh đồng thời thêm sự phát triển thị giác.

Cuối cùng, họ có thể hiển thị hoặc củng cố thông tin trên màn hình.

Có một vài nơi trong ứng dụng mà chúng ta có thể sử dụng vật liệu và sự sống động.

Hãy cùng xem nào.

Để bắt đầu, tôi muốn thay thế phông nền bóng từ tiêu đề sân sau và thay vào đó sử dụng nền vật liệu.

Nền của ô đầy màu sắc và việc thêm vào một tài liệu sẽ giúp mang lại sự rõ ràng cho tiêu đề.

Mọi người thực sự quan tâm đến số lượng khách tham quan chim ở mỗi sân sau, mà bạn có thể thấy trong chế độ xem tóm tắt.

Sẽ thật tuyệt nếu hiển thị nó trong chế độ xem danh sách, để mọi người có thể nhìn thấy nó mà không cần đi vào chế độ xem chi tiết của sân sau.

Tôi sẽ thêm nó như một lớp phủ khác và cung cấp nền tảng vật chất cho con số.

Các ứng dụng watchOS có xu hướng sử dụng nền tối, vì vậy vật liệu mặc định là các biến thể tối.

Bởi vì sân sau sáng sủa và đầy màu sắc, tôi sẽ chuyển những thứ này sang biến thể ánh sáng.

Và cùng với đó, ứng dụng Backyard Birds của chúng tôi hiện đã được cập nhật cho watchOS 10.

Hãy xem lại tất cả những thay đổi lớn mà chúng tôi vừa thực hiện.

Chúng tôi đã thêm NavigationSplitView vào danh sách của mình.

Sau đó chúng tôi đã thay thế Danh sách bằng Chế độ xem Tab Dọc.

Chúng tôi đã thêm chức năng vào thanh công cụ với mỗi sân sau, cũng như một số độ dốc đẹp.

Để hoàn thành, chúng tôi đã sử dụng các vật liệu để hiển thị thông tin hữu ích.

Cảm ơn vì đã viết mã cùng với tôi.

Đây là một năm trọng đại đối với Apple Watch, và tôi khuyến khích bạn khám phá nhiều phiên hơn.

Để đi xa hơn với Backyard Birds, hãy truy cập "Xây dựng các tiện ích cho Smart Stack trên Apple Watch".

Tôi nóng lòng muốn xem các bản cập nhật bạn sẽ thực hiện để ứng dụng của bạn tỏa sáng trên watchOS 10.