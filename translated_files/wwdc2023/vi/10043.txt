10043

♪ ♪

Jeff: Xin chào, tôi là Jeff.

Tôi là một kỹ sư trong nhóm MapKit và tôi rất vui được giới thiệu với bạn MapKit cho SwiftUI.

Với SwiftUI API được mở rộng đáng kể của chúng tôi, việc tích hợp Bản đồ vào ứng dụng của bạn trên tất cả các nền tảng sẽ dễ dàng hơn bao giờ hết.

Chúng tôi nghĩ rằng bạn sẽ thích sử dụng MapKit cho SwiftUI để tạo ra trải nghiệm lập bản đồ mạnh mẽ cho người dùng của mình.

Để cho bạn thấy nó dễ dàng như thế nào, tôi sẽ xây dựng một kế hoạch chuyến đi đầy đủ chức năng từ đầu.

Tôi sẽ hướng dẫn bạn từng bước và chúng ta sẽ hoàn thành trước khi kết thúc phiên này.

Gia đình tôi sẽ trở về nhà ở New England vào cuối tuần này, và chúng tôi sẽ dành thứ Bảy để khám phá thành phố Boston xinh đẹp.

Chúng tôi sẽ đi bộ qua thành phố vào buổi sáng và ngắm cảnh, chúng tôi sẽ ăn trưa ở North End lịch sử, và có thể lấy một cannoli để tráng miệng.

Thời tiết trông cũng hoàn hảo, vì vậy chúng tôi sẽ đi ra bãi biển vào buổi chiều và cảm nhận cát giữa các ngón chân của chúng tôi.

Nó sẽ rất vui.

Tôi sẽ xây dựng một ứng dụng để giúp chúng tôi lên kế hoạch cho ngày hôm nay.

Tôi sẽ sử dụng chú thích để đánh dấu các địa điểm trên bản đồ.

Tôi sẽ bật lựa chọn để tôi có thể nhấn vào từng điểm đánh dấu để tìm hiểu thêm về địa điểm đó.

Tôi sẽ tích hợp Look Around để khám phá một số địa điểm mà chúng ta có thể muốn ghé thăm.

Tôi sẽ thêm một lớp phủ hiển thị tuyến đường lái xe đến bãi biển.

Tôi sẽ sử dụng bản đồ để hiển thị các địa điểm và khu vực khác nhau.

Tôi sẽ thêm một chiều khác vào bản đồ bằng cách cho phép độ cao thực tế.

Tôi sẽ chỉ cho bạn cách hiển thị hình ảnh vệ tinh và cầu vượt.

Tôi sẽ thêm một số điều khiển vào bản đồ, bao gồm nút vị trí người dùng, để tôi có thể tìm ra mình đang ở đâu.

Chúng tôi có rất nhiều thứ để trang trải. Hãy đi sâu vào nó!

Tôi sẽ bắt đầu với một dự án SwiftUI hoàn toàn mới.

Tôi sẽ sử dụng MapKit.

Và tôi sẽ thêm một Bản đồ.

Tuyệt vời!

Tôi có một bản đồ tương tác chỉ với một dòng mã!

Gia đình tôi sẽ bắt đầu ngày mới bằng cách lái xe vào thành phố và đỗ xe để chúng tôi có thể đi bộ xung quanh.

Tôi đã nghe nó nói rằng có một nơi cụ thể mà bạn nên "pahk" "cah" của mình gần Boston, nhưng tôi thích nhà để xe ngay bên dưới Common.

Boston Common là một công viên xinh đẹp ngay giữa mọi thứ, và nó sẽ là một điểm khởi đầu tuyệt vời cho chuyến tham quan đi bộ của chúng tôi.

Điều đầu tiên tôi sẽ làm là thêm một số nội dung vào bản đồ để đánh dấu nhà để xe.

Tôi sẽ đánh dấu vị trí ngay phía trên đường dốc mà các phương tiện sử dụng để vào nhà để xe, gần thang máy chúng tôi sẽ đi lên để bắt đầu đi bộ.

Bạn sẽ tìm hiểu về cách sử dụng Điểm đánh dấu và Chú thích để hiển thị nội dung ở một tọa độ cụ thể trên bản đồ.

Vì vậy, hãy đỗ xe và bắt đầu đi bộ!

Tôi sẽ sử dụng tính năng đóng MapContentBuilder để thêm điểm đánh dấu vào bản đồ.

Tuyệt!

Nếu bạn đã quen thuộc với SwiftUI, việc thêm Điểm đánh dấu vào bản đồ có cảm giác giống như thêm Chế độ xem vào Danh sách.

Kiểm tra cách bản đồ đã tự động đóng khung nội dung của chúng tôi bằng cách phóng to để hiển thị Điểm đánh dấu.

Vậy Marker là gì?

Có loại nội dung nào khác mà tôi có thể trình bày bằng trình tạo nội dung không?

Điểm đánh dấu được sử dụng để hiển thị nội dung ở một tọa độ cụ thể trên bản đồ.

Hình dạng quả bóng bay có thể trông quen thuộc với bạn.

Bạn sẽ tìm thấy Điểm đánh dấu được sử dụng trong ứng dụng Bản đồ và trên nền tảng, bao gồm nhiều ứng dụng bạn có thể tìm thấy trên App Store.

Giống như Marker, Chú thích được sử dụng để hiển thị nội dung ở một tọa độ cụ thể.

Thay vì khinh khí cầu của Marker, Chú thích hiển thị Chế độ xem SwiftUI.

Trình tạo nội dung cũng có thể được sử dụng để trình bày nội dung lớp phủ.

Bạn sẽ tìm hiểu thêm về những thứ này một lát sau.

Hiện tại, tất cả những gì bạn thực sự cần biết là bạn có thể sử dụng đóng trình tạo nội dung để thêm tất cả các loại nội dung vào bản đồ.

Tôi muốn hiển thị chế độ xem SwiftUI tùy chỉnh cho chỗ đậu xe, vì vậy tôi sẽ sử dụng Chú thích để đánh dấu nó.

Ở đây, tôi đang sử dụng ZStack để soạn một số hình dạng và hình ảnh.

Chế độ xem SwiftUI này sẽ được hiển thị trên bản đồ tập trung ngay trên tọa độ đỗ xe.

Thay vào đó, nếu bạn muốn chế độ xem của mình được đặt phía trên tọa độ, bạn có thể sử dụng tham số neo của Chú thích.

Chỉ định giá trị neo của "dưới cùng" sẽ đặt dưới cùng của chế độ xem của bạn ngay trên tọa độ chú thích.

Được rồi!

Ứng dụng đánh dấu nơi chúng ta sẽ bắt đầu chuyến đi bộ của mình.

Tôi đã sử dụng MapContentBuilder để hiển thị nội dung chú thích trên bản đồ.

Tiếp theo, tôi muốn ứng dụng này truyền tải cảm giác về địa điểm khi tôi đang nhìn vào bản đồ.

Tôi sẽ sử dụng mapStyle để đạt được điều đó bằng cách cho phép độ cao địa hình thực tế.

Bạn cũng sẽ học cách sử dụng mapStyle để hiển thị hình ảnh vệ tinh hoặc cầu vượt.

Bạn có thể thiết lập một phong cách bằng cách sử dụng công cụ sửa đổi mapStyle.

Đây là phong cách bản đồ tiêu chuẩn.

Theo mặc định, nó cung cấp một bản trình bày phẳng giống như một bản đồ giấy vật lý.

Có vẻ như có một cây cầu bắc qua đầm phá, vì vậy bạn có thể đi bộ từ bên này sang bên kia.

Tuy nhiên, bản đồ phẳng này thực sự để lại điều gì đó cho trí tưởng tượng.

Tôi sẽ cho phép địa hình trên cao thực tế để cung cấp cho bản đồ một chiều không gian khác để làm việc.

Kích hoạt độ cao thực tế thực sự làm cho bản đồ trở nên sống động.

Bây giờ nhìn vào đầm phá, tôi có thể tưởng tượng việc đi trên một trong những chiếc thuyền thiên nga đi vòng quanh vào mùa hè và hình dung chiếc thuyền đi qua dưới cầu.

Sử dụng phong cách bản đồ hình ảnh là một cách tuyệt vời khác để cung cấp cho người dùng của bạn cảm giác về địa điểm.

Kiểu bản đồ hình ảnh hiển thị bản đồ được hiển thị bằng hình ảnh vệ tinh hoặc cầu vượt.

Phong cách bản đồ Hybrid kết hợp hình ảnh với đường và nhãn.

Tóm lại, tôi đã bật độ cao thực tế bằng cách sử dụng mapStyle tiêu chuẩn và tôi cũng đã chỉ cho bạn cách sử dụng một số kiểu bản đồ khác.

Tiếp theo, tôi muốn ứng dụng giúp chúng tôi tìm kiếm những địa điểm chúng tôi muốn ghé thăm.

Những đứa trẻ của chúng tôi sẽ cùng chúng tôi đi dạo quanh Boston, và tôi cũng muốn buổi sáng của chúng tôi vui vẻ cho chúng.

Người lớn có thể đánh giá cao việc nhìn thấy một số lịch sử trong khi những đứa trẻ có thể đánh giá cao xích đu và cầu trượt và thanh khỉ!

Tôi sẽ thêm một nút để tìm kiếm sân chơi và một nút để tìm kiếm các bãi biển nữa.

Ứng dụng sẽ thêm một Điểm đánh dấu cho mỗi kết quả tìm kiếm.

Bạn sẽ tìm hiểu thêm một chút về Markers và bạn cũng sẽ học cách hiển thị giao diện người dùng của riêng mình phía trên bản đồ mà không cản trở kết quả tìm kiếm.

Đầu ngày hôm nay, tôi đã thực hiện một chút Chế độ xem BeantownButtons.

Nhấn vào một nút sẽ gọi chức năng tìm kiếm bằng một truy vấn đơn giản, sân chơi hoặc bãi biển.

Chức năng tìm kiếm sử dụng MKLocalSearch để tìm các địa điểm gần nhà để xe Boston Common và viết kết quả bằng cách sử dụng ràng buộc.

Quay lại Chế độ xem nội dung chính của ứng dụng, tôi sẽ thêm Trạng thái để theo dõi kết quả tìm kiếm.

Khi giao diện người dùng BeantownButtons thực hiện tìm kiếm, nó sẽ ghi kết quả trở lại trạng thái này bằng cách sử dụng ràng buộc.

Tôi sẽ thêm các nút phía trên bản đồ ở cuối màn hình.

Sử dụng safeAreaInset sẽ đảm bảo giao diện người dùng của ứng dụng không che khuất bất kỳ nội dung nào tôi đang thêm hoặc bất kỳ điều khiển nào do hệ thống cung cấp có thể xuất hiện trên bản đồ, chẳng hạn như logo Apple Maps và liên kết Pháp lý.

Tiếp theo, tôi sẽ sử dụng trình tạo nội dung để thêm Điểm đánh dấu kết quả tìm kiếm.

Tôi đang sử dụng ForEach để thêm điểm đánh dấu cho mỗi kết quả tìm kiếm.

Tôi sẽ thử những nút này. Hãy tìm một số sân chơi.

Nhìn kìa! Sân chơi!

Bản đồ đã tự động đóng khung chúng bằng cách thu nhỏ để hiển thị tất cả chúng.

Làm thế nào về một số bãi biển?

Kết quả tìm kiếm là MKMapItems, là loại MapKit APIs như MKLocalSearch sử dụng để đại diện cho các địa điểm.

Ở đây, tôi đang sử dụng trình khởi tạo mục bản đồ của Marker.

Các điểm đánh dấu được tạo theo cách này sử dụng tên của mục bản đồ cho tiêu đề của chúng và sử dụng thông tin từ mục bản đồ để hiển thị biểu tượng và màu sắc thái đại diện cho địa điểm.

Hầu hết các kết quả tìm kiếm này hiển thị dưới dạng bút đánh dấu ô bãi biển màu xanh nhạt.

Khi bạn đang làm việc với các mục bản đồ, nội dung tự động và hỗ trợ kiểu dáng của Marker rất thuận tiện.

Tuy nhiên, ngay cả khi bạn không sử dụng các mục bản đồ, bạn vẫn có quyền kiểm soát bản trình bày của Marker.

Theo mặc định, Marker hiển thị biểu tượng ghim bản đồ trong quả bóng của nó, như bạn thấy ở đây.

Bạn có thể cung cấp biểu tượng của riêng mình bằng cách sử dụng nội dung Hình ảnh hoặc hình ảnh hệ thống.

Bạn cũng có thể hiển thị tối đa ba chữ cái văn bản bằng cách sử dụng chữ lồng.

Bạn có thể thay đổi màu của Marker bằng cách sử dụng công cụ sửa đổi tông màu.

Tóm lại, tôi đã sử dụng safeAreaInset để hiển thị một số nút phía trên bản đồ trong khi đảm bảo chúng không che khuất các điểm đánh dấu kết quả tìm kiếm.

Tiếp theo, tôi sẽ đặt ứng dụng kiểm soát những gì được hiển thị trên bản đồ.

Tôi đã thêm nội dung vào bản đồ.

Mỗi lần tôi có, bản đồ đã tự động đóng khung nội dung của tôi cho tôi.

Tôi sẽ chỉ cho bạn cách kích hoạt hành vi thuận tiện này khi bạn cần.

Tôi cũng sẽ chỉ cho bạn cách trưng bày một cái gì đó hoàn toàn khác, như bờ biển Bờ Bắc của khu vực Boston.

Ngay bây giờ, chúng tôi đang xem xét các bãi biển.

Nếu tôi đi và tìm kiếm sân chơi...

Bản đồ không còn tự động hiển thị kết quả gần chỗ đậu xe Boston Common của chúng tôi.

Để hiển thị kết quả tìm kiếm sau khi người dùng đã tương tác với bản đồ, tôi sẽ cần đặt lại trạng thái vị trí máy ảnh của Bản đồ để bản đồ sẽ đóng khung các điểm đánh dấu...

Vì vậy, tôi sẽ thêm trạng thái để theo dõi vị trí.

Tôi sẽ sử dụng vị trí tự động mặc định để đóng khung nội dung chúng tôi đã thêm vào bản đồ.

Và tôi sẽ chuyển ràng buộc đến trình khởi tạo Bản đồ.

Tôi sẽ sử dụng công cụ sửa đổi onChange để tìm hiểu khi nào kết quả tìm kiếm được cập nhật.

Khi có, tôi sẽ chỉ cần đặt vị trí máy ảnh trở lại tự động để đảm bảo chúng có thể nhìn thấy được.

Hãy thử xem nào.

Tôi sẽ tìm kiếm các bãi biển, xem kết quả...

Và sau đó đi trước khi tìm kiếm sân chơi.

Tuyệt!

Bây giờ khi tôi thực hiện tìm kiếm, tất cả các kết quả đều được hiển thị ngay cả khi tôi đã đi đến tận Rhode Island.

Có một điều khác tôi muốn làm bằng cách sử dụng trạng thái vị trí này.

Sau một buổi sáng vui vẻ ở Boston, gia đình tôi sẽ lái xe về phía Bắc để dành buổi chiều ở bãi biển.

Tôi muốn ứng dụng giúp bạn dễ dàng nhìn thấy bờ biển phía Bắc để chúng ta có thể cảm nhận được nơi chúng ta sẽ đến.

Tôi sẽ sử dụng trạng thái vị trí để làm điều đó.

Tôi sẽ thêm các khu vực tọa độ cho thành phố và cho Bờ Bắc.

Tôi sẽ chuyển sang giao diện người dùng BeantownButtons và tôi sẽ thêm một ràng buộc cho trạng thái vị trí của chúng tôi.

Tôi sẽ thêm một vài nút, mỗi nút đặt vị trí máy ảnh thành một vùng.

Khi tôi nhấn nút Thành phố, Bản đồ sẽ hiển thị Boston.

Khi tôi nhấn nút Sóng, bản đồ sẽ hiển thị bờ biển phía bắc.

Tôi sẽ chuyển trở lại ContentView và chuyển một vị trí ràng buộc với giao diện người dùng nút.

Hãy thử xem nào!

Khi tôi nhấn vào nút "sóng", vị trí của bản đồ đã được cập nhật để hiển thị khu vực bờ biển phía bắc.

Khi tôi nhấn vào nút "thành phố", nó được cập nhật để hiển thị Boston.

Đằng sau hậu trường, những gì Bản đồ hiển thị cuối cùng được điều khiển bởi MapCamera.

Máy ảnh nhìn vào tọa độ trên mặt đất từ một khoảng cách nhất định và hướng của máy ảnh xác định những gì có thể nhìn thấy trên bản đồ.

Ứng dụng tôi đang xây dựng không phải tự tạo hoặc định cấu hình máy ảnh.

Thay vào đó, nó chỉ đơn giản chỉ định những gì nên được xem bằng cách sử dụng MapCameraPosition.

MapKit chăm sóc máy ảnh cho tôi.

Ứng dụng sử dụng vị trí máy ảnh tự động để đóng khung nội dung, chẳng hạn như kết quả tìm kiếm.

Nó sử dụng một vị trí khu vực để hiển thị Boston và Bờ Bắc.

Bạn cũng có thể chỉ định vị trí máy ảnh để đóng khung những thứ khác.

Vị trí Rect được sử dụng để hiển thị một khu vực, giống như cách chúng tôi đã sử dụng khu vực.

Nó chỉ đơn giản là sử dụng bản đồ trực tiếp để biểu diễn khu vực đó, thay vì khu vực tọa độ.

Chúng ta hãy xem xét kỹ hơn về vật phẩm, máy ảnh và vị trí máy ảnh vị trí người dùng.

Sử dụng MKMapItem, bạn có thể chỉ ra một địa điểm cụ thể.

Điều này hoạt động cho tất cả các loại mục bản đồ.

Nếu mục bản đồ của bạn đại diện cho Vịnh Cape Cod, MapKit sẽ tự động thu nhỏ để nó vừa vặn.

Nếu bạn đang cố gắng hiển thị một công viên nhất định ở North End, máy ảnh sẽ phóng to để hiển thị môi trường xung quanh và mang lại cảm giác về địa điểm.

Bạn cũng có thể chỉ cần cung cấp một MapCamera, được cấu hình chính xác theo cách bạn muốn.

Sử dụng MapCamera với góc cao độ là một cách tuyệt vời để cung cấp phối cảnh 3D.

Hoặc, có lẽ bạn muốn máy ảnh theo dõi vị trí của người dùng khi họ đang đi dọc theo sông Charles.

Bạn có thể cung cấp một vị trí dự phòng sẽ được sử dụng khi vị trí của người dùng không được biết, chẳng hạn như khi ủy quyền vị trí chưa được cấp hoặc trong khi thiết bị đang cố gắng sửa vị trí.

Nếu bạn cung cấp ràng buộc với trạng thái vị trí máy ảnh của mình, MapKit sẽ cập nhật nó khi vị trí máy ảnh thay đổi.

Đây là vị trí camera định vị của người dùng. Thuộc tính followsUserLocation là đúng.

Nếu người dùng quay đi, máy ảnh sẽ không còn theo dõi vị trí của người dùng nữa.

Khi người dùng tương tác với bản đồ, trạng thái vị trí máy ảnh được định vị bởi người dùng.

Nếu ứng dụng đặt trạng thái vị trí máy ảnh trở lại Vị trí người dùng, máy ảnh sẽ theo dõi vị trí của người dùng.

Khi ứng dụng của bạn đặt trạng thái vị trí máy ảnh, nó không được định vị bởi người dùng.

Người dùng có thể định vị máy ảnh bằng cách tương tác với bản đồ bất kể bạn chỉ định loại vị trí máy ảnh nào.

Được rồi! Ứng dụng hiện đang kiểm soát những gì đang được xem trên bản đồ.

Tôi đã sử dụng vị trí máy ảnh tự động để đảm bảo kết quả tìm kiếm hiển thị ngay cả sau khi người dùng đã tương tác với bản đồ.

Tôi đã sử dụng vị trí camera khu vực để hiển thị Boston và North Shore.

Tiếp theo, thay vì chỉ tìm kiếm gần Boston Common, tôi muốn xoay bản đồ đến một khu vực mà tôi muốn ghé thăm và thay vào đó tìm kiếm ở đó.

Tôi sẽ chỉ cho bạn cách lấy vùng có thể nhìn thấy khi máy ảnh thay đổi.

Tôi sẽ thêm trạng thái để theo dõi khu vực hiển thị trên bản đồ.

Tôi sẽ thêm một công cụ sửa đổi onMapCameraChange, nơi tôi sẽ lấy khu vực hiển thị từ ngữ cảnh cập nhật và lưu trữ nó ở trạng thái của riêng tôi.

Theo mặc định, việc đóng cửa được cung cấp cho onMapCameraChange sẽ được gọi khi người dùng tương tác xong với bản đồ.

Để đóng cửa được gọi trong khi người dùng đang tương tác với bản đồ, bạn có thể yêu cầu cập nhật liên tục bằng cách truyền tham số tần số.

Ngoài thuộc tính khu vực mà tôi đang sử dụng ở đây, ngữ cảnh cũng có một thuộc tính cho bản đồ trực tràng có thể nhìn thấy và một thuộc tính cho chính máy ảnh bản đồ.

Tùy thuộc vào nhu cầu của tôi, tôi cũng có thể sử dụng chúng.

Tôi sẽ cập nhật BeantownButtons để nó sẽ tìm kiếm trong khu vực hiển thị cho người dùng.

Tôi sẽ thêm visibleRegion vào các nút.

Và tôi sẽ sử dụng nó trong yêu cầu tìm kiếm.

Trong ContentView, tôi sẽ chuyển Vùng hiển thị đến giao diện người dùng nút.

Hãy cùng tìm kiếm những bãi biển North Shore!

Có Bờ Bắc. Cho tôi xem một số bãi biển!

Ngọt ngào! Còn Rhode Island thì sao?

Tuyệt! Bây giờ tôi cũng có thể tìm kiếm các bãi biển ở Rhode Island!

Tôi đã bật tính năng này bằng cách sử dụng onMapCameraChange, thông báo cho chúng tôi khi có thay đổi về những gì hiển thị.

Tiếp theo, tôi muốn ứng dụng giúp việc chọn bãi biển nào chúng ta sẽ đến dễ dàng hơn một chút.

Chắc chắn có rất nhiều thứ để lựa chọn.

Để bắt đầu, tôi sẽ thêm hỗ trợ để chọn kết quả tìm kiếm.

Ngay bây giờ, nếu tôi nhấn vào điểm đánh dấu kết quả tìm kiếm, sẽ không có gì xảy ra.

Không có trạng thái lựa chọn, vì vậy các điểm đánh dấu không thể lựa chọn được.

Để kích hoạt lựa chọn, tôi sẽ chỉ thêm một ràng buộc lựa chọn vào Bản đồ của chúng tôi.

Bây giờ hãy xem điều gì sẽ xảy ra khi tôi nhấn vào một kết quả.

Quả bóng bay hoạt hình để cho thấy rằng nó đã được chọn!

Tôi đang sử dụng MKMapItem làm loại lựa chọn, vì vậy mỗi điểm đánh dấu đại diện cho một mục bản đồ hiện có thể lựa chọn được.

Chú thích Parking Spot không đại diện cho một mục bản đồ, vì vậy nó không thể lựa chọn được.

Nếu bạn muốn hỗ trợ lựa chọn Điểm đánh dấu và Chú thích không nhất thiết phải có cùng loại danh tính, bạn chỉ cần gắn thẻ chúng.

Điều này hoạt động giống như cách nó hoạt động khi quản lý lựa chọn với Picker và List.

Ở đây, trạng thái Thẻ đã chọn là một Int.

Mỗi điểm đánh dấu được gắn thẻ bằng một Int, vì vậy ràng buộc cho phép lựa chọn cho cả hai.

Khi sử dụng thẻ để bật lựa chọn, bạn có thể sử dụng bất kỳ loại nào phù hợp với hashable cho trạng thái lựa chọn của mình.

Tóm lại, tôi đã thêm liên kết lựa chọn MKMapItem vào Bản đồ, cho phép lựa chọn cho các điểm đánh dấu kết quả tìm kiếm.

Tiếp theo, ứng dụng sẽ hiển thị một số thông tin bổ sung về kết quả tìm kiếm đã chọn.

Tôi sẽ thêm một cái nhìn xung quanh bản xem trước để cung cấp một cái nhìn thoáng qua về bãi biển, và tôi cũng sẽ thêm tên của bãi biển và thời gian lái xe.

Đầu ngày hôm nay, khi tôi đang viết Chế độ xem BeantownButtons, tôi cũng đã viết một ItemInfoView nhỏ hiển thị...

Một tiêu đề, thời gian di chuyển ước tính và Xem trước Nhìn xung quanh.

Bản xem trước nhìn xung quanh sẽ cho tôi thấy bãi biển được chọn trông như thế nào.

Bản xem trước hiển thị một cảnh nhìn xung quanh.

Bạn có thể lấy cảnh cho một mục bản đồ nhất định bằng MKLookAroundSceneRequest.

Cảnh sẽ được tìm nạp khi chế độ xem được hiển thị và một lần nữa bất cứ khi nào kết quả tìm kiếm đã chọn thay đổi.

Cuối cùng, có một thuộc tính định dạng thời gian di chuyển dự kiến của MKRoute để hiển thị, sử dụng DateComponentsFormatter.

Tôi sẽ chuyển trở lại ContentView và thêm ItemInfoView này.

Điều đầu tiên trước tiên: Tôi sẽ nhận được một tuyến đường từ nhà để xe đến kết quả tìm kiếm đã chọn.

Tôi sẽ thêm trạng thái để theo dõi tuyến đường...

Và tôi sẽ thêm một hàm sử dụng MKDirections để có được một...

Và thiết lập trạng thái.

Tôi sẽ thêm một công cụ sửa đổi onChange khác để gọi hàm khi lựa chọn thay đổi.

Ứng dụng sẽ hiển thị chế độ xem thông tin mặt hàng của chúng tôi khi nó có kết quả tìm kiếm đã chọn.

Trong khi tôi đang ở đó, tôi sẽ ẩn tiêu đề Marker cho kết quả tìm kiếm để dọn dẹp giao diện của bản đồ một chút.

Thay vào đó, ItemInfoView sẽ hiển thị tên của địa điểm đã chọn.

Được rồi! Hãy xem những gì chúng ta có.

Bạn biết đấy, tôi nghe nói có một sân chơi gần cái này... Nó trông khá đẹp.

Tôi tự hỏi có chuyện gì xảy ra theo cách này vậy?

Tuyệt vời! Một bãi biển với một sân chơi, phải không?

Đối với gia đình chúng tôi, điều đó sẽ khá khó để đánh bại.

Cách Boston Common khoảng nửa giờ.

Có vẻ như là một địa điểm tuyệt vời.

Tóm lại, tôi đã thêm một cái nhìn xung quanh bản xem trước sẽ được hiển thị khi một điểm đánh dấu được chọn.

Cùng với thời gian di chuyển ước tính từ MKRoute, điều này thực sự sẽ giúp chúng tôi chọn một bãi biển.

Tiếp theo, vì chúng ta đã có một tuyến đường để hiển thị thời gian di chuyển, chúng ta hoàn toàn nên sử dụng nó để hiển thị tuyến đường lái xe từ Boston Common đến kết quả tìm kiếm đã chọn.

Tôi sẽ thêm một lớp phủ MapPolyline để hiển thị tuyến đường và tôi sẽ hiển thị cho bạn một số loại nội dung lớp phủ khác mà bạn cũng có thể thêm vào.

Khi một tuyến đường có sẵn, tôi sẽ thêm MapPolyline và vuốt nó bằng màu xanh lam.

Hãy xem nó trên bản đồ.

Trông giống như một ổ đĩa khá đẹp!

Nó khá dễ dàng để sử dụng MapPolyline với MKRoute.

Bạn cũng có thể sử dụng MapPolyline để hiển thị dữ liệu vị trí của riêng bạn.

Bạn có thể sử dụng StrokeStyle để cung cấp một số thứ khá lạ mắt, chẳng hạn như dấu gạch ngang và độ dốc.

Nếu bạn đang muốn làm nổi bật một khu vực, bạn sẽ muốn sử dụng MapPolygon hoặc MapCircle.

Đây là hai đa giác đánh dấu một vài công viên.

Đây là hai vòng tròn đánh dấu cùng một công viên.

Bạn sẽ nhận thấy rằng một mức lớp phủ được chỉ định cho mỗi vòng tròn.

Vòng tròn màu hồng đang sử dụng mức lớp phủ mặc định của các con đường phía trên, đặt nhãn của bản đồ phía trên vòng tròn.

Vòng tròn màu lục lam đang sử dụng các nhãn trên.

Ứng dụng đang thực sự hình thành.

Tôi đã thêm MapPolyline để hiển thị tuyến đường lái xe đến bãi biển và tôi đã chỉ cho bạn một vài loại lớp phủ khác mà bạn cũng có thể sử dụng.

Tiếp theo, tôi muốn ứng dụng giúp bạn dễ dàng tìm ra tôi đang ở đâu.

Khi chúng ta đến Boston và bắt đầu đi bộ xung quanh, có thể, thậm chí có khả năng, chúng ta sẽ bị lạc một chút.

Tôi sẽ thêm UserAnnotation làm nội dung để hiển thị vị trí của tôi và tôi sẽ thêm MapUserLocationButton để tìm chính mình.

Bạn sẽ tìm hiểu về một số loại điều khiển bản đồ khác cũng có sẵn để sử dụng.

Vì vậy, khi tôi đang cố gắng tìm lại chính mình, tôi thường bắt đầu bằng cách tìm kiếm chấm nhỏ màu xanh trên bản đồ.

Tôi đã thêm UserAnnotation vào nội dung bản đồ của mình, vì vậy bây giờ vị trí của tôi xuất hiện trên bản đồ.

Tôi đang ở đâu?

Tôi đây rồi!

Có vẻ như tôi thực sự ở khá xa những sân chơi và bãi biển mà chúng tôi đã kiểm tra.

Tôi chắc chắn đã phải thu nhỏ và xoay rất nhiều để đến Apple Park.

MapUserLocationButton chắc chắn sẽ giúp điều đó dễ dàng hơn.

Bây giờ, tôi có thể nhấn vào nút để hiển thị vị trí của mình.

Máy ảnh bản đồ sẽ theo tôi khi tôi di chuyển xung quanh.

Tôi cũng đã thêm MapCompass và MapScaleView.

Cấu hình mapControls mặc định hiển thị la bàn khi bản đồ được xoay và chỉ báo tỷ lệ trong khi người dùng đang phóng to hoặc thu nhỏ.

Tôi cũng muốn những điều khiển mặc định này trong ứng dụng này, vì vậy tôi đã chỉ định chúng ngoài nút vị trí người dùng.

Tôi đã thêm tất cả những thứ này bằng cách sử dụng công cụ sửa đổi mapControls, vì vậy bản đồ sẽ tự động hiển thị chúng ở vị trí mặc định của chúng.

Điều này bao gồm các điều khiển bản đồ trên tất cả các nền tảng, bao gồm MapZoomStepper và MapPitchSlider mà bạn sẽ tìm thấy trên macOS.

Nếu bạn muốn tự định vị các điều khiển này, bạn có thể trình bày chúng trong giao diện người dùng của riêng mình.

Các điều khiển Bản đồ chỉ đơn giản là các chế độ xem, vì vậy thay vì sử dụng công cụ sửa đổi mapControls, bạn chỉ cần thêm chúng như bất kỳ chế độ xem nào khác.

Khi bạn làm điều này, bạn sẽ cần sử dụng công cụ sửa đổi mapScope để liên kết các điều khiển của bạn với một phạm vi Bản đồ cụ thể.

Chúng ta sắp kết thúc bài thuyết trình, vì vậy hãy tóm tắt những gì chúng ta đã học được hôm nay.

MapKit cho SwiftUI là một API cực kỳ mạnh mẽ, dễ sử dụng để tích hợp Maps vào ứng dụng của bạn.

Nó cho phép bạn sử dụng Điểm đánh dấu, Chú thích và Lớp phủ để hiển thị nội dung của bạn trên bản đồ.

Camera bản đồ và Điều khiển bản đồ cho phép bạn điều chỉnh bản đồ theo nhu cầu của mình.

Cuối cùng, MapStyle và Look Around mang đến cho người dùng của bạn cảm giác thực sự về địa điểm.

Đây chỉ là một số tính năng của MapKit cho SwiftUI, vì vậy hãy đảm bảo kiểm tra Tài liệu dành cho nhà phát triển để tìm hiểu thêm.

Và tất nhiên, vì đây là SwiftUI, bản đồ của bạn sẽ trông tuyệt vời trên tất cả các nền tảng!

Một vài suy nghĩ cuối cùng khi chúng ta kết thúc.

Chúng tôi đã mở rộng API Máy chủ Apple Maps của mình để hỗ trợ Tự động hoàn thành và Chỉ đường.

Để tìm hiểu thêm về cách sử dụng API Máy chủ của chúng tôi, hãy xem phiên lồng tiếng năm ngoái "Gặp gỡ API Máy chủ Apple Maps". Như mọi khi, chúng tôi rất muốn nghe phản hồi của bạn!

Vui lòng sử dụng Trợ lý Phản hồi để chúng tôi nghe suy nghĩ của bạn.

Cuối cùng, nhưng không kém phần quan trọng, tôi khuyến khích bạn kiểm tra các tính năng mới trong SwiftUI năm nay.

Kế hoạch hoạt hình là một cách tuyệt vời để thêm hoạt ảnh vào bản đồ của bạn!

Kiểm tra chúng trong phiên bên dưới.

Thế là xong! Cảm ơn rất nhiều vì đã xem!

Tôi sẽ gặp bạn ở bãi biển!

♪ ♪