10093

♪ Hip-hop nhạc cụ êm dịu ♪

♪

Christopher Figueroa: Xin chào, tôi là Christopher Figueroa từ nhóm ARKit tại Apple.

Peter Kuhn: Và tôi là Peter Kuhn đến từ Unity.

Christopher: Unity đã đưa công cụ và hệ sinh thái XR của họ lên nền tảng mới này, giúp một nhà phát triển Unity như bạn dễ dàng đưa dự án của bạn đến dễ dàng hơn.

Peter và tôi sẽ chỉ cho bạn cách xây dựng trải nghiệm hoàn toàn nhập vai, như Rec Room ở đây, sử dụng quy trình làm việc Unity mà bạn đã quen thuộc.

Bạn sẽ bắt đầu bằng cách tạo ra một Không gian Nhập vai với phong cách Nhập vai Đầy đủ.

Điều này cho phép ứng dụng của bạn ẩn đường chuyền và đưa ai đó đến một thế giới khác.

Trong một trải nghiệm hoàn toàn nhập vai, Unity sử dụng Dịch vụ Compositor và cung cấp cho ứng dụng của bạn sức mạnh của khả năng kết xuất Metal.

Unity cũng tận dụng ARKit để nhận ra vị trí cơ thể của bạn và môi trường xung quanh, bao gồm cả việc theo dõi bàn tay xương.

Unity xây dựng dựa trên các công nghệ này để cung cấp các dịch vụ tương tự trong Unity Engine.

Có hai cách tiếp cận chính để tạo ra trải nghiệm nhập vai trên nền tảng này với Unity.

Bạn có thể mang lại trải nghiệm Unity hoàn toàn nhập vai cho nền tảng này, thay thế môi trường xung quanh người chơi bằng môi trường của riêng bạn.

Hoặc bạn có thể kết hợp nội dung của mình với thông qua để tạo ra những trải nghiệm nhập vai hòa quyện với môi trường xung quanh.

Nếu bạn quan tâm đến cách tiếp cận thứ hai, tôi khuyên bạn nên xem "Tạo các ứng dụng Unity nhập vai".

Bây giờ, Peter sẽ xem xét cách các công nghệ mới của Apple này giúp các nhà phát triển Unity mang các trò chơi VR hoàn toàn nhập vai đến nền tảng này.

Peter: Cảm ơn, Christopher.

Đầu tiên, tôi muốn bắt đầu bằng cách cho bạn xem Rec Room từ Against Gravity.

Đây là một nền tảng xã hội VR phổ biến cho phép người dùng tạo và chơi trò chơi và trải nghiệm với những người khác từ khắp nơi trên thế giới.

Nó được xây dựng trên công cụ trò chơi Unity, cung cấp một nền tảng mạnh mẽ và linh hoạt để phát triển trò chơi.

Tôi sẽ giới thiệu cho bạn một số công cụ và công nghệ giúp bạn dễ dàng đưa nội dung VR của mình lên nền tảng mới này, giống như Rec Room.

Tôi sẽ cho bạn biết về một số điều cần ghi nhớ khi lên kế hoạch đưa nội dung Unity của bạn lên nền tảng mới này.

Đầu tiên tôi sẽ đề cập đến quy trình làm việc mà bạn sẽ sử dụng để triển khai nội dung từ Unity đến thiết bị.

Có một vài điều bạn cần ghi nhớ liên quan đến đồ họa trên nền tảng này.

Và cuối cùng, tôi sẽ nói về cách điều chỉnh đầu vào bộ điều khiển thành đầu vào tay và một số công cụ mà Unity cung cấp để giúp chuyển đổi này.

Để bắt đầu, có một quy trình xây dựng và chạy mà bạn nên làm quen.

Chúng tôi đã xây dựng hỗ trợ đầy đủ cho nền tảng này vào Unity, vì vậy bạn có thể thấy các dự án của mình đang chạy trên thiết bị này chỉ trong vài bước.

Đầu tiên là chọn mục tiêu xây dựng cho nền tảng này.

Sau đó, giống như bạn làm với bất kỳ nền tảng VR nào khác, hãy bật Trình cắm XR.

Nếu ứng dụng của bạn dựa vào các trình cắm gốc, chúng sẽ cần được biên dịch lại cho nền tảng này.

Mặt khác, nếu bạn đang sử dụng mã nguồn thô hoặc tệp .mm, bạn đã sẵn sàng.

Xây dựng từ Unity bây giờ sẽ tạo ra một dự án Xcode, giống như nó làm cho mục tiêu iOS, Mac hoặc Apple TV.

Sau đó, từ bên trong Xcode, bạn có thể xây dựng và chạy đến thiết bị hoặc trình mô phỏng thiết bị để lặp lại nhanh hơn.

Đường ống đồ họa bạn sẽ sử dụng để biến môi trường xung quanh của ai đó thành một trải nghiệm hoàn toàn nhập vai cũng có thể quen thuộc với bạn.

Nhưng có một vài khái niệm mới quan trọng cần hiểu.

Một lựa chọn mà mọi dự án đưa ra ngay từ đầu là sử dụng đường ống kết xuất nào.

Universal Render Pipeline là một lựa chọn lý tưởng.

Nó cho phép một tính năng đặc biệt duy nhất cho nền tảng này được gọi là Kết xuất Foveated.

Kết xuất Foveated là một kỹ thuật tập trung mật độ điểm ảnh nhiều hơn ở trung tâm của mỗi ống kính, nơi mắt có khả năng được lấy nét và ít chi tiết hơn vào các thiết bị ngoại vi của màn hình nơi mắt ít nhạy cảm hơn với chi tiết.

Điều này dẫn đến trải nghiệm chất lượng cao hơn nhiều cho người sử dụng thiết bị.

Khi bạn sử dụng Universal Render Pipeline, Static Foveated Rendering được áp dụng trong toàn bộ đường ống.

Và nó hoạt động với tất cả các tính năng của URP, bao gồm xử lý hậu kỳ, xếp chồng máy ảnh, HDR và hơn thế nữa.

Nếu bạn có các thẻ kết xuất tùy chỉnh sẽ được hưởng lợi từ Kết xuất Foveated, có các API mới trong Unity 2022 có thể tận dụng lợi thế của công nghệ này.

Vì kết xuất hiện đang diễn ra trong một không gian phi tuyến, nên cũng có các macro đổ bóng để xử lý việc ánh xạ lại đó.

Tận dụng lợi thế của Static Foveated Rendering có nghĩa là bạn sẽ dành tài nguyên cho các điểm ảnh quan trọng và tạo ra trải nghiệm hình ảnh chất lượng cao hơn.

Một cách khác để tối ưu hóa đồ họa của bạn trên nền tảng này là sử dụng Kết xuất phiên bản một lần.

Trong Unity, Single-Pass Instanced Rendering hiện hỗ trợ API đồ họa Metal và nó sẽ được bật theo mặc định.

Với Single-Pass Instanced Rendering, công cụ chỉ gửi một cuộc gọi vẽ cho cả hai mắt và giảm chi phí của một số phần nhất định của đường ống kết xuất như loại bỏ và đổ bóng.

Điều này làm giảm chi phí CPU để hiển thị các cảnh của bạn trong âm thanh nổi.

Tin tốt là, nếu ứng dụng của bạn đã hiển thị chính xác trên các nền tảng VR khác bằng cách sử dụng Kết xuất phiên bản Single-Pass, các macro đổ bóng đảm bảo nó cũng sẽ hoạt động ở đây.

Có một điều cuối cùng cần xem xét.

Đảm bảo rằng ứng dụng của bạn đang ghi vào bộ đệm độ sâu cho mọi điểm ảnh một cách chính xác.

Bộ tổng hợp hệ thống sử dụng bộ đệm độ sâu để chiếu lại.

Bất cứ nơi nào thiếu thông tin độ sâu, hệ thống sẽ hiển thị màu lỗi như một dấu hiệu.

Một ví dụ là skybox thường cách xa người dùng vô hạn, vì vậy nó viết độ sâu bằng 0 với Z ngược.

Điều này yêu cầu sửa đổi để xuất hiện trên thiết bị.

Chúng tôi đã sửa tất cả các bộ đổ bóng của Unity để ghi các giá trị chính xác vào bộ đệm độ sâu, nhưng nếu bạn có bất kỳ hiệu ứng tùy chỉnh nào như hộp bầu trời tùy chỉnh hoặc có thể là hiệu ứng nước hoặc hiệu ứng trong suốt, hãy đảm bảo rằng một số giá trị được ghi vào độ sâu cho mỗi điểm ảnh.

Bây giờ bạn đã hiển thị đồ họa của mình cho thiết bị, đã đến lúc làm cho chúng tương tác.

Tương tác trên thiết bị này là duy nhất.

Mọi người sẽ sử dụng tay và mắt của họ để tương tác với nội dung.

Có một vài cách bạn có thể thêm tương tác vào các ứng dụng Unity của mình trên nền tảng này.

Bộ công cụ tương tác XR bổ sung tính năng theo dõi bằng tay để giúp bạn dễ dàng điều chỉnh các dự án hiện có hơn.

Bạn cũng có thể phản ứng với các cử chỉ hệ thống tích hợp với Hệ thống Đầu vào Thống nhất.

Và bạn có thể truy cập dữ liệu khớp tay thô cho các tương tác tùy chỉnh với Gói Unity Hands.

Bộ công cụ tương tác XR, còn được gọi là XRI, cung cấp một hệ thống tương tác cấp cao.

Bộ công cụ được thiết kế để giúp dễ dàng chuyển đầu vào thành các tương tác.

Nó hoạt động với cả đối tượng 3D và UI.

XRI tóm tắt loại đầu vào, như theo dõi bằng tay và chuyển đầu vào đó thành các hành động mà ứng dụng của bạn có thể phản hồi.

Điều này có nghĩa là mã đầu vào của bạn có thể hoạt động trên các nền tảng chấp nhận các loại đầu vào khác nhau.

XRI giúp dễ dàng phản hồi các tương tác phổ biến như di chuột, lấy và chọn, cả trong không gian 3D và trong giao diện người dùng cho thế giới không gian 3D.

Bộ công cụ cũng bao gồm một hệ thống vận động để mọi người có thể di chuyển qua một không gian hoàn toàn đắm chìm thoải mái hơn.

Khi mọi người tương tác với thế giới của bạn, phản hồi trực quan rất quan trọng để đắm chìm.

XRI cho phép bạn xác định các phản ứng trực quan cho từng ràng buộc đầu vào.

Cốt lõi của XRI là một tập hợp các thành phần Tương tác và Tương tác cơ bản.

Tương tác là các đối tượng trong cảnh của bạn có thể nhận đầu vào.

Bạn xác định Interactors, chỉ định cách mọi người có thể tương tác với Interactables của bạn.

Người quản lý tương tác liên kết các thành phần này lại với nhau.

Bước đầu tiên là quyết định đối tượng nào trong cảnh có thể được tương tác và cách phản ứng khi những tương tác đó xảy ra.

Chúng tôi làm điều này bằng cách thêm một thành phần Tương tác vào đối tượng.

Có ba loại tích hợp sẵn.

Đơn giản đánh dấu đối tượng là nhận tương tác.

Bạn có thể đăng ký các sự kiện như SelectEntered hoặc SelectExited với thành phần này.

Với Grab, khi đối tượng được chọn hoặc nắm lấy, nó sẽ đi theo Interactor xung quanh và kế thừa vận tốc của nó khi được giải phóng.

Các thiết bị tương tác dịch chuyển tức thời như TeleportArea và TeleportAnchor cho phép bạn xác định các khu vực hoặc điểm để người chơi dịch chuyển đến.

Và bạn có thể tạo các tương tác tùy chỉnh của riêng mình.

Người tương tác chịu trách nhiệm chọn hoặc tương tác với các đối tượng bạn đã gắn thẻ là Tương tác.

Họ xác định một danh sách các Tương tác mà họ có khả năng di chuột qua hoặc chọn từng khung hình.

Có một số loại Tương tác.

Những người tương tác trực tiếp chọn những người tương tác đang chạm vào nó.

Bạn sẽ sử dụng một trong những thứ này khi bạn muốn biết khi nào tay của một người chạm vào một vật thể tương tác hoặc khi nào chúng ở gần các vật thể tương tác.

Ray Interactors được sử dụng để tương tác từ xa.

Interactor này có cấu hình cao với các đường cong và thẳng, và các hình ảnh trực quan có thể tùy chỉnh để giúp bạn điều chỉnh nó theo phong cách trực quan của dự án của mình.

Khi người dùng bắt đầu tương tác, bạn có các tùy chọn về cách thức hoạt động của tương tác đó.

Ví dụ, nếu đó là một tương tác lấy, bạn có thể muốn di chuyển đối tượng đến tay người dùng.

Và Ray Interactor giúp bạn có thể giới hạn mức độ tự do để lấy để phù hợp với nhu cầu chơi trò chơi của bạn.

Một tương tác phổ biến trong một trải nghiệm nhập vai hoàn toàn là nắm lấy một đối tượng và đặt nó ở đâu đó theo ngữ cảnh với đối tượng đó.

Ví dụ, đặt pin vào ổ cắm.

Socket Interactor cho người chơi thấy rằng một khu vực nhất định có thể chấp nhận một đối tượng.

Những người tương tác này không được gắn vào tay.

Thay vào đó họ sống ở đâu đó trên thế giới.

Với tính năng theo dõi bằng tay hoặc thậm chí là bộ điều khiển, một loại tương tác phổ biến mà người dùng tự nhiên muốn thực hiện là tương tác chọc.

Điều này tương tự như một Interactor trực tiếp, ngoại trừ việc nó bao gồm lọc hướng để chuyển động chính xác phải được thực hiện để kích hoạt tương tác.

Nếu bạn muốn mọi người tương tác bằng cách nhìn, Gaze Interactor cung cấp một số tiện ích mở rộng cho Ray Interactor để giúp việc đối phó với ánh mắt dễ dàng hơn một chút.

Ví dụ, Gaze Interactors có thể tự động làm cho các máy va chạm lớn hơn cho Interactables để chúng dễ dàng lựa chọn hơn.

Để kết hợp tất cả lại với nhau, Người quản lý tương tác đóng vai trò trung gian giữa Người tương tác và Người tương tác, tạo điều kiện thuận lợi cho việc trao đổi các tương tác.

Vai trò chính của nó là bắt đầu các thay đổi trong trạng thái tương tác trong một nhóm Người tương tác và Người tương tác đã đăng ký được chỉ định.

Thông thường, một Trình quản lý tương tác duy nhất được thiết lập để cho phép khả năng tất cả các Tương tác ảnh hưởng đến tất cả các Tương tác.

Ngoài ra, nhiều Trình quản lý tương tác bổ sung có thể được sử dụng, mỗi người có loại Người tương tác và Người tương tác độc đáo của riêng họ.

Những người quản lý này có thể được kích hoạt hoặc hủy kích hoạt để kích hoạt hoặc vô hiệu hóa các bộ tương tác cụ thể.

Ví dụ, bạn có thể có một bộ Tương tác khác nhau cho mỗi cảnh hoặc trong menu của bạn.

Cuối cùng, thành phần Bộ điều khiển XR giúp bạn hiểu được dữ liệu đầu vào mà bạn sẽ nhận được.

Nó thực hiện các hành động đầu vào từ tay hoặc một thiết bị được theo dõi và chuyển nó đến Người tương tác để họ có thể quyết định chọn hoặc kích hoạt thứ gì đó dựa trên đầu vào đó.

Bạn sẽ cần liên kết các Tham chiếu Hành động Đầu vào cho mỗi Trạng thái Tương tác XR, chẳng hạn như Chọn.

Bạn không bị giới hạn chỉ một thành phần Bộ điều khiển XR trên mỗi tay hoặc bộ điều khiển, điều này mang lại cho chúng tôi sự linh hoạt để hỗ trợ cả tay và bộ điều khiển một cách độc lập.

Mã mẫu đi kèm với XRI chỉ cho bạn cách bạn có thể làm điều này.

Ngoài các tính năng nâng cao của XRI, bạn cũng có tùy chọn chỉ cần sử dụng đầu vào cử chỉ hệ thống trực tiếp từ Hệ thống đầu vào Unity.

Sau đó, bạn có thể ánh xạ các tương tác tích hợp sẵn của nền tảng, như cử chỉ chạm, đến hệ thống tương tác của riêng bạn.

Bạn có thể sử dụng các đường dẫn ràng buộc từ Hệ thống Đầu vào Thống nhất để truy cập và phản hồi các cử chỉ hệ thống này.

Ví dụ, cử chỉ chụm đi qua như một giá trị khi hoạt động, với vị trí và xoay.

Những thứ này có thể bị ràng buộc với các hành động đầu vào.

Nơi người đó đang hướng sự tập trung của họ đi qua trong cùng một khung hình như một cử chỉ chụm, với vị trí và xoay.

Để linh hoạt hơn nữa, bạn có thể sử dụng Hệ thống con Unity Hands để truy cập tất cả dữ liệu chung tay thô từ hệ thống thông qua Gói Unity Hands.

Gói Unity Hands cung cấp quyền truy cập vào dữ liệu khớp tay cấp thấp nhất quán trên các nền tảng.

Ví dụ, bạn có thể viết mã để nhìn vào từng khớp và xác định mức độ gần gũi của tư thế với một cử chỉ nhất định, như ngón tay cái giơ lên hoặc ngón trỏ, và chuyển chúng thành các hành động chơi trò chơi.

Điều này rất mạnh mẽ nhưng có thể khó để làm đúng vì bàn tay của mọi người có kích thước khác nhau và mọi người có nhiều loại chuyển động khác nhau.

Mã này xác định một phương pháp cho bạn biết ngón trỏ có được mở rộng hay không.

Bạn có thể gọi phương thức này từ sự kiện OnHandUpdate và chuyển bằng một trong các bàn tay.

Đầu tiên, lấy một vài khớp cụ thể để kiểm tra xem ngón trỏ có được mở rộng hay không.

Nếu bất kỳ cái nào trong số chúng không hợp lệ, nó sẽ trả về false.

Nếu tất cả các khớp đều hợp lệ, hãy kiểm tra đơn giản để đảm bảo rằng ngón trỏ không bị cong.

Bạn có thể mở rộng logic này cho các ngón tay khác để bắt đầu thực hiện một số phát hiện cử chỉ cơ bản.

Một cách sử dụng khác cho dữ liệu khớp tay thô là ánh xạ nó đến một hình ảnh lưới tay tùy chỉnh.

Điều này có thể giúp làm cho bàn tay phù hợp hơn với phong cách nghệ thuật của trò chơi của bạn.

Ví dụ, Rec Room đã sử dụng dữ liệu khớp tay thô để hiển thị một mô hình bàn tay cách điệu phù hợp với phong cách thị giác của họ.

Họ cũng cho thấy các mô hình tay người chơi khác để đắm chìm nhiều hơn.

Gói Unity Hand có một số mã mẫu để giúp bạn bắt đầu nếu bạn muốn khám phá thêm về quyền truy cập khớp tay thô.

Tôi rất vui khi thấy trải nghiệm VR của bạn đến với nền tảng mới này.

Để biết thêm thông tin về sự hỗ trợ của Unity cho nền tảng này và đăng ký truy cập beta sớm, vui lòng truy cập unity.com/spatial.

Christopher: Đó là những công cụ bạn có thể sử dụng để mang lại trải nghiệm VR hoàn toàn nhập vai cho nền tảng mới này bằng cách sử dụng quy trình làm việc Unity mà bạn đã quen thuộc.

Peter: Tóm lại, phiên này đã giới thiệu cho bạn một số công cụ và công nghệ sẽ giúp bạn dễ dàng đưa nội dung VR của mình lên nền tảng mới này, giống như Rec Room.

Nếu bạn đang bắt đầu một dự án mới, hãy sử dụng Unity 2022 hoặc mới hơn.

Nếu bạn có một dự án hiện có, hãy bắt đầu nâng cấp lên năm 2022.

Cân nhắc áp dụng Đường ống kết xuất toàn cầu.

Trong khi đường ống đồ họa tích hợp được hỗ trợ, tất cả các cải tiến trong tương lai sẽ có trên Universal Pipeline.

Bắt đầu điều chỉnh bất kỳ tương tác dựa trên bộ điều khiển nào với tay.

Bạn có thể bắt đầu ngay hôm nay với Bộ công cụ tương tác XR và gói Unity Hands.

Christopher: Và cuối cùng, để tìm hiểu thêm về cách bạn có thể sử dụng Unity để tạo ra những trải nghiệm nhập vai với passthrough, tôi khuyên bạn nên "Tạo các ứng dụng Unity nhập vai".

Và hãy xem "Xây dựng các trò chơi tuyệt vời cho điện toán không gian" để có cái nhìn tổng quan về những gì có thể có cho các nhà phát triển trò chơi trên nền tảng này.

Peter: Chúng tôi rất vui khi thấy những gì bạn mang đến cho nền tảng.

Christopher: Cảm ơn vì đã xem.

♪