10002

♪ ♪

Keith Holleman: 안녕하세요, 제 이름은 Keith Holleman이고, 저는 여기 Apple의 인터넷 기술 팀의 일원입니다.

오늘 저는 앱의 개인 정보 보호와 보안을 강화하기 위해 네트워크 릴레이를 사용하는 방법에 대해 이야기할 것입니다.

우리는 네트워크 릴레이에 사용되는 기술을 탐구함으로써 이 세션을 시작할 것이다.

릴레이는 Apple의 많은 개인 정보 보호 기능에서 사용됩니다.

우리는 이 기술이 효과적이고 사용하기 쉬운 방법을 좋아하며, 이제 앱에서 릴레이를 사용할 수 있는 두 가지 방법이 있습니다.

먼저, 앱의 네트워크 트래픽을 보호하기 위해 앱 내에서 릴레이를 구성할 수 있습니다.

둘째, VPN의 대안으로 기업의 개인 리소스에 액세스하기 위해 릴레이를 장치로 확장할 수 있습니다.

뛰어들어 시작하자.

릴레이는 iCloud 개인 릴레이, 메일 개인 정보 보호, Safari의 추적기에서 IP 주소 숨기기와 같은 훌륭한 기능의 기초를 형성합니다.

앱은 또한 비공개로 유지하고 싶은 사용자에 대한 민감한 정보를 처리할 수 있으며, 자신의 서버가 해당 정보를 클라이언트 IP 주소와 연결할 수 없도록 할 수 있습니다.

이제, 당신의 앱은 당신이 선택한 릴레이를 사용하여 모든 사용자에게 강력한 개인 정보 보호를 제공할 수 있습니다.

릴레이는 성능에 최적화되고, 최신 전송 및 보안 프로토콜을 사용하며, 기본적으로 Apple 플랫폼에서 사용할 수 있는 최신 네트워크 스택에 내장된 특별한 유형의 프록시입니다.

이 릴레이가 사용하는 IETF에 의해 정의된 두 가지 표준 프로토콜이 있습니다: MASQUE와 Oblivious HTTP.

MASQUE 릴레이는 앱의 개인 정보를 강화하거나 개인 리소스에 액세스할 수 있는 좋은 방법입니다.

백엔드 서버를 수정할 필요 없이 릴레이를 통해 TCP 또는 UDP 연결을 보낼 수 있습니다.

단일 엔티티가 IP 주소와 브라우징 활동을 사용자의 자세한 프로필로 결합할 수 없도록 릴레이 서버를 함께 연결할 수 있습니다.

이것은 iCloud Private Relay의 초석 기술이다.

릴레이는 또한 기업 자원에 접근할 수 있는 좋은 방법이다.

릴레이는 더 나은 사용자 경험을 제공하고, 성능이 뛰어나며, VPN보다 관리하기 쉽다.

MASQUE 릴레이는 레거시 프록시 프로토콜과 달리 TLS 1.3을 사용하여 프록시에 대한 모든 트래픽을 보호합니다.

MASQUE는 최신 전송 프로토콜인 QUIC 및 HTTP/3을 사용하여 단일 터널을 통해 많은 연결을 효율적으로 프록시하고 다중화합니다.

그리고 QUIC가 네트워크에 의해 차단된 경우, 그들은 HTTP/2를 사용하여 되돌아가 수 있다.

앱이 비공개이며 익명의 메트릭 보고서, 데이터베이스 조회 또는 DNS 쿼리와 같은 다른 요청에 연결되지 않도록 HTTP 요청을 보내는 경우, Oblivious HTTP를 사용할 수도 있습니다.

Oblivious HTTP를 사용하면 단 한 번의 릴레이 홉으로 뛰어난 성능과 프라이버시를 얻을 수 있습니다.

MASQUE 릴레이와 달리, Oblivious HTTP는 임의의 서버에서 작동하지 않습니다. 서버는 이를 명시적으로 지원해야 합니다.

Oblivious HTTP에 대해 자세히 알아보려면, "개인 정보 보호의 새로운 기능" 세션을 시청하세요.

앱에서 만든 프록시 연결에 이 두 릴레이 유형을 모두 사용할 수 있습니다.

이를 통해 앱의 개인 정보를 높이기 위해 선택한 특정 릴레이 서버를 사용할 수 있습니다.

새로운 ProxyConfiguration 클래스를 사용하면 네트워크 프레임워크, URLSession 및 WebKit에서 릴레이를 정의할 수 있습니다.

세 가지 API 모두 이 공통 클래스를 비슷한 방식으로 사용하며 전체 앱 또는 특정 연결에 대한 릴레이를 정의할 수 있습니다.

ProxyConfiguration 객체 내에서, 다섯 가지 다른 프로토콜을 기반으로 프록시를 정의할 수 있습니다.

이것은 MASQUE와 Oblivious HTTP 모두에 대한 새로운 릴레이 유형을 지정할 수 있는 곳입니다.

동일한 객체를 사용하여 레거시 프록시 유형을 구성할 수도 있습니다.

이전에 사전으로 URLSession 또는 WebKit에서 프록시를 구성했다면, 지금은 이 새로운 객체를 사용하기에 좋은 시기입니다.

레거시 프록시 유형의 경우, SOCKSv5뿐만 아니라 프록시에 새로 추가된 TLS 지원과 함께 HTTP CONNECT를 구성할 수 있습니다.

HTTP/3을 통해 MASQUE 릴레이에 연결하는 데 사용되는 ProxyConfiguration을 정의하는 방법은 다음과 같습니다.

먼저, NWEndpoint를 사용하여 서버 이름이나 URL을 지정하고 릴레이 홉을 정의하는 데 사용하세요.

이러한 릴레이 홉의 경우, HTTP/3, HTTP/2 또는 둘 다에 대한 지원을 지정할 수 있습니다.

HTTP/2 서버는 QUIC 프로토콜을 사용하는 HTTP/3에 대한 액세스가 네트워크에 의해 차단될 경우 백업으로 사용됩니다.

그런 다음, 릴레이를 "relayHops" 배열 매개 변수로 전달하여 프록시 구성을 만드세요.

멀티 홉 릴레이 구성을 정의하려면, 여기서 두 개의 릴레이를 전달할 수 있습니다.

네트워크 프레임워크의 NWConnection과 함께 ProxyConfiguration을 사용하려면, PrivacyContext를 만들거나 기본 컨텍스트를 사용하고 해당 컨텍스트에 프록시 구성을 추가하십시오.

NWParameters에 컨텍스트를 설정한 다음, 연결을 만들고 시작할 때 이러한 매개 변수를 전달하십시오.

이제 이 연결은 프록시를 통해 모든 트래픽을 보내고 있다.

또한 URLSession에서 이미 직접 정의한 것과 동일한 프록시 구성을 사용할 수 있습니다.

이렇게 하려면, URLSessionConfiguration의 proxyConfigurations 배열에 구성을 추가하십시오.

그런 다음, 평소처럼 URLSession에서 작업을 실행하면, 이제 프록시도 사용할 것입니다.

동일한 프록시 구성 객체는 WebKit 보기에서 만들어진 프록시 연결에도 사용할 수 있습니다!

먼저, 웹 뷰 구성을 초기화하고, 데이터 저장소를 추가하고, 프록시 구성을 데이터 저장소에 추가하십시오.

그런 다음 구성으로 웹 뷰를 초기화하세요.

완료되면, 요청된 URL을 로드하고 평소와 같이 WebKit 보기를 사용할 수 있습니다.

이제, 이 웹킷 뷰는 릴레이를 통해 트래픽을 보내고 있다.

자신의 앱에 릴레이를 추가하는 것 외에도, iOS 17에서는 전체 장치에 대해 구성할 수 있습니다.

개인 정보 보호 기능을 구축할 수 있는 것 외에도, 이것은 릴레이를 사용하여 사설 기업 네트워크 리소스에 대한 액세스를 제공하는 좋은 방법입니다.

기업 자원에 대한 액세스를 제공하기 위해 VPN을 사용할 수 있습니다.

릴레이는 더 나은 사용자 경험을 제공하고 관리하기 쉬운 VPN의 대안이다.

네트워크 릴레이는 복잡한 세션 협상을 필요로 하지 않으며 종종 실제 사용자 데이터가 전송되기 전에 왕복이 더 적게 필요합니다.

이것은 사용자의 개인 자원의 첫 번째 로드가 가능한 가장 반응이 빠른 상호 작용임을 보장합니다.

릴레이는 또한 VPN과 관련된 터널, 가상 인터페이스 및 추가 IP 주소의 사용을 피합니다.

여러 릴레이를 동시에 구성할 수 있기 때문에, 다른 네트워크에 위치한 다른 개인 도메인에 더 쉽게 접근할 수 있습니다.

릴레이 서버를 VPN의 대안으로 사용하려는 기업 회사는 이제 자체 인프라와 함께 사용할 수 있는 옵션이 있습니다.

시스코는 시스코 시큐어 엣지 오퍼링의 일환으로 엔터프라이즈 릴레이 서비스를 제공하고 있다.

우리는 기업들이 사용자에게 원격 액세스를 제공하기 위해 이 옵션을 채택하게 되어 기쁩니다.

장치에 MASQUE 릴레이 구성을 설치하는 두 가지 방법이 있습니다.

기업 조직은 모바일 장치 관리 또는 MDM을 통해 구성을 푸시하여 새로운 릴레이 페이로드 유형을 사용하여 릴레이를 정의할 수 있습니다.

이러한 페이로드는 관리되는 앱, 도메인 또는 전체 장치에 적용될 수 있습니다.

둘째, NERelayManager API를 사용하여 릴레이를 정의하는 앱을 작성할 수 있습니다.

이러한 구성은 특정 도메인이나 전체 장치에 적용될 수 있습니다.

둘 다 macOS, iOS, iPadOS 및 tvOS에서 사용할 수 있습니다.

그리고 이제 네트워크 확장 지원이 tvOS에 추가되었으므로, VPN은 tvOS 17에서도 새롭게 지원됩니다.

구성 프로필을 사용하여 릴레이를 구성하는 방법은 다음과 같습니다.

앱의 ProxyConfiguration API와 마찬가지로 릴레이 URL을 정의합니다.

VPN 프로필과 마찬가지로, 동일한 프로필의 인증서 페이로드를 참조하여 엔터프라이즈 서버에 대한 인증을 위해 클라이언트 인증서를 사용할 수 있습니다.

페이로드의 MatchDomains 부분에 추가하여 특정 도메인에 릴레이를 적용할 수 있습니다.

다음으로, 우리는 앱이 NERelayManager API를 사용하여 프로그래밍 방식으로 장치에 릴레이를 추가하는 방법을 볼 것입니다.

릴레이를 정의하려면, NERelay 객체를 초기화한 다음 릴레이의 URL을 구성해야 합니다.

여기서, 저는 HTTP/2와 HTTP/3 모두에 동일한 릴레이를 사용하고 있습니다.

릴레이에 추가 HTTP 헤더가 필요한 경우, NERelay 객체에 추가하십시오.

또한 방금 만든 NERelay 객체를 저장할 곳이기 때문에 공유 NERelayManager 객체에 액세스해야 합니다.

릴레이를 전체 장치 대신 특정 도메인에만 적용하려면, 해당 도메인을 matchDomains 배열에 추가하십시오.

마지막 단계는 릴레이가 활성화되어 있는지 확인하고 NERelayManager 객체를 시스템 환경 설정에 설치하는 것입니다.

작동 중인 릴레이를 살펴봅시다.

나는 산악 자전거를 정말 좋아하고 심지어 나만의 자전거 가게를 열었다.

내 가게에는 모든 주문을 추적할 수 있는 온라인 상점과 내부 웹사이트가 있다.

그 웹사이트는 내 내부 네트워크에 있으며 직원들만 이용할 수 있다.

사파리를 열고 진행 중인 주문을 보려고 하면, 내부 네트워크에 없기 때문에 볼 수 없습니다.

릴레이 구성을 설치하면, 어디에서나 내부 네트워크에 액세스할 수 있습니다.

방금 살펴온 코드로 샘플 릴레이 앱을 열면, 내부 도메인에 액세스하는 동안 상점의 릴레이를 사용하도록 전체 장치를 구성할 수 있습니다.

이 구성은 이제 설정에서도 볼 수 있으며, internal.example.com에 액세스할 때 릴레이를 사용하는 것을 볼 수 있습니다.

이제, 사파리로 돌아가서 다시 진행 중인 주문을 보려고 할 때, 이제 그것들을 볼 수 있고 얼마나 많은 주문을 배송해야 하는지 알 수 있습니다.

그것은 첫 번째 로드에서 간단하고, 빠르고, 반응이 빠르다.

릴레이는 성능을 손상시키지 않으면서 앱의 보안과 프라이버시를 향상시킬 수 있는 현대적인 표준 기반 프록시입니다.

앱에서 MASQUE 릴레이와 Oblivious HTTP 릴레이를 직접 채택하여 사용자의 개인 정보를 강화하십시오.

그리고 기업의 경우, VPN 사용을 관리하기 쉽고 더 원활한 사용자 경험을 제공하는 릴레이로 대체하기 시작하세요.

오늘 시간을 내어 봐주셔서 감사합니다.

네가 릴레이를 어떻게 사용하는지 빨리 보고 싶어.