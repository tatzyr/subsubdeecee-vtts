10066

♪ ♪

타룬 벨라고두: 안녕하세요, 메탈 3에 오신 것을 환영합니다.

제 이름은 타룬 벨라고두이고 메탈의 최신 진화를 공유할 것입니다.

먼저, 기본부터 시작합시다.

메탈은 애플의 낮은 오버헤드 그래픽 및 컴퓨팅 API이다.

그것은 Apple 제품 뒤에 있는 믿을 수 없을 정도로 강력한 GPU를 구동하는 가장 빠르고 효율적인 방법으로 설계되었습니다.

노골적인 셰이더 컴파일을 지원하는 풍부한 셰이딩 언어, 복잡한 응용 프로그램과 게임을 디버깅하고 프로파일링하는 데 도움이 되는 깊이 통합된 도구인 GPU로 전송된 명령에 대한 다중 스레드 및 직접 제어를 제공합니다.

출시 이후, 메탈은 GPU 기반 렌더링, 기계 학습 및 레이 트레이싱에 중점을 둔 많은 고급 그래픽과 컴퓨팅 기능을 추가했다.

애플 실리콘은 모든 새로운 Mac에서 놀라운 그래픽 성능과 효율성을 위한 길을 열어준다.

그리고 금속은 이러한 기능을 잠금 해제한다.

올해, 메탈은 메탈 3로 다음 단계로 도약하고 있다.

메탈 3는 앱과 게임이 더 빨리 실행되고 멋지게 보일 수 있도록 더 높은 성능과 렌더링 품질을 가능하게 하는 강력한 새로운 기능 세트입니다.

빠른 자원 로딩부터 시작합시다.

최신 게임과 앱에는 까다로운 자산 로딩 요구 사항이 있으며, 파일에서 금속 리소스로 많은 작은 자산 요청을 빠르게 스트리밍하는 것이 종종 고품질 비주얼의 핵심입니다.

하지만 기존 스토리지 API는 대규모 대량 요청을 위해 설계되었습니다.

Metal 3의 빠른 리소스 로딩을 사용하면 그래픽 및 컴퓨팅과 동일한 명시적인 다중 스레드 명령 모델을 사용하여 많은 작은 부하를 요청할 수 있습니다.

각 요청은 명령이며, 비동기 제출을 위해 많은 명령을 대기할 수 있습니다.

추가 단계 없이 금속 버퍼와 텍스처에 직접 로드되어 개발 노력과 전송 시간을 절약할 수 있습니다.

빠른 리소스 로딩을 통해 이미 알고 있는 금속 동기화 프리미티브를 사용하여 GPU 작업과 로딩 작업을 쉽게 조정할 수 있습니다.

텍스처 스트리밍 시스템은 빠른 리소스 로딩의 이점을 누릴 수 있다.

예를 들어 봅시다.

금속 스파스 텍스처는 애플리케이션이 타일 입도에서 텍스처를 스트리밍할 수 있게 해준다.

금속 스파스 텍스처에 구축된 텍스처 스트리밍 시스템은 네 단계로 구성되어 있습니다: 먼저, 이전 프레임의 피드백을 기반으로 무엇을 로드할지 결정하십시오.

둘째, 파일 저장소에서 타일을 로드하세요.

셋째, 준비 영역에서 희박한 텍스처로 복사하세요.

그리고 마지막으로, 당신의 프레임을 그리세요.

로드하고 복사하는 데 시간이 오래 걸릴수록 앱이 낮은 품질로 더 많은 시간을 소비한다는 것을 의미합니다.

빠른 리소스 로딩은 로딩 오버헤드를 최소화하고 스토리지 하드웨어가 처리량을 극대화할 수 있도록 대기열에 충분한 요청을 갖도록 합니다.

이것은 더 빠르고 일관된 성능을 제공하므로 더 많은 시간을 고품질로 그리는 데 더 많은 시간을 할애합니다.

빠른 리소스 로딩은 고품질 자산 스트리밍을 달성하기 위해 작성해야 하는 코드를 크게 단순화할 것입니다.

빠른 리소스 로딩에 대해 자세히 알아보려면, "Metal 3로 리소스를 더 빠르게 로드" 세션을 확인하세요.

다음으로, 새로운 오프라인 편집 워크플로우가 앱의 로드 시간과 말더듬을 줄이는 데 어떻게 도움이 되는지 말씀드리겠습니다.

셰이더 바이너리는 앱이 금속 파이프라인 생성 프로세스의 일부로 실행되는 동안 전통적으로 생성되는 GPU 전용 기계 코드입니다.

이러한 바이너리를 생성하는 것은 일반적으로 앱 실행 중에 로딩 화면 뒤에 숨겨져 있는 값비싼 작업이다.

그러나, 때때로 그들은 프레임에서 발생해야 하며, 이는 차례로 프레임 속도 말더듬을 유발한다.

이 바이너리는 메탈에 의해 캐시되어 비용을 자주 지불하지 않지만, 그 비용은 여전히 앱의 첫 번째 실행이나 바이너리가 처음 필요할 때마다 관찰됩니다.

오프라인 컴파일을 사용하면 런타임에 셰이더 바이너리 생성을 제거할 수 있습니다.

바이너리 생성을 프로젝트 빌드 시간으로 이동함으로써, 로드 시간에 금속 파이프라인을 만드는 데 소요되는 시간을 극적으로 줄일 수 있으며, 해당 파이프라인이 제시간에 생성될 때 앱의 말더듬을 줄일 수 있습니다.

말더듬을 줄이는 것이 무엇을 의미하는지 자세히 살펴봅시다.

다음은 인코딩 중에 금속 파이프라인 상태 객체를 만들어야 하는 게임의 예입니다.

이것은 메탈이 전에 본 적이 없는 파이프라인이기 때문에, 필요한 셰이더 바이너리를 생성합니다.

이것은 나머지 프레임 인코딩을 중단하고 앱이 프레임 속도 목표를 놓치게 하는 긴 작업이다.

이것은 한 번만 발생하지만, 사용자가 프레임 말더듬을 알아차리기에 충분합니다.

대조적으로, 오프라인 컴파일은 셰이더 바이너리가 빌드 타임에 생성될 수 있다는 것을 의미하므로 모든 파이프라인 상태 생성이 빠르고 실행이 원활하다.

오프라인 편집은 앱 로딩 시간에도 극적인 영향을 미칠 수 있습니다.

예를 들어 봅시다.

대부분의 앱은 전용 로딩 단계에서 대부분의 금속 파이프라인 상태 객체를 만듭니다.

그리고 셰이더 바이너리는 첫 번째 로드에서 생성됩니다.

앱이 많은 파이프라인을 생성한다면 이것은 사용자에게 긴 기다림이 될 수 있습니다.

오프라인 컴파일을 통해 셰이더 바이너리 생성을 프로젝트 빌드 시간으로 다시 이동할 수 있으므로 로드 시간이 단축되고 사용자가 앱에 더 빨리 들어갈 수 있습니다.

오프라인 편집은 복잡한 파이프라인이 많은 앱의 게임 체인저이다.

오프라인 편집 및 기타 개선 사항에 대해 자세히 알아보려면, "메탈 3로 GPU 바이너리를 타겟 및 최적화" 세션을 확인하세요.

이제, 금속 애플리케이션을 위한 플랫폼에 최적화된 그래픽 효과를 제공하는 MetalFX로 넘어가자.

MetalFX 업스케일링은 고성능 업스케일링과 안티앨리어싱을 통해 더 짧은 시간에 고품질 그래픽을 렌더링하는 데 도움을 줍니다.

성능을 향상시키는 데 도움이 되는 시간 또는 공간 알고리즘의 조합을 선택할 수 있습니다.

이게 중요한 이유야.

레티나 해상도는 앱과 게임을 활용할 수 있는 선명한 디테일을 제공하지만, 모든 픽셀을 생성하는 것도 성능에 영향을 미칠 수 있습니다.

MetalFX 업스케일링을 사용하면 더 낮은 해상도로 픽셀을 생성한 다음 프레임워크가 훨씬 더 높은 프레임 속도로 더 낮은 비용으로 고품질의 고해상도 이미지를 생성할 수 있습니다.

MetalFX는 고성능, 고품질 업스케일링을 현실로 만드는 강력한 프레임워크이다.

MetalFX 업스케일링에 대해 자세히 알아보려면, "MetalFX 업스케일링으로 성능 향상" 세션을 확인하세요.

다음은 메탈의 새로운 유연한 지오메트리 파이프라인이다: 메쉬 셰이더.

전통적인 프로그래밍 가능한 그래픽 파이프라인을 사용하면 셰이더의 정점을 변환한 다음 고정 기능 하드웨어에 의한 래스터화를 위해 기본으로 조립됩니다.

그것은 대부분의 응용 프로그램에 충분하지만, 컬링과 같은 일부 사용 사례는 전체 프리미티브에 액세스해야 합니다.

각 정점은 또한 독립적으로 읽히고, 변환되고, 출력된다.

그래서 당신은 무승부 중간에 정점이나 기본을 추가할 수 없습니다.

고급 기하학 처리는 더 많은 유연성을 요구한다.

그리고 전통적으로 그것은 컴퓨팅 패스에서 기하학을 사전 처리하는 것을 의미했다.

하지만 그것은 장치 메모리에 다양한 양의 중간 지오메트리를 저장해야 하며, 이는 예산을 책정하기 어려울 수 있습니다.

금속 메쉬 셰이더는 대체 기하학 처리 파이프라인을 도입하며, 전통적인 정점 단계를 유연한 2단계 모델로 대체하고 기하학의 계층적 처리를 가능하게 합니다.

첫 번째 단계는 전체 물체를 분석하여 두 번째 단계에서 기하학을 확장, 축소 또는 개선할지 여부를 결정합니다.

중간 장치 메모리 저장 없이 렌더링 패스에서 컴퓨팅 기능을 제공함으로써 이를 달성합니다.

메쉬 셰이더는 GPU 기반 컬링, LOD 선택 및 절차적 형상 생성을 수행하는 앱에 매우 적합합니다.

좀 더 자세히 살펴보자.

이 예에서, 컴퓨팅 패스는 표면을 평가한 다음 기하학을 생성합니다.

그 기하학과 그 그리기 명령은 나중에 렌더링 패스에 의해 소비하기 위해 장치 메모리에 기록된다.

높은 확장 계수와 간접적인 드로우 호출로, 필요한 메모리의 양을 예측하는 것은 어려울 수 있다.

메쉬 셰이더는 렌더링 파이프라인에서 두 개의 컴퓨팅과 같은 단계를 인라인으로 실행하여 효율성을 향상시킵니다.

객체 단계는 얼마나 많은 메쉬를 생성해야 하는지 결정하기 위해 입력을 평가한다.

그리고 메쉬 스테이지는 실제 기하학을 생성합니다.

이 메쉬는 장치 메모리로의 왕복과 정점 처리의 필요성을 우회하여 래스터라이저로 직접 전송됩니다.

메쉬 셰이더를 사용하면 앱을 위한 효율적인 절차 지오메트리, 컬링 및 LODing 시스템을 구축할 수 있습니다.

메쉬 셰이더에 대해 자세히 알아보려면, "메탈 메쉬 셰이더로 지오메트리 변환" 세션을 확인하세요.

메탈 3은 또한 레이 트레이싱 파이프라인에 상당한 속도를 제공한다.

가속 구조 빌드, 교차로 및 셰이딩의 모든 것이 최적화되었습니다.

메탈은 또한 GPU 기반 레이 트레이싱 파이프라인에 대한 지원을 추가하여 앱을 더욱 최적화합니다.

메탈 3의 레이 트레이싱을 이전에 사용 가능했던 것과 비교해 봅시다.

메탈 3 레이 트레이싱은 상당한 양의 CPU와 GPU 시간을 절약한다.

첫째, 가속 구조는 더 짧은 시간에 구축되어 광선을 그리고 추적할 수 있는 더 많은 GPU 시간을 제공합니다.

둘째, 컬링과 같은 CPU 작업은 레이 트레이싱을 위한 새로운 간접 명령 버퍼 지원 덕분에 GPU로 이동할 수 있다.

마지막으로, 메탈 3 레이 트레이싱은 교차와 음영을 간소화하고 최적화하기 위해 원시 데이터에 대한 직접 액세스를 지원합니다.

메탈 3 레이 트레이싱은 이전보다 더 좋고 강력해지고 있다.

레이 트레이싱에 대해 자세히 알아보려면, "메탈 레이 트레이싱 성능 극대화" 세션으로 가세요.

이제, Metal 3가 어떻게 기계 학습 추론과 훈련을 가속화하는지 보여드리겠습니다.

Metal 3는 Mac에서 네트워크 교육을 가속화하기 위한 추가 지원과 그래픽 및 미디어 처리 애플리케이션의 ML 추론 최적화를 위한 상당한 최적화와 함께 기계 학습을 가속화하기 위한 주요 개선 사항을 가지고 있습니다.

TensorFlow는 Mac에서 GPU 가속되는 기계 학습을 위한 인기 있는 프레임워크이다.

최근 출시된 Mac Studio는 다양한 네트워크에서 M1 Ultra에서 최대 16배의 속도 향상과 CPU 교육을 제공합니다.

그리고 메탈 3는 또한 많은 새로운 텐서플로우 작업을 가속화한다.

그것은 훨씬 더 확장 가능한 성능을 위해 CPU와의 동기화가 적다는 것을 의미합니다.

PyTorch는 최근 Metal을 사용하여 GPU 가속을 얻은 네트워크 교육을 위한 또 다른 매우 인기 있는 ML 프레임워크이다.

그리고 M1 Ultra가 장착된 Mac Studio에서는 CPU에 비해 상당한 훈련 속도를 달성할 수 있습니다.

예를 들어, BERT 모델을 최대 6.5배 더 빠르게 훈련시키고 ResNet50을 최대 8.5배 더 빠르게 훈련시킬 수 있습니다.

금속은 성능을 극대화하기 위해 애플 실리콘 전반에 걸쳐 ML 추론을 최적화한다.

이것은 BlackMagic Design의 DaVinci Resolve와 같은 금속 기반 고성능 비디오 및 이미지 처리 애플리케이션에 특히 유용합니다.

다빈치 리졸브는 워크플로우에서 금속과 기계 학습을 광범위하게 사용하는 컬러 그레이딩 중심의 비디오 제작 플랫폼입니다.

그리고 그 결과는 믿을 수 없어.

가속화된 기계 학습에 대한 Metal의 지원으로, BlackMagic Design은 편집 및 컬러 그레이딩 워크플로우와 ML 기반 도구에 대한 극적인 성능 개선을 달성했습니다.

기계 학습 업데이트에 대해 자세히 알아보려면, "금속으로 기계 학습 가속화" 세션으로 가세요.

이제 제가 방금 설명한 Metal 3 기능을 지원하는 하드웨어가 무엇인지 말씀드리겠습니다.

Metal 3는 A13 Bionic 또는 M1 칩 이상이 탑재된 iPhone 및 iPad, 최신 AMD 및 Intel GPU가 탑재된 모든 Apple Silicon Mac 시스템 및 Mac 시스템을 포함한 모든 최신 iOS, iPadOS 및 macOS 장치에서 지원됩니다.

그리고 주어진 장치가 Metal 3을 지원하는지 알아보려면, Metal 장치에서 supportsFamily 쿼리를 사용하세요.

메탈 3는 기능 그 이상입니다; 그것은 또한 포괄적인 고급 개발자 도구 세트를 포함합니다.

지금 몇 개 보여줄게.

Xcode 14의 금속 종속성 뷰어를 사용하면 전체 렌더러를 더 쉽게 시각화하거나 단일 패스로 확대할 수 있습니다.

그리고 예를 들어 GPU 기반 파이프라인을 더 쉽게 채택하거나 빠른 리소스 로딩과 동기화할 수 있도록, 종속성 뷰어에는 이제 종속성을 분석하고 검증하는 데 도움이 되는 동기화 가장자리가 포함되어 있습니다.

Xcode 14의 향상된 가속 구조 뷰어는 Metal 3의 최적화된 레이 트레이싱을 최대한 활용할 수 있도록 도와줍니다.

먼저, 이제 장면에서 개별 원시인을 강조할 수 있습니다.

그리고 프리미티브를 선택하면 왼쪽의 개요에서 관련 프리미티브 데이터를 보여줍니다.

마지막으로, 당신의 장면에 모션 정보가 있다면, 가속 구조 뷰어는 이제 다른 시점을 시각화할 수 있습니다.

그리고 그것은 Xcode 14의 개발자 도구 업데이트 중 몇 가지를 간단히 살펴보는 것입니다.

Dylib 지원, 새로운 리소스 목록, 셰이더 편집기의 파일 탐색, 사용자 지정 버퍼 뷰어 레이아웃 등과 같은 다른 새로운 기능이 많이 있습니다.

도구와 Metal 3의 발전을 최대한 활용하는 방법에 대해 자세히 알아보려면, 고급 그래픽, 게임 및 프로 앱을 구축하는 데 도움이 되는 다른 세션을 확인하십시오.

오늘, 저는 성능과 품질을 개선하기 위한 Metal 3의 고급 기능을 소개했습니다: 고품질 텍스처 스트리밍을 위한 빠른 리소스 로딩; 더 짧은 로드 시간과 더 적은 말더듬을 위한 오프라인 컴파일; 더 짧은 시간에 고해상도로 렌더링하는 MetalFX 업스케일링; 고급 지오메트리 처리를 위한 메쉬 셰이더; 레이 트레이싱을 위한 더 빠른 가속 구조 빌드, 교차점 및

마지막으로, GPU 기반 파이프라인과 레이 트레이싱과 같은 고급 기능을 사용하는 데 도움이 되는 몇 가지 고급 도구를 보여주었습니다.

새로운 코드 샘플과 문서에 대해 더 알아보려면, developer.apple.com/Metal로 가세요.

참여해 주셔서 감사합니다.