110380

♪ ♪

프라샨트: 안녕하세요, 여러분. 난 프라샨트야.

저는 AVFoundation 엔지니어이며, WWDC2022에 오신 것을 환영합니다.

SharePlay의 도입으로, 당신은 사람들에게 SharePlay 그룹과 완전히 동기화된 상태를 유지하면서 실시간으로 콘텐츠를 탐색하고 상호 작용할 수 있는 연결된 시청 경험을 제공할 수 있습니다.

그러나, 여러분 중 일부는 콘텐츠 타임라인에 예정된 타겟 광고 또는 기타 틈새를 가질 수 있으며, 다른 기간의 광고를 받거나 일부는 광고를 받고 일부는 받지 않는 혼합 참가자 세트 사이에서 말하는 참가자 간의 재생을 조정하는 것이 어려울 수 있습니다.

따라서 SharePlay에서 조정된 재생을 위해 광고 및 기타 틈새를 예약하는 데 관심이 있다면, 올바른 세션을 조정했습니다.

이 강연에서 우리는 조정된 재생이 어떻게 작동하는지 검토하는 것으로 시작할 것이다.

그런 다음 우리는 조정된 재생에서 광고 및 기타 중간 광고와 관련된 문제를 검토할 것입니다.

그 후, 우리는 광고를 볼 때 가능한 다양한 시청 경험에 대해 논의할 것입니다.

그런 다음 우리는 바느질된 광고를 위해 이것들을 어떻게 달성할 수 있는지 볼 것이다.

그리고 우리는 또한 HLS 인터스티셜이 조정된 재생과 어떻게 작동하는지 볼 것이다.

그리고 결론적으로, 우리는 사람들에게 정말 매력적인 SharePlay 경험을 제공하는 데 사용할 수 있는 몇 가지 모범 사례를 살펴볼 것입니다.

SharePlay에서 조정된 재생이 어떻게 작동하는지 봅시다.

따라서 참가자들이 FaceTime 통화를 하는 동안, 한 참가자의 장치에서 발생하는 재생 제어 명령은 그룹 간에 공유되어 모두 동기화되어 재생됩니다.

모든 참가자가 같은 콘텐츠를 보고 있다면 이것은 잘 작동하지만, 그들 중 일부가 광고를 가지고 있다면 어떻게 될까요?

이제 앨리스와 밥이 프로그램 콘텐츠를 보려고 하는 경우를 살펴봅시다.

이제 우리가 여기서 보는 것은 각각의 끝에 있는 프레젠테이션 타임라인이다.

그들이 보고 있는 프로그램 콘텐츠만 있다면, 조정된 재생을 달성하는 것은 꽤 간단해야 한다.

당신은 단순히 groupSession을 playbackCoordinator와 연관시킬 것이고, 당신은 갈 수 있을 것입니다.

이제 그들 각각이 스튜디오나 네트워크 배너 앞에 바느질된 프로그램 요약 세그먼트를 가지고 있다고 가정해 봅시다.

이것은 상당히 전형적이며, 요약 세그먼트와 배너가 앨리스와 밥과 일치하기 때문에, 조정된 재생은 여전히 달성할 수 있다.

하지만 이제, 앨리스의 지리가 서비스가 프로그램을 시작하기 전에 몇 가지 법정 경고를 표시하도록 요구하고, 프로그램 내의 다른 지점에서 광고가 예정되어 있을 수도 있다고 가정해 봅시다.

이 광고들은 다른 기간일 수 있다.

우리는 이제 그들이 동기화하여 플레이하도록 할 때 이것이 어떻게 도전을 제기할 수 있는지 알 수 있다.

밥의 경우, 네트워크 배너는 맨 처음에 나타날 수 있지만, 앨리스의 경우 경고가 표시된 후에만 나타날 것이다.

그리고 만약 우리가 프레젠테이션 타임라인에서 임의의 시간을 본다면, 그들은 내용의 완전히 다른 부분을 보고 있을 것이다.

이제 이와 같은 시나리오에서 가능한 사용자 경험에 대해 잠시 생각해 봅시다.

이를 위해 그들 각각이 하나의 광고만 바느질된 더 간단한 타임라인을 고려해 봅시다.

이상적인 경우, 그 경험은 그들이 혼자 프로그램을 보고 있던 곳과 너무 다르지 않아야 한다.

그것이 가능하기 위해, 우리는 광고의 지속 시간이 일치할 것으로 예상한다.

이것은 또한 우리가 선호하는 경험이 될 것이다.

이제, 광고를 본 후, 둘 다 동기화된 재생을 재개할 것이다.

하지만 때때로 그들은 다른 기간의 광고를 받을 수도 있고, 그들 중 하나는 광고가 전혀 없을 수도 있다.

그래서 이제, 그들이 동기화해서 플레이한다면, 두 가지 경험 중 하나가 가능하다.

앨리스가 광고를 끝내면, 그녀는 함께 재개하기 전에 밥의 광고가 끝날 때까지 기다릴 수 있다.

아니면 그녀는 메인 프로그램을 계속할 수 있고 밥은 그들이 동기화를 유지할 수 있도록 앨리스를 따라잡기 위해 앞으로 나아갈 것이다.

이 시나리오에서, 밥은 앨리스를 따라잡을 때 프로그램 내용을 놓치게 될 것이다.

이제 이러한 경험을 어떻게 가능하게 할 건가요?

suspensionReasonsThatTriggerWaiting 배열을 채우는 방법에 따라 AVPlaybackCoordinator에서 이러한 대기 정책을 지정할 수 있습니다.

기본 동작은 일부 참가자가 광고를 보는 동안 그룹이 기다리지 않는 것이다.

이 참가자들이 광고를 끝내면, 그들은 나머지 그룹을 따라잡기 위해 몇 가지 콘텐츠를 놓칠 것이다.

또는, 참가자들이 광고를 보는 동안 그룹이 기다리기를 원한다면, suspensionReasonsThatTriggerWaiting 배열의 일부로 "playingInterstitial" 정지 이유를 포함할 수 있습니다.

이 정책을 통해, 참가자가 다른 사람들이 광고를 완료하기를 기다리고 있을 때, 플레이어의 timeControlStatus는 WaitingToPlayAtSpecifiedRate이고 waitingReason은ForCoordinatedPlayback을 기다리고 있을 것입니다.

그래서 앞서 설명한 내용으로 돌아가서, 조정된 재생 타임라인에서 제외될 이러한 시간 범위를 어떻게 정의해야 할까요?

예를 들어, 법정 경고는 앨리스만 가지고 있고 밥은 가지고 있지 않은 것이다.

그리고 광고 중단 기간이 다를 수도 있다.

당신은 HLS가 광고를 예약하는 두 가지 방법을 제공한다는 것을 알고 있을 것입니다.

그 중 하나는 광고 세그먼트를 기본 콘텐츠의 재생 목록에 직접 바느질하는 것이다.

따라서 불연속성 태그를 사용하여 광고가 바느질된 주문형 비디오 콘텐츠의 경우, AVFoundation API를 사용하여 AVPlayerPlaybackCoordinator에서 광고 시간 범위를 설정할 수 있습니다.

그래서 우리는 다음과 같은 위임 방법을 추가했습니다. 이를 사용하여 콘텐츠의 광고와 중간 광고를 나타내는 샘플 정확한 시간 범위의 배열을 지정할 수 있습니다.

그런 다음 AVPlayerPlaybackCoordinator는 이 정보를 사용하여 그룹 전체에서 재생을 조정할 것입니다.

참가자가 이 시간 범위에 들어가면, 재생은 지정된 대기 정책에 따라 조정될 것이다.

또한, 틈새의 유형에 따라, 누군가가 이 시간 범위로 이동할 수 있도록 허용할 수 있습니다.

그래서 만약 그들이 SharePlay에서 이러한 시간 범위를 찾는다면, 전체 그룹은 그 시간 범위의 시작으로 스냅할 것이다.

이것은 재생 목록의 EXTINF 태그에 보고된 시간을 합산하여 광고 시간 범위가 채워지는 재생 목록의 예를 보여줍니다.

이것은 EXTINF 태그의 일부로 보고된 기간이 해당 세그먼트의 미디어 기간을 정확하게 반영한다고 가정합니다.

그래서, 이제 조정된 재생이 작동하기 위해 자산은 어떻게 생겼을까요?

그래서 만약 당신이 이 예시를 본다면, 앨리스와 밥은 다른 기간 광고를 바느질하여 다른 자산 기간을 초래합니다.

이것들이 SharePlay와 호환되는 것으로 간주되기 위해, 우리는 자산의 실제 콘텐츠 기간이 일치할 것으로 예상합니다.

이것은 주문형 비디오 콘텐츠에만 적용되며, 스티칭된 광고가 있는 라이브 콘텐츠의 경우, 광고 중단 기간이 모든 참가자와 일치할 것으로 예상됩니다.

샘플 정확한 시간 범위를 얻는 것이 어려울 수 있다고 생각하거나 라이브 콘텐츠에서 타겟팅된 광고를 동적으로 예약하고 싶다면, HLS 인터스티셜을 사용하여 광고를 예약할 수 있습니다.

2021년에, 우리는 광고 스케줄링에 대한 더 다양하고 유연한 접근 방식을 제공하는 HLS 인터스티셜을 도입했습니다.

자세한 내용은 WWDC2021의 HLS 토크에서 Explore Dynamic 프리롤과 미드롤을 확인하세요.

간단히 말해서, 광고와 인터스티셜은 콘텐츠 타임라인 외부의 별도의 객체로 취급된다.

이러한 객체는 다중 변형 재생 목록을 통해 직접 참조할 수 있으며, 기본 콘텐츠의 미디어 재생 목록에 날짜 범위 태그의 일부로 다중 변형 재생 목록 URI를 포함하거나 AVFoundation API를 사용하여 클라이언트 측에서 광고를 예약할 수 있습니다.

HLS 인터스티셜을 사용하여 광고를 예약하는 경우, AVFoundation은 조정된 재생 중에 자동으로 처리합니다.

대기 정책을 명시하기만 하면 됩니다.

HLS 인터스티셜을 사용하여 광고를 예약할 때, 다시 한 번, 우리는 자산이 SharePlay 호환으로 간주되기 위해 주요 콘텐츠 기간이 모든 참가자와 일치할 것으로 예상합니다.

이제 사람들에게 정말 좋은 SharePlay 경험을 제공하는 데 사용할 수 있는 몇 가지 모범 사례를 살펴봅시다.

SharePlay는 사람들이 스스로 보고 있는 것처럼 콘텐츠와 상호 작용하는 원활한 연결 시청 경험을 제공하기 위한 것입니다.

그래서 이 경험을 염두에 두고, 기다림과 콘텐츠 건너뛰기를 최대한 최소화하기 위해 노력해야 한다.

이를 위해, 대기 또는 건너뛰기 시간을 최소화하도록 광고 중단 기간을 조정하는 것이 좋습니다.

어떤 사람들은 광고를 가지고 있고 일부는 그렇지 않고 모두가 라이브 콘텐츠를 보고 있는 혼합 참가자 그룹이 있는 경우, HLS 인터스티셜을 사용하여 기본 대기 정책을 사용하여 광고를 예약할 수 있습니다.

이제, 광고를 예약하는 동안 이력서 오프셋을 지정하지 않으면, 콘텐츠는 광고 기간과 동일한 오프셋으로 재개됩니다.

그러한 시나리오에서 광고가 없는 참가자는 주요 콘텐츠를 계속 볼 것이고 다른 사람들은 광고 시청을 마치면 그 참가자와 합류할 것이다.

여기 앨리스, 밥, 찰리가 라이브 콘텐츠를 보고 있다.

그 서비스의 프리미엄 구독자인 앨리스는 광고가 없는 반면, 밥과 찰리는 HLS 인터스티셜을 사용하여 일정이 다른 기간의 광고를 가지고 있다.

밥과 찰리가 광고 휴식에서 나올 때 앨리스와 동기화하는 동안 앨리스가 어떻게 프로그램을 계속 보는지 볼 수 있습니다.

이제 이것이 라이브 스포츠 게임이라면, 밥과 찰리가 광고를 보는 동안 앨리스가 어떻게 라이브 경기장 피드를 보고 있을지 상상할 수 있습니다.

그리고 그들이 광고 휴식에서 나올 때, 그것은 플레이 시작에 딱 맞춰서 될 것이다.

참가자들이 프로그램 콘텐츠를 놓칠 여유가 없는 주문형 비디오 스트림의 경우, 대기 대기 정책을 사용할 수 있습니다.

이제 GroupSessionMessenger를 사용하여 참가자들과 광고 일정을 공유할 수 있습니다.

그리고 누군가가 다른 사람들이 광고를 다 보기를 기다리고 있을 때, 당신은 이미 일정을 공유했기 때문에 그들이 얼마나 오래 기다려야 하는지 정확히 알 수 있습니다.

그래서 이제 그들이 기다리는 동안, 당신은 아마도 다른 플레이어를 사용하여 당신의 서비스에 있는 다가오는 명소와 같은 흥미로운 콘텐츠를 보여줄 수 있습니다.

마무리하려면, 조정된 재생 중에 광고 및 기타 인터스티셜을 예약하기 위해 대기 정책을 지정하기만 하면 되며, 스티치인 광고가 있는 경우 AVFoundation API를 사용하여 재생 코디네이터의 시간 범위를 설정하거나 HLS 인터스티셜을 사용하여 AVFoundation이 광고 재생을 관리할 수 있습니다.

이상적인 시나리오는 모든 참가자들이 같은 콘텐츠를 보는 것을 포함할 것이다.

우리가 이것이 가능하기를 원하는 만큼, 항상 그런 것은 아닐 수도 있다.

광고를 받지 않는 프리미엄 구독자 계층을 가질 수 있으며 참가자가 다른 기간의 광고를 받을 수도 있습니다.

이와 같은 시나리오에서, 프리미엄 구독자는 대기 화면을 응시할 필요가 없습니다.

우리가 전에 본 것처럼 그들에게 흥미로운 콘텐츠를 보여주거나 그들을 즐겁게 하기 위해 다른 경험을 쌓을 수도 있습니다.

SharePlay에서 사용자 지정 경험을 구축하는 방법에 대한 더 많은 아이디어를 보려면, 멋진 SharePlay 경험 토크를 확인하세요.

이 세션이 유익하길 바라.

나머지 WWDC를 즐기세요.

고마워.