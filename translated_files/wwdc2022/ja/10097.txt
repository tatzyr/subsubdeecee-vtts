10097

♪ ♪

こんにちは。私はチャールズ・インです。

App Clipsの新機能へようこそ。

アプリクリップはアプリの小さな部分です。

それらは軽くて速く、簡単に発見できるので、必要なときに必要なものをすぐに手に入れることができます。

それらは、メッセージ、マップ、Spotlight、Safari、またはQRコードとアプリクリップコードで世界中で見つけることができます。

本当にクールな例の1つはトーストです。

Toastのアプリクリップを使用すると、QRコードをスキャンして、テーブルで食事の代金を支払うことができます!

Toastは、領収書に印刷された既存のQRコードから開くようにアプリクリップを設定しました。

アプリクリップにより、ユーザーのチェックアウトが速くなり、完全なアプリをインストールすることを選択するユーザーが増えました。

既存のフローにアプリクリップを構築することは、あなたの経験を合理化するための素晴らしい方法です。

今日は、ユーザーがApp Clipでより多くのことを行い、App Clipの開発をさらに簡単にする新機能について学びます。

App Clipのサイズ制限から始めましょう。

アプリクリップは軽くて速く、スピードのために設計されています。

アプリクリップを瞬時に感じさせるには、小さくする必要があります。

そして、ワイヤレスネットワークは2年前よりも高速であるため、iOS 16の新機能であることを嬉しく思いますが、App Clipsのサイズは最大15 MBになりました。

これにより、理想的な体験を構築する余地が増えます。

新しい制限のためにApp Clipの最小バージョンをiOS 16に設定するか、iOS 15以前と互換性があるように10MB未満にしてください。

いずれにせよ、App Clipの起動後はいつでも追加のリソースをダウンロードできます。

スピードは依然として素晴らしい経験の鍵です。

ユーザーは必ずしも高速ネットワークのある場所にいるとは限らないので、App Clipの最適化は相変わらず重要です。

アプリクリップの最適化の詳細については、「軽量で高速なアプリクリップを構築する」をご覧ください。

次に、App Clipエクスペリエンスまたはユニバーサルリンクが正しく設定されていることを確認するシンプルな新しいツールをお見せできることを本当に楽しみにしています。

これがその仕組みです。

iPhoneまたはiPadで、開発者設定に移動し、[アプリクリップのテスト]で[診断]を選択します。

次に、URLを入力してください。

デバイスをXcodeに接続することで、開発者設定をオンにすることができます。

iOSはURLの設定をチェックします。

すべてが正しく設定されている場合は、これらの緑色のチェックボックスが表示されます。

しかし、何か問題がある場合は、何が起こっているのかを正確に伝えるこのような画面が表示されます。 では、何が起こっているのかを正確に伝えます。

これは、Safariのバナーが表示されない、またはApp Clipの代わりにWebページに移動するなどの問題を解決するのに役立ちます。

各診断には、設定のステップをさらに説明するためのドキュメントへのリンクがあります。

これで、何が間違っているのかを正確に知ることができます。

App Clip診断は、物理コード、Safari、iMessageを使用するApp Clipエクスペリエンスをチェックし、ユニバーサルリンク関連ドメインの設定もチェックします。

このシンプルな新しいツールにより、設定を正しく行うことがはるかに簡単になります。

次に、CloudKit。

CloudKitは、アプリがiCloudに保存されているデータにアクセスできるようにするフレームワークです。

これまで、CloudKitはApp Clipsでは利用できませんでした。

アプリクリップは、データやリソースを読み取るためにサーバーを使用している可能性があります。

iOS 16の新機能であるApp Clipsは、CloudKitパブリックデータベースに保存されているデータとリソースを読み取ることもできます。

CloudKitが提供するすべてのパワーとスケールで、同じコードを共有し、アプリとApp Clipの両方で同じデータにアクセスできるようになりました。

アプリとApp Clipsの重要な違いは、App Clipsはパブリックデータベースから読み取ることができるが、CloudKitにデータを書き込むことができないことです。

アプリクリップは、クラウドドキュメントやキーバリューストアも使用できません。

これは、アプリクリップが使用されなくなった場合、iOSがアプリクリップとそのデータを削除するというユーザーへの約束を守ります。

XcodeでApp ClipのCloudKitを有効にするには、App Clipターゲットの[署名と機能]タブを開き、App Clipで使用するCloudKitコンテナを選択します。

このCloudKitコンテナは、完全なアプリと共有される新規または既存のコンテナにすることができます。

以下は、App ClipからCloudKitの公開データを読み取る方法の例です。

コンテナの識別子を使用してCKContainerを作成し、publicCloudDatabaseプロパティにアクセスします。

次に、パブリックデータベースから必要なレコードを取得します。

次に、キーチェーンの移行。

今日、認証トークンや支払い情報などの機密情報をApp Clipから完全なアプリに転送したい場合、App Clipはこのデータを共有アプリグループコンテナに保存します。

iOSは、ユーザーがアプリクリップからフルアプリにアップグレードすると、このデータを保存します。

完全なアプリはアプリグループコンテナを読み取り、その情報をキーチェーンに保存します。

しかし、キーチェーンはこの種の情報を安全に保管するのに理想的な場所です。

今年新しく、ユーザーがアプリをインストールすると、App Clipのキーチェーンに保存されているアイテムがApp Clipからアプリに転送されます。

これで、App Clipは安全なアイテムをキーチェーンに保存するだけで、インストール時にアプリに移動されます。

共有キーチェーングループとiCloudキーチェーンはサポートされていません。

これは、アプリクリップが使用されなくなったときにキーチェーン情報が定着しないというユーザーへの約束を守ります。

以下は、キーチェーンにログイン情報を保存して読み取る方法の例です。

コードはアプリとアプリクリップの両方で同じです。

SecItemAddでキーチェーンに新しいアイテムを追加できます。

そして、SecItemCopyMatchingでキーチェーンからこれらのアイテムを取得します。

そして、アイテムにラベルを追加して、アプリクリップによってアイテムが保存されたことを完全なアプリが識別できるようにします。

最後に、App ClipはAPIを体験します。

アプリクリップが成長するにつれて、それぞれが独自の情報や場所を持つ、ますます高度なアプリクリップ体験を持つようになります。

これらの経験をすべて追加および更新する簡単な方法が必要です。

App Store Connectには、このワークフローを自動化するように設計されたApp ClipエクスペリエンスWeb APIがあります。

このAPIを使用して高度なApp Clipエクスペリエンスを追加する例を見てみましょう。

まず、App ClipのリソースIDを取得します。

次に、ヘッダー画像をアップロードします。

最後に、高度なApp Clipエクスペリエンスを作成します。

まず、アプリクリップのリソースIDを見つけましょう。

アプリのアイテムIDとApp ClipバンドルIDを使用してWeb APIを呼び出します。

そして、応答から、後でのためにApp ClipリソースIDを保存します。

次に、高度なApp Clipエクスペリエンスのヘッダー画像をアップロードします。

次のステップのために、ヘッダー画像のリソースIDを保存します。

最後に、App ClipリソースIDとヘッダー画像IDを使用して、高度なApp Clipエクスペリエンスを作成できます。

記入する3つの辞書があります：属性、関係、および含まれています。

属性辞書に、アクション名、カテゴリと言語、高度なApp Clipエクスペリエンスのリンクなどの情報を追加します。

高度な経験がマップの場所と結びついている場合は、場所辞書を追加してください。

場所辞書に、一致するマップのビジネス場所名、マップアクション、およびマップ座標を追加します。

関係辞書に、App ClipリソースIDとヘッダー画像IDを追加します。

そして、付属の辞書に、高度なApp Clipエクスペリエンスのためにローカライズされたタイトルとサブタイトルを追加します。

そして、それだけです!

このApp Store Connect APIを使用すると、高度なApp Clipエクスペリエンスの作成を完全に自動化できます。

App Store Connectの詳細については、WWDC 2020の「App Store Connectの自動化」と「App Store Connectの新機能」をご覧ください。

最後に、新しいアプリクリップのサイズ制限により、理想的な体験を構築する余地が増えます。

App Clip診断ツールは、App Clipとユニバーサルリンクの設定をエンド・トゥ・エンドで理解するのに最適な方法です。

CloudKitとキーチェーンは、より多くのコードをアプリと共有することで、開発を容易にすることができます。

また、App ClipエクスペリエンスAPIは、高度なApp Clipエクスペリエンスを管理するためのワークフローを自動化します。

アプリクリップの開発の詳細については、WWDC 2021の「App Clipsの新機能」とWWDC 2020の「Design great App Clips」をご覧ください。

あなたの開発者は、このような素晴らしいアプリクリップを作りました。

彼らはとても創造的です！

これらの新機能が、次の素晴らしいアプリクリップの構築に役立つことを願っています。

見てくれてありがとう!♪ ♪