10115

♪まろやかなインストゥルメンタルヒップホップ音楽♪

♪

こんにちは、私はアレックス・ヤングで、iCloud開発者エクスペリエンスチームのエンジニアです。

CloudKitは、ユーザーがデバイス間でデータを簡単に同期できるようにすることで、素晴らしい体験を生み出す簡単な方法です。

CloudKitコンソールは、アプリのスキーマとデータを操作できるツールを提供することで、これをさらに簡単にするのに役立ちます。

アプリケーションのスキーマとデータの理解とデバッグに役立つCloudKitコンソールのいくつかのアップデートを共有します。

まず、隠しコンテナの使い方を順を追ってから、iCloudアカウントを使用してレコードを表示する新しい方法に飛び込み、最後に、共有ゾーンを操作するための素晴らしいアップデートがいくつかあります。

開発中に多くのコンテナを作成し、後でいくつかだけに焦点を当てるのが一般的です。

新しい隠しコンテナ機能を使用すると、これをよりよく整理できます。

CloudKitコンソールでは、非表示または表示するコンテナを選択できます。

隠しコンテナは、コンソール内のリストから隠されるだけでなく、Xcodeを含むすべての開発者ツールでも隠されています。

さらに良いことに、コンテナが隠されている場合、それはチームレベルで適用されます。つまり、すべてのテストコンテナとプロトタイプコンテナがチームメイトのビューを混乱させなくなります。

コンソールを開いて、この新しい機能を使用します。

コンソールにサインインしたら、トップレベルのナビゲーションからコンテナセレクターを開きます。

次に、[コンテナの管理]をクリックします。

これにより、現在のチーム内のすべてのコンテナの可視性を切り替えることができる新しいメニューが表示されます。

複数のチームを持つ人のために、右上のアカウントメニューを使用してそれらを切り替えることができます。

その後、他のチームでもコンテナを隠すことができます。

これはWWDC21のコンテナで、もう必要ありません。

私はこのようにそれを隠すことができます。

また、Xcodeでコンテナリストを更新すると、コンテナもそこに隠されていることがわかります。

開発者アカウントではなくiCloudアカウントとしてデータを表示できるコンソールへの新しい追加について説明します。

これはAct As iCloudと呼ばれています。

場合によっては、特定のユーザーがプライベートデータベースのデータに問題が発生している理由を理解するのが難しい場合があります。

これで、別のiCloudアカウントとしてサインインして、個人データを表示できるようになりました。

iCloudアカウントでログインすると、CloudKit Consoleのクエリツールは、そのアカウントの観点から期待どおりに機能します。

これは、ユーザーに代わって開発と生産の問題をデバッグするのに役立ちます。

コンソールでこれを実演して、それがどのように機能するかを説明します。

このクエリは、私の開発者アカウントを使用して実行されました。

クエリの結果がどのように変化するかを示すために、iCloudアカウントに切り替えます。

まず、Act As iCloudアカウントメニュー項目に移動します。

これにより、iCloudアカウントとしてサインインできるダイアログが開きます。

サインインすると、コンソールのコンテキストが変わります。

これで、ページの上部にバナーが表示されます。

その後のすべての操作は、開発者アカウントではなくiCloudアカウントを使用して実行されます。

レコードとビューゾーンを照会することはできますが、スキーマ操作を実行することはできません。

ご覧のとおり、このクエリの結果は、私の開発者アカウントではなく、私のiCloudアカウントのものです。

別のコンテナまたは環境に切り替えると、iCloudアカウントとして機能しなくなります。

バナーのボタンをクリックして、Act Asセッションを停止することもできます。

iCloudアカウントとして機能することは、スキーマではなくレコードに適用されるため、この機能はコンソールのデータ部分でのみ機能することを忘れないでください。

スキーマにアクセスしようとすると、Act Asセッションが停止します。

この機能は、データが生産でどのように使用されているかをよりよく理解し、データ関連のバグをより効果的に調査するのに役立ちます。

暗号化されたフィールドは、別のアカウントとして機能するときには読み取り不能のままです。

データを所有する元のユーザーのみが復号化できます。

これは設計上、iCloudが高レベルのセキュリティとプライバシーを維持し、機密データを安全に保つのに役立ちます。

次に、コンソールでゾーンを共有する方法を紹介します。

CloudKit共有は、アプリのユーザー間でレコードを安全に共有する安全な方法です。

これは、アプリが参加者の読み取りおよび書き込みアクセスを決定できるようにする権限を使用して、安全に行われる共有です。

参加者のアクセスは、株式をパブリックまたはプライベートとして定義することで、さらに制御されます。

ゾーン共有は、ゾーン内のすべてのレコードにルールを適用することで機能します。

共有ゾーンには、ゾーン内の各レコードにアクセスするためのオプションを含むCloudKit共有レコードがあります。

共有ゾーンは、既存の共有レコードを持つことはできません。

標準のパブリックゾーンとプライベートゾーンの共有オプションは、共有ゾーンでサポートされています。

パブリック共有ゾーンは、共有コードを持っているすべての人にすべてのレコードを見えるようにします。

短い共有コードを持っている人なら誰でもこの共有に参加できます。

これは、厳格なアクセス制御なしでユーザー間で簡単に共有できるレコードに最適です。

共有に参加するには、メンバーが参加者リストに載っている必要があるため、プライベート共有ゾーンには追加のセキュリティレイヤーがあります。

CloudKit Consoleには、ゾーン共有を作成して表示するためのいくつかの新しいツールがあり、共有ゾーンをよりよく理解し、開発と生産中にそれらと協力するのに役立ちます。

それがどのように機能するかを学ぶことができるように、今ゾーン共有を作成しましょう。

ゾーンに移動し、共有したいゾーンを選択します。

詳細ビューの[ゾーン全体の共有の設定]ボタンをクリックします。

これは、パブリックシェアとプライベートシェアのどちらが欲しいかを決定できるフォームを示しています。

パブリックゾーンには、読み取り専用または読み取り/書き込み共有を作成するための追加の許可オプションがあります。

プライベートシェアの場合、権限は参加者レベルで定義されます。

私はこのようにプライベートシェアを作成するつもりです。

ゾーンが共有されると、共有に参加するために参加者に送信できる短い一意のIDが表示されます。

共有ゾーンは、[レコード] ページにある [共有レコードを受け入れる] メニュー オプションを使用して、コンソールで参加できます。

これで、このゾーンで作成されたレコードは自動的に共有されます。

CloudKitコンソールのこれらのアップデートを見たので、コンテナを隠してコンテナリストを片付け、Act As iCloudを試して、異なるiCloudアカウントのレコードを確認し、複数のレコードを簡単に共有できるようにゾーン共有を試してみてください。

これらのツールにより、スキーマをよりよく理解し、アプリの問題をデバッグし、CloudKitの作業を少し簡単にできることを願っています。

ありがとう、そして素晴らしいWWDCをお過ごしください。

♪