110341

♪ ♪

こんにちは、WWDCへようこそ。

私の名前はAjay Singhで、今日はSMSメッセージフィルターを探索する旅にあなたを連れて行くことに興奮しています。

これにより、未知の送信者からの着信SMSメッセージを分類するのに役立つメッセージフィルタ拡張機能を作成できます。

まず、SMSメッセージフィルタの仕組みについて説明します。

次に、iOS 16の新機能について説明します。

iOS 16 APIを使用してメッセージフィルタ拡張機能を構築する方法の例を見て、拡張機能を使用するときにメッセージに表示されるものを紹介します。

最後に、インド向けのAppleのSMSフィルターの強化について話します。

SMSメッセージフィルターについて話しましょう。

多くの国では、SMSメッセージは現在、取引、マーケティングキャンペーン、アラート、リマインダーについて顧客に通知するために企業によって使用されています。

この例では、ショートコード、英数字コード、標準電話番号などのSMSメッセージの組み合わせを見ることができます。

これにより、受信トレイが非常に乱雑になり、愛する人からの個人的なメッセージを見つけるのは本当に困難です。

iOSは未知の送信者からのメッセージをフィルタリングするオプションを提供しますが、毎日複数のメッセージを受信すると、未知の送信者フォルダでもすぐに未読のメッセージでいっぱいになります。

SMSメッセージの自動フィルタリングは多くの人にとって重要であり、iOSは未知の送信者からのメッセージをさらに分類できる安全なサンドボックスベースの拡張モデルを提供します。

人々はApp StoreからSMSフィルターアプリを見つけてインストールすることができます。

インストールが完了したら、[設定]、[メッセージ]、[不明]と[スパム]に移動し、[不明な送信者のフィルター]をオンにして、メッセージフィルタリングをオンにすることができます。

次に、選択したSMSフィルターを選択できます。

ここでは、2つのSMSフィルターをインストールしました。

一度にアクティブにできるフィルターは1つだけであることに注意してください。

iOS 14以降では、トランザクション、プロモーション、ジャンクのメッセージに新しいフォルダが表示されます。

これらのフォルダは、人々が最も関連性の高いメッセージを整理して見つけるのに役立ちます。

どのフィルターが選択されているかに関係なく、メッセージはトランザクション、プロモーション、ジャンクで構成される同じ分類構造を提供します。

私たちはあなたから、より詳細な分類を提供したいとはっきりと聞きました。

そのため、iOS 16では、フィルタ分類APIの機能強化を導入しています。

これで、SMSメッセージフィルター拡張機能は、メッセージを12の追加のサブカテゴリに分類できます。

以下は、SMSフィルター拡張機能で指定できる新しいサブカテゴリです。

新しいサブカテゴリは、既存のトップレベルのカテゴリであるトランザクションとプロモーションに分類されます。

これで、受信メッセージをさらに絞り込み、さらに優れた体験を提供できます。

例えば、インドのような市場では、金融取引に関連する多数のメッセージを受信するのが一般的です。

これらには、銀行口座での活動やクレジットカードの支出に関するアラートが含まれます。

これらのメッセージは、トランザクションの下の財務サブフォルダでうまく整理できるようになりました。

SMSメッセージフィルタのフローがどのように機能するか見てみましょう。

フローを2つのフェーズに分けることができます。構成とランタイム分類です。

設定フェーズでは、ユーザーは設定でメッセージフィルタを選択します。

これにより、iOS 16で導入された新しいAPIがトリガーされ、フィルターでサポートされている機能を要求されます。

サポートされているカテゴリとサブカテゴリのリストで応答できるようになりました。

この例では、フィルターは、財務、注文、クーポンのサブカテゴリをサポートしていることを報告しています。

iOSはこれらの機能を検証し、メッセージの受信トレイを適切なフォルダで更新します。

ランタイム分類フェーズでは、未知の送信者からSMSメッセージを受信するたびに、iOSはフィルターにクエリを実行して、どのカテゴリとサブカテゴリに属するかを判断します。

ここで使用されているアクションとサブアクションという用語も見ることができます。

フィルタは、設定フェーズで宣言された機能の1つで応答する必要があります。

その後、SMSメッセージはメッセージの対応するサブフォルダに表示されます。

シンプルなメッセージフィルタ拡張機能を構築して、APIがどのように使用され、人々がメッセージで何を見るかを見てみましょう。

Xcodeでは、新しいMessage Filter Extensionターゲットを作成することから始めます。

メッセージフィルター拡張ターゲットは、新しいターゲットを作成してテンプレート選択に進むと、オプションの1つとして表示されます。

メッセージフィルター拡張を選択し、[次へ]をクリックします。

次に、フィルターに名前を付けて、[完了]をクリックします。

ターゲットが作成されると、MessageFilterExtension.swiftに必要なすべての機能が自動入力されます。

iOS 16では、 capabilitiesRequestという新しいAPIハンドルがあります。

ILMessageFilterCapabilitiesQueryResponse構造に、サポートするトランザクションまたはプロモーションのサブアクションを入力します。

最大5つのサブアクションを指定できます。

ここでは、トランザクションのファイナンス、オーダー、ヘルスサブアクション、およびプロモーションのクーポンとオファーサブアクションのサポートを示しています。

次に、フィルター拡張機能をビルドしてインストールします。

設定でフィルターを選択すると、メッセージの受信トレイは、宣言したサブアクションで更新されます。財務、注文、健康はトランザクションの下に表示され、クーポンとオファーはプロモーションの下に表示されます。

今、私たちは設定が機能することを確認しました。

受信したSMSメッセージを受信したときに、適切なカテゴリをiOSに返すための簡単なロジックを定義しましょう。

まず、queryRequestオブジェクトからメッセージ本文テキストを抽出します。

メッセージに特定のキーワードが含まれている場合は、適切なマッチングアクションとサブアクションを返します。

ここでは、キーワードが引き落とされた場合、filterActionをTransactionとして、filterSubactionをtransactionalfinanceとして返すコードを追加しました。

同様に、メッセージにキーワードクーポンがある場合、プロモーションとプロモーションクーポンが返されます。

また、トランザクションとプロモーション内の他のサブ分類のビジネスロジックを更新することもできます。

filterActionとfilterSubActionの誤った組み合わせを返すと、iOSはサブアクションを破棄し、アクションのみを尊重することに注意してください。

たとえば、アクショントランザクションとサブアクションクーポンを返すと、メッセージはすべてのトランザクションフォルダにのみ移動します。

ここでは、キーワード「デビット」で銀行から受信したSMSの例があり、メッセージによる財務サブフォルダに分類されています。

これは、キーワード「クーポン」でブラックフライデー取引を受け取った別の例です。

メッセージでは、クーポンサブフォルダに分類されています。

iOS 16では、ユーザーの人口統計に最も適したサブカテゴリを選択できます。

最初の例では、SMSメッセージフィルターは、トランザクションの下の注文、リマインダー、健康、公共サービス、天気のフォルダを表示し、2番目の例は、プロモーションの下のトランザクションとオファーの下の財務、リマインダー、健康、および報酬のフォルダを示しています。

フィルター拡張機能は、これらのサブカテゴリを使用して、ユーザーに差別化されたエクスペリエンスを提供できます。

AppleはインドでSMSフィルターを提供しており、iOS 16の機能強化を使用して更新しました。

インドのApple SMSフィルターは、トランザクションの財務、注文、リマインダーなどの追加のサブフォルダをサポートするようになりました。

銀行取引は財務に表示され、食品または商業配送メッセージは注文の下に整理され、重要なイベントややることはリマインダーフォルダに表示されます。

最後に、このビデオでは、SMSメッセージフィルターと、メッセージをトランザクション、プロモーション、ジャンクに分類する方法について話しました。

iOS 16では、メッセージフィルタ拡張機能は、メッセージを12の追加サブカテゴリに分類できるようになりました。

詳細については、このビデオに添付されているリンクのAPIドキュメントを参照してください。

人々がSMSメッセージを整理するのに役立つ、あなたの新しくて創造的なアイデアを楽しみにしています。

そして、いつものように、将来的にSMSメッセージのフィルタリングを改善するのに役立つフィードバックに感謝します。