110343

♪ ♪

Harry: Xin chào, tôi là Harry, một kỹ sư trong nhóm SwiftUI.

Chào mừng đến với phần thứ hai của dòng SwiftUI trên iPad.

Trong phần đầu tiên của loạt bài này, đồng nghiệp Raj của tôi đã đi sâu vào cách bạn có thể sử dụng danh sách, bảng biểu, lựa chọn và chế độ xem phân chia để thực sự làm cho ứng dụng của bạn tỏa sáng bằng cách sử dụng màn hình lớn hơn của iPad và các thiết bị đầu vào khác nhau.

Nếu bạn chưa xem phiên đó, tôi thực sự khuyên bạn nên bắt đầu với điều đó.

Tôi thực sự rất thích nhìn thấy Raj xây dựng ứng dụng Địa điểm và tôi muốn thêm một số tính năng của riêng mình.

Vì vậy, trong phiên này, tôi sẽ xem xét một cái gì đó gần gũi và thân yêu với trái tim tôi, thanh công cụ!

Trong SwiftUI, thanh công cụ API cấu hình nhiều thanh hệ thống như thanh điều hướng hoặc thanh dưới cùng trên iOS hoặc thanh công cụ cửa sổ trên macOS.

Thanh công cụ cung cấp các hành động nhanh chóng cho rất nhiều tính năng phổ biến nhất của bạn.

Tạo một thanh công cụ tốt thực sự có thể cải thiện năng suất của những người sử dụng ứng dụng của bạn.

Tôi đã dành rất nhiều thời gian để suy nghĩ về thanh công cụ và cách Places có thể sử dụng một số tính năng thanh công cụ mới trong iOS 16.

Tôi muốn bắt đầu bằng cách cho bạn thấy ngắn gọn những gì tôi đã xây dựng để cung cấp cho bạn hương vị về những gì hiện có thể có trên iPad.

Sau tất cả những thay đổi của tôi, đây là ứng dụng Địa điểm được cập nhật.

Bạn có thể nhận thấy một số tính năng mới, như tiêu đề điều hướng được căn chỉnh hàng đầu, menu tiêu đề, tiêu đề menu tiêu đề và các mục thanh công cụ được căn chỉnh ở giữa.

Nếu bạn đã sử dụng máy Mac, bạn cũng có thể quen thuộc với các tính năng như tùy chỉnh Thanh công cụ, cho phép mọi người tạo thanh công cụ độc đáo của riêng họ.

Những tính năng Mac mạnh mẽ này đang ra mắt trên iPad.

Để bắt đầu phiên này, tôi sẽ hiển thị một số cải tiến cho API thanh công cụ.

Sau đó, tôi sẽ hướng dẫn bạn một số API mới cho tiêu đề và tài liệu.

Vì vậy, hãy đi sâu vào các thanh công cụ.

Bây giờ, nhiều người trong số các bạn đã định cấu hình thanh công cụ trong ứng dụng iOS của riêng mình và để tối ưu hóa cho màn hình nhỏ hơn, bạn có thể đã thêm một menu như tôi đã làm khi lần đầu tiên nhìn vào Địa điểm.

Thực đơn của tôi trông như thế này trong mã.

Bạn có thể thấy tôi có một mục thanh công cụ với vị trí hành động chính.

Bên trong, tôi có nhiều menu hơn, với một vài điều khiển làm nội dung của menu.

Hãy xem cái này trông như thế nào trên iPad.

Như bạn có thể đoán, nó không thực sự tận dụng không gian có sẵn ở đó.

Tuy nhiên, điều tuyệt vời là trong iOS 16, các thanh công cụ có thể thay mặt bạn triển khai các loại menu này.

Chúng tôi gọi các menu tràn này và để tận dụng chúng tốt nhất, tôi sẽ muốn cấu trúc lại nội dung trên thanh công cụ của mình.

Tôi sẽ bắt đầu bằng cách chuyển đổi mục thanh công cụ thành một nhóm mục thanh công cụ.

Sau đó tôi sẽ xóa menu và biến nội dung của nó thành nội dung của nhóm mục thanh công cụ.

Nhóm này chèn các mục thanh công cụ riêng lẻ cho mỗi chế độ xem trong nhóm.

Trên iPad và Mac, đây là tất cả những gì cần thiết để tự động di chuyển các mục vào menu tràn khi cần.

Tôi có thể làm nhiều hơn ở đây, nhưng trước khi tôi có thể làm điều đó, tôi sẽ cần suy nghĩ về vị trí của các mục thanh công cụ của mình.

Vị trí xác định khu vực mà một mục thanh công cụ được hiển thị.

Các vị trí khác nhau có thể phân giải thành cùng một khu vực.

Bạn có thể nghĩ về một thanh điều hướng có ba khu vực riêng biệt: khu vực đầu, trung tâm và khu vực sau.

Các khu vực dẫn đầu và sau thường chứa các điều khiển.

Trong khi trung tâm chứa tiêu đề điều hướng ứng dụng của bạn.

Hãy xem xét điều này trong bối cảnh của Địa điểm.

Trong Places, nhóm mục thanh công cụ hành động chính của tôi phân giải đến khu vực cuối trên iPad hoặc Mac.

Các hành động chính đại diện cho hành động phổ biến nhất có sẵn cho người dùng cho một màn hình cụ thể.

Trong iOS 16, có một vị trí mới được gọi là hành động phụ.

Các mục này đại diện cho các điều khiển không phải là các điều khiển được sử dụng nhiều nhất, nhưng vẫn đảm bảo các mục thanh công cụ của riêng chúng.

Các hành động như yêu thích và chỉnh sửa không phải là quan trọng nhất ở Địa điểm, vì vậy tôi sẽ biến chúng thành hành động phụ.

Theo mặc định, các hành động phụ sẽ không hiển thị trên thanh công cụ.

Thay vào đó, họ sống trong menu tràn.

Bạn có thể thay đổi hành vi đó bằng cách sử dụng công cụ sửa đổi vai trò thanh công cụ mới.

Công cụ sửa đổi này ảnh hưởng đến hành vi của thanh công cụ bằng cách gán cho nó một vai trò ngữ nghĩa.

Ở đây tôi vượt qua vai trò biên tập viên cho thanh điều hướng biết rằng nó nên được tối ưu hóa để chỉnh sửa nội dung.

Thanh điều hướng diễn giải điều này là mong muốn có nhiều không gian hơn để hiển thị các mục trên thanh công cụ và vì vậy nó di chuyển tiêu đề điều hướng từ khu vực trung tâm đến khu vực hàng đầu.

Điều này nhường chỗ cho các hành động phụ được đặt ở trung tâm trước khi chuyển sang menu tràn.

Trong các lớp kích thước nhỏ gọn, thanh điều hướng không thay đổi và tiếp tục hiển thị tiêu đề ở trung tâm.

Sử dụng API vai trò hành động phụ và thanh công cụ thực sự cho phép Places bắt đầu tận dụng kích thước của iPad.

Với trung tâm có sẵn cho tôi, tôi có thể thêm nhiều mục hơn vào thanh công cụ của mình, như nút tiếng ồn hoặc nút mức độ thoải mái hoặc nút thùng rác.

Nhưng nếu tôi bắt đầu thêm nhiều mục, thanh công cụ của tôi có thể trở nên khó sử dụng đối với một số người dùng.

MacOS từ lâu đã hỗ trợ các thanh công cụ có thể tùy chỉnh cho phép mỗi người chọn thanh công cụ tốt nhất cho họ và tôi rất vui khi nói rằng bây giờ iPadOS cũng hỗ trợ tùy chỉnh của người dùng.

Bạn có thể sử dụng API tùy chỉnh thanh công cụ hiện có đã hoạt động trên macOS để áp dụng tính năng này.

Hãy xem xét điều đó ngay bây giờ.

Chỉ các mục thanh công cụ mới có thể tùy chỉnh được nên trước tiên tôi sẽ chia nhóm mục thanh công cụ của mình thành các mục thanh công cụ riêng lẻ.

Lưu ý rằng không có sự khác biệt về chức năng sau sự thay đổi này.

Tùy chỉnh cũng yêu cầu mọi mục trên thanh công cụ phải được liên kết với một mã định danh duy nhất vì vậy tôi sẽ thêm ID vào mỗi mục của mình.

Điều quan trọng là các ID này phải là duy nhất và nhất quán trong các lần khởi chạy ứng dụng.

Khi người dùng tùy chỉnh thanh công cụ của họ, SwiftUI vẫn duy trì các ID này và sử dụng chúng để tra cứu chế độ xem liên quan để hiển thị.

Cuối cùng, tôi sẽ thêm một ID vào toàn bộ công cụ sửa đổi thanh công cụ.

Nhìn chung, điều này chọn thanh công cụ để hỗ trợ tùy chỉnh.

Duy nhất cho các thanh công cụ có thể tùy chỉnh, các mục thanh công cụ có khả năng ban đầu không xuất hiện trên thanh công cụ.

Những mục này bắt đầu cuộc sống của chúng trong cửa sổ bật lên tùy chỉnh và có thể được thêm vào thanh công cụ sau này.

Bởi vì những mục này ban đầu không có mặt, đây là một lựa chọn tốt cho các hành động hữu ích hơn cho quy trình làm việc cụ thể.

Hãy kiểm tra chúng.

Tôi muốn ẩn một số mục thanh công cụ hiện tại của mình để làm cho các mục mới của tôi dễ nhìn hơn.

Bây giờ hãy thêm một mục thanh công cụ có chứa liên kết chia sẻ.

Các liên kết chia sẻ là mới trong SwiftUI và dựa vào một giao thức mới được gọi là có thể chuyển nhượng.

Để biết thêm thông tin về Transferable và ShareLink, hãy nhớ xem phiên Meet Transferable.

Với mục thanh công cụ của tôi tại chỗ, tôi sẽ cung cấp giá trị sai cho các hiển thị theo tham số mặc định khiến mục này ban đầu không xuất hiện trong thanh.

Bây giờ bạn có thể thấy liên kết chia sẻ của tôi sống cuộc sống tốt nhất của nó trong cửa sổ bật lên tùy chỉnh.

Và tôi có thể kéo nó từ cửa sổ bật lên tùy chỉnh vào thanh.

Mọi người sẽ thích điều đó.

Với liên kết chia sẻ của tôi tại chỗ, tôi bắt đầu nghĩ về mối quan hệ giữa các mục thanh công cụ của mình.

Sau khi di chuyển liên kết chia sẻ vào thanh, tôi nhận thấy rằng các mục điều chỉnh hình ảnh và bản đồ của tôi được tách ra, nhưng tôi nghĩ về các mục này như một nhóm kiểm soát chỉnh sửa nhanh và tôi muốn mô hình hóa mối quan hệ đó trên chính thanh công cụ.

iOS 16 và macOS Ventura hỗ trợ mô hình hóa mối quan hệ này bằng cách sử dụng ControlGroup.

Tôi sẽ chỉ cho bạn cách làm.

Bạn có thể thấy tôi có hai mục thanh công cụ riêng lẻ cho các hành động điều chỉnh hình ảnh và bản đồ của mình.

Để nhóm chúng lại với nhau, trước tiên tôi sẽ chuyển chúng sang cùng một mục.

Sau đó tôi sẽ bọc chúng trong một nhóm kiểm soát.

Người dùng bây giờ có thể thêm hoặc xóa chúng khỏi thanh công cụ dưới dạng một đơn vị.

Điều đó khá tuyệt, nhưng tôi có thể tiến xa hơn nữa bằng cách sử dụng API mới có sẵn trên ControlGroup.

Bằng cách cung cấp nhãn cho nhóm điều khiển, nhóm mục này có thể thu gọn thành menu nhỏ hơn của riêng nó trước khi chuyển vào menu tràn.

Thanh công cụ đang thực sự bắt đầu kết hợp với nhau.

Có một thay đổi cuối cùng mà tôi muốn thực hiện.

Thêm một địa điểm mới là một hành động phổ biến và quan trọng, vì vậy tôi muốn thêm một mục thanh công cụ cho điều đó.

Để làm điều đó, tôi sẽ thêm một nút mới vào thanh công cụ của mình, nhưng lần này tôi sẽ sử dụng vị trí hành động chính vì tôi coi nút mới là hành động phổ biến nhất.

Vị trí này làm nổi bật sự khác biệt quan trọng giữa iOS và macOS.

Tất cả các mục trong công cụ sửa đổi thanh công cụ có thể tùy chỉnh đều hỗ trợ tùy chỉnh trên macOS, nhưng trên iPadOS, chỉ có các hành động phụ mới làm được.

Vì vậy, nút mới của tôi ở đây hiển thị trong khu vực cuối của thanh và không thể tùy chỉnh bởi người dùng.

Ồ!

Đó là rất nhiều về thanh công cụ và đó không phải là những cải tiến duy nhất.

Tiêu đề điều hướng cũng đạt được một số tính năng mới xung quanh menu, tài liệu và hơn thế nữa.

Hãy lấy tài liệu làm ví dụ.

Có rất nhiều loại tài liệu.

Bạn có thể quen thuộc với các tài liệu được quản lý bởi nhóm tài liệu API.

Các nhóm tài liệu đi kèm với rất nhiều chức năng tích hợp để trình bày và quản lý tài liệu của họ.

Tất cả những gì tôi sắp nói đều miễn phí khi sử dụng các nhóm tài liệu.

Tuy nhiên, ở Địa điểm, một địa điểm riêng lẻ có thể được coi là một tài liệu mặc dù Địa điểm không sử dụng nhóm tài liệu.

Nó có các thuộc tính mà bạn có thể chỉnh sửa, bạn có thể thêm hoặc xóa chúng vào ứng dụng Địa điểm và bạn có thể chia sẻ địa điểm với bạn bè của mình.

Hãy xem cách chúng ta có thể thể hiện mối quan hệ này trong một ứng dụng không dựa trên nhóm tài liệu.

Tôi đã liên kết tên của địa điểm làm tiêu đề điều hướng của chế độ xem.

Vì vậy, tôi đã liên kết một phần của địa điểm với tiêu đề thanh công cụ của mình.

Trong iOS 16, tôi có thể tiến xa hơn nữa bằng cách sử dụng các công cụ sửa đổi tiêu đề điều hướng mới.

Tiêu đề điều hướng hiện hỗ trợ trình bày menu.

Bạn có thể nghĩ về điều này giống như menu Tệp trên macOS.

Để tạo một trong những menu này, hãy cung cấp một tập hợp các hành động cho tiêu đề điều hướng, giống như bạn làm với một menu thông thường.

Lưu ý rằng tiêu đề hiện có một chỉ báo menu đính kèm với nó trình bày một menu chứa các hành động của bạn.

Và đó không phải là tất cả các tiêu đề điều hướng có thể làm được.

Một trong những phần yêu thích của tôi là khả năng mới để hỗ trợ các tiêu đề có thể chỉnh sửa.

Bạn có thể chuyển một ràng buộc cho tiêu đề điều hướng của mình và điều này cho thanh công cụ biết rằng bạn hỗ trợ chỉnh sửa tiêu đề.

Tất cả những gì bạn đang thiếu là một cách để thực sự bắt đầu chỉnh sửa.

Bạn có thể sử dụng RenameButton mới bên trong các hành động menu tiêu đề của mình để thực hiện việc này.

Nhấn vào nút đổi tên cho phép bạn bắt đầu đổi tên tiêu đề.

Giống như bạn có thể liên kết tiêu đề điều hướng với chế độ xem của mình, bây giờ bạn cũng có thể liên kết một tài liệu, như vị trí của tôi.

Khi được cung cấp một tài liệu, menu tiêu đề hiển thị một tiêu đề chuyên biệt hiển thị bản xem trước của tài liệu đó.

Bản xem trước có thể được kéo và có quyền truy cập nhanh để chia sẻ tài liệu.

Để có được một trong những tiêu đề này, hãy liên kết tài liệu điều hướng của bạn với chế độ xem của bạn bằng cách sử dụng công cụ sửa đổi tài liệu điều hướng mới.

Bạn có thể làm điều này bằng cách cung cấp một loại phù hợp với có thể chuyển nhượng hoặc bằng cách cung cấp URL trực tiếp.

Ở đây tôi sẽ cung cấp một URL sẽ mở ứng dụng Bản đồ đến nơi tôi đang xem.

Công cụ sửa đổi tài liệu điều hướng cũng sẽ định cấu hình biểu tượng proxy của thanh công cụ cửa sổ trên macOS khi cung cấp URL.

Sau tất cả những điều đó, tôi nghĩ tôi sẽ tạm dừng cập nhật thanh công cụ của ứng dụng của mình.

Bạn có thể tin tất cả các tính năng tôi đã thêm vào trong thời gian này không?

Tôi nóng lòng muốn bắt đầu sử dụng chúng.

Tôi đã đề cập rất nhiều đến hành trình của mình để cải thiện trải nghiệm Địa điểm trên iPad.

Thanh công cụ trên iPad đã đạt được rất nhiều tính năng mới như menu tràn và tùy chỉnh người dùng.

Sử dụng vị trí hành động phụ và API tùy chỉnh để thực sự tận dụng tối đa không gian lớn hơn có sẵn trên iPad và Mac.

Các tiêu đề đã đạt được một số cách mới để thể hiện bản thân trên thanh công cụ.

Sử dụng tiêu đề điều hướng hoặc tạo menu tiêu đề hoặc hỗ trợ đổi tên tiêu đề.

Và nhớ sử dụng công cụ sửa đổi tài liệu điều hướng khi thích hợp.

Tôi hy vọng bạn thích SwiftUI trên dòng iPad.

Với tất cả các cải tiến trong bảng, lựa chọn, thanh công cụ và hơn thế nữa, hãy ra ngoài và đưa các ứng dụng iPad của bạn lên một tầm cao mới.

Cảm ơn bạn, và chúc bạn có một WW tuyệt vời.