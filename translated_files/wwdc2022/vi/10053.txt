10053

♪ nhạc cụ hip hop ♪

♪

Xin chào. Tên tôi là Ashwath và tôi là một kỹ sư của nhóm Giáo dục.

Hôm nay tôi rất vui được nói chuyện với bạn về Đăng nhập với Apple tại Nơi làm việc & Trường học.

Trong bài thuyết trình này, tôi sẽ đề cập đến các tính năng chính mà chúng tôi sẽ giới thiệu vào mùa thu này.

Trước tiên tôi sẽ hướng dẫn bạn Đăng nhập bằng Apple tại Nơi làm việc & Trường học là gì và nó hoạt động như thế nào.

Sau đó, tôi sẽ nói về Roster API và các chi tiết cụ thể về cách bạn có thể sử dụng nó.

Và cuối cùng, tôi sẽ nói về quản lý quyền truy cập, nơi tôi thảo luận về cách quản trị viên CNTT có thể quản lý quyền truy cập để Đăng nhập với Apple tại nơi làm việc & trường học và API danh sách thay mặt cho tổ chức của họ.

Hãy để tôi bắt đầu bằng cách đề cập đến hai khái niệm mà bạn có thể quen thuộc nhưng rất quan trọng để xem lại cho phiên này.

Đầu tiên là Đăng nhập bằng Apple.

Đăng nhập bằng Apple là một cách nhanh chóng và dễ dàng để người dùng đăng nhập vào các ứng dụng bằng ID Apple của họ.

Người dùng có thể tạo một tài khoản trong ứng dụng của bạn chỉ bằng một cú chạm đơn giản.

Khái niệm thứ hai là ID Apple được quản lý.

Giống như ID Apple, ID Apple được quản lý được sử dụng để cá nhân hóa một thiết bị.

Chúng cũng được sử dụng để truy cập các ứng dụng và dịch vụ của Apple.

Không giống như ID Apple, ID Apple được quản lý thuộc sở hữu của một tổ chức và được quản lý thông qua Apple School Manager hoặc Apple Business Manager.

Với những định nghĩa đó, tôi rất vui được chia sẻ rằng Đăng nhập với Apple hiện đã được mở rộng để hỗ trợ ID Apple được quản lý.

Giờ đây, bạn có thể nhận được những lợi ích của trải nghiệm đăng nhập nhanh chóng và dễ dàng khi Đăng nhập bằng Apple, nhưng với khả năng quản lý của ID Apple được quản lý.

Để giới thiệu trải nghiệm người dùng Đăng nhập với Apple tại Nơi làm việc & Trường học, chúng ta hãy xem một ví dụ.

Đây là màn hình đăng nhập cho Slack.

Để sử dụng Đăng nhập bằng Apple, người dùng chỉ cần nhấn Tiếp tục với Apple.

Khi sử dụng ID Apple, họ sẽ thấy màn hình chào mừng này để Đăng nhập bằng Apple.

Mặt khác, nếu họ đang sử dụng ID Apple được quản lý, họ sẽ thấy màn hình chào mừng Đăng nhập với Apple tại nơi làm việc và trường học.

Bạn sẽ nhận thấy sự khác biệt trong màn hình chào mừng.

Ý chúng tôi là gì khi chúng tôi nói rằng chúng tôi giúp các ứng dụng dễ dàng cung cấp quyền kiểm soát truy cập?

Hãy xem xét một ví dụ.

Khi sử dụng ID Apple cá nhân của họ với Đăng nhập với Apple, người dùng sẽ thấy màn hình tạo tài khoản nơi họ có thể chỉnh sửa tên của mình và chọn chia sẻ hay ẩn email của họ.

Nhưng trong bối cảnh tổ chức, điều quan trọng là ứng dụng phải hiểu ai đang đăng nhập và mức độ truy cập nào để cung cấp cho họ.

Trong ví dụ được hiển thị trên màn hình này, người dùng đang đăng nhập vào Slack tại nơi làm việc.

Để biết nhân viên này nên được phép tham gia kênh Slack nào, Slack cần biết người dùng nào đang đăng nhập.

Vì vậy, đây là một ví dụ về Slack cung cấp quyền kiểm soát truy cập bằng cách sử dụng tên và email được chia sẻ với ứng dụng của họ khi sử dụng Đăng nhập với Apple tại nơi làm việc và trường học.

Vậy đây là những gì người dùng nhìn thấy, nhưng điều này có ý nghĩa gì đối với bạn?

Điều đó có nghĩa là khi người dùng sử dụng Đăng nhập bằng Apple tại Nơi làm việc & Trường học, tên và các trường email sẽ luôn có thể truy cập được.

Nếu bạn là nhà phát triển làm việc trên ứng dụng phía máy khách, đây là một số mã ví dụ hiển thị bộ điều khiển ủy quyền.

Khi ủy quyền thành công, các tuyên bố được đánh dấu cho biết tên đầy đủ và email mà ứng dụng của bạn nhận được.

Điều này giả định rằng yêu cầu ủy quyền bao gồm phạm vi cho tên đầy đủ và email.

Nếu bạn là nhà phát triển hỗ trợ Đăng nhập bằng Apple trên web, đây là một số mã ví dụ sử dụng phương thức Đăng nhập để bắt đầu quá trình ủy quyền.

Sau khi ủy quyền thành công, máy chủ trả về phản hồi cho đối tượng dữ liệu.

Đối tượng dữ liệu đó trông như thế này.

Các trường được đánh dấu chứa email và tên đầy đủ của người dùng đăng nhập.

Điều quan trọng là phải lưu ý một vài điểm ở đây.

Trong bản phát hành này, Đăng nhập bằng Apple tại Nơi làm việc & Trường học sử dụng ID Apple được quản lý chính được đăng nhập trên thiết bị.

Mặc dù các màn hình ví dụ mà chúng tôi đã chỉ cho bạn là cho luồng đăng nhập trên thiết bị, luồng web cũng được hỗ trợ.

Một số tài khoản có thể không có địa chỉ email được cung cấp.

Ví dụ, các trường học có thể không chỉ định địa chỉ email cho học sinh nhỏ tuổi hơn.

Hãy xem màn hình tạo tài khoản trông như thế nào trong trường hợp không có địa chỉ email này.

Người dùng này, Fatima Silva, không có địa chỉ email, vì vậy chỉ có tên đầy đủ của họ xuất hiện trên màn hình tạo tài khoản.

Nếu bạn đã triển khai Đăng nhập bằng Apple, không cần làm việc từ phía bạn để thêm hỗ trợ cho ID Apple được quản lý.

Nếu bạn chưa triển khai hỗ trợ, tôi thực sự khuyên bạn nên xem phiên "Tận dụng tối đa Đăng nhập bằng Apple" từ WWDC2020 và phiên "Nâng cao trải nghiệm Đăng nhập bằng Apple" từ năm nay.

Đó là Đăng nhập với Apple tại Nơi làm việc & Trường học, mang lại trải nghiệm đăng nhập nhanh chóng và dễ dàng khi Đăng nhập bằng Apple cho ID Apple được quản lý.

Bây giờ chúng ta hãy đi sâu vào API Danh sách.

Nhưng trước khi nhảy vào bất kỳ chi tiết cụ thể nào, hãy xem xét kịch bản sau.

Bạn là một nhà phát triển trong không gian giáo dục.

Ứng dụng của bạn đang được sử dụng bởi các khu học chánh.

Bạn đã triển khai hỗ trợ Đăng nhập bằng Apple trong ứng dụng của mình.

Thật tuyệt vời!

Học sinh, giáo viên và nhân viên có thể sử dụng ID Apple được quản lý của họ để đăng nhập vào ứng dụng của bạn.

Trong trường hợp này, ứng dụng của bạn cho phép giáo viên chia sẻ bài tập và thông báo với học sinh của họ.

Để hỗ trợ điều này, quản trị viên CNTT cần nhập học sinh, giáo viên và lớp học vào ứng dụng của bạn trước khi bắt đầu năm học.

Đối với một trường học có hàng trăm hoặc hàng nghìn học sinh, việc tạo ra những hồ sơ này bằng tay sẽ nhanh chóng trở thành một quá trình tốn thời gian và tẻ nhạt.

Chúng tôi đã tạo ra Roster API để giải quyết vấn đề này.

Roster API cung cấp quyền truy cập có lập trình vào các tài nguyên như người dùng và các lớp học trong Apple School Manager.

Điều này cho phép quản trị viên CNTT tự động hóa quá trình nhập thông tin này vào ứng dụng của bạn.

Các tài nguyên này được xác định dưới dạng các điểm cuối REST.

Dữ liệu này có thể được truy cập bởi ứng dụng của bạn sau khi quản trị viên CNTT đã cấp quyền thông qua ủy quyền OAuth 2.0 thành công.

Tài khoản Quản trị viên và Quản lý Trang web trong Apple School Manager có thể quản lý ứng dụng nào có thể truy cập dữ liệu.

Là một phần của bản phát hành này, chúng tôi đã tạo ra một cách tiêu chuẩn hóa để các ứng dụng yêu cầu quyền truy cập vào dữ liệu của tổ chức.

Chúng tôi gọi đây là Chia sẻ Dữ liệu Tổ chức.

Chúng tôi muốn tuân theo các tiêu chuẩn công nghiệp khi nói đến các mẫu thiết kế giao diện người dùng và lựa chọn công nghệ để việc áp dụng nhà phát triển rất dễ dàng.

Vì vậy, chúng tôi đã tạo ra một luồng ủy quyền bằng cách sử dụng OAuth 2.0, bao gồm việc sử dụng phạm vi và yêu cầu quản trị viên CNTT đồng ý chia sẻ dữ liệu tổ chức của họ.

Đây là những gì nó trông như thế nào.

Màn hình đồng ý cung cấp thông tin về ứng dụng nào đang yêu cầu quyền truy cập vào dữ liệu của tổ chức và dữ liệu mà ứng dụng đang yêu cầu quyền truy cập.

Nhìn kỹ hơn, màn hình đồng ý chứa thông tin về người yêu cầu - đại diện cho ứng dụng yêu cầu quyền truy cập vào dữ liệu do Apple School Manager cung cấp; trong trường hợp này, ứng dụng yêu cầu là Quizzler - và phạm vi, đại diện cho dữ liệu mà ứng dụng sẽ có quyền truy cập.

Trong trường hợp này, một khi quản trị viên CNTT đồng ý, Quizzler sẽ có thể truy cập tất cả thông tin người dùng và lớp học cho tổ chức này.

Hành trình triển khai của bạn trông như thế nào?

Bước đầu tiên là đăng ký trong cổng thông tin dành cho nhà phát triển, bao gồm việc yêu cầu phạm vi.

Bước tiếp theo là yêu cầu sự đồng ý từ quản trị viên CNTT để chia sẻ dữ liệu với ứng dụng của bạn thông qua quy trình ủy quyền OAuth 2.0.

Cuối cùng, ứng dụng của bạn truy vấn các điểm cuối Roster API để tìm nạp dữ liệu.

Chúng ta hãy xem qua từng bước này.

Để yêu cầu phạm vi, hãy truy cập cổng thông tin dành cho nhà phát triển.

Trong trang Chứng chỉ, Mã định danh & Hồ sơ, nhấp vào Cấu hình bên dưới Chia sẻ Dữ liệu Tài khoản & Tổ chức.

Trong bước tiếp theo, nhấp vào "Thiết lập cấu hình".

Chọn ID ứng dụng chính từ trình đơn thả xuống và nhấn Tiếp tục.

Trong trang chi tiết cấu hình bổ sung, bên dưới Phạm vi chia sẻ dữ liệu tổ chức, chọn phạm vi mong muốn.

Ngay bây giờ, chúng tôi cung cấp hai: quyền truy cập của người dùng và quyền truy cập lớp học.

Đảm bảo các URL trả về được định cấu hình cho ứng dụng của bạn.

Bước này rất quan trọng vì các URL trả về sẽ được sử dụng trong luồng ủy quyền OAuth 2.0.

Nhấn Tiếp Tục.

Cuối cùng, xác nhận cấu hình của bạn.

Bây giờ chúng ta đã sẵn sàng cho bước tiếp theo.

Bước thứ hai trong hành trình triển khai là nhận mã thông báo truy cập thông qua luồng ủy quyền OAuth 2.0.

Hãy để chúng tôi xem xét điều này một cách chi tiết.

Quản trị viên CNTT trước tiên đăng nhập vào ứng dụng của bạn.

Quản trị viên CNTT sau đó tương tác với ứng dụng của bạn để bắt đầu quy trình ủy quyền - ví dụ: bằng cách nhấp vào nút có tên "Kết nối với Apple School Manager".

Điều này bắt đầu một chuỗi các sự kiện theo tiêu chuẩn OAuth 2.0.

Bước đầu tiên là thực hiện lệnh gọi GET API đến điểm cuối ủy quyền.

Hãy để chúng tôi xem chi tiết của yêu cầu này.

Yêu cầu nhận một vài tham số truy vấn: client_id, redirect_uri, trạng thái, response_type và phạm vi.

Phản hồi sẽ là chuyển hướng đến màn hình đồng ý Apple OAuth để yêu cầu quyền truy cập từ quản trị viên CNTT.

Trong sơ đồ này, chúng tôi giả định rằng quản trị viên CNTT đã xác thực bằng ID Apple được quản lý của họ.

Nếu họ không có, họ sẽ được nhắc xác thực trước.

Quản trị viên CNTT được trình bày với màn hình đồng ý để xác nhận rằng họ muốn chia sẻ dữ liệu tổ chức của họ với ứng dụng của bạn.

Đây là màn hình đồng ý tương tự mà chúng ta đã thấy trước đó.

Xin nhắc lại, nó trông như thế này.

Khi họ nhấp vào Cho phép, ứng dụng của bạn sẽ được cung cấp mã ủy quyền tại URL trả về mà bạn đã đăng ký trong cổng thông tin dành cho nhà phát triển.

Bước cuối cùng liên quan đến yêu cầu POST đến điểm cuối mã thông báo để truy xuất mã thông báo truy cập ứng dụng của bạn.

Hãy để chúng tôi xem yêu cầu này trông như thế nào.

Nội dung yêu cầu bao gồm các tham số OAuth tiêu chuẩn bao gồm mã ủy quyền nhận được trên URL trả về của bạn.

Phản hồi sẽ có mã thông báo truy cập, hết hạn và mã thông báo làm mới được sử dụng để tạo mã thông báo truy cập mới khi nó hết hạn.

Hãy để chúng tôi xem chi tiết yêu cầu để tạo mã thông báo truy cập mới bằng mã thông báo làm mới.

Nội dung yêu cầu bao gồm các tham số OAuth tiêu chuẩn, bao gồm mã thông báo làm mới và phản hồi sẽ có mã thông báo truy cập và hết hạn của nó.

Sau khi hoàn thành thành công quy trình ủy quyền OAuth 2.0, ứng dụng của bạn hiện có mã thông báo truy cập, có thể được sử dụng để tìm nạp thông tin người dùng và lớp học từ API Danh sách.

Là một phần của bản phát hành hiện tại của chúng tôi, chúng tôi đang giới thiệu năm điểm cuối mà các ứng dụng có thể truy vấn.

Chúng bao gồm tìm nạp danh sách các lớp, danh sách người dùng, một lớp cụ thể, một người dùng cụ thể, người dùng trong một lớp.

Hãy xem qua một luồng ví dụ đơn giản để chứng minh cách bạn có thể tìm nạp người dùng và các lớp học.

Máy chủ ứng dụng của bạn trước tiên có thể truy xuất danh sách học sinh, giáo viên và nhân viên bằng cách truy vấn điểm cuối của người dùng.

Hãy để chúng tôi xem xét yêu cầu và phản hồi chi tiết.

Điểm cuối của người dùng nhận ba tham số truy vấn.

Mã thông báo trang và giới hạn là các tham số phân trang và một tham số vai trò tùy chọn cho phép bạn truy vấn sinh viên, người hướng dẫn hoặc nhân viên.

Yêu cầu yêu cầu tiêu đề ủy quyền với mã thông báo truy cập được tạo từ luồng ủy quyền.

Phản hồi là tải trọng JSON bao gồm khóa "người dùng", có danh sách người dùng; khóa "nextPageToken" được sử dụng để tìm nạp bộ bản ghi tiếp theo và khóa Boolean "moreToFollow" cho biết có thêm bất kỳ bản ghi nào để truy vấn hay không.

Hãy xem xét một yêu cầu ví dụ.

Cuộc gọi API ở đây đang truy xuất danh sách các sinh viên có tối đa 10 sinh viên trong phản hồi.

Đây là yêu cầu API đầu tiên, vì vậy tham số truy vấn pageToken không được chỉ định.

Phản hồi có thông tin người dùng tiêu chuẩn như givenName, familyName, vân vân, nhưng tôi muốn thu hút sự chú ý của bạn đến mã định danh duy nhất ổn định cho người dùng.

Đây là cùng một mã định danh mà ứng dụng của bạn nhận được khi người dùng xác thực bằng Đăng nhập bằng Apple.

Địa chỉ email của người dùng và vai trò của họ trong tổ chức cũng được bao gồm.

nextPageToken cần được sử dụng trong yêu cầu API tiếp theo như một tham số truy vấn để tìm nạp tập hợp sinh viên tiếp theo, vì khóa moreToFollow được đặt thành true.

Sau khi truy vấn điểm cuối của người dùng, máy chủ ứng dụng của bạn hiện có thể truy vấn điểm cuối của lớp học, cung cấp cho bạn danh sách các lớp học cho khu học chánh cụ thể đó và mối quan hệ giữa lớp học và học sinh và giáo viên được liên kết với lớp đó.

Hãy để chúng tôi xem xét yêu cầu và phản hồi chi tiết.

Là một phần của yêu cầu get classes, yêu cầu nhận hai tham số truy vấn: pageToken và tham số giới hạn, cả hai đều đã thấy trước đây.

Các tiêu đề giống như khi truy vấn người dùng.

Phản hồi là một tải trọng JSON trong đó khóa "lớp" giữ danh sách các lớp.

Hãy để chúng tôi xem xét một yêu cầu ví dụ.

Yêu cầu này truy xuất danh sách các lớp có tối đa 200 để được đưa vào phản hồi.

Yêu cầu API cũng có tham số pageToken, có nghĩa là nó đang trong quá trình tìm nạp tất cả các lớp.

Phản hồi có thông tin lớp học tiêu chuẩn như tên, số nhận dạng lớp học, v.v., nhưng tôi muốn thu hút sự chú ý của bạn đến danh sách ID người hướng dẫn và thẻ sinh viên thuộc lớp.

Đó là API Danh sách.

Với các điểm cuối này, ứng dụng của bạn hiện có thể truy vấn theo chương trình người dùng và các lớp học từ Apple School Manager.

Cuối cùng, tôi muốn nói chuyện với bạn về quản lý truy cập.

Điều quan trọng là cung cấp khả năng quản lý cho các tổ chức bằng cách sử dụng Chia sẻ Dữ liệu Tổ chức và Đăng nhập với Apple tại Nơi làm việc & Trường học.

Hãy để tôi giải thích điều này có nghĩa là gì chi tiết hơn.

Khi sử dụng Đăng nhập bằng Apple, người dùng quản lý tài khoản của riêng họ và chỉ tùy thuộc vào họ quyết định họ chọn ứng dụng nào để đăng nhập.

Nhưng khi sử dụng Đăng nhập với Apple tại Nơi làm việc & Trường học, quản trị viên CNTT tại tổ chức quản lý tập trung quyền truy cập thay mặt cho tất cả người dùng tại tổ chức đó.

Điều này là do quản trị viên CNTT chịu trách nhiệm đảm bảo sự an toàn và bảo mật của dữ liệu của tổ chức.

Vì vậy, họ phải được trao quyền để quản lý ứng dụng nào người dùng được phép sử dụng Đăng nhập với Apple tại nơi làm việc và trường học và ứng dụng nào được phép sử dụng Chia sẻ dữ liệu tổ chức.

Các khả năng quản lý truy cập này có thể được cấu hình trong Apple School Manager và Apple Business Manager.

Để Đăng nhập với Apple tại Nơi làm việc & Trường học, chúng tôi cung cấp hai chế độ.

Chế độ đầu tiên là "Cho phép tất cả các ứng dụng."

Hãy để chúng tôi xem chế độ này trông như thế nào.

Tại đây, quản trị viên CNTT đã đăng nhập vào Apple Business Manager.

Khi chọn Quản lý Truy cập từ thanh bên và chọn Đăng nhập bằng Apple, chúng được trình bày với hai chế độ.

Chế độ "Cho phép tất cả các ứng dụng" cho phép tất cả người dùng của tổ chức đăng nhập vào tất cả các ứng dụng hỗ trợ Đăng nhập bằng Apple.

Chế độ thứ hai là "Chỉ cho phép một số ứng dụng nhất định."

Hãy để chúng tôi xem chế độ này trông như thế nào.

Chế độ "Chỉ cho phép một số ứng dụng nhất định" cho phép quản trị viên CNTT tìm kiếm các ứng dụng hỗ trợ Đăng nhập bằng Apple để thêm vào danh sách.

Người dùng sẽ chỉ có thể sử dụng Đăng nhập bằng Apple với các ứng dụng đã được thêm vào danh sách.

Nếu người dùng cố gắng đăng nhập vào một ứng dụng không có trong danh sách, họ sẽ thấy thông báo lỗi.

Điều quan trọng cần lưu ý là chức năng này giống nhau đối với khách hàng của Apple School Manager, Apple Business Manager và Business Essentials.

Tương tự như Đăng nhập với Apple tại nơi làm việc và trường học, Chia sẻ dữ liệu tổ chức cũng có hai chế độ giống nhau.

Hãy cùng xem nào.

Chế độ "Chỉ cho phép một số ứng dụng nhất định" cho phép quản trị viên CNTT tìm kiếm các ứng dụng được hỗ trợ để thêm vào danh sách.

Chính những ứng dụng này có thể truy cập thông tin người dùng và lớp học bằng cách sử dụng API Danh sách.

Ngoài màn hình đồng ý, đây là lớp kiểm soát thứ hai để quản trị viên CNTT quản lý ứng dụng nào có thể truy cập dữ liệu tổ chức.

Với việc phát hành Đăng nhập với Apple tại nơi làm việc và trường học, giờ đây người dùng trong bất kỳ môi trường nào cũng có thể sử dụng ID Apple hoặc ID Apple được quản lý để đăng nhập vào ứng dụng của bạn.

Nếu bạn chưa triển khai Đăng nhập bằng Apple, tôi khuyến khích bạn làm như vậy.

Tôi cũng rất khuyến khích bạn áp dụng API Danh sách nếu bạn đang ở trong không gian giáo dục.

Triển khai hỗ trợ cho Roster API sẽ cung cấp trải nghiệm giới thiệu liền mạch cho quản trị viên CNTT, nhân viên, giáo viên và sinh viên.

Như mọi khi, chúng tôi thích nghe tin từ bạn.

Vì vậy, vui lòng gửi bất kỳ phản hồi nào bạn có thể có.

Nếu bạn muốn tìm hiểu thêm, tôi thực sự đề xuất phiên "Tận dụng tối đa Đăng nhập bằng Apple" từ năm 2020 và phiên "Nâng cao trải nghiệm Đăng nhập bằng Apple" trong năm nay.

Cảm ơn bạn rất nhiều vì đã xem và chúng tôi hy vọng bạn sẽ thích WWDC năm nay.

♪