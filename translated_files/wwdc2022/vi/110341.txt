110341

♪ ♪

Xin chào và chào mừng đến với WWDC.

Tên tôi là Ajay Singh, và hôm nay tôi rất vui được đưa bạn vào một cuộc hành trình khám phá các bộ lọc tin nhắn SMS.

Những thứ này cho phép bạn tạo các tiện ích mở rộng bộ lọc tin nhắn giúp mọi người phân loại các tin nhắn SMS đến từ những người gửi không xác định.

Đầu tiên, tôi sẽ mô tả cách hoạt động của bộ lọc tin nhắn SMS.

Tiếp theo, tôi sẽ nói về những gì mới trong iOS 16.

Tôi sẽ xem qua một ví dụ về cách xây dựng tiện ích mở rộng bộ lọc tin nhắn bằng API iOS 16, sau đó cho bạn thấy những gì mọi người sẽ thấy trong Tin nhắn khi họ sử dụng tiện ích mở rộng của bạn.

Cuối cùng, tôi sẽ nói về những cải tiến đối với bộ lọc SMS của Apple cho Ấn Độ.

Hãy nói về các bộ lọc tin nhắn SMS.

Ở nhiều quốc gia, tin nhắn SMS hiện được các doanh nghiệp sử dụng để thông báo cho khách hàng về các giao dịch, chiến dịch tiếp thị, cảnh báo và lời nhắc.

Trong ví dụ này, bạn có thể thấy sự kết hợp của các tin nhắn SMS bao gồm mã ngắn, mã chữ và số và số điện thoại tiêu chuẩn.

Điều này dẫn đến một hộp thư đến rất lộn xộn và thực sự rất khó để tìm thấy tin nhắn cá nhân từ những người thân yêu của bạn.

iOS cung cấp một tùy chọn để lọc tin nhắn từ những người gửi không xác định, nhưng nếu bạn nhận được một vài tin nhắn mỗi ngày, ngay cả thư mục người gửi không xác định cũng sẽ nhanh chóng chứa đầy những tin nhắn chưa đọc.

Việc lọc tự động các tin nhắn SMS rất quan trọng đối với nhiều người và iOS cung cấp mô hình mở rộng dựa trên hộp cát an toàn cho phép bạn phân loại thêm tin nhắn từ những người gửi không xác định.

Mọi người có thể tìm và cài đặt các ứng dụng lọc SMS từ App Store.

Sau khi cài đặt, bạn có thể bật lọc tin nhắn bằng cách vào Cài đặt, Tin nhắn, Không xác định & Thư rác và bật Bộ lọc Người gửi không xác định.

Sau đó, bạn có thể chọn bộ lọc SMS mà bạn chọn.

Ở đây chúng tôi đã cài đặt hai bộ lọc SMS.

Lưu ý rằng chỉ có một bộ lọc có thể hoạt động tại một thời điểm.

Trong iOS 14 trở lên, các thư mục mới sẽ xuất hiện trong Tin nhắn cho Giao dịch, Khuyến mãi và Rác.

Những thư mục này giúp mọi người sắp xếp và tìm các tin nhắn phù hợp nhất với họ.

Bất kể bộ lọc nào được chọn, Tin nhắn cung cấp cùng một cấu trúc phân loại bao gồm Giao dịch, Khuyến mãi và Rác.

Chúng tôi đã nghe bạn to và rõ ràng, rằng bạn muốn cung cấp các phân loại chi tiết hơn.

Vì vậy, trong iOS 16, chúng tôi đang giới thiệu các cải tiến cho API phân loại bộ lọc.

Giờ đây, tiện ích mở rộng bộ lọc tin nhắn SMS của bạn có thể phân loại tin nhắn thành 12 danh mục phụ bổ sung.

Đây là các danh mục phụ mới mà bạn có thể chỉ định trong tiện ích mở rộng bộ lọc SMS của mình.

Các danh mục phụ mới thuộc các danh mục cấp cao nhất hiện có - Giao dịch và Khuyến mãi.

Bây giờ bạn có thể tinh chỉnh thêm các tin nhắn đến và cung cấp trải nghiệm tốt hơn nữa.

Ví dụ, ở các thị trường như Ấn Độ, người ta thường nhận được một số lượng lớn tin nhắn liên quan đến các giao dịch tài chính.

Chúng bao gồm các hoạt động trong tài khoản ngân hàng của họ và cảnh báo về chi tiêu bằng thẻ tín dụng.

Những tin nhắn này hiện có thể được sắp xếp độc đáo trong thư mục con Tài chính bên dưới Giao dịch.

Hãy xem luồng hoạt động như thế nào đối với các bộ lọc tin nhắn SMS.

Chúng ta có thể chia luồng thành hai giai đoạn; cấu hình và phân loại thời gian chạy.

Trong giai đoạn cấu hình, người dùng chọn bộ lọc tin nhắn của bạn trong Cài đặt.

Điều này kích hoạt một API mới được giới thiệu trong iOS 16 để yêu cầu các khả năng được hỗ trợ bởi bộ lọc của bạn.

Bây giờ bạn có thể trả lời với danh sách các danh mục và danh mục phụ được hỗ trợ.

Trong ví dụ này, bộ lọc báo cáo rằng nó hỗ trợ các danh mục phụ Tài chính, Đơn đặt hàng và Phiếu giảm giá.

iOS xác thực các khả năng này và cập nhật hộp thư đến trong Tin nhắn với các thư mục thích hợp.

Trong giai đoạn phân loại thời gian chạy, mỗi khi nhận được tin nhắn SMS từ một người gửi không xác định, iOS sẽ truy vấn bộ lọc của bạn để xác định danh mục và danh mục phụ mà nó thuộc về.

Bạn cũng có thể xem các thuật ngữ hành động và hành động phụ được sử dụng ở đây.

Các bộ lọc phải phản hồi với một trong những khả năng được khai báo trong giai đoạn cấu hình.

Tin nhắn SMS sau đó sẽ xuất hiện trong thư mục con tương ứng trong Tin nhắn.

Hãy xây dựng một tiện ích mở rộng bộ lọc tin nhắn đơn giản để xem các API được sử dụng như thế nào và những gì mọi người sẽ thấy trong Tin nhắn.

Trong Xcode, bạn bắt đầu bằng cách tạo một mục tiêu Mở rộng Bộ lọc Tin nhắn mới.

Mục tiêu Tiện ích mở rộng Bộ lọc Tin nhắn xuất hiện dưới dạng một trong những tùy chọn khi bạn tạo mục tiêu mới và chuyển đến lựa chọn mẫu.

Chọn Tiện ích mở rộng Bộ lọc Tin nhắn và nhấp vào Tiếp theo.

Bây giờ hãy đặt tên cho bộ lọc của bạn và nhấp vào Kết thúc.

Khi mục tiêu được tạo, MessageFilterExtension.swift sẽ được tự động điền với tất cả các chức năng cần thiết.

Trong iOS 16, chúng tôi có một trình xử lý API mới được gọi là capabilitiesRequest.

Điền vào cấu trúc ILMessageFilterCapabilitiesQueryResponse với các hành động phụ giao dịch hoặc quảng cáo mà bạn hỗ trợ.

Bạn có thể chỉ định tối đa năm hành động phụ.

Ở đây chúng tôi đang chỉ ra sự hỗ trợ cho các hành động phụ Tài chính, Đơn đặt hàng và Sức khỏe trong Giao dịch, và Phiếu giảm giá và Ưu đãi các hành động phụ trong Khuyến mãi.

Bây giờ hãy xây dựng và cài đặt tiện ích mở rộng bộ lọc của bạn.

Khi bạn chọn bộ lọc của mình trong Cài đặt, hộp thư đến Tin nhắn sẽ được cập nhật với các hành động phụ mà chúng tôi đã khai báo; Tài chính, Đơn đặt hàng và Sức khỏe xuất hiện trong Giao dịch, và Phiếu giảm giá và Ưu đãi xuất hiện trong Khuyến mãi.

Bây giờ, chúng tôi đã xác nhận rằng cấu hình của chúng tôi hoạt động.

Hãy xác định một số logic đơn giản để trả lại các danh mục phù hợp cho iOS khi nhận được tin nhắn SMS đến.

Đầu tiên, chúng tôi trích xuất văn bản nội dung tin nhắn từ đối tượng queryRequest.

Nếu tin nhắn chứa các từ khóa cụ thể, chúng tôi sẽ trả về một hành động phù hợp và hành động phụ phù hợp.

Ở đây, chúng tôi đã thêm mã trong đó nếu từ khóa được ghi nợ thì chúng tôi sẽ trả về filterAction dưới dạng Giao dịch và filterSubaction dưới dạng tài chính giao dịch.

Tương tự, khi tin nhắn có phiếu giảm giá từ khóa, thì Phiếu khuyến mãi và phiếu giảm giá khuyến mại sẽ được trả lại.

Bạn cũng có thể cập nhật logic kinh doanh cho các phân loại phụ khác trong Giao dịch và Khuyến mãi.

Lưu ý rằng nếu bạn trả về một tổ hợp không chính xác cho filterAction và filterSubAction, iOS sẽ loại bỏ hành động phụ và chỉ tôn trọng hành động đó.

Ví dụ: nếu chúng tôi trả lại Giao dịch hành động và Phiếu giảm giá hành động phụ, thì tin nhắn sẽ chỉ chuyển đến thư mục Tất cả Giao dịch.

Ở đây, chúng tôi có một ví dụ về SMS nhận được từ ngân hàng với từ khóa "ghi nợ" và nó đã được phân loại trong thư mục con Tài chính bởi Tin nhắn.

Đây là một ví dụ khác mà chúng tôi đã nhận được Ưu đãi Thứ Sáu Đen với từ khóa "phiếu giảm giá".

Trong Tin nhắn, nó đã được phân loại trong thư mục con Phiếu giảm giá.

Trong iOS 16, bạn có thể chọn các danh mục phụ phù hợp nhất với nhân khẩu học người dùng của mình.

Trong ví dụ đầu tiên, bộ lọc tin nhắn SMS hiển thị các thư mục cho Đơn đặt hàng, Lời nhắc, Sức khỏe, Dịch vụ Công cộng và Thời tiết trong Giao dịch, trong khi ví dụ thứ hai hiển thị các thư mục cho Tài chính, Lời nhắc, Sức khỏe và Phần thưởng trong Giao dịch và Ưu đãi trong Khuyến mãi.

Tiện ích mở rộng bộ lọc của bạn có thể sử dụng các danh mục phụ này để cung cấp trải nghiệm khác biệt cho người dùng của bạn.

Apple cung cấp bộ lọc SMS ở Ấn Độ và chúng tôi đã cập nhật nó bằng cách sử dụng các cải tiến trong iOS 16.

Bộ lọc Apple SMS ở Ấn Độ hiện hỗ trợ các thư mục con bổ sung bao gồm Tài chính, Đơn đặt hàng và Lời nhắc trong Giao dịch.

Các giao dịch ngân hàng của bạn xuất hiện trong Tài chính, thực phẩm hoặc tin nhắn giao hàng thương mại của bạn được sắp xếp theo Đơn đặt hàng, trong khi các sự kiện quan trọng và việc cần làm xuất hiện trong thư mục Lời nhắc.

Để kết thúc, trong video này, chúng tôi đã nói về các bộ lọc tin nhắn SMS và cách chúng có thể phân loại tin nhắn thành Giao dịch, Khuyến mãi và Rác.

Trong iOS 16, tiện ích mở rộng bộ lọc tin nhắn của bạn hiện có thể phân loại tin nhắn thành 12 danh mục phụ bổ sung.

Để tìm hiểu thêm, hãy xem tài liệu API trong liên kết đi kèm với video này.

Tôi mong được thấy những ý tưởng mới và sáng tạo của bạn để giúp mọi người sắp xếp tin nhắn SMS.

Và như mọi khi, chúng tôi đánh giá cao phản hồi của bạn để giúp chúng tôi cải thiện việc lọc tin nhắn SMS trong tương lai.