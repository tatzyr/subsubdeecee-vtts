10152

♪ ♪

Drew Haas: Xin chào. Tên tôi là Drew Haas, và tôi là một kỹ sư trong nhóm Trợ năng.

Tôi ở đây để nói về cách tạo trải nghiệm Chế độ ứng dụng đơn có thể truy cập được.

Chế độ ứng dụng đơn cho phép bạn với tư cách là nhà phát triển phục vụ người dùng của mình theo những cách thực sự độc đáo bằng cách hạn chế một số hành vi nhất định trên các thiết bị iOS và iPadOS.

Cụ thể, các chế độ này cho phép bạn khóa thiết bị vào một ứng dụng duy nhất.

Tùy thuộc vào chế độ, các hạn chế được khởi tạo bởi hệ thống hoặc bởi ứng dụng của bạn.

Điều này thật tuyệt vì bạn có thể kiểm soát thời gian giữa trạng thái hạn chế và trạng thái không hạn chế.

Bạn cũng có thể áp dụng các hạn chế bổ sung trên chế độ ứng dụng đơn lẻ, chẳng hạn như liệu tự động khóa có được bật hay không.

Hãy nhớ xem xét các trường hợp sử dụng khả năng tiếp cận.

Bạn nên đảm bảo rằng những người dựa vào việc sử dụng các tính năng trợ năng có khả năng bật chúng lên để họ có thể sử dụng chúng, ngay cả khi thiết bị bị hạn chế.

Điều này đảm bảo ứng dụng của bạn bao gồm những người sử dụng công nghệ hỗ trợ.

Tôi muốn nói về một số ví dụ về thời điểm sử dụng Chế độ ứng dụng đơn.

Giả sử bạn đang phát triển một ứng dụng nơi khách hàng gọi đồ ăn hoặc thức uống tại một nhà hàng hoặc sự kiện.

Hoặc một ứng dụng sẽ được sử dụng trong văn phòng y tế, nơi bệnh nhân đang xử lý một thiết bị được nhân viên y tế chia sẻ để điền thông tin của họ.

Hoặc thậm chí là một ứng dụng giúp tạo điều kiện thuận lợi cho bài kiểm tra cho học sinh trong lớp học.

Đây là tất cả các tình huống mà các hạn chế Chế độ Ứng dụng Đơn giúp tạo ra một môi trường tập trung cho người dùng.

Và bạn có biết ứng dụng của bạn có thể được sử dụng ở Chế độ ứng dụng đơn ngay cả khi bạn không viết mã cho nó không?

Đúng vậy, Truy cập có hướng dẫn là một tính năng trợ năng cho phép người dùng đặt bất kỳ ứng dụng nào ở Chế độ ứng dụng đơn.

Đầu tiên, tôi sẽ nói về Truy cập có hướng dẫn và xem xét một số cân nhắc bạn nên có khi mọi người sử dụng ứng dụng của bạn trong chế độ này.

Tiếp theo, tôi sẽ nói về các chế độ ứng dụng đơn lẻ mà bạn bắt đầu theo chương trình từ bên trong ứng dụng của mình, bằng cách áp dụng một số API và khuôn khổ nhất định.

Và cuối cùng, chúng tôi cung cấp API khả năng truy cập được thiết kế để sử dụng cụ thể trong Chế độ ứng dụng đơn lẻ.

Sử dụng API này để bật hoặc tắt một số tính năng trợ năng nhất định để tạo ra trải nghiệm liền mạch và dễ tiếp cận.

Trước tiên hãy đi sâu vào với Truy cập có hướng dẫn.

Để bắt đầu Truy cập có hướng dẫn, trước tiên hãy đảm bảo rằng nó được bật trong cài đặt trợ năng, sau đó mở ứng dụng bạn muốn khóa.

Nhấp ba lần vào nút bên để thực hiện phím tắt trợ năng.

Điều này cho thấy không gian làm việc truy cập có hướng dẫn, nơi bạn định cấu hình các hạn chế hệ thống.

Sau đó nhấn Bắt đầu để bắt đầu.

Bây giờ thiết bị đang ở trạng thái hạn chế.

Nó bị khóa ở ứng dụng ngoài cùng và các hạn chế tôi đã định cấu hình trong menu tùy chọn được áp dụng.

Điều này giúp tạo ra trải nghiệm có hướng dẫn cho những người khuyết tật nhận thức.

Để thoát khỏi Truy cập có Hướng dẫn, tất cả những gì bạn cần làm là thực hiện lại phím tắt trợ năng.

Menu tùy chọn cho phép bạn hạn chế tương tác cảm ứng, chuyển động hiển thị và bàn phím phần mềm, cũng như các sự kiện nút phần cứng, như nút âm lượng và nút ngủ/thức.

Có một môi trường được kiểm soát theo cách này đặc biệt hữu ích cho những người khuyết tật nhận thức, nhưng tính năng này cũng được nhiều người dùng yêu thích, từ người dùng khả năng truy cập đến cha mẹ của những đứa trẻ, những người có thể được hưởng lợi từ việc dễ dàng truy cập vào các hạn chế thiết bị này.

Đây là nơi bạn bước vào!

UIAccessibility API cho phép bạn tạo các hạn chế tùy chỉnh để điều chỉnh trải nghiệm ứng dụng của mình trong quá trình Truy cập có hướng dẫn.

Sử dụng cơ hội này để hạn chế hoặc điều chỉnh các khu vực trong ứng dụng của bạn, nơi ai đó bị khuyết tật nhận thức có thể cảm thấy lạc lõng hoặc choáng ngợp với các tùy chọn.

Tôi muốn chia sẻ một số cân nhắc về thiết kế cho khả năng tiếp cận nhận thức.

Đây là những nguyên tắc bạn nên tuân theo mọi lúc nếu có thể, nhưng bạn đặc biệt nên tuân theo chúng trong ứng dụng của mình trong quá trình Truy cập có hướng dẫn.

Đầu tiên là tha thứ cho những sai lầm.

Cố gắng giảm thiểu lỗi trước khi chúng xảy ra, bằng cách cảnh báo người dùng trước khi họ thực hiện các hành động quan trọng hoặc không thể đảo ngược, như xóa hoặc sửa đổi thông tin tài khoản hoặc thông tin thanh toán.

Bạn nên đặt mục tiêu giảm sự phụ thuộc vào thời gian để hành động trên một số thứ nhất định trong ứng dụng của mình, bởi vì không phải ai cũng xử lý thông tin với cùng một tốc độ.

Sử dụng cảnh báo theo thời gian hoặc tự động thực hiện các hành động sau một thời gian chờ ngắn khiến ứng dụng của bạn khó sử dụng hơn.

Và bạn nên luôn luôn luôn, cho người dùng cơ hội xác nhận trước khi thực hiện thanh toán, điều này bao gồm các ứng dụng có giao dịch mua một lần nhấn.

Thiết kế ứng dụng của bạn với những cân nhắc này thúc đẩy sự độc lập cho người dùng có khả năng truy cập.

Tôi muốn cho bạn xem một ví dụ.

Tôi đang làm việc trên một ứng dụng có tên là Reading Observatory giúp mọi người theo dõi số lượng họ đã đọc trong tuần.

Trang chủ của ứng dụng của tôi hiển thị tiến trình đọc và có hai nút: cài đặt tài khoản và nút tiếp tục đọc.

Tôi đã thêm một hạn chế tùy chỉnh cho ứng dụng của mình sẽ khóa nút Cài đặt Tài khoản trong khi Truy cập có Hướng dẫn đang hoạt động.

Điều này mang lại cho ứng dụng của tôi một trải nghiệm độc đáo dưới sự hạn chế này, để giúp ngăn người dùng bị lạc ở một nơi khác, như bị chôn vùi trong cài đặt tài khoản, nơi họ có thể thực hiện những thay đổi ngoài ý muốn.

Điều này cũng sẽ làm giảm số lần ai đó có thể gặp khó khăn và cần trợ giúp để trở lại đúng hướng với mục đích chính của ứng dụng của tôi, đó là đọc.

Để làm điều này, trước tiên hãy tuân thủ AppDelegate của bạn với giao thức UIGuidedAccessRestrictionDelegate.

Bạn cần cho Truy cập có hướng dẫn biết về từng hạn chế bằng cách cung cấp một loạt các số nhận dạng.

Tôi chỉ có một cái.

Bạn cũng được yêu cầu cung cấp tiêu đề hướng đến người dùng cho mỗi tiêu đề, cũng như mô tả tùy chọn nếu bạn cần cung cấp thêm chi tiết.

Những chuỗi này sẽ hiển thị trong menu tùy chọn.

Cuối cùng, triển khai phương thức guidedAccessRestriction (withIdentifier:didChange:) để nhận cuộc gọi lại khi hạn chế được chuyển đổi.

Đây là nơi ứng dụng của bạn có thể đăng thông báo để thực hiện logic phù hợp với hạn chế, như tắt tương tác người dùng cho một số nút nhất định hoặc giới thiệu một số nguyên tắc thiết kế đó từ trước đó.

Kiểm tra xem hạn chế tùy chỉnh có được bật bất cứ lúc nào hay không bằng cách gọi guidedAccessRestrictionState (forIdentifier:) trên UIAccessibility.

Tất cả các hạn chế được cung cấp của hệ thống và các hạn chế dựa trên ứng dụng tùy chỉnh của bạn làm cho Truy cập có hướng dẫn cực kỳ có thể định cấu hình, đó là lý do tại sao nó là một tính năng trợ năng tuyệt vời.

Truy cập có hướng dẫn có thể được tìm thấy trong Cài đặt Trợ năng.

Các Chế độ Ứng dụng Đơn khác có sẵn để bạn lập trình tham gia một phiên hạn chế trên thiết bị.

Chúng có những điểm tương đồng với Truy cập có hướng dẫn, nhưng điểm khác biệt chính chỉ là: bạn đang vào chế độ này theo chương trình.

Điều này có nghĩa là có rất nhiều điều để nói về việc thiết lập, bắt đầu và tùy chỉnh phiên Chế độ ứng dụng đơn của bạn.

Bạn có nhớ từng kịch bản trước đó không?

Một chiếc iPad đang được sử dụng như một ki-ốt nhà hàng, tại văn phòng y tế, trong môi trường thử nghiệm - Chế độ ứng dụng đơn lẻ là giải pháp phù hợp cho tất cả các tình huống này.

Mặc dù mỗi người có thể có nhu cầu hơi khác nhau, nhưng tất cả chúng đều được hưởng lợi từ việc khóa thiết bị vào một ứng dụng duy nhất.

Điều này ngăn mọi người vuốt để về nhà, sửa đổi mọi thứ trong Cài đặt hoặc thậm chí tìm kiếm thứ gì đó trong Safari.

Hãy xem qua từng điều này và tôi sẽ đề xuất Chế độ ứng dụng duy nhất dựa trên các hạn chế mà chúng ta sẽ cần.

Chế độ đầu tiên là cơ bản nhất và dễ triển khai nhất.

Nó được gọi đơn giản là Chế độ ứng dụng đơn.

Đây là giải pháp phù hợp khi bạn có một thiết bị mà bạn dự định ở trong một ứng dụng duy nhất khá lâu dài.

Nó vẫn bị khóa trong ứng dụng sau khi khởi động lại và không cần can thiệp thủ công để bảo trì.

Tuyệt vời cho cách tiếp cận có sự tham gia thấp.

Tuy nhiên, một vài cân nhắc!

Thiết bị phải được giám sát.

Các công cụ giám sát cho phép bạn khóa một khối lượng lớn các thiết bị vào Chế độ ứng dụng đơn cùng một lúc, vì vậy đây là một giải pháp rất có thể mở rộng nếu bạn đang làm việc với nhiều thiết bị.

Apple Configurator cho phép bạn quản lý các thiết bị được giám sát theo nhiều cách, bao gồm cả việc đặt chúng ở Chế độ Ứng dụng Đơn.

Chọn một thiết bị được giám sát, sau đó trong Nâng cao, chọn Bắt đầu Chế độ Ứng dụng Đơn.

Điều cuối cùng bạn cần làm là chọn một ứng dụng.

Một khi bạn làm vậy, nó sẽ tự động khởi chạy và khóa ở phía trước.

Không có cách nào khác để thoát khỏi chế độ này.

Như tôi đã đề cập, nó sẽ vẫn bị khóa với ứng dụng này ngay cả khi khởi động lại trừ khi bạn kết thúc Chế độ ứng dụng đơn thông qua phần mềm quản lý của mình.

Chế độ ứng dụng đơn tự trị phù hợp hơn cho các tình huống mà trạng thái hạn chế được vào và thoát thường xuyên.

Ví dụ, tại một văn phòng y tế nơi một bệnh nhân mới điền thông tin của họ trên iPad, và sau đó giao lại cho nhân viên.

Điều này có nghĩa là có sự can thiệp thủ công giữa các hạn chế.

Ứng dụng của bạn có thể tự làm điều này, bằng cách sử dụng một lệnh gọi phương thức API duy nhất để vào và ra.

Một lần nữa, cân nhắc - thiết bị phải được giám sát và ứng dụng muốn sử dụng API này phải được cho phép liệt kê trên hồ sơ cấu hình của thiết bị, nếu không yêu cầu khóa sẽ không thành công vì nó không có đặc quyền.

Phương pháp toàn năng là requestGuidedAccessSession(enabled:complet ionHandler:) trên UIAccessibility.

Này, điều đó có vẻ quen thuộc! Đúng không?

API này khai thác ngay vào gốc rễ của Truy cập có hướng dẫn.

Về cơ bản, bạn đang vào và thoát khỏi tính năng này theo chương trình với mã này.

Điều đó thật tuyệt phải không?

Đó là bởi vì Truy cập có hướng dẫn đóng vai trò là nền tảng cho các chế độ ứng dụng đơn lẻ khác tồn tại.

Cá là bạn không biết điều đó!

Hãy xem mã này có thể hoạt động như thế nào trong hành động.

Tôi có một phương thức để vào và thoát khỏi chế độ này mà tôi sẽ gọi khi tôi sẵn sàng.

Họ đang thực hiện các hành động khác nhau như bắt đầu một tờ đăng ký bệnh nhân mới khi chúng tôi vào trạng thái hạn chế và sau đó lưu giữ thông tin của họ khi thoát.

Tất nhiên, bạn sẽ muốn giải quyết đúng kết quả của trình xử lý hoàn thành để biết nếu có sự cố xảy ra.

Nếu vậy, bạn có thể muốn đưa ra cảnh báo cho người dùng và trì hoãn việc tiếp tục trải nghiệm, để họ có thể thử lại.

Kiểm tra xem Chế độ ứng dụng đơn tự trị có được bật bất cứ lúc nào hay không bằng cách gọi isGuidedAccessEnabled trên UIAccessibility.

Cũng quan sát guidedAccessStatusDidChangeNotification để kích hoạt bất kỳ mã bổ sung nào khi vào hoặc thoát khỏi chế độ này.

Và hãy nhớ rằng ứng dụng muốn sử dụng API này phải có sự giám sát và quản lý thích hợp, bao gồm cho phép liệt kê ID gói của ứng dụng như một ứng dụng được phép cho Chế độ ứng dụng đơn tự trị.

Và cuối cùng, chế độ đánh giá.

Đây là chế độ phù hợp khi ứng dụng của bạn nhằm mục đích ngăn chặn những lợi thế không công bằng, bằng cách hạn chế một số tính năng nhất định trong quá trình thử nghiệm.

Tắt tính năng tự động sửa lỗi, kiểm tra chính tả và khóa chế độ ứng dụng đơn ứng dụng để người làm bài kiểm tra không thể truy cập các ghi chú hoặc tài nguyên bên ngoài.

Gần đây các khuôn khổ này đã được thống nhất cho iOS và macOS, khi chúng tôi giới thiệu khung Cấu hình Đánh giá Tự động!

Để sử dụng điều này, thiết bị không cần phải được giám sát như các chế độ trước, nhưng bạn cần phải đăng ký với Apple để có quyền đánh giá cho ứng dụng của mình.

Thông tin thêm về việc đăng ký quyền lợi có thể được tìm thấy trong tài liệu dành cho nhà phát triển.

Đồng nghiệp Josh của tôi có một phiên WWDC tuyệt vời giải thích cách sử dụng khung Cấu hình Đánh giá Tự động, bao gồm hàng tấn ví dụ mã và tài nguyên tài liệu.

Vui lòng đi kiểm tra nó.

Khi bạn biết giải pháp chế độ ứng dụng duy nhất nào phù hợp với mình hoặc nếu bạn đã có giải pháp hoạt động, hãy nhớ rằng những người sử dụng công nghệ hỗ trợ sẽ sử dụng ứng dụng của bạn.

Có thể có các bước bổ sung bạn cần thực hiện để làm cho trải nghiệm này có thể truy cập được.

Trong ví dụ kinh điển của chúng tôi về iPad được sử dụng như một ki-ốt nhà hàng, Hãy xem xét rằng một khách hàng khiếm thị đến để đặt hàng.

Nếu thiết bị bị khóa rõ ràng ở Chế độ ứng dụng đơn, thì chúng tôi gặp sự cố.

Bạn sẽ không thể mở Cài đặt, đi tới Trợ năng và bật VoiceOver cho khách hàng này.

Vậy bạn có thể làm gì?

Apple Configurator và phần mềm quản lý thiết bị khác giúp bạn định cấu hình các tùy chọn cho Chế độ ứng dụng đơn.

Một số tính năng trợ năng có sẵn để bạn luôn bật và Phím tắt trợ năng, còn được gọi là menu "nhấp ba lần", có thể định cấu hình để cho phép người dùng nhanh chóng chuyển đổi các tính năng trợ năng như VoiceOver, Thu phóng, Đảo ngược màu sắc, AssistiveTouch và Điều khiển bằng giọng nói.

Khi các tính năng này luôn được bật hoặc khi chúng được gán cho phím tắt trợ năng, bạn cho phép những người dựa vào các công nghệ này sử dụng chúng trong khi họ điều hướng ứng dụng của bạn.

Nó khá dễ dàng để thiết lập điều này, vì vậy đừng bỏ lỡ cơ hội của bạn để làm như vậy.

Nhưng những tùy chọn đó phải được cấu hình trước khi vào Chế độ Ứng dụng Đơn.

Vậy còn trong Chế độ ứng dụng đơn thì sao?

Sử dụng API trên UIAccessibility để chuyển đổi các tính năng trợ năng nhất định trực tiếp bằng mã.

Đó là một giải pháp thay thế tuyệt vời cho việc chuyển đổi một tính năng với phím tắt trợ năng, điều này rất hữu ích khi thiết bị được bọc trong vỏ ki-ốt chặn các nút phần cứng.

Chúng tôi đã tạo API này để bạn dễ dàng tắt các tính năng trợ năng, vì vậy bạn có thể thực hiện một số công việc dọn phòng và đặt lại trạng thái giữa những người dùng.

Để làm điều này, hãy gọi configureForGuidedAccess trên UIAccessibility.

Bạn phải vượt qua một tính năng trợ năng tương thích và liệu bạn có muốn nó được bật hay không.

Điều này hoạt động cho Zoom, VoiceOver, Invert Colors, AssistiveTouch và Grayscale.

Vì vậy, cho dù ứng dụng của bạn có các hạn chế tùy chỉnh cho Truy cập có hướng dẫn hay bạn xây dựng toàn bộ trải nghiệm của mình xung quanh Chế độ ứng dụng đơn, điều quan trọng là phải biết cách đảm bảo nó có thể truy cập được.

Loại hạn chế sai khiến thứ gì đó khó sử dụng hơn, vì vậy hãy luôn xem xét trải nghiệm của người khuyết tật khi sử dụng ứng dụng của bạn.

Tôi đã chỉ cho bạn các API bạn cần để tạo trải nghiệm Chế độ ứng dụng đơn có thể truy cập được.

Bây giờ hãy làm một cái gì đó tuyệt vời và dễ tiếp cận!