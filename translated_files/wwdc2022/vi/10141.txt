10141

♪ nhạc cụ hip hop ♪

Xin chào. Chào mừng đến với WWDC năm nay.

Tên tôi là Stella.

Và tôi là Alex.

Stella và tôi làm việc cùng nhau trên nhiều phần của USD tại Apple.

Hôm nay chúng tôi sẽ cùng bạn khám phá các bản cập nhật cho các công cụ và kết xuất USD.

Mang nó đi, Stella!

USD là một công nghệ nền tảng, với sự tích hợp ngày càng tăng và sâu sắc vào các công cụ tạo nội dung, đang cho phép ngày càng nhiều cách tạo tài sản và nội dung, kết xuất cho trò chơi, AR, phim và web, tất cả đều có USD ở trung tâm.

Hôm nay, chúng ta sẽ tập trung vào hai phần của hệ sinh thái: công cụ và kết xuất.

Hãy bắt đầu với các bản cập nhật cho các công cụ USD của chúng tôi.

Sau đó, chúng tôi sẽ chỉ cho bạn cách tài sản của bạn trông đẹp hơn với ánh sáng mới trong AR Quick Look, đi sâu vào kết xuất USD và cuối cùng nhưng không kém phần quan trọng, chỉ cho bạn cách tích hợp Hydra.

Hãy bắt đầu với USD Tools trong hệ sinh thái Apple.

Chúng tôi sẽ đề cập đến Công cụ USDZ, Trình chuyển đổi thực tế và sau đó theo dõi các công cụ và khuôn khổ bổ sung có thể giúp bạn tạo nội dung USDZ.

USDZ Tools là một gói chứa các công cụ USD Python dòng lệnh cần thiết để giúp bạn tạo, xác thực và kiểm tra các tệp USDZ.

Gói này cũng bao gồm một trình chuyển đổi được gọi là usdzconvert để tạo các tệp USDZ từ các định dạng tệp 3D chính khác.

Các tập lệnh Python cung cấp cho bạn các công cụ mạnh mẽ để tự động hóa và xử lý hàng loạt.

Ngoài ra, chúng là một cách tuyệt vời để bạn khám phá USD và học cách sử dụng API.

Năm nay, chúng tôi sẽ mang đến cho bạn sự hỗ trợ Python 3 và Apple Silicon.

Chúng tôi cũng đã nâng cấp phiên bản USD để cung cấp cho bạn quyền truy cập đơn giản vào các tính năng USD mới và cải tiến hiệu suất.

Trên hết, chúng tôi đã thêm các tính năng mới tuyệt vời vào usdzconvert.

Bây giờ bạn có thể chuyển đổi các tệp OBJ với tài liệu sang USDZ với cờ useObjMtl.

Chúng tôi cũng đã thêm hỗ trợ cho các điểm và dòng từ tệp GLTF và thời gian cảnh cho hoạt ảnh từ tệp FBX.

Để hiển thị tất cả các tùy chọn usdzconvert và cách tùy chỉnh chuyển đổi của bạn, chỉ cần nhập "usdzconvert --help" trên thiết bị đầu cuối.

Điều này sẽ hiển thị cho bạn tất cả các tùy chọn bạn có thể sử dụng với usdzconvert, chẳng hạn như thêm thông tin bản quyền hoặc cung cấp Màu khuếch tán hoặc Bản đồ bình thường cho mô hình 3D của bạn và hơn thế nữa.

Ngoài ra, nếu bạn thích trình chỉnh sửa giao diện người dùng cho quy trình làm việc của mình hơn là sử dụng dòng lệnh, chúng tôi cũng có Trình chuyển đổi thực tế, được xây dựng bằng các công cụ USDZ và cung cấp các khả năng tương tự như usdzconvert, nhưng trong cửa sổ trình chỉnh sửa, giúp dễ dàng chuyển đổi, xem và tùy chỉnh nội dung

Chỉ cần nhập các định dạng tệp 3D phổ biến, chẳng hạn như OBJ, GLTF và FBX, để xem kết quả USDZ đã chuyển đổi.

Năm nay, chúng tôi cũng đã cải thiện giao diện người dùng để hợp lý hóa quy trình làm việc của bạn.

Bạn có thể chọn kết cấu để xem thêm thông tin...

Tùy chỉnh các thuộc tính vật liệu với kết cấu của riêng bạn...

Thêm bản quyền hoặc chỉnh sửa siêu dữ liệu tệp...

Và chọn ánh sáng cổ điển hoặc mới, chúng ta sẽ đi vào chi tiết hơn vào cuối phiên.

Bạn thậm chí có thể xem trước đối tượng USDZ của mình trong nhiều điều kiện ánh sáng khác nhau với các tùy chọn tích hợp và điều chỉnh độ phơi sáng cho phù hợp Ở phía tài sản, chúng tôi đã thêm một tính năng mới để cho phép bạn chọn chất lượng kết cấu trong khi xuất tệp USDZ.

Theo mặc định, các kết cấu được xuất ở kích thước ban đầu, không nén.

Nhưng, nếu bạn muốn giảm kích thước tệp USDZ của mình, bây giờ bạn có tùy chọn nén kết cấu sang định dạng JPEG.

Trong ví dụ này, chúng tôi đã sử dụng tính năng chụp đối tượng để quét quân cờ này ở độ phân giải cao.

Để giảm kích thước tệp mà không làm mất chi tiết lưới, chúng tôi đã sử dụng RealityConverter để xuất mô hình với kết cấu nén.

Sự khác biệt về hình ảnh hầu như không đáng chú ý và chúng tôi đã giảm 80% kích thước tệp kết quả!

Đây là tin tức thú vị hơn: RealityConverter hiện có thể tự động khắc phục sự cố với tài sản USD của bạn!

Nó sẽ sửa các thuộc tính và loại kết nối không khớp, sửa một giai đoạn với nhiều số nguyên tố cấp cao nhất và số nguyên tố mặc định bị thiếu, cập nhật các thuộc tính bị phản đối và thêm siêu dữ liệu giai đoạn bị thiếu.

Chúng tôi cũng đã thêm hỗ trợ nhị phân phổ quát nên bây giờ nó chạy tự nhiên trên Apple Silicon.

Bây giờ, nếu bạn muốn tạo mô hình 3D từ đầu thì sao?

Năm ngoái, chúng tôi đã ra mắt Object Capture dưới dạng RealityKit API trên macOS, cung cấp một cách sáng tạo để tạo tài sản USDZ.

Sau đó, bạn có thể sử dụng Reality Composer để soạn một cảnh với nhiều nội dung.

Năm nay, chúng tôi sẽ mang đến cho bạn RoomPlan API, cho phép bạn tạo các bản quét 3D tham số cho căn phòng của mình.

Tôi thực sự khuyên bạn nên xem 3 buổi này.

Cùng với nhau, những công nghệ này giúp mọi người tạo ra trải nghiệm AR nhập vai dễ dàng hơn bao giờ hết.

Tất cả những công cụ mà chúng tôi đề cập hôm nay đều có sẵn để bạn tải xuống ngay bây giờ trên trang Công cụ tạo AR của chúng tôi trên trang web của nhà phát triển Apple.

Vui lòng kiểm tra chúng!

Tiếp theo, chúng ta hãy xem+ về ánh sáng mới của AR Quick Look.

AR Quick Look là trình xem AR tích hợp, trên toàn hệ thống trên iOS cho phép bạn đặt các đối tượng 3D USDZ trong không gian vật lý của mình, như trên bàn, tường hoặc sàn nhà và tương tác với chúng bằng các cử chỉ chạm đơn giản.

Bạn thậm chí có thể tạo các cảnh tương tác được xây dựng bằng Reality Composer và lưu chúng vào tệp USDZ mà bạn có thể chia sẻ với những người khác trên iMessage, Mail, Notes và hơn thế nữa.

Chúng tôi không ngừng cố gắng làm cho kết xuất AR Quick Look chân thực hơn và năm nay, chúng tôi đang giới thiệu ánh sáng được cải thiện trong AR Quick Look, sáng hơn, với độ tương phản nâng cao và độ nét hình dạng được cải thiện để làm cho tài sản của bạn trông đẹp hơn nữa.

Đây là một ví dụ về AirPods Pro ở chế độ đối tượng với ánh sáng cổ điển và mới.

AirPods Pro trông tuyệt vời trong cả hai điều kiện ánh sáng và bạn sẽ nhận thấy tùy chọn ánh sáng mới cung cấp màu sắc sáng hơn, độ tương phản cao hơn và nhiều điểm nổi bật hơn.

Bây giờ hãy đặt AirPods Max trên bàn để xem nó ở chế độ AR với ánh sáng mới!

Tuyệt vời, phải không?

Vậy làm thế nào để bạn áp dụng ánh sáng mới cho tài sản của mình?

Nó thực sự đơn giản.

Bạn chỉ cần chọn ánh sáng phù hợp nhất với nội dung của mình bằng cách đặt siêu dữ liệu IblVersion ưa thích mới trong tệp USDZ của bạn.

Ở đây chúng tôi đã đặt giá trị của Phiên bản Ibl ưu tiên thành 2, điều này sẽ chỉ ra AR Quick Look để sử dụng hệ thống chiếu sáng mới.

Hãy hiểu điều này chi tiết hơn.

Siêu dữ liệu IBM ưa thích có thể chứa các giá trị 0,1 và 2.

Một tài sản có phiên bản Ibl ưu tiên được đặt thành 0 sẽ sử dụng ánh sáng mặc định của hệ thống.

Nếu được đặt thành 1, nó sẽ tiếp tục sử dụng ánh sáng cổ điển.

Giá trị 2 sẽ cung cấp cho bạn ánh sáng mới.

Điều này có nghĩa là bạn cũng có thể dễ dàng cập nhật tài sản hiện tại của mình lên hệ thống chiếu sáng mới!

Chúng tôi khuyên bạn nên đưa ra lựa chọn rõ ràng và đặt siêu dữ liệu này trong tất cả các tài sản của mình.

Để làm điều đó, bạn có thể sử dụng usdzconvert với cờ preferrediblversion.

Ví dụ, đây là cách sử dụng cờ để chuyển đổi tệp OBJ vòi cứu hỏa sang USDZ với ánh sáng mới.

Hoặc bạn có thể sử dụng Reality Converter, bây giờ sẽ sử dụng ánh sáng mới theo mặc định.

Nhưng nếu bạn muốn sử dụng ánh sáng cổ điển, có một tùy chọn mới trong Bảng điều khiển tài sản.

Ở đây chúng tôi xem trước tài sản AirPods Max với cả ánh sáng cổ điển và mới.

Điều này cung cấp một cách dễ dàng để so sánh sự khác biệt.

Bằng cách nhấp vào biểu tượng ánh sáng, ánh sáng được áp dụng cũng sẽ được tô sáng để bạn tham khảo.

Cuối cùng, đối với các tài sản không có siêu dữ liệu này, AR Quick Look sẽ tự động xác định phiên bản chiếu sáng dựa trên dấu ngày giờ của tệp.

Nếu tài sản được tạo sau ngày 1 tháng 7 năm 2022, nó sẽ sử dụng hệ thống chiếu sáng mới.

Các tài sản cũ hơn sẽ tiếp tục sử dụng ánh sáng cổ điển để chúng không thay đổi giao diện của chúng.

Bây giờ, tôi sẽ giao nó cho Alex để kết xuất USD.

Cảm ơn, Stella.

Chúng tôi đã thấy rất nhiều tài sản USD được kết xuất ngày hôm nay.

Bây giờ chúng ta sẽ khám phá điều gì làm cho kết xuất USD và Hydra trở thành một lựa chọn tuyệt vời cho quy trình tạo nội dung 3D của bạn và cách bạn có thể tích hợp nó vào các ứng dụng của riêng mình.

Đầu tiên, chúng ta hãy lùi lại một bước và nói về kết xuất nói chung.

Trình kết xuất lấy một bộ sưu tập các mô hình 3D, máy ảnh và đèn làm đầu vào và sử dụng chúng để tạo ra hình ảnh.

Có nhiều trình kết xuất khác nhau và mỗi trình kết xuất được xây dựng cho một mục đích cụ thể và được tối ưu hóa cho một trường hợp sử dụng khác nhau.

Một số trình kết xuất được thiết kế cho các ứng dụng thời gian thực như kết xuất một nhân vật trong trò chơi hoặc cảnh AR.

Những người khác mất nhiều thời gian hơn nhưng tạo ra một hình ảnh chân thực hơn, ví dụ, tạo ra hiệu ứng hình ảnh cho một bộ phim Hollywood.

Tất cả các trình kết xuất đều đưa ra lựa chọn về các tính năng của họ và là duy nhất.

Các trình kết xuất USD khác nhau cho các trường hợp sử dụng khác nhau cũng tồn tại trên các nền tảng của Apple.

Chúng tôi đang thêm tài liệu về các trình kết xuất khác nhau này vào developer.apple.com.

Nó sẽ giúp bạn hiểu sự khác biệt giữa chúng, giải thích những tính năng USD nào mà chúng hỗ trợ và cung cấp hướng dẫn về cách tạo ra các USD phù hợp nhất với bạn.

Một trong những trình kết xuất trên nền tảng của Apple là RealityKit, có hệ thống kết xuất quang học, được tối ưu hóa cho trải nghiệm thực tế tăng cường tương tác và được sử dụng trong AR Quick Look.

Nó là trình kết xuất chính của các tệp USDZ.

Một lựa chọn khác để kết xuất USD trên macOS là trình kết xuất mã nguồn mở của Pixar, Storm.

Nó được tối ưu hóa cho các tài sản cấp sản xuất và được thiết kế để xem trước thời gian thực các cảnh quy mô lớn.

Đó là một công nghệ tuyệt vời để bạn hình dung và lặp lại các tài sản khi chúng chảy qua quy trình tạo nội dung của bạn.

Storm sử dụng một công nghệ gọi là Hydra.

Hydra là một khía cạnh cốt lõi của dự án nguồn mở USD.

Vì vậy, tiếp theo, hãy hiểu Hydra và mối liên hệ của nó với Storm.

Chúng tôi bắt đầu với sơ đồ này từ trước đó.

Ở đây, chúng tôi sử dụng Storm làm trình kết xuất.

Đầu vào thường được gọi là "biểu đồ cảnh" và Storm tạo ra kết xuất xem trước của nó.

Nhưng điều gì sẽ xảy ra nếu bạn muốn tạo ra một hình ảnh chân thực của cùng một cảnh bằng cách sử dụng một trình kết xuất khác?

Đó chính xác là những gì Hydra được tạo ra.

Thay vì ghép chặt chẽ cảnh với trình kết xuất, Hydra hoạt động như một lớp trừu tượng ở giữa chúng để vận chuyển dữ liệu từ cảnh đến trình kết xuất.

Điều này cho phép bạn dễ dàng hoán đổi trình kết xuất của mình dựa trên nhu cầu của bạn bất cứ lúc nào mà không có bất kỳ thay đổi nào đối với biểu đồ cảnh của bạn.

Ví dụ, bạn có thể sử dụng Storm và RenderMan của Pixar.

Trong quy trình tạo nội dung của bạn, bạn có thể sử dụng Storm để kết xuất nhanh và lặp lại nhanh, sau đó chuyển sang RenderMan để tạo ra hình ảnh cuối cùng khi bạn sẵn sàng.

Biểu đồ cảnh cũng vậy.

Đầu vào của bạn cho Hydra có thể là biểu đồ cảnh USD hoặc biểu đồ khác.

Điều này cho phép bạn tận dụng cùng một trình kết xuất trong nhiều ứng dụng ngay cả khi mỗi ứng dụng có biểu đồ cảnh riêng, hoàn toàn khác nhau.

Các giao diện kết nối Hydra với biểu đồ cảnh và trình kết xuất được gọi là đại biểu.

Biểu đồ cảnh được kết nối với Hydra thông qua Trình đại diện cảnh và Trình kết xuất được kết nối với Hydra thông qua Trình biểu kết xuất.

Và đó là Hydra dành cho bạn!

Foundry's Nuke 13 đã sử dụng Hydra để hiển thị khung nhìn, cho phép các nghệ sĩ Nuke trên macOS có chất lượng tốt hơn và trải nghiệm tương tác trong hệ thống 3D của Nuke.

Điều này đạt được bằng cách sử dụng Hydra với một đại diện cảnh tùy chỉnh và Bão tăng tốc kim loại.

Chúng tôi rất vui mừng được chia sẻ rằng chúng tôi đã làm việc với Pixar Animation Studios để phát hành công khai Metal accelerated Storm cho nguồn mở.

Nó đã sẵn sàng để bạn sử dụng với giá 22,05 USD.

Bây giờ chúng ta đã thấy sức mạnh của Hydra, chúng ta hãy xem qua một ứng dụng mẫu Hydra với trường hợp sử dụng điển hình của biểu đồ cảnh USD và Storm làm trình kết xuất.

Nó sẽ giúp bạn bắt đầu sử dụng Hydra để xây dựng các công cụ tạo nội dung và các ứng dụng quy trình làm việc 3D.

Ứng dụng mẫu của chúng tôi, HydraPlayer, rất đơn giản nhưng mạnh mẽ.

Nó hiển thị một tệp USD với Storm và cho phép chúng tôi di chuyển máy ảnh xung quanh nó.

Và chúng tôi rất vui mừng được biến HydraPlayer thành một dự án mẫu công khai để giúp bạn bắt đầu ngay lập tức!

Nó có sẵn trong tài nguyên phiên và đi kèm với hướng dẫn đầy đủ trong readme.

Tôi khuyến khích bạn tạm dừng video này ngay bây giờ, tải xuống dự án và sau đó theo dõi khi chúng ta xem qua nó.

Trong dự án Xcode của bạn, bạn sẽ tìm thấy 4 lớp: AppDelegate, Camera, Renderer và View Controller.

AppDelegate về cơ bản là đối tượng gốc của bạn và quản lý các tương tác với hệ thống.

Lớp máy ảnh là một đại diện đơn giản của máy ảnh cảnh USD để giúp dễ dàng dịch đầu vào của người dùng.

Lớp trình kết xuất sẽ xử lý tất cả các tương tác của chúng tôi với USD và Hydra.

Cuối cùng nhưng không kém phần quan trọng, ViewController xử lý đầu vào của người dùng chúng tôi.

Trước khi chúng ta có thể xây dựng và khởi chạy HydraPlayer, có ba việc cần làm: chuẩn bị môi trường, sử dụng Rosetta trên Apple Silicon Macs, tải xuống và xây dựng USD & Hydra.

Vậy hãy bắt đầu nào.

Đầu tiên, chúng tôi chuẩn bị môi trường phát triển của mình.

Đảm bảo rằng bạn đã cài đặt Xcode, Python và CMake.

Bây giờ hãy mở một thiết bị đầu cuối cho hai bước còn lại.

Nếu bạn đang sử dụng Apple Silicon Mac, bạn cần chạy dưới Rosetta trong khi USD đang chuyển sang hỗ trợ đầy đủ arm64.

Để làm điều này, hãy sử dụng lệnh vòm.

Khi môi trường của bạn đã sẵn sàng, chúng tôi phải tải xuống mã nguồn USD và Hydra.

Cả hai đều sống trong cùng một kho lưu trữ GitHub tại PixarAnimationStudios/USD.

Bây giờ chúng ta đã có mã, chúng ta có thể xây dựng nó.

USD đi kèm với một tập lệnh xây dựng Python tiện lợi.

Chúng tôi thêm các cờ "generator Xcode" và "no-python" và chỉ định nơi chúng tôi muốn cài đặt USD vào.

Hãy đặt nó bên cạnh mã nguồn tại "USDInstall."

Sau khi USD hoàn thành việc xây dựng, chúng tôi đã sẵn sàng để xây dựng HydraPlayer!

Hãy quay lại sơ đồ này một lần nữa và sử dụng nó để xác định các phần chính của HydraPlayer để kiểm tra chi tiết.

Chúng ta sẽ xem xét cách tải các mô hình 3D, cách thiết lập máy ảnh và đặt ánh sáng cảnh.

Sau đó, chúng ta sẽ học cách đưa biểu đồ cảnh của mình đến Storm và cuối cùng, cách tạo hình ảnh cho cửa sổ ứng dụng.

Vì vậy, hãy bắt đầu với việc tải các mô hình 3D của chúng tôi từ USD.

Trong viewDidAppear trong ViewController của chúng tôi, chúng tôi tạo một bộ chọn tệp với NSOpenPanel khi chế độ xem xuất hiện lần đầu tiên.

Khi một tệp đã được chọn, trình kết xuất có thể bắt đầu thiết lập cảnh của chúng tôi và tải tệp USD.

Tải tệp rất đơn giản với USD API.

Chúng tôi chỉ cần mở giai đoạn USD ở đường dẫn tệp.

Thế là xong. Chúng tôi đã tải tệp của mình.

Tiếp theo, chúng tôi thiết lập máy ảnh của mình. Trong mã của chúng tôi, điều này rất đơn giản.

Trong setupCamera, trước tiên chúng tôi tạo ra một camera cảnh mới.

Sau đó, chúng tôi tính toán quy mô thế giới và trung tâm dựa trên bối cảnh của chúng tôi.

Tiếp theo, di chuyển máy ảnh của chúng tôi ở khoảng cách tốt và sau đó tập trung vào trung tâm.

Bằng cách này, máy ảnh của chúng tôi ghi lại toàn bộ cảnh.

Tuyệt vời, bây giờ chúng tôi đã thiết lập máy ảnh của mình.

Tiếp theo, ánh sáng.

Chúng tôi giữ cho nó dễ dàng và tạo ra một ánh sáng xung quanh đơn giản và đặt vị trí của nó để phù hợp với máy ảnh, và thế là xong.

Và với điều đó, chúng tôi có toàn cảnh với các mô hình 3D, máy ảnh và ánh sáng!

Bây giờ chúng ta có thể chuyển cảnh của mình cho Storm.

Đầu tiên, chúng ta cần khởi tạo công cụ kết xuất của mình.

Ở đây, chúng tôi tạo ra một UsdImagingGLEngine mới, đó là tên lớp của Storm.

Tham số quan trọng nhất ở đây là rootPath.

Nó hướng động cơ đến giai đoạn USD của chúng tôi với các mô hình 3D của chúng tôi.

Để tìm hiểu thêm về các thông số khác và UsdImagingGLEngine, vui lòng xem tài liệu API USD của Pixar.

Tiếp theo, chúng tôi đặt máy ảnh trong động cơ và thiết lập ánh sáng.

Và cuối cùng nhưng không kém phần quan trọng, chúng tôi xác định cách chúng tôi muốn Storm hiển thị bằng cách đặt các tham số kết xuất.

Ví dụ, chúng tôi muốn hiển thị một nền trong suốt để hình ảnh được kết xuất hoạt động tốt với bảng màu ứng dụng của chúng tôi.

Quan trọng đối với các cảnh có hoạt hình, đây cũng là nơi chúng tôi chỉ định mã thời gian.

Bây giờ chúng tôi đã sẵn sàng để hiển thị một hình ảnh!

Chúng tôi đã thực hiện tất cả các thiết lập cần thiết, vì vậy lệnh kết xuất chỉ là một dòng mã.

Chúng tôi nhận được kết quả và hiển thị nó trong cửa sổ của chúng tôi, và chúng tôi đây rồi!

Chúng tôi đang kết xuất máy bay đồ chơi USD!

Và thực ra, chúng tôi đang kết xuất không chỉ một mặt phẳng.

HydraPlayer có thể dễ dàng kết xuất hàng nghìn nội dung hoạt hình với hàng chục triệu hình tam giác.

Nếu bạn chưa có, hãy xem tài nguyên cho phiên này, tải xuống dự án mẫu và vui vẻ khám phá thêm.

Chúng tôi đã cùng nhau khám phá các bản cập nhật cho các công cụ USD của Apple giúp chúng mạnh mẽ hơn và làm cho tài sản của bạn trông đẹp hơn nữa.

Chúng tôi đã tìm hiểu về các tính năng của Hydra và đã xem qua dự án mẫu HydraPlayer để xem cách bạn có thể tích hợp nó vào các ứng dụng của riêng mình.

Để tìm hiểu thêm về các khái niệm quan trọng của USD, hãy xem phiên "Hiểu các nguyên tắc cơ bản của USD.

Cảm ơn bạn.

♪ ♪