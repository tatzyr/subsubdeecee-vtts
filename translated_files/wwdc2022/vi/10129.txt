10129

♪ nhạc cụ hip hop ♪

♪

Xin chào, và chào mừng đến với WWDC.

Tên tôi là Kacey.

Bạn có thể đã bắt gặp Mô tả Cảnh Phổ quát, hoặc USD, rồi.

Bạn có thể đã tương tác với các tệp USD trong thực tế tăng cường.

Hoặc bạn có thể đã chuyển đổi tài sản từ các định dạng khác sang USD.

Nhưng điều gì thực sự bên trong một tệp USD?

USD là một công nghệ quan trọng với các tính năng độc đáo, vì vậy chúng ta hãy cùng nhau khám phá các nguyên tắc cơ bản của USD.

Chúng ta sẽ tìm hiểu USD là gì, giới thiệu một số khái niệm USD cơ bản, tìm hiểu cách soạn cảnh bằng USD và hiểu về các định dạng tệp USD.

Đầu tiên, USD là gì?

USD được phát triển bởi Pixar Animation Studios để cho phép họ tạo ra những bộ phim phức tạp mà chúng tôi yêu thích, và nó được sử dụng rộng rãi trong lĩnh vực điện ảnh, giải trí và các ngành công nghiệp khác.

Nó có thể mở rộng bằng thiết kế và đang nhanh chóng nổi lên như một công nghệ quy trình làm việc hợp tác, quan trọng.

Đây là một dự án mã nguồn mở được xây dựng dựa trên nhiều thập kỷ kinh nghiệm sản xuất trong ngành công nghiệp điện ảnh và đang ngày càng được áp dụng cho các trò chơi, mô phỏng, AR, sản xuất và thương mại điện tử.

USD có ba khía cạnh cốt lõi: đặc tả mô tả cảnh, API và hệ thống kết xuất.

Ứng dụng của bạn tương tác với USD bằng API.

Hệ thống kết xuất cung cấp hỗ trợ trực quan hóa các cảnh với các trình kết xuất khác nhau.

Apple có nhiều hệ thống kết xuất khác nhau cho USD.

Kiểm tra phiên "Khám phá các công cụ USD và kết xuất" để tìm hiểu thêm về nó.

Trong phiên này, chúng tôi tập trung vào đặc tả mô tả cảnh nêu rõ cách dữ liệu cảnh được mô tả, cách nó được tổ chức và cách nó được thể hiện ở định dạng tệp.

Về cơ bản, các tệp USD này chứa dữ liệu mô tả một cảnh nên trông như thế nào.

Các ứng dụng kết xuất diễn giải dữ liệu và tạo ra một hình ảnh trên màn hình.

Ví dụ, tại phiên WWDC năm ngoái, chúng tôi đã tạo cảnh USD này và hiển thị nó trong Octane.

Bây giờ chúng ta hãy đi sâu vào các khái niệm cơ bản và tìm hiểu về dữ liệu đằng sau kết xuất.

Để giữ mọi thứ đơn giản, chúng tôi sẽ sử dụng văn bản đại diện USD USD có rất nhiều tính năng thú vị mà chúng tôi muốn nói đến, nhưng vì lợi ích của thời gian, chúng tôi sẽ tập trung vào các tính năng cần thiết mà bạn có thể gặp nhất khi làm việc với USD như sân khấu, nguyên tố và các lớp, chỉ để kể tên một vài tính năng

Hãy bắt đầu với sân khấu.

Hãy tưởng tượng chúng ta đang tham dự một vở kịch trong nhà hát.

Với tư cách là khán giả, chúng tôi quan sát sân khấu để xem các diễn viên biểu diễn, chú ý đến môi trường, ánh sáng và đạo cụ.

Đây là một sự tương tự tốt với cách một giai đoạn hoạt động bằng USD.

Một giai đoạn là một biểu đồ cảnh, hoặc một cấu trúc dữ liệu, tổ chức thông tin đồ họa theo cách phân cấp, nơi tất cả các yếu tố cảnh kết hợp với nhau.

Một giai đoạn là một thành phần của một hoặc nhiều lớp, thường là các tệp chứa thông tin cảnh.

Nói chung, một giai đoạn được tạo thành từ các nguyên tố, là các vật thể chứa chính của một cảnh.

Prims có thể chứa các nguyên tố khác để tạo ra một hệ thống phân cấp các yếu tố cảnh.

Hãy xem một ví dụ.

Ở bên trái, chúng tôi có một lớp USD mẫu và ở bên phải, chúng tôi thấy một bản xem trước biểu diễn trực quan của sân khấu.

Chúng ta thấy hai nguyên tố: một hình cầu và một khối lập phương.

Mỗi nguyên tố có một loại nhất định xác định những gì nó đại diện trên sân khấu.

Có nhiều loại nguyên tố khác nhau tạo nên một sân khấu như mắt lưới, đèn và vật liệu.

Đối với ví dụ này, hình cầu nguyên tố có một loại gọi là "hình cầu" và hình khối nguyên tố có một loại gọi là "Cube".

Nhưng điều này đưa ra một câu hỏi hay.

Làm thế nào để USD biết những loại nguyên tố này có nghĩa là gì?

USD biết điều này thông qua việc sử dụng các lược đồ.

Lược đồ là dữ liệu có cấu trúc xác định vai trò của một nguyên tố trên sân khấu.

Chúng cung cấp ý nghĩa cho các khái niệm cảnh phổ biến như hình học, vật liệu và hơn thế nữa.

Đối với ví dụ này, đây là định nghĩa lược đồ của một hình cầu.

Nó xác định rằng mọi hình cầu đều có bán kính và phạm vi hộp giới hạn.

Với các lược đồ hiện có, USD cung cấp cho bạn một nền tảng phong phú về các loại tích hợp sẵn để mô tả các cảnh của bạn.

Các lược đồ tùy chỉnh cho phép bạn mở rộng USD hơn nữa.

Bạn có thể cung cấp các lược đồ của riêng mình đại diện cho dữ liệu tùy chỉnh của bạn cho các trường hợp sử dụng và quy trình làm việc của riêng bạn.

Lược đồ không cần phải có biểu diễn trực quan.

Chúng chỉ có thể là dữ liệu bạn muốn có trong giai đoạn một cách có cấu trúc, có ý nghĩa.

Ví dụ, ở đây, tôi đã tạo một lược đồ mới có tên là "WWDC."

Nó định nghĩa rằng một prim có tiêu đề và một năm liên quan đến nó, và đây là một prim được gọi là "WWDC22" sử dụng lược đồ.

Nó đã đặt năm đến năm 2022 và tiêu đề được đặt thành "Gọi để mã".

Năm và tiêu đề được gọi là "thuộc tính" của nguyên tố.

Nguyên thủy có thể có nhiều thuộc tính khác nhau.

Mỗi thuộc tính có một loại và một giá trị.

Các thuộc tính cũng có thể có các giá trị mặc định được tạo ra để chúng không phải được xác định rõ ràng trong prim sử dụng lược đồ.

Quay trở lại lược đồ Sphere của chúng tôi, bạn có thể thấy cách chúng tôi đã xác định các giá trị mặc định cho các thuộc tính bán kính và phạm vi.

Trong lớp này, chúng ta có một hình cầu nguyên tố duy nhất.

Vì thuộc tính Radius không được đặt, nó lấy giá trị của nó từ lược đồ Sphere: bán kính mặc định của một.

Tuy nhiên, chúng ta có thể rõ ràng và đặt thuộc tính bán kính.

Hình cầu vẫn trông giống nhau vì giá trị này khớp với giá trị mặc định của giá trị được đặt trong lược đồ.

Bây giờ hãy thêm một hình cầu thứ hai và đặt bán kính thành 0,5.

Chúng ta có thể thấy rằng nó thực sự bằng một nửa kích thước của quả cầu khác.

Các thuộc tính, nguyên tố và giai đoạn cũng có thể chứa siêu dữ liệu, là các cặp thông tin chính-giá trị có thể cung cấp dữ liệu phụ trợ cho các phần của cảnh.

Siêu dữ liệu được đặt ở cấp độ mà nó áp dụng.

Siêu dữ liệu ảnh hưởng đến toàn bộ giai đoạn và tất cả các nguyên tố trong đó được đặt ở cấp độ giai đoạn.

Siêu dữ liệu dành riêng cho một nguyên tố duy nhất, được đặt trên nguyên tố.

Các thuộc tính cũng có thể có siêu dữ liệu.

Ví dụ, đây là một số siêu dữ liệu giai đoạn điển hình.

metersPerUnit xác định các đơn vị tỷ lệ cho cảnh.

Trục lên xác định trục X, Y hoặc Z nào được coi là hướng lên cho máy ảnh trong cảnh.

Chuỗi tài liệu lưu trữ tài liệu hữu ích cho mục đích theo dõi quy trình làm việc.

Bây giờ chúng tôi đã xác định những điều cơ bản này, chúng tôi đã có thể bắt đầu sử dụng USD.

Hãy xem cảnh bánh kếp có thể được thực hiện như thế nào chỉ bằng cách sử dụng những khái niệm này.

Trong lớp của chúng tôi, chúng tôi tạo ra một nguyên tố biến đổi được gọi là "Bánh kếp".

Sau đó, chúng tôi thêm một biến đổi nguyên tố được gọi là "Blueberry_01" là con của Pancakes prim.

Trong Blueberry_01 prim, chúng tôi bao gồm Mesh prim.

Lưới nguyên tố giữ hình học cho quả việt quất và liên kết với các vật liệu.

Hãy hoàn thành phần còn lại của tài sản bằng cách thêm các số nguyên tố khác.

Đây là cảnh bánh kếp đã hoàn thành của chúng tôi, chỉ sử dụng những khái niệm cơ bản này.

Những nguyên tắc cơ bản này có thể đưa bạn đi xa, nhưng trong các dự án lấy sản xuất làm trung tâm, chúng tôi cần cộng tác với nhiều thành viên và tổ chức khác nhau trong nhóm.

USD có rất nhiều tính năng để giải quyết nhu cầu này trong cái được gọi là "thành phần".

Bố cục cho phép tạo ra một sân khấu từ các đơn vị mô tả cảnh riêng biệt.

Điều này cho phép tái sử dụng hiệu quả các yếu tố 3D trong một cảnh cho phép cộng tác và lặp lại nhanh chóng.

Chúng ta sẽ thảo luận về các loại thành phần phổ biến nhất: phân lớp, tham chiếu, tải trọng và bộ biến thể.

Nhưng hãy làm điều đó một cách vui vẻ.

Bạn thích một ván cờ?

Hãy xây dựng một cảnh đặt cờ vua.

Trong cảnh này, chúng tôi sẽ sử dụng một danh mục tài sản trong một lớp danh mục, sẽ đề cập đến các quân cờ của chúng tôi.

Sau đó, chúng tôi sẽ sắp xếp các quân cờ này trên bàn cờ thành một lớp bố cục để có được kết quả cuối cùng, có thể xem được với lớp ChessSet.

Trước tiên chúng ta sẽ cần lấy quân cờ của mình Trong cờ vua, có sáu quân cờ chính: cầm đồ, xe, giám mục, hiệp sĩ, nữ hoàng và vua.

Chúng tôi sẽ sử dụng các tài sản này, được tạo bằng Object Capture, để xây dựng một bộ cờ vua hoàn chỉnh.

Hãy bắt đầu bằng cách đưa các tác phẩm của chúng tôi lên sân khấu của chúng tôi bằng cách sử dụng khái niệm USD, tham khảo.

Tham chiếu là khi một nguyên tố trong một giai đoạn đề cập đến một nguyên tố khác trong cùng một giai đoạn hoặc một lớp khác mà không sao chép dữ liệu.

Điều này giúp giảm thiểu sự trùng lặp dữ liệu và cho phép dữ liệu được cập nhật riêng biệt bởi những người và ứng dụng khác nhau.

Hãy tham khảo tài sản cầm đồ của chúng ta vào khung cảnh của chúng ta.

Trong lớp danh mục của chúng tôi, chúng tôi xác định một nguyên tố được gọi là "Pawn".

Cho đến nay nó không có bất kỳ dữ liệu nào và vì vậy sân khấu của chúng tôi vẫn còn trống.

Tiếp theo, chúng tôi thêm một tham chiếu đến lớp Pawn.usda.

Điều này mang lại tài sản cầm đồ và chúng ta có thể thấy nó trong lớp danh mục.

Nhưng làm thế nào để USD biết nó nên mang vào prim nào từ tệp bạn tham khảo?

Chúng ta có thể chỉ định prim này với siêu dữ liệu defaultPrim.

Siêu dữ liệu defaultPrim được xác định trên sân khấu và chỉ định prim nào nên được tham chiếu khi sử dụng cảnh này ở một giai đoạn khác.

Chúng tôi khuyên bạn nên luôn viết defaultPrim cho tài sản USD.

Hãy kiểm tra tài sản cầm đồ của chúng tôi để đảm bảo defaultPrim là tác giả.

Chúng ta có thể thấy siêu dữ liệu defaultPrim ở cấp độ giai đoạn trong tài sản của chúng ta.

Tuyệt vời.

Ngoài ra, nếu defaultPrim không phải là tác giả hoặc bạn muốn tham chiếu đến một prim khác với defaultPrim, bạn có thể chỉ định đường dẫn đến prim trong lớp tham chiếu một cách rõ ràng, ở bất kỳ đâu trong hệ thống phân cấp.

Các đường dẫn bằng USD được sử dụng để xác định các yếu tố trên một sân khấu.

Đường dẫn nguyên tố là một định danh duy nhất cho một nguyên tố.

Ví dụ, trên sân khấu này chúng ta thấy ba nguyên tố.

Thế giới nguyên thủy có một con đường nguyên thủy của /Thế giới.

Cầm đồ và Hiệp sĩ nguyên tố được coi là con của nguyên tố Thế giới.

Do đó, con đường dẫn đến Pawn prim sẽ là /World/Pawn, và con đường dẫn đến Knight prim sẽ là /World/Knight.

Với ý nghĩ đó, chúng ta có thể thiết lập rõ ràng con đường chính cho Pawn prim trong tài liệu tham khảo của chúng ta ở đây.

Đối với các cảnh lớn hơn, có thể tốn kém để tải tất cả thông tin cảnh cùng một lúc.

Đối với điều này, USD cho phép tải chậm mô tả cảnh lên sân khấu với một loại tham chiếu được gọi là "tải trọng".

Nên sử dụng tải trọng khi tham chiếu các tập dữ liệu lớn, chẳng hạn như hình học phức tạp hoặc các biểu đồ cảnh lớn khác đại diện cho đạo cụ hoặc ký tự.

Thay vào đó, chúng tôi sẽ chuyển đổi các tham chiếu tài sản này thành tải trọng, vì vậy chúng tôi có thể chọn trì hoãn việc tải các quân cờ.

Nếu chúng ta chọn không tải tải trọng, cảnh của chúng ta sẽ trống rỗng khi mở ban đầu.

Khi chúng tôi cho phép tải tải trọng, chúng tôi có thể xem lại tất cả các phần của mình.

Bây giờ chúng ta đã có quân cờ của mình trong cảnh, chúng ta có thể bắt đầu đặt chúng lên bàn cờ.

Chúng ta có thể làm điều này trên một lớp khác bằng cách sử dụng khái niệm phân lớp USD.

Với việc xếp lớp, các lớp có thể được xếp chồng lên nhau, tương tự như các gói phần mềm chỉnh sửa hình ảnh phổ biến như Photoshop hoặc Affinity Photo.

Các nguyên tắc trong một lớp ở trên một lớp khác được coi là mạnh hơn và có thể thêm hoặc ghi đè dữ liệu ở các lớp thấp hơn.

Như bạn có thể thấy, các mảnh hiện đang ở sai vị trí của chúng Nhưng đừng lo lắng, chúng ta có thể sử dụng phân lớp để thực hiện các sửa đổi không phá hủy đối với các lớp khác.

Điều này là hoàn hảo để chúng tôi di chuyển các mảnh của mình đến đúng vị trí mà không cần chỉnh sửa lớp danh mục của chúng tôi.

Hãy xem điều này có thể được thực hiện như thế nào Chúng ta bắt đầu bằng cách tạo ra một giai đoạn mới gọi là ChessSet sẽ là cảnh cuối cùng của chúng ta.

Nó chứa siêu dữ liệu được gọi là "lớp con" ở đầu lớp.

Ở đây chúng tôi mang đến các tác phẩm của chúng tôi với lớp danh mục.

Tiếp theo, chúng tôi tạo ra một lớp mới - Layout.usda - mà chúng tôi sử dụng để di chuyển các phần của mình.

Lớp bố cục này sẽ chứa các vị trí của các quân cờ của chúng tôi.

Hãy ghi đè vị trí của các tác phẩm của chúng ta trong cảnh.

Chúng ta sẽ bắt đầu với Pawn_01.

Chúng tôi sửa đổi vị trí của tài sản cầm đồ bằng cách thay đổi các thuộc tính dịch của nó.

Hãy xem điều này cập nhật cảnh của chúng ta như thế nào.

Ở đây chúng tôi đã đặt cờ vua một lần nữa mà không có lớp bố cục của chúng tôi, vì vậy con tốt vẫn ở vị trí ban đầu.

Khi chúng tôi thêm lớp bố cục của mình, con tốt đã được chuyển đến vị trí dự kiến trên bàn cờ.

Hãy làm tương tự cho các mảnh khác và di chuyển chúng đến đúng vị trí của chúng.

Chúng tôi đặt các quân cờ khác của mình giống như cách chúng tôi đặt con tốt.

Đây là cách chúng tôi đã làm điều đó cho Pawn_02.

Và sau đó một lần nữa cho Pawn_03, vân vân.

Chúng tôi đã hoàn thành các thay đổi đối với lớp bố cục, và bây giờ chúng tôi đã đặt các quân cờ ở đúng vị trí của chúng.

Chúng tôi đã xây dựng một nửa bộ cờ vua của mình.

Chúng tôi sử dụng các lớp để đưa tài sản của mình vào với lớp danh mục và sử dụng ghi đè để đặt chúng lên bảng với lớp bố cục.

Tất cả những gì còn lại là thiết lập các quân cờ cho phía đối thủ.

Một điều cần lưu ý là các quân cờ của đối thủ của chúng ta có màu khác.

Thay vì tạo một bộ tài sản mới, chúng ta có thể cập nhật tài sản quân cờ của mình bằng cách sử dụng một khái niệm USD khác, variantSets.

VariantSets cho phép hoán đổi năng động các lựa chọn thay thế rời rạc trên sân khấu.

Các biến thể có trong một biến thể Bộ có thể là các vật liệu, hình học khác nhau hoặc bất kỳ thứ gì có thể được biểu diễn bằng USD.

Chuyển đổi giữa các biến thể khác nhau trên một sân khấu là không phá hủy.

Chúng tôi sẽ thiết lập các bộ biến thể để chuyển đổi giữa các vật liệu khác nhau cho các quân cờ.

Trong tài sản Cầm đồ của chúng tôi, chúng tôi thêm một biến thể Bộ được gọi là "màu sắc" để chúng tôi có thể chuyển đổi giữa các màu khác nhau cho con tốt.

Bây giờ chúng tôi thêm hai biến thể vào biến thể của mình Bộ: Tối sử dụng vật liệu tối và Ánh sáng sử dụng vật liệu sáng.

Cuối cùng, chúng tôi đặt biến thể mặc định để chỉ định cái nào sẽ sử dụng khi chúng tôi tải con tốt lên sân khấu.

Bây giờ, chúng tôi đã trở lại lớp danh mục của mình.

Chúng tôi đã thiết lập tất cả các mảnh trên bảng, nhưng tất cả chúng đều sử dụng vật liệu nhẹ.

Đó là bởi vì biến thể mặc định được đặt thành vật liệu nhẹ.

Hãy thay đổi biến thể của một trong những con tốt thành vật liệu tối.

Chúng tôi đặt biến thể thành Dark.

Chúng ta có thể thấy rằng một trong những con tốt ở phía đối phương bây giờ đã tối.

Hãy áp dụng thay đổi này cho các phần khác.

Cuối cùng, chúng tôi đã hoàn thành bộ cờ vua của mình.

Có một khái niệm USD nữa mà chúng ta có thể sử dụng để tối ưu hóa cảnh của mình: tăng cường đồ thị cảnh.

Instancing đồ thị cảnh cho phép chúng tôi sử dụng lại các phần của biểu đồ cảnh trên sân khấu nhiều lần để thể hiện bất cứ thứ gì có chứa nhiều thứ như tán lá, đồ nội thất hoặc trong trường hợp của chúng tôi là quân cờ.

Sử dụng biểu đồ cảnh instancing cung cấp cả cải tiến bộ nhớ và hiệu suất trong các ứng dụng của bạn.

Để sử dụng instancing đồ thị cảnh, chúng ta có thể chỉ định siêu dữ liệu phiên bản trên prim hoặc một phần của biểu đồ cảnh.

Tất cả các nguyên tố được ví dụ là ứng cử viên để chia sẻ cùng một biểu đồ cảnh.

Hãy thêm hỗ trợ cho cuộc dạo đầu trong cảnh của chúng ta.

Trong tệp danh mục của chúng tôi, chúng tôi sẽ thêm siêu dữ liệu "instanceable" vào số nguyên tố quân cờ và đặt giá trị thành true.

Bằng cách thêm siêu dữ liệu này, USD giờ đây sẽ coi các tài sản này là các số nguyên tố có khả năng có thể sử dụng được chia sẻ cùng một dữ liệu, thay vì sao chép dữ liệu cho mỗi số nguyên tố.

Bộ cờ vua của chúng tôi trông vẫn giống nhau nhưng bây giờ nó hiệu suất hơn và tiết kiệm bộ nhớ hơn.

Và với điều này, chúng ta đã hoàn thành bộ cờ vua của mình!

Nó trông rất tuyệt, và chúng tôi đã thực hiện rất nhiều tính năng của USD.

Phân lớp, tham chiếu, tải trọng và bộ biến thể chỉ là một số loại thành phần mà USD xác định.

Có một thứ tự sức mạnh cụ thể trong đó USD soạn biểu đồ cảnh để đảm bảo biểu diễn cảnh nhất quán.

Thông tin thêm về thành phần và từ viết tắt thứ tự LIVRPS có thể được tìm hiểu trong tài liệu USD của Pixar.

Trong phiên này, chúng tôi đã nói về những gì bên trong các tệp USD.

Bây giờ hãy nói về bản thân các tệp và cách chúng có thể xuất hiện trên đĩa.

Có một số loại tệp USD.

Các tệp USD chứa văn bản ASCII có thể đọc được có phần mở rộng .usda.

Chúng tôi đã sử dụng các tệp này trong suốt phiên này.

Một biểu diễn nhị phân nhỏ gọn và hiệu quả hơn là định dạng thùng, có phần mở rộng .usdc.

Bạn cũng có thể có các tệp có phần mở rộng .usd.

Đây có thể là văn bản ASCII hoặc tệp thùng nhị phân.

Cuối cùng, USD có định dạng đóng gói có thể chứa nhiều tệp USD và các tệp phụ trợ liên quan, như kết cấu, trong một kho lưu trữ zip không nén với phần mở rộng .usdz.

Hôm nay chúng ta đã tìm hiểu về một số khái niệm cơ bản của USD: giai đoạn, lớp, nguyên tố, lược đồ, thuộc tính và siêu dữ liệu.

Chúng tôi đã sử dụng các khái niệm này để xây dựng một bộ cờ vua và sử dụng tham chiếu, tải trọng, defaultPrim, đường dẫn chính, phân lớp và instancing.

Và cuối cùng, chúng tôi đã thảo luận về các định dạng tệp USD khác nhau: .usda, .usdc, .usd và .usdz.

Chúng tôi khuyến khích bạn tìm hiểu thêm về các khái niệm này với tài liệu USD của Pixar và tận dụng tối đa khả năng của USD trong các ứng dụng của bạn.

Cảm ơn bạn!

♪