110345

♪ Nhạc hip-hop nhạc cụ êm dịu ♪

♪

Này, tên tôi là Daniel, và tôi thuộc nhóm Kiến trúc và Kỹ thuật An ninh.

Tôi sẽ cung cấp cho bạn thông tin cập nhật về Bảo mật Điểm cuối.

Endpoint Security là một API mà chúng tôi cung cấp, vì vậy bạn có thể xây dựng các sản phẩm bảo mật cho Mac.

Nó là một API C, cung cấp luồng sự kiện bảo mật phong phú cho bên thứ ba chống vi-rút, Phát hiện và Phản hồi Điểm cuối và các giải pháp ngăn chặn rò rỉ dữ liệu.

Lần đầu tiên chúng tôi giới thiệu Endpoint Security trong macOS Catalina để thay thế cho KAuth KPI không được chấp nhận, MAC Kernel Framework không được hỗ trợ và đường mòn kiểm toán OpenBSM cũng bị phản đối.

Bằng cách cung cấp chức năng này trong Endpoint Security API, chúng tôi đã loại bỏ nhu cầu bạn phải phát triển các tiện ích mở rộng hạt nhân.

Sự ra đời của Endpoint Security đã là một thành công vang dội.

Chúng tôi rất vui mừng với phản hồi tích cực mà chúng tôi nhận được và với các sản phẩm bảo mật mà nó đang cho phép.

Để được giới thiệu về Bảo mật Điểm cuối, hãy tham khảo phiên WWDC 2020 "Xây dựng ứng dụng Bảo mật Điểm cuối".

Trong phiên này, chúng tôi sẽ đề cập đến các sự kiện mới được thêm vào macOS Ventura, cải tiến chức năng tắt tiếng, cũng như một tiện ích mới được gọi là eslogger.

Hãy bắt đầu với những sự kiện mới.

Kể từ macOS Monterey, Endpoint Security hỗ trợ hơn một trăm loại sự kiện.

Cho đến nay, những sự kiện này tập trung vào các sự kiện quan trọng xảy ra trong hạt nhân, chẳng hạn như tạo ra một quy trình hoặc mở một tệp.

Trong macOS Ventura, chúng tôi đang mở rộng tập hợp các sự kiện có thể quan sát được để bao gồm các sự kiện liên quan đến bảo mật xảy ra trong không gian người dùng.

Cụ thể, chúng tôi đang thêm khả năng hiển thị vào xác thực, đăng nhập và đăng xuất, và XProtect của Gatekeeper.

Sự kiện xác thực mới bao gồm tình huống người dùng xác thực với hệ điều hành.

Điều này bao gồm đăng nhập vào tài khoản người dùng cục bộ, nhưng cũng xác thực ở những nơi khác, chẳng hạn như ủy quyền hoạt động với tư cách là quản trị viên.

Những sự kiện này thường được sử dụng bởi các sản phẩm bảo mật muốn quan sát các mẫu truy cập đáng ngờ.

Trước đây, nếu bạn muốn quan sát các sự kiện xác thực, bạn vẫn phải dựa vào dấu vết kiểm toán OpenBSM bị phản đối để làm như vậy; điều này bây giờ sẽ không còn cần thiết nữa.

Và so với các đối tác kiểm toán của họ, những sự kiện mới này giàu thông tin hơn nhiều và cũng cung cấp khả năng hiển thị Tự động mở khóa bằng Apple Watch, không có sẵn trong kiểm toán.

Tương tự như vậy, chúng tôi đang thêm khả năng hiển thị vào các phiên người dùng.

Các sự kiện đăng nhập bao gồm các tình huống mà ai đó hoặc thứ gì đó đăng nhập vào hệ thống, cục bộ tại bảng điều khiển hoặc từ xa qua một trong các phương thức truy cập từ xa được hỗ trợ.

Những sự kiện này vượt xa đáng kể những gì có sẵn với đường mòn kiểm toán OpenBSM.

Chúng cho phép bạn có được khả năng hiển thị toàn diện hơn về quyền truy cập vào các hệ thống, bao gồm cả chuyển động ngang qua các đội tàu doanh nghiệp.

Một phần nhiệm vụ của Gatekeeper là phát hiện và chặn phần mềm độc hại đã biết.

Bắt đầu với macOS Ventura, Endpoint Security sẽ cung cấp khả năng hiển thị cả việc phát hiện phần mềm độc hại và các hành động được thực hiện để ngăn chặn và loại bỏ phần mềm độc hại.

Thông tin này trước đây không có sẵn theo cách có cấu trúc.

Nó hiện có sẵn thông qua Endpoint Security API.

Chúng tôi hy vọng rằng với những bổ sung này, hầu hết các khách hàng Bảo mật Điểm cuối không còn cần phải dựa vào dấu vết kiểm toán OpenBSM bị phản đối nữa.

Dấu vết kiểm toán đã bị phản đối kể từ macOS Big Sur và sẽ bị xóa trong phiên bản macOS trong tương lai.

Hãy chuyển sang tắt tiếng.

Kể từ macOS Catalina, chúng tôi đã hỗ trợ các quy trình tắt tiếng bằng mã thông báo kiểm tra hoặc đường dẫn hình ảnh thực thi.

Tắt tiếng là một công cụ quan trọng mà chúng tôi cung cấp cho bạn để ngăn chặn bế tắc, treo cổ và hết thời gian chờ của cơ quan giám sát và để quản lý tác động hiệu suất của các giải pháp của bạn dựa trên Bảo mật điểm cuối.

Trong macOS Monterey năm ngoái, chúng tôi bắt đầu giải quyết các nguyên nhân thường xuyên gây ra sự không ổn định hệ thống bằng cách tắt tiếng một số loại sự kiện cho một tập hợp nhỏ các tệp thực thi theo mặc định.

Bạn có thể tự do bật tiếng những thứ đó, nhưng chúng tôi khuyên bạn nên tắt tiếng chúng vì lợi ích của sự ổn định của hệ thống.

Trong macOS Ventura, chúng tôi đang tiến thêm một bước nữa bằng cách giới thiệu tắt tiếng dựa trên đường dẫn mục tiêu.

Đối với nhiều trường hợp sử dụng trong thế giới thực, điều này cho phép độ chính xác giống như dao mổ hơn là tắt tiếng.

Bây giờ bạn có thể tắt tiếng các sự kiện tệp liên quan đến các đường dẫn hoặc tiền tố đường dẫn nhất định mà ứng dụng của bạn không quan tâm đến việc nhận.

Điều này cho thấy cách bạn có thể tắt tiếng tất cả các sự kiện có đường dẫn đích trong /var/log khi bạn không quan tâm đến các sự kiện cho các tệp nhật ký.

Ví dụ thứ hai cho thấy cách bạn có thể sử dụng es_mute_path_events để tắt tiếng chỉ ghi các sự kiện vào một tệp duy nhất, chẳng hạn như /dev/null.

Và hơn thế nữa, chúng tôi thậm chí còn giới thiệu khả năng đảo ngược logic tắt tiếng.

Thay vì ngăn chặn các sự kiện dựa trên quy trình được chỉ định, đường dẫn thực thi hoặc đường dẫn đích, giờ đây chúng tôi cho phép bạn đảo ngược bất kỳ loại tắt tiếng nào trong ba loại này.

Một cách hiệu quả, giờ đây bạn có thể chọn các quy trình, đường dẫn thực thi hoặc đường dẫn mục tiêu mà bạn quan tâm để chỉ nhận các sự kiện khớp - thay vì không khớp - bất kỳ thứ gì bạn đã tắt tiếng.

Ví dụ, điều này bây giờ cho phép bạn chỉ chọn các sự kiện tệp cho các vị trí kiên trì nhất định.

Đây là cách bạn sẽ sử dụng es_invert_muting để đảo ngược việc tắt tiếng cho các đường dẫn đích.

Sau đó, bạn sẽ tiến hành xóa các đường dẫn mục tiêu hiện có trước đó khỏi bộ tắt tiếng và sau đó chỉ chọn các sự kiện có tiền tố đường dẫn đích mà bạn quan tâm.

Chúng tôi hy vọng điều này sẽ cho phép các chiến lược tắt tiếng được cải thiện nhiều và cuối cùng, giúp việc cung cấp trải nghiệm người dùng tuyệt vời với các sản phẩm dựa trên Bảo mật điểm cuối trở nên dễ dàng hơn.

Và cuối cùng, chúng tôi đang giới thiệu eslogger.

Chúng tôi đã có nhiều yêu cầu về khả năng cung cấp các sự kiện Bảo mật Điểm cuối mà không cần phải viết một ứng dụng khách gốc.

Bắt đầu từ macOS Ventura, bạn sẽ có thể khai thác sức mạnh của Bảo mật Điểm cuối thông qua tiện ích dòng lệnh mang lại sự xem xét sâu sắc về hệ điều hành.

Eslogger khai thác luồng sự kiện Bảo mật Điểm cuối cho các sự kiện cụ thể và phát ra dữ liệu sự kiện được định dạng JSON đến đầu ra tiêu chuẩn hoặc vào hệ thống ghi nhật ký thống nhất.

Dữ liệu được cấu trúc giống như đại diện C mà khách hàng bản địa sử dụng.

Eslogger hỗ trợ tất cả 80 sự kiện THÔNG BÁO mà Endpoint Security hỗ trợ trong macOS Ventura.

Chúng tôi hy vọng eslogger sẽ hữu ích không chỉ cho các kỹ sư làm việc trên các máy khách Endpoint Security, mà còn cho các nhà phân tích bảo mật và các nhà thực hành bảo mật khác, những người cần khả năng hiển thị các sự kiện liên quan đến bảo mật trên macOS.

Eslogger đi kèm với hệ điều hành và đã được hưởng Bảo mật Điểm cuối.

Giống như tất cả các máy khách Endpoint Security, eslogger phải được chạy dưới dạng siêu người dùng và yêu cầu người dùng phải ủy quyền quy trình chịu trách nhiệm cho Truy cập Toàn bộ Đĩa, chẳng hạn như Terminal.app hoặc SSH.

Eslogger không có ý định được sử dụng bởi các ứng dụng.

Đầu ra của nó có thể thay đổi trong các bản cập nhật phần mềm.

Nó không có nghĩa là cung cấp các đặc tính hiệu suất giống nhau, cũng không phải cùng một bộ tính năng, như giao tiếp tự nhiên với API Bảo mật Điểm cuối.

Các ứng dụng sẽ tiếp tục giao tiếp tự nhiên.

Với điều đó, hãy sử dụng eslogger để khám phá một số sự kiện mới.

Tôi sẽ sử dụng eslogger để ghi lại sự bắt đầu và kết thúc của một phiên SSH bằng cách đăng ký các sự kiện openssh_login và _logout và chuyển hướng đầu ra đến một tệp.

Bây giờ trong tab khác này, tôi đang sử dụng SSH để đăng nhập cục bộ và đăng xuất lại.

Quay lại tab đầu tiên, tôi đang ngắt lời eslogger.

Chúng ta hãy xem xét dữ liệu sự kiện Bảo mật Điểm cuối ở dạng JSON thô của nó.

Rất có thể bạn sẽ có cách làm việc yêu thích của riêng mình với dữ liệu JSON.

Ở đây, tôi sẽ sử dụng jq để kiểm tra các sự kiện sâu hơn.

Đây là rất nhiều thông tin.

Tôi sẽ đi sâu vào một số lĩnh vực thú vị.

Giống như tất cả các sự kiện Bảo mật Điểm cuối, chúng tôi có thông tin về quy trình phát ra chúng.

Chúng ta có thể thấy rằng cả hai sự kiện đều được phát ra bởi trình nền SSH.

Ví dụ, chúng tôi cũng có thể kiểm tra mã thông báo kiểm toán của nó để thu thập PID của quy trình phát ra các sự kiện.

Và cuối cùng, chúng ta hãy xem xét các lĩnh vực cụ thể của sự kiện này.

Chúng ta có thể thấy rằng đây là một đăng nhập SSH thành công vào tài khoản người dùng của tôi, tiếp theo là đăng xuất.

Tôi thích cách tôi có thể hiển thị các sự kiện Bảo mật Điểm cuối theo cách này, cho dù tôi muốn quan sát hành vi phần mềm độc hại hay chỉ nhanh chóng tạo mẫu phương pháp phát hiện.

Chúng tôi mong muốn thấy các giải pháp bảo mật của bạn tận dụng các sự kiện mới cũng như khả năng tắt tiếng được cải thiện.

Cảm ơn vì đã tham gia cùng chúng tôi tại WWDC.

♪