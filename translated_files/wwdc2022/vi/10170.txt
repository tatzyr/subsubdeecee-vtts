10170

♪ (Nhạc hip-hop nhạc cụ Melo) ♪

♪

Xin chào, tên tôi là Michael Sumner.

Tôi là một kỹ sư phần mềm làm việc trên Siri và App Intents.

Trong phiên này, tôi muốn nói chuyện với bạn về việc tạo các phím tắt ứng dụng cho ứng dụng của bạn, sử dụng khung Ý định ứng dụng mới.

Tôi sẽ bắt đầu với một cái nhìn tổng quan về Phím tắt Ứng dụng là gì và chúng liên quan đến Ý định Ứng dụng như thế nào.

Sau đó, tôi sẽ hướng dẫn tạo một phím tắt ứng dụng trong Swift và thêm một tham số.

Cuối cùng, tôi sẽ đề cập đến cách làm cho phím tắt ứng dụng của bạn có thể phát hiện được, để người dùng có thể hưởng lợi từ công việc khó khăn của bạn.

Hãy bắt đầu với khung App Intents và App Shortcuts.

Mọi người sử dụng các phím tắt để tạo quy trình làm việc nhiều bước với các ứng dụng của bạn có thể được sử dụng từ ứng dụng Phím tắt và từ Siri.

Cho đến bây giờ, trước tiên ai đó phải thiết lập một phím tắt thông qua nút Thêm vào Siri hoặc ứng dụng Phím tắt trước khi họ có thể sử dụng ý định của bạn.

Chúng tôi rất vui mừng được giới thiệu App Shortcuts, không yêu cầu thiết lập người dùng.

Điều này giúp mọi người được hưởng lợi từ các phím tắt của bạn dễ dàng hơn bao giờ hết.

Bằng cách tích hợp với Phím tắt ứng dụng, ý định từ ứng dụng của bạn sẽ có sẵn ngay khi ứng dụng của bạn được cài đặt.

Điều này giúp ai đó dễ dàng khám phá và sử dụng chức năng của ứng dụng của bạn.

Họ không còn cần phải truy cập ứng dụng Phím tắt hoặc sử dụng nút Thêm vào Siri để thiết lập bất cứ thứ gì.

Phím tắt ứng dụng, giống như các phím tắt do người dùng tạo, có thể được chạy từ ứng dụng Phím tắt, Spotlight và Siri.

Điều này cung cấp cho mọi người nhiều cách để khám phá và tương tác với ứng dụng của bạn từ nhiều nơi khác nhau trong hệ thống.

Ví dụ, khi tìm kiếm trong Spotlight, phím tắt ứng dụng của bạn sẽ được hiển thị ngay trong kết quả tìm kiếm để dễ dàng truy cập.

Bằng cách triển khai Phím tắt ứng dụng, người dùng của bạn sẽ có thể tương tác với ứng dụng của bạn trong các tương tác nhanh chóng, nhẹ nhàng giúp họ dễ dàng hoàn thành nhiệm vụ và đang trên con đường của mình.

Nhóm của tôi đang làm việc trên một ứng dụng - Thiền - giúp người dùng thiền bằng cách hướng dẫn họ thông qua một bộ lời nhắc âm thanh và âm thanh để giúp họ tập trung vào những gì quan trọng.

Hôm nay, để bắt đầu thiền, người dùng phải khởi chạy ứng dụng, đăng nhập và tìm phiên thiền mà họ muốn chạy.

Bằng cách tích hợp với Phím tắt ứng dụng, người dùng của tôi có thể nhanh chóng truy cập các tính năng này từ mọi nơi chỉ bằng cách hỏi Siri.

Và bằng cách bắt đầu một phiên nhanh hơn, người dùng có thể tích hợp thiền vào thói quen hàng ngày của họ, vào buổi sáng trước khi làm việc hoặc buổi tối để giúp thư giãn sau một ngày dài.

Được rồi, chúng ta hãy đi sâu vào mã cần thiết để tạo Ý định ứng dụng và biến nó thành lối tắt ứng dụng.

Không giống như các phím tắt trước đây, Phím tắt ứng dụng được xây dựng với khung Ý định ứng dụng mới.

App Intents là một khuôn khổ mới, chỉ dành cho Swift được xây dựng từ đầu để giúp xây dựng ý định tuyệt vời nhanh hơn và dễ dàng hơn.

Với App Intents, mọi thứ được xác định ngay trong mã nguồn Swift của bạn, thay vì một tệp siêu dữ liệu riêng biệt.

Điều này loại bỏ bất kỳ bước tạo mã nào và cho phép bạn tập trung mà không cần chuyển đổi ngữ cảnh giữa trình chỉnh sửa nguồn và trình chỉnh sửa siêu dữ liệu.

Chúng cũng dễ dàng hơn để xem xét mã hóa và giải quyết xung đột hợp nhất.

Để xây dựng App Shortcuts, bạn sẽ cần viết một AppShortcutsProvider liệt kê các cụm từ và siêu dữ liệu khác cần thiết để biến App Intent của bạn thành một phím tắt chính thức.

Và lưu ý rằng vì những thứ này được thiết lập mà không có bất kỳ tương tác nào của người dùng, bạn sẽ cần bao gồm tên ứng dụng của mình trong cụm từ kích hoạt.

Ý định được định nghĩa là các cấu trúc Swift, triển khai giao thức AppIntent.

Một ý định cơ bản chỉ có hai yêu cầu - một tiêu đề, được sử dụng để hiển thị ý định của bạn trong ứng dụng Phím tắt và một phương pháp được gọi là thực hiện.

Phương pháp thực hiện là nơi bạn chạy logic ý định của mình và trả về kết quả.

Ngoài ra, bạn có thể kích hoạt lời nhắc cho người dùng và chờ phản hồi của họ.

Với mục đích này, tôi sẽ bắt đầu buổi thiền mặc định bằng cách sử dụng Dịch vụ Thiền của ứng dụng.

Bởi vì phương thức thực hiện không đồng bộ, tôi có thể chạy mã không đồng bộ để bắt đầu phiên của mình.

Khi phiên đã bắt đầu, tôi sẽ trả lại một hộp thoại được hiển thị cho người dùng.

Và nếu ứng dụng của bạn được bản địa hóa, bạn sẽ muốn bản địa hóa chuỗi này trong tất cả các ngôn ngữ của mình.

Cho đến nay, với những gì tôi đã xây dựng, StartMeditationIntent sẽ xuất hiện trong ứng dụng Phím tắt khi tạo một phím tắt.

Một người dùng có động lực có thể thực hiện ý định này và tạo một phím tắt sẽ bắt đầu một phiên.

Trong phím tắt này, tôi cũng đã thêm ý định thứ hai để bật Tiêu điểm.

Theo mặc định, Ý định ứng dụng của tôi được hiển thị bằng cách sử dụng tiêu đề mà tôi đã chỉ định trong mã nguồn của mình.

Để tùy chỉnh kết xuất cho hành động của bạn, hãy đảm bảo thêm một bản tóm tắt tham số vào Ý định ứng dụng của bạn.

Tóm tắt tham số cho phép bạn tùy chỉnh giao diện ý định của mình, cũng như hiển thị các giá trị nội tuyến.

Tuy nhiên, ý định này hoạt động tuyệt vời như một lối tắt.

Lý tưởng nhất, ai đó sẽ có thể thực hiện ý định của tôi mà không cần phải viết một phím tắt nào cả.

Bằng cách tạo một phím tắt ứng dụng, tôi có thể thực hiện bước thiết lập này thay mặt cho người dùng, vì vậy họ có thể bắt đầu sử dụng ý định của tôi ngay sau khi ứng dụng được cài đặt.

Bây giờ tôi đã viết một ý định, tôi sẽ tạo một phím tắt ứng dụng cho nó.

Tương tự như một ý định, Phím tắt ứng dụng được xác định trong mã Swift, bằng cách triển khai giao thức AppShortcutsProvider.

Để triển khai giao thức, tôi sẽ chỉ cần tạo một getter duy nhất trả về tất cả các phím tắt ứng dụng mà tôi muốn thiết lập cho người dùng.

Lưu ý rằng tổng cộng, ứng dụng của bạn có thể có tối đa 10 phím tắt ứng dụng.

Tuy nhiên, hầu hết các ứng dụng chỉ cần một số ít.

Vì vậy, tôi sẽ tạo một AppShortcut duy nhất cho StartMeditationIntent của mình.

Để bắt đầu, tôi sẽ chuyển một ví dụ về ý định của mình.

Nếu trình khởi tạo ý định của tôi lấy các tham số, tôi có thể chỉ định các giá trị ở đây.

Thứ hai, tôi sẽ tạo một mảng các cụm từ nói sẽ gọi AppShortcut của tôi từ Siri.

Bạn sẽ nhận thấy rằng thay vì viết tên ứng dụng của tôi trực tiếp vào chuỗi, tôi đã sử dụng mã thông báo .applicationName đặc biệt.

Điều này cho phép Siri không chỉ chèn tên chính của ứng dụng của tôi mà còn bất kỳ từ đồng nghĩa tên ứng dụng nào mà tôi đã định cấu hình.

Bởi vì người dùng có thể nói các cụm từ khác nhau để bắt đầu thiền định, tôi sẽ cung cấp thêm một vài cụm từ thay thế ở đây.

Nếu ứng dụng của bạn được bản địa hóa, bạn cũng sẽ cần bản địa hóa các cụm từ này.

Tuyệt vời. Vì vậy, bây giờ khi ai đó muốn hòa giải, họ chỉ cần ở lại với Siri, "Bắt đầu thiền."

Siri sẽ gọi StartMeditationIntent và nói hộp thoại mà tôi đã trả về.

Ngoài ra, nếu ai đó tìm kiếm ứng dụng của tôi trong Spotlight, họ sẽ thấy Phím tắt ứng dụng đầu tiên mà tôi đã liệt kê trong mã của mình.

Khi người dùng nhấn vào kết quả, phím tắt sẽ chạy ngay lập tức mà không cần khởi chạy ứng dụng.

Điều quan trọng cần lưu ý là nếu ý định của bạn kích hoạt khởi chạy ứng dụng, nó sẽ không được hiển thị trong Spotlight.

Vì vậy, chỉ với một lượng mã rất nhỏ, giờ đây tôi đã làm cho người dùng của tôi thiền với ứng dụng của tôi trở nên đơn giản hơn rất nhiều.

Nhưng ngay bây giờ, Siri hiển thị chế độ xem mặc định bất cứ khi nào chạy ý định của tôi.

Điều này ổn, nhưng tôi thực sự muốn hiển thị cho người dùng nhiều thông tin hơn khi họ chạy phím tắt ứng dụng của tôi.

Để làm điều này, tôi sẽ cần triển khai chế độ xem tùy chỉnh mà Siri có thể hiển thị bất cứ khi nào ý định của tôi được chạy.

Các chế độ xem trong khung App Intents được xây dựng bằng SwiftUI và tận dụng công nghệ xem giống như các tiện ích.

Điều này có nghĩa là bạn, với tư cách là một nhà phát triển, không cần phải xây dựng một tiện ích mở rộng giao diện người dùng riêng biệt cho chế độ xem tùy chỉnh của mình.

Thay vào đó, bạn có thể chỉ cần trả lại chế độ xem khi chạy ý định của mình.

Điều quan trọng là phải suy nghĩ về những hạn chế cụ thể mà điều này mang lại cho quan điểm của bạn.

Cũng giống như các tiện ích, chế độ xem App Intent tùy chỉnh không thể bao gồm những thứ như tương tác hoặc hoạt ảnh.

Đảm bảo tính đến điều này khi thiết kế giao diện người dùng của bạn.

App Intents hỗ trợ hiển thị giao diện người dùng tùy chỉnh ở ba giai đoạn: xác nhận giá trị, xác nhận ý định và sau khi ý định kết thúc.

Đối với ứng dụng của tôi, tôi sẽ trả lại chế độ xem tùy chỉnh khi kết thúc ý định của mình.

Nếu bạn đang sử dụng những lời nhắc khác này, hãy chắc chắn suy nghĩ về cách bạn có thể tích hợp giao diện người dùng tùy chỉnh ở các bước đó.

Cuối cùng, như tôi đã đề cập, việc hiển thị giao diện người dùng tùy chỉnh rất dễ dàng.

Bạn chỉ cần trả lại quan điểm của mình từ ý định của mình.

Được rồi, đã đến lúc nhảy vào một số mã.

Thêm chế độ xem tùy chỉnh thật dễ dàng.

Như tôi đã đề cập, tôi sẽ chỉ trả lại chế độ xem cùng với hộp thoại của mình.

Khung App Intents sẽ đảm nhận việc trình bày quan điểm của tôi bên trong đoạn mã Siri.

Hãy nhớ rằng các chế độ xem của bạn sẽ được hiển thị cùng với các chế độ xem Siri khác, như tiêu đề đoạn mã hoặc các nút xác nhận.

Vì vậy, bạn sẽ muốn thiết kế đoạn mã của mình cảm thấy như ở nhà bên trong Siri.

Tiếp theo, hãy kiểm tra cách tôi có thể mở rộng lối tắt ứng dụng để bao gồm các tham số.

Trong lần thực hiện trước đây của tôi, tôi đã chọn bắt đầu buổi thiền mặc định.

Nhưng ứng dụng của tôi bao gồm nhiều loại phiên tuyệt vời và người dùng sẽ muốn bắt đầu một phiên cụ thể mà họ có trong đầu.

Lý tưởng nhất, người dùng của tôi sẽ có thể chỉ định phiên họ muốn bắt đầu khi chạy ý định của tôi.

Để hỗ trợ các trường hợp sử dụng này, tôi sẽ cần mở rộng ý định của mình bằng cách thêm một tham số ghi lại phiên mà người dùng muốn chạy.

Để thêm một tham số, trước tiên tôi cần xác định loại của tham số.

Tôi sẽ tạo một cấu trúc MeditationSession có thông tin liên quan cho một phiên.

Tôi sẽ bao gồm một cái tên, và tôi sẽ cung cấp cho nó một trường định danh, có thể là UUID.

Để sử dụng cấu trúc này làm tham số cho ý định của mình, tôi cũng cần triển khai giao thức AppEntity.

Triển khai giao thức AppEntity cho khung App Intents về loại của tôi và cho phép tôi chỉ định thông tin bổ sung, như cách thực thể được hiển thị.

Giao thức thực thể yêu cầu loại của tôi có một mã định danh mà tôi đã cung cấp.

Tôi cũng có thể sử dụng các loại khác, như số nguyên hoặc chuỗi.

Tôi cũng cần cung cấp một số thông tin về cách hiển thị thực thể của mình.

Điều này sẽ được sử dụng trong ứng dụng Phím tắt và những nơi khác mà thực thể của tôi được hiển thị.

Cuối cùng, tôi cần kết nối một truy vấn mặc định.

Tôi sẽ gọi truy vấn của mình là MeditationSessionQuery, và tôi sẽ triển khai nó tiếp theo.

Để làm việc với thực thể của tôi, khung App Intents cần có khả năng tra cứu các thực thể của tôi dựa trên số nhận dạng của chúng.

Để thực hiện điều này, giao thức EntityQuery chỉ xác định một yêu cầu: một hàm nhận số nhận dạng và trả về các thực thể phù hợp.

Tôi sẽ triển khai chức năng này bằng cách tra cứu các phiên trong Trình quản lý phiên của mình.

Tiếp theo, tôi sẽ cập nhật StartMeditationIntent của mình để thêm một tham số.

Các thông số rất đơn giản; chúng chỉ là một thuộc tính bình thường trên cấu trúc của tôi.

Nhưng để nói với App Intents về tham số của tôi, tôi cũng cần thêm trình bao bọc thuộc tính @Parameter.

Trình bao bọc thuộc tính này cho phép App Intents biết rằng thuộc tính phiên là một phần trong ý định của tôi.

Tôi cũng có thể chỉ định siêu dữ liệu bổ sung trong trình bao bọc thuộc tính Tham số, như tên hiển thị.

Bây giờ tôi đã thêm một tham số vào ý định của mình, tôi cần hỏi người dùng họ muốn chạy phiên nào.

Khung App Intents có hỗ trợ mạnh mẽ để hỏi người dùng các câu hỏi tiếp theo để thu thập các giá trị cho các thông số ý định của tôi.

Những lời nhắc này sẽ được hiển thị ở bất cứ nơi nào ý định của tôi được chạy.

Khi chạy từ Siri, Siri sẽ nói ra các câu hỏi và yêu cầu người dùng nói câu trả lời.

Trong Spotlight và ứng dụng Phím tắt, người dùng sẽ được trình bày với cùng một lời nhắc trong giao diện người dùng điều khiển bằng cảm ứng.

App Intents hỗ trợ ba loại lời nhắc giá trị.

Định hướng yêu cầu người dùng chọn từ một danh sách cố định.

Định hướng rất tuyệt vời để trình bày cho người dùng khi bạn có một bộ tùy chọn cố định nhỏ cho một tham số trong ý định của mình.

Lời nhắc giá trị cho phép bạn yêu cầu người dùng cung cấp một giá trị mở.

Đây là những thứ tuyệt vời cho các loại như chuỗi hoặc số nguyên, có thể lấy bất kỳ giá trị nào.

Cuối cùng, xác nhận yêu cầu người dùng xác minh một giá trị cụ thể và có thể hữu ích nếu bạn muốn kiểm tra lại với người dùng rằng bạn hiểu ý định của họ.

Nhắc nhở các giá trị là một cách tuyệt vời để làm cho ý định linh hoạt hơn và cho phép bạn thu thập thêm thông tin từ người dùng.

Nhưng chúng cũng làm chậm cuộc trò chuyện và có thể làm người dùng thất vọng nếu bạn sử dụng chúng quá thường xuyên.

Để biết thêm thông tin chi tiết về việc thiết kế ý định tuyệt vời, hãy xem phiên có tiêu đề "Thiết kế lối tắt ứng dụng" từ Lynn.

Được rồi, bây giờ tôi đã thêm tham số phiên vào StartMeditationIntent, tôi sẽ tiếp tục và thêm logic vào phương pháp thực hiện của mình để nhắc nhở giá trị này.

Trong ứng dụng của tôi, tôi có một số lượng nhỏ các phiên cố định mà người dùng có thể chạy.

Nếu phiên chưa được chỉ định, tôi sẽ truy xuất danh sách từ Trình quản lý phiên của mình và trình bày định hướng cho người dùng.

Sử dụng biểu diễn hiển thị cho mỗi phiên của tôi, App Intents sẽ định dạng các phiên thành các mục danh sách và hiển thị chúng cho người dùng.

Khi người dùng chọn một cái, mặt hàng đã chọn sẽ được trả lại cho tôi.

Tôi sẽ chuyển phiên đã chọn cho Dịch vụ Thiền định của mình, phiên này sẽ bắt đầu phiên.

Sau đó tôi có thể trả lại một hộp thoại để cho người dùng biết rằng ý định đã bắt đầu.

Vì người dùng đã cung cấp một phiên, bạn nên đặt tên của phiên trong hộp thoại để người dùng biết rằng chúng tôi hiểu yêu cầu của họ.

Tuyệt vời, vì vậy bây giờ khi người dùng của tôi nói, "Bắt đầu Thiền", ứng dụng của tôi có thể nhắc người dùng về phiên cụ thể mà họ muốn chạy.

Tuy nhiên, như tôi đã đề cập trước đây, người dùng thích các tương tác Siri nhanh chóng và đi vào trọng tâm.

Lý tưởng nhất, tôi có thể để người dùng của mình nói với Siri phiên họ muốn chạy trong cụm từ đầu tiên, thay vì trong một câu hỏi tiếp theo.

Chà, tôi có tin tốt.

App Shortcuts có hỗ trợ mở rộng các cụm từ kích hoạt với các tham số được xác định trước.

Bằng cách triển khai các cụm từ được tham số hóa, ứng dụng của tôi có thể hỗ trợ các câu nói như "Bắt đầu thiền định êm dịu" hoặc "Bắt đầu thiền đi bộ".

Các tham số rất tuyệt vời khi bạn có một tập hợp cố định các giá trị tham số nổi tiếng mà bạn có thể chỉ định cho Siri trước thời hạn.

Đối với ứng dụng của tôi, tôi sẽ sử dụng tên phiên của mình.

Các thông số không dành cho các giá trị kết thúc mở.

Ví dụ, không thể thu thập một chuỗi tùy ý từ người dùng trong câu nói ban đầu.

Vì vậy, ứng dụng của tôi không thể hỗ trợ một cụm từ như "Tìm kiếm nhật ký của tôi cho X", trong đó X có thể là bất kỳ đầu vào nào từ người dùng.

Thay vào đó, các giá trị tham số được chỉ định trước thời hạn, khi ứng dụng của bạn đang chạy.

Hãy thực hiện một số cụm từ được tham số hóa.

Để triển khai các cụm từ được tham số hóa trong ứng dụng của mình, tôi cần thực hiện một vài thay đổi.

Đầu tiên, tôi sẽ cập nhật truy vấn cho SessionEntity của mình để triển khai phương thức suggestedResults() để trả về danh sách các thực thể cho phím tắt được tham số hóa của tôi.

Thứ hai, tôi sẽ cần thông báo cho khung App Intents khi danh sách SessionEntities có sẵn đã thay đổi.

Điều này cho phép khung App Intents tạo các cụm từ phím tắt mới để sử dụng trong Siri.

Tôi sẽ làm điều này bằng cách cập nhật lớp mô hình ứng dụng của mình để thông báo khung App Intents bất cứ khi nào danh sách phiên của tôi thay đổi.

Cuối cùng, tôi sẽ thêm một số cụm từ mới vào Phím tắt ứng dụng của mình để tham chiếu đến tham số phiên trên StartMeditationIntent của tôi.

Vì vậy, trước tiên, tôi sẽ cập nhật MeditationSessionQuery bằng cách triển khai chức năng Thực thể được đề xuất.

Khung App Intents sử dụng các phiên được trả về từ chức năng này để tạo các phím tắt được tham số hóa.

Điều quan trọng cần lưu ý là mặc dù phương pháp này là tùy chọn, nhưng nếu tôi không triển khai phương pháp này, tôi sẽ không nhận được bất kỳ phím tắt được tham số hóa nào cả.

Thứ hai, tôi sẽ cần cập nhật lớp mô hình ứng dụng của mình để thông báo cho khung App Intents bất cứ khi nào danh sách các phiên của tôi thay đổi.

Trong ứng dụng của tôi, tôi không thường xuyên xuất bản các loại phiên mới mà tôi tìm nạp từ máy chủ trong nền.

Tôi sẽ cập nhật SessionModel của mình để gọi phương thức updateAppShortcutParameters() bất cứ khi nào tôi nhận được các phiên mới.

Phương pháp này được cung cấp bởi khung App Intents; bạn không cần phải tự triển khai nó.

Khi được gọi, App Intents sẽ gọi truy vấn của thực thể của bạn để thu thập danh sách các tham số cho các cụm từ phím tắt của bạn.

Cuối cùng, tôi sẽ thêm các cụm từ mới cho Phím tắt ứng dụng của mình bao gồm đường dẫn khóa phiên theo ý định của tôi.

Khung App Intents sẽ kết hợp cụm từ này với tất cả các phiên được trả về từ truy vấn của tôi.

Văn bản được sử dụng cho mỗi giá trị được lấy từ thuộc tính tiêu đề trên biểu diễn hiển thị của SessionEntity.

Cũng giống như trước đây, tôi sẽ muốn bao gồm một vài cách khác nhau mà người dùng có thể diễn đạt Phím tắt ứng dụng của tôi.

Điều này đảm bảo trải nghiệm mượt mà hơn nếu người dùng không nhớ cụm từ ưa thích của bạn.

Được rồi, bây giờ tôi có một Phím tắt ứng dụng tuyệt vời, đầy đủ tính năng và tôi không thể chờ đợi người dùng của mình dùng thử.

Nhưng để điều đó xảy ra, tôi cần làm một số công việc để giúp người dùng khám phá Lối tắt mới của tôi.

Điều đầu tiên tôi muốn nói đến là chọn những cụm từ tuyệt vời.

Các cụm từ tuyệt vời cho Phím tắt Ứng dụng rất ngắn và đáng nhớ.

Người dùng sẽ có rất nhiều ứng dụng trên điện thoại của họ hỗ trợ Phím tắt ứng dụng; và trên thực tế, người dùng có thể gặp khó khăn trong việc nhớ chính xác cách diễn đạt các phím tắt của họ.

Vì vậy, nếu có thể, hãy giữ các cụm từ của bạn ngắn gọn và đi vào trọng tâm.

Dọc theo những dòng này, nếu tên ứng dụng của bạn có thể được sử dụng như một danh từ hoặc động từ, hãy cân nhắc sử dụng nó theo cách đó trong cụm từ của bạn.

Trong ứng dụng của tôi, tôi đã sử dụng Thiền như một danh từ, để cụm từ này có thể ngắn gọn và đáng nhớ.

Cuối cùng, từ đồng nghĩa tên ứng dụng có thể giúp ích rất nhiều cho người dùng của bạn.

Nếu người dùng gọi ứng dụng của bạn là thứ gì đó khác với tên hiển thị của ứng dụng, bạn sẽ muốn xem xét thêm một từ đồng nghĩa tên ứng dụng cho nó.

iOS 11 đã thêm hỗ trợ cho các từ đồng nghĩa tên ứng dụng.

Nếu bạn chưa tạo một cái, bây giờ có thể là thời điểm tuyệt vời để làm điều đó.

Điều tiếp theo tôi muốn nói đến là Mẹo Siri và liên kết Phím tắt.

Bởi vì Phím tắt Ứng dụng không yêu cầu bất kỳ thiết lập người dùng nào, khả năng khám phá là rất quan trọng để người dùng tìm và sử dụng Phím tắt Ứng dụng của bạn.

Với Phím tắt Ứng dụng, người dùng không còn cần nút Thêm vào Siri để thêm Phím tắt của bạn nữa.

Nó đã được thêm vào rồi!

Tuy nhiên, chúng tôi không muốn mất đi những lợi ích khả năng khám phá mà nút Thêm vào Siri cung cấp.

Với ý nghĩ đó, chúng tôi đã tạo ra một chế độ xem Mẹo Siri mới.

Chế độ xem này hoạt động tốt ở bất cứ nơi nào bạn có thể đã sử dụng nút Thêm vào Siri trong quá khứ.

Chế độ xem Mẹo có sẵn trong cả SwiftUI và UIKit.

Và chúng tôi đã cung cấp một số kiểu dáng để Mẹo trông tuyệt vời trong bất kỳ ứng dụng nào.

Mẹo Siri được đặt tốt nhất theo ngữ cảnh, khi chúng có liên quan đến nội dung trên màn hình.

Nếu người dùng vừa đặt hàng trong ứng dụng của bạn, hãy cân nhắc hiển thị Mẹo cho Phím tắt của bạn cung cấp trạng thái đơn hàng.

Mẹo Siri nên được đặt một cách chu đáo, khi bạn cảm thấy người dùng có khả năng tương tác với Phím tắt ứng dụng của bạn trong tương lai gần.

Mẹo Siri cũng hỗ trợ sa thải.

Chế độ xem bao gồm một nút loại bỏ và sẽ kích hoạt đóng tùy chỉnh trong mã của bạn khi được nhấn.

Bạn sẽ muốn xóa chế độ xem khỏi bố cục của mình và cân nhắc không hiển thị lại cho đến khi bạn cảm thấy nó có liên quan.

Cuối cùng, chúng tôi cũng đã bao gồm một ShortcutsLink mới sẽ khởi chạy vào danh sách các Shortcuts từ ứng dụng của bạn.

Yếu tố mới này rất tuyệt nếu ứng dụng của bạn có nhiều Phím tắt ứng dụng và bạn muốn cho phép người dùng khám phá tất cả chúng.

Bây giờ, điều tuyệt vời về Phím tắt ứng dụng là chúng có sẵn ngay sau khi ứng dụng của bạn được cài đặt.

Ngay cả trước khi ứng dụng được khởi chạy lần đầu tiên, người dùng có thể xem và chạy Phím tắt của bạn từ Spotlight, Siri và ứng dụng Phím tắt.

Bạn có thể cần phải tính đến điều này khi xây dựng Phím tắt ứng dụng của mình.

Ví dụ: nếu ứng dụng của bạn yêu cầu quy trình đăng nhập, người dùng có thể chưa đăng nhập trước khi chạy ý định của bạn.

Ý định của bạn sẽ thất bại một cách duyên dáng với một thông báo lỗi giải thích cho người dùng rằng họ cần đăng nhập.

Thứ hai, các cụm từ được tham số hóa cho Phím tắt Ứng dụng của bạn sẽ không khả dụng cho đến khi ứng dụng của bạn được khởi chạy và thông báo cho khung Ý định Ứng dụng rằng bạn có các giá trị tham số mới.

Nếu Phím tắt Ứng dụng của bạn không chứa bất kỳ cụm từ không được tham số hóa nào, người dùng sẽ không thấy Phím tắt Ứng dụng của bạn cho đến khi họ khởi chạy ứng dụng của bạn lần đầu tiên.

Bạn có thể cân nhắc thêm một vài cụm từ không được tham số hóa để tránh vấn đề này.

Ngoài ra, Siri đã thêm hỗ trợ cho các cụm từ như, "Tôi có thể làm gì ở đây?" Và "Tôi có thể làm gì với Thiền?"

Siri sẽ tự động thu thập và đề xuất bất kỳ cụm từ Phím tắt Ứng dụng nào và thay mặt bạn trình bày chúng.

Ứng dụng của bạn không cần phải làm bất cứ điều gì bổ sung để chức năng này hoạt động.

Cuối cùng, trong cả Siri và ứng dụng Phím tắt, thứ tự Hiển thị Phím tắt Ứng dụng của bạn được xác định bởi thứ tự mà bạn liệt kê Phím tắt Ứng dụng trong mã nguồn của mình.

Bạn sẽ muốn xem xét đặt các Phím tắt Ứng dụng tốt nhất và hữu ích nhất của mình lên hàng đầu, để chúng được chú ý nhiều nhất.

Tương tự, cụm từ đầu tiên bạn liệt kê trong mảng cụm từ sẽ được coi là cụm từ chính cho Phím tắt ứng dụng đó.

Cụm từ chính được sử dụng làm nhãn trên ô Phím tắt và nó được hiển thị khi người dùng yêu cầu Siri trợ giúp với ứng dụng của bạn.

Được rồi, chúng tôi đã đề cập rất nhiều về khung App Intents và App Shortcuts.

Tôi muốn để lại cho bạn hai suy nghĩ quan trọng.

Đầu tiên, Phím tắt ứng dụng giúp người dùng dễ dàng sử dụng ứng dụng của bạn từ mọi nơi trong hệ thống, vì vậy hãy nghĩ về các trường hợp sử dụng tốt nhất trong ứng dụng của bạn phù hợp với mô hình nhẹ hơn này.

Thứ hai, một khi bạn đã triển khai Phím tắt ứng dụng, người dùng sẽ không biết về nó trừ khi bạn nói với họ!

Hãy suy nghĩ kỹ về cách làm cho Phím tắt Ứng dụng của bạn có thể khám phá được.

Xem xét các địa điểm trong ứng dụng của bạn nơi bạn có thể hiển thị Mẹo Siri, cũng như các vị trí ngoài sản phẩm, như trang web hoặc đăng nhập trong cửa hàng của bạn.

Chúng tôi nóng lòng muốn xem tất cả các Phím tắt ứng dụng tuyệt vời mà bạn tạo với khung Ý định ứng dụng mới.

Để tìm hiểu sâu hơn về thiết kế, cũng như khuôn khổ Ý định ứng dụng, hãy chắc chắn kiểm tra các cuộc nói chuyện khác trong tuần này.

Cảm ơn, và chúc bạn có một WWDC tuyệt vời.

♪