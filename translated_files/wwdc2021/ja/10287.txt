10287

♪ベース音楽の演奏♪

♪

イリダ・マンス:こんにちは、WWDCへようこそ。

私はAppleソフトウェアチームの科学者であるIridaで、モーションエンジニアのSohumが参加します。

今日は、歩行の持久力と品質をよりよく理解できる2つの新しい機能を紹介します。

歩くことは重要な兆候です。

個人の歩き方は、全体的な健康と幸福について非常に有益です。

怪我からの回復を追跡し、転倒のリスクを評価し、老化プロセスを監視し、さらには死亡率を予測するために使用できます。

WWDC2020では、一日を通してあなたの歩行パターンに強力な洞察を提供する一連のモビリティ指標を導入しました。

昨年のセッション「ビヨンドカウントステップ」では、それらについてすべて学ぶことができます。

今日、私たちはこれらのメトリクスの1つであるApple Watchで利用可能な6分歩行メトリクスのアップデートを共有することに興奮しています。

新しい再キャリブレーションAPIを通じて、このメトリックを使用すると、健康の急激な変化をよりよく捉えることができます。

さらに、iPhoneで利用可能なウォーキング安定性機能というまったく新しいメトリックについて話します。

これら2つの指標の共通点は何ですか?

どちらも歩行の重要な側面を追跡する素晴らしい方法であり、改善を監視したり、早期警告サインをキャッチしたりするための継続的かつ客観的な対策を提供することができます。

しかし、彼らは異なるものを捉えます。

6分歩行メトリックは、6分でどれだけ遠くまで歩くことができるかを推定し、歩行能力と持久力の尺度です。

歩行の安定性は、歩行の質を捉え、移動性に基づいて個人の転倒リスクを簡単に評価できるように設計されています。

これらの指標を週単位で追跡している場合でも、治療に応じて変化を測定する場合でも、自然老化の傾向を監視する場合でも、どちらの指標も個人の健康に関するユニークなウィンドウを提供できます。

6分間の徒歩距離のメトリックを深く掘り下げることから始めます。

クリニック内6分ウォークテストは、多くの分野の臨床医が心血管および筋骨格の健康を評価するための定番です。

このメトリックは、低容量の個人の歩行持久力を捉えています。

これは、他の人の年齢や身長と比較して持久力が低い個人を特定するのに役立ちます。これは、多くの場合、健康状態の悪化を示しています。

今年は、新しい再キャリブレーションAPIを使用して、6分歩行メトリックは、手術などの介入や怪我などの急性事象後の歩行能力の変化を追跡するのに最適な方法です。

6分歩行メトリックの再調整が役立つシナリオを実行してみましょう。

膝の手術を受けたばかりのジェイミーという患者がいると想像してみてください。

私たちはジェイミーが手術後ほとんど歩くことができなかったことを知っていますが、私たちは彼らの6分歩行の見積もりに小さなディップしか見られません。

何がこれを引き起こしているのか調べてみましょう。

個人の容量の正確な推定値を構築するために、6分歩行距離の推定値は、過去の測定ウィンドウ全体の活動と運動データを調べます。

たとえば、これはこの見積もりに使用される測定ウィンドウです。

見積もりがどのくらいさかのぼっているかを確認するには、新しいメタデータフィールドを使用して、使用されたデータウィンドウの先頭を確認できます。

私たちの例の見積もりは、手術のずっと前からのデータを使用していたことがわかります。

今できることは、手術後のデータのみを使用するように見積もりを再調整することです。

この再調整により、私たちの見積もりは、手術直後のジェイミーの機動性の真の低下を捉え、手術前と手術後のより正確な比較を可能にします。

今、Sohumは、あなたのアプリでこれらの新機能を使用する方法を私たちに示すことができます。

Sohum Thakkar:ありがとう、イリダ!

再調整APIを使用すると、ジェイミーの手術日に関する知識を使用して、6分間の歩行距離の推定値を改善できます。

再調整したいことがわかっている場合は、HKHealthStoreでまったく新しいrecalibrateEstimatesメソッドを使用できます。

この新しい方法にはいくつかの要件があります。

最初に必要なのは、再調整できるSampleTypeです。

.allowsRecalibration ForEstimatesプロパティでタイプを再キャリブレーションできるかどうかを確認できます。

iOS 15の時点で、sixMinuteWalkTypeは再調整できる唯一のサンプルタイプです。

2番目に必要なのは、新しい資格です。

この資格は自分でXcodeプロジェクトに追加できます。

そして最後に、アプリはSampleTypeの読み取りと共有の両方に承認が必要になります。

アプリの承認を許可するようユーザーに促すには、6分歩行距離タイプだけでセットを作成し、それをhealthStoreに渡すだけです。リクエスト承認。

そして、これらの要件を邪魔にならないように、再調整しましょう。

HKHealthStoreのrecalibrateEstimatesメソッドを使用して、手術日を渡すだけです。

これは患者の健康データに影響するため、再調整を許可するように求めるプロンプトが画面にポップアップ表示されます。

そして、それだけです!

次のいくつかの見積もりでは、健康アプリの測定開始日と、すべてのHealthKitサンプルに付属するEariestDateUsed ForEstimateメタデータに反映された再調整日が表示されます。

考慮すべきいくつかのこと: まず、この方法は、使用時にHealthKitにすでに存在する見積もりには影響しないので、手術後できるだけ早く再調整することが重要です。

第二に、再調整後、自信を持って見積もりを行うのに十分な活動履歴を再構築するのに最大14日かかる可能性があります。

そして第三に、その効果は一時的なものです。

再調整日が過去で十分になると、見積もりは再び通常の測定ウィンドウの使用を開始します。

あなたはすべての秋やあなたが学ぶすべての手術を再調整したくなるかもしれませんが、これらはしばしば運動能力やフィットネスの低下につながりません。

トレードオフがあります。

一般に、データウィンドウが長くなると、より正確な見積もりが得られますが、急激な変化に対する反応は低くなります。

ジェイミーの場合、彼らの手術が彼らの機動性とフィットネスに大きな変化をもたらすことを知っており、その変化を注意深く監視したいと思います。

彼らがうまく回復していない場合、私たちは手を差し伸べてサポートを提供することができます。

この新しい再調整APIは、Appleの6分歩行距離メトリックの機能を、怪我や手術からの回復を追跡する全く新しいユースケースに拡張します。

患者の健康状態をよりよく監視し、転帰を改善するのに役立つことを願っています。

今、私はそれをイリダに渡して、あなたの歩行の異なる次元を測定する真新しい指標、ウォーキング安定性についてあなたに伝えたいと思います。

イリダ：ありがとう、ソフム。

個人がどれだけ、またはどこまで歩くことができるかを追跡できることに加えて、その動きの質を監視することも重要です。

iOS 15では、歩行品質に関する基本的な理解を築き、新しいメトリックであるApple Walking Steadinessメトリックで拡張しました。

このメトリックは、全体的な歩行品質をよりよく理解できるように設計されており、今後12ヶ月間の移動制限による転倒のリスクを評価するのに役立ちます。

あなたの歩行の質は、あなたの筋力、あなたの身体的持久力、あなたのバランス、または怪我や手術などの外的要因を含む多くの要因によって影響を受け、そのすべてが転倒のリスクを変える可能性があります。

Apple Walking Steadinessメトリックは、転倒リスクに寄与するモビリティコンポーネントを追跡するための統一された方法を提供します。

この機能は3つの要素で構成されています。

まず、時間の経過とともに歩行安定性の変化を継続的に監視するために使用できるスコアを提供します。

新しいスコアは毎週HealthKitに保存され、その週のユーザーの安定性を表します。

スコアはあなたに細部の最大のレベルを提供します。スコアが高いほど、あなたの歩行品質は良くなり、移動制限のために転倒の予測リスクは低くなります。

第二に、定常スコアの意味をよりよく理解するために、OK、Low、Very Lowの3つの分類に分類しました。

これらの分類は、転倒のリスクが最も高い人を特定するより簡単な方法を提供します。

最後に、個人が健康アプリのWalking Steadiness機能に乗船した後、通知を有効にしました。

この通知は、安定性が低または非常に低のカテゴリに低下した場合、または数ヶ月間それらのカテゴリにとどまった場合、個人に警告します。

今、あなたは疑問に思うかもしれません、彼らの人生を通して典型的な健康な個人にとって安定性はどのように見えますか?

ウォーキング安定性メトリックが2人にとってどのように見えるか見てみましょう。

この人にとって、彼らの歩行の質は年をとるにつれて低下します。

これはかなり典型的です。

私たちは皆、年配の親戚が私たちほどうまく歩けないかもしれないことを見てきました。

しかし、私たちはまた、安定性に寄与する行動要因があることを知っています。

例えば、高いレベルのフィットネスを維持できる人は、年をとるにつれてより高い品質の歩行を維持する可能性があります。

しかし、私たちはまた、年齢やより良いフィットネスが歩行の安定性に影響を与える唯一の要因ではないことを知っています。

足首の怪我のような急性イベントは、歩行の質を大幅に変化させ、転倒リスクの高まりにつながる可能性があります。

だから、誰もが人生を通して定常性のカテゴリーの間で跳ね返ることができます。

そして、私が述べたように、安定性の分類は、これらの変化の重要性を理解するのに役立ちます。

これらの分類レベルの個人がどのように見えるかをもう少し深く掘り下げてみましょう。

OK分類は、あなたの健康で自信に満ちた歩行者になります。

彼らは一般的に、彼らの一日を過ごし、彼らの強さと調整に挑戦するタスクの多くを行うことに何の問題もないでしょう。

彼らのスコアは高く、モビリティ関連の健康問題のために低下するリスクは低い。

低分類の個人は、より妥協した機動性を持つことになります。

彼らは一般的に大丈夫かもしれません。しかし、より困難な状況では、例えば困難なハイキングでは、転倒を防ぐためにより多くの予防措置を講じる必要があるかもしれません。

彼らはまだ落ちていないかもしれませんが、この初期の意識は役に立つでしょう。

最後に、非常に低い分類は、著しく安定性を損なった人を示しています。

彼らの機動性に基づいて、この個人は転倒のリスクが高いだろう。

繰り返しますが、彼らはまだ転倒していないかもしれませんが、機動性が損なわれており、転倒が起こる可能性が高い状況を避けるか、可能であれば運動を通じて強さとバランスを向上させるために必要な措置を講じる必要があります。

わかった。

それがこのメトリックができることです。

今、あなたは尋ねるかもしれません、歩行安定性の見積もりを得るために何が必要ですか?

実際、それほど多くはありません。

メトリックは、パンツポケット、ジャケットポケット、財布など、最も一般的な場所でiPhoneを運んでいる間、安定性を測定するために最適化されています。デバイスが体の中心にしっかりと保持されている限り、すべてが機能します。

Sohumに戻って、アプリでWalking Steadinessメトリックを活用する方法を説明します。

イリダ、ウォーキング・ステディネスを紹介してくれてありがとう。

それを使おう。

理学療法クリニックのアプリを構築していると想像してみてください。

理学療法とリハビリテーションにおける最も困難な課題の1つは、進捗状況を追跡することです。

そして今、ほとんどの訪問はバーチャルであり、遠隔医療が人気を集めている今、それはさらに厳しいかもしれません。

アプリの目的は、患者を最新の状態に保ち、転倒のリスクが高い患者と安定性が低下している患者を特定することだとしましょう。

それは測定するのが信じられないほど難しいことですが、歩行安定性が役立ちます。

イリダが述べたように、歩行安定性には、スコア、分類、通知の3つの要素があります。

それぞれを理学療法患者のためのアプリに統合する方法を見ていきます...

スコアから始まります。

患者の最新の安定性スコアを表示したいとしましょう。

それを行う方法を見てみましょう。

スコアは、appleWalkingSteadinessという名前のHealthKit quantityTypeです。

Appleが定義したメトリックなので、読み取り専用です。

HealthKitのユニットはパーセントで、0から1の範囲です。

そして、それは毎週書かれていますが、見積もりを計算するのに十分なデータがない場合、見積もりは遅れる可能性があります。

私たちをキックオフするために、承認をつかみましょう。

appleWalkingSteadinessタイプでセットを構築します。

その後、requestAuthorizationに電話します。

最新の定常スコアを取得するために、終了日でソートされた1つの制限を持つSampleQueryを構築します。

返されたサンプルがある場合は、パーセント単位で値を取得し、アプリでステータスを更新します。

これがその姿です。

スコアは傾向を追跡するのに最適ですが、単独で解釈するのが難しい場合があります。

45とはどういう意味ですか?

分類は、ほとんどの人にとってより適切なレベルの粒度かもしれません。

それを使ってコンテキストを追加しましょう。

分類は、真新しいHealthKit列挙型の形で提供されます：HKAppleWalkingSteadiness分類。

列挙型は、.ok、.low、および.veryLowの値を取ることができます。

最新のスコアを取得するための以前のコードから始めて、スコアを分類に変換するのに1行しかかかりません。

分類列挙型には、スコアを適切な分類に変換する便利なコンストラクタがあります。

そして、スコアと一緒に分類を表示します。

そこ！それははるかに解釈しやすいです。

これで、この個人は低分類であり、転倒のリスクが高まる可能性があることがわかります。

さて、では、このアプリの患者監視部分に取り組みましょう。

転倒のリスクが高い患者を特定し、手を差し伸べることができるようにしたいと考えています。

歩行安定性の通知はこれに最適です。

患者が定常性の通知を受け取ったときに通知を受けるために登録し、チェックインのために彼らに手を差し伸べることができます。

通知はCategoryTypeサンプルとしてHealthKitに届き、HealthKitでは「appleWalkingSteadinessEvent」と呼ばれます。

また、読み取り専用タイプです。

steadinessEventsには4つのタイプがあります。

.initialLowと.initialVeryLowは、個人がLowまたはVery Lowに分類されてから約1か月後にトリガーされます。

この最初の通知の後、.repeatLowまたは.repeatVeryLowイベントは、同じ分類にとどまる場合、約3ヶ月に1回個人に思い出させます。

通知の種類の詳細については、このセッションに関連付けられているリンクで、開発者ドキュメントで読むことができます。

通知を読むには、別の承認が必要です。

今回は、appleWalkingSteadinessEventタイプのみでセットを作成し、requestAuthorizationメソッドに渡します。

通知に気をつけましょう。

ここでは、steadinessイベントがHealthKitに保存されるたびにハンドラを実行するHKObserverQueryを作成しています。つまり、ユーザーは通知を受け取りました。

このハンドラでは、ユーザーにチェックアップを促します。

また、1日以内に通知に応答できるように、HealthKitがバックグラウンドでイベントを配信できるようにします。

クエリを実行すると、アプリは通知をリッスンし始めます。

そして、ユーザーが通知を受け取るたびに、クリニックとの仮想検診をスケジュールするプロンプトをトリガーすることができます。

すごい！今、あなたは転倒リスクの高い患者に手を差し伸べることができます。

しかし、理学療法クリニックが興味を持っているかもしれない他のユーザーがいます。

これは、最初は大きな進歩を示したが、現在は安定性が低下している患者の例です。

彼らはまだより高い転倒リスクの分類を受けていないので、歩行安定性の通知を受け取っていないでしょう。

しかし、理学療法クリニックはこのような傾向を心配しているかもしれません。

演習は適切ですか?

彼らは損害を引き起こしていますか?

患者は追いつかないだけですか?

フォローアップをスケジュールしたいので、独自の通知基準を設計しましょう。

時間の経過とともに患者の定常スコアは次のとおりです。

計画は、6週間の定常スコアを照会し、最適な勾配を計算することです。

私たちは毎週これを行い、患者の安定性が平均して週に5ポイント以上低下している場合は、チェックインをスケジュールする必要があります。

過去6週間にクエリする述語を作成し、appleWalkingSteadiness QuantityTypeのHKSampleQueryを実行しましょう。

コールバックでは、結果をdetectTrends関数に渡します。

さて、私たちがする必要があるのは、定義したカスタム関数を使用して、最適なスロープを計算し、それが-5未満であるかどうかを確認することだけです。つまり、安定性は週に5ポイント以上の割合で低下しています。

もしそうなら、以前と同じように、ユーザーに検査を促すことができます。

だから今、彼らの安定性が低下していることを検出すると、彼らはプロンプトを受け取ります!

つまり、Walking Steadinessの3つの要素すべてを使用する方法と、独自の簡単な通知基準を設計する方法です。

パッシブモビリティモニタリングを実行するのは、これほど簡単ではありませんでした。

しかし、先を行くのはないようにしましょう。

このすべては、患者が歩行安定性スコアを得ることに依存しています。

ここでは、単一のサンプルを見逃さないようにするための4つのベストプラクティスを紹介します。

まず、ユーザーは健康アプリで身長が設定されている場合にのみ安定します。

体重と年齢を強くお勧めします。

だから、まず最初に、それらのためにそれらを促しましょう。

HealthKit APIを介して、更新されたサンプルを直接作成することをお勧めします。

第二に、AppleのWalking Steadiness通知をオンにするようユーザーに促すことをお勧めします。

彼らはモビリティルームのヘルスアプリからこれを行うことができます。

第三に、イリダが述べたように、大多数の患者にとって、日常活動をしている間に携帯電話をポケットに入れておくことは、安定性スコアを得るのに十分です。

彼らが歩き回っている間、携帯電話を持って行くように勧めましょう。

彼らが歩行基準を満たしているかどうかを確認するために、HealthKitで歩行速度の見積もりを受け取っているかどうかを確認できます。

一貫したウォーキングスピードサンプルで2週間は、彼らが十分にデバイスを持っていることを示す良い指標です。

リマインダーとして、歩行速度にはiPhone 8以上が必要で、平らな地面の上を歩きながら携帯電話が体の中心にしっかりと保持されているときに測定されます。

ヘルスアプリのざっと見るか、またはHealthKitのクエリをすばやく見ると、携帯電話でもっと歩くように促す必要があるかどうかを知ることができます。

だから、あなたはそれを持っています!

専用の機器や評価なしで患者の歩行品質を追跡できる次世代の理学療法アプリを構築するために必要なツールがすべてあります。

さて、イリダに、健康モニタリングにWalking Steadinessを使用できる他の多くの素晴らしい方法について話します。

イリダ：ありがとう、ソフム。

私たちは、歩行安定性が理学療法のための仮想ケアにどのように大きな違いをもたらすことができるかを見ました、そしてそれははるかに多くのことができます。

家族が高齢の祖父母をチェックするのに役立つアプリを構築したい場合は、ウォーキングステディネスの使用を検討してください。また、多発性硬化症などの神経疾患の患者が病気の進行を監視するのを助けることができます。

個人の転倒リスクに合わせたトレーニングやハイキングを推奨するためにも使用できます。

歩行安定性と6分歩行の新機能は、モーションセンシングを使用してヒースを監視するための豊富なエコシステムの上に構築されています。

運動性、心血管機能、呼吸器機能の強い結びつきを考えると、手術を成功させるために患者を最もよく準備するために、Apple Watchの心血管の健康に関連する指標（およびiPhoneのモビリティ）をリハビリテーションまたはリハビリ前のアプリケーションにどのように使用できるかを探ることをお勧めします。

または、歩行安定性、可動性指標、および運動障害APIを組み合わせて、パーキンソン病の複雑な運動症状を監視する方法を検討してください。

これらの指標の組み合わせは、あなたのアプリのための本当に強力な経験のロックを解除することができます。

最後に、このデータを収集する際にいくつかのベストプラクティスを提供したいと考えています。

まず、歩くことは私たちがあまり考えないものですが、私たちが今見たように、それは強力な健康信号を運びます。

他の健康情報と同様に、データ収集に強力なプライバシーとセキュリティの保護措置があることを確認してください。

HealthKitの外部から取得するデータは、少なくともキーコード化され、暗号化される必要があります。

次に、収集している情報とその理由について透明性を保つ必要があります。

特定のHealthKitタイプの読み取りをリクエストするたびに、その使用を承認するようユーザーに促します。

しかし、この基本的な措置を超えて、最も意味のあるデータのみを収集し、そのデータがどのように使用されるかについて透明性を持つことは私たちの共同責任です。

たとえば、シックスミニッツウォークの見積もりでは、ユーザーは再調整が適切であり、それがケアにどのように役立つかを理解する必要があります。

歩行安定性メトリックについては、見積もりを取得するための要件を明確に伝える必要があります。

医師や理学療法士などのドメインの専門家と協力することで、これらの指標から最も意味のあるデータを収集することができます。

最後に、顧客はデータを管理する必要があります。

HealthKitでは、個人は「すべてのデータを表示」をタップし、それらから収集したすべてのサンプルを削除できます。

HealthKitの外でデータを取る場合、顧客は簡単に表示および削除したり、データ収集をオフにしたり、そこから収集されたものをコントロールする他の手段を持っている必要があります。

歩行安定性を使用して動きの質を測定する場合でも、怪我からの回復を評価するための6分歩行指標、またはその他の健康指標を使用している場合でも、これらのガイドラインに従うことで、お客様のデータが保護され、ユーザーの信頼が促進されます。

健康データを扱う際には、これらの原則へのコミットメントが不可欠です。

さて、それは私たちにとってラップです。

WWDC21を見て、参加していただきありがとうございます。

あなたが次に何を作るかを見るのが待ちきれません。

♪