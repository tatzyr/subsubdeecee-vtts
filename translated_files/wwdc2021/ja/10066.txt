10066

♪ベース音楽の演奏♪

アリー・カズムチャ:こんにちは、私はアリーで、ゲームセンターのエンジニアリングプログラムマネージャーです。

今年行っているすべての改善について、あなたに時間を費やすことに本当に興奮しています。

また、この春、Friends APIのような素晴らしい新機能も発売しました。

しかし、これらの詳細のいくつかに入る前に、Game Centerが提供するコア機能のいくつかについて簡単にお話ししたいと思います。その多くは昨年完全に更新されました。

Game CenterはApple独自のソーシャルゲームネットワークです。

開発者として、GameKitフレームワークを通じて、ゲームで意味のあるGame Centerの機能を利用することができます。

プレイヤーにとって、Game Centerは、リーダーボードで即座に競争したり、達成の進捗状況を追跡したり、マルチプレイヤーゲームを一緒にプレイしたり、友達のプロフィールをチェックしたりできる単一のゲームIDです。

プレイヤーが素晴らしい新しいゲームを見つけて発見するのを助けることも、ゲームセンターの主な目標の1つです。

ゲームの発見可能性を高めるために、iOS 14にかなりの数の機能を追加し、今年はさらに追加します。

ゲームはすべてコミュニティに関するものであり、私たちの友人がプレイしているものに追いつくことは、そうでなければ見逃したかもしれない新しいタイトルを発見するための素晴らしい方法です。

そのため、昨年、Game CenterをApp Storeと直接統合しました。

App Storeの「ゲーム」タブと「アーケード」タブの両方を通じて、Game Centerの友達が何をしているのかに関する詳細情報が表示されます。

詳しく見てみましょう。 

アーケードタブを閲覧している間、私のGame Centerの友人の何人かが「ワンダーボックス」と呼ばれる新しいゲームを含む、私にとって面白そうないくつかのゲームをプレイしていることがわかります。

詳細については、製品ページをチェックしてみましょう。

製品ページでゲーム自体についてもっと読むことができるだけでなく、すでにその特定のゲームをプレイしているゲームセンターの友人の完全なリストを見ることができます。

そのうちの1つをタップすると、Game Centerのプロフィールが表示されます。

ここから、彼らがプレイしているゲームをさらに見ることができます。

そして、私が好きなものを見たら、彼らのプロフィールから直接ダウンロードできます。

「Friends Are Playing」セクションは、すべてのGame Center対応ゲームの製品ページに自動的に表示されます。

もちろん、App Storeの外では、友人のプロフィールをチェックする機会もあります。

たとえば、ここに示されているように、任意のリーダーボード内の友人をタップして、プロフィールを表示できます。

これらはすべて、プレイヤーがプレイする新しいゲームを見つける絶好の機会です。

そして、あなたのゲームを適格にするためにあなたがしなければならないことは何もありません。

すべてのGame Center対応ゲームは、Friends Are Playingと最近プレイしたゲームの両方に自動的に表示されます。

この秋、Game Centerを搭載した2つの新しいウィジェットも追加します。

1つ目は、友達が遊んでいることです。

これは、プレイヤーがホーム画面から直接、友人がプレイしているゲームに追いつき、より多くのゲームを発見するためのさらに簡単な方法になると思います。

2番目のウィジェットは「Playingを続ける」と呼ばれています。

このウィジェットは、すでに起動してプレイしたゲームを自動的に再浮上させます。

そのため、ワンタップで中断したところからすぐに戻ることができます。

また、iPadをお使いの場合は、これらのGame Centerウィジェットの両方が新しいより大きなフォーマットもサポートしています。

そして、Friends Are PlayingやRes Recently Playedと同じように、追加のコードや採用する機能は必要ありません。

ゲームがGame Centerをサポートしている場合は、自動的に含まれます。

そして、友達はソーシャルプレイの重要な部分であるため、友達作りとマルチプレイヤーフローの両方を大幅に改善しています。

まず、友よ。

Game Centerの友達リクエストは、今日と同じようにメッセージで引き続き送信されます。

しかし、あなたが1つを見逃した場合に備えて、私たちはあなたがそれらをすべて1か所で管理できるように、真新しいフレンドリクエストの受信トレイを追加しました。

また、MacOSで友達リクエストを送受信するためのサポートなど、メッセージ内のフローを大幅に改善しました。

しかし、開発者として、あなたはおそらくGame Centerの友達と何ができるかに最も興味があります。

そこでFriends APIの出番です。

Friends APIを使用すると、プレイヤーのGame Centerの友達へのプライバシーに配慮したアクセスできるため、ゲーム内であらゆる種類のユニークな体験を作成できます。

私の友人が進行マップでどのレベルにいるかを示すか、プレイヤーに一緒にミッションを開始させるかにかかわらず、これらはすべてFriends APIを採用することで達成できます。

チー・ハンが、そのやり方を案内します。

Game Centerが発見可能性を向上させ、ゲームの外でプレイヤーを結びつけるのに役立ついくつかの方法がわかったので、Game Centerがゲーム内で提供する利点のいくつかを見てみましょう。

iOS 14では、アクセスポイントAPIを通じてゲームに追加できる新しいプレーヤーダッシュボードを導入しました。

また、完全に更新されたUIを出荷しました - 事実上、手つかずの画面はありませんでした。

あなたのゲームの根底にあるトーンに合った鮮やかな色で、このリフレッシュは、どんなゲームでもくつろげることを意図していました。

また、ネイティブのGame Center UIと、ゲームに最適なカスタムUIの組み合わせを使用することもできます。

たとえば、レベル選択画面内で現在のリーダーボードのスコアを表示したり、レベルをプレイ中にライブインジケーターとして表示したりすることは、ゲームに合ったUIでテーマにかなっているすべての例です。

レベルではありませんが、ここに示されているように、アクセスポイントを介してすべてのGame Centerデータへのアクセスをプレイヤーに許可することを選択できます。

これにより、プレイヤーはGame Centerのランキングや成果に追いつき、交流する方法がさらに増えます。

そして、あなたのゲームがマルチプレイヤーをサポートしている場合は、ここにもいくつかの素晴らしいアップデートがあります。

今年、私たちは人々がつながり、できるだけ早く一緒にゲームをプレイし始めるのを助けることに引き続き注力しました。

さて、マルチプレイヤーマッチを開始すると、新しい提案セクションでは、既存のメッセージグループも表示されます。

グループをタップすると、すでに行っているメッセージスレッド内で招待状が送信されます。

また、あなたが一緒にプレイしたGame Centerの友達グループを覚えていて、それらも提案しています。

だから、ワンタップで再び同じ友達とゲームに戻ります。

また、「ファストスタート」と呼ばれるまったく新しいマルチプレイヤーAPIも導入しています。

Zhehongは、ファストスタートの利点のいくつかと、それをゲーム内で実装する方法を案内します。

最後に、iPhoneとiPadの両方ですべてのGame Center UIのコントローラーサポートも追加しました。

最良の部分は、Xcodeで採用する新しいAPIやバージョニングがゼロであることです。

サポートされているコントローラーのホームボタンを押すだけで、Game Centerのダッシュボードが即座に表示されます。

もう一度押すと、ゲームに戻ります。

Game Centerダッシュボードとその中のすべてのセクションはデフォルトでナビゲート可能ですが、独自のUIのコントローラーサポートを追加する必要があります。

また、コントローラーの新機能に興味がある場合は、「仮想および物理的なゲームコントローラーをタップ」というタイトルのセッションをチェックして詳細を確認してください。

セッションの残りの部分を見てみましょう。これはセッションの残りの部分です。

まず、Chee Hanは、Friends APIの詳細なウォークスルーや、ゲーム内でGame Centerの友達を活用するためにそれを実装する方法など、友達の改善について説明します。

そして、セッションを締めくくるために、Zhehongは、招待フローを合理化した方法や、プロセスをさらにスピードアップするために新しいファストスタートAPIを実装する方法のウォークスルーなど、すべてのマルチプレイヤーについて説明します。

友達を始めるために、ここにチー・ハンがあります。

チー・ハン・リム:こんにちは、私はチー・ハンです。

私はゲームセンターチームのエンジニアです。

ゲームをすることの最良の部分の1つは、それらの経験を家族や友人と共有できることです。

一部の人にとっては、それは競争についてであり、他の人にとっては、それはつながりについてです。

ゲームセンターの友達は、まさにそれを行うことができます。

だから、私たちが今日焦点を当てる2つの能力があります。

まず、プレイヤーがゲーム内で友達リクエストを簡単に送信できるようにしました。

第二に、フレンズAPIを通じてプレイヤーの友達リストを活用するための新しいAPIをいくつか導入しました。

まず、友達リクエストの送信について話しましょう。

一緒にプレイするとゲームが良くなると、プレイヤーにゲーム内でGame Centerの友達を作るように促すのは理にかなっているかもしれません。

私たちは、あなたがちょうどそれを行うための新しいAPIを導入しました。

ゲームでは、UIに「友達を追加」ボタンがあり、SFシンボルをボタン画像として使用することをお勧めします。

ユーザーがボタンを押すと、フレンドAPIを呼び出すことで、プレイヤーがゲーム内に友達を追加できるようにすることができます。

コードでそれを行う方法を見てみましょう。

presentFriendRequestCreator FromViewController APIを呼び出すと、メッセージシートに渡した実際のコントローラーが表示されます。

プレイヤーが友達リクエストの送信を終了したら、シートを却下し、オプションのエラーでコントロールをアプリに戻します。

それでおそれ！

数行のコードで、プレイヤーにゲームを離れることなく友達リクエストを送信する機会を提供することができます。

そして今、ゲームセンターの友達全員と何ができるかを見てみましょう。

この春に追加した2番目の機能は、Game Centerの友人へのプライバシーに配慮したAPIアクセスです。

プレイヤーがゲームを起動し、Game Centerの友達アクセスを必要とする機能を初めて使用しようとすると、友達リストへのアクセスを許可または拒否するように求められます。

許可されている場合は、双方向の友人のリストを返します。つまり、リストにはゲームへのアクセスを許可した友人のみが含まれます。

また、この許可をすべてのデバイス間で同期し、ユーザーはリクエストを承認するだけで済みます。

では、プレイヤーが友達リストへのアクセスを許可した場合、どのような体験を作成できますか?

さて、これにより、私の友人が進行マップ内でどのレベルにいるかを表示したり、ロビーで友人と一緒にミッションを立ち上げたり、マルチプレイヤーゲームをプレイしている間に友人のみの定期的なリーダーボードを表示したりできます。

プレイヤーの視点から、Friends APIがどのように見えるかを見てみましょう。

ゲームはAPIを呼び出すと、プレイヤーの友達にアクセスする許可を求めます。

そして、プレイヤーは、あなたの要求を許可または拒否することを決定しなければならないおなじみのシステムプロンプトが表示されます。

そして、友達へのアクセスを要求する理由をプレイヤーに説明するオプションがあります。

プレイヤーがリクエストを承認したら、ゲームへのアクセスも許可した友人のリストを返します。

この例では、リーダーボードを使用して、このリーダーボードに提出したスコアでプレイヤーの進捗状況を追跡します。

スコアを提出すると、フレンズAPIを利用して、リーダーボードのスコアに対応するレベルの横にある進行マップに友達を表示することができます。

これは、あなた自身のゲームUIの中でこのように見えるかもしれません。

私の友人の進行が地図に表示されていることがわかります。そこでは、彼らが私のゲームのどこにいるのかを正確に知ることができます。

コードでこのUIを作成する方法に飛び込みましょう。

Friends APIを呼び出す前に、いくつかのセットアップを行う必要があります。

まず、NSGKFriendListUsageDescriptionをinfo.plistに追加する必要があります。

この説明は、前のスライドに見られるように、プレイヤーへの許可プロンプトの一部として表示されます。

説明が欠落している場合、すべてのFriends API呼び出しはエラーになります。

説明が設定されると、GKLocalPlayerクラスで2つの新しいAPIを呼び出すことができます。

友達リストへのアクセスを確認するには、GKLocalPlayerクラスのloadFriendsAuthorizationStatusを呼び出す必要があります。

アプリのapplicationDidFinishLaunchingでこれを呼び出したい場合があり、状態が決定されていない場合は、許可プロンプトを表示する良い瞬間があるまで、プレイヤーの友達リストの読み込みを遅らせることをお勧めします。

これにより、プロンプトが表示されたら、プレイヤーが決定を下す時間を確保できます。

完了ブロック内の次の4つの州のいずれかでGKFriendsAuthorizationStatusを受け取ります。

各州の詳細な説明については、GKLocalPlayerヘッダーを参照してください。

返された状態が拒否または制限されている場合、以前にこのプレーヤーのデータを収集した場合は、収集したデータを削除する必要があります。

プレイヤーが許可された状態でアクセスを許可することを選択した場合、loadFriends APIを呼び出して友達リストの読み込みに進むことができます。

今、それを見てみましょう。 

このコードでは、Swift非同期呼び出しの力を活用して、GameKitフレームワークへの呼び出しを簡素化します。

loadFriendsOnProgressionMapという名前の非同期メソッドから始めます。

まず、GKLocalPlayerクラスでloadFriends APIを呼び出します。

GameKitは、プレイヤーの友達をGKPlayerオブジェクトの配列として返します。

次に、GameKitから進行リーダーボードにリーダーボードID「プログレス」をロードします。

リーダーボードオブジェクトを取得したら、プレイヤーの友達にloadEntriesメソッドを渡すことができます。

あなたは彼らがそのリーダーボードで持っているスコアを取得します。これは、彼らが現在どのレベルにいるかを追跡するために使用されます。

それにより、プレイヤーの友達を進行マップに表示するために必要なすべての情報があります。

そして、それだけです!

これで、ゲームにフレンズAPIを正常に統合し、プレイヤーの友達を進行マップに表示しました。

私たちは、開発者コミュニティがこの新機能を使用して思いつくすべての素晴らしい体験を見ることに非常に興奮しています。

そして、それで、私はそれをZhehongに渡したいと思います。

彼は私たちが今年マルチプレイヤーに加えた大きな変化についてあなたにすべて話すでしょう。

Zhehong An: ありがとう、Chee Han。

みなさん、こんにちは、私はGame CenterチームのZhehongです。

今年、Game Centerマルチプレイヤーのすべての新機能と改善点を紹介するのが待ちきれません。

Allyが以前に述べたように、Game Centerのマルチプレイヤーを大幅に改善しました。

これらの変更の背後にある主な目的は、プレイヤーが一緒に遊ぶ人を見つけて、できるだけ早くゲームに入るのを助けることです。

Game CenterのマルチプレイヤーUIは、プレイヤーが接続してプレイする人を見つけるためのさまざまな方法を可能にします。

これには、他のプレイヤーとの自動化や、複数の友人、連絡先、近くのプレイヤー、電話番号またはメールアドレス、ゲームセンターグループ、またはメッセージグループに一度に招待状を送信することが含まれます。

それは、異なるソースから異なる人々を示すためにあなたの努力を劇的に減らします。

ご存知かもしれませんが、自動化は、プレイヤーがGame Centerのマッチメイキングプールからお互いを見つけるのに役立つメカニズムです。

次のスライドで他の新しい概念を見ていきます。

プレイヤーにより良い提案をもたらすために、プレイヤーが招待したいかもしれないゲームセンター内外からの人々のリストを含む提案シェルフを導入しました。

近くのプレイヤー、ゲームセンターグループ、メッセージグループが含まれています。

今年導入した新しいコンセプトであるゲームセンターグループは、最近リアルタイムまたはターンベースの試合でプレイしたプレイヤーのグループです。

この新機能は、ワンタップでそのグループ内のすべてのプレイヤーを選択できるため、特定のグループと繰り返しゲームをプレイしたいプレイヤーにとってかなり簡単になると信じています。

そして、私たちはあなたがすでに定期的に話している人々をメッセージグループとiMessageで活用しています。

1回のタップでメッセージグループ全体が選択され、招待は既存のグループチャットを使用します。

これで、メッセージを介して招待状をより速く送信できるだけでなく、後でゲームについてチャットすることもできます。

招待したい人を選択したら、右上の送信ボタンをタップすると、ロビーにそれらが表示されます。

私たちは今、最初の招待状が切れた後でも、プレイヤーを追加または削除する機能を持っています。

たとえば、応答できない招待されたプレイヤーを削除したい場合がありますが、すでに受け入れた他のプレイヤーを削除したくありません。

そのため、まだ受け入れていないか、受け入れた後にゲームを離れる限り、プレイヤースロットのXボタンをタップして、招待されたプレイヤーを個別に削除できるようにしました。

そして、プレイヤーはより多くの人々をあなたのゲームに招待し続けることができ、それは彼らにすぐに遊ぶために適切な人々のグループを作るための多くの柔軟性を与えます。

これらすべてが、プレイヤーがマルチプレイヤーゲームをこれまで以上に迅速かつ簡単にプレイできるようにすることで、体験を大幅に簡素化し、合理化します。

プレイヤーが順番に知っている人を簡単に招待できるようにすることは、ゲームの発見可能性を高めるのに役立ちます。

ご覧のとおり、Game CenterのマルチプレイヤーUIを活用すると、これらすべての素晴らしい機能を無料で入手できます。

マルチプレイヤーゲームをさらに迅速に開始するために、今年は「ファストスタート」という新しいAPIを追加しました。

ファストスタートを採用した場合、ゲームイニシエーターは、全員が接続されるのを待つか、招待されたプレイヤーの最小数が接続したらすぐにゲームを開始するかを選択できます。

プレイヤーをゲームセンターのUIからゲームUIに戻すのがはるかに速くなります。

一方、バックグラウンドでは、Game Centerは残りのプレイヤーを接続し、未入力のプレイヤースロットを自動化し続けます。

これらのプレイヤーは全員、接続するとゲームに参加できます。

ゲームが異なる時間にマルチプレイヤーセッションに参加するプレイヤーをサポートできる場合は、Game Center UI経由でFast Startを利用できます。

この機能を利用して、ウォームアップゲームシーンを作ることもできます。

これを実際に見る最善の方法は、例を示すことです。

ここでは、ファストスタートを活用する「ザ・コースト」というゲームを使用しています。

ファストスタートを利用してゲームを構築することがどれほど強力であるかがわかります。

まず、2つのminPlayersと5つのmaxPlayersで構成されたGKMatchRequestでGKMatchmakerViewControllerを提示します。

このようにして、ローカルプレイヤーを含む2人のプレイヤーが準備ができている限り、ゲームは開始できます。

次に、[友達を招待]ボタンをタップして、プレイヤーピッカーを起動します。

招待したい選手を選び、彼らの返事を待ちます。

ご覧のとおり、招待者が受け入れると、ゲームの開始ボタンが強調表示されるので、ゲームを開始するか、他のプレイヤーが参加するのを待つことができます。

私は始めることに決め、仲人ビューコントローラーが却下されるとすぐにゲームプレイが始まります。

このゲームは当初2人のプレイヤーで始まったので、2つのボートを見ることができます。

一方、Game Centerはまだバックグラウンドで接続しています。

3人目のプレイヤーが参加すると、ゲームが通知され、3番目のボートが上がります。

自動化されたスロットも2つあったので、Game Centerはまだバックグラウンドで自動化されています。

マッチメイキングプロセスが終了すると、2人の自動化されたプレーヤーが参加します。

今、私たちはこのゲームのための5人のプレーヤーのフルセットを持っています。

ご覧のとおり、ファストスタートを採用することで、異なるプレイヤーが異なる時間に同じゲームセッションに参加できるようになります。

最後に、私たちが一緒に歩いたことを達成するために追加する必要があるコードを見てみましょう。

ファストスタートモードがオンになっているGKMatchmakerViewControllerを構築するには、そのプロパティcanStartWithMinimumPlayersを「true」に設定するだけです。

ご注意：GKMatchRequestのminPlayersは、ゲームのゲームプレイを開始する必要がある最小プレイヤー数です。

GKMatchインスタンスを入手した後にデリゲートを設定して、試合中のプレイヤーの接続状況を知ることができます。

そして、didChangeConnectionStateは、後で参加するプレイヤーを処理できるデリゲートメソッドです。

招待者側では、GKInviteインスタンスで初期化されたGKMatchmakerViewControllerを提示するだけです。

これはおそらくあなたが今日やっていることと同じです。

そして、matchmakerDelegateを設定することを忘れないでください。

それはほとんどそれについてです。

ファストスタートだけでなく、今年マルチプレイヤーに提供するすべての新機能と改善をどのように採用するかに興奮しています。

要約すると、今日取り上げた内容は次のとおりです。

ゲームセンターがゲームの発見可能性を高める方法を紹介しました。

その後、Friends APIとFriendsの一般的な改善について話しました。

その後、先ほど話したすべてのマルチプレイヤー機能と改善は、プレイヤーが知っている人とできるだけ早くマルチプレイヤーゲームをプレイするのに役立ちます。

また、今年はコントローラーをよりよくサポートしています。

下部には、あなたが興味を持つかもしれない別の2つのセッションが表示されます。

彼らは定期的なリーダーボードとゲームコントローラーについてです。

皆さん、見てくれてありがとう。

WWDCでの一週間を楽しんでください。

♪