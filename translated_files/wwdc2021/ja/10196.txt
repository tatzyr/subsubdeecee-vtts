10196

こんにちは。私の名前はルーク・ラーソンで、Xcodeのエンジニアです。

後で、同僚のYoussef Elabdが加わります。

Interface Builderは、コードを書かずにアプリのユーザーインターフェイスを視覚的に構築するためのシンプルで直感的な方法を提供し、開発者がアプリを際立たせる上で重要なことに集中できるようにします。

今日は、Xcode 13のInterface Builderの新機能を紹介します。新しいシステムが提供するコントロールスタイルを含む最新のプラットフォーム機能をこれまで以上に簡単に利用し、アプリをさらに際立たせます。

このビデオでは、インターフェイスビルダーキャンバスの改善と、ボタンスタイル、テーブルコンテンツスタイル、階層記号、およびアクセシビリティのオーサリングサポートについて説明します。

キャンバスの改善から始めましょう。

Xcode 13のInterface Builderで最初に気付くことの1つは、完全に再設計されたキャンバスのボトムバーです。

バーの左側にあるコントロールは、以前と同じ機能を提供しますが、よりコンパクトな形で、キャンバスのためのより多くのスペースを確保します。

グループで整理されたさまざまなデバイスを含むデバイスを選択するためのポップオーバーがあります。

別のデバイスグループをクリックすると展開され、前のグループが折りたたむので、探しているデバイスを見つけやすくなります。

また、シーンのレイアウト、向き、外観、およびビデオの後半で表示するまったく新しいアクセシビリティオプションを設定するためのボタンもあります。

その他の改善には、キャンバスアウトラインビューの改良が含まれます。

そして、それらを示すために、Interface Builderに飛び込みましょう。

ホテルアプリで予約シーンに取り組んでいますが、左側のアウトラインビューのプロモーションシーンの横に配置されていないことに気づきました。

予約シーンはプロモーションシーンに続くので、それは私が期待していることです。

ドラッグアンドドロップを使用して、アウトラインビューで1つ以上の選択したシーンを移動および再配置できるようになりました。

だから、予約シーンを下にドラッグして、プロモーションシーンのすぐ上に配置します。

すごい。これで、2つのシーンは隣同士に配置され、移動しやすくなっています。

Optionキーを押しながらドラッグすることで、シーン全体をコピーすることもできます。

アウトラインビューのもう1つの改良は、制約のようなアウトライングループが選択可能になり、キーボードナビゲーションやオブジェクトのグループ全体の簡単な変更や削除を可能にすることです。

これを表示するには、アウトラインビューで制約グループを選択します。

これは、グループ内のすべての制約を選択するのと同じです。

右矢印キーを押して、グループに含まれる4つのエッジ制約を明らかにします。

これで、インスペクタ内のすべてのグループ制約の定数を簡単に変更したり、選択してDeleteキーを押して制約グループ全体を削除したりできます。

次に、新しいボタンスタイルを続けましょう。

Xcode 13のInterface Builderは、おなじみのPlainスタイルや、Gray、Tingted、Filledの3つの新しいスタイルなど、新しいプリセットスタイルのオーサリングボタンをサポートしています。

これらの新しいスタイルにより、ダイナミックタイプ、マルチラインタイトル、アクセシビリティなどのシステム機能を自動的にサポートするインターフェイスビルダーで、美しく一貫性のあるボタンを直接簡単に作成できます。

さらに、ボタンスタイルは、プリセットボタンサイズやコーナースタイルなどのオプションでさらなるカスタマイズをサポートします。

ビデオの後半で、より多くのスタイルのカスタマイズについていきます。

ボタンのスタイルの詳細については、ビデオ「UIKitボタンシステムに会う」をご覧ください。

インターフェイスビルダーに戻って、これらの新しいスタイルを実際に見てみましょう。

シーンの下部にブックルームのボタンがあり、注意が必要です。

ピンチ・トゥ・ズームを使って詳しく見てみます。

このボタンは、もっと注目を集めるために、塗りつぶしの色と丸みを帯びた角が欲しいです。

Xcode 13では、ボタンスタイルを使用して、インターフェイスビルダーでこのようなボタンを直接作成できるようになりました。

検査官に集中しましょう。

ボタンインスペクタの上部付近に新しいスタイルプロパティがあります。

デフォルト以外のスタイルを選択すると、ボタンが新しいボタンシステムにオプトインされ、動的タイプ、複数行のタイトル、およびアクセシビリティが自動的にサポートされます。

先に進み、インスペクタのスタイルポップアップメニューを開き、ブックルームボタンの塗りつぶされたスタイルを選択します。

ボタンは現在、ちょうどよく見える青い塗りつぶし色と丸みを帯びた角を持っています。

そして、私がしなければならなかったのは、1つの変更を加えることだけでした。

ボタンのスタイルは、あなたが望む外観をすばやく得るのに最適です。

スタイルを選択すると、ボタンインスペクタに新しいプロパティが表示され、字幕、タイトルの配置、カラーオプション、画像の配置、コーナースタイル、より高度な背景設定オプションなど、さらにスタイルのカスタマイズが可能になります。

名前が示すように、Filledスタイルはアプリの色合いを使用してボタンの塗りつぶし色を設定し、目立つ外観を与え、ユーザーインターフェイスの重要なボタンに適しています。

また、コーナースタイルは、特定のコーナー半径の設定を心配する必要がないことを意味します。

デフォルトのコーナースタイルはダイナミックと呼ばれ、ダイナミックタイプで自動的にスケーリングする見栄えの良いコーナー半径を提供し、ボタンの外観を任意のサイズで維持します。

あるいは、固定コーナースタイルの半径は、ボタンのサイズが変更されたのと同じままです。

より多くの制御が必要な場合、ダイナミックコーナースタイルと固定コーナースタイルの両方にカスタマイズ可能なコーナー半径があります。

さらに、スモール、ミディアム、ラージ、カプセルなど、さまざまなプリセットコーナースタイルが用意されており、すべてダイナミックコーナースケーリングをサポートしています。

スタイルを持つボタンは、小、中、大などのプリセットボタンサイズを含むサイズインスペクタの新しいボタンサイズプロパティにもアクセスできます。

ホテルのアプリに戻って、ボタンスタイルを採用する機会をもっと探しましょう。

チェックインとチェックアウトのボタンは少し地味に見えます。

それらをより目立つようにするために、私は透明な色合いの背景を持ち、重要なボタンに最適ですが、塗りつぶしスタイルが提供する目立つ外観を必要としないティンテッドボタンスタイルを使用します。

Commandキーを長押しして、アウトラインビューのチェックインボタンとチェックアウトボタンを選択します。

そして、インスペクタのボタンスタイルメニューからティントを選択します。

これはまさに私がこれらのボタンを探していたものです。

次に、このアプリのプロモーションシーンには、新しいティンテッドスタイルにも最適なボタンがいくつかあります。

進み、見てみましょう。 見てみましょう。

キャンバスのミニマップを使用して、プロモーションシーンをダブルクリックして直接ジャンプします。

このシーンには、適切なGetボタンをタップすることで、ゲストが選択できるアクティブなホテルプロモーションのリストが表示されます。

各取得ボタンは画像をオーバーレイし、ティンテッドスタイルの透明な背景によって提供される余分なコントラストの恩恵を受けるでしょう。

先に進み、Commandキーを押しながら、アウトラインビューの3つのGetボタンを選択します。

インスペクタのスタイルメニューから「着色」を選択して、すべてのボタンスタイルを同時に変更します。

それは素晴らしいですね。

着色されたボタンのタイトルと背景色は、アプリの色合いの色に基づいており、適切なレベルのコントラストを提供します。

また、どのプロモーションが選択されたかを示すために、タップされた後、Getボタンを切り替えて外観を変更したいです。

iOS 15で新しいこの動作を実現するために、それらをトグルボタンに設定します。

メニューの下のインスペクタで、「プライマリオプションとして選択」プロパティを切り替えて、選択したボタンを切り替えます。

続行する前に、お客様がヘルプをリクエストできるように、予約シーンに新しいボタンを追加したいと思います。

先に進んでオブジェクトライブラリを開きます...

プレーンスタイルのボタンと、グレー、ティンテッド、フィルドの3つの新しいスタイルを含む、新しいスタイルシステムを使用するようにあらかじめ設定されたボタンがあります。

グレースタイルは、もう少しコントラストを提供する透明なグレーの背景を持っているので、新しいグレーボタンをドラッグして「ヘルプ」ボタンとして機能し、ナビゲーションバーに配置します。

アウトラインビューで新しいボタンを選択します...

そして、ピンチツーズームを使用して、詳しく見てみましょう。

ボタンのタイトルと字幕を設定します...

疑問符のシンボルへのその画像...

画像とタイトルの間にもう少しスペースを追加するには、画像パディングを設定します。

Interface Builderを使用する利点の1つは、変更を試して結果をすばやく確認できることです。

ここでどのコーナースタイルを使えばいいのかわからないので、カプセルスタイルを試して、どのように見えるか見てみます。

それは良さそうですが、それは私が探しているものではありません。 

代わりに、私は希望の外観を得るために大きなコーナースタイルを選択します。

それは簡単でした。見栄えの良いボタンを作成するために必要なすべてが、ボタンインスペクタで直接利用可能になりました。

より高度なスタイルのカスタマイズが必要な場合、カスタム背景設定を設定すると、コーナー半径、ストローク、背景画像などの追加のプロパティを明らかにすることで、よりきめ細かい制御が可能になります。

部屋を予約する前のステップの1つは、部屋に滞在する予定のゲストの数を選択することです。

このシーンには、1名様から4名様までお選びいただけます。

iOS 15は、この機能に最適なポップアップボタンをサポートするようになりました。

ポップアップボタンは、クリックするとアイテムのリストを含むメニューを表示するボタンです。

その後、そのメニューから1つの項目を選択でき、ポップアップボタンの新しいラベルになります。

私はすでにゲストラベルを作成したので、今する必要があるのはポップアップボタンを追加することだけです。

オブジェクトライブラリを開いてドラッグします。

ポップアップボタンはボタンスタイルもサポートしているので、チェックインボタンとチェックアウトボタンに合わせてティントスタイルを選択します。

次に、Optionキーを押しながらドラッグを使用してさらに2つのメニュー項目を作成し、アウトラインビューに既存のメニュー項目をコピーします。

最後に、メニュー項目の値を1から4に設定します。

Mac Catalyst 15を搭載したMacでアプリが実行されている場合、スタイル付きのボタンは自動的にネイティブのmacOSバリアントにマッピングされ、Macでアプリが見栄えを良くしやすくなることに注意してください。

iOSのポップアップボタンは、Mac Catalyst 15でもサポートされるようになりました。また、マウスカーソルがコントロールにカーソルを置いたときにより多くの情報を提供するツールチップもサポートされています。

このアプリのMac Catalystバージョンを計画しているので、コントロールインスペクタの新しいポップアップボタンのツールチップを設定します。

そして、私たちは終わりました。

メニュー項目は、実行時に表示するアクションに接続する必要があることに注意してください。

アプリ全体で新しいボタンスタイルを採用したので、構築して実行しましょう。

これは、新しいグレースタイルのGet Helpボタン、ティンテッドルームオプション、塗りつぶされた「ブックルーム」ボタンで実行されているアプリです。

そして最後に、ティンテッドプロモーションボタン、そして彼らは素晴らしく見えます。

次に、テーブルコンテンツスタイル、階層記号、アクセシビリティをカバーするユセフに渡します。

ユセフ？

ありがとう、ルーク。

私たちが訪問する次のワークフローは、テーブルビューセルのコンテンツ構成スタイルを使用してテーブルビューセルをスタイリングすることです。

ほとんどの素晴らしいホテルには、素晴らしいレストランもあります。

このホテルは変わりません。

最近、私はゲストがレストランのメニューをチェックできるように、アプリにいくつかのビューを追加することに取り組んできました。

私が中断したところから再開しましょう。

彼のテーブルビューコントローラーを2本指でダブルタップして、それに集中します。

この静的なテーブルビューは、ホテルのアメニティのリストを示しており、私は最近、レストランの別のテーブルビュー行を追加しました。

ここのセルのタイトルラベルは、その下の字幕ラベルの上に目立つようにしたい。

新しいテーブルビューセルのコンテンツ構成スタイルの1つは、私が望む外観を与えることができます。

グループ化されたヘッダー、値のセル、グループ化されたフッターなど、新しいセルスタイルで得られるセルレイアウトの一部を次に示します。

これらの新しいスタイルは画像とうまく機能し、ダイナミックタイプなどの機能も無料で入手できます。

それでは、Interface Builderに戻り、このテーブルビューのセルのスタイルを変更しましょう。

ドキュメントアウトラインのすべてのセルを選択し、属性インスペクタの上部にあるスタイルドロップダウンをクリックして、すべての新しいコンテンツ構成スタイルを表示します。

字幕セルを選択します。

新しいスタイルの1つを使用しているので、インスペクタから直接イメージパディングを変更できます。

細胞のラベルとその画像の間に呼吸の余地を置くために、ここでそれをしましょう。

私たちの細胞は現在、より大きく、より明確なタイトルラベルを持っています。

これはまさに私が望んでいたものであり、良い視覚的な改善ですが、私はまだ細胞がもう少し色でできると思います。

次に、階層的なシンボルがここでどのように役立つかを説明します。

iOS 15の新機能で、シンボルは複数のレイヤーを持つことができ、レイヤーごとに色を指定できます。

このレンダリングは、私のシンボルにより多くの色と深みを加えることができます。

これを利用する2つの新しいレンダリングモードがあります。

1つ目はヒエラルキーで、シンボルのプライマリレイヤーの色を指定し、シンボルの他のレイヤーの色をプライマリレイヤーの色の縮小アルファバージョンとして導き出すことができます。

もう1つのモードはパレットで、シンボルのレイヤーの色を個別に設定できます。

新しいシンボルレンダリングモードの詳細については、「SFシンボルの新機能」ビデオをご覧ください。

テーブルビューのシンボルは現在、モノクロモードでレンダリングされています。

しかし、シンボルの主な要素を強調したい。

階層レンダリングモードはこれに最適です。

これは、この新しいモードを使用してレンダリングされたシンボルです。

シンボルのレイヤー間のさまざまな不透明度は、私が望むことを強調しているので、インターフェイスビルダーでこれを採用しましょう。

繰り返しになりますが、すべてのセルが選択された状態で、セルのシンボルのレンダリングモードドロップダウンをクリックします。

Hierarchicalを選択し、アプリの配色に合わせてTint Colorを選択します。

すごい。セルの新しいコンテンツ構成スタイルの1つとシンボルの階層レンダリングモードを使用して、このアメニティビューに新鮮な新しい外観を与えました。

アメニティのビューを更新したので、アクセシビリティについて見てみましょう。

レストランのメニュー項目の1つに関する詳細情報を示すメニュー項目の詳細ビューに注意を向けましょう。

ここでの説明ラベルは、サブヘッドテキストスタイルを使用しています。つまり、動的型をサポートしています。

このラベルはすでにかなり広く、より大きなタイプ設定のいくつかでレイアウトの問題に遭遇するかもしれないと思います。

Xcode 13のInterface Builderの新機能で、iOSシーンがデザイン時にInterface Builderでアクセシビリティ設定にどのように反応するかをプレビューできるようになりました。

ルークが前に述べたように、キャンバスの下部バーにはまったく新しいアクセシビリティオプションがあります。

アクセシビリティボタンをクリックすると、インターフェイスビルダーで調整できるさまざまな設定を示すポップオーバーが表示されます。

一部の設定では、シーンのテキストサイズ、フレーム値、色を変更できます。

これで、キャンバスでこれらの設定を有効にしてプレビューして、ビューが意図したとおりに反応することを確認できます。

さて、説明ラベルに戻り、より大きなタイプのサイズでうまく機能することを確認しましょう。

これを行うには、アクセシビリティポップオーバーを開き、設定を有効にし、ダイナミックタイプスライダーを移動します。

説明ラベルがビューの範囲外になったことに注意してください。

制約ポップオーバーを開き、ラベルに末尾の制約を追加することで、これを修正できます。

また、属性インスペクタからラベルの行数プロパティを変更し、0に設定する必要があります。

これにより、ラベルは必要な数の行にラップされます。

これらの変更により、私のラベルはもはやクリップされなくなり、そのテキストに合うように成長します。

ダイナミックタイプスライダーをもう一度ドラッグすると、説明ラベルがすべてのタイプサイズに適合するようになったことに注意してください。

設計時にアクセシビリティ設定をプレビューできることは、iOSアクセシビリティ設定のビューを調整する際に、より速く反復し、インターフェイスビルダー内にとどまることができるため、本当に強力です。

これらの変更をすべて行ったので、シミュレータで実行されているアプリをチェックしてみましょう。

アメニティテーブルビューのセルは、私たちが望んでいた新しいレイアウトを与えたテーブルビューセルコンテンツ構成スタイルの1つを使用しています。

セルには、階層レンダリングモードを使用するように構成したシンボルがあり、シンボルの主要な要素がより顕著になります。

メニュー項目の詳細ビューをクリックすると、説明ラベルがここにぴったりです。

要約すると、よりコンパクトなデバイスバーのツアーとアウトラインビューの改善から始めました。

強力な新しいボタンスタイルシステムを使用して、アプリのボタンをカスタマイズする方法を見てみました。

iOSとMac Catalystの両方でポップアップボタンを採用する方法と、コンテンツ構成スタイルを使用してテーブルビューセルに新しいレイアウトをすばやく提供する方法について確認しました。

あなたのシンボルはまた、新しいレンダリングモードでより多くの色と強調を得ることができます。

最後に、設計時にアクセシビリティ設定をプレビューすることで、アプリのビューが利用可能な多くのiOSアクセシビリティ設定で意図したとおりに機能することをはるかに簡単にする方法についても説明しました。

私たちは、コードを1行も書かずにこれらすべての変更を行い、アプリを際立たせるものに焦点を当てることにより多くの時間を費やすことができます。

今日話したすべてのツールを使用して、アプリを更新、様式化、近代化することをお勧めします。

そして、「UIKitボタンシステムに会う」と「SFシンボルの新機能」のビデオを必ずチェックしてください。

見てくれてありがとう、そして素晴らしいWWDC21をお過ごしください。

[パーカッシブミュージック]。