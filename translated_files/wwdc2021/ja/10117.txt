10117

♪ベース音楽の演奏♪

♪

Nikhil Palekar: こんにちは、私はNikhilで、CloudKitチームのエンジニアです。

今日は、CloudKit Consoleをご紹介できることを嬉しく思います。

iCloudは、ユーザーのデバイスの機能をクラウドに拡張するための非常に強力なサービスです。

何百万人もの人々がiCloudを使って写真、ファイル、データを安全に保存しています。

iCloudの背後にあるデータベースであるCloudKitは、デバイス間でコンテンツを効率的かつシームレスに同期して、魔法のような体験ができます。

また、クラウドベースのCloudKitサービスは、developer.apple.comを通じてオンラインで管理されます。

今日は、アプリケーションがCloudKitサービスとどのようにやり取りするかを管理するのに役立つ、再設計されたダッシュボードツールのセットであるCloudKit Consoleをお見せできることを嬉しく思います。

コンソールでは、CloudKitデータベースにアクセスして管理し、これまで以上に簡単に物事を成し遂げることができる新鮮な新しいインターフェイスでテレメトリとログを表示することができます。

コンソール全体で、コンテンツは、上部のコンテキストとアカウント情報、左側のナビゲーションとプロパティ、中央の詳細など、他のAppleアプリケーションに慣れているのと同じ使い慣れた構造に従います。

この新しいレイアウトから、機能を簡単に選択し、詳細を深く掘り下げることができます。

新しいデータベースアプリのいくつかの機能を見ることから始めましょう。

CloudKitデータベースを初めて使用する場合、ショートストーリーでは、CloudKitデータベースはユースケース用に定義されたコンテナ内に存在し、開発者は開発と本番の2つのデータベース環境を使用します。

データベーススキーマは、アプリ開発者が開発中に加えた変更に慣れると、開発から本番に昇格されます。

始めると、タイムチェックのスキーマの作成を使用するか、コンソールでデータモデルを定義することで、開発データベースをすばやく反復できます。

準備ができたら、スキーマを本番環境にデプロイできます。CloudKitは、データベースの古いクライアントを壊さないように更新の整合性を確認します。

データベースアプリを起動すると、開発者チームが所有するコンテナのリストが表示されます。

次にコンソールを起動すると、最後に訪問したコンテナに直行します。

ドロップダウンで開発環境を選択したので、スキーマセクションを見て、レコードタイプがどのように定義されているかを見てみましょう。

レコードタイプは、CloudKitデータベースのデータ構造を定義するために使用されます。

既存のレコードタイプのリストをすばやく表示し、クリックしてフィールドとインデックスの詳細を表示できます。

フィールドの追加は簡単です。

新しいフィールドの名前を入力し、対応するタイプを選択するだけです。

コンソールでのインデックスの管理も簡単です。

このページから、既存のインデックスを簡単に表示したり、フィールドを選択して3つのインデックスタイプのいずれかを選択して、クリックして新しいインデックスを作成したりできます。

ここでは、著者フィールドをアルファベット順にソートするためのソート可能なインデックスを追加しています。

そして、スキーマを管理している間、パブリックデータベースのセキュリティロールがどのように管理されているかを簡単に見てみましょう。

以前にCloudKitを使用したことがある場合は、すでにセキュリティロールを使用してパブリックデータベースのレコードへのアクセスを管理している可能性があります。

そして今、これまで以上に簡単に定義と管理ができるように、新しいUIがあります。

アプリのスキーマが定義されたので、コンソールを使用して、開発中に保存したデータを探索しましょう。

このビューから、レコードを作成または表示できます。

新しいUIは、データベース、ゾーン、最後にレコードタイプから始めて、表示するレコードを取得する方法のコンテキストを選択するための左から右へのフローを表示します。

コンテキストを設定すると、リストビューでレコードを表示し、詳細ビューで詳細を見ることができます。

リクエストを絞り込む必要がある場合は、新しいクエリビルダーを使用してフィルターを適用して、必要な正確なレコードを取得できます。

では、CloudKitに新しいレコードタイプを書き込むアプリの機能を構築しており、CloudKitが開発環境で実際に何を受け取るかを確認したいとしましょう。

新しいUIでは、クエリを一度設定して保存するだけです。

...そして、私の開発が進むにつれて、再びそれに戻ってきます。

コンソール全体で使用されるURLも、特定の機能を直接指すように構成されています。

たとえば、レコードビューにすばやくアクセスしたい場合は、Safariのブックマークに直接リンクを追加できます。

新しいコンソールでは、データとスキーマの管理が迅速かつ直感的になり、各機能にわたって使い慣れたユーザーエクスペリエンスが得られます。

スキーマを作成し、開発に適切なデータが保存されていることを確認したので、スキーマを本番環境にデプロイする準備が整いました。

先ほど、開発と本番の違いについて述べたので、コンソールがスキーマを本番にデプロイする方法をより簡単かつ安全にする方法をお見せしましょう。

「Schemaの変更を展開する」をクリックすると、本番展開に適用される変更のクリーンで実用的なビューが表示されます。

ここでは、以前のプロダクションスキーマと開発環境から適用される変更との間で変更されたすべてを見ることができます。

本番変更は元に戻すことができないため、この差分ビューは、意図した変更のみが本番環境で終わることをすばやく確認する方法を提供します。

新しいデータベースアプリの機能はこれでおそれなので、テレメトリを見てみましょう。

データベースを設定し、スキーマを本番環境に宣伝した後、開発者ライフサイクルの次の部分に移動し、アプリがCloudKitとどのようにやり取りしているかを観察し、調査することができます。

コンソール内のテレメトリアプリは、私のアプリがデータベースとどのように相互作用しているかに関する重要な指標を示す多くのチャートを提供します。

リクエストレート、サーバーのレイテンシ、エラー数、平均リクエストサイズはすべてフィルタリング可能なチャートに表示され、必要なデータを見つけるのに役立ちます。

これらのチャートは、アプリの動作が時間の経過とともに変化する時期を特定し、アプリの新しいバージョンが予期しない方法で動作しているかどうかについてのシグナルを与えるのに役立ちます。

では、ログアプリを見てみましょう。

コンソール内のログアプリを使用すると、さらに深く掘り下げることができます。

CloudKitデータベースからの詳細なロギング出力が表示されるので、アプリのリクエストが実際にどのように処理されたかを確認できます。

このアプリは、開発中と生産中の両方で、デバッグと調査に最適なツールです。

アプリの開発と出荷にあたり、CloudKit Consoleの使用を気に入ると思います。

データベースアプリの新しいスキーマ管理とクエリ機能を試して、CloudKitの使用方法に関する実用的な情報を提供するログとテレメトリアプリの新しいインストルメンテーションを確認してください。

また、developer.apple.comでの新しいドキュメントと、GitHubで役立つサンプルプロジェクトがあることにも興奮しています。

最後に、CloudKitの新機能について学ぶことに興味がある場合は、「CloudKitを探索する」コレクションを確認してください。

今日はお時間をいただきありがとうございます。

CloudKitコンソールの出会いを楽しんでいただけたでしょうか。

♪