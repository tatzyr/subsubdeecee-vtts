10251

こんにちは、私はトムです。「UIKitとAppKitのSFシンボル」へようこそ。

今日は、SFシンボルの新機能をアプリに実装する方法のツアーをご案内します。

まず、さまざまなカラーモードとその使用方法について説明します。 それらを使用する方法について説明します。

次に、設定を組み合わせて必要な効果を得る方法について説明します。 必要な効果を得ることができます。

そして最後に、これらの色付きのシンボルをアトリビュート文字列で使用することを検討します。

AppKitとUIKitの両方に適用される例が表示されます。

新しいAPIは両方のフレームワークで同一であるため、いくつかのフレームワーク固有のニュアンスを除いて、一方に適用されるものは他方にも適用されます。

新機能は、SFシンボルに色を追加することを中心としています。

AppKitはmacOS 11で多色記号を追加しましたが、UIKitはiOS 15でそれらを追加しています。

今年のリリースでは、SFシンボルのカラーレンダリングモードが追加されています。

そして、明確にするために、これらのレンダリングモードはすべてのプラットフォームで動作します。

新しいレンダリングモードをサポートするために、シンボルは異なるレイヤーを持ち、それぞれが異なる色を持っています。

これらのレイヤーは階層で定義されており、あるレイヤーが他のレイヤーよりも目立つことを意味します。

これは、一次、二次、三次の3つの層があることを意味します。

iOSでは、シンボルは新しいレンダリングモードを有効にするためにテンプレートモードが必要です。

macOSでは、新しい設定を適用すると、正しいテンプレートモードが自動的に設定されます。

また、SFシンボルを初めての場合は、WWDC19の「SFシンボルの紹介」をチェックしてください。

私たちが見る最初のレンダリングモードは、モノクロシンボルです。

これがボイスメールアプリです。

このUIでは、いくつかのシンボルが使用されています。

1つのモノクロシンボルと、異なるカラーモードを使用する他のいくつかのシンボルがあります。

しかし、まずモノクロのシンボルに焦点を当てて、後で他のものに戻ります。

名前が示すように、モノクロのシンボルには1つの色しかありません。通常、ビューの色合いまたはアクセントカラーです。

そして、この結果を達成するために、新しいシンボル画像を作成し、それを画像ビューに割り当て、色合いまたはアクセント色を設定してシンボルの色を設定します。

そして、ここでは何も変わっていません。デフォルトの動作であるため、モノクロシンボルをレンダリングするために余分な設定は必要ありません。

そのため、iOS 15とmacOS 11以前はモノクロが唯一のレンダリングモードでした。

色を指定するには、画像ビューに色合いまたはアクセント色を設定するだけです。それだけです。

既存のモノクロモードがなくなったので、新しいモード、階層的なカラーシンボルについて話すことができます。

Macの階層記号の良い例は、コントロールセンターで使用されるアイコンです。

コントロールセンターでシンボルが使用されている場所がいくつかありますが、表示セクションにズームインしましょう。

ここではいくつかのシンボルが使用されています。中央のトグルボタンの列と、デバイスのリストのアイコンです。

デバイスのシンボルは、それらの上のトグルボタンとは異なる色合いで、これらは階層的な色のシンボルです。

階層カラーモードは、シンボルのレイヤー階層を使用して各レイヤーをカラー化し、提供された色がプライマリレイヤーカラーとして使用されます。

二次層と三次層は、不透明度が徐々に低下する原色のバリエーションを得る。

既存のタイプのシンボル構成とまったく同じように機能する、新しいタイプのシンボル構成でカラーモードを指定します。

また、imageViewのシンボル構成をこのタイプの構成に設定すると、シンボルは階層的なカラーシンボルとして表示されます。

階層的な色記号の配色は1つの色に基づいており、他の色は不透明度を減らすことによってその1つの色から派生しています。

レイヤー階層はここで重要です。

1つのレイヤーが欠落している場合、関連する派生色は使用されません。

3番目のカラーレンダリングモードもあります:パレット。

私たちが発見するように、それは階層的なカラーレンダリングモードに似ていますが、また異なります。

ボイスメールの例に戻りましょう。

右側の3つのボタンにはそれぞれ複数の色があり、それぞれに異なる色があります。

これらのボタンを一歩ずつ構築します。

まず、目的の画像でボタンを初期化します。

これには新しいボタン設定を使用しています。

しかし、これらのプレーンな画像は、私たちが望むものではありません。

画像は円の形をしており、塗りつぶされている必要があります。

以前は、シンボル名に目的の修飾子を追加することでこれを行うことができましたが、今ではより良い方法があります:画像のバリエーション。

名前が示すように、画像のバリアントを使用する場合は、名前を手動で変更することなく、画像の別のバリアントを要求できます。

まず、画像を円に変えましょう。

次に、それらの円に素敵な塗りつぶしを追加します。

ボタンコンテナビューでバリアントを指定しているため、これらのバリアントはすべてのボタン内のすべての画像に適用されます。

画像にそのバリアントがない場合は、最初に指定された画像が使用されます。

バリアント仕様はビュー階層を伝播し、その階層の画像ビューは魔法をかけるためにそれらを拾います。

形が邪魔になったので、これらのシンボルのそれぞれの色をどのように指定しますか?

さて、色のパレットを指定する新しいタイプのシンボル構成を作成できます。

これらの色は、階層的な色構成と同様にレイヤー階層に適用されます。

しかし、ここでは、派生色を使用するのではなく、明示的に指定された色を使用しています。

また、パレットカラーのリストに新しいタイプの色を使用しています。ティントカラーです。

これは、ビューが適切なレイヤーに色合いの色を自動的に適用することを意味します。

そして、次のボタンについては、以前と同じように行います。

ベースイメージをロードし、適切な色構成を構築し、ボタン構成に適用します。

そして、この場合、以前とまったく同じように見えますが、ここには落とし穴があり、後で説明します。

そして、同じシナリオは最後のボタンでも機能しますが、色が違うだけです。

そして、以前のように、なぜここで白を明示的に指定しなければならないのか疑問に思うかもしれません。

モノクロのシンボルを使って正しく着色することはできませんか?

答えはノーです、私たちはできません、そしてこれは私が前に言及したキャッチです。

私たちのデザイナーは、これらのシンボルの内側の部分は常に白でなければならないと指定しました。

そして今までは、モノクロ記号を使用していても、偶然に正しい結果が得られていたでしょう。

どうして？私たちはライトモードでした。

しかし、ダークモードに切り替えると、モノクロシンボルは望ましい結果を与えません。

これは、モノクロバージョンが内側の部分にノックアウトを使用しているため、背景が隙間から出血するためです。

さて、パレットレンダリングモードを使用することで、これらのボタンがさまざまなユーザーインターフェイススタイルに正しく表示されるようにします。

私は前に新しい色について言及しました:ティントカラー。

これは、使用されているビューの色合いの色に解決されるUIKitの新しいダイナミックカラーです。

これは、シンボルレイヤーの色を指定するときに特に便利ですが、他の色を使用できる場所ならどこでもこの色を使用することができます。

ただし、ダイナミックな色に関するルールは依然として適用されることを覚えておいてください。

ダイナミックカラーがどのように機能するかの詳細については、WWDC19の「iOSでダークモードを実装する」セッションを参照してください。

一部のシンボルには2つのレイヤーしかありません。

たとえば、セカンダリレイヤーが欠落しているシンボルがたくさんあります。

これらの種類のシンボルのパレットモードをどのように処理しますか?

これらの良い例は、一次層と三次層のみを持つデバイスシンボルです。

このiPadのシンボルを2層の色で色付けするにはどうすればよいですか?

シンボルは最大3つのレイヤーを持つことができるので、各レイヤーに1つずつ3つの色を指定できます。

この場合、レイヤーがないため、二次色は使用されません。

ただし、2つのレイヤーのみのシンボルに対してこれを行う別の方法があります。

これらのシンボルについては、構成で2色のみを指定でき、色は利用可能なレイヤーに順番に適用されます。

前者の方法は、色が正しいレイヤーに直接マッピングされるため、レイヤーの数が混在する関連シンボルのパレット色を指定する方法の一貫性を可能にします。

後者の方法は、シンボルに2つの層しかないことを確かに知っているときの利便性です。

パレット設定は、シンボルのレイヤー階層に適用される明示的な色セットを指定します。

階層レンダリングモードとは異なり、パレットレンダリングモードは派生色を作成しません。

また、階層レンダリングモードと同様に、各シンボルレイヤーの階層レベルは重要です。

3層未満のシンボルに便利なソリューションもあります。

これにより、最後のカラーレンダリングモードであるマルチカラーに導きます。

前に述べたように、このカラーモードは昨年AppKitとSwiftUIに追加されましたが、今年はUIKitに導入されました。

これらのカテゴリの一部には、複数の色の画像があります。

これらは多色のシンボルです。

これをどのように実装するか見てみましょう。

まず、各セルの画像を読み込む必要があります。

今のところ、これらは通常のシンボルであり、デフォルトではモノクロモードになります。

次に、多色のシンボルが欲しいことを示す必要があります。

これを行うには、シンボルの多色バリアントを要求する設定を作成し、その設定を画像ビューに割り当てます。

しかし、1つのアイコンは変わりませんでした。そのシンボルは多色をサポートしていません。

では、どのシンボルが多色をサポートしているかをどうやって把握しますか?

見つける簡単な方法は、SFシンボルアプリを使用することです。

シンボルを検索し、インスペクタを使用して、シンボルがサポートしている演色モードを確認します。

例えば、私たちの炎のシンボルはモノクロのみをサポートしています。

しかし、肺のシンボルは4つのカラーレンダリングモードすべてをサポートしています。

さらに、1行のコードを書かなくてもシンボルがどのように表示されるかをよりよく理解するために、ここで各レイヤーのカラーマッピングで遊ぶこともできます。

私たちの例に戻りましょう。

したがって、これらのシンボルのすべてがマルチカラーをサポートしているわけではないため、シンボルを正しく表示するには、TintColorを手動で正しい値に設定する必要があります。

一部の多色シンボルには色合いのレイヤーがあり、ビューの色合いやアクセントの色の影響を受けます。

そのようなレイヤーのないシンボルは影響を受けません。

私たちの例では、それらのどれもそうしないので、すべてがそのままです。

構成の名前から推測したように、多色構成は、シンボルの多色レンダリングの好みを示します。

前に述べたように、すべてのシンボルに多色のバリエーションがあるわけではありません。

マルチカラー構成を他のカラー構成の1つと組み合わせることができますが、それについては後で詳しく説明します。

その結果、2つのカラーモードをサポートする構成になります。利用可能な場合はマルチカラー、それ以外の場合は他のカラーモードです。

階層モードとパレットモードを組み合わせると、相互に排他的であるため、最後に指定されたモードになることに注意してください。

次に、そのカラーモードがサポートされていない場合、システムはモノクロモードを使用します。

したがって、多色記号には、コードで変更できない色の固定セットがあります。

さらに、一部のシンボルには、色合いまたはアクセントカラーを使用してレンダリングされるレイヤーがあります。

そして、これが機能するためには何もすることはありません。

シンボルは、表示時にイメージビューから適切な色合いまたはアクセントカラーをピックアップします。

さて、4つのモードすべてと、コードでそれらを使用する方法について説明します。

しかし、Interface Builderでも同じことができますか?

幸いなことに、答えはイエスです。

Xcodeは、IDEから直接カラーレンダリングモードを設定するための同様の機能を追加しました。

ここでは、Planetsアプリのストーリーボードを表示するXcode Openがあります。

ImageView UIが拡張され、カラーレンダリングモードを指定できるようになりました。

また、結果のカラー構成は、既存の構成と組み合わせることもできます。

Interface Builderのこれらすべての新機能についてもっと知りたい場合は、今年の「スタイルでインターフェイスを構築する」をチェックしてください。

これらすべての異なるカラーモードについて話したので、それらを他の構成と組み合わせて、より複雑な効果を得るにはどうすればよいですか?

幸いなことに、それはそれほど難しくありません。

今回はショートカットアプリから別の例を見てみましょう。 ショートカットアプリから。

各アクションのアイコンはかなり大きいですが、階層的なカラーレンダリングモードもあるようです。

したがって、2つの構成が必要です。1つはポイントサイズを指定するため、もう1つは色構成を指定するためです。

しかし、私たちは1つしか適用できません。

それらをどのように組み合わせますか?

これを行う簡単な方法があることが判明しました。

2つの構成を組み合わせる方法があり、その結果、両方の構成の要素を持つ構成になります。

この例では、2つの構成を作成します。1つはポイントサイズを指定するため、もう1つは階層色を指定するためです。

次に、適用方法を使用してそれらを組み合わせて、最終的な構成を作成します。

そして、その設定は画像を表示する画像ビューに適用され、望ましい結果が得られます。

このメカニズムは色構成だけに限定されないことに注意してください。

これは他のタイプの構成でも使用できます。

たとえば、テキスト、スタイル、重みを組み合わせます。

今、私たちは異なる構成を組み合わせる方法を知っています。

1つのトピックが残っています。帰属文字列にカラーシンボルを使用することです。

この最後の例を見てみましょう。

これは、さまざまなホテルや利用可能な部屋に関する情報を一覧表示する架空のアプリです。

記号がテキストと組み合わされている場所がいくつかあります。

しかし、部屋のアメニティと、このテキストをどのように実装するかに焦点を当てましょう。

それはかなりシンプルですが、少し精巧です。

画像の添付ファイルでアトリビュート文字列を作成する必要があります。

まず、正しい色構成を使用して画像をロードします。

この場合、階層的な色構成を使用しています。

この画像を使用してテキスト添付ファイルを作成し、その添付ファイルを使用して帰属文字列を完成させます。

そして、これは利用可能なすべてのアメニティに対して繰り返されます。

テキストを表示するラベルでは、階層的な色構成に使用したのと同じ正しいフォントと同じテキスト色も指定します。

モノクロシンボルは自動的にテキストの色を選択しますが、色構成のシンボルの場合は、色を明示的に指定する必要があります。

また、カラーシンボルは、モノクロのシンボルと同様に、文字列で指定されたフォントサイズをピックアップします。

これらのステップの後、私たちが望む結果が得られます。帰属文字列のシンボルの統合のおかげで、適切なコンテンツ、色、サイズのラベルです。

既存のものに加えて、SFシンボルに3つの新しいカラーモードを導入し、アプリでそれらを使用する方法を説明しました。

シンボルは、アプリに高品質の画像を追加するのに最適な方法です。

色付きのシンボルはそれを拡大し、さらに多くの可能性を可能にします。

このセッションを楽しんだ場合は、いくつかの関連セッションを必ずチェックしてください。

新機能の入門書については、「SFシンボルの新機能」をご覧ください。

または、「SwiftUIのSFシンボル」を見て、SwiftUIで新しいシンボルを使用する方法を確認してください。

見てくれてありがとう、そして今、素晴らしいアプリを作りに行きましょう!

[明るい音楽]。