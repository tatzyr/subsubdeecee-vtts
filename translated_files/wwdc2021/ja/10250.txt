10250

こんにちは、WWDCへようこそ。

私の名前はマイクです。今日は、SFシンボル3で導入された新機能を利用したカスタムシンボルを作成する方法を説明します。

まず、カスタムシンボルとは何か、いつ使用したいのかをまとめます。

カスタムシンボルには、SVGテンプレートでの作業が含まれます。

SFシンボル3では、まったく新しいテンプレートバージョンがあるので、以前のバージョンからの変更について説明します。

テンプレートを生成し、シンボルを編集し、モノクロ以外のレンダリングモード用に準備する方法を説明します。

注釈、レンダリングモードデータをシンボルに追加するプロセスについて説明します。

ワークフローに大きな影響を与える可能性のある、より高度なテクニックについて説明します。

そして最後に、Xcodeのエクスポートとカスタムシンボルの配布をカバーして締めくくります。

始めましょう。では、カスタムシンボルとは何ですか?

さて、SFシンボルは2019年に導入されました。

最初のリリースでは、アプリで使用できる1,500以上のシンボルがありました。

それ以来、シンボルのライブラリは成長したばかりです。

2年後、SFシンボル3では、合計3,000以上のシンボルがあります。

現在、これらのシンボルは多種多様な主題とカテゴリをカバーしています。

しかし、あなたのアプリには、円の中のティーカップなどの既存のSFシンボルによって完全にキャプチャされていない特定のニーズがあるかもしれません。

ここでカスタムシンボルの出番です。

カスタムシンボルが必要な場合は、それを一連のベクトルパスとして描画し、カスタムシンボルテンプレートに配置します。

テンプレートはSVG形式であり、あなたのデザインといくつかのガイドが含まれています。

このテンプレートは、あなた自身のシンボルがSFシンボルが提供するすべての機能を利用するためのメカニズムです。

これには、テキストの横にあるシンボルの見栄えを良くするためのタイポグラフィの配置、リストやテーブルビューで使用するときにシンボルが互いに光学的に中央に配置されていることを確認するための余白が含まれます。

テキストを一致させ、iOSのアクセシビリティ太字などの機能に調整するための複数の重み...

そして最後に、異なるUI要素のコンテキストに合わせて調整するための3つのウェイトマッチスケール。

だから、これらはSFシンボルとカスタムシンボルのハイライトです。

カスタムシンボルテンプレートの基本を確認するには、WWDC 2019の「SFシンボルの紹介」を見ることをお勧めします。

SFシンボルの背後にあるデザインの詳細については、WWDC 2021の「SFシンボルの新機能」をご覧ください。

カスタムシンボルを使用するタイミングがわかったので、それらを可能にするテンプレートを確認しましょう。

SFシンボル3の新機能に合わせて、テンプレートの新しいバージョン、バージョン3.0があります。

このバージョンのテンプレートには、バージョン2.0と比較していくつかの重要な新機能があり、Xcode 13以上が必要です。

3.0では、左マージンと右マージンのガイドラインにはより明示的な名前があり、それらが対応するデザインバリアントを示しています。

たとえば、これらの余白には「Regular-M」という接尾辞があります。

これは、光学アライメントをさらに制御するために、テンプレート内の任意のバリアントにマージンを追加することができ、デザインバリアントの1つに一致する接尾辞がある限り、それらは尊重されることを意味します。

さらに重要なことに、テンプレートのこの形式は、シンボルがさまざまなレンダリングモードでどのように見えるべきかに関する情報を埋め込むことができます。

モノクロやマルチカラーなどの既存のモードのデータや、新しい階層モードやパレットモードで使用されるデータを埋め込むことができます。

これに加えて、3.0テンプレートは、より少ないことをすることでより多くのことを達成できるいくつかの高度な機能をサポートしています。

これについては、「高度な技術」のセクションで詳しく説明します。

新しいテンプレートの完全な仕様については、Developer.Apple.com/SF-Symbolsで更新されたドキュメントをご覧ください。

新しいテンプレートに慣れたので、カスタムシンボルに取り組みましょう。

だから私は同僚の何人かとカードゲームアプリに取り組んでおり、SFシンボルアプリは私たちが必要とする多くのシンボルをカバーしています。

カードのデッキを表すために使用できる4つのスーツとスタックがあります。

唯一欠けているのは、私たちのアプリで特別な役割を果たすハートの女王を表すために使用できるものです。

私は上にハートが付いた王冠のシンボルを描いています。

既存のSFシンボルをカスタマイズできるように、SFシンボルアプリを開くことから始めることができます。

このようにして、ステムの厚さ、スケール、アライメントの基準点があります。

SFシンボルアプリで「クラウン」を検索すると、素敵な未記入のバージョンが利用可能であることがわかります。

これは素晴らしい出発点になるでしょう。

私が追加する必要があるのは、一番上のハートだけです。

「クラウン」を選択し、コンテキストメニューから「カスタムシンボルとして複製」を選択できます。

そして、サイドバーのカスタムシンボルセクションの下に、私が複製したばかりのクラウンのセルがあります。

「Custom.crown」は少し曖昧なので、名前を変更します。

「Queen.heart」は、私が考えていることをはるかに説明しています。

さて、これは新しいカスタムシンボルを始めるのに良い方法ですが、1.0と2.0のカスタムシンボルテンプレートとして過去数年間のシンボルがあるかもしれません。

それは問題ではありません。

既存のシンボルをアプリにドロップすると、自動的に現在のコレクションに追加され、3.0テンプレートにアップコンバートされます。

シンボルが私のコレクションに入ったら、「クラウン」のようなSFシンボルをコピーしても、「Teacup.circle」のようなカスタムシンボルをインポートしても、スケッチ、イラストレーター、フィグマなどのデザインアプリで編集するためにエクスポートできます。

これを行うには、ファイルエクスポートテンプレート、またはCommand + Eを選択できます。

これにより、3.0テンプレートがモノクロでエクスポートされるので、カスタマイズできます。

SFシンボルアプリに由来するシンボルの場合、3.0テンプレートの初期設定には、静的と可変の2つのオプションがあります。

どのセットアップを選択するかは、設計目標によって異なります。

静的セットアップは2.0テンプレートに似ているので、馴染みがあるはずです。

中規模では、27セットのパスと1セットの明示的なマージンが定期的にあります。

特定の重量とスケールをターゲットにしている場合、またはシンボルの1つまたは2つのバリアントのみを設計する予定の場合、この設定はうまく機能します。

一方、変数設定では、3組のパスと3組のマージンを持つ3.0テンプレートが生成されます。

すべてのデザインバリアントをサポートする予定の場合は、他の24を生成するために必要なデザインバリアントの最小数を提供するため、このセットアップから始めることに興味があるかもしれません。

これには、すべてのパスが非常に高いレベルの互換性と一貫性を持つ必要があります。

しかし、今これについて心配しないでください。

これらの要件とテンプレートのこの設定については、後で詳細に再検討します。

今のところ、1つまたは2つのバリアントしか描画しないので、静的セットアップをエクスポートします。

デザインアプリケーションでテンプレートを開いたら、編集を始める準備が整いました。

2.0テンプレートで作業するように、私は必要のないデザインバリアントを削除し、始めるためにいくつかだけをデザインすることができます。

互換性のあるパスがないテンプレートの場合、Regular-Mediumはまだ必要なので、それから始めます。

王冠の真ん中の尖塔に心臓のためのスペースを作ります。

そして、このシンボルをマルチカラーモードで見栄え良くしたいので、後でシンボルの特定の部分に色を割り当てることができるようにパスを調整します。

これらの調整により、私は今、クラウンの中空部分のための単一の閉じた形状を持っています。

次に、心に焦点を当てます。

今、シンボルを編集する際に、ストロークシンボルに取り組んでいるので、レギュラーミディアムの茎の厚さに合わせてストロークを使用するかもしれません。

これは、心臓のプロポーションとサイズを反復する際に柔軟性を与えてくれます。

しかし、注意してください、私はデザインに満足したら、ライブストロークをパスに変換するようにしてください。

パスに変換すると、ストロークされた図形を後で色で塗りつぶすことができます。

パスに変換するもう1つの利点は、ストロークが十分に正確でない場合のために、いくつかのマイナーな光学調整を行うことができることです。

ここのように、心臓の上半分では、ストロークが大きすぎて内側が丸いです。

パスに変換したので、曲線を微調整して不格好に見せることができます。

1つのデザインバリアントが描かれたので、シンボルをモノクロ以外のレンダリングモードをサポートしたい場合は、心に留めておくべきいくつかの項目について話す良い機会です。

最終的なデザインでライブストロークを使用することは避けてください。

代わりに、結果の図形が色や階層グループを取ることができるように、任意のストロークをパスに変換するようにしてください。

オープンパスの使用は避けてください。

これらは、接続されていない開始点と終了点を持つパスです。

閉じた塗りつぶし領域がないため、これらの形状は色を取ることができません。

代わりに、デザイン内のすべての形状が定義された塗りつぶし領域で閉じられていることを確認してください。

グラデーションやドロップシャドウなどの効果など、複数の色を含む特別な塗りつぶしは避けてください。

これらが存在する場合、シンボル用に作成した多色または階層データを上書きします。

代わりに、追加の効果のない標準的なフラットフィルに固執してください。

さて、私のデザインツールに戻ると、テンプレートはかなりむき出しです。

シンボルがiOSのアクセシビリティ太字機能に反応するように、セミボールドを追加したいかもしれません。

これを行うには、既存の図面を目的のレイヤーにコピーし、そこから調整することをお勧めします。

これは、デザインバリアント全体で同じ数のパスが使用されるため、入るのに良い習慣です。

多色または階層データを持つシンボルを生成する場合は、すべてのデザインバリアントのパス数を維持することが要件です。

この例では、その番号と順序を示すためにパスに色を付けました。

どちらのデザインバリアントにも4つのパスがあります。

最初の2つのパスがフォルダを作成し、3番目のパスとして円、4番目のパスとしてプラス記号があります。

その結果、これらの2つの図面は多色で素晴らしく見えます。

これらの図面には4つのパスもありますが、細心の注意を払うと、右側のパスの順序をシャッフルしたことに気付くでしょう。

フォルダのメインストロークは、左側の図面の最初のパスですが、右側の図面の3番目のパスです。

デザインが同じ数のパスを持つが、順序が異なる場合、レンダリングは大きく異なる可能性があります。

そして、これらの図面を多色でレンダリングすると、それらは一致しません。

プラスバッジの緑色は、右側のデザインバリアントのフォルダに適用されます。

クイーンハートのシンボルに戻ります。

今のところ素晴らしく見えます。

そして、私は自分のデザインバリアントを作成する方法に慎重だったので、マルチカラーと階層モードをサポートするために注釈を付けることで、それをさらに良くすることができます。

その前に、シンボルをアプリにインポートし直す必要があります。

既存のセルにドロップするだけで、SFシンボルアプリで更新する必要があります。

今、シンボルに注釈を付ける必要はありませんが、モノクロ以外のレンダリングモードでシンボルの外観を制御したい場合は、それは良い考えです。

注釈を付けるには、シンボルを構成する個々のパスをビルディングブロックとして使用します。

これらから、レンダリングモードごとにレイヤーのセットを作成します。

レイヤーは、単にいくつかの関連するレンダリングデータを持つパスの集まりです。

ここには、7つのパスを持つ王冠の層と、2つのパスを持つハートの層があります。

マルチカラーモードのレイヤーには色が割り当てられ、階層モードのレイヤーには階層グループが割り当てられます。

レイヤーには明示的なz順序があり、上部のレイヤーは下のレイヤーをブロックします。

これは、デザインアプリケーションでレイヤーを作成するのと変わりません。

注釈を開始するには、アプリでシンボルを選択し、ギャラリービューに入ります。

右側のインスペクタで、レンダリングモードタブを選択して、シンボルをプレビューして注釈を付けることができます。

モノクロ、階層、パレット、マルチカラーから選べます。

モノクロ以外のモードでは、アクティブモードに対応するレイヤーを追加および編集できます。

そして、中央にはプレビューがあります。

ここでは、私たちが自由に使えるすべてのパスと対話し、それらをレイヤーに割り当てることができます。

まずはマルチカラーレンダリングモードから始めます。

王冠用の新しいレイヤーを作成します。

その後、レイヤーの色を選択できます。

マルチカラーレイヤーの場合は、さまざまなシステムカラーから選択することも、独自のカスタムカラーを使用することもできます。

ライトモード、ダークモード、ハイコントラストモード、および異なる活気のコンテキストで見栄えを良くするために、システムの外観の変化に適応するため、可能な限りシステムが提供する色を使用することをお勧めします。

王冠にはシステムイエローを使います。

そして、それは1つの層が完了しました。さて、心臓のためだけに。

私はそれを赤で独自のレイヤーに追加します。

シンボルの中空部分に色を設定することで、マルチカラーモードでクラウンにもう少し深みを加えたいです。

パスは任意の数のレイヤーで使用できます。

だから、ストロークと塗りつぶしの効果を達成するために、私は透明にしたいパスを持つレイヤーを追加し、それをより低い不透明度に設定しました。

心臓にも同じことをします。私は心臓にも同じことをします。

それは素晴らしいですね。

次に、階層に移ります。

以前のようにレイヤーを構築できますが、色の代わりに、一次から三次までの階層グループを割り当てます。

階層データは、階層およびパレットレンダリングモードで使用されます。

セカンダリにクラウンのレイヤーを追加します。

そして、プライマリの心臓。

プレビューでは、心臓が完全に不透明ではないため、王冠のビットが心臓を通して重なっていることがわかります。

これは、重なり合う図形を扱う際の一般的な問題です。

これらのオーバーラップがどのようにレンダリングされるかを制御するために、各レイヤーには右側にトグルがあります。

非アクティブの場合、透明なレイヤーは、左に示すように、以下のレイヤーと混ざります。

これがデフォルトの動作です。

アクティブな場合、透明なレイヤーは、右に示すように、その背後にあるものをクリアし、他のレイヤーが存在しないかのようにレンダリングされます。

クリアバックトグルセットで、今、私のシンボルは期待どおりに動作します。

階層的な注釈データはパレットレンダリングモードでも使用されるので、レイヤーのインタラクションも見栄えが良いことを確認します。

これは素晴らしく見えます。

シアン層は透明ですが、後ろのクリアが有効になっているので、その後ろのインディゴクラウンは見えません。

パレットレンダリングモードでは、階層のような1色ではなく、シンボルに2色から3色を割り当てることができます。

これら2つのモードが階層的な注釈を解釈して色を適用する方法の違いを確認しましょう。

Hierarchicalは1つの色を使用し、それをシンボルのレイヤーに適用し、階層レベルに基づいて不透明度を変化させます。

この場合、一次グループと三次グループを持つシンボルがあります。

パレットは2〜3色を取り、その動作は渡された色の数によってわずかに異なります。

2つの色を渡すと、レベルに関係なく、利用可能な階層グループ間で色が分配されます。

このシンボルでは、2つのグループしかないため、最初の色はプライマリグループに適用され、2番目の色は三次グループに適用されます。

3つの色を渡すと、それぞれが対応する階層グループに適用されます。

最初の色は一次色、2番目の色は二次、3番目の色は三次に割り当てられます。

すでに注釈を付けたシンボルの編集を続ける必要がある場合は、テンプレートをエクスポートし、デザインツールでモノクロ表現を編集します。

次に、シンボルを再インポートし、注釈が期待どおりにレンダリングされていることを確認します。

注釈データを保持したい場合は、注釈付きシンボルのパスを変更する際には特別な注意が必要です。

このデータはデザイン全体で同じ数のパスを必要とするため、ポイントを安全に追加、削除、調整できます。

しかし、パス全体を削除または並べ替えると、デザインが注釈データと同期しなくなります。

このような場合、新しいパス構造を説明するためにシンボルに再注釈を付ける必要があります。

今、私は2つのデザインバリアントで私のシンボルを持っており、それは注釈が付けられているので、他のレンダリングモードでは見栄えがします。

私はここで止まることができますが、スケールと重量の他の組み合わせをサポートする必要がある場合はどうなりますか?

このセクションでは、3つ以上のデザインバリアントを描画する予定がある場合に、時間を節約できるカスタムシンボルを操作するテクニックについて説明します。

過去には、テンプレートの残りのバリアントを1つずつ入力し続け、目的の重量とスケールに合わせてパスを調整しました。

しかし今、SFシンボル3では、これを行うためのはるかに良い方法があります。

互換性のあるデータを含む3つのデザインバリアントのみを提供すると、残りのテンプレートを無料で入手できます。

これは、3.0変数テンプレートを要求するときに得られるSVGの構造です。

互換性のあるデザインを製造するための要件を掘り下げてみましょう。

まず、デザインソースと呼ぶものを確認します。

これらは超軽量-小、レギュラー-小、黒-小です。

それらが存在する場合、パスはソース全体で評価され、それらが一致するかどうかを確認します。

比較のために、レギュラー・スモール・ソースとブラック・スモール・ソースに焦点を当てましょう。

設計バリアント全体で、すべてのパスは、注釈要件で先に説明したのとまったく同じ番号と順序を持つ必要があります。

私は彼らの順序を示すためにここで王冠のパスを着色しました。

9つの道があり、それらはすべて一致します。

たとえば、心臓の2つのパスは、両方のデザインバリアントの8番目と9番目のパスです。

これまでのところ、とても良いです。

次に、デザインバリアント全体の対応するパス内を確認します。

通常のソースとブラックソースの心臓の外側の経路を比較してみましょう。

各パスは一連のポイントから構築されます。

赤の通常のソースには24ポイント、青には黒のソースには24ポイントがあります。

互換性があるには、ポイントは対応するパス間で1対1で一致する必要があります。

一致する点の各ペアは架空の線を作成し、それぞれの線に沿って各点を移動すると、2つの互換性のあるパスをブレンドすることができます。

通常のソースの各ポイントはブラックソースのポイントに対応するため、それを行うことができます。

赤の小さなハートに焦点を当て、青の大きなハートと調和する道を観察します。

ブレンディングは、互換性のあるパス間の任意の場所で新しいパスを生成することを可能にするものです。

このブレンドは「補間」として知られています。

ポイントレベルで補間がどのように機能するかがわかったので、ズームアウトしてシンボル全体に適用しましょう。

超軽量、レギュラー、ブラックの間の重量を計算できることに気付くでしょう。

これは、シンボルの中規模および大規模デザインバリアントを生成するために必要な重量補償のメカニズムです。

これらの要件を要約しましょう。

シンボルが補間可能と見なされるには、3つのことが必要です。

まず、3つのデザインソース。

超軽量-小、レギュラー-小、ブラック-小。

第二に、パスの互換性。

すべてのパスはソース間で一致する必要があります。

そして最後に、ポイントの互換性。

一致するすべてのパスは、同じ数のポイントを持つ必要があります。

では、これらの補間可能なシンボルの1つをどのように作成しますか?

さて、静的セットアップの代わりに、可変セットアップでSFシンボルアプリから3.0テンプレートをエクスポートすることから始めます。

このようにして、3つのソースデザインの余白とアウトラインがあります。

以前にRegular-Mediumで行ったように、私はRegular-Smallから始めて、上に私の心を追加します。

今回は小規模のためです。 

補間は非常に厳しい要件があるため、他のソースに取り組む前に、最初のレギュラースモールデザインバリアントを良好な状態にすることをお勧めします。

Ultralight-SmallとBlack-Smallのソースに取り組むときは、Regular-Smallパスをコピーして貼り付け、そこからポイントの位置を変更するのが最善です。

これは、カスタムシンボルが他のデザインバリアントを生成できることを確認するために重要です。

では、もう一度見直しましょう。

シンボルを補間可能にしたい場合は、互換性が壊れるので、ポイントの追加や削除は避けてください。

代わりに、既存のポイントのみを調整してください。

これにより、設計間の互換性が維持されるため、移動ポイントとコントロールポイントは問題ありません。

準備ができたら、更新されたテンプレートをアプリのカスタムシンボルセルにドロップし、以前と同じように注釈を付けることができます。

私はソースを描くのに慎重だったので、27のバリアントをすべてカバーしており、実装するためにこれを手渡す準備ができています。

カスタムシンボルを作成する方法を取り上げたので、シンボルを配布する方法などの次のステップについて話しましょう。

シンボルを配布するときは、2つの選択肢があります。

2.0テンプレートまたは3.0テンプレートをエクスポートできます。

2.0テンプレートは、iOS 14などの古いOSに展開する予定の場合にのみ使用してください。

モノクロしか含まれていないので、そのモードで使用するときにシンボルが理にかなっていることを確認してください。

2.0テンプレートへの変換は非可逆操作です。

古いOSがそれらを理解できないため、注釈データと明示的な余白は削除されます。

3.0は、追加したすべての多色および階層データ、およびカスタムマージンを埋め込むことができますが、下位互換性はありません。

注意してください、このテンプレートは編集用のソースアーティファクトではありません。

現在の設計ツールは、埋め込まれた注釈データと完全に互換性がない可能性があります。

シンボルをさらに編集したり、同僚と共有したりする必要がある場合は、SFシンボルアプリにインポートする必要があります。

そこから、注釈を落とすリスクなしにモノクロ表現に取り組むことができます。

エクスポートする3.0テンプレートは、Xcodeに直接移動するか、SFシンボルアプリに戻る必要があります。

最小展開ターゲットがiOS 14の場合、2.0と3.0の両方のテンプレートをエクスポートし、バージョンチェックに基づいて適切なアセットを使用する必要があります。

最小展開ターゲットがiOS15以降の場合は、3.0テンプレートをエクスポートするだけです。

同僚とシンボルを共有する場合は、3.0テンプレートをエクスポートします。

その後、それをSFシンボルアプリにインポートして、編集と注釈付けを続けることができます。

今日は多くの内容を取り上げたので、簡単にまとめましょう。

新しい3.0カスタムシンボルテンプレート、それがサポートする機能、および編集方法について話しました。

注釈のためにシンボルを準備し、多色と階層データを追加する方法を取り上げました。

私たちは、補間を利用するためにいくつかのより厳しい要件を選択する、より高度なワークフローを模索しました。

そして、私たちはあなたのシンボルを配布する方法について話し終えたところです。

シンボルを配信したら、OSで使用する準備が整いました。

適切なモードでシンボルをレンダリングするために使用できる新しいAPIがいくつかあります。

コード内のSFシンボルとカスタムシンボルの呼び出しの詳細については、WWDC 2021の「UIKitとAppKitのSFシンボル」と「SwiftUIのSFシンボル」をチェックしてください。

それは最初から最後までカスタムシンボルです。

あなた自身のシンボルを作成し、注釈を付けることを楽しんでいただければ幸いです。

[明るい音楽]。