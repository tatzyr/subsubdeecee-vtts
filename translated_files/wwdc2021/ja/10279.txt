10279

♪ ♪

こんにちは。私の名前はケイレブです。

私はtvOSチームのソフトウェアエンジニアです。

今日は、tvOS 15でサインインするために行ったいくつかの大きな改善を共有することに興奮しています。

私たちは、Apple TVを使用しているすべての人が、できるだけ少ない摩擦で、迅速にコンテンツに取得できるようにしたいと考えています。

つまり、アプリにサインインするプロセスは流動的で痛みのないものでなければなりません。

サインインする最も一般的な方法の1つは、パスワードを使用することです。

ユーザーは強力または一意のパスワードを持つことが奨励されていますが、これらは入力するのがイライラする可能性があります。

tvOS 15では、アプリでパスワードベースのサインインをこれまで以上に簡単に実行できる素晴らしい新機能があります。

新しいシステムサインインビューから始まります。

この見解は、いくつかの本当に重要なことをします。

まず、tvOS全体で一貫したサインイン体験を提供します。

第二に、iPhoneまたはiPadを使用してサインインを完了できることをユーザーに伝えます。

第三に、アプリがサポートする可能性のある他のサインインタイプのオプションをユーザーに提供します。

それについては後でもっと話します。

今のところ、あなたのiPhoneやiPadを使ってサインインすることに集中したい。

ユーザーがアプリでサインインを開始し、iPhoneをスリープ解除すると、Apple TVからこのような通知が表示されます。

通知をタップすると、iPhoneがサインインのプロセスを案内します。

iCloudキーチェーンからの資格情報を提案します。

また、Face IDを使用してサインインを確認できます。

その後、資格情報はApple TVに送り返されます。

これで、アプリはサインインを完了し、ユーザーをコンテンツに表示することができます。

少し時間を取って、これはテキスト入力の経験ではないことを指摘したいと思います。

これは、Apple TVとiPhoneまたはiPadの両方が協力してサインインプロセスをユーザーに案内する、一流のサインイン体験です。

この新しいサインイン体験を採用するのは本当に簡単です。

すべてのAppleプラットフォームには、人々があなたのアプリにサインインできるように設計された高レベルのAPIがあります。

tvOS 15では特に強力です。

ほんの少しのコードで、先ほどお見せした素晴らしいサインイン体験を最大限に活用できます。

私は今、それをあなたに説明したいと思います。

アプリの関連ドメインの設定から始めましょう。

関連するドメインは、アプリとドメインの間に安全なリンクを確立します。

これにより、Apple TVとiPhoneまたはiPadが連携して、サインインに使用する資格情報を安全に提案できます。

まず、ドメインがホストするAppleアプリサイトのアソシエーションファイルに、Web資格情報キー内にtvOSアプリのアプリケーション識別子がリストされていることを確認してください。

次に、XcodeのtvOSアプリに関連ドメイン機能を追加します。

そして最後に、Web資格情報のプレフィックスを使用して、ドメインを関連ドメイン機能に追加します。

アプリでのWeb資格情報ドメインの設定の詳細については、WWDC 2017の「Introducing Password AutoFill for Apps」ビデオを参照してください。

次に、AuthenticationServicesを使用して資格情報をリクエストする方法をお見せしたいと思います。

いくつかのコードを見てみましょう。 ではいくつかのコードを見てみましょう。

ここには、資格情報を要求するために必要な基本的な材料があります。

iOSまたはmacOSアプリですでにAuthenticationServices APIを使用している場合、このコードは非常に見覚えがあるはずです。

パスワード要求でASAuthorizationControllerのインスタンスを作成することから始めます。

このAPIの本当に強力なところは、複数の異なる種類のリクエストを指定できることです。

アプリがAppleでサインインもサポートしている場合は、承認リクエストの配列にApple IDリクエストを含めることができます。

複数のリクエストを指定すると、iPhoneとiPadは、ユーザーがサインインに使用する資格情報の種類を決定できるようにします。

次に、自分自身を承認コントローラの代理人として設定し、performRequestsを呼び出すためにサインインを開始します。

さて、ASAuthorization-ControllerDelegateからいくつかのメソッドを実装する必要があります。

ユーザーがiPhoneまたはiPadで使用したい資格情報を選択すると、システムはdidCompleteWithAuthorizationを呼び出します。

これで、クレデンシャルのユーザーとパスワードのプロパティを使用してサインインを完了できます。

サインインに失敗した場合、システムはdidCompleteWithErrorを呼び出します。

ユーザーがサインインをキャンセルした場合、アプリがメインのサインインUIに戻れるように、この方法から戻ります。

そうでなければ、何かがうまくいかないことをユーザーに知らせ、もう一度やり直す必要があります。

次に、システムのサインインビューをカスタマイズする方法をお見せしたいと思います。

カスタム認証方法APIを使用すると、アプリがサポートする可能性のある他のサインインタイプのボタンを表示できます。

「.Other」の値は、大きな柔軟性を提供します。

このオプションを使用して、ユーザー名とパスワードを尋ねるなど、手動のサインインフローに直接移動できます。

または、それを使用して、ユーザーが実行する別のタイプのサインインを選択できる独自のUIに移動することもできます。

アプリでユーザーがテレビプロバイダーアカウントを使用してサインインできる場合は、.videoSubscriberAccount値を使用する必要があります。

そして最後に、.restorePurchase値により、ユーザーはアプリ内購入を復元してサインインできます。

ユーザーがこれらのカスタム認証方法の1つを選択すると、要求されたサインインフローを開始するのはアプリ次第です。

これがどのように機能するかを見てみましょう。

まず、先ほどお見せしたASAuthorizationControllerコードに戻ります。

カスタムサインインオプションを表示するために、承認コントローラにcustomAuthorizationMethodsプロパティを設定します。

この例では、.otherと.restorePurchaseの値を使用して、システムサインインビューに「手動でサインイン」ボタンと「購入を復元」ボタンを表示しています。

アプリに適した値を選択する必要があります。

ユーザーがカスタム認証方法を選択すると、システムは私のauthorizationControllerデリゲートでdidCompleteWithCustomMethodを呼び出します。

この方法では、渡された値を確認し、ユーザーが要求したサインインのタイプを実行できます。

最後に、いくつかのベストプラクティスについて少しお話ししたいと思います。

tvOSで最高のサインイン体験は、単一の「サインイン」ボタンから始まります。

サインインプロセスを通じてユーザーをガイドし、限られた数の明確な選択肢を提供します。

既存のサインイン体験を新しいシステムサインインビューに置き換えることで、ユーザーは常にiPhoneまたはiPadでサインインするオプションがあります。

また、カスタム認証方法APIは、ユーザーに追加のサインインオプションを提供するのに最適な方法です。

tvOS 15は、素晴らしいサインイン体験を構築することをこれまで以上に簡単にします。

システムサインインビューでは、ユーザーはiPhoneまたはiPadでサインインできます。

また、AuthenticationServicesの強力な新しいAPIにより、簡単に始めることができます。

このプレゼンテーションで共有した例のいくつかを詳しく見るには、開発者アプリのこのセッションのサンプルコードプロジェクトを参照してください。

AuthenticationServicesフレームワークが、すべてのAppleプラットフォームで優れたサインインエクスペリエンスを構築する方法の詳細については、WWDC 2019の「認証の新機能」ビデオを参照してください。

見てくれてありがとう、そして会議を楽しんでください!

[明るい音楽]。