10265

♪ベース音楽の演奏♪

♪

サイモン・ゴールドレイ:こんにちは!このセッションでは、アプリを空間オーディオに没頭させる方法を探ります。

私はサイモンで、ここアップルのストリーミングメディアチームの一員です。

映画館の経験で、顧客にサービスを提供し、サービスを差別化したいですか?

そこにいるという感覚を提供するマルチポイントオーディオソースのレンダリングで没入型オーディオを提供したいですか?

お客様のポケットの中のモバイルデバイスの利便性から、これらすべてを行うことができますか?

このセッションでは、空間オーディオと、Core AVFoundation再生APIとWebKitでそれを配信する方法を探ります。

私たちは完全な議題を持っています。

一緒に、私たちが慣れ親しんでいる既存の技術と対比して、空間オーディオとは何かをカバーします。

次に、その機能が提供する技術と治療法を列挙します。

後半では、APIを紹介し、適用されるさまざまな治療法を強調します。

次に、以前のリリースでの空間オーディオのサポートレベルを確認して、機能を適切にターゲットにできるようにします。

また、2021年秋のOSリリースで今年の新機能も明らかにします。

お締めくくりとして、デモで締めくくります。

私はそれをあなたと共有することに興奮しています。

あなたはご馳走のためにいます!

空間オーディオとは何かを理解するには、クラシックステレオを検討することから始めましょう。

昔のヘッドフォンでもステレオスピーカーのアレンジでも、私たちが知覚するサウンドステージはかなり限られています。

後ろ、正面、または上から音が聞こえません。

リアルな位置再現が欠けています。

そして、ヘッドフォンの場合、音は私たちの頭の中または上の小さなスピーカーから発せられます。私たちはこれをインヘッド体験と呼んでいます。

私たちが映画を見ながら自然に頭を動かすと、それらの小さなスピーカーは私たちと一緒に動きます。

これは劇場のような体験ではありませんが、空間オーディオが役立つ場所です。

空間オーディオは劇場のような体験を提供します。

これは、説得力のある仮想サウンドステージを生成する効果を持つ心理音響技術です。

マルチチャンネルコンテンツに最適ですが、ステレオコンテンツにも魅力的な体験を提供します。

最後に、視聴覚およびオーディオのみのメディアソースに空間オーディオサポートが提供されています。

何よりも、顧客がすでに持っているさまざまなApple製品で動作します。

空間オーディオ体験をお客様に簡単に提供できるようにしました。

私が今言及したように、アプリケーションで空間オーディオを楽しむための最良の方法は、マルチチャンネルオーディオを提供することです。

その経験は、マルチチャンネルオーディオの代替を参照するHLSバリアントを提供するとき、顧客の環境に最も適応性があります。

実際、コンテンツライブラリにマルチチャンネルオーディオソースメディアがすでにある可能性があります。

これを公開するだけで、デフォルトでは、アプリケーションで空間オーディオが有効になります。

ソフトウェアの変更は全く必要ありません。

通常のメディアファイルのマルチチャンネルオーディオトラックと、2021年秋リリースのWebKitのMSEも、後で詳しく説明する限定的なサポートの恩恵を受けています。

あなたが今作成することを期待できるメディア体験についてお話ししましょう。

空間オーディオで再現できる体験はたくさんあります。

あなたは私たちを取り巻く、コンサートにいるような音楽を届けることができます。

ゲーマーを没入型の冒険に連れて行くインタラクティブなシーンで、フルモーションのビデオゲームを構築できます。

しかし、この技術はどのように機能しますか?

空間オーディオを使用する場合、仮想サウンドステージは静的です。

サウンドステージは、先ほどステレオで見たのとは異なり、カジュアルな頭の動きでは動きません。

私たちが得るのは、私たちが劇場に期待するのと同じ可聴効果と感覚です。

この効果は、多くの製品の内蔵スピーカーの両方から可能であり、現在は一部のヘッドフォン製品でも利用可能です。

空間対応ヘッドフォンを使用する場合、再生デバイスの慣性測定ユニットからの測定値をヘッドフォンの同様の測定値と比較し、顧客の頭のポーズを決定します。

これは、その静的なサウンドステージ効果を維持するために、オーディオレンダリングを動的に変更するために使用されます。

その結果、アウトオブヘッド体験のために、カメラまたはリスナーの周りの元の配置からオーディオが発せられているような感覚です。

回転バスや銀行飛行機でも機能します。

また、5.1チャンネル体験を再現するためにステレオソースをアップミックスする技術も提供しています。

この機能は、既存のステレオコンテンツのライブラリとともに空間オーディオを提供します。

サポートされているヘッドフォンの場合、2021年秋のリリースのデフォルトのステレオトリートメントです。

また、この処理を暗黙的に使用して、空間オーディオをさらに魅力的に採用して提供できるようにします。なぜなら、現時点では、マルチチャンネルオーディオの配信がメディアの視覚品質を妨げる可能性があると考えているからです。

結局のところ、マルチチャンネルオーディオは、あなたが今日提供しているステレオAACレンディションよりもはるかに高いビットレートです。

制約のあるネットワーク帯域幅環境に両方を合わせるにはどうすればよいですか?

これは本当の問題です。

空間オーディオ体験を顧客の帯域幅に適応させることで、これを解決しました。

高品質の視聴覚体験を提供するには帯域幅が不十分な場合、オーディオはステレオ、アップミックス、しかしまだ空間的な処理にシームレスに劣化します。

移行前に提供された場合、ヘッドトラッキングは維持されます。

その後すぐに、帯域幅が確実に回復すると、完全なマルチチャネル空間処理が復元されます。

この適応型空間オーディオ体験により、ステレオとマルチチャンネルのレンディションの間の音量レベルを正規化することがこれまで以上に重要になっています。

さらに、必要に応じて、DRC（ダイナミックレンジコントロール）とダイヤルノームメタデータをメディアエンコーディングに提供してください。

これは、developer.apple.comで入手可能なHLSオーサリング仕様でより詳細に説明されています。

空間オーディオ体験を調整するために使用できるインターフェースを見てみましょう。 空間オーディオ体験を調整できます。

AVPlayerItemまたは現在、AVSampleBufferAudioRendererなど、アプリケーションのデフォルトの空間オーディオエクスペリエンスをカスタマイズするには、4つのAVAudioSpatializationFormatsのいずれかを指定します。

これらは、モノラルとステレオ、マルチチャンネル、および最後の2つの組み合わせ、つまりモノラル、ステレオ、マルチチャンネルソースオーディオフォーマットの空間化を可能にすることです。

オーディオの空間化を抑制するためにゼロを指定することもできます。

当社のプラットフォームは、コントロールセンターとBluetooth設定を通じて、オーディオルートの種類に応じて、お客様がエクスペリエンスをさらに調整するためのシステムレベルのコントロールを提供することに注意してください。

これら4つの値の1つを取り、AVPlayerItemの許可されたAudioSpatialization Formatsプロパティに設定し、2021年秋のリリースではAVSampleBufferAudioRendererが新しくなりました。

さて、AVFoundation APIを使用して、オーディオルートが空間オーディオをサポートしているかどうかをどのように発見するのか疑問に思うかもしれません。

AVSampleBufferAudioRendererインスタンスにマルチチャンネルオーディオを配信する必要があるかどうかは、どうすればわかりますか?

さて、2021年秋のリリースでは、AVAudioSessionPortDescriptionでこれを示すプロパティを導入しています。

さらに、AVAudioSessionでは、アプリケーションがマルチチャンネルオーディオを提供できることをシステムにアドバタイズするためのメカニズムを導入しています。

この表示は、お客様がコントロールセンターまたはBluetoothの環境設定で空間オーディオ処理を有効にしていない場合に表示されます。

アプリケーションがAVPlayerを使用している場合、これらの表示は管理されていることに注意してください。

isSpatialAudioEnabledプロパティは、ポートが空間オーディオをレンダリングすることができ、顧客がそれを許可していることを示します。

ルート変更通知を観察し、各イベントでisSpatialAudioEnabledをチェックすることをお勧めします。

同様に、AVAudioSessionは、お客様がコントロールセンターとBluetooth設定の空間設定を変更すると、spatialPlaybackCapabilities ChangedNotificationを発行します。

便宜上、この通知には、空間オーディオの有効化の状態に関する情報が記載されています。

AVAudioSession SpatialAudioEnabledKeyを使用して、この通知に関連する状態を取得します。

最後に、ソフトウェアまたはサービスがマルチチャネルコンテンツを提供できることをシステムに示すために、あなたの意図で関数setSupportsMultichannelContentを呼び出します。

これは、ネットワーク条件が許し、治療が有効になっている場合、空間体験が利用可能であることを顧客に伝えるために使用されます。

それでは、過去3年間の機能サポートを調査してみましょう。

macOS Catalina、iOS、iPad OS 13では、空間オーディオは、httpスキームで任意のURLを指定することにより、AVPlayerItemとWebKitビデオタグを備えた内蔵スピーカーを介して提供されます。

2018年以降のモデルMacBook、iPhone、iPad Proの製品ラインをお持ちのお客様にご利用いただけます。

デフォルトでは、利用可能な場合はマルチチャンネルオーディオレンディションを選択して空間化を提供します。

macOS Big Sur、iOS、iPad OS 14では、AirPods ProとAirPods Maxのヘッドトラック対応ヘッドフォンのサポートを導入しました。

これらのアクセサリを介した空間化機能は、2016年以降のiPhoneとiPadのペアリングデバイスに提供されます。

デフォルトは、利用可能な場合はマルチチャンネルオーディオレンディションを選択することで空間化を提供します。

これにより、macOS Monterey、iOS、iPadOS、そしてtvOS 15のまったく新しいサポートがもたらされます。

ここでは、AVPlayerItem、AVSampleBufferAudioRenderer、およびW3C Media Source Extensions、MSEの限定WebKitサポートによるサポートを提供しています。

MSEパスは、空間化体験を調整するためのインターフェースを提供していません。

ただし、Media Capabilities APIセット内のAudioConfiguration辞書を介して空間オーディオサポートの可用性を検出するインターフェイスがあります。

これらのリリースのデフォルトは、利用可能で条件が許す限り、すべてのモノラル、ステレオ、およびマルチチャンネルソースにデフォルトでオーディオ空間化を提供することです。

AVSampleBuffer AudioRendererのすべての使用を含むオーディオのみのプレゼンテーションでは、マルチチャンネルオーディオレンディションのみがデフォルトで処理が提供されます。

空間オーディオとは何か、それを使用する方法がわかったので、今日は本当に特別なものが並んでいます。

ソフトウェアやサービスで空間オーディオを使用して、新しい創造的な方法でストーリーを伝える方法を紹介します。

聞いてみましょう！

♪アップビートな音楽が流れている♪

< ええと、ああ。もう一度やってみましょう。

うーん...ええと...

クパチーノ？私たちは問題を抱えています。

画面外の声：今回は何ですか？

サイモン：わかっています。わかっています。何か？

オフスクリーンのささやき:ごめんなさい、サイモン。サイモン：いいえ？

画面外のささやき:それはうまくいかないよ。

サイモン：本当に？オフスクリーンのささやき:私は知っている...

サイモン:それをバガー。わかった。わかった。わかった。

だから私たちは、空間オーディオでできるすべてのクールなことを実証するために、この本当に素晴らしいデモを作りましたが...あなたは知っています...

今日はこんなことは起こらないようです。

見て。

私たちは何かを試してみるつもりです。

このビデオは見せられないけど、もしできたら、ええと...

...それを説明してください。

わかりました。だから、あなたが今どこにいるのかわかりませんが、目を閉じて、私たちがWWDCホールにいると想像しましょう。

それがどんな風に聞こえるか知ってるよね？

どんな感じですか？

あなたの心の中でそれを想像してください。

ステージと大画面を想像してください。

私たちはちょうどライトを暗くして、このビデオの再生を始めようとしています。

オイ！あなた！明かりを暗くする。

私たちはサンフランシスコの上空にいます。

湾から、高層ビルを通り抜ける。

風が私たちの周りを駆け巡り、それから私たちは街から飛び出し、半島を下り、アップルパークまでずっと進んでいます。

私たちは公園に舞い上がると、私たちが通り過ぎるとき、あなたは素晴らしい髪のアヒルを持つ誰かを見ます。

彼は「スローダウン！」と叫ぶ。

これは、この本当にクールな左から右のドップラー効果を持っています。

落ち着いて！

そして、私たちは今、リンゴ園を飛んでいます。

木々の鳴り響くのを感じてください。

私たちは平和と静けさの瞬間のために池にいます。

ささやいた声:私は正直なところ、空間オーディオでは売れていません。

サイモン:そして、私たちは再び移動し、この女性を見つけるまで、滑らかなテラゾの床を滑るCaffè Macsの大きなガラスのドアに到達するまで、鳥の上を鳴らしています。

彼女はiPadをテーブルの上に支えてピザを食べていて、本当に、本当に緊張しているこの映画に完全に夢中です。

夕暮れの早い時間に、この溢れるジャングルです。

オーディオは文字通り-いいえ、本当に!

それは--それは私たちを現場に引き込んでいます。

ささやいた声:彼はこのデモを説明する素晴らしい仕事をしています。

私はほとんどそこにいるような気がする。それはとても鮮やかです。

サイモン: ...そして遠くの猿が鳴る。

しかし、突然それは不気味になります...

...そして、すべての生き物は静かになります。

聞こえるのは葉っぱのざわめきだけです。

その後、木が落ちるようにc-c-c-クラッシュ。

何かがやってくる!何か大きなもの！

チンプ。チンプ。チンプ。

胸の中で心臓の鼓動が聞こえます。

そして...沈黙。

私たちはリラックスしようとしています...とき

恐竜が私たちの真向かいの木々を突き破る!

そして、私たちはそのぽっかりと開いた口の中にまっすぐ見上げます!

Voice over PA：それは42のラップです...

サイモン：私たちは映画のセットにいることを明らかにするために後退します。

男：その照明が好きかどうかはわかりません...

サイモン：恐竜は動きを止め、人々の乗組員がセットをクリアするために現れました。

女性:ケリーのために行く。

ボイスオーバーラジオ：あなたは俳優で20を得ましたか？

女性：うん。彼らは打ち上げを見ながら化粧をしている。通信をオフにします。

女性：来るの？

サイモン：私たちはそのうちの2人をトレーラーに追って、今日の宇宙打ち上げを見ます - もちろん、サラウンドオーディオでストリーミングします。

観客は息を止めていますが、私たちは彼らを通り抜けてテレビに入ります。

女性:打ち上げに行く。男：全面的に良いです。

サイモン:そして今、私たちはカプセルの中にいます。

女性：ペダルを床に置きましょう。

サイモン：ロケットが発火する！

女性：さあ、どうぞ！

月へのエクスプレスサービス!次の停留所、静けさ。

男：まだすべて順調です。

3つ、2つ、1つでブースター分離...

清潔で滑らか。

サイモン：ロケットの第2段階が落ちて、私たちはそれで落ちます...

...そして、それが地球に落ちるにつれてステージをたどり、ますます速くなります。

私たちは今、大気中を落下し、地面に向かっています。

何かに向かって。

大きなジェット機。

ますます大きくなり、そして-- PAの女性：皆さん、おはようございます。

これはフライトデッキから話しているあなたの船長です。

...今日の最終目的地への降下。

これ以上あるべきではない...

サイモン:それは美しいです!

まあ、だから、ええと...それは楽しかったです。

私たちが見聞きしたことを要約しましょう。

私たちは、お客様に空間オーディオ体験を提供することがいかに簡単かを発見しました。

実際、空間オーディオを利用するために、アプリケーションに何もする必要はないかもしれません。

HLSバリアントプレイリストでマルチチャンネルオーディオを提供するだけで十分です。

ステレオとマルチチャンネルのレンディションの間の音量レベルを正規化し、DRCメタデータを含めることが重要であることを覚えておいてください。

最後に、OSリリースの過去3年間で、幅広い顧客ベースに空間オーディオを提供する方法を見てきました。

関連するセッションでは、HLSリソースにマルチチャンネルオーディオがあるかどうかを発見する方法を学ぶことができます。

AVFoundationでHLSバリアントを探索しながら、それについてすべて学んでください。

ここのチームと私と同じくらいこのセッションを楽しんだことを願っています。

私たちは、あなた自身とあなたのアプリが空間オーディオに没頭し、WWDC 2021の残りの部分を楽しむことを願っています。

ありがとうございます。

♪