10122

♪ベース音楽の演奏♪

♪

プレストン・ルイス:こんにちは、私の名前はプレストンです。今日は、あなたのアプリのチャートにアクセシビリティをもたらす方法について話します。

今日取り上げる内容を確認しましょう。

まず、チャートにアクセスできるようにすることの利点のいくつかについて話します。

次に、チャートの視覚的側面について包括的な決定を下すためのいくつかの原則について確認します。

次に、VoiceOverでチャートを知覚し、ナビゲート可能にする方法について説明します。

そして最後に、「オーディオグラフ」と呼ばれるエキサイティングな新機能と、アプリでそれらをサポートする方法について説明します。

では、始めましょう。

現代の世界では、データは非常に重要です。

私たちは毎日データを使用して、財政、健康、目標、その他多くのことについて決定を下しています。

しかし、データを利用するためには、それを理解できなければなりません。

チャートは、詳細を深く掘り下げることなく、データが私たちに何を伝えているのかをすばやく理解できるため、便利です。

しかし、チャートは、視覚障害者や弱視の人にとっては本質的にアクセスできません。

視覚的なチャートが見えなければ、視覚的なチャートに価値はありません。

アクセシビリティチームは、視覚障害者や弱視の人々がデータにアクセスしやすくするために何年も懸命に取り組んできました。

今年は、アプリでオーディオグラフをサポートすることで、失明や弱視の人にチャートのパワーをフルに届けることができます。

例を見てみましょう。 例を見てみましょう。

これは、1917年から1975年までの過去の出生率を示すアプリの例です。

このチャートを見ると、すぐにいくつかの興味深い機能を見ることができます。

出生率は1935年頃に最小限に減少し、その後すぐに1960年頃に増加し、その後再び減少したことがわかります。

視覚障害者や弱視の人々に、新しいオーディオグラフVoiceOver機能を使用してデータをすばやく把握できる同じ機能を与えることができます。

それがどのように機能するかをお見せしましょう。

まず、VoiceOverローターのオーディオグラフメニューを見つけます。

VoiceOver: オーディオグラフ。

プレストン：その後、「チャートの詳細」が聞こえるまで下にスワイプします。

VoiceOver: オーディオグラフを再生します。チャートの詳細。

プレストン：次に、ダブルタップしてオーディオグラフエクスプローラービューを開きます。

VoiceOver: オーディオグラフ。ヘディング。

プレストン：次に、再生ボタンに移動してオーディオグラフを再生し、データシリーズを連続したトーンとして再生します。

ボイスオーバー：20世紀の出生率。

オーディオグラフを再生します。ボタン。

プレストン:今それを聞いてみましょう。

ボイスオーバー: 完了。

プレストン:それはエキサイティングではありませんでしたか?

あなたが今聞いたのは、あなたが見ているものと同じチャートで、視覚的にではなく聴覚的に表されていました。

あなたが聞いたピッチは、時間の経過とともに出生率に対応し、より低いピッチはより低い値を意味し、より高いピッチはより高い値を意味します。

これらのピッチは、ビジュアルチャートの線を正確に反映しています。

したがって、チャートを見なくても、オーディオグラフを使用すると、わずか数秒でその重要な機能を認識できます。

データの一般的な感覚がわかったので、興味のある機能についてより正確な情報を入手しましょう。

次に知りたいのは、最大出生率とそれが発生した年です。

これを行うには、オーディオグラフは、VoiceOverユーザーがダブルタップして長押ししてからドラッグして自分のペースでデータを聞くことができるインタラクティブモードを提供します。

一時停止すると、VoiceOverはオーディオグラフ内のユーザーの現在の位置に対応するデータ値を読み取ります。

このインタラクティブモードを使用して、最大出生率とそれが発生した年を見つけてみましょう。

ボイスオーバー：20世紀の出生率。

データポイント。1960年。1万人あたり268人の出生。

プレストン：最高のピッチを聞くまでオーディオグラフをスクラブし、データ値を聞くために一時停止することで、最大出生率は1960年頃に10,000人あたり268人であったことがわかります。

最大値が1960年頃に発生したことを知っているので、このピークはベビーブーム時代に対応していると推測できるかもしれません。

チャートの音響表現から、これらすべてを把握できます。

さて、別の種類のチャートの例を見てみましょう。 

このチャートは、いくつかの異なるタイプの自動車のX軸の車両重量とY軸の燃費の関係を示す散布図です。

このチャートのオーディオグラフでは、聞こえる各トーンは、ビジュアルチャート上の各ビジュアルデータポイントと同様に、1台の自動車のデータポイントを表します。

各トーンのピッチは、1ガロンあたりのマイルで自動車の燃費を表すので、より高いピッチはより燃費の良い車両を意味します。

少し時間を取って、私がこのオーディオグラフを再生するときにあなたが聞くことを期待することを考えてください。

それがどんな風に聞こえるか聞いてみましょう。

データが上昇傾向にあるか下降傾向にあるかを聞いてみてください。

ボイスオーバー: 完了。

プレストン：下降傾向を聞いたことを願っています。

この傾向は、このデータセットでは、より大きな自動車が燃料効率が低い傾向があることを意味します。

利用可能な生のデータポイントしかなく、各データポイントを個別に見なければならなかった場合、この関係を理解するのにどれくらいの時間がかかったか想像してみてください。

また、よく聞いていたら、このデータセットの非常に高い音の外れ値を聞いたことがあるかもしれません。

ビジュアルチャートで目立つのと同じようにオーディオグラフで目立ち、たまたまこのデータセットで唯一のハイブリッド車です。

外れ値に関する詳細情報を入手したい場合は、インタラクティブモードを使用して、最も高いピッチが聞こえるまでデータをナビゲートし、出生率チャートで行ったように、一時停止してデータ値を聞くことができます。

オーディオグラフに加えて、このエクスプローラービューは、このチャートのデータの自動統計分析から推測される形状、傾向、外れ値などのデータの重要な機能に関する要約情報を提供します。

オーディオグラフに加えて、VoiceOverはこの要約情報を読んで、データの理解を完了することができます。

さて、アクセシブルなチャートの利点を簡単にまとめましょう。

チャートにアクセスできるようにすることで、データ豊富なアプリケーションは、視覚障害者や弱視の人を含む幅広いオーディエンスにリーチできます。

チャートのデータを理解するのに役立つツールを提供することで、ユーザーに力を与え、個人的および職業的な生活の中でデータの信じられないほどの力を活用するのに役立ちます。

そして最後に、今年新しいAPIが登場し、チャートの作成がこれまで以上に簡単になりました。

アプリでオーディオグラフをサポートする方法を示すことに本当に興奮していますが、まず、チャートをより視覚的にアクセスしやすくする方法から始めて、いくつかの一般的なチャートのアクセシビリティトピックをカバーする必要があります。

ビジュアルチャートを誰にとってもより理解しやすくするためにできる簡単なことがいくつかあります。

このチャートを例に挙げてください。

これは、熱帯および乾燥地域の月間平均降水量を示す簡単な折れ線グラフです。

このチャートの視覚的なアクセシビリティを向上させるために、いくつかのアクセシビリティの原則を適用しましょう。

まず、可能な限りコントラストの高い色を使用することが重要です。

前景色と背景色のコントラストが高いため、特に弱視の人にとって、チャートの表示と理解が容易になります。

ご覧のとおり、背景に対する線のコントラストはかなり低いです。

タイトルとラベルのテキストも少し薄暗いようです。

背景に対してより高いコントラストを持つように、これらの色を更新しましょう。

それははるかに良いです。

色間のコントラスト比をチェックして、コントラストが十分かどうかを判断できます。

Xcodeに同梱されているアクセシビリティインスペクタには、使用できるカラーコントラスト計算機があります。

少なくとも4.5:1のコントラスト比を目指すのは良いことです。

チャートの視覚的なアクセシビリティを向上させるために次にできることは、問題のある色の組み合わせを避けることです。

可能であれば、赤と緑を一緒に使用することは一般的に良い習慣です。

赤と緑の色覚異常は最も一般的なタイプであり、これらの色を一緒に使用すると、一部の人にとってチャートの理解が困難になる可能性があります。

だから、ここに再び折れ線グラフがあり、熱帯地域の降雨量を表す緑の線と乾燥した地域の降雨を表す赤い線があります。

凡例のカラーエンコーディングを使用して、どのデータシリーズがどれであるかを知ることができます。

しかし、赤緑色の色覚異常の一種であるdeuteranopiaを持っている場合、チャートはあなたにとってもっとこのように見えるかもしれません。

どの線が熱帯の降雨を表し、どの線がこれらの色で乾燥した降雨を表しているかを見分けるのは難しいでしょう。

赤い色を青に置き換えて、これを改善しましょう。

これは大きな変化のようには思えないかもしれませんが、赤緑色の色覚異常の人にとっては、このチャートはこのように見えるかもしれません。

この小さな調整により、赤緑色の色覚異常を持つ人がシリーズの違いを見つけやすくなります。

また、この色覚異常の家族が2番目に一般的であるため、青と黄色を一緒に使用することを避けるのも良いことです。

これらはいくつかの良い改善ですが、データシリーズを区別するために色に加えてシンボルを使用して、これをさらに一歩進めましょう。

データシンボルを使用すると、人々は色に頼ることなくチャートを理解できます。

だから、ここに再び私たちのチャートがあります。

それでは、各データシリーズにいくつかのシンボルを追加してみましょう。

熱帯データシリーズには円があり、乾燥したデータシリーズには正方形があることに注意してください。

関連するシンボルを見るだけで、どのシリーズがどのシリーズであるかがわかります。

これは、色をまったく知覚できない人でも、あなたのチャートを理解できることを意味します。

これらすべてをデフォルトで行うのは良いことですが、デザインや製品の制約により、色の選択やシンボルを含める決定が制限されることがあります。

このような場合、いくつかの簡単なアクセシビリティ設定をサポートすることで、アクセシブルな体験を提供できます。

デフォルトのケースのチャートにシンボルを追加できない場合でも、Differentiate Without Colorシステムのアクセシビリティ設定が有効になっているときにシンボルを追加することで、アクセス可能な体験を提供できます。

製品の理由でカラーセットを簡単に変更できない場合は、コントラストのアクセシビリティ設定が設定されている場合は、コントラストの高い色を採用することを検討してください。

透明性の使用を減らすことで、チャートをより視覚的にアクセスしやすくすることもできます。

チャートが透明度効果を使用している場合は、透明度を減らすアクセシビリティ設定がオンのときに無効にすることを検討してください。

iOSアプリではなくmacOSを構築している場合、これらの設定のそれぞれには、サポートできるmacOSの対応があります。

このセッションの資料には、これらのAPIの開発者ドキュメントへのリンクがあります。

それでは、VoiceOverでデータをナビゲート可能にする方法を見てみましょう。

今、私はコーヒーが大好きで、プログラミングが大好きです。

少しの間、このチャートに示すように、消費されたコーヒーの量とエンジニアが生成するコードの量の間に関係があるふりをしましょう。

ふりをしてください。

また、データは12杯のコーヒーまで上がりますが、心配しないでください、このデータの作成でエンジニアは被害を受けませんでした。それはすべてでっち上げです。

さて、このデータをVoiceOverユーザーがナビゲートできるようにする方法を見てみましょう。

以下は、チャートビュークラスと対応するモデルオブジェクトからのコードのスニペットの例です。

チャートビューには、そのモデルへの参照と、それ自体を描画するための機能があるかもしれません。

そして、モデルには、チャートのタイトルとデータポイントが単純な構造体に含まれている可能性があります。

最初にやりたいことは、チャートをコンテナにすることです。

これは、VoiceOverがチャート要素を正しくグループ化し、ナビゲーションに役立ちます。

チャートをコンテナにするには、ChartViewでaccessibilityContainerTypeをオーバーライドし、セマンティックグループコンテナタイプを返すだけです。

繰り返しになりますが、これはVoiceOverのナビゲーションと、どの要素がチャートに属しているかを伝えるために重要です。

次に、チャートにアクセシビリティラベルを与える必要があります。

これは、チャートに遭遇したときに何を話すべきかをVoiceOverに伝えます。

通常、これはチャートのタイトルか、VoiceOverがUIでチャートを一意に識別するために話すことができる同様のものでなければなりません。

最後になりましたが、各データポイントにアクセシビリティ要素を提供する必要があります。

チャートビューのaccessibilityElementsプロパティをオーバーライドすることで、これらの要素を提供できます。

これにより、VoiceOverがナビゲートできる要素がチャート内に作成され、個々のデータポイントに関する情報を取得できます。

これを実装するには、「マップ」を使用して、データポイントのリストからアクセシビリティ要素の配列を構築するだけです。

データポイントごとに、ChartViewをaccessibilityContainerとして指定して、新しいUIAccessibilityElementオブジェクトを作成します。

次に、要素のaccessibilityValueプロパティのデータポイントの文字列表現を提供します。

この文字列は、これらのデータポイント要素にナビゲートするときにVoiceOverが話すものです。

コードでは、おそらくこの文字列をローカライズしたいと思うでしょうし、文字列辞書を使用して適切な複数形化ルールを定義したいと思うかもしれません。

しかし、この例では、シンプルにしましょう。

最後に、VoiceOverが画面上のどこにあるかを知るために、要素のアクセシビリティフレームを提供する必要があります。

ビジュアルチャートを描くためにこれが必要だったので、おそらくすでに他の場所で各データポイントのフレームを計算するためのロジックを持っているでしょう。

利用可能な場合は、ここでそのロジックを再利用できます。

これで、このデータポイントの完成したアクセシビリティ要素を返すことができます。

わかった！これまでに何を成し遂げたか見てみましょう。

VoiceOver: 一杯のコーヒーとコードの行。

ゼロカップ。20行のコード。

1杯。30行のコード。

2つのカップ。35行のコード。

3杯。32行のコード。

プレストン：すごい！

聞いたように、VoiceOverは、チャートをセマンティックグループにし、アクセシビリティラベルを与えたため、チャート内の要素に焦点を合わせるときにタイトルを話すようになりました。

また、それぞれを表すUIAccessibilityElementを作成することで、各データポイントをナビゲートできるようにしました。

前に進む前にもう一つ言及したいことがあります。

時には、数百または数千のデータポイントがあるかもしれません。

このような場合、ナビゲートするにはあまりにも多すぎるため、データポイントごとにアクセシビリティ要素を作成したくありません。

代わりに、チャートを合理的な間隔に分割し、各データポイントではなく、各間隔のアクセシビリティ要素を作成することをお勧めします。

これにより、より良いナビゲーション体験が提供され、理解できながらパフォーマンスが向上します。

私たちはまだ終わっていません。私たちはさらに多くのことができます。

データをナビゲート可能にすることは重要ですが、私たちはまだ一度に1つのポイントでVoiceOverユーザーに生データを提示しているだけです。

チャートの価値は、データが実際に私たちに何を伝えているかを示し、個々のデータポイントを超えて見るのを助ける能力です。

ここでオーディオグラフの出番です。

それでは、最後に、チャートのオーディオグラフサポートを実装する方法について話しましょう。

特定のチャートを定義するために必要なすべての情報を含むChartModel構造体があると想像してみてください。

あなたのコードには、おそらくすでにこのように見えるモデルオブジェクトがあります。

そうでなければ、心配しないでください。 

これらの概念は、整理されているにもかかわらず、あなたのコードには引き続き適用されます。

この例では、チャートにタイトルと要約があり、X軸とY軸があり、各軸にはタイトルと軸の最小表示値と最大表示可能な値を表す数値範囲があるとします。

そして最後に、チャートの実際のデータを含むデータポイントの配列があります。

このサンプルモデルオブジェクトの情報を使用して、チャートのオーディオグラフ機能を有効にします。

まず、アクセシビリティフレームワークをインポートし、AXChartプロトコルに準拠するようにChartViewクラスを拡張します。

サポートするプロパティが1つしかないため、AXChartプロトコルに準拠するのは簡単です。

accessibilityChartDescriptorを実装するだけです。

構築するチャート記述子オブジェクトには、VoiceOverがオーディオグラフエクスペリエンスを提供するために必要なすべての情報が含まれます。

これらのチャート記述子の1つを段階的に構築する方法を見てみましょう。

まず、各軸の軸記述子オブジェクトを作成する必要があります。

各軸記述子は、カテゴリデータまたは数値データを表すかどうか、軸の表示可能な値の範囲、グリッド線の位置、およびスピーキング可能なデータ値をフォーマットする方法に関する情報をVoiceOverに提供します。

X軸はコーヒーチャートの数値なので、数値軸記述子を作成します。

X軸にカテゴリデータがある場合は、代わりにカテゴリ軸記述子を使用します。 代わりにカテゴリ軸記述子を使用します。

モデルオブジェクトを使用して、この軸のタイトルと範囲を提供します。

オプションで、この軸上のグリッド線の位置を指定することもできます。

グリッド線を提供すると、再生とインタラクション中の触覚フィードバックとしてオーディオグラフで表されます。

このチャートにはX軸のグリッド線がないので、今のところ空のままにしておきます。

数値軸の場合、valueDescriptionProviderクロージャも作成する必要があります。

このクロージャは、この軸の値の言い方をVoiceOverに伝えるので、単に「5」と言うのではなく「5カップ」と言うことができるので、非常に重要です。

この軸では、値の後に「カップ」を話すように説明をフォーマットします。

繰り返しますが、あなたのコードでは、おそらく適切な複数形ルールでこの文字列をローカライズしたいと思うでしょうが、この例はシンプルにしましょう。

Y軸の軸記述子を作成するために同じことをしますが、値の説明を「カップ」ではなく「コードの行」と言うようにフォーマットします。

チャートの基本的な構造が定義されたので、データを追加しましょう。

これを行うには、各データ系列にデータ系列記述子を追加します。

このチャートにはデータ系列が1つしかないので、1つのデータ系列記述子を作成し、連続しているかどうかにかかわらず、シリーズの名前と、このシリーズの実際のデータポイントを渡します。

シリーズが点やバーなどの離散マークを使用して視覚的に表現されている場合は「isContinuous」に「false」を渡す必要があり、シリーズが視覚的に線として表現されている場合は「true」を渡す必要があります。

シリーズのデータについては、AXDataPointオブジェクトの配列を提供する必要があります。

これを行う最も簡単な方法は、チャートモデルのデータからそれらをマッピングすることです。

もうすぐ着くよ!

最後に1つやるべきことがあります。

そして、それは私たちのAXChartDescriptorオブジェクトを構築するためにすべてのピースをまとめることです。

私たちはそれにタイトルを与えます、それは再び、私たちのチャートのタイトルになるはずです。

その後、それがあれば、チャートの要約を提供できます。

これは、チャートに代替テキストを提供するようなものです。

このプロパティを使用して、データから最も重要な洞察を1つまたは2つの文で伝える必要があります。

この要約テキストは、オーディオグラフエクスプローラービューでユーザーに表示されます。

これは、チャートを理解しようとするVoiceOverユーザーにとって非常に役立ちます。

最後に、チャート記述子を完成させるために、以前に作成した軸とデータ系列記述子を提供し、それを返します。

それでおそれ！最終結果を見てみましょう。 

VoiceOver: オーディオグラフ。オーディオグラフを再生します。

チャートの詳細。

オーディオグラフ。見出し：コーヒーのカップとコードの行。

オーディオグラフを再生します。ボタン。

完了。

プレストン：要約しましょう。

チャートのビジュアルデザインにアクセス可能な選択をしてください。

これには、良好なコントラスト比の使用、色に加えて記号を使用してデータのカテゴリを区別すること、色覚異常ユーザーにとって問題となる可能性のあるカラースキームの回避が含まれます。

アクセシビリティツリーでデータ要素を公開して、VoiceOverユーザーに知覚可能でナビゲート可能にしてください。

最後になりましたが、チャートビューにAXChartプロトコルとaccessibilityChartDescriptorを実装して、VoiceOverユーザーが視力のあるユーザーと同じ値をチャートから取得できるようにします。

これで、誰にとっても豊かでアクセスしやすいチャートを作成するために必要なものがすべて揃っています。

データは私たちの生活の中で非常に重要であるため、これらのツールを使用してユーザーに力を与えることを願っています。

チャートは、データが豊富な世界でデータを理解するための最高のツールの1つであり、今ではすべての人にこの利点をもたらすことができます!

♪