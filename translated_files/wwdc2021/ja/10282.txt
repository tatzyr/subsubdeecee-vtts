10282

♪ベース音楽の演奏♪

♪

エリック・ホーンバーガー:リサーチ・アンド・ケア・アプリのコードの第3回と最終回へようこそ!

フォローしたい場合は、セッションリソースでこのアプリのソースコードを見つけることができます。 

ログインして始めましょう。

前回のセッションでは、アプリにいくつかのタスクを追加しました。

それ以来、私はジェイミーからあらゆる種類の通知を受け取っています。

何かが起きているような気がする。"

見てみましょう。

ジェイミーは10分で診療所に到着します。

ジェイミーはモチベーションプレイリストを共有した。

うわー！ご覧のとおり、熱狂的なジェイミーは今、臨床医に会いに行く途中です。

ジェイミーは私たちにいくつかの変更を加え、2つの新機能を追加するように頼んだようです。

最初のビットは、セッション2で実施した調査を強化することです。

ジェイミーは、テスターからそれらについていくつかのフィードバックを得たと言います。

彼は、彼が得たフィードバックは、テスターが事実の後に彼らが与えた答えを伝えることができるようにしたいということでした。

現在、カードは調査が完了したことを示していますが、数日前にスクロールすると、その日にどのような回答をしたかを知る方法はありません。

彼らはまた、編集を現在の日付に制限するたいと考えています。

過去にアンケートの回答を削除したり、モーションテストの範囲をやり直したりすることはできません。

同様に、未来にスクロールして、まだ来ていない日にアンケートに事前回答できるのは本当に意味がありません。

だから、私たちはそのフィードバックに対処し、調査を少し強化することから始めます。

また、まだ少し孤独に見えるこのInsightsタブもあります。

ジェイミーは、そこに一対のチャートを表示するように頼んだ。

1つは睡眠と痛みの関係を捉え、もう1つは時間の経過とともに可動域の改善を示します。

最後に、ジェイミーは、医師が参加者が破れた半月板が何であるかを理解するのを助けるためにいくつかの教育コンテンツを含めるように頼んだと私に言い、ResearchKitはそこで私たちを助けることができるでしょう。

調査を強化することから始めます。

患者が与えた答えを示すことに取り組もう。

先に進み、与えられた答えをテキストとしてカードに表示します。

現在、CareKitでは、タスクカードの外観の微調整は、viewSynchronizerを初期化子に渡すことによって行われます。

カスタムビューシンクロナイザーを作成する方法を見てみましょう。

既存のOCKSurveyTaskViewSynchronizerをサブクラス化します。

このクラスには、makeViewとupdateViewの2つのメソッドをオーバーライドできます。

updateViewは、ストア内のデータが変更されるたびに呼び出され、ビューにカスタマイズを適用できます。

私たちは常にスーパークラスの実装を呼び出すことから始め、それに加えて機能強化を適用します。

結果が完了したイベントがあるかどうかを確認します。 完了しています。

もしあれば、それは調査が終了したことを意味します。

パート2に戻した親切な特性を参照して、痛みの答えと睡眠の答えを手に入れます。

親切なプロパティを設定することで、後で役立つと述べましたが、これは私がほのめかしていたアプリケーションの1つです。

答えが便利なので、文字列補間を使用して、カードの指示ラベルに答えを挿入できます。

そして、それは答えを示すことに対処します。

ジェイミーはまた、過去のタスクの編集を無効にするように頼みました。

これを行う方法の1つは、まず自分自身を調査タスクカードのデリゲートとして設定してから、このデリゲートメソッドに記入することです。タスクのviewController shouldAllowDeleting OutcomeForEvent。

私たちの仕事は、特定のイベントの結果を削除すべきかどうかをCareKitに伝えるブール値を返すことです。

イベントが開催される日付を見ていきます。

日付が今日より早い場合は、削除できないと言います。

今日以降にオンまたはそれ以降の場合は、削除を許可します。

そして、そのように、私たちは過去のデータの削除を防止しました。

ジェイミーが尋ねた3番目のことは、参加者が将来の日付に調査を完了できないようにすることです。

これを行うには、タスクビューコントローラーを作成する直前に同じファイルで少し高く登り、いくつかのカレンダーユーティリティを使用して、コンテンツを入力する日が将来であるかどうかを確認します。

将来の日付の場合は、タスクカードとのやり取りを無効にし、無効になっていることを視覚的に示すために不透明度を下げます。

わかった、いいね！

今、私たちは将来のタスクも完了できないはずです。

私たちがどこに立っているか見てみましょう。

最初に気付くのは、アンケートに与えられた回答がアンケートタスクカードに表示されるようになったことです。

現在の日付でアンケートを削除またはやり直すオプションはまだありますが、過去にスワイプして戻ると、やり直すことができなくなります。

そして、将来に前進すれば、今後の予定をプレビューできますが、まだ調査を完了することはできません。

私たちのアプリは今、本当に一緒に来ています!

私たちがする必要がある最後の2つのことは、チャートと教育コンテンツであり、これらは両方ともインサイトタブにあります。

痛みの評価と睡眠時間を並べて示す2シリーズの棒グラフから始めます。

2つのOCKDataSeriesConfigurationオブジェクトを作成する必要があります。

1つ目は痛みのシリーズです。

IDは、どのタスクのデータをチャートにプロットするかをCareKitに伝えます。

また、凡例のタイトル、色、マーカーサイズ（バーの幅を決定する）、およびイベントアグリゲーターも渡します。

イベントアグリゲーターは、特定の日に発生するすべてのイベントを見て、その日にどのY値を使用すべきかを判断する責任があります。

チェックインタスクでは、1日に1つのイベントしかないことを知っているので、最初のイベントを取り、痛みの質問に対する答えを得ることができます。

それがペインシリーズの構成です。

睡眠にも1つ必要です。

睡眠シリーズはほぼ同じです。

まったく同じチェックインタスクからデータをプロットしています。

違いは、痛みの答えではなく、睡眠の答えを表示することです。

これらの両方を手にして、チャートビューコントローラーを構築できます。

棒グラフを選択し、日付を今日に設定します。

もちろん、2つのシリーズと、店舗の内容が変更されるにつれてチャートを最新の状態に保つために使用される店長への参照も渡す必要があります。

素晴らしい、それが私たちの最初のチャートです。

もう1つ作ろう！

今回は、可動域の散布図になります。

以前と同じようにデータ系列の設定を作成する必要がありますが、今回は1つだけ必要です。

今回の唯一の違いは、チェックインタスクではなくモーションタスクの範囲からデータをプロットし、Y軸の範囲の答えを使用していることです。

次に、ビューコントローラーを作成します。

今回は散布図になり、データシリーズは1つしかありません。

そして、ちょうどそのように、私たちは両方のチャートを設定しました。

彼らがどのように見えるか見てみましょう。

インサイトタブを飛び越えると、両方のチャートがレンダリングされていることがわかります。

彼らは本当に素敵に見えます!

戻って、いくつかの結果を追加または削除すると、火曜日の両方の結果を削除し、インサイトタブに戻ると、チャートが自動的に更新されるはずです。

そして、彼らは持っています!

火曜日のデータはもう表示されません。

いいね！だから、チャートは良さそうです。

ジェイミーはまた、臨床パートナーから受け取った説明文とともに、膝と半月板の3Dモデルを表示するオプションを参加者に与えるよう求めました。

ResearchKitはそれで私たちを助けることができます。

今回は、ResearchKit調査をCareKitのスケジュールに結び付けていないことに注意するために、少し立ち止まりたいと思います。

参加者にこのコンテンツを見てもらいたい特定の時間はありませんので、スケジュールの概念は必要ありません。

同様に、CareKitのストアに固執する結果がないため、CareKitタスクを作成したり、CareKitの調査タスクビューコントローラーを使用したりする必要はありません。

そうは言っても、チームメイトのGaviが昨年WWDCで紹介したFeaturedContentビューを使用できます。

参加者が注目のコンテンツカードをタップしたときに伝えられるように、自分自身を代理人として設定する必要があります。

そうしたら、neeModelTaskを作成し、ORKTaskViewControllerでラップし、参加者に提示します。

モデルの表示が終わったら、ここでコールバックを取得し、それをResearchKitビューコントローラーを却下し、参加者をInsightsタブに戻す機会として使用できます。

わかった、とてもいいね！

しかし、この膝のタスクの定義が欠けています。

Surveys.swiftに記入しに行きましょう。

たった2つのステップで、最初のステップは指示ステップになります。

今日すでに数回使用したので、これらが少なくとも少しは身近に感じ始めていることを願っています。

2番目のステップは3Dモデルのステップです。

3Dモデルステップを作成するたびに、modelManagerも渡す必要があるので、そのすぐ上に、渡すためにUSDZモデルマネージャーを作成します。

すべてが機能していることを確認するために、おもちゃのロボットを表示することから始めます。

最後のビットは、両方のステップで順序付けられたタスクを組み立て、それを返すことです。

さて、アプリを実行すると、Insightsタブに注目のコンテンツカードが表示され、それをタップすると指示手順が表示され、その後におもちゃのロボットモデルが表示されます。

回転したり、ズームインしたりすることで、それと対話することができます...

かなりきちんとしている!

3Dモデルマネージャーの仕組みや、独自のバージョンを実装する方法について詳しく知りたい場合は、昨年のParieceのWWDCセッションをチェックしてください。

アプリを完成させるために、おもちゃのロボットをBioDigitalのモデルマネージャーに交換します。

詳細を知ることに興味がある場合に備えて、プロジェクトのRead Meにこれに関するいくつかのメモを含めます。

このバージョンのモデルマネージャーを使用すると、臨床医からの教育テキストを提供できます。

ここでは、私たちの臨床パートナーが提供するいくつかのコンテンツを見ることができます。

また、参加者の参照のために半月板を強調して、怪我や回復への道をより深く理解できるようにすることもできます。

私たちのアプリは今、本当に一緒に来ています!

実際、それだけです、それがすべてです!

私たちはすべてのボックスをチェックしました!

そして、ちょうど間一髪で!

ジェイミーから別の電話がかかってきているようです。

やあジェイミー、いいタイミングだ！

私たちは、あなたが私たちに頼んだことをすべてまとめました。

ジェイミー:ああ、うわー、うん。私は今それを見ています、エリック。。

見てみましょう...

ええ、これは本当にうまくいっています。

チームの残りの部分は興奮するでしょう、そしてこれは非常に多くの研究の機会を開くでしょう!

あなたに簡単な質問です。

次の会議に向かう前に、何か質問があれば、チームに何を言うべきですか？

エリック：ねえ、それはいい質問だね！

したがって、ResearchKitとCareKitはどちらもオープンソースであり、私たちのチームはGitHubで活動しています。

フレームワークについて質問がある場合、新しい機能をリクエストしたい場合、または貢献したい場合は、GitHubリポジトリで新しい問題を開くように伝えてください。

ジェイミー：はい、それは素晴らしいです。

その情報をチームに渡します。

エリック：ところでジェイミー、あなたはあなたの研究についてもっと私たちに話すことを検討すべきです！

researchandcare.orgに行くと、あなたの研究が誰に役立つかについての詳細をAppleに伝えるために使用できるリンクがあります。

私たちは、私たちのフレームワークがコミュニティによってどのように使用されているかについて聞くのが大好きです!

また、新しい研究研究を提案する機関にApple Watchの助成金を提供する研究者サポートプログラムもあります。

応募したい場合は、当社のウェブサイトでも詳細を見つけることができます。

ジェイミー：本当に？それは素晴らしい！

彼らは間違いなくそれを利用したいと思うと思います。

しかし、エリック、大丈夫、私は別の会議に立ち寄らなければなりません。

後で実行したい2番目のアプリのためのたくさんの大きなアイデアがあります。

Apple Watch用のアプリにはどれくらいの時間がかかると思いますか？

エリック：大丈夫ですが、追いついて後で話し合いましょう。数日後に

しばらく忙しくするのに十分な量があると思います。

ジェイミー：そうそう、今年はWWDCのためにコードアロングをやっていると聞きました

がんばってね!

後で話そう! 

エリック：より多くの情報をご希望の場合は、researchandcare.orgで見つけることができます。

ソースコードはGitHubで入手可能で、今年はあなたが今見たものにつながる他の2つのセッションがあります。

さて、それが私たちがあなたたちのために持っているすべてです。

私たちのコードアロングにご参加いただきありがとうございます!

兄弟フレームワークであるResearchKitとCareKitを並行して使用してアプリをすばやく反復する方法を見ました。

また、いくつかの新機能と最新のベストプラクティスについても取り上げました。

私はあなたが途中でいくつかのヒントやコツを拾うことができたことを願っています。

チームの私たち全員から、あなたが素晴らしいWWDCを持っていることを願っています!

♪