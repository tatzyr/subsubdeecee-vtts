10081

♪ ♪

こんにちは、私の名前はナットです。

そして、私はアップルでゲームテクノロジーに取り組んでいます。

iOS、tvOS、macOSのゲーム入力について追いつくために、今年も参加してくれてありがとう。

今日は、Appleプラットフォームでゲーム入力を初めて利用する方法と理由の両方を簡単に要約することから始めます。

次に、新しいタイプの仮想ゲームコントローラーをお見せして、一緒に小さなコードを書きます。

最後に、より実際の物理コントローラーについて話し、いくつかの新機能について話し合いたいと思います。

では、レビューから始めましょう。

ゲームコントローラーフレームワークの目標は、Appleプラットフォーム間であらゆる種類の効率的で低遅延入力のサポートを簡単に追加できるようにすることです。

一般的なAPIを介して入力ハードウェアを抽象化することで、ゲームコントローラーフレームワークを使用すると、入力がどのように再マップされたか、または特定のコントローラ、キーボード、またはポインティングデバイス間の違いを心配することなく、入力コードを一度書くことができます。

iOS、iPadOS、tvOSでは、プレイヤーはシステム全体およびアプリケーションごとのゲームコントローラー入力リマッピングを作成できます。これにより、ゲームをよりカスタマイズ可能でアクセスしやすくなります。

また、すべてのプラットフォームで、プレイヤーが保持している特定のコントローラーのシンボルと機能を反映するようにUIを構築できます。

だから、あなたのプレーヤーがチームサークルスクエアトライアングルクロスであろうとチームA-B-X-Yであろうと、あなたのゲームUIは彼らにぴったりです。

ゲームコントローラーフレームワークの基本は、さまざまな種類のGCDeviceオブジェクトの接続と切断に関する通知に反応し、入力状態のためにアクティブなデバイスをポーリングするか、入力状態の変更について通知されるように値が変更されたハンドラーを設定することです。

コントローラがシステムに接続または切断すると、GCControllerオブジェクトが作成され、削除され、GCControllerDidConnectおよびGCControllerDidDisconnect通知が送信されます。

キーボードが接続または切断するときのGCKeyboardオブジェクトと、デバイスが接続または切断することを指すときのGCMouseオブジェクトと同じパターンです。

たとえば、GCControllerオブジェクトがいつ接続または切断されるかを調べるために、オブザーバーを追加するだけです。

次に、入力状態が変更されたときに通知するようにこれらの変更ハンドラを設定するか、他の場所でコントローラの状態をポーリングするかはあなた次第です。

これは、コントローラー、キーボード、ポインティングデバイスなど、使用すべきパターンと同じです。

私たちは、ゲームコントローラーをサポートする非常に多くの素晴らしい新しいゲームと、コントローラーをうまくサポートするゲームに対する顧客の大きな関心を見てきました。

だからこそ、私たちは人々がゲームコントローラーをサポートするゲームを見つけるのを本当に助けたいのです。

ゲームがゲームコントローラーをサポートしていることがわかったら、コントローラーサポートバッジでApp Storeでバッジします。

それは小さなことのように見えますよね?

しかし、彼らがコントローラーを使うのが好きなら、それはプレイヤーが探しているものであり、私はそれが私が探しているバッジであることを知っています。

そして、私たちは常にゲームコントローラーでうまく機能するアプリをキュレーションし、宣伝するために目を光らせています。

ゲームコントローラーを本当に輝かせるアプリを発見すると、ゲームには複数のセクションがあります。

あなたのアプリがプロモーションに選ばれることを保証することはできませんが、コントローラーで素晴らしい仕事をすると、プレイヤーは間違いなく気づくでしょう。

だから、あなたのアプリのサポートをマークするためにあなたがしなければならないことはすべてここにあります。

Xcodeでは、ゲームコントローラー機能を追加するだけです。

これは、アプリケーションのInfo.plistにゲームコントローラー機能でタグ付けし、App Storeに提出する前に行う必要があるのはそれだけです。

ゲームにこの機能がある場合、ゲームコントローラーの環境設定パネルのアプリごとのカスタマイズセクションに含めることもわかっています。

プレイヤーは自分の好みに合わせてコントロールを微調整する機能が大好きで、ゲームのアクセシビリティを向上させるのに最適な方法です。

入力の再マッピングに参加するために何もする必要はありませんが、ゲームにタグを付けると、プレイヤーは具体的にカスタマイズできます。

ゲームコントローラーフレームワークを採用すると無料で得られるもう1つの素晴らしい機能は、スクリーンショットとビデオクリップです。

プレイヤーは、コントローラーの共有ボタンをすばやくタッチするだけで、スクリーンショットをキャプチャしたり、ビデオクリップの録画を開始および停止したりできます。

ここで私はFox2をプレイしています。

共有ボタンをダブルタップすると、スクリーンショットをキャプチャできます。

スクリーンショットは、私のカメラロール、macOSを使っている場合はデスクトップ、またはAppleTVから私の携帯電話にAirDropされます。

共有ボタンを長押しして画面の録画を開始および停止したい場合、次のようになります。

少し後、今年追加した新しいタイプのゲームクリップ録画に関するニュースがあります。

ゲーム洗練されたコントローラーをサポートするものについての私の最後のアドバイスは、UIでのグリフの適切な使用です。

在庫を表示するボタンを使用するには、このヒントを検討してください。

MFiまたはXboxコントローラーでは、Yボタンを表示する必要があります。

プレイステーションのコントローラーでは、代わりに三角形を表示したい。

それは小さなことのように思えるかもしれませんが、うわー、私たちはあなたのUIに表示されている間違ったボタン名についてのフィードバックを本当に聞きます。

ゲームに適している場合は、オプションで位置ボタンの位置を表す別のアプローチを検討してください。

一部のプレーヤー、特に新規および若いプレーヤーは、表示している場所をより迅速に認識する可能性があり、ボタンの名前を読むために見下ろす必要はありません。

プレイヤーがシステムリマッピングUIでボタンを再マッピングした場合でも、常に正しいグリフを表示するのが非常に簡単になりました。

たとえば、再マッピング環境設定に示すように、Xボタンの押下をAアクションにマッピングし、ユーザーにAアクションを押して続行するように依頼したい場合、開発者がAアクションに関連付けられたグリフを要求したときに、実際にXグリフを表示したいと考えています。

これを行うには、AボタンのsfSymbolsNameを照会し、名前のUIImageシステムイメージを使用して表示する画像を取得します。

次に、再マッピングに基づいて正しいグリフを表示します。

だから、それは私の非常に迅速な要約でした。

詳細が必要な場合は、過去のWWDC会議のゲームコントローラーに関するこれらの他の講演をチェックしてください。

だから、過去数年間、私たちはiOSとiPadOSにゲームをもたらす多くの開発者と話をしてきました。

多くはもともとゲームコントローラーの入力を中心に設計されたゲームなので、2つのアナログスティック、おそらくdパッドまたはタッチパッド、およびデジタルボタン入力を期待しています。

私たちが聞いたのは、これらのゲームのために一貫性があり、素晴らしい感じで見栄えの良いタッチベースの入力を構築するのに苦労した人もいるということです。

タッチ入力処理コードは、キーボード、マウス、ゲームコントローラーの入力コードパスとは異なると聞きました。

これに対処するために、既存のすべてのゲームコントローラー入力コードと互換性のある新しい仮想オンスクリーンコントローラーについてお話ししたいと思います。

iPhoneとiPad用のこれらの新しいオンスクリーンコントロールは素晴らしく見え、手のサイズ全体のグリップ位置と優れた応答性と感触のために慎重に調整されています。

アプリケーションに簡単に追加でき、ゲームコントローラーのように動作します。

独自のオンスクリーンオーバーレイUIを作成し、タッチ入力をゲーム入力システムに変換する代わりに、これらのオンスクリーンコントロールはゲームコントローラーフレームワークGCControllerオブジェクトと同じようにコードに表示されるため、入力ロジックははるかに一貫性を保つことができます。

それらは独自のシンボルでカスタマイズ可能で、iOSとiPadOSのデザイン言語の要素を共有しながら、あなたの色やスタイルと統合します。

1つのボタン、3つのボタン、またはdパッドと複数のボタンが必要かどうかに応じて、さまざまなレイアウトに調整されます。

画面上のコントローラの中核原理は、左右の領域が独立して構成され、レイアウトが構成に基づいて決定されることです。

要素の手動配置はサポートされていません。

側面ごとに、構成は0〜4つのボタンとサムスティック、dパッド、またはタッチパッドのいずれかで構築できます。

ボタンとスティックには触覚があります。

そして最後に、構成は作成時に固定されます。

要素を表示および非表示にできますが、新しい仮想コントローラーを作成せずに追加または削除することはできません。

それでは、レイアウトを選択し、画面上の仮想ゲームコントローラーを表示するために何をするかを見てみましょう。

まず、使用したいすべての可能なボタンとジョイスティックを識別するGCControllerConfigurationを作成します。

次に、その設定から仮想コントローラーを作成します。

その後、カスタムシェイプを設定したり、いくつかの要素を非表示にしたりするなど、オプションで要素の設定を行うことができます。

次に、コントローラを接続するようにシステムに指示すると、処理に慣れているのと同じGCGameControllerDidConnect通知がトリガーされ、GCControllerオブジェクトが表示されます。

それでは、私がここに示しているようなレイアウトを得るために書くコードを見てみましょう。左側のサムスティック、右側のサムスティック、右側のAボタンとBボタンです。

それはとても簡単です。

新しいGCVirtualControllerConfigurationオブジェクトを作成することから始めます。

次に、どの要素が欲しいかを確立します。

前の写真と同じように、右側に2つの親指スティックと2つのボタンが必要です。

次に、その設定を使用してGCVirtualControllerオブジェクトを作成します。

そして最後に、接続を呼び出します。標準のGCControllerDidConnectNotificationが到着します。

だから、それは簡単でした。

しかし、この写真のように、これらのボタンの独自のビジュアルをどのように確立しますか?

これは、GCVirtualController要素の設定を調整することで簡単に実行できます。

回転攻撃を示すためにAボタンを変更し、ジャンプを示すためにBボタンを設定するこのレイアウトを作成するには、Aボタンの設定を調整してBezierPathを追加するだけです。

次に、Bボタンを設定してBezierPathを確立します。

Config.hiddenプロパティを使用して、さまざまなボタン要素を表示および非表示にするのと同じくらい簡単です。

ご覧のとおり、これらのコントロールを好みに合わせてカスタマイズするのにそれほど多くはかかりません。

では、物理コントローラーの非仮想世界に戻りましょう。

プレイヤーが選べる素晴らしいコントローラーがたくさんあります。

Made for iPhone、MFiコントローラーはたくさんあり、常に新しいものや改善が見られます。

L3 / R3サムスティックトリガーとより多くのシステムボタンを備えたスタンドアロンのSteelSeries Nimbus +は本当に素晴らしいです。

私はまた、フォームフィットのRazer KishiとBackbone Oneの大ファンです。

これらのタイプのフォームフィッティングコントローラーは、私のバックパックに入れておくための私の新しいお気に入りです。

もちろん、MFiコントローラーに加えて、すべてのAppleプラットフォームでSony DualShock 4とXbox Oneコントローラーをサポートしており、プレイヤーは昨年追加したXbox Elite V2とXbox Adaptiveコントローラーのサポートが大好きです。

iOS 14.5とmacOS 11.3で、最新世代のコンソールコントローラーのサポートを追加しました。

Sony DualSenseコントローラーとXbox Series Xコントローラーは、とても素晴らしい感覚のコントローラーで、ゲームコントローラーフレームワークを使用しているときにのみ機能します。

Xbox Series Xコントローラーには新しい専用の共有ボタンがあり、DualSenseにはクールなアダプティブトリガー技術があります。

アダプティブトリガーと、それらを使用する方法を掘り下げてみましょう。

DualSenseアダプティブトリガーを使用すると、フォースフィードバックを使用してゲームイマージョンを向上させることができます。

プレイヤーが何をしているかに基づいてトリガーにさまざまな抵抗を動的に適用することで、弓の弦や張力とより多くの感覚の下にあるパチンコを引っ張る感覚をエミュレートすることができます。

私はあなたがこれらのトリガーがどれほど素晴らしいと感じるかを感じる機会を得ることを願っています。

ゲームコントローラーフレームワークでアダプティブトリガーをサポートする方法は本当に簡単です。

まず、プレイヤーのコントローラーの物理入力プロファイルがDualSenseであることを確認する必要があります。

次に、メソッド呼び出しで求めているアダプティブトリガー効果を設定するだけです。

本当にダイナミックなエフェクトを作成したい場合は、アダプティブトリガーとゲームの状態を継続的に読み取り、それに応じてエフェクトを調整できます。

たとえば、トリガーをより強く引っ張るときや、プレイヤーがロープをより大きな張力に引っ張るときに、より多くの抵抗を加えることができます。

最後に、子供たちが部屋を出るときに明かりを消すように思い出させるように、終わったら適応トリガー効果をオフにする必要があります。

簡単なコード例に飛び込んで、実際にこれを達成する方法を見てみましょう。

だから、プレイヤーがいくつかのターゲットをノックアウトするためにパチンコを発射できるゲームがあるとしましょう。

プレイヤーは左のトリガーで照準を開始し、右のトリガーでパチンコを引き戻すことができます。

プレイヤーがパチンコを引き戻すときに、アダプティブトリガー効果を追加したい。

まず、プレイヤーのコントローラーがDualSenseであることを確認する必要があります。

私たちのゲームはシングルプレイヤーゲームなので、GCController.currentをチェックしてアクティブなコントローラーを取得できます。

その後、DualSenseの適切なアダプティブトリガーをつかむことができます。

この例では、プレイヤーがパチンコを狙っているときにのみ抵抗力を適用したいと思うでしょう。

トリガーがどこまで引っ張られたかに基づいて、適用された抵抗の強さを動的に計算します。

トリガーがずっと引き戻されていない場合は、アダプティブトリガーにフィードバック効果を適用します。

フィードバック効果は、引き金を引くときに指に一定の抵抗を提供します。

そうでなければ、トリガーがずっと後ろに引っ張られた場合は、低周波の振動効果を適用します。

この効果により、トリガーが振動し、パチンコを引き戻して緊張させ続けるのに苦労している感覚をエミュレートします。

最後に、プレイヤーがパチンコを発射したら、アダプティブトリガーをオフにしたい。

今日の会話の最後のトピックは、ゲームコントローラーの共有ボタンによるメディアキャプチャについてです。

昨年、コントローラーの指定された共有ボタンにいくつかのメディアキャプチャジェスチャーを導入しました。

共有ボタンは通常、コントローラーの左上のシステムボタンにマッピングされますが、Xbox Series Xのような一部のコントローラーには、他の場所で共有というラベルの付いたボタンがあります。

先ほど示したように、メディアキャプチャのシステムジェスチャーは、カメラロールのスクリーンショットをキャプチャするためのダブルプレスと、ReplayKitの録画を開始および停止するための長押しです。

今年は、超クールな新しいタイプのメディアキャプチャ、15秒のハイライトを追加します。

だから今、あなたの記録を開始および停止することを覚えておく代わりに、プレイヤーは自動バックグラウンドバッファリングをオンにすることができます。これにより、長押しするといつでもゲームプレイの最後の15秒を保存できます。

ReplayKitクリップは、ゲーマーが素晴らしいボスバトル、素晴らしいコンボの動き、または壮大な失敗をキャプチャするための素晴らしい方法です。

より長い録画の開始と停止の自動形式、または15秒のハイライトを保存できるバックグラウンド録画の開始のどちらかを選択するには、ゲームコントローラーの環境設定パネルでグローバルまたはアプリケーションごとの設定を切り替えるだけです。

ゲームの重要なポイントに独自のハイライトをトリガーしたい場合は、そのためのAPIがあります。

これにより、これらの15秒のスナップショットもトリガーされます。

ふぅ。わかりました。

これで、今年のゲーム入力ニュースが終わります。

行く前に、アプリごとにカスタマイズできるように、ゲームコントローラーのサポートでアプリにタグを付けることを忘れないでください。そうすれば、App Storeはアプリを適切に分類できます。

ゲームコントローラー、キーボード、マウス入力をゲームでどのように活用するかを本当に楽しみにしています。

ゲーム開発者やゲーマー向けの機能に関するプレゼンテーションをもっと見る準備ができたら、「ReplayKitでローリングクリップを発見」と「Game Centerの新機能」もチェックしてください。

見てくれてありがとう。

また近いうちにお会いできるのを楽しみにしています。

今のところ、オンラインでお会いし、ご質問にお答えできることを楽しみにしています。

[明るい音楽]。