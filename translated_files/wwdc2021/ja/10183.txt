10183

♪ベース音楽の演奏♪

♪

ピエール・ド・フィリッピス:こんにちは。私の名前はピエールです。

私はコミュニケーションアプリケーションチームのマネージャーで、後で同僚のBhaskarが加わります。

「Meet Group Activities」にあなたをお迎えできて光栄です。私たちは皆、この1年間、つながりを維持する方法を見つけることがこれまで以上に不可欠だと感じたことを認識できると思います。

これはAppleにとって非常に重要であり、私たちはユーザーに有意義な新しいつながりの方法を提供したかったのです。

その結果、iOS 15では、あなたと共有する人々と同じ部屋にいるように感じさせる、一緒にアクティビティを楽しむ新しい方法を作成しています。

そして、私たちはそれを「シェアプレイ」と呼んでいます。

SharePlayはグループアクティビティフレームワークによって強化されており、このセッションでは、アプリケーションで採用する方法について説明します。

これらの詳細に入る前に、SharePlayの主要コンポーネントについてもう少しお話ししましょう。

コミュニケーションから始めましょう。

私たちは、ダイナミックで自然なコミュニケーションが有意義な共有体験の非常に重要な部分であると考えているので、SharePlayをFaceTimeとメッセージに組み込みました。

私たちは、特に昨年、これらのアプリが人々の生活や人間関係においてどのように中心的になったかに絶えず圧倒されています。

そして、人々は30年前のその友人と時々つながるためにFaceTimeとメッセージを使用するだけではありません。

代わりに、私たちのユーザーは、彼らに最も近い人々、彼らの最も親しい友人、そして彼らの最も近い家族とのコミュニケーションにかなりの時間を費やしています。

それらは、例えば、あなたが映画を見るためにあなたのリビングルームに招待する種類の人々であり、それはまさに私たちがSharePlayで促進したいものです。

これがどのように機能するかについて考えてみましょう。

すべてはセッションの概念から始まります。

グループがアクティビティを開始する前に、全員が一緒になって共有する準備ができているように、セッションに参加する必要があります。

ユーザーがセッションに入ると、慣れているように、メッセージやFaceTimeでテキスト、オーディオ、ビデオを介して通信できます。

これらの通信モードの切り替えは動的で流動的であるため、その瞬間に合った通信方法を簡単に選択できます。

また、セッションを管理するための一貫したシステム全体の方法も提供します。

ユーザーは、その場で新しい人を招待したり、セッションから完全に離脱したりできます。

セッションに入ると、ユーザーはシステム全体をナビゲートし、任意のアプリにドロップインできます。

開発者として、グループアクティビティで無料で入手できます。

それがコミュニケーションです。

私たちが重要だと思う次の分野は、プラットフォームの経験です。

私たちは、この経験がシンプルで一貫性があり、システムとデバイス全体で利用可能であることを望んでいます。

グループアクティビティでは、iOS、iPadOS、macOSで機能する統一されたエクスペリエンスを構築しています。グループアクティビティは、WebKitを使用してWebサイトでも利用できます。

AppleTVでも美しく機能するので、大画面で楽しむことができます。

セッション中にすべてのデバイスが認識されるため、どのデバイスからでも参加でき、複数のデバイスをシームレスに使用できます。

最後に、AirPodsを含むBluetoothデバイスに優れたオーディオを提供するように設計しました。

プラットフォーム体験の一環として、私たちはコンテンツの再生のために特別なことをしています。

APIの表現力を最大限に活用して、さまざまな種類のSharePlayアクティビティを作成することを願っていますが、共有メディア体験を簡単に構築できる、本当にクールな機能強化を作成しました。

メディアエクスペリエンスの中核は再生ボタンです。ユーザーがどのコンテンツに時間を費やしたいかを決める瞬間です。

私たちの目標は、システム全体のすべての再生ボタンがSharePlayで動作することです。

私たちは、あなたのアプリ内のメディアが、友人とFaceTimeをしているときはいつでも、共有体験を開始する準備ができていると人々に感じてもらいたいです。

既存のコードパスにぴったり合うように設計された新しいAPIを提供しています。

グループアクティビティを採用することで、グループ会話がアクティブなときはいつでも、再生ボタンでこれらの共有メディア体験を開始できるようになりました。

そして、時間の経過とともにスマートを使用してユーザーの行動に適応し、共有体験を楽にします。

次は時間同期再生です。

私たちは、人々が一緒に笑い、一緒に微笑み、同時にコンテンツに反応することが非常に重要だと思います。

SharePlayは、再生時間をプラットフォームレベルで同期させるので、単に採用することができ、自分で転がすことを心配する必要はありません。

さて、SharePlayでコンテンツを消費することに関しては、これは解決すべき困難な問題でした。

私たちは、たとえ彼らが世界の半分にいても、人々がお互いにまったく同じ瞬間を体験できるようにしたかったのです。

まだ起こっていないことを友達が笑うのを見たり聞いたりすることを想像してみてください。

ネタバレ注意！

そこで、デバイス上のAVFoundationスタックに深く統合されたまったく新しい再生同期プロトコルを構築しました。

つまり、誰かが再生を押すと、グループ内の全員がすぐに同時に再生を開始します。

お気に入りのシーンにジャンプすると、他のみんなもそれを見て、まるで同じ部屋にいるかのように、人々が完璧な同期で一緒に瞬間を体験することができます。

この再生同期の背後にある魔法は、いかなる方法でもあなたのメディアを再送信しないことを意味します。

アプリから直接再生され、いつものようにサーバーからストリーミングされるため、誰もがあなたの完全な忠実度のビデオを取得します。

そして、すべての視聴者が最高品質のビデオを見ていることを確認することで、コンテンツの品質を損なうことのない没入型のソーシャル視聴体験を得ることができます。

また、再生中にコミュニケーションを自然に感じさせるための画期的な作業も行っています。

スマートボリュームを使用すると、再生中に人々が声を上げると、自動的にコンテンツのオーディオをダックし、必要に応じて元に戻します。

そのため、人々は同じ部屋に座っているのと同じように、音声、ビデオ、テキストを介して自然にコミュニケーションをとることができます。

そしてもちろん、それはピクチャー・イン・ピクチャーで美しく機能するので、ユーザーはデバイス上でマルチタスクをしながら、あなたのコンテンツと一緒に取ることができます。

だから、それは私たちがプラットフォームでやっていることの簡単な概要です。

そして最後に、コンテンツ。そして、それはあなたが入るところです。

私たちは、ユーザーがあなたのアプリで利用可能にした最高のコンテンツを楽しむことができることを望んでいます。

人々がFaceTime通話をしているとき、彼らはあなたのアプリに入ってあなたのコンテンツを共有できることを期待するでしょう。

SharePlayを使用すると、製品のタッチポイントを拡張し、アプリがユーザーに関連する時間を増やすことができます。

そして、これは非常に有機的に起こります。

既存のユーザーは、他の人とSharePlayを使用しているときに、あなたのアプリを伝道します。

SharePlayの主要コンポーネントの概要を簡単に説明したので、フレームワークのコアコンセプトであるグループ活動に注意を向けましょう。

グループアクティビティは、SharePlayを使用してFaceTime通話の人々と共有して楽しむことができるものを表すオブジェクトです。

ユーザーがアプリでグループアクティビティを開始する方法を説明します。

通話中、ユーザーはアプリに移動でき、グループアクティビティを採用した場合は、アプリがSharePlayをサポートしていることが通知されます。

共有するアクティビティを設定するには、まずGroupActivityプロトコルを実装するオブジェクトを作成する必要があります。

アクティビティを設定したら、prepareForActivation APIを呼び出すと、そのアクティビティの共有を開始します。

このAPIは、そのアクティビティをFaceTime通話の全員と共有するか、ローカルに保つかのオプションをユーザーに提供します。

グループと共有することにした場合、グループアクティビティが通知し、GroupSessionオブジェクトに参加できます。

ユーザーがグループセッションに参加すると、再生、一時停止、またはシークしても、ビデオはグループと同期されます。

これらのイベントが発生するたびに、ここに示すように、グループアクティビティは自動的にユーザーに通知します。

そして最後に、ユーザーが完了したら、彼らは自分自身またはグループ全体のために活動を終了することを選択できます。

それはそれと同じくらい簡単です!

さて、このプレゼンテーションの残りの部分を案内するBhaskarに渡します。

バスカル・サルマ:ありがとう、ピエール。

こんにちは、私の名前はBhaskarで、FaceTimeチームのエンジニアです。

それでは、この新しいフレームワークの背後にある高レベルの概念とアーキテクチャのいくつかについて話しましょう。

GroupActivitiesは、FaceTime通話中にアプリケーションのユーザー間で共有エクスペリエンスを作成できるSwiftネイティブフレームワークです。

さらに、このフレームワークはAVFoundationと緊密に統合されており、共有ビデオとオーディオの再生体験を簡単に作成できます。

APIの背後にある高レベルの概念について説明する前に、APIの2つの重要な部分について話したいと思います。これらはGroupActivityとGroupSessionです。

GroupActivityは、アプリが共有エクスペリエンスを定義するために使用するものです。

アプリケーションが共有エクスペリエンスに必要な情報を保持します。

たとえば、共有オーディオまたはビデオの再生エクスペリエンスを行っている場合、再生中のコンテンツのURLを保持する場合があります。

または、アプリケーションがカスタム共有エクスペリエンスを提供する場合があります。

たとえば、ドロー・アロー・エクスペリエンスを提供することができます。

その場合、これはユーザーが描画しているものに関する情報を保持します。

GroupSessionは基本的に、共有された経験に参加するグループの表現です。

グループの参加者のようなものへのアクセスを提供します。

また、フレームワークには追加のAPIがあり、GroupSessionと一緒に使用して、デバイス間でデータを送受信できます。

GroupSessionは大量のデータを交換するものではありませんのでご注意ください。

たとえば、共有リスニングエクスペリエンスを作成する場合、GroupSessionは曲の内容を交換するために使用されません。

代わりに、このチャンネルはAVFoundationによって使用され、再生、一時停止、またはシークコマンドを交換することでコンテンツを同期させます。

また、GroupSessionが提供する通信媒体はエンドツーエンドで暗号化されています。

これは、デバイス上のアプリケーション以外の誰も、このチャネルを介して交換されるデータを読み取ることができないことを意味します。

ここでは、画面に2台の電話があります。

左側は私の電話、右側はチームメイトのピエールの電話です。

そして、私たちはFaceTime通話中です。

また、画面に「素晴らしいアプリ」と呼ばれるサンプルアプリケーションがあり、アプリは私とピエールの間で共有体験を開始する準備ができています。

したがって、この場合、左側のデバイス上のアプリケーションがアクティビティを開始します。

アプリケーションが最初に行う必要があるのは、GroupActivityプロトコルに準拠したオブジェクトを作成することです。

ここに示す例では、GroupActivityに準拠したAwesomeActivityオブジェクトです。

先に述べたように、GroupActivityプロトコルに準拠したこのオブジェクトには、共有アクティビティに関する情報が含まれています。

たとえば、共有再生エクスペリエンスを作成する場合、再生するコンテンツに関する情報が表示されます。

または、一緒に何かを描くようなカスタムエクスペリエンスを作成する場合は、何を描くかについての情報があります。

アプリがアクティビティを作成したら、次に行う必要があるのは、アクティビティのprepareForActivationを呼び出すことです。

これにより、アクティビティを開始する場合に許可を求めるプロンプトが表示されます。

私たちは、彼らに驚きを与えたくないので、活動を開始する前にユーザーの同意を得たい。

したがって、このステップは不可欠です。

そして最後に、ユーザーがアクティビティを開始する許可を与えた後、アプリはアクティビティオブジェクトでアクティベートを呼び出す必要があります。

これは、アプリが共有エクスペリエンスを開始したいことをシステムに伝えます。

次に、観察セッションについて話しましょう。

ここには、先ほど見ていたのと同じアプリがあります。

この時点でのアプリケーションは、アクティビティオブジェクトでアクティブ化を呼び出しました。

その後、アプリケーションは、GroupSessionクラスのAsyncSequenceを介して着信セッションを反復する必要があります。

そして、セッションがあると、アプリケーションは共有エクスペリエンスのためにGroupSessionオブジェクトを渡されます。

これは、開始アプリであろうと、セッションを受信するリモートデバイスであろうと、アプリケーションが実行するのと同じステップであることに注意してください。

グループセッションの開始と観察の詳細については、このWWDCセッションを見ることをお勧めします。

アプリケーションがセッションを手渡されたので、セッションに参加する前に自分自身を設定する必要があります。

参加する前にアプリケーションを設定すると、アプリケーションの特定のユースケースに基づいて異なることを意味する可能性があります。

たとえば、何かを一緒に描画するなど、カスタムエクスペリエンスを作成する場合、ユーザーがエクスペリエンスに参加する前に、共有エクスペリエンスに必要なアセットをロードすることを意味する可能性があります。

ただし、アプリケーションが共有メディア再生エクスペリエンスを提供している場合は、このようなものが含まれます。

アプリケーションは、AVPlayerのAVPlaybackCoordinatorをGroupSessionに接続し、関連するAVPlayerがフレームワークによって提供される通信チャネルを介してコンテンツを同期できるようにします。

この同期サポートはAVPlayerだけでなく、現在持っている他のカスタムビデオプレーヤーを使用しても、AVDelegating PlaybackCoordinatorを介して同期のサポートを受けることができます。

そして最後に、アプリケーションの設定が完了すると、アプリケーションコールはGroupSessionに参加します。

結合が呼び出されると、システムは異なるデバイス間で実行されているアプリ間でエンドツーエンドの暗号化されたチャネルを設定します。

この時点で、アプリケーションはデータを同期し、ユーザーが共有エクスペリエンスに参加できるようにする準備が整いました。

カスタムエクスペリエンスを作成する場合、アプリケーションはこのチャネルを使用してデータを交換し、ユーザーを同期させることができます。

このチャンネルは、ユーザーが再生、一時停止、スキップなどを押したときに再生状態を交換して、メディア再生を同期させるためにAVFoundationによっても使用されます。

このチャネルは、大量のデータを交換するために使用することを意図していないことに注意してください。

代わりに、ユーザーを同期させるために情報を交換するために使用します。

今、あなたのアプリケーションはセッション中であり、あなたのユーザーは共有された経験を楽しんでいます。

ユーザーのエクスペリエンスを豊かにするためにできることがもう1つあります。それは、フレームワークを使用したイベントを投稿することです。

イベントにより、ユーザーは共有エクスペリエンスで何が起こっているのかを知ることができます。

たとえば、イベントを投稿して、誰かがトラックを再生、一時停止、またはスキップしたときにユーザーに知らせることができます。

イベントを投稿すると、システムはイベントについてユーザーに伝える通知を提示します。

現在のAPIでは、メディア再生体験のためのイベントのみを投稿できます。

AVPlayerを使用するか、AVDelegating PlaybackCoordinatorを使用すると、これが無料になります。

ただし、これらのいずれかを使用していない場合でも、アプリはフレームワークを使用してイベントを投稿できます。

独自のカスタムエクスペリエンスの提供とイベントの投稿の詳細については、このWWDCセッションを見ることをお勧めします。

最後に、グループアクティビティは、FaceTimeで共有エクスペリエンスを作成できる新しいSwiftネイティブフレームワークです。

このフレームワークはクロスプラットフォームで、iOS、macOS、iPadOS、tvOSで利用できます。

AVFoundationと緊密に統合されているため、アプリは共有メディア再生体験を提供できます。

そして最後に、macOSのウェブ上での再生同期もサポートしています。

それとともに、私たちのセッションをご覧いただきありがとうございます。

そして、素晴らしいWWDC21を!

♪