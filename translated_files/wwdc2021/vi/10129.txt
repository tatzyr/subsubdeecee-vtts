10129

Tên tôi là Lucy Zhang, và tôi là một kỹ sư phần mềm trong nhóm Cài đặt và Cập nhật Phần mềm.

Hôm nay tôi sẽ nói về các bản cập nhật phần mềm được quản lý cho macOS, iOS và iPadOS.

Cập nhật phần mềm rất quan trọng đối với mọi người sử dụng các sản phẩm của Apple.

Các bản cập nhật mang lại những cải tiến bảo mật mới, như công chứng và khối lượng hệ thống kín trong macOS Big Sur.

Chúng kích hoạt tất cả các tính năng mới nhất, và có lẽ quan trọng nhất, đó là cách bạn có được tất cả các biểu tượng cảm xúc mới.

Nền tảng của chúng tôi giúp bạn dễ dàng cập nhật thiết bị của mình.

Trên thực tế, 86% tất cả iPhone được giới thiệu trong bốn năm qua sử dụng iOS 14.

Tuy nhiên, trong môi trường được quản lý, bạn cần kiểm soát nhiều hơn đối với quy trình này.

Khi quản lý một nhóm thiết bị, bạn muốn cập nhật chúng, nhưng bạn cần thời gian để kiểm tra các bản cập nhật trước khi phát hành chúng, để đảm bảo rằng hệ điều hành tương thích với phần mềm của bạn.

Sau khi thử nghiệm của bạn hoàn tất, bạn muốn đảm bảo rằng các bản cập nhật được cài đặt càng sớm càng tốt, đồng thời giảm thiểu sự gián đoạn cho người dùng.

Trong phiên này, trước tiên chúng ta sẽ khám phá các chương trình và hạn chế cho phép bạn thử nghiệm bản beta và các bản cập nhật phần mềm mới được phát hành.

Tiếp theo, các lệnh MDM để triển khai các bản cập nhật.

Và cuối cùng, tôi nóng lòng muốn nói với bạn về một cách mới mà bạn có thể đảm bảo người dùng được cập nhật lên phiên bản mới nhất mà bạn đã sẵn sàng hỗ trợ.

Hãy bắt đầu với các bản cập nhật thử nghiệm.

Khi Apple phát hành hệ điều hành beta, bạn có thời gian và công cụ để kiểm tra hệ điều hành trong môi trường của mình trước khi nó được phát hành.

AppleSeed cho CNTT giúp bạn truy cập và thử nghiệm phần mềm Apple mới trong khi nó đang trong giai đoạn thử nghiệm.

Bất kỳ ID Apple được quản lý không phải sinh viên nào từ Apple School Manager hoặc Apple Business Manager đều có thể tham gia vào chương trình, cho phép bạn truy cập vào phần mềm Apple trước khi phát hành để kiểm tra trong môi trường của bạn và bao gồm các kế hoạch kiểm tra chi tiết và cách cung cấp phản hồi.

Khi bản cập nhật được phát hành công khai, bạn vẫn có thể cần thời gian để kiểm tra và bạn chưa muốn bản cập nhật có sẵn cho tất cả người dùng của mình.

Vì điều đó, bạn phải trì hoãn.

Trì hoãn ngăn các thiết bị được giám sát cung cấp các bản cập nhật phần mềm cho người dùng, cho đến khi một khoảng thời gian xác định đã hết hạn kể từ khi các bản cập nhật đó được Apple xuất bản.

Khi bạn áp dụng hạn chế trì hoãn, độ trễ mặc định là 30 ngày kể từ khi xuất bản cập nhật.

Bạn cũng có thể chỉ định một giá trị tùy chỉnh trong khoảng từ 1 đến 90 ngày.

Khi bản cập nhật đã có sẵn đủ lâu để độ trễ được chỉ định hết hạn, bản cập nhật đó sẽ được cung cấp cho người dùng như một phần của thông báo cập nhật phần mềm tiêu chuẩn và quy trình cập nhật.

Những hạn chế này cung cấp cho bạn quyền kiểm soát chi tiết hơn đối với giao diện Cập nhật Phần mềm trong Tùy chọn Hệ thống.

Hạn chế cập nhật hoãn lại chỉ ảnh hưởng đến giao diện Cập nhật Phần mềm.

Nó không thay đổi hành vi của các lệnh MDM.

Ngay cả với một bộ hạn chế, MDM có khả năng gửi các bản cập nhật cụ thể đến các thiết bị.

Đối với iPhone, iPad và Apple TV, việc trì hoãn cập nhật phần mềm có sẵn trong iOS 11.3 trở lên, iPadOS 13.1 trở lên và tvOS 12.2 trở lên.

Khi bạn trì hoãn các bản cập nhật, bạn đặt cùng một cửa sổ trì hoãn cho các bản cập nhật lớn và nhỏ.

Đối với máy tính Mac, việc trì hoãn cập nhật phần mềm có sẵn trong macOS 10.13 trở lên.

Trong macOS 11.3 trở lên, quản trị viên bây giờ có thể chọn trì hoãn các bản phát hành chính lâu hơn các bản phát hành nhỏ.

Bằng cách đó, người dùng vẫn có thể hưởng lợi từ các bản cập nhật bảo mật quan trọng, trong khi quản trị viên làm việc để phê duyệt bản phát hành chính mới nhất để sản xuất trong môi trường của họ.

Đây là những phím mà bạn có thể đặt trong hồ sơ để cài đặt trên máy tính Mac.

Sử dụng khóa forceDelayedMajorSoftwareUpdates để trì hoãn một bản phát hành chính.

Với khóa này, bạn vẫn có thể nhận được các bản cập nhật hệ điều hành và bảo mật nhỏ, trong khi trì hoãn bản cập nhật hệ điều hành lớn.

Có thể có những lúc bạn muốn trì hoãn riêng một bản phát hành nhỏ và bạn sẽ sử dụng khóa forceDelayedSoftwareUpdates để làm điều đó.

Và để trì hoãn riêng các bản cập nhật bổ sung, bạn sẽ sử dụng khóa forceDelayedAppSoftwareUpdates.

Nếu một loại trì hoãn được bật, nhưng không có khoảng thời gian trì hoãn tương ứng nào được đặt, chúng tôi sẽ quay lại sử dụng khóa cũ, ManagedDeferredInstallDelay.

Khi có các hạn chế trì hoãn, đây là cách ngăn tùy chọn cập nhật phần mềm xuất hiện trên macOS.

Hãy cùng khám phá cách trì hoãn có thể hoạt động.

Quay lại dòng thời gian, bây giờ bạn đã hoãn cập nhật và tiếp tục thử nghiệm hệ điều hành mới về khả năng tương thích trong môi trường của bạn.

Khi bạn đã xác nhận hệ điều hành và hoàn thành thử nghiệm, bạn đã sẵn sàng đẩy nó đến người dùng.

Bạn muốn các thiết bị cập nhật khi người dùng đã sẵn sàng và nó không xâm phạm quy trình làm việc của họ.

Vì vậy, hãy khám phá việc triển khai các bản cập nhật.

Có một vài bước để cài đặt bản cập nhật phù hợp trên đúng thiết bị và với macOS Monterey, có nhiều sự cân bằng hơn bao giờ hết giữa macOS và iOS.

Bước đầu tiên trong việc triển khai các bản cập nhật cho tất cả các nền tảng là kiểm tra các bản cập nhật và xác nhận tính đủ điều kiện của thiết bị.

Đây là cách điều đó đã được thực hiện cho Mac trước macOS Monterey.

Các bản cập nhật hệ điều hành có sẵn chỉ có thể được đánh giá trên thiết bị của người dùng.

Bạn đã sử dụng lệnh ScheduleOSUpdateScan, lệnh này yêu cầu Mac truy vấn máy chủ để biết các bản cập nhật hệ điều hành có sẵn và sau đó đánh giá các bản cập nhật để xác định tính đủ điều kiện.

Sau khi quá trình quét kết thúc và được gửi lại máy chủ MDM, MDM sau đó có thể chọn một bản cập nhật để triển khai.

Tuy nhiên, Apple cung cấp dịch vụ Tra cứu phần mềm của Apple, cung cấp danh sách các phiên bản hệ điều hành có sẵn trên các nền tảng.

Ở đây, chúng tôi được giới thiệu với các thiết bị iOS.

Bạn có thể đã sử dụng nguồn cấp dữ liệu cho iPhone và iPad để giảm bớt việc qua lại đi kèm với ScheduleOSUpdateScan cho Mac.

Đối với iOS, các giải pháp MDM sử dụng Dịch vụ Tra cứu Phần mềm của Apple để nhận biết các bản cập nhật có sẵn để đẩy lệnh trực tiếp đến thiết bị.

Đây là cách thực hiện: Đầu tiên, Máy chủ MDM có thể nhận được danh sách các bản cập nhật có sẵn, chẳng hạn như 12.1 hoặc 12.2, từ Dịch vụ Tra cứu Phần mềm của Apple.

Khi bạn đã sẵn sàng triển khai bản cập nhật, máy chủ MDM sẽ gửi phiên bản cập nhật đến thiết bị.

Sau đó, thiết bị sẽ đến máy chủ cập nhật phần mềm để xác minh rằng bản cập nhật đủ điều kiện và bắt đầu tải xuống và cài đặt nó.

Mới với macOS Monterey, chúng tôi đang thống nhất quy trình này cho macOS và iOS.

Bây giờ chúng tôi hỗ trợ khóa truy vấn DeviceInformation mới được gọi là SoftwareUpdateModelID, trả về chuỗi mô hình phần cứng cho iOS và macOS cho MDM.

Dịch vụ tra cứu phần mềm của Apple sẽ bao gồm mã định danh phần cứng thích hợp cho macOS, cho phép các máy chủ MDM xác định khả năng áp dụng của bản cập nhật mà không cần lệnh AvailableOSUpdates.

Cũng giống như trên iOS, MDM sẽ có thể xác định khả năng ứng dụng cập nhật bằng cách so sánh kết quả từ truy vấn DeviceInformation với ID thiết bị được liệt kê trong nguồn cấp dữ liệu JSON.

Ngoài ra, cho đến bây giờ, macOS đã bỏ qua khóa ProductVersion và sử dụng ProductKey thay thế.

Kể từ macOS Monterey, khóa ProductVersion sẽ được hỗ trợ trên macOS.

iOS đã sử dụng khóa này để chỉ định các bản cập nhật.

Để tương thích, nếu bạn chỉ định cả ProductVersion và ProductKey, thì ProductKey sẽ được sử dụng.

Nếu thiết bị không thể tìm thấy bản cập nhật đủ điều kiện cho phiên bản đó, nó sẽ gửi phản hồi thích hợp.

Điều này loại bỏ chuyến đi khứ hồi cho các bản cập nhật hệ điều hành nhỏ miễn là trước đó bạn đã thu thập ID thiết bị được hỗ trợ của thiết bị.

Quản trị viên MDM có thể tự động cài đặt và ủy quyền cập nhật phần mềm cho macOS, iOS và iPadOS, miễn là thiết bị được giám sát.

Trong macOS 11 trở lên, tất cả các máy tính Mac được đăng ký bằng Đăng ký thiết bị hoặc Đăng ký thiết bị tự động đều được giám sát.

Đối với iOS và iPadOS, người dùng sẽ được yêu cầu nhập mật mã của họ để tiến hành cập nhật.

Máy tính Mac với Apple silicon giới thiệu khái niệm "quyền sở hữu".

Quyền sở hữu có thể được định nghĩa một cách lỏng lẻo là người dùng lần đầu tiên yêu cầu một máy Mac để định cấu hình nó cho mục đích sử dụng của họ và không bị ràng buộc với quyền sở hữu hợp pháp thực sự hoặc chuỗi lưu ký.

Quyền sở hữu xác định ai được phép thực hiện các thay đổi đối với chính sách bảo mật khởi động cho một cài đặt macOS cụ thể.

Trên Apple silicon, chính sách bảo mật khởi động xác định các hạn chế xung quanh phiên bản macOS nào có thể khởi động trên máy tính Mac và quyền sử dụng mã thông báo khởi động để cập nhật tự động.

macOS yêu cầu xác thực để thực hiện cập nhật.

Đối với máy tính Mac với Apple silicon, xác thực yêu cầu mật khẩu người dùng hoặc mã thông báo khởi động MDM.

Mật khẩu người dùng được yêu cầu để cập nhật tương tác, do người dùng khởi tạo thông qua Tùy chọn hệ thống.

Mã thông báo MDM Bootstrap được sử dụng cho các bản cập nhật tự động không tương tác, yêu cầu macOS 11.2 trở lên và bản cập nhật đang được cài đặt phải được Apple ký.

Mới trong macOS Monterey, chúng tôi đã giới thiệu hỗ trợ cho mã thông báo bootstrap cho các luồng cài đặt sau do MDM khởi tạo.

Điều này có nghĩa là các thiết bị silicon của Apple có thể lên lịch và thực hiện cập nhật sau đó, khi thiết bị không được sử dụng.

Người dùng của bạn sẽ đánh giá cao việc bạn đang cập nhật thiết bị của họ trong khi không làm gián đoạn quy trình làm việc của họ.

Họ có thể thức dậy vào ngày hôm sau với một chiếc máy được cập nhật.

Nếu bạn đã hỗ trợ mã thông báo bootstrap, điều này sẽ bắt đầu hoạt động khi bạn sử dụng hành động InstallLater trong ScheduleOSUpdate.

Khi MDM biết bản cập nhật nào có thể áp dụng cho các thiết bị, lệnh ScheduleOSUpdate được sử dụng để triển khai bản cập nhật cho macOS, iOS và iPadOS.

Chỉ cần lưu ý, một lệnh MDM có thể được sử dụng để cài đặt bản cập nhật trong cửa sổ trì hoãn hoặc sau đó.

Có một số tùy chọn khi sử dụng lệnh ScheduleOSUpdate.

Một tùy chọn phải được đặt là hành động cài đặt, có giá trị ảnh hưởng đáng kể đến hành vi của bản cập nhật.

Hành động cài đặt InstallASAP là cơ chế cập nhật chính cho các thiết bị macOS không người dùng.

InstallASAP sử dụng mã thông báo bootstrap để xác thực trên máy tính Mac với Apple silicon.

Hành động này thực hiện ngay lập tức, với một tùy chọn để người dùng hủy cập nhật.

Chỉ cần lưu ý rằng lệnh InstallASAP không tự động đóng các ứng dụng đang được sử dụng tích cực trừ khi tùy chọn InstallForceResart được sử dụng.

DownloadOnly hữu ích cho cả người dùng và thiết bị không người dùng để tải xuống bản cập nhật trong nền trước thời gian cài đặt.

NotifyOnly được sử dụng để cảnh báo người dùng rằng có một hành động để cài đặt.

Cả hai lệnh sẽ không bắt đầu cài đặt.

InstallLater cho phép bạn lên lịch cập nhật Cài đặt Tối nay.

Thiết bị sẽ chọn một khoảng thời gian, thường là từ 2:00 sáng đến 4:00 sáng, dựa trên việc học máy, sử dụng các điều kiện như khi thiết bị ít được sử dụng nhất, để quá trình cài đặt xảy ra.

Thiết bị sau đó lên lịch cập nhật diễn ra trong khoảng thời gian đó, vì bạn đã được cắm điện.

Hãy kiểm tra các thông báo.

Với lệnh InstallASAP, hoặc lệnh Mặc định, người dùng có thể nhận được thông báo đếm ngược khởi động lại.

Người dùng có thể chọn hủy khởi động lại trong các tùy chọn thông báo.

Và trong macOS Monterey, khi bạn sử dụng InstallLater, người dùng sẽ nhận được thông báo này.

Hãy xem xét điều này kỹ hơn.

Thông báo này cho thấy bản cập nhật sẽ cố gắng cài đặt vào đêm đó.

Người dùng được nhắc nhở rằng thiết bị phải được kết nối với nguồn điện tại thời điểm nó thực hiện cập nhật sau này.

Đối với các thiết bị iOS hoặc iPadOS, Mặc định là cơ chế cập nhật chính.

DownloadOnly hữu ích cho cả người dùng và thiết bị không người dùng để cài đặt bản tải xuống trong nền trước thời gian cài đặt.

Đây là những gì người dùng sẽ được trình bày.

Các thiết bị không được bảo vệ bằng mật mã cài đặt phiên bản ngay sau khi lệnh được gửi từ máy chủ MDM.

Các thiết bị được bảo vệ bằng mật mã yêu cầu một luồng hơi khác một chút.

Khi thiết bị nhận được lệnh cài đặt từ MDM, chúng tôi sẽ lên lịch cảnh báo cài đặt để hiển thị trong lần mở khóa tiếp theo.

Điều này cung cấp cho người dùng tùy chọn Cài đặt Ngay bây giờ, hoặc Cài đặt Tối nay, hoặc Nhắc nhở Tôi Sau.

Trên iOS, cảnh báo cài đặt đầu tiên này được hiển thị cho người dùng cho phép bạn chọn Cài đặt ngay, sau hoặc Chi tiết.

Các cảnh báo tiếp theo được hiển thị sẽ nói rằng bản cập nhật đã sẵn sàng để cài đặt.

Ví dụ, "iOS 15.0 đã sẵn sàng để cài đặt."

Và các tùy chọn được cung cấp là Cài đặt ngay bây giờ hoặc sau này.

Nhấn vào Sau trong màn hình trước sẽ hiển thị lời nhắc mật mã với tùy chọn Nhắc tôi sau ở dưới cùng.

Máy chủ MDM cũng có thể gắn cờ cập nhật theo yêu cầu.

Điều này sẽ cho phép người dùng chọn Remind Me Later tối đa ba lần.

Sau lần nhấn thứ ba của Remind Me Later, thông báo cài đặt sẽ được hiển thị mỗi khi người dùng nhấn vào Màn hình chính và tùy chọn Remind Me Later sẽ bị xóa.

Hãy quay lại dòng thời gian nơi chúng ta đã sẵn sàng để cài đặt bản cập nhật.

Đối với các thiết bị không người dùng, bạn có thể sử dụng tùy chọn InstallForceRestart với ScheduleOSUpdate.

Những thiết bị đó sẽ khởi động lại cứng để thực hiện cập nhật.

Và đối với các thiết bị của người dùng, một khi bạn gửi lệnh cài đặt, bạn đã dựa vào người dùng để thực hiện cập nhật.

Đó là, cho đến bây giờ.

Tôi rất vui được nói với bạn về một tính năng mới mà chúng tôi đang giới thiệu cho macOS.

Sau khi thời gian trì hoãn cập nhật quản trị viên kết thúc, bạn muốn đảm bảo rằng các bản cập nhật được cài đặt nhanh chóng sau khi bạn đã cung cấp chúng cho người dùng.

Bạn không muốn người dùng tiếp tục hủy hoặc trì hoãn cập nhật.

Bạn cần một cách để thực thi nó.

Trong macOS Monterey, giờ đây bạn có nhiều quyền kiểm soát hơn đối với chính sách InstallLater để thực thi bản cập nhật.

Bạn có thể chỉ định số lần thiết bị nên nhắc cài đặt trước khi cập nhật được thực thi.

Con số này được xác định bởi khóa MaxUserDeferrals.

Khóa MaxUserDeferrals này ngụ ý khóa hiện có, InstallForceRestart, một khi đã đạt đến số lần trì hoãn tối đa.

Khi bạn thực thi số lần trì hoãn tối đa, người dùng sẽ nhận được thông báo thông tin về số lần thử còn lại trước khi cập nhật bắt buộc xảy ra.

Để thay đổi số lần trì hoãn người dùng tối đa, bạn chỉ cần đưa ra lệnh InstallLater mới.

Đây là những gì người dùng sẽ được trình bày.

Khi bạn đặt giá trị MaxUserDeferrals, thông báo sẽ hiển thị số lần thử còn lại trước khi cài đặt bắt buộc.

Bản cập nhật được lên kế hoạch cho tối nay, nhưng người dùng được cung cấp các tùy chọn.

Họ có thể chọn Remind Me Tomorrow, điều này sẽ trì hoãn cập nhật một lần nữa và giảm số lần thử còn lại.

Họ có thể cài đặt nó ngay bây giờ, hoặc họ có thể cố gắng cập nhật nó vào tối nay.

Nếu người dùng không làm gì, bản cập nhật sẽ thử vào đêm đó.

Khi đạt đến số lần trì hoãn tối đa của người dùng, người dùng sẽ được thông báo rằng bản cập nhật này sẽ bị ép buộc.

Điều này có nghĩa là máy sẽ khởi động lại để thực hiện cập nhật, bất kể người dùng có còn sử dụng thiết bị hay không.

Với những thay đổi mới này, quản trị viên có nhiều quyền kiểm soát hơn đối với việc thực thi bản cập nhật macOS và đảm bảo rằng các thiết bị được cập nhật kịp thời.

Có một điều nữa tôi muốn nói với bạn về việc quản lý các bản cập nhật phần mềm.

Mới trong năm nay, iOS và iPadOS hiện cung cấp cho người dùng sự lựa chọn giữa hai phiên bản cập nhật phần mềm trong ứng dụng Cài đặt.

Ví dụ, bạn có thể cập nhật lên hệ điều hành chính tiếp theo ngay khi nó được phát hành, để có các tính năng mới nhất và bộ cập nhật bảo mật hoàn chỉnh nhất.

Ngoài ra, hãy tiếp tục bản phát hành chính hiện tại và vẫn nhận được các bản cập nhật bảo mật quan trọng, cho đến khi bạn sẵn sàng chuyển sang phiên bản chính tiếp theo của iOS hoặc iPadOS.

Một tùy chọn mới trên lệnh Cài đặt cho phép bạn kiểm soát bản cập nhật hệ điều hành nào được trình bày cho người dùng.

Bạn chỉ định điều này bằng cách cung cấp từ điển SoftwareUpdateSettings, có khóa gọi là RecommendationCadence.

Khóa này có thể có ba giá trị.

Đây là những gì được hiển thị nếu bạn đặt RecommendationCadence thành 0.

Đây là chế độ xem mặc định, đó là những gì bạn sẽ nhận được nếu không có hạn chế MDM nào được áp dụng.

Cả hai phiên bản cập nhật chính và phụ đều có sẵn.

Đây là những gì được hiển thị nếu bạn đặt RecommendationCadence thành 1.

Nếu có hai phiên bản cập nhật phần mềm, thiết bị sẽ hiển thị phiên bản cập nhật phần mềm với số phiên bản thấp hơn.

Đây là những gì được hiển thị nếu bạn đặt RecommendationCadence thành 2.

Nếu có hai phiên bản cập nhật phần mềm, thiết bị sẽ hiển thị bản cập nhật phần mềm với số phiên bản cao hơn.

Chỉ cần lưu ý, nếu việc trì hoãn được đặt bằng khóa enforceSoftwareDelayUpdate hiện có, thiết bị sẽ tính đến điều đó và lọc theo RecommendationCadence.

Hai lựa chọn cập nhật cuối cùng sẽ hội tụ.

Tóm lại, trên macOS, bây giờ chúng tôi sẽ hỗ trợ triển khai các bản cập nhật bằng phiên bản hệ điều hành để MDM có thể xác định những bản cập nhật nào cần thiết cho các thiết bị và đẩy chúng kịp thời.

Chúng tôi cũng đã tự động hóa các luồng InstallLater trên máy tính Mac với Apple silicon bằng cách sử dụng mã thông báo bootstrap.

Chúng tôi sẽ cho phép MDM thực thi các bản cập nhật với MaxUserDeferrals, cho phép người dùng được thông báo về thời điểm cập nhật xảy ra và lên lịch cập nhật đôi khi ít có khả năng làm gián đoạn quy trình làm việc của họ.

Cuối cùng, trên iOS, chúng tôi đã thêm hỗ trợ để quản lý những phiên bản cập nhật nào được hiển thị trong Cài đặt.

Chúng tôi mong muốn bạn có được quyền kiểm soát bổ sung này và cung cấp trải nghiệm cập nhật tuyệt vời cho người dùng trong macOS Monterey và iOS 15.

Cảm ơn bạn, và chúc bạn có một WWDC tuyệt vời.

[Nhạc gõ].