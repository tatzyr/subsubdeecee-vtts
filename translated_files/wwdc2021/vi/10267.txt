10267

♪ ♪

Xin chào, tên tôi là Holly, và tôi là quản lý của Nhóm Công nghệ Tích hợp Liên tục, và sau đó tôi sẽ được đồng đội Geoff McGinnis tham gia.

Hôm nay, tôi rất hân hạnh được giới thiệu Xcode Cloud, một dịch vụ tích hợp và phân phối liên tục dễ sử dụng được thiết kế cho các nhà phát triển giống như bạn, bất kỳ ai đang xây dựng ứng dụng và khuôn khổ cho nền tảng Apple.

Trong phiên này, chúng ta sẽ bắt đầu với phần giới thiệu về tích hợp liên tục và gặp Xcode Cloud.

Sau đó, chúng tôi sẽ thiết lập một dự án, thực hiện thay đổi mã và tìm hiểu cách sử dụng Xcode Cloud để cộng tác với nhóm của bạn.

Hãy bắt đầu nào.

Tích hợp liên tục hoặc CI là thực hành tích hợp các thay đổi mã thường xuyên, để các vấn đề được phát hiện và khắc phục sớm.

Áp dụng phương pháp này cho phép các nhóm làm việc cộng tác đồng thời tạo ra các sản phẩm chất lượng cao.

Quy trình làm việc CI điển hình là một tập hợp các bước tự động chạy khi bạn hoặc thành viên trong nhóm đẩy thay đổi mã vào kho lưu trữ của bạn.

Các bước này có thể thực hiện những việc như xây dựng, chạy thử nghiệm hoặc bất kỳ số lượng hành động nào khác cần thiết để đảm bảo rằng thay đổi mã đáp ứng mức chất lượng đã thiết lập của nhóm bạn.

Với CI, bạn có thể yên tâm rằng việc tích hợp một thay đổi có rủi ro thấp và bản phát hành tiếp theo của bạn ổn định.

Bây giờ, để suy nghĩ về CI có thể trông như thế nào đối với bạn, chúng ta hãy xem vòng đời của một ứng dụng.

Là một nhà phát triển, bạn có thể đang làm việc với phản hồi từ nhiều nguồn.

Bạn sửa lỗi và tạo các tính năng trong Xcode, bạn nhận được phản hồi đánh giá mã từ nhóm của mình về các yêu cầu kéo và bạn phân phối các phiên bản mới thông qua TestFlight và tích hợp phản hồi của người kiểm tra.

Khả năng lặp lại mã và phản hồi hiệu quả của nhóm bạn là điều cần thiết để tạo ra một ứng dụng hoặc khuôn khổ chất lượng cao.

Đó là nơi Xcode Cloud xuất hiện.

Xcode Cloud xây dựng dựa trên ý tưởng về CI trong khi kết nối các dấu chấm giữa các công cụ dành cho nhà phát triển của Apple để cung cấp cho bạn quy trình phát triển hoàn chỉnh để xây dựng, kiểm tra, phân phối, thu thập phản hồi và nhanh chóng lặp lại các dự án của bạn.

Hãy cùng tham quan các tính năng để tìm hiểu về những gì bạn có thể làm.

Bạn dành phần lớn thời gian để phát triển trong Xcode và Xcode Cloud nằm ngay đó trong Xcode.

Tại đây, bạn có thể thấy Xcode Cloud đang hoạt động.

Có nhiều quy trình làm việc được thiết lập và các bản dựng đang chạy và phát hiện các vấn đề.

Bạn cũng có một cái nhìn sâu sắc mới về tất cả công việc mà nhóm của bạn đang làm.

Quy trình làm việc là một cấu hình cho Xcode Cloud biết hành động nào cần thực hiện và khi nào thực hiện chúng.

Bạn có thể dễ dàng giới thiệu và bắt đầu và chạy nhanh chóng quy trình làm việc đầu tiên của mình.

Sau đó, bạn có thể quay lại và chỉnh sửa nó, hoặc tạo quy trình làm việc mới để hỗ trợ các trường hợp sử dụng khác nhau.

Kết quả của việc chạy một quy trình làm việc được gọi là bản dựng.

Xcode Cloud chạy các bản dựng trong cơ sở hạ tầng Đám mây do Apple quản lý cung cấp khả năng ký mã và truy cập vào nhiều phiên bản hệ điều hành và bản phát hành Xcode.

Khi bạn nhấp vào ứng dụng của mình trong tab Đám mây của trình điều hướng báo cáo, bạn có thể xem trạng thái của tất cả các quy trình làm việc của mình và các bản dựng mới nhất trong thanh bên.

Nhấp vào ứng dụng của bạn cũng mở ra tổng quan về nhóm xây dựng, hiển thị tất cả các bản dựng của bạn được sắp xếp theo cách nhóm phát triển của bạn hoạt động, không chỉ theo quy trình làm việc mà còn theo nhánh git, cho phép bạn sử dụng một quy trình làm việc cho nhiều nhánh nhưng vẫn thấy kết quả riêng biệt.

Bạn cũng có thể lọc xuống danh sách để chỉ xem các bản dựng bắt đầu bằng các thay đổi mã của bạn, bằng cách nhấp vào bộ lọc Mine phía trên tổng quan...

Hoặc bằng cách chọn biểu tượng người trong trình điều hướng báo cáo.

Một cấp độ giảm so với tổng quan về nhóm xây dựng là báo cáo xây dựng cho một lần chạy quy trình làm việc.

Đây là nơi bạn có thể đi sâu vào các kết quả cụ thể cho việc thay đổi mã của mình.

Bạn có thể xem các báo cáo kiểm tra, nhật ký và nhảy trực tiếp vào mã gây ra sự cố.

Geoff sẽ đi vào chi tiết hơn về báo cáo xây dựng sau.

Mọi thứ chúng tôi vừa thấy không chỉ có sẵn trong Xcode, mà nó còn có sẵn trong App Store Connect.

Điều này bao gồm bắt đầu và xem các bản dựng, quản lý quy trình làm việc, xem và tải xuống các tạo tác, chia sẻ kết quả với nhóm của bạn và quản lý cài đặt thông báo.

Và nếu bạn đang làm việc trong TestFlight, Xcode Cloud là tab ngay bên cạnh trong App Store Connect để truy cập nhanh.

Trong App Store Connect, bạn cũng có thể thiết lập cài đặt thông báo cá nhân của mình.

Tôi muốn thiết lập thông báo Slack cho các bản dựng không thành công để tôi có thể tiếp tục làm việc sau khi đẩy mã của mình nhưng được cảnh báo nhanh chóng nếu có điều gì đó cần khắc phục.

Mọi người trong nhóm của bạn có thể thiết lập các thông báo phù hợp nhất với họ.

Cho dù bạn đang di chuyển hay muốn hiển thị các bản dựng của một dự án mà bạn chưa thiết lập trong Xcode hay bạn là thành viên của nhóm không cam kết mã cho dự án, Xcode Cloud trong App Store Connect cung cấp trải nghiệm dựa trên web đầy đủ tính năng.

Khi chúng tôi tạo ra Xcode Cloud, chúng tôi đã thiết kế nó cho quá trình phát triển của bạn và để cộng tác với nhóm của bạn, nhưng nó cũng đã được xây dựng với cốt lõi là quyền riêng tư.

Mã nguồn của bạn là trọng tâm của dự án của bạn.

Đó là lý do tại sao tất cả các khía cạnh của Xcode Cloud được thiết kế để đảm bảo rằng dữ liệu của bạn được bảo vệ.

Môi trường xây dựng chỉ là tạm thời.

Khối lượng công việc hoàn toàn bị cô lập và môi trường bị phá bỏ và tạo ra từ đầu giữa các bản dựng.

Mã nguồn không bao giờ được lưu trữ.

Xcode Cloud chỉ tìm nạp mã của bạn trong môi trường xây dựng tạm thời.

Dữ liệu xây dựng được mã hóa ở trạng thái nghỉ và được lưu trữ trong cơ sở dữ liệu CloudKit chuyên dụng.

Và bạn đang kiểm soát dữ liệu của mình.

Bạn có thể xóa dữ liệu của mình bất cứ lúc nào và nó sẽ bị xóa hoàn toàn khỏi hệ thống.

Bây giờ tôi đã giới thiệu Xcode Cloud, tôi sẽ giao nó cho Geoff để tiến hành thiết lập.

Hãy bắt đầu giới thiệu lên Xcode Cloud.

Chỉ mất một vài bước đơn giản để bắt đầu nhờ sự tích hợp mạnh mẽ với Xcode.

Quá trình bắt đầu bằng cách truy cập phần Xcode Cloud của menu sản phẩm và chọn Tạo quy trình làm việc.

Tiếp theo, tôi chọn ứng dụng nào tôi muốn tích hợp từ các tùy chọn này được phát hiện cho dự án địa phương của tôi.

Hôm nay, tôi sẽ chọn ứng dụng đặt hàng sinh tố mới mà nhóm của tôi đang phát triển có tên là "Fruta". Ứng dụng hỗ trợ cả iOS và macOS, và chúng tôi sẽ tích hợp cả hai nền tảng cùng một lúc.

Ứng dụng của chúng tôi bắt đầu với quy trình làm việc mặc định đầu tiên được tạo tự động cho tôi.

Bằng cách kiểm tra dự án cục bộ của tôi, Xcode Cloud có thể điều chỉnh các cài đặt quy trình làm việc ban đầu này để phù hợp với các cấu hình hiện có của nhóm tôi.

Quy trình làm việc được tạo thành từ điều kiện bắt đầu, môi trường, tập hợp các hành động sẽ được thực hiện và các hành động sau như triển khai và thông báo.

Và tôi có thể thấy Xcode Cloud đã chọn mọi lần đẩy đến nhánh chính làm điều kiện bắt đầu, Xcode được phát hành mới nhất cho môi trường của tôi và các hành động lưu trữ cho cả iOS và macOS.

Tôi có tùy chọn thay đổi các cài đặt này, nhưng điều này có vẻ tốt với tôi, vì vậy tôi sẽ tiếp tục.

Để đi sâu vào chỉnh sửa quy trình làm việc, hãy xem phiên "Khám phá quy trình làm việc đám mây Xcode" sau của hội nghị.

Tiếp theo, tôi sẽ ủy quyền cho Xcode Cloud truy cập mã nguồn của tôi.

Đây là hành động một lần bao gồm tất cả các kho lưu trữ nguồn cần thiết để xây dựng dự án của tôi bao gồm repo chính, bất kỳ mô-đun con nào và các gói Swift riêng tư.

Đối với bất kỳ kho lưu trữ có thể truy cập công khai nào, không cần ủy quyền bổ sung.

Xcode Cloud đã phát hiện ra hai repos riêng tư trong dự án của tôi, vì vậy, tiếp theo, chúng tôi sẽ cấp quyền rõ ràng cho GitHub nơi nguồn được lưu trữ.

Nhấp vào Grant Access sẽ đưa tôi đến App Store Connect với nhiều chi tiết hơn về các bước tiếp theo.

Điều quan trọng cần lưu ý là quy trình này sẽ thay đổi tùy thuộc vào nhà cung cấp nguồn và tôi có thể thu hồi quyền truy cập bất cứ lúc nào vì bất kỳ lý do gì.

Cấp quyền truy cập mã nguồn vào Xcode Cloud được hoàn thành trên web và trợ lý này hướng dẫn tôi trong suốt quá trình.

Đầu tiên, tôi kết nối ID Apple với tài khoản nguồn của mình, tài khoản này được sử dụng để kích hoạt trải nghiệm được cá nhân hóa trong Xcode Cloud.

Bước này thúc đẩy luồng xác thực gốc của nhà cung cấp và mã hóa an toàn của Xcode Cloud, vì vậy tôi biết mã và thông tin cá nhân của mình vẫn được bảo vệ.

Sau đó, tôi cài đặt ứng dụng Xcode Cloud vào tổ chức GitHub của mình, cho phép truy cập vào repos mà tôi chọn.

Tuyệt vời!

Với những bước đó đã hoàn tất, tài khoản GitHub của tôi đã sẵn sàng.

Hãy hoàn thành việc giới thiệu trong Xcode cục bộ.

Kho lưu trữ đã sẵn sàng. Tôi sẽ tiếp tục.

Trong bước cuối cùng, Xcode Cloud sẽ đề nghị đăng ký ứng dụng của tôi và gói ID vào App Store Connect.

Ứng dụng của chúng tôi đã được tạo, vì vậy tôi sẽ chỉ xác nhận chi tiết ở đây.

Mọi thứ có vẻ ổn.

Bây giờ ứng dụng của tôi đã được cấu hình cho Xcode Cloud, tôi có thể kết thúc quá trình giới thiệu, điều này sẽ bắt đầu bản dựng đầu tiên của tôi.

Có vẻ như bản dựng đầu tiên của tôi đã hoàn thành.

Chúng ta hãy xem xét sâu hơn về kết quả.

Tổng quan về nhóm xây dựng hiển thị các bản dựng đang hoạt động và đã hoàn thành của tôi trong nháy mắt và nhấp vào mục nhập đầu tiên sẽ mở ra trang tổng quan cho bản dựng của chúng tôi.

Tổng quan này cho tôi thấy chi tiết ngắn gọn về bản dựng như thời lượng và cấu hình môi trường, với phần dưới hiển thị cho tôi trạng thái của tất cả các hành động và hậu hành động liên quan.

Ngoài ra, trên cùng bên phải có các nút hữu ích để xây dựng lại lần chạy và kiểm tra bản sửa đổi này trong môi trường địa phương của tôi.

Rời khỏi tổng quan và mở rộng một nút hành động, chẳng hạn như "Lưu trữ-iOS" đi qua, một nút hiển thị tóm tắt của hành động cụ thể này.

Và trong tầm nhìn, tôi có thể tìm thấy các bản ghi và hiện vật được tạo ra bởi cuộc chạy này.

Trang nhật ký sắp xếp gọn gàng tất cả các nhiệm vụ trong hành động này, với các bộ lọc có sẵn ở trên cùng để tập trung vào các khu vực cần chú ý.

Tôi cũng có quyền truy cập dễ dàng vào các tệp nhị phân, tệp nhật ký và các tạo tác khác được tạo bởi bản dựng của tôi trong trang tạo tác.

Tất cả điều này tạo ra một cách rất thuận tiện cho đồng đội của tôi và tôi truy cập nội dung CI của chúng tôi ngay tại đây trong Xcode.

Bây giờ hãy điều tra lý do tại sao hành động lưu trữ Mac thất bại bằng cách truy cập bản tóm tắt hành động.

Tương tự như chế độ xem nhật ký, tôi có thể lọc những vấn đề này theo loại để phân loại hiệu quả.

Có vẻ như bản dựng CI đầu tiên của chúng tôi đã gặp sự cố nhập khẩu mà trước đây tôi đã bỏ lỡ cho ứng dụng Mac của chúng tôi và vì tôi đang phân loại kết quả của mình trong Xcode, tôi có thể sử dụng nút nhảy này trong một vấn đề để điều hướng trực tiếp đến mã tôi cần khắc phục.

Tôi sẽ thực hiện thay đổi mã nhanh chóng để dọn dẹp mọi thứ.

Và tôi muốn các bản dựng CI của chúng tôi có một khởi đầu tốt, vì vậy tôi sẽ tiếp tục cam kết và đẩy nó vào kho lưu trữ từ xa của mình.

Và ngay sau khi tôi đẩy thay đổi của mình, tôi thấy Xcode Cloud đã bắt đầu một bản dựng mới cho tôi.

Và tôi có thể tiếp tục theo dõi trực tiếp tất cả những thay đổi của mình.

Tôi khá hào hứng với sự tiến bộ nhanh chóng của mình.

Bằng cách chạy các bản dựng CI của chúng tôi trên Cơ sở hạ tầng đám mây của Apple, nhóm của chúng tôi sẽ cộng tác trong dự án của chúng tôi hiệu quả hơn bao giờ hết.

Bây giờ, quay lại với Holly để tham gia vào cuộc vui.

Cảm ơn, Geoff, vì đã thiết lập và chạy Xcode Cloud cho dự án Fruta của chúng tôi.

Là một thành viên của cùng một nhóm, tôi có thể mở dự án Fruta Xcode trên máy Mac của mình và xem tất cả các quy trình làm việc và bản dựng mà Geoff và phần còn lại của nhóm chúng tôi đang làm việc.

Ở đây trong trình điều hướng báo cáo trên tab Đám mây khi tôi nhấp vào tên dự án của mình, vì quy trình làm việc được chia sẻ trong các nhóm, tôi có thể thấy quy trình làm việc mặc định mà Geoff vừa tạo.

Có vẻ như Bản dựng 2 mà Geoff đã bắt đầu khi anh ấy sửa lỗi nhập đã hoàn thành thành công.

Bây giờ chúng ta đã có một bản dựng vượt qua, hãy chỉnh sửa quy trình làm việc để xem nó hoạt động như thế nào và tìm hiểu những cải tiến mà chúng ta có thể thực hiện để có thêm phạm vi bảo hiểm cho Fruta.

Tôi có thể nhấp chuột phải vào tên quy trình làm việc và chọn Chỉnh sửa quy trình làm việc.

Hãy bắt đầu bằng cách đặt cho quy trình làm việc một cái tên mô tả nhiều hơn.

Hãy gọi quy trình làm việc này là "Bản phát hành" vì chúng tôi sẽ xây dựng và thử nghiệm một vài chi nhánh mà chúng tôi sử dụng cho các bản phát hành của mình.

Bây giờ, hãy chỉnh sửa điều kiện bắt đầu.

Tôi sẽ chọn phần điều kiện bắt đầu từ thanh bên để hiển thị cấu hình.

Hãy nhớ rằng, điều kiện bắt đầu xác định những gì cần xảy ra để khiến quy trình làm việc chạy.

Mặc định được đặt để bắt đầu khi thay đổi mã được đẩy đến nhánh chính của bạn.

Nhóm của tôi cũng sử dụng một nhánh phát hành, vì vậy hãy tiếp tục và thêm nó vào đây.

Tôi chỉ cần nhấp vào nút dấu cộng trong phần nhánh tùy chỉnh và nhập tên nhánh của tôi vào hàng bảng.

Điều đó có vẻ tốt cho điều kiện bắt đầu.

Bây giờ chúng ta hãy chuyển sang hành động.

Quy trình làm việc mặc định tự động tạo các hành động lưu trữ cho tất cả các nền tảng mà dự án của tôi chạy trên đó.

Đây là một nền tảng tuyệt vời để xây dựng, nhưng để thêm một số phạm vi bảo hiểm bổ sung, tôi muốn thêm một số bài kiểm tra ở đây.

Tôi nhấp vào nút dấu cộng ở bên phải tiêu đề Hành động trong thanh bên và chọn loại Hành động Kiểm tra.

Đối với hành động Kiểm tra, tôi có thể chọn nền tảng-- hãy làm iOS-- sau đó chọn sơ đồ chính xác, Fruta iOS trong trường hợp của chúng tôi.

Trong thanh bên, vẫn còn một dấu X màu đỏ bên cạnh hành động Kiểm tra mới của chúng tôi vì chúng tôi chưa điền vào mọi thứ được yêu cầu.

Cài đặt cuối cùng tôi cần cấu hình là thêm một số thiết bị để các bài kiểm tra này chạy.

Nhấp vào nút dấu cộng bên dưới bảng Đích sẽ tự động thêm các trình mô phỏng iPhone được đề xuất...

Và nhấp một lần nữa sẽ thêm iPad được đề xuất.

Tôi cũng có thể thay đổi những thứ này để chọn một trình mô phỏng thiết bị cụ thể.

Hãy chọn iPhone mới nhất để đảm bảo ứng dụng của tôi hoạt động tốt trên iPhone 12.

Lưu ý rằng tất cả các điểm đến tôi đã thêm sẽ tự động được đặt để sử dụng phiên bản hệ điều hành mới nhất.

Tôi có thể xem lại quy trình làm việc của mình trong thanh bên và mọi thứ có vẻ tốt với tôi, vì vậy hãy lưu các thay đổi bằng cách nhấp vào nút Lưu ở góc dưới cùng bên phải.

Bây giờ chúng tôi đã thực hiện các thay đổi đối với quy trình làm việc, tôi muốn đảm bảo rằng nó hoạt động mà không cần phải thay đổi mã để bắt đầu nó.

Tôi có thể làm điều đó theo cách thủ công bằng cách nhấp chuột phải vào quy trình làm việc trong trình điều hướng báo cáo và chọn Bắt đầu xây dựng.

Tiếp theo, tôi được nhắc chọn chi nhánh nào tôi muốn điều hành.

Hãy thử nó với "phát hành/v1" vì chúng tôi vừa thêm nhánh đó vào quy trình làm việc.

Và từ đây, tôi nhấp vào Bắt đầu Xây dựng để khởi động nó.

Tuyệt vời, có vẻ như bản dựng mới của chúng tôi đang chạy.

Bây giờ, trong tổng quan về nhóm xây dựng, có một phần mới cho nhánh phát hành/v1 của chúng tôi và bản dựng mới mà tôi vừa bắt đầu, Bản dựng 3, xuất hiện ở đây với trạng thái đang chạy.

Sau khi hoàn thành việc này, tôi sẽ có một ý tưởng tốt về chi nhánh phát hành của chúng tôi đang hoạt động như thế nào.

Sau đó, tôi có thể tiếp tục thêm vào quy trình phát hành hoặc tạo những quy trình làm việc mới để hỗ trợ cách nhóm của tôi hoạt động.

Xcode Cloud đã làm cho việc áp dụng thực hành tích hợp liên tục cho ứng dụng của chúng tôi trở nên thực sự đơn giản.

Chỉ với một vài cú nhấp chuột, Geoff đã giúp chúng tôi thiết lập và khắc phục sự cố mà quy trình làm việc tìm thấy.

Sau đó, tôi có thể dễ dàng nhìn thấy mọi thứ anh ấy đã làm và làm cho quy trình làm việc của chúng tôi mạnh mẽ hơn.

Khả năng lặp lại cả mã và phản hồi hiệu quả của nhóm bạn là điều cần thiết để tạo ra một ứng dụng hoặc khuôn khổ chất lượng cao.

Với Xcode Cloud, bạn có thể dễ dàng thiết lập CI và cho dù đây là một phương pháp hoàn toàn mới hay làm cho quy trình của bạn liền mạch, bạn có thể làm việc hiệu quả hơn và cảm thấy tự tin hơn rằng người dùng của bạn sẽ có trải nghiệm tuyệt vời với sản phẩm của bạn.

Chúng tôi hy vọng phiên này đã giúp bạn làm quen với Xcode Cloud và Tích hợp liên tục.

Từ nhóm của chúng tôi ở Vancouver, Canada, và thay mặt cho Geoff và bản thân tôi, cảm ơn bạn và tận hưởng phần còn lại của WWDC 2021.

[Nhạc lạc quan].