10265

♪ Nhạc bass đang phát ♪

♪

Simon Goldrei: Xin chào! Trong phiên này, chúng ta sẽ khám phá cách nhúng ứng dụng của bạn vào âm thanh không gian.

Tôi là Simon và tôi là một phần của nhóm truyền thông trực tuyến tại Apple.

Bạn có muốn cung cấp cho khách hàng của mình và phân biệt dịch vụ của mình với trải nghiệm của rạp chiếu phim không?

Bạn có muốn cung cấp âm thanh nhập vai với kết xuất các nguồn âm thanh đa điểm mang lại cảm giác như ở đó không?

Chúng ta có thể làm tất cả những điều này từ sự tiện lợi của thiết bị di động trong túi của khách hàng không?

Trong phiên này, chúng ta sẽ khám phá âm thanh không gian và cách phân phối nó với API phát lại Core AVFoundation và WebKit.

Chúng tôi có một chương trình nghị sự đầy đủ.

Chúng ta sẽ cùng nhau đề cập đến âm thanh không gian bằng cách đối chiếu nó với công nghệ hiện có mà chúng ta quen thuộc.

Sau đó, chúng tôi sẽ liệt kê các công nghệ và phương pháp điều trị mà tính năng này cung cấp.

Trong nửa sau, tôi sẽ giới thiệu API và làm nổi bật các phương pháp điều trị khác nhau được áp dụng.

Tiếp theo, chúng tôi sẽ xem xét các mức hỗ trợ cho âm thanh không gian trong các bản phát hành trước đó để bạn có thể nhắm mục tiêu các tính năng một cách thích hợp.

Tôi cũng sẽ tiết lộ những gì mới trong năm nay trong các bản phát hành hệ điều hành mùa thu năm 2021 của chúng tôi.

Sau đó, trên hết, chúng ta sẽ kết thúc bằng một bản demo.

Tôi rất vui được chia sẻ điều đó với bạn.

Bạn đang ở trong một điều trị!

Để hiểu âm thanh không gian là gì, hãy bắt đầu bằng cách xem xét âm thanh nổi cổ điển.

Có thể là tai nghe hoặc sắp xếp loa âm thanh nổi của năm qua, âm trường mà chúng ta cảm nhận được khá hạn chế.

Chúng ta không nghe thấy âm thanh từ phía sau chúng ta, trực tiếp ở phía trước hoặc phía trên chúng ta.

Nó thiếu sự sinh sản giống như thật, vị trí.

Và trong trường hợp của tai nghe, âm thanh phát ra từ những chiếc loa nhỏ trong hoặc trên đầu của chúng ta; chúng tôi gọi đây là trải nghiệm trong đầu.

Khi chúng ta di chuyển đầu một cách tự nhiên trong khi xem phim, những chiếc loa nhỏ đó di chuyển cùng chúng ta.

Đây không phải là một trải nghiệm giống như nhà hát, nhưng đây là nơi âm thanh không gian có thể giúp ích.

Âm thanh không gian mang đến trải nghiệm giống như nhà hát.

Đó là một công nghệ tâm lý học có tác dụng tạo ra một sân khấu âm thanh ảo hấp dẫn.

Nó hoạt động tốt nhất với nội dung đa kênh nhưng nó cũng cung cấp trải nghiệm hấp dẫn cho nội dung âm thanh nổi.

Cuối cùng, hỗ trợ âm thanh không gian được cung cấp cho các nguồn phương tiện nghe nhìn và chỉ có âm thanh.

Trên hết, nó hoạt động với nhiều sản phẩm Apple mà khách hàng của bạn đã có.

Chúng tôi đã đơn giản hóa việc mang lại trải nghiệm âm thanh không gian cho khách hàng của bạn.

Như tôi vừa ám chỉ, cách tốt nhất để thưởng thức âm thanh không gian trong các ứng dụng của bạn là cung cấp âm thanh đa kênh.

Trải nghiệm đó thích ứng nhất với môi trường của khách hàng khi cung cấp các biến thể HLS tham chiếu đến các âm thanh đa kênh thay thế.

Trên thực tế, bạn có thể đã có trong thư viện nội dung của mình phương tiện nguồn âm thanh đa kênh.

Chỉ cần xuất bản cái này sẽ cho phép, theo mặc định, âm thanh không gian trong ứng dụng của bạn.

Hoàn toàn không cần thay đổi phần mềm.

Các bản âm thanh đa kênh trong các tệp phương tiện thông thường - và MSE của WebKit trong các bản phát hành mùa thu năm 2021 - cũng được hưởng lợi từ sự hỗ trợ hạn chế mà tôi sẽ trình bày chi tiết sau.

Hãy để tôi kể cho bạn nghe về những trải nghiệm truyền thông mà bây giờ bạn có thể mong đợi tạo ra.

Có rất nhiều trải nghiệm mà bây giờ bạn có thể tạo lại bằng âm thanh không gian.

Bạn có thể cung cấp âm nhạc xung quanh chúng tôi, cảm giác như đang ở buổi hòa nhạc.

Bạn có thể xây dựng các trò chơi điện tử chuyển động đầy đủ với các cảnh tương tác đưa game thủ vào những cuộc phiêu lưu nhập vai của riêng họ.

Nhưng công nghệ này hoạt động như thế nào?

Khi âm thanh không gian được sử dụng, âm trường ảo là tĩnh.

Âm trường không di chuyển với chuyển động đầu thông thường, không giống như chúng ta đã thấy trước đó với âm thanh nổi.

Những gì chúng ta nhận được là cùng một hiệu ứng âm thanh và cảm giác mà chúng ta mong đợi từ nhà hát.

Hiệu ứng này có thể thực hiện được cả từ loa tích hợp trong nhiều sản phẩm của chúng tôi và hiện cũng có sẵn trong một số sản phẩm tai nghe.

Khi sử dụng tai nghe có khả năng không gian, các phép đo từ các đơn vị đo quán tính trong thiết bị phát lại được so sánh với các phép đo tương tự trong tai nghe để xác định tư thế đầu của khách hàng.

Điều này được sử dụng để tự động thay đổi kết xuất âm thanh để duy trì hiệu ứng âm trường tĩnh đó.

Kết quả là cảm giác như âm thanh phát ra từ vị trí ban đầu xung quanh máy ảnh, hoặc người nghe, để có trải nghiệm lạc lõng.

Nó thậm chí còn hoạt động trên xe buýt quay vòng hoặc máy bay ngân hàng.

Chúng tôi cũng cung cấp một kỹ thuật để trộn các nguồn âm thanh nổi để tái tạo trải nghiệm kênh 5.1.

Chúng tôi cung cấp tính năng này để cung cấp âm thanh không gian cùng với thư viện nội dung âm thanh nổi hiện có của bạn.

Đối với tai nghe được hỗ trợ, đây là cách xử lý âm thanh nổi mặc định trong các bản phát hành mùa thu năm 2021 của chúng tôi.

Chúng tôi cũng sử dụng phương pháp điều trị này ngầm để làm cho âm thanh không gian trở nên hấp dẫn hơn để bạn áp dụng và cung cấp, bởi vì ngay bây giờ, có lẽ bạn đang nghĩ rằng việc phân phối âm thanh đa kênh có thể cản trở chất lượng hình ảnh của phương tiện của bạn.

Xét cho cùng, âm thanh đa kênh có tốc độ bit cao hơn nhiều so với các phiên bản AAC âm thanh nổi mà bạn cung cấp ngày nay.

Làm thế nào bạn có thể phù hợp với cả hai trong một môi trường băng thông mạng hạn chế?

Đây là một vấn đề thực sự.

Chúng tôi đã giải quyết vấn đề này bằng cách làm cho trải nghiệm âm thanh không gian thích ứng với băng thông của khách hàng của bạn.

Khi băng thông không đủ để mang lại trải nghiệm nghe nhìn chất lượng cao, âm thanh sẽ liên tục phân hủy thành âm thanh nổi, hỗn hợp - nhưng vẫn là không gian - xử lý.

Theo dõi đầu, nếu được cung cấp trước khi chuyển đổi, được duy trì.

Ngay sau đó, khi băng thông phục hồi một cách đáng tin cậy, việc xử lý không gian đa kênh đầy đủ sẽ được khôi phục.

Với trải nghiệm âm thanh không gian thích ứng này, điều quan trọng hơn bao giờ hết là phải bình thường hóa mức âm lượng giữa các bản phát âm thanh nổi và đa kênh.

Ngoài ra, vui lòng cung cấp DRC - Kiểm soát phạm vi động - và siêu dữ liệu dialnorm trong mã hóa phương tiện của bạn nếu thích hợp.

Điều này được mô tả chi tiết hơn trong Thông số kỹ thuật tác giả HLS có sẵn tại developer.apple.com.

Bây giờ chúng ta hãy xem xét các giao diện bạn có thể sử dụng để điều chỉnh trải nghiệm âm thanh không gian.

Để tùy chỉnh trải nghiệm âm thanh không gian mặc định trong ứng dụng của bạn - có thể là thông qua AVPlayerItem hoặc bây giờ, AVSampleBufferAudioRenderer - bạn chỉ định một trong bốn AVAudioSpatializationFormats.

Những thứ này cho phép không gian hóa âm thanh đơn sắc và âm thanh nổi, đa kênh và sự kết hợp của hai định dạng âm thanh gốc đơn sắc, âm thanh nổi và đa kênh.

Bạn cũng có thể chỉ định số không để ức chế không gian hóa âm thanh.

Lưu ý rằng các nền tảng của chúng tôi cung cấp các điều khiển cấp hệ thống để khách hàng điều chỉnh trải nghiệm hơn nữa, tùy thuộc vào loại tuyến âm thanh, thông qua Trung tâm điều khiển và cài đặt Bluetooth.

Chúng tôi lấy một trong bốn giá trị này và đặt nó trên thuộc tính Định dạng Không gian Âm thanh được phép trên AVPlayerItem và bây giờ, mới trong các bản phát hành mùa thu năm 2021 của chúng tôi, AVSampleBufferAudioRenderer.

Bây giờ, bạn có thể tự hỏi, làm thế nào để bạn sử dụng AVFoundation APIs để khám phá xem một tuyến âm thanh có hỗ trợ âm thanh không gian hay không?

Làm thế nào để bạn biết liệu bạn có nên cung cấp âm thanh đa kênh cho phiên bản AVSampleBufferAudioRenderer của mình hay không?

Chà, trong các bản phát hành mùa thu năm 2021, chúng tôi sẽ giới thiệu một thuộc tính chỉ ra điều này trên AVAudioSessionPortDescription.

Ngoài ra, trên AVAudioSession, chúng tôi đang giới thiệu một cơ chế để bạn quảng cáo lên hệ thống rằng ứng dụng của bạn có thể cung cấp âm thanh đa kênh.

Dấu hiệu này được hiển thị nếu khách hàng chưa bật xử lý âm thanh không gian trong tùy chọn Trung tâm điều khiển hoặc Bluetooth.

Lưu ý rằng nếu ứng dụng của bạn sử dụng AVPlayer, những chỉ dẫn này sẽ được quản lý cho bạn.

Thuộc tính isSpatialAudioEnabled chỉ ra rằng cổng có khả năng hiển thị âm thanh không gian và khách hàng cho phép nó.

Bạn được khuyến khích quan sát các thông báo thay đổi tuyến đường và kiểm tra xempatialAudioEnabled tại mỗi sự kiện.

Tương tự, AVAudioSession sẽ phát ra Thông báo thay đổi khả năng phát lại không gian khi khách hàng thay đổi tùy chọn không gian trong Trung tâm điều khiển và cài đặt Bluetooth.

Để thuận tiện, thông báo này mang thông tin về trạng thái kích hoạt âm thanh không gian.

Sử dụng AVAudioSession SpatialAudioEnabledKey để truy xuất trạng thái vì nó liên quan đến thông báo này.

Cuối cùng, để chỉ ra cho hệ thống rằng phần mềm hoặc dịch vụ của bạn có thể cung cấp nội dung đa kênh, bạn gọi hàm setSupportsMultichannelContent với ý định của bạn.

Điều này được sử dụng để chuyển tiếp cho khách hàng rằng trải nghiệm không gian có sẵn nếu điều kiện mạng cho phép và nếu điều trị được bật.

Bây giờ chúng ta hãy khảo sát sự hỗ trợ tính năng trong ba năm phát hành vừa qua.

Trong macOS Catalina, iOS và iPad OS 13, âm thanh không gian được cung cấp thông qua loa tích hợp với AVPlayerItem và thẻ video WebKit bằng cách chỉ định bất kỳ URL nào có sơ đồ http.

Nó có sẵn cho khách hàng với các dòng sản phẩm MacBook, iPhone và iPad Pro năm 2018 và sau đó.

Mặc định là cung cấp không gian hóa bằng cách chọn các kết xuất âm thanh đa kênh nếu có.

Trong macOS Big Sur, iOS và iPad OS 14, chúng tôi đã giới thiệu hỗ trợ cho tai nghe có khả năng theo dõi đầu AirPods Pro và AirPods Max.

Khả năng không gian hóa thông qua các phụ kiện này được cung cấp cho các thiết bị ghép nối iPhone và iPad năm 2016 trở lên.

Mặc định vẫn là cung cấp không gian hóa bằng cách chọn các kết xuất âm thanh đa kênh nếu có.

Điều đó đưa chúng ta đến sự hỗ trợ hoàn toàn mới trong macOS Monterey, iOS, iPadOS, và bây giờ, tvOS 15.

Ở đây chúng tôi cung cấp hỗ trợ thông qua AVPlayerItem, AVSampleBufferAudioRenderer và hỗ trợ WebKit hạn chế cho Phần mở rộng nguồn phương tiện W3C, MSE.

Đường dẫn MSE không cung cấp giao diện để điều chỉnh trải nghiệm không gian hóa.

Tuy nhiên, tồn tại một giao diện để phát hiện tính khả dụng của hỗ trợ âm thanh không gian thông qua từ điển Cấu hình âm thanh trong bộ API Khả năng Truyền thông.

Mặc định trong các bản phát hành này là cung cấp không gian âm thanh theo mặc định cho tất cả các nguồn đơn sắc, âm thanh nổi và đa kênh nếu có sẵn và điều kiện cho phép.

Đối với các bài thuyết trình chỉ có âm thanh, bao gồm tất cả các ứng dụng AVSampleBuffer AudioRenderer, chỉ các kết xuất âm thanh đa kênh mới được cung cấp xử lý theo mặc định.

Bây giờ chúng tôi đã biết âm thanh không gian là gì và cách sử dụng nó, chúng tôi đã có một cái gì đó thực sự đặc biệt xếp hàng cho bạn ngày hôm nay.

Chúng tôi sẽ chỉ cho bạn cách bạn có thể sử dụng âm thanh không gian trong phần mềm và dịch vụ của mình để giúp kể chuyện theo những cách mới, sáng tạo.

Hãy lắng nghe nào!

♪ Nhạc lạc quan đang phát ♪

< Uh-oh. Hãy thử lại lần nữa.

Ừm... Uh...

Cupertino? Chúng tôi có một vấn đề.

Giọng nói ngoài màn hình: Lần này là gì?

Simon: Tôi biết. Tôi biết. Có gì không?

Thì thầm ngoài màn hình: Xin lỗi, Simon. Simon: Không?

Thì thầm ngoài màn hình: Nó sẽ không hoạt động.

Simon: Thật sao? Thì thầm ngoài màn hình: Tôi biết...

Simon: Làm phiền nó. Được rồi. Được rồi. Được rồi.

Vì vậy, chúng tôi đã thực hiện bản demo thực sự tuyệt vời này để chứng minh tất cả những điều thú vị mà bạn có thể làm với âm thanh không gian nhưng... bạn biết đấy...

Có vẻ như điều này không xảy ra hôm nay.

Nhìn kìa.

Chúng ta sẽ thử một cái gì đó.

Tôi không thể cho bạn xem video này nhưng nếu tôi có thể thì sao, ừm...

...Mô tả nó?

OK. Vì vậy, tôi không biết bạn đang ở đâu ngay bây giờ, nhưng tôi muốn bạn nhắm mắt lại và hãy tưởng tượng chúng ta đang ở trong một hội trường WWDC.

Bạn biết điều đó nghe như thế nào, phải không?

Cảm giác đó như thế nào?

Hãy hình dung nó trong tâm trí bạn.

Hình ảnh sân khấu và màn hình lớn.

Chúng tôi sắp làm mờ đèn và bắt đầu phát video này.

Ôi! Bạn! Làm mờ đèn.

Chúng ta đang ở trên bầu trời phía trên San Francisco.

Đi từ vịnh, xuống qua các tòa nhà cao tầng.

Gió đang ùa xung quanh chúng ta, và sau đó chúng ta đang phóng ra khỏi thành phố và xuống bán đảo, đến tận Công viên Apple.

Chúng tôi bay vào công viên và bạn thấy ai đó với con vịt tóc tuyệt vời khi chúng tôi bay qua.

Anh ấy hét lên, "Chậm lại!"

Có hiệu ứng Doppler từ trái sang phải thực sự tuyệt vời này.

Chậm lại!

Và bây giờ chúng tôi đang bay qua vườn táo.

Cảm nhận tiếng kêu của những cái cây.

Chúng tôi thấy mình ở ao cho một khoảnh khắc yên bình và tĩnh lặng.

Giọng thì thầm: Thành thật mà nói tôi không bán được âm thanh không gian.

Simon: Và sau đó, chúng tôi lại đang di chuyển, lướt qua những con chim cho đến khi chúng tôi đến những cánh cửa kính lớn của Caffè Macs trượt trên sàn terrazzo mịn màng cho đến khi chúng tôi tìm thấy người phụ nữ này.

Cô ấy đang ăn một chiếc bánh pizza với chiếc iPad của mình được đặt trên bàn, hoàn toàn bị cuốn hút vào bộ phim thực sự, thực sự căng thẳng này.

Đó là khu rừng đầy ắp này vào những giờ đầu tiên của hoàng hôn.

Âm thanh theo đúng nghĩa đen - không thực sự!

Đó là - Nó đang kéo chúng ta vào hiện trường.

Giọng thì thầm: Anh ấy đang làm rất tốt khi mô tả bản demo này.

Tôi gần như cảm thấy như mình đang ở đó. Nó thật sống động.

Simon: ...và những tiếng kêu của con khỉ ở xa.

Nhưng đột nhiên nó trở nên kỳ lạ...

...Và tất cả các sinh vật đều im lặng.

Tất cả những gì chúng ta có thể nghe thấy là tiếng lá xào xạc.

Sau đó, một vụ tai nạn c-c-c khi cây đổ xuống.

Có điều gì đó đang đến! Một cái gì đó lớn!

Đập mạnh. Đập mạnh. Đập mạnh.

Chúng ta có thể nghe thấy tiếng tim mình đập, ngay trong lồng ngực.

Và sau đó... im lặng.

Chúng ta chuẩn bị thư giãn khi...

Một con khủng long xông qua những cái cây ngay đối diện chúng ta!

Và chúng tôi nhìn lên, thẳng vào cái miệng há hốc của nó!

Lồng tiếng qua PA: Đó là một kết thúc trên 42...

Simon: Chúng tôi rút lui để tiết lộ rằng chúng tôi đang ở trên một bộ phim trường.

Người đàn ông: Tôi không chắc mình thích ánh sáng đó...

Simon: Con khủng long đã ngừng di chuyển và một nhóm người đã xuất hiện để dọn dẹp trường quay.

Người phụ nữ: Đi cho Kelly.

Lồng tiếng qua radio: Bạn có 20 điểm trên các diễn viên?

Người phụ nữ: Vâng. Họ đang trang điểm theo dõi buổi ra mắt. Đi ra khỏi comms.

Người phụ nữ: Bạn có đến không?

Simon: Chúng tôi theo dõi hai người trong số họ vào một đoạn giới thiệu để xem buổi ra mắt không gian hôm nay - tất nhiên, phát trực tuyến bằng âm thanh vòm.

Khán giả đang nín thở nhưng chúng tôi di chuyển qua họ và vào TV.

Người phụ nữ: Đi ra mắt. Người đàn ông: Tốt trên diện rộng.

Simon: Và bây giờ chúng ta đang ở trong viên nang.

Người phụ nữ: Hãy đặt bàn đạp xuống sàn.

Simon: Tên lửa bốc cháy!

Người phụ nữ: Bắt đầu thôi!

Dịch vụ chuyển phát nhanh lên mặt trăng! Điểm dừng tiếp theo, Tranquility.

Người đàn ông: Tất cả vẫn tốt.

Tách tăng cường trong ba, hai, một...

Sạch sẽ và mịn màng.

Simon: Giai đoạn thứ hai của tên lửa đã rơi đi, và chúng tôi thả cùng với nó...

...Và đi theo giai đoạn khi nó rơi trở lại Trái Đất, ngày càng nhanh hơn.

Bây giờ chúng ta đang rơi qua bầu không khí, trở lại mặt đất.

Hướng tới một cái gì đó.

Một chiếc máy bay phản lực lớn.

Ngày càng lớn hơn, và lớn hơn, và -- Người phụ nữ trên PA: Chào buổi sáng, mọi người.

Đây là cơ trưởng của bạn đang nói từ sàn đáp.

... chúng ta đi xuống điểm đến cuối cùng của chúng ta hôm nay.

Không nên nhiều hơn...

Simon: Nó thật đẹp!

Chà, vậy, uh... điều đó thật vui.

Hãy tóm tắt những gì chúng ta đã thấy và nghe.

Chúng tôi đã khám phá ra việc cung cấp cho khách hàng trải nghiệm âm thanh không gian dễ dàng như thế nào.

Trên thực tế, bạn có thể không cần phải làm bất cứ điều gì với ứng dụng của mình để tận dụng âm thanh không gian.

Chỉ cần cung cấp âm thanh đa kênh trong danh sách phát biến thể HLS của bạn thường là đủ.

Hãy nhớ rằng, điều quan trọng là phải bình thường hóa mức âm lượng giữa các bản phát âm thanh nổi và đa kênh, và bao gồm siêu dữ liệu DRC.

Cuối cùng, chúng tôi đã thấy cách bạn có thể cung cấp âm thanh không gian cho nhiều cơ sở khách hàng trong ba năm qua của các bản phát hành hệ điều hành.

Trong các phiên liên quan của chúng tôi, bạn có thể học cách khám phá xem tài nguyên HLS của bạn có âm thanh đa kênh hay không.

Tìm hiểu tất cả về điều đó khi bạn khám phá các biến thể HLS trong AVFoundation.

Tôi hy vọng bạn thích buổi học này nhiều như đội ở đây và tôi có.

Chúng tôi hy vọng bạn sẽ đắm mình và ứng dụng của mình trong âm thanh không gian và tận hưởng phần còn lại của WWDC 2021.

Cảm ơn bạn.

♪