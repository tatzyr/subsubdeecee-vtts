10105

Xin chào. Tôi là Eryn Wells, một kỹ sư trong Nhóm Trải nghiệm Xác thực.

Nếu ứng dụng hoặc trang web của bạn từng hỏi ai đó mật khẩu, thì bạn biết rằng bảo mật tài khoản là cực kỳ quan trọng.

Trong video này, tôi sẽ nói về cách giữ cho tài khoản khách hàng của bạn an toàn hơn và cách đăng nhập bằng mã xác minh trở nên dễ dàng hơn với trình tạo mã xác minh mới được tích hợp trong Chuỗi khóa iCloud.

Đây là một chủ đề lớn, và tôi sẽ chia nó thành ba phần quan trọng.

Đầu tiên, chúng ta sẽ nói về mật khẩu, một số vấn đề bảo mật mà chúng gặp phải và cách xác thực nhiều bước giúp giải quyết một số vấn đề đó.

Thứ hai, tôi sẽ nói về các mã xác minh dựa trên thời gian, bao gồm một trình xác thực hoàn toàn mới mà chúng tôi đã tích hợp vào Chuỗi khóa iCloud trong iOS 15 và macOS Monterey.

Cuối cùng, tôi sẽ lùi lại một bước để thảo luận về sự khởi đầu của một sự thay đổi lớn đang xảy ra trong thế giới xác thực, cũng như một số cơ hội khác để cải thiện cách mọi người đăng nhập bằng mã xác minh.

Được rồi, hãy nói về mật khẩu và xác thực nhiều bước.

Mật khẩu ở khắp mọi nơi và mọi người hiểu cách sử dụng chúng.

Tuy nhiên, hóa ra chúng rất khó sử dụng một cách chính xác.

Trên thực tế, việc lạm dụng mật khẩu dễ dàng hơn là sử dụng chúng một cách chính xác.

Mọi người thường xuyên sử dụng lại mật khẩu trên nhiều trang web hoặc chọn mật khẩu dễ đoán.

Kẻ tấn công cũng khá dễ dàng thuyết phục ai đó từ bỏ mật khẩu của họ.

Vì vậy, các dịch vụ đang phải đối mặt với một tình thế tiến thoái lưỡng nan: Làm cách nào để chúng tôi thêm bảo mật vào tài khoản của người dùng trong khi vẫn giúp đăng nhập dễ dàng?

Nhiều dịch vụ thêm các bước vào quy trình đăng nhập của họ.

Họ yêu cầu thêm thông tin để xác nhận danh tính của ai đó.

Thêm các bước như thế này làm giảm khả năng kẻ tấn công có mật khẩu của ai đó sẽ có thể truy cập vào tài khoản của người đó.

Điều đó cũng có nghĩa là kẻ tấn công sẽ không tự động có quyền truy cập vào bất kỳ tài khoản nào khác mà người đó đã sử dụng cùng một mật khẩu.

Mã xác minh là một bước bổ sung phổ biến.

Các dịch vụ yêu cầu các mã này sau khi ai đó đã nhập tên người dùng và mật khẩu của họ.

Những mã này được gửi qua SMS, email hoặc thông báo đẩy hoặc chúng được tạo bởi ứng dụng xác thực trên điện thoại của người đó hoặc bằng khóa phần cứng fob.

Một tính năng thiết yếu của những mã này là chúng được sử dụng một lần.

Vì chúng không có ý định ghi nhớ hoặc lưu trữ, chúng không dễ bị tái sử dụng như mật khẩu.

Tuy nhiên, mã xác minh vẫn yêu cầu con người nhập mã, vì vậy chúng vẫn dễ bị lừa đảo giống như mật khẩu.

Cách phổ biến nhất cho đến nay để mã xác minh được gửi là bằng SMS.

Hầu hết những người có điện thoại di động đều có thể nhận được tin nhắn văn bản và mọi người đều hiểu việc gửi và nhận tin nhắn.

Tự động điền giúp việc sử dụng các mã này trở nên dễ dàng hơn.

Chỉ cần một lần nhấn sẽ điền mã vào bất kỳ trường văn bản nào.

Nhưng vẫn có những vấn đề thực sự với mã xác minh được gửi qua SMS.

Đối với một điều, chúng không an toàn lắm.

Họ dễ bị rình mò trên mạng của nhà mạng và các cuộc tấn công hoán đổi SIM, nơi kẻ tấn công có thể nhận tin nhắn dành cho người khác.

Mọi người có xu hướng cho rằng tin nhắn văn bản sẽ đến và đi mà không có lỗi, nhưng chúng yêu cầu truy cập mạng.

Vì vậy, nếu ai đó đang ở trên máy bay hoặc tránh xa dịch vụ mạnh mẽ, có thể mất nhiều thời gian để tin nhắn đến hoặc nó có thể hoàn toàn không đến.

Cuối cùng, tin nhắn SMS có chi phí, cả để gửi và nhận.

Vì vậy, việc gửi hàng triệu tin nhắn này thực sự có thể cộng lại.

Một cách khác để mã xác minh được thực hiện là với các trình tạo mã trên thiết bị.

Thuật toán để làm điều này được định nghĩa trong RFC 6238 và được gọi là "Mật khẩu một lần dựa trên thời gian" hoặc "TOTP".

Nó cần một khóa bí mật và một khoảng thời gian và tạo ra một mã số ngắn dựa trên những bit thông tin đó.

Thông thường, một ứng dụng xác thực hoặc thiết bị phần cứng sẽ tạo mã.

Nó không yêu cầu bất kỳ giao tiếp nào với dịch vụ.

Tất cả xảy ra trên thiết bị.

Đây là một lợi ích to lớn về mặt bảo mật và trải nghiệm người dùng.

Mã có giá trị trong một khoảng thời gian ngắn, thường là 30 giây hoặc lâu hơn.

Và nó dẫn đến chi phí thấp hơn cho cả dịch vụ và khách hàng vì không ai phải gửi hoặc nhận tin nhắn SMS.

Thách thức với TOTP là nó có xu hướng phức tạp hơn một chút để thiết lập.

Các dịch vụ phải chia sẻ khóa bí mật với khách hàng của họ, cùng với một số thông số khác, để thiết bị của khách hàng có thể bắt đầu tạo mã.

Một quy trình thiết lập điển hình bao gồm hiển thị mã QR trên một thiết bị, tải xuống ứng dụng xác thực trên một thiết bị khác và sau đó quét mã QR bằng ứng dụng đó.

Đây là một quá trình rườm rà, và rất khó để giải thích cho mọi người.

Tạo mã trên thiết bị là một trải nghiệm tốt hơn cho tất cả mọi người, nhưng nó vẫn có một số vấn đề khó chịu xung quanh việc thiết lập.

Chúng tôi đã xem xét cẩn thận một số khó khăn đó và phát triển một tính năng mới của Chuỗi khóa iCloud mang lại trải nghiệm thiết lập hợp lý cùng với Tự động điền thành một thứ gì đó thực sự tuyệt vời.

Mới trong iOS 15 và macOS Monterey, chúng tôi đã xây dựng trình tạo mã xác minh dựa trên thời gian vào Trình quản lý mật khẩu Chuỗi khóa iCloud và tôi rất vui được chỉ cho bạn cách hoạt động của nó.

Chúng tôi bắt đầu với những điều cơ bản: tra cứu và sao chép mã để sử dụng trên thiết bị này hoặc thiết bị khác.

Đây là những tính năng quan trọng của bất kỳ ứng dụng xác thực nào.

Nhưng AutoFill thực sự làm cho điều này tỏa sáng.

Cũng giống như với các mã được gửi qua SMS, AutoFill điền vào các mã xác minh đã tạo chỉ bằng một lần nhấn.

Bởi vì mã có sẵn ngay lập tức, khách hàng của bạn sẽ có được trải nghiệm đăng nhập hợp lý, đáng tin cậy hơn và bạn có thể giảm chi phí gửi tin nhắn SMS.

Một trong những phần yêu thích của tôi về tính năng này là việc thiết lập mã xác minh mới có thể dễ dàng như thế nào.

Khi bạn thêm một liên kết đặc biệt hoặc một nút vào các trang thiết lập TOTP của mình, ai đó sử dụng iOS 15 hoặc macOS Monterey sẽ có thể thiết lập mã xác minh mới trên cùng một thiết bị chỉ với một vài thao tác.

Nó thực sự, thực sự dễ dàng.

Cuối cùng, mã xác minh được đồng bộ hóa trên tất cả các thiết bị của một người và chúng được sao lưu an toàn bằng Chuỗi khóa iCloud.

Vì vậy, họ không cần phải rút iPhone của mình để điền mã xác minh khi đăng nhập vào tài khoản trên máy Mac của mình.

Điều này cũng rất tốt cho việc khôi phục tài khoản.

Khi mã xác minh được sao lưu an toàn trong iCloud, mất thiết bị không còn đồng nghĩa với việc mất quyền truy cập vào tài khoản.

Xin nhắc lại, mọi thứ trong Chuỗi khóa iCloud đều được mã hóa đầu cuối, vì vậy không ai ngoại trừ chủ sở hữu tài khoản - không phải Apple hay bất kỳ ai khác - có thể truy cập chúng.

Các thiết bị có bật Chuỗi khóa iCloud được bảo vệ bằng Face ID, Touch ID hoặc mật mã.

Và mọi thiết bị Apple đều có mức độ bảo mật cao nhất được hỗ trợ bởi hệ điều hành.

Vì vậy, dữ liệu Keychain an toàn, bất kể một người có thiết bị nào trong thời điểm này.

Hướng dẫn bảo mật nền tảng của Apple mô tả tất cả những điều này và chi tiết hơn rất nhiều.

Có một vài điều dễ dàng bạn có thể làm để đảm bảo khách hàng của mình có trải nghiệm tốt nhất có thể khi thiết lập và điền mã.

Đối với quy trình thiết lập của bạn, có hai điều và đối với quy trình đăng nhập của bạn, chỉ có một.

Hãy nói một chút về mỗi người.

Có thể thiết lập mã xác minh mới chỉ với một vài thao tác là một vấn đề lớn.

Hàng trăm triệu người dùng iPhone sẽ có thể làm điều này ngay khi họ cập nhật lên iOS 15.

Bạn có thể giúp việc thiết lập mã xác minh trên thiết bị của họ cực kỳ dễ dàng bằng cách thêm liên kết hoặc nút thực hiện việc này vào màn hình thiết lập của bạn.

Nếu bạn đã có cơ sở hạ tầng để hỗ trợ đăng nhập bằng mã TOTP, bạn có thể quen thuộc với otpauth: URLs.

Các URL này chứa tất cả thông tin cần thiết để thiết lập trình tạo mã, bao gồm khóa bí mật được mã hóa base32, số chữ số trong mỗi mã, khoảng thời gian mà mỗi mã hợp lệ và trường nhà phát hành mà bạn nên đặt thành tên miền của mình.

Chuỗi khóa iCloud sử dụng trường này để đề xuất một tài khoản để thêm mã xác minh vào.

Đây là cùng một URL mà bạn mã hóa thành mã QR là một phần phổ biến của quá trình thiết lập TOTP.

Bạn có thể liên kết trực tiếp đến Trình quản lý mật khẩu chuỗi khóa iCloud bằng cách thêm tiền tố URL bằng "apple-".

Bạn có thể lấy apple otpauth: URL này và đặt nó vào một thẻ neo trên trang web của bạn.

Và trong các ứng dụng, bạn có hai lựa chọn.

Bạn có thể tạo một liên kết bằng cách thêm thuộc tính "liên kết" vào NSAttributedString mà bạn gán cho thuộc tính attributedString của textView hoặc bạn có thể mở URL để phản hồi việc nhấn nút với API đang mở trên cảnh cửa sổ.

Bạn có thể kiểm tra xem hệ thống có thể mở apple otpauth: URLs với kiểm tra tính khả dụng hay không.

Trên các phiên bản trước của iOS, bạn nên ẩn các nút thiết lập và xóa URL thiết lập.

Điều thứ hai bạn có thể làm trong quá trình thiết lập là sử dụng hình ảnh raster như JPG, PNG hoặc GIF cho các mã QR dự định được quét bởi các ứng dụng TOTP khác.

Safari sử dụng phân tích hình ảnh trên thiết bị để phát hiện mã QR và giải mã thông tin mà chúng chứa.

Nếu Safari xác định rằng mã QR chứa otpauth: URL, nó sẽ đề nghị thiết lập trình tạo mã trong menu ngữ cảnh cho hình ảnh mã QR.

Điều cuối cùng cần làm liên quan đến các trường văn bản để nhập mã được tạo.

Để đảm bảo rằng AutoFill biết chính xác nơi điền tên người dùng, mật khẩu và mã xác minh, hãy chú thích các trường văn bản đó bằng các loại nội dung.

Bạn có thể làm điều này trong SwiftUI với công cụ sửa đổi chế độ xem textContentType, trong UIKit với thuộc tính textContentType trên UITextFields, trong các ứng dụng AppKit với thuộc tính contentType trên NSTextFields và trên web, bạn có thể đặt thuộc tính tự động hoàn thành thành "mã

Vì vậy, bây giờ, tôi muốn lùi lại một bước.

Hãy xem xét bức tranh toàn cảnh về xác thực và nói một chút về cách làm cho cơ sở hạ tầng hiện tại của bạn an toàn hơn.

Các cơ chế xác thực tồn tại trên một phổ, tăng sức mạnh và bảo mật khi bạn di chuyển.

Mật khẩu là đường cơ sở truyền thống cho ngành và có một số cách mà các dịch vụ củng cố luồng đăng nhập dựa trên mật khẩu.

Hai trong số phổ biến nhất là Mật khẩu + Mã được gửi qua SMS và Mật khẩu + Mã được tạo bằng TOTP.

Một dịch vụ quyết định bổ sung được đưa ra là có nên sử dụng nhà cung cấp đăng nhập liên kết ủy quyền toàn bộ quá trình xác thực cho một dịch vụ khác hay không.

Các tùy chọn xác thực liên kết dựa trên tất cả các cơ chế giống như các phương pháp truyền thống nhưng yêu cầu mọi người theo dõi ít mật khẩu hơn.

Khi được triển khai trên cơ sở hạ tầng mạnh mẽ, an toàn - như trường hợp Đăng nhập bằng Apple - chúng cũng có thể an toàn hơn các cơ chế truyền thống đó.

Một bước vượt xa bất kỳ bước nào trong số này là loại bỏ hoàn toàn mật khẩu.

Tiêu chuẩn WebAuthentication, hay "WebAuthn," thực hiện chính xác điều này.

Thay vào đó, nó sử dụng mật mã khóa công khai để giữ an toàn cho tài khoản.

iOS 15 và macOS Monterey chứa bản xem trước của công nghệ này cung cấp khả năng thay thế mật khẩu có thể sử dụng được.

Đồng đội Garrett của tôi có một video về nó mà bạn chắc chắn nên xem.

Khi toàn bộ ngành công nghiệp của chúng tôi tiếp tục làm việc để xây dựng tương lai đó mà không cần mật khẩu, vẫn có giá trị thực sự trong việc thực hiện các bước để cải thiện bảo mật của cơ sở hạ tầng mà bạn đã có và có thể tiếp tục có trong một thời gian.

Bất cứ điều gì bạn có thể làm để giữ cho mọi người an toàn hơn khi trực tuyến đều tốt.

Một bước bạn có thể thực hiện liên quan đến mã xác minh được gửi qua SMS.

Khi bạn đang đánh giá việc áp dụng mã xác minh dựa trên thời gian, bạn vẫn có thể cần gửi mã bằng SMS.

Trong iOS 14 và macOS Big Sur, chúng tôi đã giới thiệu một cơ chế đơn giản để làm cho mã SMS của bạn có khả năng chống lừa đảo tốt hơn bằng cách thêm các liên kết miền vào tin nhắn của bạn.

Liên kết miền là một cách giao tiếp với AutoFill rằng mã trong tin nhắn này dành cho một miền cụ thể.

Khi mã bị ràng buộc theo cách này, AutoFill sẽ chỉ cung cấp mã nếu tên miền mà nó bị ràng buộc khớp với tên miền của trang web hoặc một trong các tên miền được liên kết của ứng dụng của bạn.

Trong các ứng dụng, điều này hoạt động trên các cơ chế tương tự như các miền liên quan và các liên kết phổ quát.

Vì vậy, nếu bạn đã định cấu hình các ứng dụng của mình cho các công nghệ đó, bạn đã sẵn sàng thêm các ràng buộc miền.

Bạn có thể tìm hiểu thêm về điều này trong một bài báo chúng tôi đã xuất bản về việc tăng cường bảo mật của mã SMS với các ràng buộc miền.

Bây giờ bạn đã biết tất cả về mã xác minh, hãy đi và làm hai điều quan trọng này.

Đầu tiên, áp dụng mã xác minh dựa trên thời gian trong các ứng dụng và trang web của bạn.

Thêm hỗ trợ cho mặt sau của bạn và khuyến khích khách hàng của bạn sử dụng chúng thay vì nhận mã qua SMS.

Thứ hai, nếu bạn đang tiếp tục hỗ trợ mã xác minh SMS, hãy thêm liên kết miền vào tin nhắn của bạn.

Cảm ơn bạn đã xem.

[Âm nhạc].