10044

Xin chào, và chào mừng.

Tên tôi là Marl, và tôi thuộc nhóm Sản phẩm Shazam.

Tôi hy vọng bạn đang thích WWDC21 và tôi ở đây để giới thiệu cho bạn ShazamKit, khuôn khổ cung cấp cho bạn khả năng tích hợp nhận dạng âm thanh vào ứng dụng của mình.

Hôm nay tôi sẽ hướng dẫn bạn ShazamKit là gì và một vài trường hợp sử dụng để áp dụng nó.

Sau đó, tôi sẽ chuyển nó cho đồng nghiệp James của tôi, người sẽ chỉ cho bạn cách công nhận danh mục Shazam hoạt động và đưa ra các mẹo để bắt đầu.

Hãy bắt đầu với ShazamKit là gì.

Bạn có thể đã quen thuộc với Shazam, ứng dụng nhận dạng âm thanh ra mắt vào năm 2008 với tư cách là một trong những ứng dụng đầu tiên trong App Store.

13 năm sau, ứng dụng đã phát triển khá nhiều và Shazam thậm chí còn được sử dụng như một động từ.

Công nghệ của nó cung cấp năng lượng cho Siri's What Song is This và được tích hợp trong Phím tắt và Trung tâm điều khiển.

Công nghệ cốt lõi đó là nhận dạng âm thanh - kết hợp âm thanh chính xác và gần như tức thời - ngay cả với tiếng ồn trong nền.

Nhận dạng đạt được bằng cách lắng nghe chữ ký âm thanh riêng biệt của âm thanh và tìm kiếm kết quả khớp chính xác trong danh mục nội dung của riêng Shazam hoặc trong danh mục âm thanh tùy chỉnh mà bây giờ bạn sẽ có thể tạo.

Tuy nhiên, không giống như SoundAnalysis, Shazam không phải là một lớp âm thanh phát hiện và phân tích các lớp nói, ca hát hoặc ngân nga.

Trên thực tế, Shazam hoàn toàn không xác định được những âm thanh cụ thể, như tiếng cười hoặc tiếng vỗ tay, trong âm thanh.

James sẽ đưa bạn qua quá trình nhận dạng của Shazam trong vài phút và nếu bạn muốn tìm hiểu về cách phát hiện và phân loại âm thanh, hãy xem cả phiên SoundAnalysis.

Trong thời gian chờ đợi, hãy nói nhiều hơn về ShazamKit, khuôn khổ mang lại chức năng nhận dạng cho các ứng dụng của bạn.

ShazamKit được chia thành ba thành phần.

Có nhận dạng danh mục Shazam, nhận dạng danh mục tùy chỉnh và quản lý thư viện.

Nhận dạng danh mục Shazam cung cấp cho bạn khả năng thêm nhận dạng bài hát vào ứng dụng của mình.

Với nhận dạng danh mục tùy chỉnh, bạn có thể tiến thêm một bước nữa và thực hiện kết hợp trên thiết bị với âm thanh tùy ý.

Phiên này sẽ tập trung chủ yếu vào nhận dạng danh mục Shazam và quản lý thư viện, nhưng hãy chắc chắn viết mã cùng với đồng nghiệp Alex của chúng tôi, người sẽ chỉ cho bạn cách "Tạo trải nghiệm âm thanh tùy chỉnh cho ứng dụng của bạn."

Tiếp theo, tôi sẽ đưa bạn qua một số cơ hội tuyệt vời mà chúng tôi thấy để bạn tận dụng ShazamKit trên các ứng dụng của mình.

Hãy bắt đầu với việc tìm kiếm bức ảnh tự sướng hoàn hảo.

Chúng có thể thú vị khi chụp và thậm chí còn thú vị hơn khi tạo ra một tâm trạng hoặc bầu không khí cụ thể.

Nhận dạng danh mục Shazam có thể giúp bằng cách nhận dạng bài hát đang phát trong môi trường và tìm nạp siêu dữ liệu bài hát như tiêu đề bài hát và nghệ sĩ.

Tuy nhiên, bạn cũng có thể tạo ra một trải nghiệm hơi khác hoặc sự rung cảm, vì vậy ảnh tự chụp của bạn vượt ra ngoài việc nghe và ghi hình từ chiếc ghế dài của bạn.

ShazamKit API cũng trả về thể loại giống như siêu dữ liệu, thay vào đó bạn có thể sử dụng để mô phỏng việc thưởng thức bài hát đó tại một câu lạc bộ ở trung tâm thành phố.

ShazamKit cũng nhận ra nhiều hơn âm nhạc, có thể hữu ích hữu ích trong bối cảnh học tập ảo.

Việc học từ xa có thể tạo ra những thách thức khác nhau cho giáo viên và học sinh, bao gồm theo kịp các bài học trên màn hình và điều hướng giữa các ứng dụng.

Nhận dạng danh mục tùy chỉnh mang đến cơ hội làm cho trải nghiệm ứng dụng giáo dục của bạn trở nên liền mạch hơn đối với họ.

Bằng cách sử dụng âm thanh của nội dung bài học như một loại điều khiển từ xa, khung có thể kích hoạt các hoạt động được đồng bộ hóa trong các ứng dụng của học sinh dưới dạng luồng nội dung qua hội nghị truyền hình.

Giáo viên có thể nghỉ ngơi dễ dàng hơn khi biết các ứng dụng của học sinh theo dõi, ngay cả sau khi tạm dừng hoặc lặp lại các phần của bài học.

Nếu bạn thích truyền hình cải thiện nhà cửa nhiều như tôi, bạn sẽ đánh giá cao thử thách khi cố gắng tìm kiếm đồ nội thất nhanh như các mảnh nhấp nháy trên màn hình.

Sử dụng ShazamKit để làm cho chương trình hoặc video của bạn có thể mua được với trải nghiệm AR màn hình thứ hai tương tác.

Cho dù xem trong thời gian thực hay theo yêu cầu, người xem ở nhà có thể duyệt đồng bộ, mô phỏng và mua các kiểu khi họ xem.

Bây giờ hãy thử điều này ngoài đời thực.

Bạn đã bao giờ xem video về những khoảnh khắc mà bạn và bạn bè của bạn đã chia sẻ và ước gì bạn biết những bài hát đang phát trong nền chưa?

Ví dụ, đây là một cái mà bạn tôi đã gửi cho tôi để so sánh các tối thứ Sáu của chúng tôi.

Không biết ai khiến tôi bắt gặp sự rung cảm, Cảm nhận tần suất, bắt gặp sự rung cảm, chỉ có bạn và tôi.

Sử dụng ShazamKit, ứng dụng của tôi đã khởi động nhận dạng và tìm thấy âm thanh phù hợp trong danh mục của Shazam.

Bây giờ tôi đã biết bài hát nào đang phát, tôi có thể lưu nó vào thư viện hoặc sử dụng nó để bắt đầu danh sách phát cuối tuần hoàn hảo.

Bây giờ đây là James để chỉ cho bạn cách nhận dạng danh mục Shazam hoạt động.

Cảm ơn, Marl, và xin chào mọi người.

Tôi là James, một quản lý kỹ thuật trong nhóm Shazam.

Hôm nay tôi sẽ đưa bạn qua cách ShazamKit được sử dụng để nhận dạng âm nhạc trong video của Marl.

Vậy điều gì đã xảy ra khi Marl nhấn nút Xác định bài hát?

ShazamKit đã gửi một đại diện của âm thanh trong video đến máy chủ của Shazam.

Một trận đấu đã được tìm thấy trong danh mục âm nhạc của Shazam và thông tin về bài hát đã được trả lại, mà chúng tôi đã hiển thị trong ứng dụng của mình.

Chúng ta hãy xem xét kỹ hơn cách Shazam phù hợp với âm thanh.

Điều quan trọng cần lưu ý là Shazam không phù hợp với chính âm thanh.

Thay vào đó, nó tạo ra một đại diện mất mát của nó, mà chúng tôi gọi là chữ ký và phù hợp với điều đó.

Cách tiếp cận này có hai lợi ích.

Thứ nhất, một chữ ký ít nhất nhỏ hơn một bậc độ lớn so với âm thanh mà từ đó nó được bắt nguồn.

Điều này làm giảm đáng kể lượng dữ liệu cần được gửi qua mạng.

Thứ hai, chữ ký không thể đảo ngược, có nghĩa là âm thanh gốc không thể được xây dựng lại từ một chữ ký nhất định.

Điều này rất quan trọng để bảo vệ quyền riêng tư của khách hàng của chúng tôi.

Vậy chữ ký nghe như thế nào?

Hãy để tôi chơi một cái và xem liệu bạn có thể xác định được bài hát không.

Đúng rồi.

Đó là "Tương lai của tôi" của Billie Eilish.

Bạn thậm chí có thể thử Shazaming nó cho chính mình.

Bây giờ hãy nói về danh mục.

Danh mục là bộ sưu tập chữ ký.

Tất nhiên, chữ ký trong danh mục không hữu ích lắm nếu không có một số siêu dữ liệu liên quan mô tả âm thanh mà từ đó chúng được tạo ra.

Chúng tôi sẽ gọi những thứ này là chữ ký tham chiếu, vì siêu dữ liệu là tham chiếu trở lại âm thanh gốc.

Danh mục Shazam là một bộ sưu tập các chữ ký tham khảo bao gồm phần lớn âm nhạc của thế giới.

Nó sống trong đám mây và được lưu trữ và duy trì bởi Apple.

Nó được cập nhật thường xuyên với các bản nhạc mới nhất.

Mọi chữ ký trong danh mục Shazam đã được tạo ra từ âm thanh đầy đủ của một bài hát và có tham chiếu tương ứng đến siêu dữ liệu của bài hát đó.

Bây giờ, nếu bạn muốn kết hợp với âm thanh của chính mình thì sao?

Trong trường hợp này, bạn có thể sử dụng một danh mục tùy chỉnh.

Đây là những bộ sưu tập chữ ký được tạo ra từ âm thanh tùy ý, không chỉ âm nhạc và bạn có thể thêm siêu dữ liệu tùy chỉnh của riêng mình vào chúng.

Trái ngược với danh mục Shazam tồn tại trên đám mây, các danh mục tùy chỉnh phù hợp diễn ra trong ứng dụng của bạn.

Xem mã cùng với "Tạo trải nghiệm âm thanh tùy chỉnh với ShazamKit" để tìm hiểu thêm.

Khi bạn muốn tìm kiếm một danh mục, bạn cần một chữ ký truy vấn, là biểu diễn của một phần nhỏ âm thanh mà bạn muốn khớp.

Trong ứng dụng này, đó là một phần của âm thanh bao gồm bài hát.

Trong hình ảnh trực quan này, một chữ ký truy vấn đã được so sánh với chữ ký tham chiếu, đại diện cho âm thanh hoàn chỉnh của một bài hát và một kết quả khớp đã được tìm thấy.

Quá trình tương tự xảy ra đối với mọi bài hát trong danh mục của Shazam để xác định các ứng cử viên phù hợp.

Vì vậy, quay trở lại sơ đồ đầu tiên đó, bây giờ chúng tôi biết rằng chúng tôi đã gửi một chữ ký truy vấn qua mạng để khớp với danh mục Shazam, đây là một bộ sưu tập các chữ ký tham chiếu và thông tin bài hát.

Khi Marl nhấn nút Xác định, một kết quả khớp đã được tìm thấy và thông tin bài hát được trả về.

Bây giờ, điều tuyệt vời về ShazamKit là nó xử lý tất cả những điều này cho bạn thông qua đối tượng phiên.

Một phiên có thể lấy đầu vào âm thanh hoặc chữ ký.

Kết quả được truyền đạt thông qua đại diện của nó.

Trước khi bạn có thể so sánh với danh mục Shazam, bạn sẽ cần bật Dịch vụ ứng dụng ShazamKit cho mã định danh ứng dụng của mình trong cổng thông tin Nhà phát triển.

Bước này không cần thiết để khớp với các danh mục tùy chỉnh.

Được rồi, hãy xem cái này trông như thế nào trong mã.

Đầu tiên, tôi tạo một đối tượng phiên.

Trình khởi tạo mặc định của nó sẽ khớp với danh mục Shazam.

Tiếp theo, tôi đặt đại diện của nó để tôi có thể được thông báo về bất kỳ kết quả phù hợp nào có thể được tìm thấy.

Nếu bạn đang kết hợp với luồng âm thanh liên tục, ví dụ, từ micrô, chúng tôi khuyên bạn nên sử dụng phương pháp matchStreamingBuffer trong phiên vì nó được tối ưu hóa cho kịch bản đó.

Tuy nhiên, trong trường hợp của chúng tôi, tôi đã có quyền truy cập vào âm thanh hoàn chỉnh trong video, vì vậy tôi sẽ tạo một trình tạo chữ ký và chuyển âm thanh cho nó.

Khi tôi sẵn sàng thực hiện một trận đấu, tôi sẽ gọi phương thức chữ ký trên trình tạo để chuyển đổi âm thanh tôi đã chuyển thành chữ ký.

Sau đó, tôi đưa chữ ký đã tạo cho phương thức khớp của đối tượng phiên.

Quay lại ứng dụng của chúng tôi.

Sau khi tạo chữ ký từ âm thanh và sử dụng phiên để tìm một bài hát phù hợp trong danh mục của Shazam, bước tiếp theo là hiển thị thông tin bài hát.

Trước đó, tôi đã mô tả cách các danh mục được tạo thành từ chữ ký và siêu dữ liệu.

Trong trường hợp của danh mục Shazam, siêu dữ liệu này là thông tin bài hát, chẳng hạn như tiêu đề và nghệ sĩ của bản nhạc, và các thuộc tính khác như ảnh bìa album của nó.

Trong ShazamKit, đối tượng đại diện cho thông tin này được gọi là một mục phương tiện.

Đối với các chữ ký vừa được khớp, bạn cũng được trả lại thông tin bổ sung, chẳng hạn như nơi ở trong âm thanh mà trận đấu xảy ra và bất kỳ sự khác biệt nào về tần số giữa âm thanh khớp và âm thanh gốc.

Đây được gọi là một mục phương tiện phù hợp và là một lớp con của mục phương tiện.

Trong ví dụ mã trước, tôi đã đặt đại diện phiên.

Khi thực hiện một trận đấu, chúng ta có thể dựa vào nó để thông báo cho chúng ta về thành công, không có trận đấu hoặc lỗi.

Chữ ký có thể khớp với nhiều bản nhạc.

Chúng được thể hiện dưới dạng một mảng các mục phương tiện phù hợp.

Trong mã ứng dụng của chúng tôi, chúng tôi sẽ lấy cái đầu tiên.

Bây giờ chúng ta có thể bắt đầu thiết lập một số thuộc tính được trả về.

Ảnh bìa album đã được tìm nạp bằng cách sử dụng thuộc tính artworkURL.

Tên của bài hát và người biểu diễn được điền từ tiêu đề và thuộc tính nghệ sĩ.

Vì bài hát phù hợp có sẵn trong danh mục Apple Music và các chi tiết của nó đang được hiển thị, ghi công cần được đưa ra như được nêu trong Nguyên tắc nhận dạng Apple Music.

Trong ứng dụng, chúng tôi đã thêm một nút khởi chạy URL Apple Music được trả về bởi mục phương tiện.

Một khách hàng đã nhận ra một bài hát trong ứng dụng của bạn có thể muốn lưu bài hát này vào thư viện Shazam của họ.

Thư viện Shazam có thể truy cập từ ứng dụng Shazam nếu được cài đặt hoặc bằng cách nhấn và giữ trên mô-đun Trung tâm điều khiển nhận dạng nhạc và nó được đồng bộ hóa trên các thiết bị.

Hãy thử cái này.

Đầu tiên, tôi sẽ nhấn và giữ mô-đun Trung tâm điều khiển nhận dạng âm nhạc.

Nó cho thấy rằng tôi đã có một vài bài hát trong đó.

Tiếp theo, tôi sẽ nhấn vào nút dấu cộng trong ứng dụng để thêm bài hát phù hợp vào danh sách đó.

Bây giờ tôi sẽ mở lại thư viện của mình và kiểm tra xem nó đã được thêm vào chưa.

Tuyệt vời, nó ở trong đó, và tên ứng dụng của tôi hiển thị như là nguồn của trận đấu.

Và đây là mã trông như thế nào.

SHMediaLibrary cung cấp một phiên bản mặc định tương ứng với thư viện Shazam của khách hàng.

Điều này được lưu trữ mã hóa đầu cuối và chỉ khả dụng trên các thiết bị đã bật xác thực hai yếu tố.

Thư viện chỉ chấp nhận các mục tương ứng với một bài hát trong danh mục Shazam.

Không cần sự cho phép đặc biệt để ghi vào thư viện Shazam, nhưng chúng tôi thực sự khuyên bạn nên tránh lưu trữ nội dung trong đó mà không thông báo cho khách hàng.

Tất cả các bài hát được lưu trong thư viện sẽ được quy cho ứng dụng đã thêm chúng.

Có nhiều thuộc tính khác được hiển thị trên MediaItem mà chúng tôi đã cung cấp để bạn khám phá, chẳng hạn như matchOffset, hiển thị nơi ở trong bài hát mà một trận đấu đã được thực hiện.

Ngoài ra, khung MusicKit mới cung cấp các đối tượng được đánh máy mạnh mẽ mô tả một bài hát và các mối quan hệ của nó.

Chúng tôi đã cung cấp cái này cho bạn trong Swift dưới dạng tài sản của Songs.

Để biết thêm chi tiết, bạn có thể xem phiên "Gặp gỡ MusicKit cho Swift".

Vì vậy bây giờ chúng ta đã có bức tranh hoàn chỉnh.

Chúng tôi đã gửi một chữ ký âm thanh để khớp với danh mục Shazam bằng cách sử dụng một phiên để quản lý quy trình đó.

Phiên sau đó đã trả lại thông tin bài hát dưới dạng một mục phương tiện phù hợp thông qua đại diện của nó.

Chúng tôi cũng cung cấp cho khách hàng của ứng dụng của chúng tôi tùy chọn thêm nó vào thư viện Shazam của họ.

Bây giờ tôi sẽ giao lại cho Marl, người sẽ đưa bạn qua một số phương pháp hay nhất.

Đến với bạn, Marl.

Cảm ơn bạn, James.

Bây giờ bạn đã biết ShazamKit là gì, nó hoạt động như thế nào và cách áp dụng nó, bạn đã sẵn sàng để bắt đầu xây dựng.

Khi bạn bắt đầu triển khai với ShazamKit, hãy xem xét các phương pháp hay nhất này.

Đầu tiên, nếu bạn đang kết hợp với âm thanh thời gian thực, giả sử, từ micrô, sau đó sử dụng matchStreamingBuffer.

Nó đơn giản hơn và xử lý rất nhiều logic cơ bản để tạo ra các chữ ký có phạm vi tốt.

Tiếp theo, nếu trường hợp sử dụng của bạn yêu cầu micrô, hãy ngừng ghi ngay khi bạn có kết quả cần thiết.

Bằng cách đó, bạn sẽ tránh tiêu thụ các tài nguyên không cần thiết hoặc khởi chạy micrô lâu hơn dự định của khách hàng.

Cuối cùng, trước khi viết thư cho thư viện của khách hàng, chúng tôi thực sự khuyên bạn nên cung cấp tùy chọn để khách hàng chọn tham gia và làm rõ hành vi này ngay từ đầu.

Tôi hy vọng bạn thích làm quen với ShazamKit.

Chúng tôi nóng lòng muốn xem những trải nghiệm và tính năng kỳ diệu mà bạn tạo ra.

Tất cả thông tin chúng tôi đã thảo luận và các liên kết đến tài liệu đều được đính kèm với phiên này, vì vậy bạn đã sẵn sàng để bắt đầu.

Và đừng quên thử mã cùng với nhận dạng danh mục tùy chỉnh.

Cảm ơn vì đã tham gia. Tận hưởng phần còn lại của WWDC21.

[Âm nhạc].