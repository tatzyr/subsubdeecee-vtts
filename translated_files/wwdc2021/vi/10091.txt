10091

♪ Nhạc bass đang phát ♪

♪

Kritarth Jain: Xin chào và chào mừng đến với "Gửi thông báo liên lạc và nhạy cảm về thời gian."

Tôi là Kritarth, một kỹ sư trong nhóm Thông báo, và sau đó tôi sẽ được tham gia bởi đồng nghiệp của tôi, Kevin.

Thông báo là một thành phần quan trọng của trải nghiệm ứng dụng và chúng tôi sẽ đề cập đến những cách mới để nâng cao chúng, cùng với việc nâng cao một số loại thông báo nhất định.

Chúng tôi sẽ bắt đầu bằng cách bao gồm một số cập nhật trực quan cho các thông báo và cách tăng cường chúng với API mới.

Sau đó, chúng tôi sẽ tổng quan về các biện pháp kiểm soát quản lý mới và cách chúng có liên quan đến giao tiếp và thông báo nhạy cảm với thời gian.

Sau đó, chúng tôi sẽ tập trung vào việc gián đoạn thông báo và bao gồm các API mới để kiểm soát chúng.

Sau đó, chúng tôi sẽ trau dồi hai loại thông báo - Nhạy cảm với thời gian và giao tiếp - và đề cập đến các cách mà chúng có thể được định cấu hình.

Hãy bắt đầu bằng cách xem qua một số cập nhật trực quan cho các thông báo.

Giờ đây, các thông báo có giao diện mới với sự tập trung nhiều hơn vào nội dung và phương tiện liên quan cùng với biểu tượng ứng dụng.

Bản trình bày thông báo phong phú và các hành động đi kèm đã được cập nhật để phù hợp với phong cách hệ thống.

Bây giờ bạn có thể liên kết các hành động thông báo với các biểu tượng.

Biểu tượng truyền tải những gì hành động sẽ làm và cung cấp bối cảnh trực quan bên cạnh hành động.

Ở đây có hai hành động thông báo - thích và bình luận - và chúng được đặt trên danh mục thông báo tùy chỉnh.

Để thêm các biểu tượng vào các hành động này, hãy tạo các đối tượng thuộc loại UNNotificationActionIcon với tên hình ảnh, cho hình ảnh hệ thống hoặc hình ảnh mẫu.

Sau đó cung cấp các biểu tượng này cho các nhà xây dựng tương ứng cho UNNotificationAction.

Khi một thông báo liên quan đến danh mục này được mở rộng, các hành động được trình bày cùng với các biểu tượng được cung cấp cho chúng.

Bởi vì các thông báo hiển thị biểu tượng ứng dụng ở kích thước lớn hơn, hãy cung cấp biểu tượng có độ phân giải cao với gói ứng dụng.

Đảm bảo các tiện ích mở rộng nội dung tiếp tục hoạt động với bản trình bày và bố cục mới của các thông báo phong phú và áp dụng các biểu tượng cho các hành động thông báo để thêm nhiều ngữ cảnh hơn.

Tiếp theo, hãy xem xét các tùy chọn quản lý thông báo mới.

Có những điều khiển hệ thống mới ảnh hưởng đến việc phân phối và gián đoạn thông báo từ các ứng dụng.

Đây là bản tóm tắt thông báo và Tập trung.

Trước tiên hãy thảo luận về bản tóm tắt thông báo.

Thông báo hiện có thể được gửi vào thời gian đã lên lịch trong ngày dưới dạng tóm tắt.

Điều này làm giảm số lượng gián đoạn hoạt động từ các thông báo đến và trình bày chúng chung vào những thời điểm đặt trước.

Tất cả các thông báo được gửi đến bản tóm tắt theo lịch trình đều có trong danh sách thông báo trên màn hình Khóa.

Bao gồm các tệp đính kèm phương tiện với nội dung thông báo để có cơ hội tốt hơn để thông báo đó được giới thiệu ở đầu bản tóm tắt thông báo.

Áp dụng API mới để cung cấp điểm liên quan cho nội dung thông báo để các thông báo phù hợp từ ứng dụng cũng được giới thiệu trong bản tóm tắt thông báo.

Công cụ quản lý khác liên quan đến thông báo là Focus.

Thiết bị có thể được đặt trong một Tiêu điểm cụ thể dựa trên hoạt động hoặc thời gian trong ngày như Đọc sách, Ngủ hoặc Làm việc.

Khi ở trong cấu hình như vậy, thiết bị sẽ lọc bản trình bày và gián đoạn thông báo.

Cấu hình tập trung cho phép chọn người và ứng dụng có thể gửi thông báo gián đoạn.

Ví dụ, trong quá trình Trọng tâm công việc, Thư và Tin nhắn được phép gửi thông báo, cùng với giao tiếp trực tiếp từ đồng nghiệp.

Vì vậy, tóm tắt thông báo và kiểm soát tập trung ứng dụng nào có thể gửi thông báo gián đoạn và khi nào.

Điều này cho phép quản lý tốt hơn các gián đoạn trong suốt cả ngày.

Có cơ hội cho các thông báo vượt qua các kiểm soát quản lý này, nhưng chỉ khi được phép làm như vậy.

Giao tiếp và thông báo Nhạy cảm với Thời gian cũng có thể đột phá.

Tiếp theo, hãy thảo luận về cách các ứng dụng có thể kiểm soát sự gián đoạn liên quan đến thông báo.

Có một API mới cho các cấp độ gián đoạn như một phần của khung Thông báo Người dùng.

Có bốn mức độ gián đoạn riêng biệt được hỗ trợ.

Đây là Thụ động, Chủ động, Nhạy cảm về Thời gian và Quan trọng.

Thông báo với mức độ gián đoạn thụ động không cảnh báo hoặc thắp sáng màn hình và không phá vỡ các điều khiển hệ thống.

Những thông báo này được gửi đến danh sách thông báo một cách âm thầm và có sẵn vào lần xem danh sách tiếp theo.

Gián đoạn thụ động nên được sử dụng cho các thông báo không yêu cầu chú ý ngay lập tức để ngắt nhưng cuối cùng sẽ được nhìn thấy.

Một số ví dụ là các đề xuất ăn uống và tính khả dụng của tập mới.

Sự gián đoạn chủ động giống như hành vi tồn tại ngày nay, nơi các thông báo sẽ phát âm thanh và rung động và thắp sáng màn hình.

Những thông báo này sẽ không phá vỡ hệ thống quản lý thông báo.

Đây là mức độ gián đoạn mặc định.

Gián đoạn chủ động nên được sử dụng cho các thông báo không đảm bảo gián đoạn nếu hệ thống được định cấu hình để không bị gián đoạn hiện tại.

Một số ví dụ là cập nhật thể thao và thông báo video phát trực tiếp.

Cảnh báo thông báo nhạy cảm về thời gian giống như thông báo đang hoạt động.

Những thứ này đặc biệt vì chúng có thể vượt qua các điều khiển hệ thống như tóm tắt thông báo và Tập trung, nếu nó được cho phép.

Những thông báo này chỉ nên được sử dụng khi có liên quan đến việc chủ động làm gián đoạn, đòi hỏi sự chú ý ngay lập tức.

Một số trường hợp là bảo mật tài khoản và cảnh báo giao hàng.

Cuối cùng, mức độ gián đoạn nghiêm trọng tương đương với hỗ trợ thông báo quan trọng tồn tại trong iOS 14.

Các thông báo với mức độ gián đoạn này chủ động cảnh báo, phá vỡ các điều khiển hệ thống và cũng bỏ qua công tắc chuông trên thiết bị.

Do hành vi gây rối này, sự gián đoạn nghiêm trọng sẽ tiếp tục yêu cầu một quyền được phê duyệt.

Một số trường hợp sử dụng cho các thông báo quan trọng là thời tiết khắc nghiệt và cảnh báo an toàn địa phương.

Để hỗ trợ API mới trong khung UserNotifications, có một enum mới cho UNNotificationInterruptionLevel với các cấp độ khác nhau được xác định.

Đặt mức độ gián đoạn này trong khi định cấu hình đối tượng nội dung cho yêu cầu thông báo.

Thụ động được đặt trong ví dụ này.

Nếu không có mức độ gián đoạn nào được cung cấp, thì mức mặc định sẽ được sử dụng.

Đối với tải trọng thông báo đẩy, hãy cung cấp một cặp khóa-giá trị mới, với mức độ gián đoạn khóa.

Ở đây một lần nữa, đặt mức độ gián đoạn là thụ động.

Khi thông báo này được gửi đến thiết bị, nó sẽ hiển thị trên màn hình Khóa mà không bị gián đoạn, vì nó được định cấu hình là thụ động.

Một hình thức gián đoạn khác gắn liền với thông báo là Thông báo.

Siri có thể thông báo thông báo nếu có các thiết bị tương thích - chẳng hạn như AirPods Pro và AirPods Max - được kết nối.

Để có được hành vi thông báo này trong iOS 14, các thông báo phải được gắn với một danh mục yêu cầu tùy chọn AllowAnnouncement.

Trong iOS 15, yêu cầu đối với tùy chọn danh mục này bị phản đối.

Bây giờ thông báo được hỗ trợ cho bất kỳ thông báo nào trong khi kết nối với thiết bị âm thanh được hỗ trợ.

Thông báo Giao tiếp và Thời gian nhạy cảm sẽ được thông báo theo mặc định.

Trong khi kết nối với CarPlay, thông báo giao tiếp có thể được cấu hình để thông báo tự động, giúp trải nghiệm liền mạch hơn.

Tiếp theo, hãy tập trung vào các thông báo Nhạy cảm với Thời gian và cách định cấu hình chúng.

Thông báo nhạy cảm về thời gian là những thông báo đòi hỏi sự chú ý ngay lập tức.

Do tầm quan trọng của chúng, chúng có thể đột phá các điều khiển hệ thống như tóm tắt thông báo và Tập trung nếu được phép làm như vậy.

Một ví dụ về thông báo Nhạy cảm về Thời gian là một ví dụ từ Nhắc nhở về việc uống thuốc.

Thông báo này được đăng ngay lập tức và nổi bật, phá vỡ Trọng tâm công việc.

Điều quan trọng là phải duy trì niềm tin khi gửi thông báo Time Sensitive.

Đừng lạm dụng bản chất gián đoạn của chúng và chỉ sử dụng chúng khi có liên quan để làm như vậy.

Biết rằng có một tùy chọn để tắt các cảnh báo Time Sensitive hoặc thậm chí tất cả các thông báo từ một ứng dụng.

Để định cấu hình các thông báo Nhạy cảm với Thời gian, hãy bật khả năng liên quan thông qua Xcode cho ứng dụng của bạn.

Đặt mức độ gián đoạn Nhạy cảm với Thời gian trên yêu cầu thông báo đang được đăng.

Đối với thông báo cục bộ, mức độ gián đoạn Nhạy cảm với Thời gian được đặt trên đối tượng nội dung.

Đối với tải trọng đẩy, hãy đặt khóa cấp độ gián đoạn với giá trị nhạy cảm về thời gian.

Khi được gửi, thông báo này được đăng nổi bật, làm nổi bật tính cấp bách.

Hãy thảo luận về các thông báo giao tiếp.

Và để kể cho bạn tất cả về họ, hãy để tôi giao cho Kevin.

Kevin?

Kevin Harrington: Cảm ơn, Kritarth.

Tôi là Kevin, một kỹ sư trong nhóm Thông báo.

Có một tầm quan trọng đối với các thông báo khẩn cấp phá vỡ Tập trung và tóm tắt thông báo.

Thông tin liên lạc từ mọi người cũng đảm bảo việc gửi thông báo nâng cao.

Những thông tin liên lạc này có thể có nhiều hình thức, bao gồm các cuộc gọi và tin nhắn.

Tôi sẽ làm nổi bật một API mới cho phép các ứng dụng của bạn báo hiệu những thông báo nào là thông tin liên lạc và những người được liên kết với những thông tin liên lạc đó.

Tầm quan trọng của thông báo giao tiếp được xác định bởi quyết định của người dùng.

Đề xuất Siri giúp thông báo những quyết định này, gợi ý những người quan trọng nên được phép làm gián đoạn.

Khi người dùng của bạn tương tác với thiết bị - nhận cuộc gọi, tham gia FaceTime, gửi tin nhắn - Siri biết ai là ứng cử viên để vượt qua Tóm tắt Tiêu điểm và Thông báo.

Trong iOS 15, thông báo giao tiếp mang lại trải nghiệm người dùng phong phú hơn.

Rõ ràng nhất là những hình đại diện nổi bật.

Tiêu đề và phụ đề được chuẩn hóa.

Nó luôn bao gồm người gửi trong tiêu đề và trong trường hợp liên lạc nhóm, người nhận trong phụ đề.

Tiêu đề và văn bản phụ đề được bản địa hóa và định dạng cho tất cả các thiết bị, trên các nền tảng.

Ví dụ, đồng hồ thích chỉ hiển thị tên cho người nhận giao tiếp nhóm.

Siri bây giờ sẽ thông báo nội dung của thông báo liên lạc trên các thiết bị được hỗ trợ bao gồm HomePod, AirPods và CarPlay.

Và Siri sẽ cung cấp các đề xuất để giúp ưu tiên các thông báo liên lạc này.

Những người trong ứng dụng của bạn sẽ được liên kết với những người trong Danh bạ.

Các liên kết này được hiển thị dưới dạng đề xuất về thông báo.

Khi người dùng xác nhận đề xuất, Phím tắt Siri có sẵn cho các tác vụ với những người đó trong ứng dụng của bạn.

Siri sẽ đề xuất những người có liên quan đột phá trong cấu hình Focus - bao gồm cả những người được liên kết với thông tin liên lạc trong ứng dụng của bạn.

Để đưa ra những quyết định này về những gì là và không phải là giao tiếp, API mới này cho phép bạn thêm ý định gọi và tin nhắn SiriKit vào Thông báo.

Ý định được thúc đẩy bởi các nhiệm vụ chung.

Ứng dụng của bạn quyên góp những ý định này khi các sự kiện xảy ra, như thực hiện cuộc gọi hoặc nhận tin nhắn.

Từ đó, Siri cung cấp các phím tắt và đề xuất dựa trên những ý định này, như mọi người trong ứng dụng của bạn nhắn tin từ bảng chia sẻ hoặc bắt đầu cuộc gọi từ ứng dụng của bạn qua Siri.

API mới này liên kết những ý định tương tự này với các thông báo để tích hợp hơn nữa các ứng dụng của bạn vào hệ sinh thái Siri.

Sử dụng ý định SiriKit cho các thông báo giao tiếp sẽ tăng mức độ tương tác trong các ứng dụng của bạn trong khi vẫn duy trì tính nhất quán trong toàn bộ ứng dụng, Siri và giao diện người dùng hệ thống của bạn.

Các ý định đại diện cho các giao tiếp có liên quan là ý định StartCall và SendMessage.

Giao thức NotificationContentProviding là cơ chế liên kết ý định với thông báo.

Trên đối tượng NotificationContent, cập nhật cuộc gọi với mục đích ContentProviding để xử lý giao tiếp.

Ý định StartCall và SendMessage phù hợp với việc cung cấp.

Thông báo liên lạc được gửi qua dịch vụ Thông báo đẩy của Apple.

Bạn cần cập nhật đối tượng NotificationContent với ý định SiriKit trong NotificationServiceExtension của ứng dụng.

Ý định SiriKit là cục bộ của thiết bị và do đó phải được phục vụ cục bộ.

Phần mở rộng dịch vụ dành cho chính xác những trường hợp này.

Đây là nơi để tùy chỉnh nội dung của một thông báo từ xa trước khi nó được gửi đi.

Bạn cũng có thể làm điều này trong quy trình ứng dụng chính của mình cho các thông báo cục bộ.

Trong chức năng didReceive của bạn, hãy cập nhật nội dung của một tải trọng đẩy với một ý định.

Đối với thông báo nhắn tin, hãy tạo một SendMessageIntent.

Và đối với các thông báo liên quan đến cuộc gọi, hãy sử dụng StartCallIntent.

Tạo một tương tác để nói với Siri intelligence những gì đang xảy ra.

Trong phần mở rộng thông báo, hướng tương tác luôn đến.

Đây là một sự kiện đang xảy ra với người dùng; họ đang nhận được cuộc gọi đến.

Tiếp theo, bạn cần quyên góp sự tương tác.

Các khoản đóng góp cũng giúp hệ thống đưa ra những đề xuất tốt hơn trong tương lai.

Cập nhật nội dung thông báo của bạn với mục đích.

Và cuối cùng, hãy gọi cho contentHandler với ý định trả về.

Yêu cầu quyên góp để Siri có thể học hỏi từ các sự kiện xảy ra trong ứng dụng của bạn.

Hướng tương tác luôn đến để thông báo.

Đối với các mục đích sử dụng SiriKit khác, hướng dẫn có thể là gửi đi cho các hành động được bắt đầu trên thiết bị, như gửi tin nhắn gửi đi hoặc thực hiện cuộc gọi.

Chỉ những đối tượng hệ thống phù hợp với việc cung cấp nội dung mới được hỗ trợ.

Không phù hợp với các đối tượng của bạn với việc cung cấp nội dung.

Để gửi thông báo liên lạc, hãy bật khả năng liên lạc qua Xcode cho ứng dụng của bạn.

Hỗ trợ ý định giao tiếp bằng cách thêm các loại ý định vào mảng các loại hoạt động người dùng của bạn trong Info.plist hoặc bằng cách triển khai phần mở rộng ý định.

Quyên góp ý định giao tiếp khi người dùng thực hiện các hành động ở phía trước ứng dụng của bạn, chẳng hạn như khi người dùng nhấn gửi sau khi soạn tin nhắn.

Siri sau đó sử dụng ý định hướng ngoại để hỗ trợ tốt hơn về việc ai nên được đề xuất vượt qua Tiêu điểm và Tóm tắt.

Tương tự với các đề xuất Danh bạ.

Đối với tính năng này, Siri chỉ học hỏi từ các khoản đóng góp có mục đích gửi đi, vì vậy Danh bạ không bị lộn xộn bởi những người không tương tác - như những người gọi thư rác.

Việc sử dụng hợp lý các ý định giao tiếp là nền tảng cho trải nghiệm thông báo thông minh và có một vài điều cần đề cập.

Người có ý định là các khối xây dựng của ý định SendMessage và StartCall.

Mỗi và mọi tham số bạn điền cung cấp trải nghiệm người dùng phong phú và thông minh hơn.

Tương tự với việc tạo ra ý định với những người có ý định; mỗi và mọi tham số bạn điền cung cấp trải nghiệm người dùng phong phú và thông minh hơn.

Bắt đầu sử dụng ý định nếu bạn chưa sử dụng.

Ý định sẽ cung cấp khả năng hiển thị nhiều hơn cho ứng dụng của bạn trong thông báo, bảng chia sẻ, Danh bạ và Tiêu điểm.

Và bạn có thể sử dụng SiriKit để cung cấp các phím tắt Siri như gửi tin nhắn hoặc bắt đầu cuộc gọi.

Tập thói quen quyên góp ý định cho cả tương tác đến và đi.

Bạn có thể đã quyên góp ý định gửi đi.

Bắt đầu quyên góp ý định StartCall và SendMessage đến trong tiện ích mở rộng dịch vụ của bạn.

Đây là nền tảng cho trải nghiệm thông báo giao tiếp.

Nếu ứng dụng của bạn chưa sử dụng tiện ích mở rộng dịch vụ thông báo, bạn sẽ muốn thêm một tiện ích mở rộng.

Cuối cùng, ghép các mảnh lại với nhau bằng cách sử dụng giao thức cung cấp nội dung để trang trí từng thông báo bạn muốn gửi dưới dạng giao tiếp.

Chúng tôi đã đề cập rất nhiều trong phiên này, từ cập nhật trực quan đến thông báo liên lạc.

Đây là một vài điều rút ra.

Tính đến các bản cập nhật trực quan mới và các tùy chọn quản lý và đảm bảo rằng các thông báo hoạt động liền mạch với chúng.

Áp dụng các mức độ gián đoạn để kiểm soát tốt hơn cách thông báo ngắt kết hợp với các điều khiển hệ thống.

Sử dụng các thông báo Nhạy cảm về Thời gian khi có liên quan đến việc ngắt nổi bật và nhận các hành vi tự động như đột phá và thông báo.

Thực hiện và quyên góp ý định cuộc gọi và tin nhắn để có được trải nghiệm giao tiếp được nâng cấp gắn liền với thông báo, cùng với hành vi đột phá và thông báo.

Chúng tôi nóng lòng muốn xem tất cả những trải nghiệm mới và tuyệt vời mà bạn xây dựng xung quanh các thông báo.

Chúng tôi hy vọng tất cả các bạn có một WWDC tuyệt vời!

♪