10279

♪ ♪

Xin chào. Tên tôi là Caleb.

Tôi là một kỹ sư phần mềm trong nhóm tvOS.

Hôm nay, tôi rất vui được chia sẻ một số cải tiến tuyệt vời mà chúng tôi đã thực hiện để đăng nhập vào tvOS 15.

Chúng tôi muốn mọi người sử dụng Apple TV có thể truy cập nội dung của họ một cách nhanh chóng và ít ma sát nhất có thể.

Điều đó có nghĩa là quá trình đăng nhập vào các ứng dụng của bạn phải trôi chảy và không gây đau đớn.

Một trong những cách phổ biến nhất để đăng nhập là sử dụng mật khẩu.

Người dùng được khuyến khích có mật khẩu mạnh hoặc duy nhất, nhưng những mật khẩu này có thể gây khó chịu khi nhập.

Trong tvOS 15, chúng tôi có một tính năng mới tuyệt vời giúp thực hiện đăng nhập dựa trên mật khẩu trong ứng dụng của bạn dễ dàng hơn bao giờ hết.

Nó bắt đầu với chế độ xem đăng nhập hệ thống mới.

Quan điểm này thực hiện một vài điều thực sự quan trọng.

Đầu tiên, nó cung cấp trải nghiệm đăng nhập nhất quán trên tvOS.

Thứ hai, nó nói với người dùng rằng họ có thể sử dụng iPhone hoặc iPad của mình để hoàn tất đăng nhập.

Thứ ba, nó cung cấp cho người dùng các tùy chọn cho các loại đăng nhập khác mà ứng dụng của bạn có thể hỗ trợ.

Tôi sẽ nói nhiều hơn về điều đó sau.

Hiện tại, tôi muốn tập trung vào việc sử dụng iPhone hoặc iPad của bạn để đăng nhập.

Nếu người dùng bắt đầu đăng nhập vào ứng dụng của bạn, sau đó đánh thức iPhone của họ, họ sẽ thấy một thông báo như thế này từ Apple TV.

Khi họ nhấn vào thông báo, iPhone sẽ hướng dẫn họ trong quá trình đăng nhập.

Nó sẽ đề xuất một thông tin xác thực từ Chuỗi khóa iCloud.

Và họ có thể sử dụng Face ID để xác nhận đăng nhập.

Thông tin xác thực sau đó được gửi lại cho Apple TV.

Bây giờ, ứng dụng có thể hoàn tất đăng nhập và đưa người dùng đến ngay nội dung của họ.

Tôi muốn dành một chút thời gian để chỉ ra rằng đây không phải là một trải nghiệm nhập văn bản.

Đó là trải nghiệm đăng nhập hạng nhất, nơi cả Apple TV và iPhone hoặc iPad hợp tác để hướng dẫn người dùng trong suốt quá trình đăng nhập.

Áp dụng trải nghiệm đăng nhập mới này thực sự dễ dàng.

Có một API cấp cao trên tất cả các nền tảng của Apple được thiết kế để giúp mọi người đăng nhập vào ứng dụng của bạn.

Nó đặc biệt mạnh mẽ trong tvOS 15.

Chỉ với một chút mã, bạn có thể tận dụng tối đa trải nghiệm đăng nhập tuyệt vời mà tôi vừa cho bạn thấy.

Tôi rất muốn hướng dẫn bạn vượt qua nó ngay bây giờ.

Hãy bắt đầu với việc cấu hình các miền liên quan đến ứng dụng của bạn.

Các miền liên kết thiết lập một liên kết an toàn giữa ứng dụng và miền của bạn.

Điều này cho phép Apple TV và iPhone hoặc iPad hoạt động cùng nhau để đề xuất thông tin đăng nhập một cách an toàn để sử dụng để đăng nhập.

Trước tiên, hãy đảm bảo tệp liên kết trang web ứng dụng Apple được lưu trữ bởi miền của bạn liệt kê số nhận dạng ứng dụng ứng dụng tvOS của bạn bên trong khóa thông tin đăng nhập web.

Tiếp theo, thêm khả năng Miền liên kết vào ứng dụng tvOS của bạn trong Xcode.

Và cuối cùng, thêm tên miền của bạn vào khả năng Tên miền được liên kết với tiền tố thông tin đăng nhập web.

Để tìm hiểu thêm về cách định cấu hình tên miền thông tin đăng nhập web trong ứng dụng của bạn, hãy xem video "Giới thiệu tự động điền mật khẩu cho ứng dụng" từ WWDC 2017.

Tiếp theo, tôi muốn chỉ cho bạn cách yêu cầu thông tin xác thực bằng Dịch vụ xác thực.

Hãy cùng xem một số mã.

Ở đây chúng tôi có các thành phần cơ bản cần thiết để yêu cầu chứng chỉ.

Nếu bạn đã sử dụng API Dịch vụ Xác thực trong các ứng dụng iOS hoặc macOS của mình, mã này sẽ trông rất quen thuộc.

Tôi sẽ bắt đầu bằng cách tạo một phiên bản của ASAuthorizationController với một yêu cầu mật khẩu.

Một điều thực sự mạnh mẽ về API này là nó cho phép bạn chỉ định nhiều loại yêu cầu khác nhau.

Nếu ứng dụng của bạn cũng hỗ trợ Đăng nhập bằng Apple, bạn có thể bao gồm yêu cầu ID Apple trong mảng yêu cầu ủy quyền.

Khi bạn chỉ định nhiều yêu cầu, iPhone và iPad sẽ cho phép người dùng quyết định loại thông tin xác thực mà họ muốn sử dụng để đăng nhập.

Tiếp theo, tôi sẽ tự đặt mình làm đại diện của bộ điều khiển ủy quyền và gọi performRequests để bắt đầu đăng nhập.

Bây giờ, tôi cần triển khai một vài phương pháp từ ASAuthorization- ControllerDelegate.

Khi người dùng đã chọn thông tin xác thực mà họ muốn sử dụng trên iPhone hoặc iPad của họ, hệ thống sẽ gọi didCompleteWithAuthorization.

Bây giờ, tôi có thể sử dụng thuộc tính người dùng và mật khẩu trên thông tin xác thực để hoàn tất đăng nhập.

Nếu đăng nhập không thành công, hệ thống sẽ gọi didCompleteWithError.

Nếu người dùng hủy đăng nhập, tôi sẽ quay lại từ phương pháp này để ứng dụng có thể quay lại giao diện người dùng đăng nhập chính.

Nếu không, tôi nên cho người dùng biết có điều gì đó không ổn và họ nên thử lại.

Tiếp theo, tôi muốn chỉ cho bạn cách bạn có thể tùy chỉnh chế độ xem đăng nhập hệ thống.

API phương thức ủy quyền tùy chỉnh cho phép bạn hiển thị các nút cho các loại đăng nhập khác mà ứng dụng của bạn có thể hỗ trợ.

Giá trị ".khác" cung cấp rất nhiều sự linh hoạt.

Bạn có thể sử dụng tùy chọn này để điều hướng trực tiếp đến quy trình đăng nhập thủ công, như yêu cầu tên người dùng và mật khẩu.

Hoặc bạn có thể sử dụng nó để điều hướng đến giao diện người dùng của riêng bạn cho phép người dùng chọn một loại đăng nhập khác để thực hiện.

Nếu ứng dụng của bạn cho phép người dùng đăng nhập bằng tài khoản nhà cung cấp TV của họ, bạn nên sử dụng giá trị .videoSubscriberAccount.

Và cuối cùng, giá trị .restorePurchase cho phép người dùng đăng nhập bằng cách khôi phục giao dịch mua trong ứng dụng.

Khi người dùng chọn một trong những phương thức ủy quyền tùy chỉnh này, ứng dụng của bạn sẽ bắt đầu quy trình đăng nhập được yêu cầu.

Hãy cùng xem cái này hoạt động như thế nào.

Đầu tiên, tôi sẽ quay lại mã ASAuthorizationController mà tôi đã chỉ cho bạn trước đó.

Để hiển thị các tùy chọn đăng nhập tùy chỉnh, tôi sẽ đặt thuộc tính customAuthorizationMethods trên bộ điều khiển ủy quyền của mình.

Trong ví dụ này, tôi đang sử dụng các giá trị .other và .restorePurchase để hiển thị các nút "Đăng nhập thủ công" và "Khôi phục mua hàng" trong chế độ xem đăng nhập hệ thống.

Bạn nên chọn các giá trị phù hợp với ứng dụng của mình.

Khi người dùng chọn một phương thức ủy quyền tùy chỉnh, hệ thống sẽ gọi didCompleteWithCustomMethod trên đại diện authorizationController của tôi.

Trong phương pháp này, tôi có thể kiểm tra giá trị đã được chuyển vào và thực hiện loại đăng nhập mà người dùng yêu cầu.

Cuối cùng, tôi muốn dành một chút thời gian để nói về một số phương pháp hay nhất.

Trải nghiệm đăng nhập tốt nhất trên tvOS bắt đầu với một nút "Đăng nhập".

Nó hướng dẫn người dùng qua quá trình đăng nhập, cung cấp một số lượng hạn chế các lựa chọn rõ ràng.

Bằng cách thay thế trải nghiệm đăng nhập hiện tại của bạn bằng chế độ xem đăng nhập hệ thống mới, người dùng sẽ luôn có tùy chọn đăng nhập bằng iPhone hoặc iPad của họ.

Và API phương thức ủy quyền tùy chỉnh là một cách tuyệt vời để bạn cung cấp cho người dùng các tùy chọn đăng nhập bổ sung.

tvOS 15 giúp việc xây dựng trải nghiệm đăng nhập tuyệt vời trở nên dễ dàng hơn bao giờ hết.

Chế độ xem đăng nhập hệ thống cho phép người dùng đăng nhập bằng iPhone hoặc iPad của họ.

Và API mới mạnh mẽ trong AuthenticationServices giúp bạn dễ dàng bắt đầu.

Để có cái nhìn sâu sắc hơn về một số ví dụ mà tôi đã chia sẻ trong bài thuyết trình này, hãy xem dự án mã mẫu cho phiên này trong ứng dụng dành cho nhà phát triển.

Để tìm hiểu thêm về cách khung AuthenticationServices có thể giúp bạn xây dựng trải nghiệm đăng nhập tuyệt vời trên tất cả các nền tảng của Apple, hãy xem video "Có gì mới trong Xác thực" từ WWDC 2019.

Cảm ơn vì đã xem, và tận hưởng hội nghị!

[Nhạc lạc quan].