10081

♪ ♪

Xin chào, tên tôi là Nat.

Và tôi làm việc trên Game Technologies tại Apple.

Cảm ơn vì đã tham gia cùng tôi một lần nữa trong năm nay để cập nhật về đầu vào trò chơi cho iOS, tvOS và macOS.

Hôm nay, tôi sẽ bắt đầu với một bản tóm tắt nhanh về cả cách thức và lý do cho bất kỳ ai mới tham gia nhập trò chơi trên nền tảng Apple.

Tiếp theo, tôi sẽ chỉ cho bạn một loại bộ điều khiển trò chơi ảo mới và chúng ta sẽ viết một mã nhỏ cùng nhau.

Cuối cùng, tôi muốn nói về các bộ điều khiển vật lý thực tế hơn và làm việc thông qua một số tính năng mới của chúng tôi.

Vậy hãy bắt đầu với bài đánh giá của chúng ta.

Mục tiêu của khung bộ điều khiển trò chơi là giúp dễ dàng thêm hỗ trợ cho tất cả các loại đầu vào hiệu quả, độ trễ thấp khác nhau trên các nền tảng của Apple.

Bằng cách trừu tượng hóa phần cứng đầu vào thông qua API chung, khung bộ điều khiển trò chơi cho phép bạn viết mã đầu vào của mình một lần mà không phải lo lắng về cách đầu vào có thể được ánh xạ lại hoặc sự khác biệt giữa các bộ điều khiển, bàn phím hoặc thiết bị trỏ cụ thể.

Trên iOS, iPadOS và tvOS, người chơi có thể tạo bản đồ lại đầu vào bộ điều khiển trò chơi trên toàn hệ thống và cho mỗi ứng dụng, giúp trò chơi của bạn có thể tùy chỉnh hơn và dễ tiếp cận hơn.

Và trên tất cả các nền tảng, bạn có thể xây dựng giao diện người dùng của mình để phản ánh các biểu tượng và khả năng của các bộ điều khiển cụ thể mà người chơi đang nắm giữ.

Vì vậy, cho dù người chơi của bạn đang ở trong đội circle-square-triangle-cross hay trong đội A-B-X-Y, giao diện người dùng trò chơi của bạn sẽ trông phù hợp với họ.

Những điều cơ bản của khung bộ điều khiển trò chơi là phản ứng với các thông báo về các loại đối tượng GCDevice khác nhau kết nối và ngắt kết nối và bỏ phiếu cho các thiết bị đang hoạt động để có trạng thái đầu vào hoặc thiết lập trình xử lý thay đổi giá trị để được thông báo về các thay đổi trạng thái đầu vào.

Khi bộ điều khiển kết nối hoặc ngắt kết nối khỏi hệ thống, các đối tượng GCController được tạo và xóa, và bạn được gửi thông báo GCControllerDidConnect và GCControllerDidDisconnect.

Đó là cùng một mẫu với các đối tượng GCKeyboard khi bàn phím kết nối hoặc ngắt kết nối và với các đối tượng GCMouse khi các thiết bị trỏ kết nối hoặc ngắt kết nối.

Tất cả những gì bạn cần làm là thêm một người quan sát để tìm hiểu khi nào, ví dụ, một đối tượng GCController kết nối hoặc ngắt kết nối.

Sau đó, tùy thuộc vào bạn có nên thiết lập các trình xử lý thay đổi đó để thông báo cho bạn khi trạng thái đầu vào thay đổi hay thăm dò trạng thái của bộ điều khiển ở nơi khác.

Đây là mẫu tương tự mà bạn nên sử dụng cho dù đó là bộ điều khiển, bàn phím hay thiết bị trỏ.

Chúng tôi đã thấy rất nhiều trò chơi mới tuyệt vời hỗ trợ bộ điều khiển trò chơi và sự quan tâm lớn của khách hàng đối với các trò chơi hỗ trợ bộ điều khiển tốt.

Đó là lý do tại sao chúng tôi thực sự muốn giúp mọi người tìm các trò chơi hỗ trợ bộ điều khiển trò chơi.

Khi chúng tôi biết một trò chơi hỗ trợ bộ điều khiển trò chơi, chúng tôi gắn huy hiệu cho nó trong App Store với huy hiệu Hỗ trợ Bộ điều khiển.

Điều đó trông giống như một điều nhỏ nhặt, phải không?

Nhưng đó là thứ mà người chơi đang tìm kiếm nếu họ thích sử dụng bộ điều khiển của họ và tôi biết đó là huy hiệu mà tôi tìm kiếm.

Và chúng tôi luôn tìm cách quản lý và quảng bá các ứng dụng hoạt động tốt với bộ điều khiển trò chơi.

Có nhiều phần dành cho trò chơi khi chúng tôi khám phá các ứng dụng làm cho bộ điều khiển trò chơi thực sự tỏa sáng.

Tôi không thể đảm bảo rằng ứng dụng của bạn sẽ được chọn để quảng bá, nhưng khi bạn làm tốt công việc với bộ điều khiển, người chơi chắc chắn sẽ nhận thấy.

Vì vậy, đây là tất cả những gì bạn phải làm để đánh dấu sự hỗ trợ ứng dụng của mình.

Trong Xcode, chỉ cần thêm khả năng Bộ điều khiển trò chơi.

Điều này gắn thẻ Info.plist của ứng dụng của bạn với khả năng điều khiển trò chơi và đó là tất cả những gì bạn cần làm trước khi gửi nó đến App Store.

Khi trò chơi của bạn có khả năng này, chúng tôi cũng biết đưa nó vào phần tùy chỉnh cho mỗi ứng dụng của bảng tùy chọn Bộ điều khiển trò chơi.

Người chơi yêu thích khả năng điều chỉnh các điều khiển theo ý thích của họ và đó là một cách tuyệt vời để cải thiện khả năng tiếp cận trò chơi của bạn.

Bạn không cần phải làm bất cứ điều gì để tham gia ánh xạ lại đầu vào, nhưng khi bạn gắn thẻ trò chơi của mình, người chơi có thể tùy chỉnh nó một cách cụ thể.

Một tính năng tuyệt vời khác mà bạn nhận được miễn phí khi áp dụng khung điều khiển trò chơi là ảnh chụp màn hình và video clip.

Người chơi có thể chụp ảnh màn hình hoặc bắt đầu và dừng quay video clip chỉ bằng một cú chạm nhanh vào nút chia sẻ của bộ điều khiển.

Ở đây tôi đang chơi Fox2.

Tôi có thể chụp ảnh màn hình bằng cách nhấn đúp vào nút Chia sẻ.

Ảnh chụp màn hình hạ cánh ngay trong Camera Roll của tôi, đến Máy tính để bàn của tôi nếu tôi đang sử dụng macOS hoặc nó AirDrops vào điện thoại của tôi từ AppleTV.

Bây giờ đây là những gì sẽ xảy ra nếu tôi muốn bắt đầu và dừng ghi màn hình bằng cách nhấn và giữ nút Chia sẻ.

Một lát sau, tôi có một số tin tức về một loại bản ghi clip trò chơi mới mà chúng tôi đã thêm vào trong năm nay.

Lời khuyên cuối cùng của tôi về những gì mang lại sự hỗ trợ cho bộ điều khiển được đánh bóng trò chơi là việc sử dụng đúng các glyphs trong giao diện người dùng của bạn.

Hãy xem xét gợi ý này để sử dụng một nút để hiển thị hàng tồn kho của bạn.

Trên bộ điều khiển MFi hoặc Xbox, chúng ta nên hiển thị nút Y.

Trên bộ điều khiển PlayStation, thay vào đó chúng tôi muốn hiển thị một hình tam giác.

Nó có vẻ như là một điều nhỏ, nhưng wow, chúng tôi thực sự nghe phản hồi về tên nút sai hiển thị trong giao diện người dùng của bạn.

Bạn có thể xem xét một cách tiếp cận khác được hiển thị ở đây về tùy chọn đại diện cho các vị trí nút vị trí nếu nó phù hợp hơn với trò chơi của bạn.

Một số người chơi, đặc biệt là người chơi mới và trẻ, có thể nhanh chóng nhận ra vị trí bạn đang hiển thị cho họ và họ không cần phải liếc xuống để cố gắng đọc tên nút.

Chúng tôi đã làm cho nó cực kỳ dễ dàng để luôn hiển thị glyph phù hợp, ngay cả khi người chơi đã ánh xạ lại một nút trong giao diện người dùng ánh xạ lại hệ thống.

Vì vậy, ví dụ: nếu chúng tôi đã ánh xạ việc nhấn nút X đến hành động A, như được hiển thị ở đây trong tùy chọn ánh xạ lại và chúng tôi muốn yêu cầu người dùng nhấn hành động A để tiếp tục, chúng tôi thực sự muốn hiển thị glyph X khi nhà phát triển yêu cầu glyph được liên kết với hành động A.

Để làm điều này, chúng tôi chỉ cần truy vấn sfSymbolsName của nút A, sau đó sử dụng hình ảnh hệ thống UIImage được đặt tên để có được hình ảnh hiển thị.

Bây giờ chúng tôi sẽ hiển thị glyph chính xác dựa trên ánh xạ lại.

Vậy đó là bản tóm tắt rất nhanh của tôi.

Nếu bạn thấy mình cần thêm chi tiết, hãy xem những cuộc nói chuyện khác về bộ điều khiển trò chơi từ các hội nghị WWDC trước đây.

Vì vậy, trong vài năm qua, chúng tôi đã nói chuyện với rất nhiều nhà phát triển đưa trò chơi lên iOS và iPadOS.

Nhiều trò chơi được thiết kế ban đầu xoay quanh đầu vào bộ điều khiển trò chơi, vì vậy họ đang mong đợi hai thanh tương tự, có thể là d-pad hoặc bàn di chuột và đầu vào nút kỹ thuật số.

Những gì chúng tôi nghe được là một số bạn đã gặp khó khăn trong việc xây dựng đầu vào dựa trên cảm ứng nhất quán, tuyệt vời và trông tuyệt vời cho những trò chơi này.

Chúng tôi nghe nói rằng mã xử lý đầu vào cảm ứng của bạn khác với đường dẫn mã đầu vào bàn phím, chuột và bộ điều khiển trò chơi của bạn.

Để giải quyết vấn đề này, tôi muốn nói với bạn về bộ điều khiển ảo trên màn hình mới của chúng tôi tương thích với tất cả mã đầu vào bộ điều khiển trò chơi hiện có của bạn.

Những điều khiển trên màn hình mới này cho iPhone và iPad trông thật tuyệt vời, và chúng được điều chỉnh cẩn thận cho các vị trí cầm nắm trên các kích thước tay và cho khả năng phản hồi và cảm giác tuyệt vời.

Chúng dễ dàng thêm vào ứng dụng của bạn và hoạt động giống như một bộ điều khiển trò chơi.

Thay vì viết giao diện người dùng lớp phủ trên màn hình của riêng bạn và dịch đầu vào cảm ứng vào hệ thống đầu vào trò chơi của bạn, các điều khiển trên màn hình này xuất hiện trên mã của bạn giống như các đối tượng GCController khung bộ điều khiển trò chơi, vì vậy logic đầu vào của bạn có thể duy trì nhất quán hơn nhiều.

Chúng có thể tùy chỉnh với các biểu tượng của riêng bạn và chúng tích hợp với màu sắc và phong cách của bạn trong khi vẫn chia sẻ các yếu tố của ngôn ngữ thiết kế của iOS và iPadOS.

Họ điều chỉnh theo nhiều bố cục khác nhau tùy thuộc vào việc bạn chỉ muốn một nút, ba nút hay d-pad và nhiều nút.

Nguyên tắc cốt lõi của bộ điều khiển trên màn hình là các vùng bên trái và bên phải được cấu hình độc lập và bố cục được xác định dựa trên cấu hình.

Vị trí thủ công của các phần tử không được hỗ trợ.

Mỗi bên, một cấu hình có thể được xây dựng với không đến bốn nút và một trong hai ngón tay cái, d-pad hoặc bàn di chuột.

Có xúc giác trên các nút và gậy.

Và cuối cùng, các cấu hình được cố định tại thời điểm tạo.

Bạn có thể hiển thị và ẩn các phần tử, nhưng bạn không thể thêm hoặc xóa chúng mà không tạo bộ điều khiển ảo mới.

Vì vậy, hãy xem bạn làm gì để chọn bố cục và hiển thị bộ điều khiển trò chơi ảo trên màn hình của bạn.

Đầu tiên, bạn tạo một Cấu hình Bộ điều khiển GC xác định tất cả các nút và cần điều khiển có thể có mà bạn sẽ muốn sử dụng.

Sau đó, bạn tạo một bộ điều khiển ảo từ cấu hình đó.

Sau đó, bạn có thể tùy chọn thực hiện một số cấu hình trên các phần tử, chẳng hạn như thiết lập các hình dạng tùy chỉnh hoặc ẩn một số yếu tố.

Tiếp theo, bạn yêu cầu hệ thống kết nối bộ điều khiển và điều đó sẽ kích hoạt cùng một thông báo GCGameControllerDidConnect mà bạn đã quen xử lý và điều đó cung cấp cho bạn một đối tượng GCController.

Vì vậy, chúng ta hãy xem mã chúng ta sẽ viết để có được bố cục giống như những gì tôi đang hiển thị ở đây: ngón tay cái ở bên trái, ngón tay cái ở bên phải và nút A và B ở bên phải.

Nó cực kỳ dễ dàng.

Chúng tôi bắt đầu bằng cách tạo một đối tượng GCVirtualControllerConfiguration mới.

Sau đó chúng tôi thiết lập những yếu tố mà chúng tôi muốn.

Chúng tôi muốn hai ngón tay cái và hai nút ở phía bên tay phải, giống như trong bức ảnh trước của chúng tôi.

Tiếp theo chúng ta sẽ tạo đối tượng GCVirtualController bằng cách sử dụng cấu hình đó.

Và cuối cùng chúng tôi sẽ gọi kết nối; GCControllerDidConnectNotification tiêu chuẩn của chúng tôi sẽ đến.

Vậy là điều đó thật dễ dàng.

Nhưng làm thế nào để chúng ta thiết lập hình ảnh của riêng mình cho các nút này, giống như những gì tôi có trong bức tranh này?

Điều này được thực hiện dễ dàng bằng cách điều chỉnh cấu hình phần tử GCVirtualController.

Để tạo bố cục này, nơi tôi đã thay đổi nút A để chỉ ra cuộc tấn công quay và đặt nút B để chỉ bước nhảy, tôi chỉ cần điều chỉnh cấu hình của nút A để thêm Đường dẫn BezierPath.

Sau đó tôi đặt nút B để thiết lập BezierPath của nó.

Thật đơn giản để hiển thị và ẩn các phần tử nút khác nhau bằng cách sử dụng thuộc tính config.hidden.

Vì vậy, bạn thấy đấy, không mất nhiều thời gian để tùy chỉnh các điều khiển này theo ý thích của bạn.

Được rồi, vậy hãy quay trở lại thế giới không ảo của các bộ điều khiển vật lý.

Có rất nhiều bộ điều khiển tuyệt vời cho người chơi lựa chọn.

Có rất nhiều bộ điều khiển Made for iPhone, MFi, và chúng tôi luôn thấy những cái mới và cải tiến.

SteelSeries Nimbus+ độc lập, giờ đây với bộ kích hoạt ngón tay cái L3/R3 và nhiều nút hệ thống hơn thực sự tuyệt vời.

Tôi cũng là một fan hâm mộ lớn của Razer Kishi vừa vặn và Backbone One.

Những loại bộ điều khiển phù hợp với hình thức này là những mục yêu thích mới của tôi để giữ trong ba lô của tôi.

Tất nhiên, bên cạnh bộ điều khiển MFi, chúng tôi hỗ trợ bộ điều khiển Sony DualShock 4 và Xbox One trên tất cả các nền tảng của Apple và người chơi yêu thích Xbox Elite V2 và hỗ trợ bộ điều khiển Xbox Adaptive mà chúng tôi đã thêm vào năm ngoái.

Chúng tôi vừa thêm hỗ trợ trong iOS 14.5 và macOS 11.3 cho thế hệ bộ điều khiển bảng điều khiển mới nhất.

Bộ điều khiển Sony DualSense và bộ điều khiển Xbox Series X là những bộ điều khiển có cảm giác tuyệt vời và chúng chỉ hoạt động khi bạn đang sử dụng khung bộ điều khiển trò chơi.

Bộ điều khiển Xbox Series X có nút Chia sẻ chuyên dụng mới và DualSense có công nghệ kích hoạt thích ứng thú vị.

Hãy dành một chút thời gian để tìm hiểu các yếu tố kích hoạt thích ứng và cách bạn có thể đưa chúng vào sử dụng.

Các trình kích hoạt thích ứng DualSense thực sự cho phép bạn cải thiện việc đắm chìm trong trò chơi thông qua việc sử dụng phản hồi lực.

Bằng cách tự động áp dụng lực cản khác nhau cho cò súng dựa trên những gì người chơi đang làm, bạn có thể mô phỏng cảm giác kéo dây cung hoặc súng cao su bị căng và nhiều cảm giác khác.

Tôi hy vọng bạn có cơ hội cảm nhận được những yếu tố kích hoạt này tuyệt vời như thế nào.

Cách hỗ trợ các trình kích hoạt thích ứng trong khuôn khổ bộ điều khiển trò chơi thực sự đơn giản.

Đầu tiên, bạn cần xác minh rằng hồ sơ đầu vào vật lý trên bộ điều khiển của người chơi là DualSense.

Tiếp theo, bạn chỉ cần đặt hiệu ứng kích hoạt thích ứng mà bạn đang theo đuổi bằng một cuộc gọi phương thức.

Nếu bạn muốn tạo ra một hiệu ứng thực sự năng động, bạn có thể liên tục đọc trạng thái của các trình kích hoạt thích ứng và trò chơi và điều chỉnh hiệu ứng của bạn cho phù hợp.

Ví dụ, bạn có thể áp dụng sức đề kháng nhiều hơn khi cò súng được kéo mạnh hơn hoặc khi người chơi kéo một sợi dây vào lực căng lớn hơn.

Cuối cùng, giống như tôi nhắc nhở các con tôi tắt đèn khi chúng rời khỏi phòng, bạn cần đảm bảo rằng bạn tắt hiệu ứng kích hoạt thích ứng khi bạn hoàn thành.

Hãy nhảy vào một ví dụ mã nhanh để xem làm thế nào để đạt được điều này trong thực tế.

Vì vậy, giả sử chúng ta có một trò chơi mà người chơi có thể bắn súng cao su để hạ gục một số mục tiêu.

Người chơi có thể bắt đầu nhắm bằng cò súng bên trái và kéo lại súng cao su bằng cò súng bên phải.

Chúng tôi muốn thêm hiệu ứng kích hoạt thích ứng khi người chơi kéo lại súng cao su.

Đầu tiên, chúng tôi sẽ muốn đảm bảo rằng bộ điều khiển của người chơi là DualSense.

Vì trò chơi của chúng tôi là trò chơi một người chơi, chúng tôi chỉ có thể kiểm tra GCController.current để có được bộ điều khiển đang hoạt động.

Sau đó, chúng ta có thể lấy trình kích hoạt thích ứng bên phải của DualSense.

Trong ví dụ này, chúng tôi sẽ chỉ muốn tác dụng lực điện trở khi người chơi đang nhắm súng cao su của họ.

Chúng tôi sẽ tự động tính toán sức mạnh của điện trở được áp dụng của chúng tôi dựa trên khoảng cách bóp cò đã được kéo.

Nếu trình kích hoạt chưa được kéo lại, chúng tôi sẽ áp dụng hiệu ứng phản hồi cho các trình kích hoạt thích ứng.

Hiệu ứng phản hồi cung cấp sức đề kháng liên tục cho ngón tay của bạn khi bạn bóp cò.

Bây giờ, nếu không, nếu cò súng đã được kéo ngược lại, chúng tôi sẽ áp dụng hiệu ứng rung với tần số thấp.

Hiệu ứng này khiến các yếu tố kích hoạt rung động, mô phỏng cảm giác vật lộn để giữ cho súng cao su đó bị kéo lại và căng thẳng.

Cuối cùng, một khi người chơi bắn súng cao su của họ, chúng tôi muốn tắt kích hoạt thích ứng.

Chủ đề cuối cùng của cuộc trò chuyện hôm nay là về việc nắm bắt phương tiện thông qua các nút Chia sẻ của bộ điều khiển trò chơi.

Năm ngoái, chúng tôi đã giới thiệu một số cử chỉ chụp phương tiện trên nút Chia sẻ được chỉ định của bộ điều khiển.

Nút Chia sẻ thường được ánh xạ đến nút hệ thống trên cùng bên trái trên bộ điều khiển, nhưng một số bộ điều khiển như Xbox Series X có nút có nhãn Chia sẻ ở nơi khác.

Như tôi đã chỉ cho bạn trước đó, các cử chỉ hệ thống để chụp phương tiện là nhấn đúp để chụp ảnh màn hình Camera Roll của bạn và nhấn và nhấn và giữ bản ghi ReplayKit của bạn.

Năm nay, chúng tôi sẽ bổ sung một kiểu chụp phương tiện truyền thông mới cực kỳ thú vị, những điểm nổi bật 15 giây.

Vì vậy, bây giờ thay vì phải nhớ bắt đầu và dừng ghi âm của bạn, người chơi chỉ có thể bật bộ đệm nền tự động, điều này sẽ cho phép họ lưu 15 giây cuối cùng của trò chơi bất cứ khi nào họ nhấn và giữ.

Các clip ReplayKit là một cách tuyệt vời để cho phép các game thủ ghi lại một trận chiến trùm tuyệt vời, một chiêu thức kết hợp tuyệt vời hoặc một thất bại hoành tráng.

Để chọn giữa hình thức tự động bắt đầu và dừng bản ghi dài hơn hoặc bắt đầu bản ghi nền mà sau đó bạn có thể lưu các điểm nổi bật 15 giây, chỉ cần chuyển đổi cài đặt toàn cầu hoặc mỗi ứng dụng trong bảng tùy chọn Bộ điều khiển trò chơi.

Nếu bạn muốn kích hoạt các điểm nổi bật của riêng mình cho các điểm quan trọng trong trò chơi của mình, có một API cho điều đó.

Điều đó cũng sẽ kích hoạt những ảnh chụp nhanh 15 giây đó.

Chà. Được rồi.

Vì vậy, điều đó kết thúc tin tức đầu vào trò chơi của chúng tôi cho năm nay.

Trước khi bạn đi, vui lòng nhớ gắn thẻ ứng dụng của bạn với sự hỗ trợ của bộ điều khiển trò chơi để có được tùy chỉnh cho mỗi ứng dụng và để App Store có thể phân loại ứng dụng của bạn đúng cách.

Chúng tôi thực sự mong muốn được xem cách bạn sử dụng bộ điều khiển trò chơi, bàn phím và đầu vào chuột trong các trò chơi của mình.

Nếu bạn đã sẵn sàng xem thêm các bài thuyết trình về các tính năng cho các nhà phát triển trò chơi và cho các game thủ, hãy xem "Khám phá các clip với ReplayKit" và "Có gì mới trong Trung tâm trò chơi".

Cảm ơn rất nhiều vì đã xem.

Chúng tôi hy vọng sẽ sớm gặp lại bạn.

Hiện tại, chúng tôi rất mong được gặp bạn trực tuyến và giúp trả lời các câu hỏi của bạn.

[Nhạc lạc quan].