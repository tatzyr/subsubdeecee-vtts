10079

Xin chào, tên tôi là Bharath, và tôi đến từ nhóm Core Audio của Apple.

Và hôm nay, và tôi muốn nói chuyện với bạn về âm thanh nhận thức về hình học với PHASE.

Chúng tôi sẽ nói về lý do tại sao bạn muốn sử dụng khung PHASE mới.

Chúng tôi sẽ giới thiệu cho bạn một số tính năng mà khuôn khổ cung cấp.

Sau đó, tôi sẽ bàn giao nó cho đồng nghiệp của tôi, David Thall, để đưa bạn qua các khái niệm theo chiều sâu và các trường hợp sử dụng mẫu với API này.

Hãy bắt đầu.

Âm thanh là một khía cạnh quan trọng của bất kỳ trải nghiệm chơi game nào.

Âm thanh không gian trên tai nghe đưa lối chơi tổng thể lên một tầm cao mới và khiến bạn cảm thấy tham gia nhiều hơn.

Trong các trò chơi ngày nay, các hệ thống con khác nhau của công cụ như vật lý, hoạt hình, hiệu ứng hình ảnh, v.v., tất cả đều giao tiếp với nhau và di chuyển luồng trò chơi hoặc cốt truyện về phía trước dựa trên hành động của người chơi.

Tuy nhiên, hệ thống con âm thanh thường được quản lý và điều khiển riêng biệt với phần còn lại.

Đôi khi chúng cũng được tạo ra thông qua phần mềm trung gian không phải lúc nào cũng nhận thức được mô phỏng.

Nội dung âm thanh được hậu kỳ sản xuất, nướng sẵn, điều chỉnh bằng tay để kể một câu chuyện âm thanh phù hợp với hình ảnh trò chơi.

Khi hình ảnh phát triển, hệ thống âm thanh, thiết kế âm thanh và các tài sản liên quan cần được tái tạo để giữ cho trải nghiệm âm thanh gắn kết trên nhiều nền tảng.

Quá trình phát triển lặp đi lặp lại này cần được tính đến trong quá trình phát triển trò chơi.

Điều này thường dẫn đến trải nghiệm âm thanh làm chậm khía cạnh hình ảnh của trò chơi.

Để cung cấp trải nghiệm âm thanh trò chơi tốt hơn, chúng tôi muốn đưa hệ thống âm thanh đến gần hơn với các hệ thống con khác.

Chúng tôi cũng muốn giúp bạn viết các ứng dụng có thể cung cấp trải nghiệm âm thanh không gian nhất quán trên tất cả các thiết bị được hỗ trợ này dễ dàng hơn.

Bây giờ hãy để chúng tôi đưa bạn qua khung âm thanh mới PHASE và các tính năng của nó.

PHASE là một khuôn khổ mới cho phép bạn cung cấp thông tin hình học cho công cụ âm thanh, giúp bạn xây dựng hệ thống phát lại âm thanh theo hướng sự kiện, thân thiện với thiết kế âm thanh, cho phép bạn viết các ứng dụng có thể tự động cung cấp trải nghiệm âm thanh không gian nhất quán trên tất cả các thiết bị được hỗ trợ và có thể được tích hợp

Trước khi chúng ta bắt đầu tìm hiểu thêm về PHASE, chúng ta hãy xem lại quy trình làm việc âm thanh trò chơi thường được sử dụng.

Đây là một cảnh ngoài trời ví dụ với một người nghe, một nguồn âm thanh, một con lạch chảy và một occluder, một nhà kho.

Occluders là các đối tượng trong cảnh có thể làm giảm âm thanh giữa nguồn và người nghe.

Thông thường, bạn sẽ đặt nhiều nguồn điểm dọc theo một khu vực.

Khi người nghe di chuyển, bạn phải sử dụng các kỹ thuật khác nhau như dò tia để xác định tỷ lệ lọc và trộn thích hợp giữa các nguồn điểm và trộn thủ công giữa chúng để mang lại trải nghiệm âm thanh tốt.

Trong quá trình phát triển trò chơi tự nhiên, nếu các cảnh trực quan thay đổi, ví dụ, chuồng trại trong cảnh ví dụ, bạn phải cập nhật và điều chỉnh thủ công trải nghiệm âm thanh để phù hợp với sự thay đổi cảnh hình ảnh.

Hãy tưởng tượng bạn có thể xây dựng các ứng dụng trong đó nguồn âm thanh không phải là điểm bạn cần quản lý và kết hợp dựa trên cảnh mà là âm thanh phát ra trên một khu vực hoặc âm lượng mà hệ thống âm thanh có thể tự động quản lý cho bạn.

PHASE làm chính xác điều đó.

Giới thiệu các nguồn thể tích.

Khung mới cung cấp API cho phép bạn chuyển các nguồn âm thanh dưới dạng hình dạng hình học cho công cụ âm thanh cơ bản.

Ngoài các nguồn âm thanh thể tích, bạn cũng có thể chuyển các bộ tắc nghẽn trong cảnh dưới dạng hình dạng hình học.

Bạn cũng có thể chọn các thuộc tính vật liệu âm thanh từ một tập hợp các cài đặt trước và gắn chúng vào các bộ tách.

Khung PHASE cũng cho phép bạn thiết lập sự lan truyền trung bình và định hướng nguồn cho các nguồn điểm theo yêu cầu của ứng dụng của bạn.

Chúng tôi đang xem một cảnh ngoài trời làm ví dụ ở đây.

Tuy nhiên, nếu ứng dụng của bạn có cảnh trong nhà, bạn có thể chọn phản xạ sớm và thuộc tính vang muộn từ thư viện các cài đặt trước.

Một khi bạn cho khuôn khổ biết các nguồn âm thanh, occluders và người nghe khác nhau, PHASE sẽ giúp nâng vật nặng và mô hình hóa các hiệu ứng tắc nghẽn và lan truyền của các nguồn âm thanh khác nhau trong cảnh cho bạn.

Bây giờ hệ thống âm thanh của ứng dụng của bạn đã nhận thức được hình học, nó có thể thích ứng với sự thay đổi cảnh hình ảnh nhanh hơn nhiều khi quá trình phát triển trò chơi phát triển.

Ngoài nhận thức về hình học, PHASE còn cung cấp một hệ thống phát lại tương tác dựa trên sự kiện.

Sự kiện âm thanh là các đơn vị cơ bản để mô tả các sự kiện phát lại âm thanh trong GIAI ĐOẠN.

Họ gói gọn việc lựa chọn, pha trộn và phát lại các tài sản âm thanh.

Các sự kiện âm thanh có thể bao gồm từ các sự kiện đơn giản như phát lại một lần, lặp lại, đến các chuỗi phức tạp được tổ chức như một cây có thể pha trộn hoặc chuyển đổi giữa các cây con của các sự kiện phát lại.

Hãy để chúng tôi lấy một ví dụ đơn giản về việc chơi bước chân.

Ở đây chúng ta có một nút ngẫu nhiên sẽ tự động chọn giữa ba âm thanh khác nhau của một bước chân trên sỏi.

Chúng ta có thể có một sự kiện âm thanh khác cho tiếng sột soạt vải.

Cả hai cây sự kiện có thể được ghép vào một cây khác, "gần" trong ví dụ này, để phát lại sự pha trộn giữa tiếng sột soạt vải và tiếng bước chân.

Chúng ta có thể có một cái cây khác, "xa" trong ví dụ này, để chơi một tập hợp âm thanh khác khi nhân vật ở xa.

Sự kết hợp của các cây gần và xa giờ đây có thể được kiểm soát bởi khoảng cách dựa trên lối chơi.

Ví dụ, bạn có thể thêm nhiều cây sự kiện hơn như bước chân trên tuyết hoặc cỏ và xây dựng một chuỗi các sự kiện phát lại phức tạp có thể được kích hoạt bởi sự tương tác của người dùng hoặc bởi các hệ thống con như vật lý và hoạt hình.

Với PHASE, âm thanh có thể được phát theo cấu hình kênh đơn giản hoặc trong không gian 3D với hướng và vị trí, hoặc dưới dạng giường xung quanh nơi âm thanh có hướng nhưng không có vị trí.

Công cụ cơ bản được xây dựng dựa trên khả năng kết xuất âm thanh không gian của chúng tôi đã có sẵn trên các thiết bị iOS, macOS được hỗ trợ và cả dòng tai nghe Air Pods.

Điều này cho phép bạn tự động xây dựng các ứng dụng cung cấp trải nghiệm âm thanh không gian nhất quán trên tất cả các thiết bị được hỗ trợ.

Tiếp theo, tôi muốn mời David Thall đi sâu hơn vào PHASE và nói nhiều hơn về các khái niệm và API cho một số trường hợp sử dụng ví dụ.

Xin chào mọi người, tên tôi là David Thall, và tôi là Kiến trúc sư hệ thống và Trưởng nhóm phát triển trên PHASE.

Hôm nay tôi sẽ hướng dẫn bạn qua PHASE API.

Trong phần này, tôi sẽ giới thiệu cho bạn các khái niệm chung.

Sau đó, tôi sẽ xem xét một số trường hợp sử dụng mẫu để giúp bạn bắt đầu.

PHASE API có thể được tách thành ba khái niệm chính.

Động cơ quản lý tài sản.

Các nút điều khiển phát lại.

Và máy trộn kiểm soát không gian hóa.

Động cơ PHASE có thể được chia thành ba phần chính.

Sổ đăng ký tài sản, biểu đồ cảnh và trạng thái kết xuất.

Trong suốt vòng đời động cơ, bạn sẽ đăng ký và hủy đăng ký tài sản với động cơ.

Ngày nay, PHASE hỗ trợ đăng ký tài sản âm thanh và tài sản sự kiện âm thanh.

Tài sản âm thanh có thể được tải trực tiếp từ tệp âm thanh hoặc được đóng gói và nhúng dưới dạng dữ liệu âm thanh thô trong tài sản của riêng bạn và được tải trực tiếp vào công cụ.

Tài sản sự kiện âm thanh là một tập hợp của một hoặc nhiều nút phân cấp điều khiển phát lại âm thanh và bộ trộn hạ lưu điều khiển không gian hóa.

Biểu đồ cảnh là một hệ thống phân cấp của các đối tượng tham gia vào mô phỏng.

Điều này bao gồm người nghe, nguồn và người bao gồm.

Người nghe là một đối tượng đại diện cho vị trí trong không gian mà từ đó bạn nghe thấy mô phỏng.

Nguồn là một đối tượng đại diện cho nơi âm thanh bắt nguồn.

Như Bharath đã đề cập trước đó, PHASE hỗ trợ cả nguồn điểm và nguồn thể tích.

Bộ tắc nghẽn là một đối tượng đại diện cho hình học trong mô phỏng ảnh hưởng đến việc truyền âm thanh khi nó di chuyển qua môi trường.

Occluders cũng được chỉ định các vật liệu ảnh hưởng đến cách chúng hấp thụ và truyền âm thanh.

PHASE đi kèm với một thư viện các cài đặt trước vật liệu có thể được gán cho occluders để mô phỏng mọi thứ từ hộp các tông đến cửa sổ kính đến tường gạch.

Khi bạn thêm các đối tượng vào cảnh của mình, bạn sẽ sắp xếp chúng thành một hệ thống phân cấp và gắn chúng vào đối tượng gốc của công cụ, trực tiếp hoặc gián tiếp.

Điều này sẽ đảm bảo họ tham gia vào mô phỏng từ khung này sang khung khác.

Trạng thái kết xuất quản lý việc phát các sự kiện âm thanh và IO âm thanh.

Khi bạn lần đầu tiên tạo công cụ, IO âm thanh sẽ bị vô hiệu hóa.

Điều này cho phép bạn đăng ký tài sản của mình, xây dựng biểu đồ cảnh, xây dựng các sự kiện âm thanh và thực hiện các hoạt động động cơ khác, tất cả mà không cần phải chạy IO âm thanh.

Khi bạn đã sẵn sàng phát lại các sự kiện âm thanh, bạn có thể khởi động động cơ, động cơ này sẽ khởi động nội bộ IO âm thanh.

Tương tự như vậy, khi bạn phát lại xong các sự kiện âm thanh, bạn có thể dừng động cơ.

Điều này sẽ dừng IO âm thanh và dừng mọi sự kiện âm thanh phát.

Các nút trong PHASE kiểm soát phát lại nội dung âm thanh.

Các nút là một tập hợp phân cấp các đối tượng tạo ra hoặc kiểm soát phát lại âm thanh.

Các nút tạo ra âm thanh.

Chúng luôn là các nút lá trong một hệ thống phân cấp nút.

Các nút điều khiển thiết lập logic cho cách các máy phát điện được chọn, trộn lẫn và tham số hóa trước khi không gian hóa.

Các nút điều khiển luôn là các nút mẹ và có thể được tổ chức thành các hệ thống phân cấp cho các kịch bản thiết kế âm thanh phức tạp.

Nút lấy mẫu là một loại nút tạo.

Các bộ lấy mẫu phát lại các tài sản âm thanh đã đăng ký.

Sau khi được xây dựng, bạn có thể đặt một số thuộc tính cơ bản trên nút lấy mẫu để phát lại chính xác.

Chế độ phát lại xác định cách phát tệp âm thanh.

Nếu bạn đặt chế độ phát lại thành OneShot, tệp âm thanh sẽ phát một lần và tự động dừng lại.

Điều này có thể được sử dụng trong các tình huống "lửa và quên", chẳng hạn như kích hoạt hiệu ứng âm thanh.

Nếu bạn đặt chế độ phát lại thành lặp lại, tệp âm thanh sẽ phát vô thời hạn, cho đến khi bạn dừng bộ lấy mẫu một cách rõ ràng.

Tùy chọn loại bỏ cho PHASE biết phải làm gì khi âm thanh không nghe thấy được.

Nếu bạn đặt tùy chọn tiêu hủy để kết thúc, âm thanh sẽ tự động dừng lại khi nó không nghe thấy được.

Nếu bạn đặt tùy chọn tiêu hủy thành chế độ ngủ, âm thanh sẽ ngừng hiển thị khi nó không nghe thấy và bắt đầu hiển thị lại khi nó có thể nghe được.

Điều này làm cho nó để bạn không phải khởi động và dừng âm thanh theo cách thủ công khi chúng bị động cơ loại bỏ.

Mức hiệu chuẩn đặt mức âm thanh trong thế giới thực tính bằng decibel SPL.

PHASE cũng hỗ trợ bốn loại nút điều khiển.

Chúng bao gồm các nút ngẫu nhiên, chuyển đổi, pha trộn và vùng chứa.

Nút ngẫu nhiên chọn một trong những nút con của nó theo một lựa chọn ngẫu nhiên có trọng số.

Ví dụ, trong trường hợp này, bộ lấy mẫu bên trái có tỷ lệ cược 4: 1 so với bộ lấy mẫu bên phải được chọn vào lần tiếp theo khi sự kiện âm thanh được kích hoạt.

Nút chuyển đổi chuyển đổi giữa các nút con của nó dựa trên tên tham số.

Ví dụ, bạn có thể thay đổi công tắc địa hình từ "gỗ ọp ẹp" sang "sỏi mềm".

Lần tới khi sự kiện âm thanh được kích hoạt, nó sẽ chọn bộ lấy mẫu phù hợp với tên tham số.

Nút pha trộn pha trộn giữa các nút con của nó dựa trên một giá trị tham số.

Ví dụ, bạn có thể gán tham số độ ẩm cho nút pha trộn, nút này có thể pha trộn giữa bước chân lớn và tiếng giật gân yên tĩnh ở đầu khô và bước chân yên tĩnh và tiếng giật gân lớn ở đầu ướt.

Nút vùng chứa phát tất cả các nút con của nó cùng một lúc.

Ví dụ, bạn có thể có một bộ lấy mẫu phát lại bước chân và một bộ lấy mẫu khác phát lại âm thanh của quần áo, giống như âm thanh của một chiếc áo khoác Gor-Tex xù xì.

Mỗi khi vùng chứa được kích hoạt, cả hai bộ lấy mẫu sẽ phát lại cùng một lúc.

Máy trộn trong GIAI ĐOẠN kiểm soát không gian hóa nội dung âm thanh.

PHASE hiện đang hỗ trợ các bộ trộn kênh, môi trường xung quanh và không gian.

Bộ trộn kênh hiển thị âm thanh mà không có không gian hóa và các hiệu ứng môi trường.

Sử dụng bộ trộn kênh cho nội dung dựa trên gốc thông thường cần được hiển thị trực tiếp đến thiết bị đầu ra, chẳng hạn như nhạc nổi hoặc đối thoại tường thuật kênh trung tâm.

Máy trộn môi trường xung quanh hiển thị âm thanh với sự bên ngoài nhưng không có mô hình hóa khoảng cách hoặc hiệu ứng môi trường.

Khi người nghe xoay đầu, âm thanh sẽ tiếp tục đến từ cùng một vị trí tương đối trong không gian.

Sử dụng máy trộn môi trường xung quanh cho nội dung đa kênh không được mô phỏng trong môi trường nhưng vẫn có vẻ như nó đến từ một nơi nào đó ngoài không gian, ví dụ, nền tảng của những con dế hót líu lo trong một khu rừng rộng lớn.

Máy trộn không gian thực hiện không gian hóa đầy đủ.

Khi nguồn âm thanh di chuyển so với người nghe, bạn sẽ nghe thấy những thay đổi về vị trí nhận thức, mức độ và đáp ứng tần số dựa trên các thuật toán xoay, mô hình hóa khoảng cách và mô hình hóa định hướng.

Thêm vào đó, các tác động môi trường nhận thức về hình học được áp dụng cho đường dẫn giữa nguồn và người nghe.

Nếu bạn đang đeo tai nghe, bạn cũng sẽ nhận được sự bên ngoài thông qua việc áp dụng các bộ lọc hai tai.

Sử dụng máy trộn không gian cho âm thanh nên tham gia vào mô phỏng môi trường đầy đủ.

Máy trộn không gian hỗ trợ hai thuật toán mô hình hóa khoảng cách duy nhất.

Bạn có thể thiết lập tổn thất lan truyền hình học tiêu chuẩn cho sự suy giảm tự nhiên trên khoảng cách.

Bạn cũng có thể tăng hoặc giảm hiệu ứng theo ý thích của mình.

Ví dụ, việc giảm giá trị có thể hữu ích nếu bạn muốn bùng nổ mic một cuộc trò chuyện từ xa.

Ở đầu kia của quang phổ, bạn có thể thêm các đoạn suy giảm cong từng phần đầy đủ theo khoảng cách.

Ví dụ, bạn có thể xây dựng một tập hợp các phân đoạn với độ suy giảm khoảng cách tự nhiên ở đầu và cuối phạm vi, nhưng giảm độ suy giảm ở giữa để giữ cho cuộc đối thoại quan trọng có thể nghe được ở khoảng cách tăng lên.

Đối với các nguồn điểm, bộ trộn không gian hỗ trợ hai thuật toán mô hình hóa định hướng khác nhau.

Bạn có thể thêm mô hình định hướng cardioid vào hỗn hợp không gian của mình.

Sử dụng một số sửa đổi đơn giản, bạn có thể mô hình hóa loa người với mô hình định hướng cardioid hoặc âm thanh của nhạc cụ dây âm thanh với mô hình siêu tim.

Bạn cũng có thể thêm mô hình định hướng hình nón.

Chế độ cổ điển này cho phép bạn giới hạn khả năng lọc định hướng trong một phạm vi quay cụ thể.

Máy trộn không gian cũng hỗ trợ các hiệu ứng môi trường nhận thức hình học dựa trên đường ống không gian.

Đường ống không gian chọn các hiệu ứng môi trường để bật hoặc tắt, cũng như các cấp độ gửi đến từng cấp độ.

PHASE hiện đang hỗ trợ truyền đường trực tiếp, phản xạ sớm và hồi âm muộn.

Truyền đường dẫn trực tiếp hiển thị các đường dẫn trực tiếp và bị che khuất giữa nguồn và người nghe.

Lưu ý rằng với âm thanh bị tắc, một số năng lượng được vật liệu hấp thụ, trong khi năng lượng khác được truyền sang phía bên kia của vật thể.

Phản xạ ban đầu cung cấp cả sự điều chỉnh cường độ và màu sắc cho đường đi trực tiếp.

Chúng thường được xây dựng từ sự phản chiếu gương trên tường và sàn nhà.

Trong không gian rộng lớn hơn, chúng cũng thêm tiếng vang đáng chú ý vào trải nghiệm.

Hồi âm muộn cung cấp âm thanh của môi trường.

Đó là sự tích tụ dày đặc của năng lượng tán xạ khuếch tán kết hợp lại thành biểu diễn âm thanh cuối cùng của không gian.

Ngoài việc cung cấp các tín hiệu cho kích thước và hình dạng phòng, nó cũng chịu trách nhiệm mang lại cho bạn cảm giác bao bọc.

Bây giờ tôi đã xem xét các khái niệm đằng sau công cụ PHASE, các nút và bộ trộn, đã đến lúc kết hợp các khái niệm này cùng với một số trường hợp sử dụng mẫu.

Trong phần này, tôi sẽ hướng dẫn bạn phát tệp âm thanh, xây dựng trải nghiệm âm thanh không gian và xây dựng sự kiện âm thanh hành vi.

Ba lĩnh vực chính này sẽ cung cấp cho bạn cái nhìn tổng quan về các khả năng của PHASE, với phần giới thiệu nhẹ nhàng ở đầu và đi sâu vào các khả năng thú vị hơn ở giữa và cuối.

Để bắt đầu mọi thứ, tôi sẽ chỉ cho bạn cách phát tệp âm thanh.

Đầu tiên, hãy tạo một phiên bản động cơ PHASE.

Tiếp theo, tôi sẽ truy xuất URL vào tệp âm thanh và đăng ký nội dung âm thanh với PHASE.

Tôi sẽ đặt tên cho nó là "trống" để tôi có thể tham khảo nó sau.

Ở đây tôi sẽ tạo một công cụ và đăng ký một tài sản âm thanh trong mã.

Đầu tiên, tôi sẽ tạo một phiên bản động cơ PHASE ở chế độ cập nhật tự động.

Đây là chế độ ưa thích để thiết lập và chạy mọi thứ, vì vậy tôi đang sử dụng nó ở đây để trình diễn phát lại đơn giản.

Lưu ý rằng khi một trò chơi yêu cầu đồng bộ hóa chính xác hơn với bản cập nhật khung, chế độ thủ công là cách để đi.

Kiểm tra tài liệu để biết thêm chi tiết.

Tiếp theo, tôi sẽ truy xuất URL đến tệp âm thanh được lưu trữ trong gói ứng dụng.

Đây là tệp WAV đơn sắc 24bit, 48kHz với mẫu vòng lặp trống đã được chuẩn bị sẵn.

Khi đăng ký nội dung âm thanh với động cơ, tôi sẽ cung cấp một số đối số bổ sung.

Tôi sẽ đặt cho tài sản âm thanh một cái tên duy nhất để tôi có thể tham khảo nó sau.

Tôi sẽ chỉ định rằng dữ liệu âm thanh trong nội dung âm thanh nên được tải sẵn vào bộ nhớ thường trú, trái ngược với việc truyền nó vào bộ nhớ trong thời gian thực.

Điều này sẽ ổn vì vòng lặp trống khá ngắn và tôi có thể muốn phát lại nó nhiều lần liên tiếp trong thời gian ngắn.

Tôi cũng đang chọn bình thường hóa nội dung âm thanh để hiệu chỉnh độ lớn trên thiết bị đầu ra.

Nói chung, nên bình thường hóa đầu vào.

Điều này sẽ giúp việc trộn nội dung dễ dàng hơn khi chúng tôi gán nó cho bộ lấy mẫu và đặt mức đầu ra mục tiêu của nó.

Bây giờ tôi đã đăng ký một tài sản âm thanh với công cụ, tôi sẽ xây dựng một tài sản sự kiện âm thanh.

Đầu tiên tôi sẽ tạo một bộ trộn kênh từ bố cục kênh.

Sau đó tôi sẽ tạo một nút lấy mẫu.

Nút lấy mẫu lấy tên của tài sản âm thanh đã đăng ký và tham chiếu đến bộ trộn kênh hạ lưu.

Tiếp theo tôi sẽ đặt một số thuộc tính cơ bản trên nút lấy mẫu để nó phát lại chính xác.

Chế độ phát lại sẽ đặt xem bộ lấy mẫu có lặp lại tệp âm thanh hay không và mức hiệu chuẩn sẽ đặt độ lớn cảm nhận được của bộ lấy mẫu trong hỗn hợp.

Bây giờ tôi đã kết nối đầu ra của nút lấy mẫu với đầu vào của bộ trộn kênh và đặt một số thông số cơ bản, đã đến lúc đăng ký nội dung sự kiện âm thanh với công cụ.

Trong trường hợp này, tôi sẽ đăng ký nội dung sự kiện âm thanh với tên drumEvent, mà tôi sẽ sử dụng để tham khảo nó sau.

Ở đây tôi sẽ đăng ký một tài sản sự kiện âm thanh trong mã.

Tôi sẽ tạo một channelLayout từ một ChannelLayoutTag mono.

Sau đó tôi sẽ khởi tạo bộ trộn kênh với bố cục kênh đơn sắc.

Tiếp theo tôi sẽ tạo nút lấy mẫu và chuyển tên trống, đề cập đến tài sản trống đơn sắc mà tôi đã đăng ký trước đó với động cơ.

Nút lấy mẫu sẽ được chuyển đến bộ trộn kênh hạ lưu.

Tôi sẽ đặt chế độ phát lại thành vòng lặp.

Điều này sẽ đảm bảo âm thanh tiếp tục phát lại cho đến khi tôi dừng nó một cách rõ ràng khỏi mã.

Tôi sẽ đặt CalibrationMode thành relativeSpl, và mức thành 0 decibel.

Điều này sẽ đảm bảo mức độ nghe thoải mái cho trải nghiệm. Cuối cùng tôi sẽ đăng ký soundEventAsset với công cụ, chuyển tên drumEvent để tôi có thể tham khảo nó sau khi tôi bắt đầu tạo các sự kiện âm thanh để phát lại.

Khi nội dung sự kiện âm thanh được đăng ký, tôi có thể tạo một phiên bản và bắt đầu phát lại.

Điều đầu tiên tôi sẽ làm là tạo một sự kiện âm thanh từ nội dung sự kiện âm thanh đã đăng ký có tên drumEvent.

Bây giờ tôi có một sự kiện âm thanh, tôi sẽ tiếp tục và khởi động động cơ.

Điều này sẽ khởi động IO âm thanh để tôi có thể nghe âm thanh cung cấp cho thiết bị đầu ra.

Cuối cùng tôi sẽ bắt đầu sự kiện âm thanh.

Tại thời điểm này, nội dung âm thanh đã tải sẽ được phát qua bộ lấy mẫu, được định tuyến đến bộ trộn kênh, ánh xạ lại đến định dạng đầu ra hiện tại và phát lại thông qua thiết bị đầu ra.

Ở đây tôi sẽ bắt đầu một soundEvent trong mã.

Tài sản sự kiện âm thanh được xây dựng từ tên của tài sản âm thanh đã đăng ký.

Đây, tôi đang vượt qua sự kiện trống.

Tôi sẽ tiếp tục và khởi động động cơ, nó sẽ khởi động IO âm thanh và bắt đầu sự kiện âm thanh.

Khi tôi phát lại xong sự kiện âm thanh, tôi có thể dọn dẹp động cơ.

Đầu tiên tôi sẽ dừng sự kiện âm thanh.

Sau đó tôi sẽ dừng động cơ.

Điều này sẽ dừng IO âm thanh và dừng mọi sự kiện âm thanh phát.

Tiếp theo tôi sẽ hủy đăng ký nội dung sự kiện âm thanh có tên drumEvent và hủy đăng ký nội dung âm thanh có tên trống.

Cuối cùng tôi sẽ phá hủy động cơ.

Ở đây tôi sẽ dọn dẹp bằng mã.

Đầu tiên tôi sẽ dừng sự kiện âm thanh sau khi tôi nghe xong vòng lặp trống.

Sau đó tôi sẽ dừng động cơ, nó sẽ dừng âm thanh bên trong IO.

Tiếp theo tôi sẽ hủy đăng ký nội dung sự kiện âm thanh có tên drumEvent và hủy đăng ký nội dung âm thanh có tên trống.

Cuối cùng tôi sẽ phá hủy động cơ.

Bây giờ tôi đã đề cập đến những điều cơ bản, tôi sẽ chỉ cho bạn cách xây dựng trải nghiệm âm thanh không gian đơn giản trong GIAI ĐOẠN.

Chúng tôi sẽ đề cập đến các chủ đề bao gồm bộ trộn không gian, nguồn âm thanh thể tích và bộ tách rời.

Điều đầu tiên tôi sẽ làm là đăng ký một tài sản sự kiện âm thanh với công cụ.

Đối với ví dụ này, tôi sẽ bắt đầu với một công cụ đã đăng ký sự kiện âm thanh trống.

Từ đây, tôi sẽ nâng cấp hỗn hợp để chuyển từ phát lại dựa trên kênh đơn giản sang không gian hóa đầy đủ.

Điều đầu tiên tôi sẽ làm là xây dựng một đường ống không gian để áp dụng có chọn lọc các hiệu ứng môi trường khác nhau cho nguồn âm thanh của tôi.

Sau đó tôi sẽ tạo một bộ trộn không gian từ đường ống không gian.

Sau khi được xây dựng, tôi sẽ đặt một số thuộc tính cơ bản trên bộ trộn không gian để nó phát lại chính xác.

Trong ví dụ này, tôi sẽ đặt mô hình khoảng cách để kiểm soát sự suy giảm mức trên khoảng cách.

Tôi cũng sẽ đặt mô hình định hướng để kiểm soát sự suy giảm mức dựa trên góc giữa nguồn so với người nghe.

Sau đó tôi sẽ tạo một nút lấy mẫu.

Nút lấy mẫu lấy tên của tài sản âm thanh đã đăng ký và tham chiếu đến bộ trộn không gian hạ lưu.

Tiếp theo tôi sẽ đặt một số thuộc tính cơ bản trên nút lấy mẫu để nó phát lại chính xác.

Ngoài chế độ phát lại và mức hiệu chuẩn, tôi cũng sẽ đặt tùy chọn tiêu hủy ở đây.

Điều này sẽ cho PHASE biết phải làm gì khi bộ lấy mẫu trở nên không nghe được.

Bây giờ tôi đã kết nối đầu ra của nút lấy mẫu của chúng tôi với đầu vào của bộ trộn không gian và đặt một số thông số cơ bản, đã đến lúc đăng ký nội dung sự kiện âm thanh với công cụ.

Tôi sẽ sử dụng cùng tên như trước đây.

Ở đây tôi sẽ tạo một nội dung sự kiện âm thanh trong mã.

Đầu tiên tôi sẽ tạo một spatialPipeline để hiển thị .directPathTransmission và .lateReverb. Tôi cũng sẽ tiếp tục và đặt .lateReverb .sendLevel để kiểm soát tỷ lệ trực tiếp trên âm vang và chọn cài đặt trước .mediumRoom cho mô phỏng hồi âm muộn.

Sau đó tôi sẽ tạo một bộ trộn không gian với spatialPipeline.

Tiếp theo tôi sẽ tạo một GeometricSpreadingDistanceModel có âm thanh tự nhiên và gán nó cho bộ trộn không gian.

Tôi sẽ đặt khoảng cách đến 10 mét.

Nếu nguồn vượt quá khoảng cách này, tôi muốn tự động loại bỏ nó khỏi hỗn hợp.

Và tôi sẽ điều chỉnh rolloffFactor một chút để không nhấn mạnh hiệu ứng suy giảm khoảng cách.

Sau đó, tôi sẽ tạo một nút lấy mẫu và chuyển cho nó tên "trống", đề cập đến tài sản âm thanh trống đơn sắc mà tôi đã đăng ký trước đó với động cơ.

Tôi sẽ đặt chế độ phát lại thành .looping.

Tôi sẽ đặt chế độ hiệu chuẩn thành .relativeSpl và mức thành +12 decibel để tăng mức đầu ra của bộ lấy mẫu.

Và tôi sẽ đặt cullOption để ngủ.

Cuối cùng, tôi sẽ đăng ký soundEventAsset với công cụ, chuyển tên drumEvent để tôi có thể tham khảo nó sau khi tôi bắt đầu tạo các sự kiện âm thanh.

Bây giờ tôi đã có một tài sản sự kiện âm thanh được đăng ký với công cụ, tôi cần tạo một cảnh để mô phỏng.

Điều này liên quan đến việc tạo ra một người nghe, nguồn và người loại trừ.

Trong ví dụ này, tôi sẽ đặt occluder giữa nguồn và người nghe.

Đầu tiên tôi sẽ tạo một người nghe.

Sau đó tôi sẽ thiết lập sự biến đổi của nó.

Khi tôi đã sẵn sàng để làm cho người nghe hoạt động trong biểu đồ cảnh, tôi sẽ đính kèm nó vào đối tượng gốc của động cơ hoặc một trong những đối tượng con của nó.

Ở đây tôi sẽ thiết lập trình nghe trong mã.

Đầu tiên tôi sẽ tạo một người nghe. Sau đó tôi sẽ thiết lập sự biến đổi của nó.

Trong ví dụ này, tôi sẽ đặt trình nghe về nguồn gốc mà không có vòng quay.

Cuối cùng tôi sẽ đính kèm trình nghe vào đối tượng gốc của động cơ.

Bây giờ hãy thiết lập một nguồn thể tích.

Đầu tiên tôi sẽ tạo ra một hình dạng nguồn từ một lưới.

Sau đó tôi sẽ tạo ra một nguồn từ hình dạng.

Điều này vốn đã xây dựng một nguồn thể tích.

Tiếp theo tôi sẽ thiết lập sự biến đổi của nó.

Và khi tôi đã sẵn sàng để làm cho nguồn hoạt động trong biểu đồ cảnh, tôi sẽ đính kèm nó vào đối tượng gốc của động cơ hoặc một trong những đối tượng con của nó.

Ở đây tôi sẽ thiết lập một nguồn thể tích trong mã.

Đầu tiên tôi sẽ tạo một lưới Icosahedron và chia tỷ lệ nó lên kích thước của một HomePod Mini.

Sau đó tôi sẽ tạo ra một hình dạng từ lưới.

Hình dạng này có thể được tái sử dụng để xây dựng nhiều trường hợp của một nguồn thể tích.

Ví dụ, tôi có thể đặt nhiều HomePod Minis trong mô phỏng có chung lưới.

Tiếp theo tôi sẽ tạo ra một nguồn thể tích từ hình dạng.

Lưu ý rằng tôi cũng có thể tạo một nguồn điểm đơn giản bằng cách sử dụng phiên bản của trình khởi tạo không có hình dạng làm đầu vào.

Sau đó tôi sẽ thiết lập sự biến đổi của nó.

Tôi sẽ dịch nguồn 2 mét trước mặt người nghe và xoay nó trở lại về phía người nghe để chúng đối diện nhau.

Cuối cùng tôi sẽ đính kèm nguồn vào đối tượng gốc của động cơ.

Bây giờ hãy thiết lập một occluder.

Đầu tiên tôi sẽ tạo ra một hình dạng từ lưới.

Sau đó tôi sẽ tạo ra một vật liệu bìa cứng và gán nó cho hình dạng.

Bây giờ hình dạng có một hình học và một vật liệu liên quan.

Tiếp theo tôi sẽ tạo ra một occluder từ hình dạng.

Sau đó tôi sẽ thiết lập sự biến đổi của nó.

Và một khi tôi đã sẵn sàng để làm cho occluder hoạt động trong biểu đồ cảnh, tôi sẽ gắn nó vào đối tượng gốc của động cơ hoặc một trong những đối tượng con của nó.

Ở đây tôi sẽ thiết lập occluder trong mã.

Đầu tiên tôi sẽ tạo một boxMesh và chia tỷ lệ kích thước của nó cho phù hợp.

Sau đó tôi sẽ tạo ra một hình dạng từ lưới.

Hình dạng này có thể được sử dụng lại để xây dựng nhiều trường hợp của một occluder.

Ví dụ, tôi có thể đặt nhiều hộp trong mô phỏng chia sẻ cùng một lưới.

Tiếp theo, tôi sẽ tạo một vật liệu từ một cài đặt trước hộp các tông và gán vật liệu cho hình dạng.

Tiếp theo tôi sẽ tạo ra một occluder từ hình dạng.

Sau đó tôi sẽ thiết lập sự biến đổi của nó.

Tôi sẽ dịch occluder 1 mét trước mặt người nghe và xoay nó trở lại về phía người nghe để họ đối diện nhau.

Điều này đặt occluder nằm giữa nguồn và người nghe.

Cuối cùng tôi sẽ gắn occluder vào đối tượng gốc của động cơ.

Tại thời điểm này, tôi có một cảnh với một người tắc nghẽn nằm giữa nguồn và người nghe.

Tiếp theo tôi sẽ tạo một sự kiện âm thanh từ nội dung sự kiện âm thanh đã đăng ký của chúng tôi và liên kết nó với nguồn và người nghe trong biểu đồ cảnh.

Khi tôi bắt đầu sự kiện âm thanh, tôi sẽ nghe thấy một vòng trống bị tắc phát từ một nguồn thể tích nhỏ ở phía đối diện của một hộp các tông.

Ở đây tôi sẽ bắt đầu sự kiện âm thanh trong mã.

Đầu tiên tôi sẽ liên kết nguồn và người nghe với bộ trộn không gian trong sự kiện âm thanh.

Sau đó, tôi sẽ tạo một soundEvent từ nội dung soundEvent đã đăng ký có tên drumEvent.

Phần còn lại vẫn giống như trước đây.

Đảm bảo rằng động cơ đang chạy, sau đó bắt đầu sự kiện âm thanh.

Bây giờ tôi đã đề cập đến âm thanh không gian, tôi sẽ chỉ cho bạn cách xây dựng một sự kiện âm thanh phức tạp.

Các sự kiện âm thanh có thể được tổ chức thành các hệ thống phân cấp hành vi cho thiết kế âm thanh tương tác.

Trong phần này, tôi sẽ hướng dẫn bạn qua các ví dụ liên tiếp được xây dựng dựa trên từng loại nút sự kiện âm thanh để tạo ra sự kiện âm thanh cuối cùng.

Ở đây chúng ta sẽ mô phỏng một diễn viên mặc áo khoác Gore-Tex ồn ào đi bộ trên các loại địa hình khác nhau với độ ẩm bề mặt thay đổi.

Đầu tiên tôi sẽ tạo một nút lấy mẫu phát lại một bước chân trên gỗ ọp ẹp.

Trong mã, tôi sẽ tạo một nút lấy mẫu với nội dung âm thanh đã đăng ký có tên "footstep_wood_clip_1." Đối với ví dụ này, nút này và tất cả các nút khác sẽ phát lại trên một bộ trộn kênh được xây dựng sẵn duy nhất.

Bây giờ tôi sẽ thêm một số ngẫu nhiên.

Tôi sẽ tạo một nút ngẫu nhiên với hai nút lấy mẫu con chơi bước chân hơi khác nhau trên các mẫu gỗ ọp ẹp.

Trong mã, tôi sẽ tạo hai nút lấy mẫu.

Đầu tiên sử dụng nội dung âm thanh đã đăng ký có tên "footstep_wood_clip_1 và thứ hai sử dụng nội dung âm thanh đã đăng ký có tên "footstep_wood_clip_2."

Sau đó, tôi sẽ tạo một nút ngẫu nhiên và thêm các nút lấy mẫu làm con.

Lưu ý rằng một hệ số trọng số được áp dụng cho mỗi nút con để kiểm soát khả năng đứa trẻ đó được chọn qua các lần lặp lại liên tiếp.

Trong trường hợp này, đứa con đầu lòng có gấp đôi cơ hội được chọn so với đứa con thứ hai.

Tiếp theo tôi sẽ thêm một công tắc địa hình.

Tôi sẽ tạo một nút chuyển đổi và hai nút ngẫu nhiên khi còn nhỏ.

Trong trường hợp này, nút ngẫu nhiên thứ hai phát lại những bước chân ngẫu nhiên trên sỏi trái ngược với những bước chân ngẫu nhiên trên gỗ.

Tôi sẽ sử dụng một tham số địa hình để điều khiển công tắc.

Trong mã, tôi sẽ tạo hai nút lấy mẫu.

Đầu tiên sử dụng nội dung âm thanh đã đăng ký có tên "footstep_gravel_clip_1" và thứ hai sử dụng nội dung âm thanh đã đăng ký có tên "footstep_gravel_clip_2."

Sau đó, tôi sẽ tạo một nút ngẫu nhiên và thêm các nút lấy mẫu làm nút con.

Tiếp theo tôi sẽ tạo một tham số địa hình.

Giá trị mặc định sẽ là "creaky_wood."

Sau đó, tôi sẽ tạo một nút chuyển đổi được điều khiển bởi tham số địa hình.

Tôi sẽ thêm hai đứa con, nút ngẫu nhiên bằng gỗ và nút ngẫu nhiên bằng sỏi.

Nếu tôi đặt tham số thành "creaky_wood", nó sẽ chọn nút ngẫu nhiên bằng gỗ.

Tương tự như vậy, nếu tôi đặt tham số thành "soft_gravel", nó sẽ chọn nút ngẫu nhiên sỏi.

Tiếp theo tôi sẽ thêm một hỗn hợp ẩm ướt.

Tôi sẽ tạo một nút pha trộn với một nút chuyển đổi địa hình và nút giật gân ngẫu nhiên khi còn nhỏ.

Nút giật gân ngẫu nhiên mới phát ra tiếng giật gân ngẫu nhiên khi diễn viên thực hiện các bước, trong khi công tắc địa hình xác định xem bàn chân của diễn viên đang đi trên gỗ ọp ẹp hay sỏi mềm.

Sự pha trộn giữa âm thanh bước chân khô và tiếng bắn tung tóe phụ thuộc vào thông số độ ẩm ướt, từ tiếng bước chân hoàn toàn khô và không có tiếng giật gân - đến tiếng bước chân hoàn toàn ướt - yên tĩnh và tiếng bắn tung tóe lớn.

Trong mã, tôi sẽ tạo hai nút lấy mẫu.

Đầu tiên sử dụng nội dung âm thanh đã đăng ký có tên "splash_clip_1" và thứ hai sử dụng nội dung âm thanh đã đăng ký có tên "splash_clip_2."

Sau đó, tôi sẽ tạo một nút ngẫu nhiên và thêm các nút lấy mẫu làm nút con.

Tiếp theo tôi sẽ tạo một tham số độ ẩm.

Phạm vi sẽ là 0 đến 1, và giá trị mặc định sẽ là 0,5.

Lưu ý rằng tôi có thể đặt tham số thành bất kỳ giá trị và phạm vi nào được hỗ trợ bởi trò chơi của tôi.

Sau đó, tôi sẽ tạo một nút pha trộn được kiểm soát bởi tham số độ ẩm.

Tôi sẽ thêm hai đứa trẻ, nút chuyển đổi địa hình và nút giật gân ngẫu nhiên.

Nếu tôi đặt tham số thành 0, tôi sẽ chỉ nghe thấy tiếng bước chân khô trên gỗ hoặc sỏi ọp ẹp, tùy thuộc vào địa hình.

Khi tôi tăng độ ẩm từ 0 lên 1, tôi sẽ tăng độ lớn của tiếng bắn tung tóe đi kèm với mỗi bước chân, mô phỏng địa hình ẩm ướt.

Cuối cùng tôi sẽ tạo một nút chứa với nút pha trộn độ ẩm và một nút quần áo ồn ào ngẫu nhiên khi còn nhỏ.

Nút quần áo ồn ào mới phát lại tiếng ồn ào của áo khoác Gore-Tex bất cứ khi nào diễn viên bước một bước vào việc thay đổi địa hình với độ ẩm thay đổi.

Với hệ thống phân cấp nút cuối cùng này, tôi có một đại diện đầy đủ về diễn viên đi bộ trong một cảnh.

Mỗi khi diễn viên bước một bước, tôi sẽ nghe thấy tiếng xù lông của chiếc áo khoác, cộng với tiếng bước chân trên gỗ ọp ẹp hoặc sỏi mềm, tùy thuộc vào thông số địa hình.

Thêm vào đó, tôi sẽ nghe thấy ít nhiều tiếng bắn tung tóe với mỗi bước chân, tùy thuộc vào thông số độ ẩm.

Trong mã, tôi sẽ tạo hai nút lấy mẫu.

Đầu tiên sử dụng nội dung âm thanh đã đăng ký có tên "gortex_clip_1" và thứ hai sử dụng nội dung âm thanh đã đăng ký có tên "gortex_clip_2."

Sau đó, tôi sẽ tạo một nút ngẫu nhiên và thêm các nút lấy mẫu làm nút con.

Cuối cùng tôi sẽ tạo một nút actor_container.

Tôi sẽ thêm hai nút con, nút wetness_blend và nút noisy_clothing_random.

Cùng nhau, chúng đại diện cho âm thanh hoàn chỉnh của diễn viên.

Trong bài đánh giá, chúng tôi đã học cách phát tệp âm thanh.

Sau đó, chúng tôi đã mở rộng kiến thức của mình bằng cách đi sâu vào việc xây dựng trải nghiệm âm thanh không gian đơn giản nhưng hiệu quả.

Ở đây chúng tôi đã tìm hiểu về người nghe, nguồn thể tích và người tắc nghẽn.

Cuối cùng, chúng tôi đã học về việc xây dựng các sự kiện âm thanh hành vi cho thiết kế âm thanh tương tác.

Ở đây chúng tôi đã học về cách ghép các nút ngẫu nhiên, chuyển đổi, trộn và vùng chứa lại với nhau để tạo thành các sự kiện âm thanh tương tác, phân cấp.

Kết hợp với nhau, bây giờ bạn nên có hiểu biết rộng rãi về hoạt động bên trong của PHASE và có thể đi sâu hơn vào các thành phần hệ thống cơ bản khi bạn sẵn sàng ổn định và xây dựng trải nghiệm âm thanh trò chơi nhận thức hình học tiếp theo của mình.

Cảm ơn bạn. Chúc WWDC21 tuyệt vời.

[Nhạc lạc quan].