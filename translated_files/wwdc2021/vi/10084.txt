10084

Xin chào, tên tôi là Arun, và tôi là một kỹ sư hệ thống trong nhóm Wireless.

Hôm nay, tôi sẽ đưa bạn vào một cuộc hành trình khám phá chìa khóa xe hơi dựa trên UWB.

Năm ngoái, chúng tôi đã ra mắt chìa khóa ô tô với khả năng sử dụng iPhone hoặc Apple Watch của bạn để mở khóa, khóa và khởi động ô tô của bạn, chia sẻ chìa khóa của bạn với gia đình và bạn bè, và thậm chí quản lý chúng từ xa.

Và bạn có thể làm tất cả những điều đó khi biết rằng hệ thống đã được thiết kế để an toàn và riêng tư.

Năm nay, chúng tôi rất vui mừng được mở rộng khả năng của chìa khóa xe hơi.

Trong phiên này, chúng ta sẽ xem xét các tính năng mới và cách tích hợp chúng.

Nếu bạn muốn tìm hiểu những điều cơ bản về chìa khóa xe hơi, bao gồm cung cấp, quản lý chìa khóa và NFC, hãy xem bài nói chuyện năm ngoái, "Giới thiệu chìa khóa xe hơi".

Một trong những tính năng chính mà chúng tôi đang kích hoạt trong năm nay là nhập cảnh thụ động.

Sử dụng công nghệ UWB, giờ đây bạn có thể khóa, mở khóa và khởi động ô tô của mình trong khi để iPhone trong túi hoặc túi hoặc Apple Watch trên cổ tay của bạn.

RKE, hoặc điều khiển truy cập không cần chìa khóa từ xa, cho phép bạn sử dụng iPhone hoặc Đồng hồ để khóa, mở khóa và thực hiện các hành động khác khi bạn ở trong phạm vi Bluetooth trên ô tô của mình.

Và ô tô giờ đây có thể cá nhân hóa cài đặt bằng cách xác định chìa khóa kỹ thuật số nào đang đi vào ô tô qua cửa nào.

Có những tính năng khác mà chúng tôi sẽ không thể đề cập trong phiên này, chẳng hạn như ghép nối thiết bị của bạn với tư cách là Car Key và Friend First Approach, nhưng trải nghiệm cho các tính năng này cũng đã được nâng cấp.

Bây giờ, chúng ta hãy xem xét các công nghệ cho phép các tính năng này.

Chip U1 với công nghệ UWB cho phép ô tô xác định vị trí chính xác của chìa khóa ô tô gần đó.

UWB cũng là cơ sở của một giao thức phạm vi an toàn để bảo vệ mạnh mẽ hơn chống lại các cuộc tấn công phát lại và chuyển tiếp.

Phần tử bảo mật là một đơn vị phần cứng được bảo vệ được tích hợp vào các thiết bị của Apple.

Ngoài việc lưu trữ chìa khóa xe hơi và xác thực thông tin đăng nhập, chúng tôi đã mở rộng việc sử dụng Phần tử bảo mật để lấy các khóa khác nhau UWB dành riêng cho phiên.

Bluetooth LE, hay BLE, được sử dụng làm kênh liên lạc giữa ô tô và thiết bị Apple, để trao đổi dữ liệu trong quá trình xác thực và quản lý các phiên trên phạm vi bảo mật.

BLE cũng được sử dụng làm điểm neo để khởi tạo lưới thời gian trên phạm vi an toàn.

Và cuối cùng, để đảm bảo một giải pháp chung với sự hỗ trợ đa nền tảng, Apple, cùng với các đối tác khác trong ngành, đã và đang nỗ lực hàng đầu để tạo ra một đặc điểm kỹ thuật tiêu chuẩn tại Car Connectivity Consortium.

Tại Apple, bảo mật và quyền riêng tư là một phần trong các giá trị cốt lõi của chúng tôi.

Giải pháp nhập thụ động UWB này được thiết kế với cả hai trong tâm trí.

Các khóa là duy nhất cho mỗi phiên và được bắt nguồn từ mỗi kết nối.

Một số khóa phiên này được sử dụng để mã hóa tin nhắn ở lớp liên kết, trong khi những khóa khác để đảm bảo rằng thiết bị của bạn không thể bị theo dõi bằng UWB hoặc BLE.

Chúng tôi sử dụng các số nhận dạng ngẫu nhiên, bắt nguồn từ các khóa phiên này.

Những số nhận dạng này sau đó được luân chuyển định kỳ.

Và quan trọng nhất, chúng tôi đã tăng cường bảo mật bản địa hóa dựa trên UWB bằng cách xây dựng một giao thức phân loại an toàn.

Giao thức phạm vi an toàn này là một giao thức phạm vi hai chiều với trao đổi ba gói.

Hãy nghĩ về nó như là "ping-pong-ping" nơi iPhone gửi tin nhắn thăm dò ý kiến và chiếc xe trả lời bằng tin nhắn trả lời và iPhone gửi một tin nhắn thăm dò ý kiến khác để tăng thêm độ chính xác.

Mỗi tin nhắn này đều mang dấu thời gian bị xáo trộn, hoặc STS, là một gói được tạo bằng mật mã và giới hạn thời gian, có nghĩa là ngay cả một gói đã được xác minh cũng chỉ có thể được chấp nhận cho khoảng thời gian được sử dụng để tạo STS này, cung cấp thêm bảo mật chống lại các cuộc tấn công phát lại và chuyển tiếp.

Vậy, làm thế nào để chúng ta kết hợp tất cả những điều này lại với nhau?

Chà, mỗi chiếc xe xác định một loạt các vùng ảo.

Các vùng này có các tính năng liên quan có thể được kích hoạt khi một thiết bị có khóa hợp lệ và đang hoạt động được bản địa hóa vào hoặc ra khỏi các vùng này.

Vùng rộng hơn kích hoạt các tính năng chào đón, chẳng hạn như bật đèn hoặc làm ấm cabin trước khi bạn đến gần xe.

Khu vực gần xe nhất thường mở khóa cửa khi bạn đến gần.

Và khu vực khóa bảo vệ những chiếc xe khi bạn bỏ đi.

Vậy, làm thế nào để một chiếc ô tô phát hiện ra bạn trong những khu vực này?

Chà, để bản địa hóa thiết bị được ghép nối bên trong các khu vực ảo này, ô tô được trang bị nhiều bộ thu phát UWB và BLE để đảm bảo vùng phủ sóng 360 độ.

Khi người dùng lần đầu tiên đến gần ô tô, iPhone hoặc Apple Watch của bạn sẽ được phát hiện bằng BLE.

Khi phát hiện khoảng cách, một kênh liên lạc với ô tô được thiết lập.

Sau khi kết nối, ô tô xác thực thiết bị và khóa phạm vi được chia sẻ có nguồn gốc ở cả hai bên.

Thao tác này diễn ra bên trong Phần tử Bảo mật và tạo ra một khóa duy nhất cho mỗi phiên.

Khóa dẫn xuất được sử dụng để bắt đầu một phiên phân loại an toàn với bộ thu phát UWB, cho phép chiếc xe bản địa hóa thiết bị và lập bản đồ quỹ đạo của nó.

Điều này được tính toán bởi thuật toán bản địa hóa chạy bên trong xe hơi.

Chúng ta sẽ quay lại với nó sau.

Chiếc xe tiếp tục lập bản đồ quỹ đạo của thiết bị khi người dùng đến gần chiếc xe.

Dựa trên vị trí và quỹ đạo của thiết bị, chiếc xe có thể quyết định kích hoạt các tính năng chào mừng, chẳng hạn như bật đèn hoặc điều chỉnh ghế ngồi.

Và khi thiết bị được bản địa hóa bên trong khu vực mở khóa, chiếc xe có thể bắt đầu các hoạt động mở khóa trước khi người dùng chạm vào tay nắm cửa.

Với kiến thức chính xác về việc thiết bị của người dùng ở bên trong hay bên ngoài xe, động cơ chỉ khởi động khi thiết bị có chìa khóa hợp lệ được phát hiện bên trong xe.

Và một trong những tính năng yêu thích của tôi, bây giờ bạn có thể tận hưởng trải nghiệm dựa trên UWB này ngay cả khi điện thoại của bạn ở chế độ dự trữ năng lượng.

Vì vậy, sau một ngày dài đi bộ đường dài hoặc đeo ba lô, nếu bạn thấy rằng điện thoại của mình cần được sạc, có thể vẫn còn đủ năng lượng trong pin để đưa bạn trở lại đường.

Bây giờ bạn đã thấy cách hoạt động của mục nhập thụ động, chúng ta hãy xem các điều khiển nhập không cần chìa khóa từ xa.

Các hành động từ xa rất hữu ích khi bạn ở xa xe hơn.

Bạn có thể sử dụng chúng bằng cách làm nóng cabin trước vào mùa đông, hoặc tìm xe của bạn bằng cách bấm còi.

Và nhiều hành động có thể được kích hoạt trực tiếp từ bên trong Wallet.

Bạn cũng có thể sử dụng thiết bị để xem thông tin về chiếc xe, chẳng hạn như trạng thái khóa, mức nhiên liệu hoặc trạng thái sạc pin.

Các hành động từ xa được gửi qua Bluetooth LE.

Vì chúng độc lập với UWB, chúng hoạt động ngay cả bên ngoài phạm vi UWB.

Và cuối cùng, các hành động từ xa được chuẩn hóa tại Hiệp hội Kết nối Xe hơi, vì vậy có một triển khai chung cho tất cả các ô tô và thiết bị.

Để có trải nghiệm tốt nhất, chúng tôi khuyên các nhà sản xuất ô tô nên thực hiện tất cả các hành động từ xa có thể áp dụng chứ không chỉ khóa và mở khóa từ xa.

Hãy xem điều khiển nhập cảnh Remote Keyless hoạt động như thế nào.

Để kích hoạt một lệnh từ xa, thiết bị yêu cầu một thử thách cho hành động liên quan, được sử dụng làm đầu vào để tạo chữ ký thiết bị.

Chiếc xe xác minh chữ ký thiết bị chống lại thử thách, hành động liên quan và các thông tin khác.

Nếu xác minh thành công, chiếc xe sẽ thực hiện hành động và thông báo cho thiết bị.

Với chìa khóa ô tô kỹ thuật số, ô tô giờ đây có thể tự động cá nhân hóa các cài đặt, như nhiệt độ cabin, vị trí ghế ngồi, hệ thống sưởi ghế và hơn thế nữa, bằng cách quan sát phím kỹ thuật số nào đang đến gần cửa tài xế.

Chìa khóa ô tô ngày nay cũng có thể hỗ trợ cá nhân hóa, nhưng họ dựa vào việc người lái xe luôn biết chìa khóa nào có cài đặt người dùng nào.

Bây giờ, với chìa khóa xe của bạn trên iPhone hoặc Apple Watch, bạn không phải lo lắng về điều đó.

Với quỹ đạo chính xác và kiến thức và kiến thức rằng các thiết bị cá nhân gắn chặt với người dùng cá nhân, ô tô có thể cá nhân hóa trải nghiệm với sự tự tin hơn bao giờ hết.

Và điều này hoạt động liền mạch, ngay cả khi nhiều người dùng đang tiếp cận chiếc xe.

Tóm lại, chúng tôi rất vui mừng về những tính năng mới này và mong muốn các nhà sản xuất ô tô ra mắt ô tô dựa trên UWB, vì vậy người dùng của chúng tôi có thể bắt đầu tận hưởng những tính năng này trên iPhone và Đồng hồ Apple được trang bị chip U1.

Bây giờ, hãy chuyển số và nói về cách các nhà sản xuất ô tô có thể tham gia vào nền tảng Apple và một số lĩnh vực bạn sẽ muốn tập trung vào khi thiết kế giải pháp chìa khóa ô tô.

Là một phần của cuộc thảo luận này, chúng tôi sẽ đề cập đến kiến trúc hệ thống, đồng bộ hóa thời gian, đồng bộ hóa bộ thu phát và về việc xây dựng một thuật toán bản địa hóa tốt.

Hãy bắt đầu với kiến trúc hệ thống.

Vì giải pháp nhập thụ động dựa trên bản địa hóa đáng tin cậy và chính xác, điều cần thiết là hệ thống của bạn phải có hiệu suất tốt và độ trễ thấp.

Như chúng ta đã thấy trước đó, mỗi chiếc xe đều được trang bị nhiều bộ thu phát và một trong những quyết định đầu tiên của bạn sẽ là chọn một bộ thu phát phù hợp.

Đầu tiên, bạn cần đảm bảo rằng các máy thu phát có thể cung cấp đủ ngân sách liên kết.

Vì giao thức khóa xe là hai chiều, điều này có nghĩa là đánh giá cả công suất bức xạ Tx và độ nhạy Rx để có hiệu suất đường lên và đường xuống tốt.

Bằng cách tinh chỉnh hướng ăng-ten, bạn có thể đảm bảo rằng ăng-ten của bộ thu phát hỗ trợ toàn bộ trường nhìn cho vùng phủ sóng yêu cầu.

Sự đa dạng ăng-ten là rất quan trọng để đạt được phạm vi hoạt động tốt.

Ví dụ, việc sử dụng hai hoặc nhiều ăng-ten với sự phân cực hoặc tách biệt khác nhau có thể giúp cải thiện cường độ tín hiệu nhận được.

Cuối cùng, bạn cần đảm bảo rằng các phép đo thời gian bay 3D có độ chính xác cao.

Các tính năng nhập và bản địa hóa thụ động dựa vào thời gian bay trong tính toán của chúng.

Do đó, độ chính xác phải nằm trong giới hạn xác định, bất kể góc tiếp cận.

Vì ngay cả các máy thu phát riêng lẻ được thiết kế tốt cũng có thể dẫn đến việc không đủ vùng phủ sóng xung quanh xe hoặc vùng phủ sóng ở những khu vực không mong muốn nếu chúng được lắp đặt kém, bạn sẽ cần xác định các vị trí tốt nhất có thể để đặt bộ thu phát xung quanh xe để cung cấp vùng phủ sóng cần thiết, đồng thời, bạn sẽ muốn

Hãy chắc chắn xem xét chiều cao và hướng.

Nói chung, chiều cao lắp đặt càng lớn, điểm mờ càng xa và phạm vi hoạt động tốt hơn.

Điều này rõ ràng phải được thực hiện trong giới hạn thiết kế của chiếc xe.

Tương tự, định hướng kém có thể dẫn đến khoảng trống trong phạm vi bảo hiểm hoặc phạm vi bảo hiểm ở những khu vực không mong muốn, chẳng hạn như phía trên xe.

Khi bạn có bộ thu phát phù hợp và các vị trí tiềm năng, bước tiếp theo là xác minh hiệu suất RF của hệ thống.

Kiểm tra mô hình bức xạ của các bộ thu phát được lắp đặt xung quanh xe để đảm bảo độ che phủ đối xứng ở tất cả các phía.

Bạn cũng muốn chú ý đến phạm vi tối đa được bao phủ bởi hệ thống.

Điều này rất quan trọng đối với các tính năng đường dài, chẳng hạn như đèn chào mừng hoặc điều kiện tiên quyết trong cabin.

Và quan trọng nhất, bạn sẽ muốn đảm bảo rằng hệ thống có đủ bộ đệm lề liên kết, để đảm bảo hoạt động mở khóa có thể diễn ra, bất kể giảm xóc do cơ thể con người, đổ kênh, mờ dần hoặc các biến số khác.

Một lĩnh vực khác bạn cần xem xét là độ trễ hệ thống.

Khi bạn đến gần xe, một chuỗi sự kiện phức tạp bắt đầu, bắt đầu bằng việc thiết lập kết nối BLE, xác thực và dẫn xuất khóa, tiếp theo là thiết lập phiên trên phạm vi bảo mật, nơi mỗi bộ thu phát UWB bắt đầu quét, để xe có thể xác định vị trí của thiết bị.

Tất cả các nhiệm vụ này phải được hoàn thành trước khi người dùng cố gắng mở cửa.

Để giữ độ trễ hệ thống trong giới hạn yêu cầu, bạn sẽ cần một bộ xử lý tiền điện tử hiệu suất cao để xác thực và quản lý khóa.

Hệ thống bus kết nối ECU của bạn với mỗi bộ thu phát phải có độ trễ thấp; một bus chậm thực sự có thể ảnh hưởng đến hiệu suất hoạt động của hệ thống.

Cuối cùng, bạn sẽ cần một kiến trúc phần mềm linh hoạt cho phép bạn hỗ trợ các kỹ thuật tối ưu hóa, có thể là các ứng dụng đa luồng hoặc kết hợp đồng bộ hóa thời gian.

Bây giờ, hãy nhanh chóng nói về đồng bộ hóa thời gian.

Bộ thu phát UWB cần được quét chủ động để phát hiện các gói khác nhau.

Nếu không có đồng bộ hóa thời gian tốt, các cửa sổ quét dài là cần thiết để nắm bắt các gói tin đến một cách đáng tin cậy.

Điều này tiêu tốn năng lượng và thời gian xử lý.

Bằng cách thực hiện đồng bộ hóa thời gian chính xác trên toàn hệ thống của bạn, mỗi bộ thu phát có thể biết khi nào các gói tin đến dự kiến sẽ có độ chính xác hàng chục micro giây.

Chỉ bằng cách quét trong các cửa sổ thời gian này, bạn không chỉ có thể tiết kiệm năng lượng và cải thiện hiệu suất trong môi trường nhiều phiên và tắc nghẽn mà còn giúp bạn bản địa hóa thiết bị nhanh hơn.

Nó thực hiện điều đó bằng cách đảm bảo thành công từ chu kỳ được phát hiện đầu tiên bằng cách giữ cho các bộ thu phát được đồng bộ hóa chặt chẽ.

Một kỹ thuật quan trọng khác là đồng bộ hóa bộ thu phát.

Đôi khi, một số bộ thu phát có thể không kết nối được hoặc không đồng bộ.

Bằng cách thực hiện đồng bộ hóa bộ thu phát, các bộ thu phát được đồng bộ hóa thành công với thiết bị có thể chia sẻ thông tin thời gian với các bộ thu phát khác trong xe và giúp chúng nhanh chóng kết nối hoặc thậm chí tính toán thời gian bay, ngay cả khi chúng không hoàn thành chu kỳ toàn bộ.

Cuối cùng nhưng không kém phần quan trọng, thuật toán bản địa hóa.

Một trong những nhiệm vụ quan trọng nhất khi thiết kế giải pháp nhập thụ động là phát triển thuật toán bản địa hóa có thể xác định chính xác vị trí của các thiết bị tiếp cận so với ô tô.

Thuật toán bản địa hóa là một đoạn mã chạy trên ECU của ô tô của bạn.

Nó thu thập khoảng cách của thiết bị từ mỗi bộ thu phát UWB được kết nối và xử lý chúng để định vị iPhone hoặc Apple Watch trong không gian.

Có nhiều cách để làm điều này.

Một ví dụ đơn giản về điều này là đa chiều phạm vi thực.

Thuật toán bản địa hóa là một trong những phần quan trọng nhất của giải pháp mà bạn cần phát triển.

Vì vậy, bạn sẽ cần đảm bảo rằng thuật toán bản địa hóa của mình nhanh chóng và chính xác, cho dù nó muốn đi theo quỹ đạo của người dùng khi họ tiếp cận xe hay xác định xem thiết bị ở bên trong hay bên ngoài cabin.

Tốc độ, độ chính xác và độ chính xác là chìa khóa cho một giải pháp bản địa hóa tốt, ngay cả khi bạn đang thêm hỗ trợ cho một hệ thống mở khóa dựa trên bộ thu phát duy nhất.

Bạn cũng có thể cần điều chỉnh thuật toán bản địa hóa của mình cho các loại cabin khác nhau và các đặc điểm vật lý của chiếc xe.

Bây giờ, bạn đã thấy tính năng chìa khóa xe hoạt động như thế nào.

Nếu bạn quan tâm đến việc phát triển, chúng tôi đề xuất quy trình làm việc sau đây để tiến trình phát triển và trình độ phần mềm một cách hữu cơ.

Đầu tiên, tập trung vào khả năng tương tác UWB và đảm bảo rằng nó tuân theo thông số kỹ thuật.

Chúng tôi đã tạo ra một công cụ giúp bạn kiểm tra điều này.

Nó cũng cho phép bạn dần dần kích hoạt các hoạt động mật mã, vì vậy bạn có thể phát triển hệ thống của mình theo cách từng bước.

Tiếp theo, tích hợp lớp BLE để quản lý kết nối và ghép nối chủ sở hữu.

Sau đó, tập trung vào quản lý phạm vi an toàn, điều này rất quan trọng đối với việc nhập cảnh thụ động.

Cuối cùng nhưng không kém phần quan trọng, hỗ trợ các hành động từ xa để điều khiển từ xa.

Nếu bạn quan tâm đến việc tìm hiểu thêm, chúng tôi khuyến khích bạn tham gia vào Hiệp hội Kết nối Xe hơi và đăng ký Chương trình MFi để biết chi tiết cụ thể về cách làm việc với iPhone và Apple Watch.

Chương trình MFi là nơi bạn có thể có được các tài liệu và công cụ bổ sung để hỗ trợ sự phát triển của mình.

Cảm ơn bạn, và chúc một ngày tốt lành!

[Âm nhạc].