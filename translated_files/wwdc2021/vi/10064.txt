10064

♪ ♪

Xin chào.

Tôi là David Duncan, và với đồng nghiệp của tôi, Eric Dudiak, chúng ta sẽ thảo luận về tất cả các cách mà UIKit làm cho các nút tốt hơn trong iOS 15.

Nút khiêm tốn, một yếu tố chính của các ứng dụng lớn và nhỏ.

Các nút có lẽ là cách phổ biến nhất để thu hút đầu vào của người dùng.

Các nút có nhiều dạng: lớn và nhỏ; với hình ảnh, văn bản hoặc cả hai; có và không có nền; và mọi màu sắc của cầu vồng.

Hãy bắt đầu bằng cách tập trung vào một vài phong cách cụ thể.

Trong iOS 15, UIKit hiện cung cấp bốn phong cách cơ bản này.

Thêm vào phong cách đơn giản mà bạn đã biết và yêu thích là phong cách mới màu xám, nhuốm màu và đầy đặn.

Nhưng UIKit không chỉ làm cho các nút trở nên phong cách hơn trong iOS 15.

Nó cũng làm cho chúng mạnh hơn.

Kiểu động hiện được hỗ trợ theo mặc định và hỗ trợ văn bản nhiều dòng được tích hợp vào hệ thống nút.

Khả năng tiếp cận đã được nâng cao với sự hỗ trợ tốt hơn cho tất cả các tính năng trợ năng cũng như tạo ra các nút dễ tiếp cận hơn theo mặc định.

Và với tất cả các tính năng mới này, các nút có thể tùy chỉnh nhiều hơn bao giờ hết, vì vậy bạn có thể có được chính xác phong cách bạn muốn.

Vì vậy, với mồi đó, hãy gặp UIButtonConfiguration, điểm vào của hệ thống nút mới.

Chào mừng đến với Button Emporium, nhà cung cấp hàng đầu về các nút ở mọi hình dạng và kích cỡ.

Button Emporium luôn muốn có các nút tốt nhất, vì vậy hãy cập nhật ứng dụng để áp dụng UIButtonConfiguration...

Bắt đầu với nút Đăng nhập quan trọng nhất.

Hiện tại ứng dụng tạo ra một nút Đăng nhập với mã này, tạo ra một nút hệ thống đơn giản với tiêu đề "Đăng nhập".

Nhưng đây là một nút siêu quan trọng, vì vậy hãy làm cho nó nổi bật hơn bằng cách sử dụng kiểu đầy mới.

Và chúng ta đã hoàn thành!

Thật dễ dàng để bắt đầu với UIButtonConfiguration, vì UIButton tự động tích hợp các tiêu đề và hình ảnh được đặt với API hiện có trên các cấu hình bạn cung cấp, giúp bạn dễ dàng cập nhật kiểu nút của mình mà không cần cập nhật tất cả mã của bạn cùng một lúc.

Nhưng khi bạn đã sẵn sàng cập nhật mã của mình, có rất nhiều thứ để UIButtonConfiguration hơn là chỉ các kiểu.

Hãy cùng xem xét điều đó tiếp theo.

Đây là nút "Thêm vào giỏ hàng" hiện tại của chúng tôi.

Đó là một nút khá cơ bản ngay bây giờ, nhưng chúng tôi sẽ tận dụng các tính năng mới được cung cấp bởi UIButtonConfiguration để tăng tốc trải nghiệm mua nút.

Để bắt đầu, chúng tôi sẽ sử dụng kiểu nhuốm màu vì nó bổ sung cho các nút khác của chúng tôi.

Chúng tôi bắt đầu bằng cách tạo một cấu hình nút màu, đặt tiêu đề của nó, phù hợp với cách chúng tôi đã định cấu hình nút của mình trước đây.

Tiếp theo chúng tôi tạo nút với cấu hình đã điền của chúng tôi.

Đây đã là một cải tiến khá lớn, nhưng hãy đưa nó lên hàng đầu.

Cải tiến tiếp theo mà chúng tôi sẽ thực hiện là thêm một hình ảnh vào nút, giúp đơn giản hơn trong việc xác định những gì nó làm trong nháy mắt.

Nhà thiết kế của chúng tôi thực sự muốn hình ảnh ở vị trí cuối, vì vậy bên cạnh việc đặt thuộc tính hình ảnh, chúng tôi cũng đặt thuộc tính imagePlacement, đặt hình ảnh chính xác ở nơi chúng tôi muốn.

Nhưng có hai tính năng nữa mà chúng tôi muốn thêm vào nút "Thêm vào giỏ hàng" mới của mình.

Đầu tiên là xem trước những gì xảy ra khi bạn đặt hàng nhiều mặt hàng, tính năng này sẽ sử dụng tính năng phụ đề của UIButtonConfiguration.

Thứ hai là chuyển từ hình ảnh được phác thảo sang phiên bản đầy của nó khi nhấn nút.

Để làm được điều đó, chúng ta cần cập nhật thuộc tính hình ảnh vào thời điểm thích hợp.

Để cập nhật nút một cách chính xác khi một trong hai thay đổi này xảy ra, chúng tôi sẽ thêm một configurationUpdateHandler.

ConfigurationUpdateHandler được gọi khi nút cần cập nhật, cho phép bạn thực hiện các thay đổi tập trung.

Thông thường bạn sẽ thay đổi cấu hình của nút, vì vậy nó thường bắt đầu bằng cách lấy cấu hình bắt đầu và kết thúc bằng việc cài đặt cấu hình đã thay đổi.

Ở đây chúng ta bắt đầu với cấu hình hiện có của nút, nhưng bạn có thể dễ dàng tạo một cái mới và thay vào đó điền vào tất cả các thông số của nó.

Đầu tiên hãy đặt hình ảnh chính xác cho nút.

Khi nhấn nút, isHighlighted trả về true và chúng tôi đặt phiên bản đã điền của biểu tượng giỏ hàng của mình.

Nếu không, chúng tôi sử dụng phiên bản được phác thảo.

Vì isHighlighted là trạng thái của UIButton, nó tự động sắp xếp để configurationUpdateHandler được gọi khi giá trị đó thay đổi.

Tiếp theo, chúng tôi cập nhật phụ đề khi itemQuantityDescription thay đổi.

Nhưng itemQuantityDescription không phải là một thuộc tính của UIButton.

Làm thế nào để chúng ta sắp xếp để configurationUpdateHandler được gọi khi giá trị thay đổi?

Khi khách hàng thay đổi số lượng nút cần mua, ứng dụng sẽ cập nhật itemQuantityDescription.

Để đảm bảo rằng nút Thêm vào giỏ hàng cũng cập nhật, trình xử lý didSet của chúng tôi gọi setNeedsUpdateConfiguration, từ đó sắp xếp để trình xử lý cấu hìnhUpdate được gọi và kích hoạt cập nhật nút.

Tại Button Emporium, chúng tôi chưa bao giờ gặp một nút nào mà chúng tôi không thích và với UIButtonConfiguration, có rất nhiều thứ để thích.

Trước khi chúng tôi cập nhật nút tiếp theo, hãy nhanh chóng đề cập đến một số tính năng khác.

Các nút hiện có thể hiển thị chỉ báo hoạt động, giúp dễ dàng cung cấp phản hồi rằng ứng dụng của bạn đang bận.

Chỉ cần đặt showsActivityIndicator thành true trong cấu hình nút của bạn và chúng tôi sẽ hiển thị chỉ báo, thay thế hình ảnh nếu cần.

Việc điều chỉnh các khía cạnh của bố cục nút rất đơn giản, giúp bạn kiểm soát nhiều hơn cách định vị nội dung trong nút.

Tại đây bạn có thể thấy cách contentInsets dành không gian trên các cạnh của nút và imagePadding và titlePadding cho phép chúng tôi tăng không gian giữa các yếu tố đó.

Và trong khi UIKit sẽ tự động bố trí các thành phần này, bạn có quyền kiểm soát cách các tiêu đề căn chỉnh với nhau cũng như cách nội dung của nút căn chỉnh bên trong khu vực nội dung.

Kiểu dáng ngữ nghĩa giúp việc tạo các nút với phong cách gắn kết trở nên đơn giản mà không cần phải đào sâu vào chi tiết.

Bắt đầu với một nút được điền đơn giản, chúng tôi định cấu hình baseBackgroundColor, baseForegroundColor, cornerStyle và buttonSize để tạo một nút tùy chỉnh và bạn sẽ tự động nhận được các trạng thái theo chủ đề, chẳng hạn như nhấn và tắt mà không cần nỗ lực thêm.

Nhưng ngay cả với nhiều tự động hóa, vẫn dễ dàng thực hiện các tùy chỉnh chi tiết cho những thời điểm mà bạn chỉ cần có chính xác những gì bạn cần, như với nút "Thanh tra" quan trọng nhất của chúng tôi.

Để đảm bảo rằng khách hàng của Button Emporium có thể nhận được các nút của họ với ít phiền phức nhất, nút thanh toán rất lớn và dễ tìm.

Để xây dựng nó, chúng ta sẽ bắt đầu với kiểu điền, đặt kích thước của nó thành lớn và điền vào hình ảnh và tiêu đề của nó.

Khi nhấn nút, chúng tôi bắt đầu xử lý giỏ hàng và muốn hiển thị chỉ báo hoạt động.

Để kích hoạt điều này, chúng tôi thêm một configurationUpdateHandler để quản lý thuộc tính showsActivityIndicator của cấu hình.

Cũng giống như trước đây, các thay đổi đối với thuộc tính isCartBusy sẽ gọi setNeedsUpdateConfiguration trên nút thanh toán để đảm bảo chỉ báo hoạt động được bật và tắt khi cần thiết.

Và trong khi màu xanh là tốt, chúng tôi muốn đảm bảo để lại ấn tượng.

Vì vậy, để đảm bảo màu sắc chính xác của chúng tôi được sử dụng cho nền, hãy đặt Màu nền của UIButtonConfiguration's UIBackgroundConfiguration.

Điều đó tốt hơn nhiều.

Bây giờ chúng ta đã thảo luận về cách UIButtonConfiguration có thể làm cho các nút của bạn trông đẹp hơn bao giờ hết, tôi sẽ giao nó cho Eric để nói về những điều mới khác mà các nút có thể làm.

Cảm ơn, David.

Bây giờ chúng ta đã kiểm tra cách các nút có thể tùy chỉnh giao diện của chúng, hãy kiểm tra xem các nút có thể tùy chỉnh chức năng của chúng như thế nào.

Hầu hết các nút chỉ là các nút nhấn đơn giản, nhưng đôi khi một nút cần thêm một chút hành vi.

Cái đầu tiên chúng ta sẽ kiểm tra là nút chuyển đổi.

Các nút này giữ nguyên trạng thái đã chọn từ UIControl.

Họ tự động bật và tắt nó mỗi khi nhấn nút.

Nó cũng có thể được thay đổi theo chương trình khi cần thiết.

Ngoài các kiểu tích hợp cho các trạng thái bật và tắt, chúng ta có thể tận dụng Cấu hình UIButton để tùy chỉnh bản trình bày của các trạng thái bật và tắt này.

Khái niệm về các nút chuyển đổi trên iOS không phải là mới.

Bạn có thể đã nhận thấy một số nút như nút lời bài hát trong ứng dụng Nhạc.

Nó bật và tắt lời bài hát trong trình phát như thế này.

Về mặt chức năng, cái này hoạt động giống như UISwitch, nhưng nó tiết kiệm một số dung lượng trong giao diện người dùng và nó phù hợp với thiết kế của ứng dụng hơn nhiều.

Các nút chuyển đổi cũng hoạt động trên UIBarButtonItems như thế này trong Lịch.

Ở thanh trên cùng, chi tiết trong ngày có thể được bật và tắt.

Đẩy nó sẽ chuyển đổi màn hình hiển thị các chi tiết.

Trong trường hợp này, có một thuộc tính được chọn mới trên UIBarButtonItem có thể được đọc hoặc đặt cho trạng thái đã chọn.

Bây giờ hãy cập nhật Button Emporium để áp dụng các nút chuyển đổi.

Ứng dụng của chúng tôi cho phép chúng tôi duyệt các loại nút mà chúng tôi muốn mua.

Nhưng trong khi duyệt, tôi chỉ muốn xem xét những gì hiện có trong kho.

Ở đây, chúng tôi đã thêm một nút chuyển đổi để chuyển đổi giữa hiển thị hoàn toàn mọi thứ và chỉ những gì có trong kho và sẵn sàng giao hàng.

Đây là một cách sử dụng tuyệt vời của nút chuyển đổi.

Một lợi thế là, vì nó là một nút, nhãn là một phần của nó, làm cho nó rất rõ ràng những gì đang được chuyển đổi ở đây.

Vậy hãy kiểm tra xem chúng ta đã làm điều đó như thế nào.

Ở đây, chúng tôi có những điều cơ bản về thiết lập một nút.

Để biến nó thành một nút chuyển đổi, chúng tôi chỉ cần đặt changesSelectionAsPrimaryAction thành true.

Bây giờ nó là một nút chuyển đổi.

Thế là xong.

Chúng tôi cũng có thể đặt trạng thái đã chọn để phù hợp với mô hình nội bộ của chúng tôi.

Bây giờ, chúng ta có thể muốn một cái gì đó phức tạp hơn một chút mà chỉ cần hai trạng thái bật và tắt.

Đối với các nút có thể có nhiều tùy chọn hơn để chuyển đổi giữa, chúng ta có thể sử dụng các nút bật lên.

Các nút bật lên gần giống với các nút kéo xuống, vốn đã tồn tại trong iOS.

Những thứ này trình bày một thực đơn khi được nhấn.

Các nút bật lên tiến thêm một bước nữa và đảm bảo rằng một và chỉ một trong các yếu tố menu được chọn.

Họ cũng cho thấy lựa chọn hiện tại đó là tiêu đề và hình ảnh của họ.

Xây dựng nút bật lên thực sự là một phần mở rộng của việc xây dựng nút kéo xuống.

Đối với những người đó, một menu được gán cho nút.

Để biến menu thành hành động mặc định, thuộc tính showsMenuAsPrimaryAction được đặt thành true.

Các nút bật lên tiến thêm một bước nữa bằng cách chỉ cần bật thuộc tính changesSelectionAsPrimaryAction.

Đó là tất cả những gì nó cần.

Chúng hoạt động giống như UISegmentedControl nhưng có thể hữu ích khi có nhiều lựa chọn hơn mức có thể phù hợp với điều khiển được phân đoạn.

Chúng cũng có thể hữu ích cho các trường hợp mà các lựa chọn có hệ thống phân cấp vốn có.

Một số ví dụ về kiểu nút này tồn tại ngày nay.

Ví dụ, ứng dụng Điện thoại sử dụng nút bật lên để chuyển đổi giữa các SIM cho các cuộc gọi đi.

Và ở đây nút trình bày một thực đơn.

Chọn công tắc thứ cấp đường dây.

Kết quả là, nút được cập nhật lên dòng đi mới.

Nhãn và hình ảnh đã được cập nhật để hiển thị lựa chọn mới.

Tương tự, chúng tôi có một số cách sử dụng cho việc này trong Button Emporium.

Khi chúng tôi duyệt các nút, chúng tôi có một số nút có nhiều màu sắc khác nhau.

Số lượng màu sắc là một bộ cố định để lựa chọn, nhưng có lẽ quá lớn đối với một điều khiển được phân đoạn, nhưng nó cũng đủ nhỏ để chúng tôi thực sự muốn thay đổi nó trong dòng.

Đây là một cách sử dụng tuyệt vời của nút bật lên vì chúng tôi muốn lựa chọn là tiêu đề của nút.

Sau đó chúng ta có thể trình bày tất cả các lựa chọn màu sắc.

Và trên một lựa chọn mới, ứng dụng của chúng tôi chỉ có thể cập nhật cho lựa chọn màu sắc.

Hãy điều tra mã cho điều đó.

Ở đây chúng tôi thực sự có mã để tạo một menu kéo xuống đơn giản mà chúng tôi có thể cập nhật.

Cũng giống như nút chuyển đổi, chúng tôi chuyển changesSelectionAsPrimaryAction sang true.

Và bây giờ nó là một nút bật lên.

Nếu chúng ta muốn có một màu cụ thể là lựa chọn mặc định thay vì chỉ màu đầu tiên trong danh sách, chúng ta có thể chỉ định trước màu đó để "bật" khi chúng ta đặt menu.

Điều đó sẽ làm cho nó trở thành lựa chọn mặc định.

Chúng ta có thể kiểm tra lựa chọn bằng cách hỏi menu của nút cho các Yếu tố được chọn hiện tại, phần tử này sẽ luôn có chính xác một phần tử duy nhất.

Và nếu chúng ta cần đặt một cái mới trong mã, chúng ta chỉ có thể thay đổi trạng thái trên phần tử từ thuộc tính menu của nút.

Các nút bật lên cũng có thể được tạo trong Trình tạo giao diện, nhưng trong trường hợp này, chúng tôi sẽ muốn truy xuất màu động từ máy chủ thay vì sử dụng danh sách cố định, vì vậy chúng tôi sẽ làm điều đó bằng mã.

Để tìm hiểu thêm về cách sử dụng hệ thống nút mới và các loại nút với Trình tạo giao diện, hãy xem video "Xây dựng giao diện theo phong cách".

Một trong những phần tốt nhất của các loại nút mới này là chúng tự động hoạt động trên Mac Catalyst.

Người dùng Mac mong đợi các nút trông và hoạt động theo một cách nhất định, bao gồm các nút kéo xuống, cửa sổ bật lên và nút chuyển đổi.

Với các nút iOS này, chúng sẽ tự động được cập nhật lên phiên bản Mac của chúng.

Vì vậy, ở đây chúng tôi có một lựa chọn các nút từ ứng dụng iPad, giống như chúng tôi đã sử dụng trong suốt bản trình bày, bao gồm các nút không viền mặc định và một số nút sử dụng cấu hình mới cũng như các nút bật lên và kéo xuống.

Và ở đây họ không có thay đổi thủ công nào trên Mac Catalyst.

Đúng như cách mà một người dùng Mac dày dạn kinh nghiệm mong đợi.

Chúng tôi nhận được các nút viền tiêu chuẩn, bao gồm các chỉ báo Mac cho các nút kéo xuống và bật lên.

Tuy nhiên, trong một số trường hợp, việc tùy chỉnh thêm các nút iPad có thể phù hợp hơn ngay cả đối với ứng dụng Mac.

Đối với điều đó, nút hỗ trợ thay đổi kiểu hành vi từ mặc định là tự động sang iPad.

Điều này rất hữu ích cho các nút tùy chỉnh, rất nổi bật trong một ứng dụng, như nút thanh toán mà chúng tôi đã thực hiện trước đó.

Để biết thêm thông tin về việc xây dựng và tùy chỉnh các ứng dụng Mac Catalyst, hãy xem video "Có gì mới trong Mac Catalyst".

Như bạn có thể nhận thấy trong các ví dụ về nút bật lên, phần lớn chức năng được xây dựng dựa trên các tính năng mới và hiện có của UIMenu.

UIMenu kết hợp rất tốt với UIButton và UIBarButtonItem cho nhiều tương tác tuyệt vời.

Chúng tôi đã khám phá cách bạn có thể điều chỉnh hành vi của các nút để tạo cả nút bật lên và nút kéo xuống.

Trên iOS và iPadOS, những hành vi này độc lập với các tùy chỉnh trực quan, vì vậy bạn có thể dễ dàng kết hợp chúng với UIButtonConfiguration để tạo ra nhiều kiểu nút khác nhau.

Các nút này cũng được hưởng lợi từ những cải tiến trong menu như khả năng các mục menu có phụ đề rõ ràng hơn.

Trên hết, điều hướng menu con trên iOS và iPadOS cũng đã được cải thiện, cho phép tạo ra các hệ thống phân cấp trong một menu.

Và trong một số trường hợp, bạn có thể muốn menu con của nút kéo xuống hoạt động như một menu lựa chọn duy nhất.

Ví dụ, điều này có thể hữu ích nếu bạn có menu "sắp xếp theo" trong menu hành động.

Một số cải tiến menu mới giúp việc tạo ra điều này dễ dàng hơn nhiều.

Đây là một mục nút thanh kéo xuống tùy chỉnh sử dụng menu con trong mã của chúng tôi.

Nó có một vài hành động và sau đó là một menu con để sắp xếp kết quả.

Thay vì bật và tắt các mục menu theo cách thủ công trong menu con đó, chúng tôi sẽ chỉ ra rằng menu con này dành cho một lựa chọn duy nhất khi chúng tôi tạo nó.

Bây giờ nó nhận được cùng một hành vi lựa chọn tự động mà các nút bật lên nhận được nhưng chỉ trong menu con.

Chỉ một phần tử được chọn sẽ được cho phép và phần tử được chọn sẽ được cập nhật khi người dùng nhấn vào nó.

Nó có thể được cập nhật hoặc truy cập bằng mã theo cách chính xác như cách chúng tôi đã làm trước đó với menu bật lên.

Và hành vi lựa chọn đơn hoạt động nếu menu có menu con riêng.

Chỉ một phần tử trong toàn bộ cây con sau đó có thể được chọn tại một thời điểm.

Và thuộc tính selectedElements bao gồm lựa chọn trong menu con, giúp việc truy cập dễ dàng như thể chúng ta không có menu con.

Vì vậy, đó là cách tạo các nút tốt hơn trong ứng dụng của bạn.

Thêm cấu hình vào các nút để kiểm soát nhiều hơn kiểu dáng để mở khóa kiểu dáng phong phú hơn nhiều trong khi vẫn nhất quán với nền tảng.

Đồng thời khám phá các cách để thay thế các giao diện hoặc điều khiển chọn hiện có bằng các nút bật lên hoặc chuyển đổi để có được các tương tác hợp lý hơn.

Với những thay đổi này, bạn có thể sẽ tìm thấy các lớp con UIButton có thể được xóa hoặc đơn giản hóa.

Và bởi vì hệ thống có thể hiểu rõ hơn về các nút của bạn, bạn sẽ tự động nhận được chuyển đổi Mac Catalyst tốt hơn nhiều.

Cảm ơn bạn đã tham gia cùng chúng tôi, và tôi hy vọng bạn thích đi sâu vào thế giới của các nút bấm.

[Nhạc lạc quan].