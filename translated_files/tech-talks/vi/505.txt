505

Shloka Kini: Bối cảnh xác thực là một dịch vụ web trình bày giao diện người dùng xác thực và giao tiếp với máy chủ nhà cung cấp danh tính của bạn để xác thực thông tin đăng nhập của khách hàng.

Đây là một trong nhiều bước bạn sẽ cần thực hiện để có được tính năng Đăng nhập một lần cho nhà cung cấp TV của mình trên các thiết bị iOS và tvOS như một phần của chương trình phân phối Apple TV.

Bối cảnh xác thực là một dịch vụ web được lưu trữ trên máy chủ của bạn được tải xuống thiết bị Apple và được thực thi trong thời gian chạy.

Khi ngữ cảnh xác thực chuyển phản hồi xác thực đến khung VideoSubscriberAccount, nó sẽ được lưu vào chuỗi khóa thiết bị.

Trên các thiết bị iOS, phản hồi xác thực có thể được đồng bộ hóa với các thiết bị iOS khác thông qua Chuỗi khóa iCloud.

Và trên Apple TV, phản hồi xác thực sẽ không rời khỏi thiết bị vì tvOS không hỗ trợ Chuỗi khóa iCloud.

Mục đích của bối cảnh xác thực là cung cấp xác thực cấp hệ điều hành trên các ứng dụng được hỗ trợ.

Bước đầu tiên của quy trình này là nhắc nhở một người nhập thông tin đăng nhập của họ bằng cách trình bày cho họ giao diện người dùng để xác thực.

Để chỉ định giao diện người dùng cho mục nhập thông tin xác thực này, hãy sử dụng authenticationTemplate.

Đây là một tài liệu XML tương tự như các ví dụ chúng tôi cung cấp trong tài liệu.

Khi bạn cung cấp cho chúng tôi XML này, chúng tôi lấy nó và định dạng nó để trông giống như một phần của giao diện người dùng hệ thống Apple, tùy thuộc vào nền tảng mà người đó đang sử dụng.

Ví dụ, mẫu tên người dùng-mật khẩu mặc định ở đây, có thể được áp dụng cho cả thiết bị iOS và tvOS.

AutoAuthenticationTemplate không yêu cầu khách hàng nhập thông tin đăng nhập.

Thay vào đó, nó thông báo cho khách hàng tài khoản nào họ sẽ được tự động xác thực và cung cấp cho họ tùy chọn đăng nhập thủ công vào một tài khoản khác.

Mẫu này cũng có thể áp dụng cho cả thiết bị iOS và tvOS.

Nếu bạn không thể trực tiếp lấy thông tin đăng nhập từ khách hàng, chúng tôi cung cấp các mẫu thay thế để xác thực trong những trường hợp đặc biệt.

Mẫu xác thực mã trên màn hình chỉ áp dụng cho tvOS.

Nó hiển thị mã trên màn hình để một người nhập vào trình duyệt web trên một thiết bị riêng biệt, chẳng hạn như điện thoại, máy tính bảng hoặc máy tính của họ.

WebAuthenticationTemplate chỉ áp dụng cho các thiết bị iOS.

Nó khởi chạy chế độ xem web, như thế này, sử dụng URL được chỉ định.

Để giao tiếp giữa ngữ cảnh xác thực và chế độ xem web được khởi chạy, bạn sử dụng lớp VideoSubscriberAccount.

Để bắt đầu, bạn sẽ tạo một ngữ cảnh xác thực với JavaScript và xác định giao diện người dùng xác thực với các mẫu XML.

Lưu trữ tệp JavaScript này trên máy chủ của bạn.

Hãy nhớ chỉ viết một ngữ cảnh xác thực, bởi vì cùng một ngữ cảnh có thể được sử dụng cho cả hai thiết bị.

Cuối cùng, sau khi viết ngữ cảnh và XML của bạn, hãy gửi cho chúng tôi dữ liệu giới thiệu của nhà cung cấp TV.

Dữ liệu này bao gồm tên được hiển thị trong giao diện người dùng của chúng tôi cho nhà cung cấp TV; số nhận dạng cho nhà cung cấp TV, sẽ được sử dụng trong hệ thống của chúng tôi để xác định nhà cung cấp TV duy nhất trong số những người khác; và URL xác thực, URL chúng tôi cần ping trên máy chủ nhà cung cấp TV để truy cập và tải

Gửi cho chúng tôi tác phẩm nghệ thuật để hiển thị cho thương hiệu của nhà cung cấp TV trong giao diện người dùng App Store.

Để biết thêm chi tiết về thông số kỹ thuật tác phẩm nghệ thuật, hãy xem tài liệu của chúng tôi.

Gửi cho chúng tôi một danh sách kênh được hỗ trợ.

Đây là một phần tùy chọn của dữ liệu giới thiệu.

Tại đây, một kênh tham khảo các ứng dụng do nhà cung cấp TV hỗ trợ.

Trong chương trình phân phối Apple TV, một ứng dụng sẽ được cài đặt tự động sau luồng xác thực; đó là ứng dụng chính.

Nếu bạn có bất kỳ ứng dụng bổ sung nào sử dụng thông tin đăng nhập của nhà cung cấp TV, hãy sử dụng danh sách này để hiển thị các ứng dụng do nhà cung cấp TV khác hỗ trợ cho khách hàng.

Để bắt đầu phát triển ngữ cảnh xác thực, hãy xử lý các cuộc gọi lại cho các yêu cầu được thực hiện bởi khung VideoSubscriberAccount đối với ngữ cảnh xác thực.

Đầu tiên là onLaunch.

Điều này cho thấy điều gì sẽ xảy ra sau khi nhà cung cấp TV được chọn từ danh sách Tài khoản VideoSubscriber.

Sau khi chọn một nhà cung cấp TV, một màn hình đang chờ xử lý xuất hiện cho đến lần gọi lại tiếp theo.

onShowUserInterface.

Sau khi khởi chạy, sau đó bạn phải xử lý cuộc gọi lại để hiển thị mẫu xác thực cho mục nhập thông tin xác thực.

Tiếp theo là onRequest.

Sau khi thông tin đăng nhập được nhập, bạn lấy những thông tin đăng nhập đó và gửi chúng trực tiếp đến máy chủ nhà cung cấp danh tính của bạn.

Những thông tin đăng nhập này không được lưu trữ trên thiết bị.

Phản hồi xác thực được gửi lại từ máy chủ đến ngữ cảnh xác thực đến khung VideoSubscriberAccount để thiết lập xác thực cấp hệ thống.

Các yêu cầu xác thực cấp ứng dụng sẽ chỉ được gửi để xử lý nếu xác thực cấp hệ thống này tốt.

Để gỡ lỗi ứng dụng của bạn, hãy bật Chế độ Nhà phát triển trên các thiết bị iOS và tvOS của bạn để thêm và kiểm tra nhà cung cấp TV của bạn trước khi mã hoạt động.

Để gỡ lỗi cụ thể ngữ cảnh xác thực của bạn, hãy sử dụng Trình kiểm tra web Safari.

Đảm bảo bật Trình kiểm tra web trên thiết bị để thiết bị macOS của bạn có thể gỡ lỗi JavaScript.

Tóm lại, ngữ cảnh xác thực là một dịch vụ web dựa trên JavaScript tạo điều kiện giao tiếp giữa máy chủ nhà cung cấp danh tính cho nhà cung cấp TV và khung Tài khoản VideoSubscriber.

Cảm ơn bạn.