210

Jacob Klapper: Xin chào! Chào mừng đến với Có gì mới trong việc chia sẻ.

Tên tôi là Jacob Klapper, và tôi là một kỹ sư trong nhóm Share Sheet.

Hãy đi sâu vào và xem Bảng chia sẻ mới trong iOS 13.

Bảng chia sẻ có tiêu đề xem trước mới ở trên cùng.

Điều này làm rõ những gì người dùng đang chia sẻ và cho phép họ tùy chỉnh nó.

Bảng chia sẻ mới cũng giúp việc chia sẻ nhanh chóng và dễ dàng hơn với hàng đề xuất cuộc trò chuyện dự đoán người dùng sẽ muốn chia sẻ với ai.

Cuối cùng, danh sách hành động mới cung cấp sự phân định rõ ràng giữa ứng dụng và hành động và đặt các hành động yêu thích của người dùng ở trên cùng để dễ dàng truy cập.

Bây giờ hãy nói về cách bạn có thể tận dụng thiết kế mới này để nâng cao trải nghiệm chia sẻ của người dùng.

Đầu tiên chúng ta sẽ nói về việc tùy chỉnh tiêu đề xem trước trong Bảng chia sẻ.

Sau đó, chúng tôi sẽ xem xét việc chọn tham gia các đề xuất hội thoại cho ứng dụng nhắn tin của bạn.

Và cuối cùng, chúng tôi sẽ xem xét một số phương pháp hay nhất.

Vì vậy, hãy nói về cách định cấu hình tiêu đề xem trước trong Bảng chia sẻ của bạn.

iOS 13 giới thiệu LinkPresentation API cho phép bạn trình bày các liên kết phong phú trong ứng dụng của mình.

UIActivityViewController tận dụng khuôn khổ này để hiển thị tiêu đề xem trước trong Bảng chia sẻ.

Điều này cho người dùng thấy rõ những gì họ đang chia sẻ từ ứng dụng của bạn.

Như một lợi ích bổ sung, khi người dùng chia sẻ qua Tin nhắn, bản xem trước liên kết trong bảng điểm sẽ khớp với bản xem trước liên kết từ Bảng chia sẻ.

Điều này làm tăng thêm tính liên tục cho trải nghiệm chia sẻ của người dùng.

Hãy cùng xem tiêu đề xem trước trong Safari.

Nó trông khá tốt ngay bây giờ, nhưng Bảng chia sẻ phải tìm nạp thông tin trang web để được hiển thị trong tiêu đề.

Hãy xem lại lần nữa.

Việc Share Sheet phải tìm nạp thông tin này là không đúng, bởi vì Safari có thể đã có nó rồi.

Để tăng tốc bản xem trước, Safari có thể sử dụng UIActivityItemSource để cung cấp siêu dữ liệu Share Sheet LinkPresentation được hiển thị trong tiêu đề.

Đây là một ví dụ về phương pháp siêu dữ liệu liên kết ActivityViewContoller mới trên UIActivityItemSource.

Đầu tiên, tạo một đối tượng LPLinkMetadata.

Sau đó đặt thuộc tính URL gốc và URL.

Đặt tiêu đề và biểu tượng Nhà cung cấp.

Và cuối cùng, trả lại siêu dữ liệu.

Hãy xem tiêu đề xem trước trông như thế nào bây giờ.

Như bạn có thể thấy, tất cả thông tin đều có sẵn ngay lập tức và Bảng chia sẻ không phải thực hiện bất kỳ tìm nạp siêu dữ liệu bổ sung nào.

Bây giờ hãy nói về các đề xuất cuộc trò chuyện mới trong Bảng chia sẻ.

Đề xuất hội thoại cho phép người dùng dễ dàng gửi nội dung đến những người nhận cụ thể mà không cần phải nhập tên của họ.

Trong khi các đề xuất hội thoại sử dụng Ý định SiriKit, bạn không cần thêm Tiện ích mở rộng giao diện người dùng SiriKit hoặc cung cấp hỗ trợ Siri để các đề xuất hoạt động.

Hàng đề xuất hội thoại được đặt thuận tiện ở đầu Bảng chia sẻ để người dùng có thể khởi chạy tiện ích mở rộng chia sẻ của bạn chỉ bằng một cú chạm đơn giản.

Hãy nói về cách chọn tiện ích mở rộng chia sẻ ứng dụng nhắn tin của bạn cho các đề xuất.

Quyên góp INSendMessageIntents trên tin nhắn gửi từ ứng dụng và chia sẻ tiện ích mở rộng.

Để cung cấp cho người dùng trải nghiệm phong phú hơn, hãy đảm bảo điền càng nhiều trường càng tốt, bao gồm, nhưng không giới hạn ở: người nhận, speakableGroupName và conversationIdentifier.

Khi tiện ích mở rộng chia sẻ của bạn được khởi chạy, thuộc tính ý định trên NSExtensionContext sẽ cung cấp thông tin về cuộc trò chuyện để điền vào giao diện người dùng của bạn.

Bước cuối cùng là thêm INSendMessageIntent vào mảng IntentsSupported trong Info.plist của tiện ích mở rộng chia sẻ của bạn Hãy xem một ví dụ về quyên góp INSendMessageIntent.

Chức năng này nên được gọi mỗi khi người dùng gửi tin nhắn trong ứng dụng của bạn hoặc tiện ích mở rộng chia sẻ.

Mã định danh cuộc trò chuyện giúp Bảng chia sẻ xác định người nhận hoặc nhóm sẽ nhận được tin nhắn.

Tên nhóm sẽ được sử dụng để hiển thị cuộc trò chuyện trong Bảng chia sẻ.

Trong trường hợp này, mảng người tham gia là một mảng các đối tượng INPerson.

Mỗi INPerson nên có một tên hiển thị và một hình ảnh để người dùng có thể dễ dàng phát hiện ra chúng trong Bảng chia sẻ.

Cuối cùng, tạo một INInteraction bằng cách sử dụng sendMessageIntent.

Đặt hướng đi, bởi vì người dùng đang gửi tin nhắn trong trường hợp này.

Cuối cùng, quyên góp sự tương tác.

Mảng IntentsSupported nên được chèn vào từ điển NSExtensionAttributes trong Info.plist của Share Extension của bạn.

Đảm bảo INSendMessageIntent được liệt kê là một trong những ý định được hỗ trợ hoặc các đề xuất hội thoại sẽ không được bật cho tiện ích mở rộng của bạn.

Khi bạn đã hoàn thành tất cả các bước để chọn tiện ích mở rộng chia sẻ của mình, bạn sẽ bắt đầu thấy các đề xuất cho người nhận được liên kết với tiện ích mở rộng chia sẻ của bạn.

Đề xuất có hình ảnh liên hệ hoặc nhóm và tên hiển thị, cùng với biểu tượng ứng dụng của bạn, vì vậy người dùng của bạn có thể dễ dàng xác định nó.

Bây giờ hãy kết thúc bằng cách xem qua một số phương pháp hay nhất cho Bảng chia sẻ.

Đầu tiên, hãy nói về cách tối ưu hóa các biểu tượng mở rộng hành động của bạn cho danh sách hành động mới.

Đầu tiên, các biểu tượng nên là 40 x 40 hình ảnh mẫu.

Chúng nên được phác thảo các glyphs mà không cần điền để phù hợp với các biểu tượng hệ thống.

Khi có thể, hãy sử dụng Biểu tượng SF hoặc hình ảnh biểu tượng.

Để làm điều này, hãy thêm khóa CFBundleSymbolName vào Info.plist của tiện ích mở rộng hành động của bạn.

Tiếp theo, hãy nói về giao diện người dùng thẻ.

Mới trong iOS 13, các tiện ích mở rộng chia sẻ sẽ được trình bày dưới dạng biểu mẫu.

Nếu tiện ích mở rộng chia sẻ của bạn yêu cầu trình bày toàn màn hình, bạn có thể chọn tham gia sử dụng khóa NSExtensionShareWants FullScreenPresentation trong Info.plist của tiện ích mở rộng của bạn.

Hầu hết các tiện ích mở rộng không nên cần điều này, nhưng một ví dụ điển hình về một tiện ích mở rộng cần sử dụng máy ảnh.

Cuối cùng, tôi muốn xem xét một số hành vi mới cho các tiện ích mở rộng chia sẻ trong iOS 13.

Tiện ích mở rộng chia sẻ hiện được hiển thị bằng cách sử dụng tên hiển thị của ứng dụng chứa chúng, không phải tên hiển thị của tiện ích mở rộng.

Nếu ứng dụng của bạn có nhiều tiện ích mở rộng chia sẻ, người dùng sẽ khó phân biệt chúng.

Bởi vì điều này, ứng dụng của bạn nên giới hạn bản thân trong một phần mở rộng chia sẻ duy nhất.

Nếu ứng dụng của bạn có nhiều tiện ích mở rộng chia sẻ trước đây, bạn có thể hợp nhất chúng thành một bằng cách thêm giao diện người dùng tùy chọn để cho phép người dùng của bạn chọn chức năng họ muốn khi họ khởi chạy tiện ích mở rộng chia sẻ của bạn.

Cảm ơn bạn đã tham gia cùng tôi vì Có gì mới trong việc chia sẻ.

Để biết thêm thông tin, vui lòng truy cập developer.apple.com.