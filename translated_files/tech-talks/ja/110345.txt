110345

こんにちは、ご参加いただきありがとうございます。

このプレゼンテーションでは、サブスクリプションと消費不可能なアプリ内購入にファミリー共有を実装する方法について説明します。

私はブライアンで、App Storeの収益化チームの一員であり、App Store Commerceチームの開発者擁護者であるHemantが参加しています。

今日は、アプリ内購入のファミリー共有の概要を説明します。

次に、この機能の利点について話し合い、それを最大限に活用するためのヒントをいくつか紹介します。

最後に、ヘマントはエンジニアリングと実装について議論します。

では、始めましょう。

リマインダーとして、ファミリー共有は、顧客がすべてのAppleデバイスでデジタル購入を家族と簡単に共有できる強力なツールです。

2014年に発売し、それ以来、ファミリー共有はAppleエコシステムの重要な部分となり、これまで以上に多くの顧客とより多くのデバイスにコンテンツとサービスをもたらしました。

また、ファミリー共有への継続的な投資の一環として、これらの機能をStoreKitに拡張しました。

そして、それが今日のセッションのすべてであり、自動更新サブスクリプションと非消耗型アプリ内購入のファミリー共有を開始することです。

ファミリー共有は、サブスクリプションと非消耗品の両方で利用できることに加えて、顧客の家族グループに含まれる最大5人の家族との購入共有を可能にします。

開発者として、既存のSKUに実装するか、ファミリー共有専用の新しいSKUを作成するかを選択できます。

App Store Connect内で簡単に実装でき、収益化KPIを改善するのに役立つ合理化された便利なユーザーエクスペリエンスを提供します。

では、アプリ内購入のファミリー共有は、あなたのビジネスにどのように影響しますか?

これは、加入者の成長、エンゲージメントの増加、解約の減少の4つの重要な分野で役立ち、これらはすべてより高い顧客生涯価値につながります。

マイケルを例に挙げて、これらの指標がどのように連携するかを以下に示します。

ファミリー共有は、あなたの加入者ベースを増やし、あなたの製品にマイケルを引き付ける説得力のある方法です。

マイケルを購読者として買収したら、彼は残りの家族にサブスクリプションを拡張することができ、最終的にはあなたのサービスとアプリに顧客のタッチポイントの数を乗算します。

そして、家族全員があなたの製品に従事している今、効果的なエンゲージメントマーケティングと組み合わせた説得力のあるコンテンツの提供は、彼らが戻ってくることができ、あなたの製品やサービスから価値を得る漸進的なユーザーの全体的な効果は、解約の減少です。

また、顧客は家族と購入を共有できるため、ファミリー共有も気に入っています。

iOSと一緒に設計されており、デバイスやアプリ間で一貫性のある、シームレスで使いやすいアウトオブボックスエクスペリエンスを提供します。

プライバシーを念頭に置いて構築されており、各家族が独自の購入資格を受け取るため、パスワード共有の必要性を排除します。

そして最後に、ファミリー共有は、1つではなく最大6つの資格を提供することで、アプリ内購入に価値を追加します。

これにより、顧客は購入にアクセスできる人数を拡張し、各家族にパーソナライズされたアプリ体験を提供します。

では、顧客と開発者がこの機能を最大限に活用する方法について話しましょう。

アプリ内購入にファミリー共有の使用を開始するには、まずファミリーグループを作成する必要があります。

世帯の1人の大人は、Apple IDを使用して最大5人の家族を招待することでこれを行うことができます。

各家族は自分のアカウントを使用しているので、彼らの経験はパーソナライズされ、プライベートなままです。

そして、各家族は、家族グループが作成されると、共有の対象となるグループのサブスクリプションとコンテンツに即座にアクセスできます。

顧客が設定アプリ内で共有設定をどのように管理しているかを見てみましょう。

これは、顧客が現在購読しているすべての製品を表示できるサブスクリプションの管理ページです。

ページの下部にある「家族と共有」トグルを使用すると、ファミリー共有が有効なSKUを自動的に共有するかどうかを選択できます。

このトグルはデフォルトでオンになっていますが、お客様はいつでもオプトアウトを選択できます。

リストされているアプリのいずれかを選択すると、購入を編集し、特定のサブスクリプションでファミリー共有がオンかオフになっているかを選択できます。

最初の設定は、左側の画像の「家族と共有する」設定に基づいています。

お客様は、既存のサブスクリプションで利用可能になった場合、ファミリー共有をオプトインするためにここに来ることもできます。

これらは、家族グループが家族共有サブスクリプションを共有するために必要な手順です。

ファミリー共有は、家族共有サブスクリプションの新規購入に対して自動的に有効になります。

既存のサブスクリプションがファミリー共有で利用可能になった場合、元の購入者は設定内で共有を選択する必要があります。

これは、お客様がサブスクリプション条件の更新を完全に認識できるようにするためです。

独自のマーケティングチャネルを通じてファミリー共有の可用性についてメッセージを送ることを強くお勧めしますが、App Storeが顧客に直接メッセージを送る2つのユースケースがあります。

購入者は、既存のサブスクリプションSKUでファミリー共有が利用可能になるとプッシュ通知を受け取り、新しいファミリー共有が有効なSKUを購入したが、以前にサブスクリプションの管理ページ内のファミリーメイントグルとの共有をオフにした顧客にもプッシュ通知が送信されます。

これらのプッシュ通知は、顧客をその特定のアプリの編集サブスクリプションページにリンクし、家族グループの残りの部分と共有することを選択できます。

そして、非消費のアプリ内購入のプロセスはわずかに異なります。

非消耗品のファミリー共有は、iCloudで購入共有が有効になっている限り、新規購入と既存の購入の両方で自動的に有効になります。

家族は購入を共有しており、アプリは購入履歴から隠されていません。

家族は自動的に新しい購入のコンテンツにアクセスできますが、既存の購入でファミリー共有が利用可能になると、新しく利用可能になったコンテンツのロックを解除するために、家族メンバーは購入の復元ボタンを選択する必要があります。

これは、家族との購入の共有トグルを含む画面で、非消耗を家族と共有するためにオンにする必要があります。

このページは、Apple IDの後にファミリー共有を選択し、設定アプリ内で共有を購入することで見つけることができます。

ファミリー共有機能をできるだけ見つけやすく魅力的にする方法はいくつかあります。

App Store Connectを使用すると、すべての顧客に対して簡単にファミリー共有を有効にできます。

全体的なサービス価値提案の一部として、サブスクリプションを家族と共有する能力を明確に伝えるために、オンボーディングフローに機能を含めることを検討してください。

ファミリー共有を別のサブスクリプション層として提供することも可能です。

この購入フローは、利用可能な階層を明確に区別し、画面下部のファミリー共有の概要ページへのリンクが含まれています。

より高い階層のサービスとしてファミリー共有を提供することを選択した場合は、App Store Connectの個々の階層または階層と上位層をグループ化することを忘れないでください。

これにより、このアプリ内例のように、アップグレードメッセージングを提供できます。これにより、個々の加入者のプランをファミリー層にアップグレードする価値が強調されます。

新しい家族が購入を完了した後、左側に示すように、家族がサービスを利用することを奨励することを思い出させる機能をマーケティングすることを検討してください。

そして右側には、サブスクリプションにアクセスできるようになったことを伝えている家族へのメッセージが表示されます。

ヘマントは、家族を認識し、シームレスにアクセスのロックを解除する方法を案内し、彼らがすぐにあなたのサービスを楽しむことができるようにします。

そして、これは夜空からの実例です。

彼らは既存のSKUですべての顧客にファミリー共有を提供しています。

左側には、サインアップフロー内でファミリー共有を明確に強調し、追加料金なしで利用できるように宣伝していることがわかります。

そして、右側には、新しいプランの所有者が特典を利用することを奨励する購入後の加入者オンボーディングカルーセル内の専用ページを機能に与えていることがわかります。

これは、チームと実施計画を見直す際に留意すべきいくつかの項目の要約です。

ファミリー共有がアプリ内購入に提供できる増分価値と、この機能を使用して新しい加入者をサービスに持ち込み、新規または既存のSKUでファミリー共有を有効にするかどうかを決定し、製品およびマーケティングチームと協力して、新規加入者を奨励し、ファミリー共有を通じてサービスとのエンゲージメントを高めるのに役立つマーチャンダイジングを作成する方法を検討してください。

私は今、それをヘマントに引き渡して、エンジニアリングと機能の実装について話し合います。

ありがとう、ブライアン。みなさん、こんにちは。

App Store CommerceチームのHemantです。

私は今日、アプリ内購入にファミリー共有を採用する際に考慮すべきエンジニアリングと実装の詳細をあなたと共有するためにここにいます。

カバーするセクションが3つあります。

App Store Connectで製品ごとにファミリー共有を有効にすることから始めます。

次に、あなたのアプリケーションが購入者の家族にどのようにサービスを受けることができるかについて話し合います。

そして、Family SharingのStoreKitとApp Storeサーバーの通知で利用可能なものを仕上げます。

では、ファミリー共有を有効にすることから始めましょう。

まず、App Store Connectにアクセスし、有効にしたいサブスクリプションまたは非消耗型製品に移動します。

ファミリー共有というラベルの付いた新しいセクションが表示され、オンにするオプションが表示されます。

確認ダイアログが表示されます。

そして、確認を選択すると、あなたの製品は数時間以内に、新規および既存のすべての顧客のために家族で共有可能になります。

さて、特定の製品に対して一度有効にすると、これを元に戻すことはできないことを強調したいと思います。

これは、顧客がこの機能に基づいて購入を決定した可能性があるためです。

App Store Connectで有効にすると、StoreKitは有効にした製品に対して家族で共有可能なプロパティを返すようになりました。

このプロパティは、StoreKit 2とオリジナルのStoreKitの両方で利用できます。

ブライアンが先に示したように、あなたはこれを認識するでしょう。

これは、アプリケーション内でファミリー共有の特定のUIを動的に制御できるようにするために必要なプロパティです。

そして、これはiOS 14以降から入手できます。

画面には、アプリケーションがStoreKit製品オブジェクトのプロパティをどのように使用できるかのサンプルコードがあります。

isFamilyShareableプロパティは、カスタムUIまたはコピーで家族の共有可能な製品を識別して商品化することを可能にするシンプルなブールです。

このプロパティは、サンドボックスとXcodeテスト環境でも利用でき、家族で共有可能な製品に対して作成したいエクスペリエンスの変更を簡単にテストできます。

それでは、ファミリー共有が家族のためにどのように機能するかを深く掘り下げてみましょう。

素晴らしいニュースは、ファミリー共有は、サーバーとアプリケーションが慣れ親しんだのと同じように機能するということです。

アプリケーションは、サーバー側またはクライアント側に変更を加えることなく、このファミリートランザクションをすでに処理している可能性があります。

そして、これは、これらの購入が家族全員が自動的に利用できるためです。

したがって、アプリケーションが起動されると、通常の購入と同様に、StoreKit経由で利用可能なトランザクションが表示されます。

これにより、各家族が自分のApple IDを使用してサブスクリプションまたは非消耗型製品にアクセスする権利があることを検証できます。

あなたのアプリが変更なしで家族のために機能することを前提に、あなたのアプリケーションがすべてのシナリオで最適な体験を提供することを保証するいくつかの重要なベストプラクティスを確認しましょう。

どのバージョンのStoreKitを使用していても、起動時にトランザクションに耳を傾け、アプリの存続期間中もそうし続けることが重要です。

これにより、アプリがトランザクションを見逃すことはありません。

これは、購入依頼、PSD2、またはアプリの外で取引が確定する可能性のあるサブスクリプションオファーコードなどの他のシナリオでも重要です。

顧客に製品を商品にする前に、最初に彼らのステータスを確実に知ることが別のベストプラクティスです。

これを行うには、StoreKitと直接対話するか、領収書を取得して検証することができます。

あなたは彼らがあなたが権利を与える必要がある過去の購入を持っているかどうかを判断することができ、これが新しい顧客であるシナリオでは、あなたは彼らに適切に商品化することができます。

これら2つのベストプラクティスを使用すると、顧客のエスカレーションを減らし、払い戻し、否定的なレビューを最小限に抑え、最終的には顧客体験を向上させることができます。

このテーマについてより深く掘り下げるには、WWDC Implement Proactive In-App Purchase Restoreのセッションをチェックしてください。

それでは、新しい購入が家族とそのデバイスにとってどのようなものかを説明しましょう。

購入者は、通常どおりデバイスで購入を開始します。

この製品は家族で共有可能であるため、家族ごとに取引が作成されます。

ベストプラクティスに従っている場合、アプリケーションには、起動時またはStoreKitからリアルタイムでこの新しいトランザクションが表示されます。

この時点で、他のトランザクションと同様に、サービスを検証し、資格を付与することができます。

注意すべき点は、家族取引の遅延を実施したことです。

この遅延により、購入者がファミリー共有を無効にすることを選択した場合、購入者はファミリー共有を無効にすることができます。

同じイラストを見てみましょうが、既存のサブスクリプション購入の場合です。

前述のように、既存の購入では、ファミリー共有はデフォルトで有効になっていません。

購入者は、既存のサブスクリプションごとに[サブスクリプションの管理]ページからファミリー共有を有効にする必要があります。

有効にすると、各家族のトランザクションはその後すぐに作成されます。

StoreKitとサーバーAPIで利用可能な所有権タイプのプロパティを使用すると、購入者と家族を区別できます。

ブライアンが以前に共有したように、アプリケーションが家族のためのカスタムオンボーディング体験をしたい場合、これは使用するプロパティです。または、サブスクリプションを管理できる顧客を特定したい場合は、購入した価値を探します。

このプロパティは、各トランザクションのオブジェクト内で見つけることができ、アプリの領収書でも入手できます。

次に、加入者イベントの処理。

購入者がファミリー共有を完全に無効にした場合や、購入者がサブスクリプションまたは非消耗の払い戻しを受けた場合など、家族からのアクセスを取り消す必要がある場合があるため、注意すべきユニークなシナリオがあります。

最後に、家族または購入者のどちらかがもはや家族単位の一部ではない場合があります。

シナリオを説明するために、iOS 14以降のStoreKitとApp Storeサーバーの通知から必要な情報があります。

このコード例で、このシナリオを確認する方法を見てみましょう。

トランザクションリスナーからトランザクションの更新を受け取ったら、revocationDateプロパティの存在を確認する必要があります。

これは、この取引が取り消され、顧客が製品を受け取る権利がなくなったことを示しています。

ただし、顧客に同じまたは異なる製品を受け取る権利を与える他の取引がある可能性があることに注意することが重要です。そのため、顧客が支払っているものを受け取っていることを確認する必要があります。

元のStoreKitをまだ使用している場合は、didRevokeEntitlementsForProductIdentifiersというコールバックメソッドを使用する必要があります。

これは、この顧客に対していくつかの資格が変更された可能性があるという同じシグナルであり、ステータスを確認する必要があります。

さらに、RevokeというApp Storeサーバーの通知タイプがあります。

このリアルタイムのサーバー間通知は、資格に変更があった可能性があることを示しています。

この通知は、バージョン1とバージョン2の両方の通知で利用できます。

したがって、このコールバックのいずれかを受け取ったら、正しい資格を再確立することが重要です。つまり、これらの顧客は複数の資格を持っていた可能性があるため、取引履歴全体を反復することが重要です。

したがって、1つが取り消された場合、同じまたは異なる製品に対して顧客に資格を与える別の取引があるかもしれません。

これを行うことで、そのような場合、サービスの中断がないことを確認することができます。

それでは、今日のApp Storeサーバーの通知タイプを簡単に確認しましょう。

ここでは、V2通知のリストがあり、素晴らしいニュースは、サーバー上でそれらの顧客の資格を最新の状態に保つために、あなたが受け取ることを期待する家族の関連するすべてのライフサイクル通知を受け取ることです。

そして、購入者にのみ関連するものは省略します。

まだV1通知を使用している場合は、同等のライフサイクルアップデートも取得します。

また、App Store Connectにサーバーエンドポイントをまだ追加していない場合は、いつでもサンドボックス環境で実験して、この重要なライフサイクルアップデートのサポートを開発することができます。

最後に、App Store Connectの販売とトレンドのセクションで利用可能なものを取り上げましょう。

サブスクリプションレポートでは、製品ごとに有料サブスクリプションがいくつあるかなど、質問があるかもしれません。

または、家族を含めて何人の顧客がアクセスできますか?

購読レポートで利用可能なのは、購読者列です。

この列には、サブスクリプションにアクセスできる顧客の数が表示されます。

これには、主要な購読者と資格のある家族が含まれます。

このフィールドは、レコードが製品の3つ以上のアクティブなサブスクリプションを表す場合にのみ入力されることに注意してください。

本日締めくくるために、新規または既存の製品でファミリー共有機能を検討することをお勧めします。

ファミリー共有の可用性とその価値提案を明確に伝える必要があります。

ファミリー共有は顧客のプライバシーを提供し、資格情報の共有を減らすのに役立つことを忘れないでください。

また、サブスクリプションを含むアプリ内購入に関するガイダンスは、Apple DeveloperのWebサイトで見つけることができます。