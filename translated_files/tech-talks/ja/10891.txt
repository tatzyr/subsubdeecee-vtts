10891

マイク・ボイラン：こんにちは、私の名前はマイク・ボイランで、macOSの展開と管理に焦点を当てたAppleのワールドワイドフィールドエンジニアリングチームのシニアコンサルティングエンジニアです。

macOS Montereyのためにあなたの組織を準備するのを手伝うことができて、本当に興奮しています。

macOS Montereyは、かつてないほど接続、共有、作成し、物事をより迅速に完了し、Appleデバイス間でシームレスに作業できるように設計された強力な機能を提供します。

また、多くのプラットフォームの変更、新しい管理機能、およびITのための多くの展開ワークフローの改善もあります。

macOS Big Surの展開では、Appleシリコンを搭載したMacコンピュータの展開と管理の変更を取り上げ、macOSインストーラーに焦点を当てた展開ワークフローを深く掘り下げました。

そして、WWDC21では、macOSの展開と管理に関連する幅広いトピックをカバーする多くのセッションを開催しました。

これらのセッションの重要なポイントのいくつかを要約しますが、あなたのフィードバックに基づいて、これらのセッション以降の最新情報も共有します。

最初の登録から展開と継続的な管理、サービスへの復帰まで、展開ライフサイクルのあらゆる面でmacOS Montereyに改善があります。

最初の登録から始めましょう。

自動デバイス登録により、組織はデバイスがボックスから削除された瞬間からデバイスを構成および管理し、MDMプロファイルを取り外し不可としてマークするなど、利用可能なすべてのMDM機能を使用できます。

自動デバイス登録は、組織が所有するデバイス用に設計されており、Appleから直接購入したデバイス、または参加しているApple認定再販業者または通信事業者から購入したデバイスに最適です。

一部のデバイスは、自動デバイス登録をサポートする通常のチャネル外から購入または寄付される可能性があることを知っています。これらのシナリオでは、App Storeで入手できるiPhone用のApple Configuratorを導入しています。

iPhone用Apple Configuratorを使用すると、macOS Montereyを実行しているサポートされているMacを組織のApple School ManagerまたはApple Business Managerに簡単に割り当てることができ、自動デバイス登録が有効にする優れたデバイス管理機能をすべて活用できます。

iPhone用のApple Configuratorを使用するには、macOS Montereyを実行しているApple T2セキュリティチップまたはAppleシリコンを搭載したMacコンピュータと、管理者またはデバイス登録マネージャーのユーザーがログインする必要があります。

セットアップアシスタントにある間に、iPhone用のApple ConfiguratorをMacに近づけるだけで、プロセスを開始できます。

iOSと同様に、システム環境設定のプロファイルペインからMDMプロファイルを削除することで、ユーザーが自動デバイス登録をオプトアウトできる30日間の暫定期間があります。

これには管理者の資格情報が必要で、Apple School ManagerまたはApple Business ManagerからMacも削除されます。

詳細については、WWDC21セッション「Apple Configuratorでデバイスを管理する」をご覧ください。

それでは、継続的な管理タスクの改善に目を向けましょう。

私たちは何年も前からシステム拡張機能について話してきましたが、あなたが協力する開発者がすでにカーネル拡張機能から移行していることを願っています。

システム拡張機能を展開および管理する場合、ユーザーへの不要な承認プロンプトを避けるために、ベストプラクティスは、アプリが拡張機能をロードしようとする前に、拡張機能を承認するために構成ペイロードを展開することです。

しかし、それが必ずしも可能ではないことを知っているので、macOS 11.3以降では、システム拡張機能のペイロードをインストールすると、拡張機能の状態が変わります。

たとえば、システム拡張機能がすでにユーザーの承認待ちの場合、ペイロードをインストールすると拡張機能がアクティブになります。

逆に、ペイロードを削除すると、システム拡張機能が無効になり、Macの次の再起動時に削除するようにマークされ、簡単な削除プロセスが可能になります。

しかし、macOS Montereyでシステム拡張機能をさらに簡単に削除できるように、システム拡張ペイロードにRemovableSystemExtensionsと呼ばれる新しい設定オプションがあります。

このリストのアプリは、アプリがアンインストールされたときなど、独自のシステム拡張機能を無効にすることができます。

このキーセットでは、システム拡張機能を削除するために管理者パスワードが不要になり、完全に自動化された削除が可能になります。

多くのシステム拡張機能では、システム拡張機能を完全に設定するには、単なるシステム拡張機能のペイロード以上のものが必要です。

たとえば、ネットワーク拡張フレームワークで構築されたシステム拡張機能は、コンテンツフィルターを設定する必要がある場合があり、コンテンツフィルターペイロードを使用して有効化および承認できます。

一部の拡張機能では、プライバシー設定ポリシーコントロールペイロードが必要な場合があり、システム拡張機能を使用する重要なアプリの通知を管理することもできます。

ソリューションを完全に有効にして構成するために必要な構成について、システム拡張機能ベンダーに確認し、同時に実行する予定の他のシステム拡張機能との互換性について問い合わせてください。

これは、複数のベンダーの製品を一緒に使用する予定がある場合に特に重要です。

FileVaultを使用し、個人用リカバリキー（PRK）をMDMでエスクローする組織の場合、macOS Montereyを使用すると、Appleシリコンを搭載したMacコンピュータに簡単にアクセスできます。

macOS Montereyでは、パスワードの変更やrecoveryOSによる中間再起動を必要とせずに、PRKを使用してMacを直接起動できます。

これにより、ユーザーのトラブルシューティングや支援のために、Macへのより高速なアクセスが可能になります。

このAppleシリコンMacBook Proでは、Appleシリコンに新しい統一されたログイン体験が示されています。

ログイン画面は、FileVaultが有効になっていても、ユーザーのリストの代わりにユーザー名とパスワードフィールドを表示するオプションを尊重していることに注意してください。

PRKを使用してMacを起動するには、Option-Shift-Returnを押して、回復キーフィールドにPRKを入力するだけです。

終了したらReturnキーを押すか、次へ進む矢印をクリックしてMacを起動します。

今後、FileVaultで、個人用リカバリキーまたはIRKとも呼ばれる機関リカバリキーを使用するための推奨事項について話し合いましょう。

IntelベースのMacコンピュータでは、IRKを使用して、FileVaultで暗号化されたMacのロックを解除したり、コマンドラインを使用してFileVaultを無効にしたり、より一般的には、ターゲットディスクモードを使用してデータを回復したりできます。

IRKを大規模に使用することは現在、レガシーと見なされており、IRKはAppleシリコンを搭載したMacコンピュータでは機能的に使用しません。

Appleシリコンを搭載したMacコンピュータには、ターゲットディスクモードではなくMac共有モードがあり、使用するにはrecoveryOSにアクセスする必要があります。

または、個人用リカバリキー（PRK）は、暗号化されたボリュームごとに一意であり、MDMにエスクローすることができ、使用後に簡単にキーを回転させることができます。

Appleシリコンで示したように、Macで直接使用して、recoveryOSにアクセスしたり、macOSを起動したりすることもできます。

IntelベースのMacコンピュータのこのプロセスは似ています。

PRKは組織にとって非常に堅牢なツールであり、現在機関の回復キーを使用している組織は、今後ではなく個人の回復キーを使用する必要があります。

私たちは、macOSにユーザーのプライバシー保護を追加し続けています。

macOS Montereyでは、プラグイン可能な認証モジュール（PAMモジュール）のインストールまたは設定を必要とするアプリまたはサービスでは、ユーザーの承認が必要になりました。

承認は、フルディスクアクセスまたはシステム管理者ファイルへのアクセスを許可するMDMのプライバシー設定ポリシー制御プロファイルを使用して付与できます。

多くのMDMはすでにエージェントツールにこれらのカテゴリへのアクセスを許可しているため、この新しい保護に対応するために既存のワークフローをまったく変更する必要がない可能性があります。

組み込みのKerberos拡張機能は、実際にMacコンピュータ自体をディレクトリにバインドすることなく、オンプレミスのアクティブディレクトリ環境へのディレクトリ接続を提供する方法を提供します。

1対1の展開では、可能な限り従来のディレクトリバインディングやモバイルアカウントの代わりに、ローカルアカウントと一緒にKerberos拡張機能またはそのようなソリューションを使用することをお勧めします。

macOS Catalina、iOS、iPadOS 13のオペレーティングシステムにKerberos拡張機能を構築し、macOS上のEnterprise Connectの代替品です。

エンタープライズコネクトはmacOS Montereyの時点で正式に日没し、macOS MontereyでのEnterprise Connectの実行はサポートされていません。

Kerberos拡張機能には、macOS Montereyにいくつかの新しいオプション設定があります。

Macコンピュータで使用するために、優先するKerberos Distribution Center（KDC）を指定できるようになりました。

また、Kerberosクレデンシャルへのアクセスは、管理対象として明示的にインストールされている構成されたアクセス制御リストのバンドルIDと一致するアプリのみに制限できます。

さらに、klistのチケットビューアを含む標準システムKerberosユーティリティが資格情報にアクセスして使用できるようにすることもできます。

また、必要なパスワードの変更を確認するための信頼性も向上しました。

Kerberos拡張機能の詳細については、WWDC 2020の「Leverage Enterprise Identity and Authentication」セッションをご覧ください。

macOS 10.15 Catalina以降、Python、Ruby、Pearlなどのスクリプト言語ランタイムは、レガシーソフトウェアとの互換性のためにmacOSに含まれています。

将来のバージョンのmacOSには、デフォルトではスクリプト言語ランタイムは含まれず、追加のパッケージをインストールする必要があるかもしれません。

使用するソフトウェアがスクリプト言語に依存する場合、ベンダーは代わりにアプリ内にランタイムをバンドルすることをお勧めします。

macOS Montereyでは、以前にバンドルされたシステムPHPが削除されました。

Python 2は、2020年1月にPythonソフトウェア財団によって正式に日没し、使用は推奨されていません。

macOS Montereyでは、アプリが組み込みシステムPython 2.7を使用しようとすると、グラフィカルなダイアログが表示されます。

ダイアログには、呼び出し元のアプリ情報が表示されることに注意することが重要です。

したがって、MDMエージェントがシステムPythonを呼び出すためにあなたが書いたスクリプトを実行する場合、実際にはアプリでPythonをまったく使用していない場合でも、ダイアログにエージェントアプリの名前が表示される場合があります。

そのため、システムPythonの使用についてスクリプトを確認し、必要に応じて更新することをお勧めします。

将来のバージョンのmacOSにはPython 2.7は含まれません。

Python 3を含む独自のランタイムをインストールして管理することをお勧めします。

必要に応じてシステムPython 3を呼び出すこともできますが、Xcodeコマンドラインツールをインストールする必要があります。

macOS Montereyでは、socketfilterfwコマンドラインツールまたはMDMを使用してシステムファイアウォールを管理することは相互に排他的です。

ファイアウォールのオプションがMDMを使用して構成されている場合、コマンドラインツールでは、管理者による設定の変更は許可されません。

ロギングをオンにし、どのレベルに設定するなど、ロギングオプションの設定を有効にすることで、macOS MontereyのシステムファイアウォールのMDM管理性を強化しました。

現在設定されているロギングオプションは、コンプライアンスレポートを支援するために、セキュリティ情報クエリでMDMにも提供されています。

MDMを使用してシステムファイアウォールを管理する場合、着信接続の署名付き、ダウンロード済み、またはシステムアプリを許可するオプションは常に有効になっていることに注意してください。

これらは、許可、ダウンロード、署名、有効、許可、署名、有効、オンのコマンドラインオプションに戻ります。

macOS MontereyのTLS証明書の信頼にはいくつかの変更があります。

DNS名のアンダースコアが許可され、同じextenIDを持つ複数の拡張が拒否され、キーの使用がより厳密に強制され、エンタープライズルートCAのpathLenConstraintsが強制されます。

SMIMEの場合、RSAキーが2048ビット未満の証明書は信頼されなくなりました。

macOS Big Surでは、管理対象アプリの設定とフィードバックのサポート、MDMコマンドでアプリを削除する機能、またはデバイスがMDMから登録を解除したときにアプリを削除する機能など、macOSで管理対象アプリを有効にしました。

macOS Montereyの新機能では、BYOD環境にユーザー登録を使用する場合、管理対象アプリデータは別のボリュームで分離され、CloudKitを使用する管理対象アプリは、MDMプロファイルに関連付けられた管理対象Apple IDを使用するようになりました。

アプリが削除されると、データコンテナは消去されます。

管理対象Apple IDは、ユーザー登録用のiCloud Driveもサポートするようになりました。

組織のiCloud Driveは、Finderに追加の場所として表示されます。

詳細については、WWDC 2021の「アカウント主導のユーザー登録の発見」セッションをご覧ください。

macOS Montereyでは、Appleシリコンを搭載したMacコンピュータが、エンタープライズネットワークでのローミングを最適化するための802.11k、v、およびr Wi-Fi標準をサポートするようになりました。

IPv6-Only-Preferredオプションは、macOS MontereyをサポートするすべてのMacコンピュータのDHCPv4でもサポートされるようになりました。これにより、IPv6対応デバイスはIPv4アドレスの割り当てを放棄できます。

また、Safariでウェブを閲覧する際のユーザーのプライバシーを保護するのに役立つ新しいiCloud+機能であるiCloudプライベートリレーの使用を防止するための制限もあります。

DNSを使用して特定のネットワーク上のiCloudプライベートリレーをブロックできますが、この制限により、そもそもMacで有効にできなくなります。

プロキシ自動設定またはPACファイルを使用して、Macコンピュータにプロキシを使用するように設定する場合、macOS Montereyには注意すべき重要な変更があります。

PACファイルにHTTP URLを使用することは非推奨です。

DNSを介したWebプロキシ自動検出（WPAD）は、この変更の影響を受けません。

ただし、DHCPオプション252を介したWPADを含むPACファイルの他の構成では、macOS Montereyは、最終的にHTTP URLにフォールバックする前に、最初にHTTPS経由でPACファイルにアクセスしようとする場合があります。

今後のPACファイルには安全なURLスキームのみを使用する必要があるため、これらの変更についてネットワークチームに相談してください。

それでは、組織にとってデバイス管理の非常に重要な側面、つまりソフトウェアアップデートの管理について話しましょう。

WWDC 2021では、ソフトウェアアップデートチームの同僚ルーシーが、Appleプラットフォーム全体のソフトウェアアップデートの管理に関する改善を詳述する素晴らしいセッションを行いました。

そのセッションには、MDM開発者と管理者向けの豊富な情報が含まれており、ぜひご覧ください。

ここでは、特に管理者としてあなたのために、いくつかの追加のガイダンスを提供します。

まず、多くの組織が現在、macOSのソフトウェアアップデートを管理するためにツールをラップしていることを認識しているため、ソフトウェアアップデートのコマンドラインツールから始めましょう。

ソフトウェアアップデートコマンドラインツールはまだサポートされており、非推奨ではありません。

IntelとAppleシリコンの両方で実行するには高度な権限が必要ですが、Appleシリコンでは、ボリューム所有者がソフトウェアアップデートをインストールするためのユーザー資格情報を要求します。

ボリュームの所有権の詳細については、セッションの最後に説明するリソースセクションを参照してください。

デフォルトでは、このツールはこれらの資格情報をインタラクティブに要求しますが、macOS Montereyには、ユーザーの資格情報をコマンドに直接渡すオプションも含まれています。

macOS Montereyでは、ログインウィンドウでソフトウェアアップデートCLIツールを使用して、ソフトウェアアップデートをインストールすることもできます。

ソフトウェアアップデートコマンドラインツールはまだサポートされており、Appleシリコンの認証要件に対応するために既存のツールやワークフローを変更できる場合がありますが、MDMとScheduleOSUpdateCommandを使用してソフトウェアアップデートを展開して、組織内で今後のMacコンピュータを管理する必要があります。

MDMを使用すると、IntelベースのMacコンピュータとApple Siliconを搭載したMacコンピュータの両方で更新展開ワークフローを統一するのに役立ちます。

ソフトウェアアップデートの管理には、テスト、展開、実施の3つの段階があります。

テストとソフトウェアのアップデートを延期する機能から始めましょう。

OSのベータ版をリリースすると、AppleSeed for ITのテスト計画やフォーカスリリースノートなど、リリース前に環境でOSをテストする時間とツールがあります。

アップデートが公開されると、MDMから監視対象のMacコンピュータに適用できるソフトウェアアップデートの延期制限により、指定された期間が終了するまでソフトウェアアップデートがユーザーに提供されるのを防ぎます。

この期間は1日から90日まで設定可能です。

延期期間に対するMacの更新の可視性は、クライアントのMacコンピュータが最初に更新を発見したときではなく、更新の公開日に基づいています。

macOS 11.3以降では、Safariなどのメジャー、マイナー、および非OSアップデート用に、別々の独立した延期ウィンドウを設定できます。

また、すべての更新タイプの最大延期ウィンドウは90日ですが、ユーザーとして主要なmacOSアップグレードをインストールするには、管理者の資格情報とインストールアシスタントアプリケーションを実行する必要があることに注意してください。

また、延期された更新は、ソフトウェア更新設定ペインまたはソフトウェア更新コマンドラインツールの出力には表示されませんが、MDMには特定の更新プログラムをインストールできることに注意することは非常に重要です。

言い換えれば、MDMがインストールできるようにするために、アップデートをユーザーに表示する必要はありません。

これにより、たとえば、環境内の特定のアップデートを完全にスキップし、必要に応じて新しいOSアップデートにジャンプするようにMacコンピュータに指示する柔軟性が得られます。

テストが完了したら、次にソフトウェアアップデートを展開する準備が整いました。

MDMを使用してデバイスを更新する場合、MDMはScheduleOSUpdateCommandを送信します。

macOSのコマンドには、「インストールアクション」と呼ばれるいくつかの異なる動作モードがあります。

利用可能なインストールアクションは、DownloadOnly、NotifyOnly、InstallASAPまたはdefault、InstallForceRestart、InstallLaterです。

今、それらを通過しましょう。

DownloadOnlyは、出席したデバイスと無人デバイスの両方が、インストール時間前にバックグラウンドでアップデートをダウンロードするのに便利です。

NotifyOnlyは、インストールのためのアクションがあることをユーザーに警告するために使用できます。これらのオプションのいずれも実際にインストールを開始しません。

InstallASAPまたはDefaultは、macOSの主要なアップデートメカニズムです。

無人またはリモートのmacOSデバイス、またはできるだけ早く更新を強制したいが、重要なタスクの実行を終了する必要がある場合など、現在更新のために再起動をブロックする必要があるアプリケーションを尊重する状況に最適です。

アプリケーションが再起動をブロックしない限り、このアクションは、ユーザーが60秒以内に再起動をキャンセルするための通知に表示されるオプションでダウンロードが終了すると、できるだけ早く更新を実行します。

macOS Montereyでは、メジャーアップデートとマイナーアップデートの両方で60秒のカウントダウンタイマーが表示されます。

InstallASAPは、MDMを使用した主要なmacOSアップグレードに使用できるインストールアクションでもあります。

たとえば、最初に完全なmacOSインストーラーを個別にダウンロードする必要はなく、startosinstallなどのツールを使用してスクリプトを使用せずに、MDMのみを使用してMacをmacOS Big Sur 11.5以降からmacOS Montereyにアップグレードできます。

InstallForceRestartは、ブロックされたアプリケーションを無視し、できるだけ早くアップデートをインストールするため、アップデートをインストールするための究極の強制アクションです。

これは、デバイスがオンラインである限り、または現在の瞬間にデバイスで何が起こっているかが問題ではない無人またはリモートシステムの場合、絶対日までにコンプライアンスを確保するのに理想的です。

このアクションは、アプリケーションをブロックするために停止しないため、データ損失を引き起こす可能性があるので、細心の注意を払って使用する必要があります。

最後になりましたが、InstallLaterです。

InstallLaterを使用すると、可能であればその夜にインストールするための更新をスケジュールすることができ、標準のソフトウェアアップデートシステムがユーザーに提供するInstallTonightオプションに似ています。

デバイスは、デバイスが最も使用されていないときなどの条件を使用して、機械学習に基づいて時間枠を選択し、通常午前2時から4時の間に行われるインストールを行います。

これらのインストールアクションを組織にとってさらに有用にするための多くの変更がmacOS Montereyで行われました。

バッテリー寿命が50%以上のInstallLaterをサポートすることは、ソフトウェアアップデートの適用範囲をさらに拡大するのに役立ちます。

次に、実際に開始およびインストールするすべてのインストールアクションは、Appleシリコンへのインストールを承認するためにMDMからのブートストラップトークンの使用をサポートし、自動的に発生したユーザーインタラクションなしで更新を実施するために必要です。

ただし、ユーザーが通知に基づいて行動し、システム環境設定を通じて開始および更新すると、Appleシリコンでパスワードの入力を求められることに注意してください。

ユーザーは、更新を承認するために管理者である必要ではなく、ボリュームの所有者である必要があります。

macOS Montereyは、標準ユーザーがMacにログインしているときのOSアップデートのインストールと、ユーザーがログインしていないときのログインウィンドウからのOSアップデートのインストールをサポートしています。

これは、コンピュータラボやデータセンターなどのリモートまたは無人展開との互換性を確保するのに役立ちます。

また、macOS Montereyでは、12.1のようなProductVersionを使用してアップデートをインストールする機能があります。

これにより、利用可能なソフトウェアアップデートを特定する複雑さが軽減されます。

MDMは、すべてのデバイスを照会し、そのクエリをMDMがすでに定期的に取得するデバイス情報の一部であるソフトウェア更新デバイスIDと比較する代わりに、単一のサーバー側のクエリを作成できるようになりました。

これにより、更新プロセスは、デバイスに送信する特定のバージョンを選択するのと同じくらい簡単になります。

ベータサイクル中は、同じバージョンを使用して、利用可能な最新のベータ版をインストールすることもできます。

たとえば、12.1を送信すると、デバイスがすでに12.1の以前のベータ版を実行していた場合でも、12.1の最新のベータ版がインストールされます。

では、アップデートの強制を進めましょう。

先に述べたように、InstallForceRestartアクションは究極の強制アクションであり、すぐに更新を強制する必要があるときはいつでも使用できます。

しかし、定義されたタイムラインを知っている場合、または単に組織のセキュリティポリシーの遵守を確実にする必要がある場合、macOS Montereyの新しいユーザー延期オプションは素晴らしい選択です。

新しいユーザー延期クォータオプションを使用すると、更新が実施される前に、Macがユーザーに更新のインストールを促す最大回数を指定できます。

これは、MaxUserDeferralsと呼ばれる新しいキーでInstallLaterインストールアクションを使用します。

必要な管理された更新プログラムのインストールが要求されたことを通知する通知がユーザーに提示されます。

通知のタイトルは必須の管理された更新であり、いつインストールするかをユーザーに尋ねます。

通知を展開すると、アップデートをすぐにインストールするか、その夜にインストールするか、延期するかを選択できます。

また、ユーザーの残りの延期数も含まれており、ユーザーが通知を見るたびに1つ減少します。約1日1回です。

ユーザーが通知を無視した場合、または延期を使用する場合、その夜はアップデートをインストールしようとは行われません。

これは、WWDCで説明された行動から呼び出したかった重要な変化です。

延期の最大数に達すると、通知は、延期が残っていないこと、および更新がその夜に自動的にインストールされるようにスケジュールされていることをユーザーに通知します。

MacOSは、InstallForceRestartアクションが使用されたかのようにアップデートを強制的にインストールし、デバイスを電源に接続するか、続行するには50%以上のバッテリー寿命が必要です。

これらの条件が満たされない場合、デバイスは次の夜に再度更新を強制しようとします。

macOS MontereyでMDMを使用してソフトウェアアップデートを管理するためのこれらの改善により、より簡単にコンプライアンスを確保し、フリート全体でソフトウェアの互換性を管理し、IntelベースのMacコンピュータとAppleシリコンを搭載したMacコンピュータの両方で更新展開ワークフローを統一することができます。

ソフトウェアアップデート管理に関するフィードバックを引き続き提出することをお勧めします。

AppleSeed for ITプログラムを通じてフィードバックを提出するには、必ずApple School ManagerまたはApple Business Managerの管理対象Apple IDを使用してください。

それでは、macOS Montereyが信じられないほどの改善を提供するサービスへの復帰を探りましょう。

macOS Montereyは、すべてのコンテンツと設定をMacに消去します。

すべてのコンテンツと設定を消去すると、Macを現在のOSバージョンにすばやくリセットし、その過程ですべてのユーザーデータを暗号的に削除します。

すべてのコンテンツと設定を消去は、Apple T2セキュリティチップとAppleシリコンを搭載したMacコンピュータでサポートされています。

macOS MontereyでMDMからサポートされているMacモデルにEraseDeviceCommandを送信すると、デフォルトですべてのコンテンツと設定の消去が開始されます。

消去と呼ばれる以前の消去デバイスの動作は、フォールバック動作としてのみ使用され、それについては後ほど説明します。

Appleシリコン搭載のMacコンピュータでは、recoveryOSで変更した起動セキュリティ設定もリセットされます。

そして、ユーザーが自分のMacを簡単に消去できるようにしたくないかもしれないことを知っているので、管理者としても、ユーザーがmacOSで消去アシスタントを実行するのを防ぐために、MDMから利用できる制限があります。

MDMから開始する際に、すべてのコンテンツと設定を消去するために知っておくべきことがいくつかあります。

Macは内部の密閉されたシステムボリュームから起動する必要があり、複数ある場合はディスク上の最初のパーティションから起動する必要があります。

Macに複数のボリュームまたはパーティションがある場合、それらはプロセス中に削除されますが、外部ボリュームは消去されません。

Appleシリコンを搭載したMacコンピュータには、消去を承認するためにMDMから入手可能なブートストラップトークンが必要です。

また、Apple T2セキュリティチップを搭載したIntelベースのMacコンピュータは、フルセキュリティモードである必要があります。

また、EFIファームウェアのパスワードが設定されている場合は、すべてのコンテンツと設定の消去を開始する前にクリアする必要があります。

macOS 12.01以降では、MDMはSetFirmwarePasswordCommandを送信してファームウェアのパスワードをクリアし、続いてEraseDeviceCommandを送信して、コマンド間の中間再起動を必要とせずにすべてのコンテンツと設定を消去できることに注意してください。

MDMで開始されたすべてのコンテンツと設定を消去するための1つ以上の要件が満たされない場合、デフォルトでは、Macは消去と呼ばれるmacOS 11の動作にフォールバックします。

消去には、Macを使用する前にmacOSを完全に再インストールする必要があります。

MDMのEraseDeviceCommandで新しい消去動作キーを指定することで、オプションでこのフォールバック動作を制御できます。

Macが消去にフォールバックすべきかどうかを指定でき、各オプションはMDMに送り返される応答コードを制御します。

代わりにすべてのコンテンツと設定を消去するだけなのに、誤ってmacOSを完全に再インストールする必要がないようにしておくと便利なので、このオプションのサポートについてMDMベンダーに確認してください。

MDMからすべてのコンテンツと設定を消去するには、MacコンピュータがrecoveryOSで再アクティブ化する必要があります。

しかし、macOS 12.1以降では、MDMから開始されたすべてのコンテンツと設定を消去し、昨年macOS Big Surで導入したAuto Advanceと組み合わせて使用できることを発表できることを非常に嬉しく思います。

イーサネットに接続されている場合、Macはデバイスを消去し、recoveryOSで再アクティブ化し、macOSに再起動して自動的にMDMに登録するサイクル全体を完了できます。

これら2つの技術を組み合わせることで、リモートMacコンピュータの信じられないほど迅速なサービス復帰と再プロビジョニング戦略が得られます。

Appleシリコンを搭載したMacコンピュータでは、このプロセスを進める際にmacOSに再起動しても言語選択は表示されないことに注意してください。

次に、macOS Montereyで注意すべき、組織に役立つ可能性のあるいくつかの追加の変更を簡単に説明します。

macOS MontereyはMacにショートカットをもたらします。

ショートカットはMacの自動化の未来であり、macOS MontereyはAutomatorから数年にわたる移行を開始します。

私たちはまだAutomatorとそれに依存するすべての人を深く気にかけているので、移行をできるだけスムーズにするために、AppleScriptとシェルスクリプトの完全なサポートを含む、ほとんどの自動化されたワークフローをショートカットに変換できる移行ツールを構築しました。

この移行の詳細については、WWDC 2021の「Meet Shortcuts for macOS」セッションをご覧ください。

macOS Montereyでは、別のAppleデバイスからMacにコンテンツを共有、再生、または提示できるようになりました。

これは、学業を簡単に共有したり、アプリケーションのデモを提供したり、単にいくつかの可能性をリストアップするために、より簡単にディスプレイをミラーリングまたは拡張したりするのに非常に役立ちます。

Macは現在、AirPlayスピーカーとしても機能し、マルチルームオーディオを作成するためのセカンダリスピーカーとしても機能します。

AirPlayレシーバー機能はデフォルトでオンになっており、デフォルトでは同じApple IDを持つデバイスのみを受け入れるように設定されていますが、この自動検出は管理対象Apple IDでは無効になっています。

システム環境設定の共有ペインで、AirPlayレシーバーをオフにしたり、セキュリティ設定を変更したりできます。

同じネットワークオプションは、通知センターの通知を介して許可を求め、ユーザーにデバイス固有のPINコードの入力を要求することに注意してください。

WI-FIに接続されていない場合でも、Everyoneオプションは、送信者と受信Mac間のピアツーピアの検出と接続をサポートします。

初めてデバイスからAirPlay接続を開始すると、AirPlayコード画面にPINコードが表示されます。

接続すると、AirPlayセッションがMacにフルスクリーンで表示されます。

特にmacOS Montereyの新機能ではありませんが、Apple School ManagerとApple Business ManagerのApps and Books APIの新しいバージョンを強調したいとしました。

このAPIは、ユーザーまたはデバイスにアプリとブックのライセンスを割り当てるためにMDMによって使用されます。

新しいアプリと書籍APIは、非同期処理を使用し、割り当て、資産、および登録ユーザーへの状態変更のリアルタイム通知を提供し、リクエストサイズの増加をサポートします。

例として、10,000人のユーザーへの25のアプリの展開は、25,000のリクエストを受けていましたが、今ではわずか10のリクエストで達成できます。

これにより、教育の新学期シーズン、従業員のオンボーディングイベント、大規模なデバイスの更新など、大規模なデバイス展開の速度と信頼性が大幅に向上するはずです。

詳細については、WWDC 2021の「アプリと書籍のMDM割り当ての改善」セッションをご覧ください。

それでは、macOS Montereyの展開を成功させるのに役立ついくつかのリソースを確認しましょう。

新しいAppleソフトウェアがリリースされる前に、組織でテストすることを強くお勧めします。

AppleSeed for ITプログラムでは、Apple School ManagerまたはApple Business Managerの学生以外の管理対象Apple IDは、招待を必要とせずに参加できます。

AppleSeed for ITでは、環境でテストするためのプレリリースのAppleソフトウェアにアクセスしてダウンロードし、詳細なテスト計画を含み、フィードバックの提出を組織専用のキューに入れることができます。

リリースノートも組織を対象としており、他の同僚にフィードバックを簡単に再割り当てできます。

Apple Device Deployment Referenceは、ペイロードを組み合わせることができるかどうか、デバイス、ユーザー、またはその両方でサポートされているかどうかなど、環境内のデバイスを構成するのに役立つMDMペイロード、コマンド、およびクエリに関する情報を含む技術文書です。

また、インフラストラクチャとサービスの統合に関するサポート情報も提供します。

主にMDM開発者を対象としていますが、MDM開発者ドキュメントは、MDMの仕組みとプロトコルレベルで利用可能なオプションを理解するのに役立つ、非常に有用で徹底的なリソースです。

Appleプラットフォームセキュリティドキュメントは、Appleプラットフォーム全体のすべてのソフトウェア、ハードウェア、およびサービスに関するセキュリティ情報を提供します。

AppleCare Professional Support Webサイトは、AppleCare for Enterpriseを含むIT部門およびヘルプデスク向けの各AppleCare OSサポートサービスのプログラム情報をホストしています。

ボリュームの所有権情報は、Apple Device Deployment ReferenceとApple Platform Security Guideに記載されています。

今日議論した情報をカバーするAppleサポート記事がいくつかあります。

私たちは、macOS Montereyのすべての素晴らしいプラットフォームの変更、新しい管理機能、および展開ワークフローの改善に非常に興奮しており、あなたもそうであることを願っています。

見てくれてありがとう。