208

ClockKitフレームワークを使用すると、アプリのデータを時計の文字盤に表示できます。

これらの領域は合併症と呼ばれます。

合併症は、手首を上げるたびに人々をお気に入りのアプリにつなぎ、一日を通して情報を提供する素晴らしい方法です。

コンプリケーションをタップして、アプリにすばやくアクセスすることもできます。

Apple Watch Series 4では、ClockKitに新しいコンプリケーション機能を追加しています。これにより、新しいインフォグラフとインフォグラフモジュラーウォッチフェイスの魅力的なフルカラーコンプリケーションを作成できます。

インフォグラフの文字盤では、これらの新しいコンプリケーションは信じられないほどの新しいディスプレイの隅に広がることができます。

インフォグラフモジュラーウォッチフェイスでは、ウォッチフェイスの真ん中に、アプリの情報をさらにフルカラーで表示できるようになりました。

合併症は家族に分けられます。

これらは、情報が画面上でどのように表示されるかを決定します。

Apple Watch Series 4には、Graphic Corner、Graphic Circular、Graphic Bezel、Graphic Rectangularの4つの新しいファミリーが追加されました。

各コンプリケーションファミリは、ここで見られるグラフィックサーキュラーファミリのように、システム定義のテンプレートを使用して情報がどのようにレイアウトされるかを決定します。

データを表示するために選択できるテンプレートはたくさんあります。

コンプリケーションファミリのテンプレートは、テキストから画像、まったく新しいゲージまで、ClockKitフレームワークからデータプロバイダークラスのさまざまな組み合わせで構成されています。

インフォグラフとインフォグラフモジュラーウォッチフェイスには、新しいフルカラー画像プロバイダーと新しいゲージプロバイダーを追加しました。

これらについて学びましょう。

まず、まったく新しいゲージプロバイダーです。

ゲージプロバイダーを使用すると、使用しているコンプリケーションテンプレートファミリに応じて、完了した進捗状況または範囲内の値をさまざまな方法でユーザーに表示できます。

タイマーのコンプリケーションでここで見られるように、時間間隔ゲージを使用して、変化する値を自動的にアニメーション化することもできます。

ゲージプロバイダーでは、単一の色を提供するか、ゲージに沿ってグラデーションの色を指定してグラデーションを提供できます。

また、データが進むにつれて色またはグラデーションがゲージを埋めるかどうか、またはそれが範囲であり、リングを使用して値を示すかどうかを指定することもできます。

次に、イメージプロバイダーがあります。

画像プロバイダーを使用すると、既存の時計の文字盤で使用するために着色可能な画像または1色の画像を表示し、現在はインフォグラフとインフォグラフのモジュラー時計の文字盤でフルカラー画像を表示できます。

最後に、さまざまなテンプレート全体でテキストを使用できるテキストプロバイダーがあります。

これらは、テキスト、日付、時間、時間範囲、さらには2つの日付または時間間の自動カウントダウンまたはカウントアップを表示するために使用できます。

一握りのコンプリケーションファミリーテンプレートでは、それぞれが独自の色合いを持つ複数のテキストプロバイダーを一緒に使用して、1つの多目的文字列を作成することもできます。

これは、アプリがさまざまなデータに対して特定のブランディングを持っている場合に本当に便利です。

ゲージ、画像、テキストプロバイダーに精通したので、インフォグラフとインフォグラフモジュラーウォッチフェイスで利用可能な新しいグラフィックコンプリケーションファミリーテンプレートを見て、プロバイダーを組み合わせてさまざまな方法でデータを表示する方法を学びましょう。

最初の新しいコンプリケーションファミリーのテンプレートは、グラフィックコーナーです。

これはインフォグラフの文字盤で使用できます。

このテンプレートは、ディスプレイの隅に沿ってカーブし、これまでにないほど多くのコンテンツを可能にします。

グラフィックコーナーのテンプレートには、使用するプロバイダーの一握りの異なる組み合わせがあります。

テキスト付きのゲージプロバイダー、画像付きのゲージプロバイダー、テキストプロバイダーのセット、画像付きのテキストプロバイダーを使用できます。

そして最後に、フルカラー画像を単独で使用できます。

さて、他のコーナーコンプリケーションとの一貫性を保つために、ディスプレイの周りをカーブするプロバイダーを使用することをお勧めします。

さて、テキスト付きのゲージプロバイダーを使用するグラフィックコーナーコンプリケーションを作成する方法のコード例を見てみましょう。

天気アプリに似たものを作りましょう。

まず、デザイナーと協力して、テキストの色合いの色のいくつかの値を取得する必要があります。

この例では、最高気温、最低気温、現在の気温を示すテキストがあります。

また、色がグラデーションを構成する値の配列も必要です。

ここでは、3色を使用します。 

1つは低い方、1つは範囲の真ん中、1つは高い方です。

watchOSは色間のグラデーションを処理するので、私たちが提供する必要がある唯一の追加情報は、各色がゲージに沿って配置されるべき場所を表現するための値の配列です。

すべての価値観がわかったので、グラフィックコーナーコンプリケーションテンプレートを作成する必要があります。

ゲージプロバイダーとテキストプロバイダーでコーナーコンプリケーションを作成するので、GraphicCornerGaugeTextテンプレートのインスタンスを作成します。

テンプレートインスタンスを作成したら、ゲージプロバイダーから始めて、そのプロバイダーを作成する必要があります。

ここでは、CLKSimpleGaugeProviderを使用しています。

スタイルは、ゲージ内の値の周りにリングを表示するリング、またはゲージ内の進行状況を埋めたい場合の塗りつぶしにすることができます。

ここでは、リングスタイルを使用します。

次に、ゲージカラーを、以前に作成したグラデーションカラーとゲージカラーの場所に設定し、ゲージに沿って色がどこにあるかを定義します。

最後に、塗りつぶし分数を設定する必要があります。

これは、ゲージの現在の値を設定し、データに応じて動的である必要があります。

次に、コーナーテンプレートのゲージプロバイダープロパティを設定し、それぞれに色合いの色で以前に作成したテンプレートのさまざまなテキストプロバイダーを設定します。

残っているのは、完成したテンプレートを渡してタイムラインエントリを作成することだけです。

これは素晴らしく見えます。

色間のグラデーションがシステムによって処理され、リングスタイルのゲージプロバイダーがリングに現在の値に集中していることがわかります。

次に、インフォグラフとインフォグラフモジュラーの両方の時計の文字盤で利用可能なグラフィック円形コンプリケーションファミリーテンプレートを見てみましょう。

グラフィックサーキュラーテンプレートは、ゲージプロバイダーとテキストプロバイダーを組み合わせて、範囲の末尾に値を持つオープンゲージを表示する機能を提供します。

また、オープンゲージで中央のテキスト値の下にテキストを含むテンプレートを作成したり、オープンゲージで中央のテキストの下にフルカラーの画像プロバイダーを使用することもできます。

閉じたゲージを使用すると、ゲージまたはテキストの内側にフルカラーの画像を提供できます。

そして最後に、フルカラー画像を使用して、合併症の領域全体を表現できます。

前の例では、気象データを表すグラフィックコーナーコンプリケーションを作成しました。

それでは、同じデータを取り、テキスト付きのオープンゲージを使用してグラフィック円形コンプリケーションを作成しましょう。

使用するテキストプロバイダー、グラデーションカラー、グラデーションカラーの場所は、グラフィックコーナーコンプリケーションで使用したのと同じです。

主な違いは、グラフィック円形のオープンゲージ範囲のテキストテンプレートをインスタンス化する必要があることです。

前回と同じようにゲージプロバイダーを作成します。

もう1つの変更は、テンプレートの中央テキストプロバイダープロパティを設定することです。グラフィック円形テンプレートでは、これは外部テキストプロバイダーでした。

そして、それがすべてです。

今、私たちはグラフィックな円形のコンプリケーションを持っています。

しかし、グラフィックな円形の合併症でできることはもっとあります。

インフォグラフの文字盤には、グラフィックベゼルと呼ばれる別のファミリーがあります。

これは、グラフィック円形のコンプリケーションを利用し、テキストプロバイダーを追加して、タイムベゼル内にテキストをラップします。

まず、グラフィックの円形テンプレートを作成することから始めます。

この例では、最後の例で作成したものを使用します。

グラフィック循環テンプレートが設定されたら、GraphicBezelCircularTextテンプレートのインスタンスを作成します。

これには、設定されたグラフィック円形テンプレートとベゼルテキストのテキストプロバイダーが必要です。

ここでは、例のためにいくつかの値をハードコーディングしているだけです。

最後に、コンプリケーションタイムラインエントリ用に設定されたベゼルテンプレートを渡す必要があります。

これが完成したグラフィックベゼルコンプリケーションです。

テキストはベゼルに沿って自動的に湾曲し、大文字で表示されます。

ベゼルテキストは、切り捨てられる前にベゼルの180度近くを埋めることができます。

コンプリケーションファミリーへの最後の追加は、インフォグラフモジュラーウォッチフェイスで利用可能なグラフィックレクタンギュラーです。

このファミリーには、文字盤の中央を埋め尽くすフルカラー画像を作成できるテンプレートがあります。

このテンプレートには、テキストプロバイダーも含まれています。

この画像は非常に視覚的であるべきであり、表示されている情報を伝えるためにテキストに依存してはいけません。

グラフィックの長方形のテンプレートは、複数のテキストプロバイダーを利用して、より伝統的な構成も可能です。

さらに、ヘッダーテキストの横に画像を使用でき、3行目のテキストの代わりにゲージプロバイダーを表示するテンプレートを使用することもできます。

これは進歩を伝えるのに最適です。

ヘッダーテキストとその下に大きなフルカラー画像を提供するグラフィック長方形のコンプリケーションを作成しましょう。

まず、グラフィックの長方形の大きな画像テンプレートをインスタンス化する必要があります。

次のステップは、ヘッダーテキストでテキストプロバイダーを作成することです。

繰り返しますが、これは複数のテキストプロバイダーで構成されるテキストプロバイダーである可能性があります。

最後に、データの画像を使用してフルカラーの画像プロバイダーを作成します。

新しいインフォグラフとインフォグラフモジュラーウォッチフェイスのコンプリケーションを作成する際に留意すべき重要なポイントは、更新の機会が同じままであることです。

24時間ごとに50回のコンプリケーションプッシュアップデートが保証されており、アプリがバックグラウンドアプリの更新を利用している場合や、その人のApple Watchで最近使用されたアプリにある場合は、1時間ごとに更新される可能性があります。

グラフィック円形とグラフィック長方形のファミリを利用するときは、データの取得、処理、画像のレンダリング中に潜在的なCPUと更新時間のしきい値があることに注意してください。この作業をすばやく実行してください。

フルカラー画像プロバイダーの場合は、アクセシビリティラベルプロパティを使用して、VoiceOverを使用している人々に意味のある情報を提供します。

これは、付随するテキストがないため、画像のみを使用するグラフィック円形テンプレートや、多くのデータを表現できるグラフィック長方形の大きな画像テンプレートにとって特に重要です。

ClockKitフレームワークを使用した新しいグラフィックコンプリケーションの作成の詳細については、developer.apple.comのApple開発者ドキュメントをご覧ください。

ヒューマンインターフェースガイドラインのwatchOS SketchとPhotoshopのリソースは、Apple Watch Series 4とwatchOS 5にも更新されました。

さらに、グラフィックコンプリケーションファミリーの各テンプレートのサイズ仕様はここに示されており、developer.apple.comのヒューマンインターフェイスガイドラインにも記載されています。