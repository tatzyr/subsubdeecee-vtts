207

Betsy Langowski: 2017年、iPhone Xがリリースされました。

iOS 11 SDKとリンクすることで、アプリは美しい新しいディスプレイを利用できます。

今年は、iPhone XS、iPhone XS Max、iPhone XRを紹介します。

iPhone XSはゼロから完全に再設計されましたが、画面サイズはiPhone Xと同じなので、このビデオはまったく新しい解像度のiPhone XS MaxとiPhone XRに焦点を当てます。

アプリが主にUIKitフレームワークを使用していて、すでにアプリをiPhone Xに適応させている場合は、素晴らしい状態にあるはずです。

あなたがする必要があるのは、これらの素晴らしい新しい携帯電話を最大限に活用するために、iOS 12とリンクすることだけです。

iPhone X、そしてiPhone XS MaxとiPhone XR用のアプリを更新する方法について復習が必要な場合は、「iPhone X用アプリの構築」のビデオをチェックしてください。

このビデオでは、TrueDepthカメラがUIを遮らないようにすること、UI要素がホームインジケーターから離れて配置されていることを確認すること、および行う必要があるその他の一般的な調整について説明します。

重い作業のほとんどはUIKitによって行われますが、アプリを最適化する必要があるかもしれません。このビデオは、iPhone XS MaxとiPhone XR、そしてiPhone Xに最適なガイダンスを提供します。

iPhone XS MaxとiPhone XRのアプリのアップデートを簡単にするために、今年あなたのために改善したいくつかのことについて話しましょう。

「iPhone X用アプリの構築」を見た場合、ランドスケープモードでのテストの重要性を覚えています。

これが重要な場所の1つは、コレクションビューです。

私は、タブバーコントローラーに埋め込まれたナビゲーションコントローラーに埋め込まれた、単なるコレクションビューコントローラーであるこの本当にシンプルなサンプルアプリを構築しました。

セルの間隔をあけるためのオフセットがありますが、それ以外の場合はデフォルトを使用しているだけです。

一見すると、肖像画では、それは本当によく見えます。

しかし、横向きでは、このアプリには問題があります。左側のセルはTrueDepthカメラの後ろにあります。

これに対処するには、コレクションビューのセクションインセット参照を、デフォルトのコンテンツインセットではなく、セーフエリアに設定する必要があります。

これはコードで行うことができ、iPhone Xが最初にリリースされたとき、それが唯一の方法でした。

しかし、このアプリはストーリーボードで構築されたため、最近のXcodeでは、インターフェイスビルダーで直接この変更を行うことができます。

ストーリーボードでコレクションビューを選択すると、サイズインスペクタを選択し、インセットを値からセーフエリアに変更できます。

今、アプリを構築して実行すると、私のコレクションビューは横向きのTrueDepthカメラを回避し、コードの変更は必要ありません。

自動レイアウトは、ココアとココアタッチのレイアウトシステムです。

アプリが自動レイアウトを使用している場合、iPhone XS MaxやiPhone XRのような新しい画面サイズを最適化する作業のほとんどは、あなたのために行われていることがわかります。

自動レイアウトから得られる大きな利点を利用していない場合は、今年はパフォーマンスを劇的に向上させたため、今は間違いなく更新する時です。

以下は、iOS 12の青色の自動レイアウト性能と比較して、灰色のiOS 11の自動レイアウト性能の例です。

iOS 11と比較して、iOS 12で木を動かすのがどれだけ短い時間を取るかを見てください。

アプリで自動レイアウトを使用する方がずっと速くなりました。

私たちがそれをどのようにやったかを舞台裏で見たい場合は、WWDC 2018のビデオ「ハイパフォーマンスオートレイアウト」をチェックしてください。

iPhone XS MaxとiPhone XRの1つの変更点の1つは、ランドスケープでのUISplitViewControllerの動作です。

これは、iPadのポートレートモードでのメールの仕組みによく似ています。

iPhone XS Maxシミュレーターで実行して作ったこの非常にシンプルなテストアプリを見てください。

4つのセルを持つ私のマスタービューは、ボタンを押すだけで入ってきて、同様に却下されます。

私のアプリは、displayModeButtonItemを設定したため、新しいハードウェアで自動的にこの動作をしました。

この動作は、presentsWithGestureを使用する場合にも設定されます。

これがコードでどのように見えるかを覗いてみましょう。

私のアプリデリゲートでは、UISplitViewControllerのdisplayModeButtonItemを入手し、顧客がタップするためのナビゲーションバーの左バーボタン項目として設定しました。

だから今、私はiPhone XS MaxとiPhone XRの動作をオプトインしています。

また、presentsWithGestureをtrueに設定しています。

これにより、顧客はスワイプでマスタービューにアクセスできます。

これはオプションで、アプリの必要に応じてfalseに設定できます。

注意すべきことが1つあります。

preferredDisplayModeを自動に設定することに依存している場合、これは自動動作です。

カスタマイズを行い、この動作をオプトアウトしたい場合は、displayModeButtonItemを完全に使用し、presentsWithGestureをfalseに設定してください。

preferredDisplayModeをallVisibleに設定することもできます。

わかりました。

一般的な落とし穴について話しましょう。 では。

一部のアプリでは、背景画像が特定の寸法に設定されているか、特定のアセットが画面上のスポットに固定されている場合があります。

これはゲームで最も一般的ですが、アプリはさまざまな理由でこのようなテクニックを使用する可能性があります。

アプリがスケーリングされた画像を設定している場合、iPhone XS MaxまたはiPhone XRで実行すると、コンテンツが誤ってスケーリングされていることに気付くことがあります。

標準のUIKitフレームワークを使用するアプリとは異なり、これらの携帯電話はまだ新しいですが、少し特別なケースを行い、アプリまたはアプリが使用しているフレームワークに新しい画面を伝える必要があるかもしれません。

iPhone XRとiPhone XS Maxの両方のディスプレイ寸法は、幅414ポイント、高さ896ポイントです。

資産を構築する際に、iPhone XRは2倍のデバイスであり、iPhone XS Maxは3倍のデバイスであることを覚えておいてください。

したがって、ピクセルでは、iPhone XRの解像度は828 x 1,792ピクセルです。

iPhone XS Maxの解像度は1,242 x 2,688ピクセルです。

注意！

フレームワークが絶対に必要とする場合にのみ、画面の寸法をハードコードする必要があります。

これにより、ゲームや同様のアプリがゲートからすぐに機能する可能性がありますが、絶対に必要でない限り、これらの方法の使用は避けるべきです。

UIKitに仕事をさせて、代わりに自動レイアウトを使ってください。

さまざまなハードウェアモデルでアプリを特定の方法で動作させるのは魅力的かもしれませんが、ハードウェアごとに特別なケースを作ることは避けるべきです。

これは新機能の開発に時間がかかり、大部分が冗長な作業です。

さらに、コードが認識されない携帯電話のモデルで実行されている場合、予期しない問題が発生する可能性があります。

すぐにアプリを更新できない場合、これは顧客を傷つける可能性があります。

iOSアプリをiPhone Xで実行するための特別なケースを作った場合、iPhone XS MaxとiPhone XRのためにすべてのハードワークをやり直す必要があります。

グラフィカルなニーズに対応するためにアプリ内で寸法を設定する必要がある場合でも、その文字列チェックの背後にあるデバイスモデルとゲートの動作を検索しないでください。

「これはiPhone Xですか?」というようなコードを書くべきではありません。Aをしてください。

他？Bをしてください。」

これは、アプリ全体にユニバーサルセーフエリアインセットを採用し、将来の自分に多くの時間と労力を節約する絶好の機会です。

今は、機能の可用性を探しているときに、コードをどのように分岐させるかについて本当に勤勉になるのに最適な時期です。

iPhone SEやすべてのiPadなど、すでにサポートしている他のiPhoneと同様に、iPhone XRは3D Touchやデュアルカメラをサポートしていないため、これらの動作に頼らないことが重要です。

例として3D Touchを使ってみましょう。

ホームアプリは、サポートされているデバイスで3D Touchを使用するが、3D Touchをサポートしていないデバイス、またはそれをオフにした可能性のあるユーザーに完全な機能セットを提供するアプリケーションの素晴らしい例です。

デバイスが3D Touchを使用しているかどうかを確認するのは簡単です。

サンプルコードを見てみましょう。 サンプルコードを見てみましょう。

まず、ここで強調表示されているように、起動時にデバイスが機能をサポートしているかどうかを確認します。

ただし、アプリの実行中にユーザーが3D Touchをオフにできることを覚えておいてください。

したがって、t traitCollectionDidChangeデリゲートメソッドの実装の一部として、このチェックも行う必要があります。

いずれの場合も、3D TouchをサポートしていないデバイスにUILongPressGestureRecognizerなどの代替手段を使用するようにコードを分岐し、すべてのデバイスで完全な機能セットが表現されるようにします。

疑わしい場合は、コードがnilを処理でき、予期しないものを取り戻すときに優雅に失敗するのに十分堅牢であることを確認してください。

ほとんどのアプリでは、特にすでにiPhone X用に最適化されている場合は、今年はiPhone XS、iPhone XS Max、iPhone XRをサポートする作業はあまりありません。

サポートが必要な場合は、iPhone Xのビデオや今年のWWDC 2018セッションからたくさん入手できます。

関連コンテンツをチェックして、developer.apple.comで詳細を見つけることができます。